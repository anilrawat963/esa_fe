import {
  s as s6
} from "./chunk-STXFDKJW.js";
import {
  e
} from "./chunk-U2MAPSMR.js";
import {
  f as f3
} from "./chunk-QPBITBUR.js";
import "./chunk-PJJUVY7C.js";
import "./chunk-7VJQTJLO.js";
import {
  c
} from "./chunk-SQ4OSZIG.js";
import "./chunk-MA6OR5A6.js";
import "./chunk-RCHRSC54.js";
import {
  a as a2
} from "./chunk-ZEI5DZXH.js";
import {
  s as s4
} from "./chunk-RGWH5UES.js";
import {
  c as c2
} from "./chunk-2KBTJPSU.js";
import {
  o as o3
} from "./chunk-SL3GC7WV.js";
import "./chunk-2U5X5TIX.js";
import {
  p as p2
} from "./chunk-5D65KWSM.js";
import "./chunk-ABHLEPDK.js";
import "./chunk-4FQUAV7M.js";
import {
  A,
  l as l3
} from "./chunk-EVZ7KLPS.js";
import {
  l as l2
} from "./chunk-JSH3APTG.js";
import "./chunk-WQT2KLDB.js";
import {
  d
} from "./chunk-UVDECGZC.js";
import {
  o as o2,
  s as s2
} from "./chunk-VKFTCFFM.js";
import {
  s as s3
} from "./chunk-ZETARPSI.js";
import {
  f as f2
} from "./chunk-TCDV4P3G.js";
import {
  b2,
  d as d2,
  l as l4,
  m as m5,
  p as p3,
  s as s5,
  y as y3
} from "./chunk-CZOYDK6P.js";
import {
  m as m4,
  u as u2
} from "./chunk-RS755KXS.js";
import "./chunk-TMUM75KQ.js";
import "./chunk-KY5OS6CK.js";
import "./chunk-3U5UUY3S.js";
import "./chunk-UOYGMZIS.js";
import "./chunk-RXH2WNPA.js";
import "./chunk-TWU3GKHX.js";
import "./chunk-BGIBV6LL.js";
import "./chunk-UQXJMFRI.js";
import "./chunk-DY7N5RAZ.js";
import {
  j
} from "./chunk-6TCXGIIN.js";
import {
  l
} from "./chunk-NP2TBOXH.js";
import {
  C,
  N,
  O,
  P,
  S,
  k,
  q,
  v,
  x
} from "./chunk-N2KDB6KT.js";
import "./chunk-WBYRWTBX.js";
import "./chunk-WFCLXKCE.js";
import "./chunk-WX3525ER.js";
import "./chunk-FHCV4NTV.js";
import {
  g
} from "./chunk-HCTBVF3W.js";
import "./chunk-NH6FXYCM.js";
import "./chunk-YE4E5JCT.js";
import "./chunk-SXZO7ULH.js";
import "./chunk-H34D76ZQ.js";
import "./chunk-QTRET3PG.js";
import "./chunk-FMOL5XMB.js";
import "./chunk-VNSHGTPN.js";
import "./chunk-OEBAFVQK.js";
import "./chunk-76V6RN4F.js";
import "./chunk-2W3LGFFY.js";
import "./chunk-5BM4D5UD.js";
import "./chunk-W2EKXSEY.js";
import "./chunk-DUZAVZR4.js";
import "./chunk-EK7HOTRR.js";
import "./chunk-G5IXTUNN.js";
import "./chunk-GCTH5LET.js";
import "./chunk-TTLSEJNG.js";
import "./chunk-ZVTEFYZX.js";
import "./chunk-LPUPM55U.js";
import "./chunk-EKZRA6TO.js";
import "./chunk-M5SP6ZBM.js";
import "./chunk-2HGIYEIL.js";
import "./chunk-XX3OKYJS.js";
import "./chunk-OTCNIJ2H.js";
import "./chunk-JGA5YJWL.js";
import "./chunk-GCI4MA3M.js";
import "./chunk-SJ2OBYX2.js";
import "./chunk-MDJNYPVI.js";
import "./chunk-Z6VKIQV2.js";
import "./chunk-4PXNA4MD.js";
import "./chunk-7HTU7ZUX.js";
import {
  b
} from "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import {
  m as m2
} from "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import {
  p
} from "./chunk-PEL3D3ZN.js";
import "./chunk-Q5KWD3VQ.js";
import "./chunk-BUQC3CLV.js";
import {
  t
} from "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import {
  n
} from "./chunk-C3FRY5U4.js";
import {
  n2,
  q as q2
} from "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import {
  m as m3,
  y
} from "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import {
  F,
  y2
} from "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import "./chunk-JW6DU3OK.js";
import "./chunk-CNYNCKEV.js";
import "./chunk-XL5QPCXN.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-W75DBJD7.js";
import "./chunk-QF7FRVN6.js";
import {
  b as b3
} from "./chunk-P6IKJIMO.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import "./chunk-T7F6Q6JJ.js";
import "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import {
  u
} from "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import {
  f
} from "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import "./chunk-XXLHAM2M.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import "./chunk-GNMPGHLQ.js";
import {
  o2 as o,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/graphic/isOGCFeatureGraphicOrigin.js
var i = Symbol("isOGCFeatureGraphicOrigin");

// node_modules/@arcgis/core/graphic/OGCFeatureGraphicOrigin.js
var o4;
var a3 = class extends s2 {
  get [(o4 = i, n2)]() {
    return this.layer;
  }
  get [n]() {
    return this.layer;
  }
  get [o2]() {
    return this.layer;
  }
  constructor(r) {
    super(), this[o4] = true, this.type = "ogc-feature", this.layer = r;
  }
  get id() {
    return this.layer.id;
  }
};

// node_modules/@arcgis/core/layers/graphics/sources/OGCFeatureSource.js
var C2 = class extends u {
  constructor() {
    super(...arguments), this.featureDefinition = null, this.type = "ogc-feature";
  }
  load(e2) {
    return this.addResolvingPromise(this._loadOGCServices(this.layer, e2)), this.when();
  }
  getSource() {
    const { featureDefinition: { collection: e2, layerDefinition: t2, spatialReference: s7, supportedCrs: r }, layer: { apiKey: o5, customParameters: p4, effectiveMaxRecordCount: i2 } } = this;
    return { type: "ogc-source", collection: e2, layerDefinition: t2, maxRecordCount: i2, queryParameters: { apiKey: o5, customParameters: p4 }, spatialReference: s7, supportedCrs: r };
  }
  queryExtent(e2, t2 = {}) {
    return null;
  }
  queryFeatureCount(e2, t2 = {}) {
    return null;
  }
  queryFeatures(e2, t2 = {}) {
    return this.queryFeaturesJSON(e2, t2).then((e3) => g.fromJSON(e3));
  }
  queryFeaturesJSON(e2, t2 = {}) {
    const s7 = this.getSource();
    return this.load(t2).then(() => C(s7, e2, t2));
  }
  queryObjectIds(e2, t2 = {}) {
    return null;
  }
  serviceSupportsSpatialReference(e2) {
    const { isWebMercator: t2, isWGS84: s7, latestWkid: r, wkid: o5 } = e2, { supportedCrs: p4 } = this.featureDefinition;
    return s7 || t2 || !!o5 && !!p4[o5] || !!r && !!p4[r];
  }
  _conformsToType(e2, t2) {
    const s7 = new RegExp(`^${o(t2)}$`, "i");
    return e2.conformsTo.some((e3) => s7.test(e3)) ?? false;
  }
  _getCapabilities(e2, t2) {
    return { analytics: { supportsCacheHint: false }, attachment: null, data: { isVersioned: false, isBranchVersioned: false, supportsAttachment: false, supportsM: false, supportsZ: e2 }, metadata: { supportsAdvancedFieldProperties: false }, operations: { supportsCalculate: false, supportsTruncate: false, supportsValidateSql: false, supportsAdd: false, supportsDelete: false, supportsEditing: false, supportsChangeTracking: false, supportsQuery: false, supportsQueryBins: false, supportsQueryPivot: false, supportsQueryAnalytics: false, supportsQueryAttachments: false, supportsQueryTopFeatures: false, supportsResizeAttachments: false, supportsSync: false, supportsUpdate: false, supportsExceedsLimitStatistics: false, supportsAsyncConvert3D: false }, query: { maxRecordCount: t2, maxRecordCountFactor: void 0, maxUniqueIDCount: void 0, standardMaxRecordCount: void 0, supportsCacheHint: false, supportsCentroid: false, supportsCentroidOnDegeneratedQuantizedGeometry: false, supportsCurrentUser: false, supportsDegeneratedQuantizedGeometry: false, supportsDisjointSpatialRelationship: false, supportsDistance: false, supportsDistinct: false, supportsExtent: false, supportsFormatPBF: false, supportsGeometryProperties: false, supportsHavingClause: false, supportsHistoricMoment: false, supportsMaxRecordCountFactor: false, supportsOrderBy: false, supportsPagination: false, supportsPaginationOnAggregatedQueries: false, supportsPercentileStatistics: false, supportsQuantization: false, supportsQuantizationEditMode: false, supportsQueryByAnonymous: false, supportsQueryByOthers: false, supportsQueryGeometry: false, supportsResultType: false, supportsReturnMesh: false, supportsStandardizedQueriesOnly: false, supportsTopFeaturesQuery: false, supportsStatistics: false, supportsSpatialAggregationStatistics: false, supportedSpatialAggregationStatistics: { envelope: false, centroid: false, convexHull: false }, supportsDefaultSpatialReference: false, supportsFullTextSearch: false, supportsCompactGeometry: false, supportsSqlExpression: false, supportsTrueCurve: false, tileMaxRecordCount: void 0 }, queryRelated: { supportsCount: false, supportsOrderBy: false, supportsPagination: false, supportsCacheHint: false }, queryTopFeatures: { supportsCacheHint: false }, queryAttributeBins: s6, editing: { supportsDeleteByAnonymous: false, supportsDeleteByOthers: false, supportsGeometryUpdate: false, supportsGlobalId: false, supportsReturnServiceEditsInSourceSpatialReference: false, supportsRollbackOnFailure: false, supportsUpdateByAnonymous: false, supportsUpdateByOthers: false, supportsUploadWithItemId: false, supportsUpdateWithoutM: false, supportsAsyncApplyEdits: false, zDefault: void 0 } };
  }
  _getMaxRecordCount(e2) {
    const t2 = e2?.components?.parameters;
    return t2?.limit?.schema?.maximum ?? t2?.limitFeatures?.schema?.maximum;
  }
  _getStorageSpatialReference(e2) {
    const t2 = e2.storageCrs ?? x, s7 = N(t2);
    return null == s7 ? f.WGS84 : new f({ wkid: s7 });
  }
  _getSupportedSpatialReferences(e2, t2) {
    const s7 = "#/crs", r = e2.crs ?? [x], o5 = r.includes(s7) ? r.filter((e3) => e3 !== s7).concat(t2.crs ?? []) : r, p4 = /^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;
    return o5.filter((e3) => !p4.test(e3));
  }
  async _loadOGCServices(e2, s7) {
    const o5 = null != s7 ? s7.signal : null, { apiKey: p4, collectionId: i2, customParameters: u3, fields: n3, geometryType: h, hasZ: S2, objectIdField: C3, timeInfo: R, url: v2 } = e2, w = { fields: n3?.map((e3) => e3.toJSON()), geometryType: m3.toJSON(h), hasZ: S2 ?? false, objectIdField: C3, timeInfo: R?.toJSON() }, x2 = { apiKey: p4, customParameters: u3, signal: o5 }, O2 = await P(v2, x2), [j2, D] = await Promise.all([O(O2, x2), v(O2, x2)]);
    if (!this._conformsToType(j2, "http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson")) throw new s("ogc-feature-layer:no-geojson-support", "Server does not support geojson");
    const F2 = D.collections.find(({ id: e3 }) => e3 === i2);
    if (!F2) throw new s("ogc-feature-layer:collection-not-found", "Server does not contain the named collection");
    const T = this._conformsToType(j2, "http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30") ? await q(O2, x2) : null, A2 = await S(F2, w, x2), Q2 = this._getMaxRecordCount(T), P2 = this._getCapabilities(A2.hasZ, Q2), b4 = this._getStorageSpatialReference(F2).toJSON(), q3 = this._getSupportedSpatialReferences(F2, D), G = new RegExp(`^${o(k)}`, "i"), _ = {};
    for (const t2 of q3) {
      const e3 = N(t2);
      null != e3 && (_[e3] || (_[e3] = t2.replace(G, "")));
    }
    this.featureDefinition = { capabilities: P2, collection: F2, layerDefinition: A2, spatialReference: b4, supportedCrs: _ };
  }
};
__decorate([m()], C2.prototype, "featureDefinition", void 0), __decorate([m({ constructOnly: true })], C2.prototype, "layer", void 0), __decorate([m()], C2.prototype, "type", void 0), C2 = __decorate([a("esri.layers.graphics.sources.OGCFeatureSource")], C2);

// node_modules/@arcgis/core/layers/OGCFeatureLayer.js
var Q = s4();
var V = class extends a2(o3(s3(f3(c(p(p2(l2(e(t(b2(j(f2(l(b3)))))))))))))) {
  constructor(e2) {
    super(e2), this.capabilities = null, this.collectionId = null, this.copyright = null, this.description = null, this.displayField = null, this.elevationInfo = null, this.fields = null, this.fieldsIndex = null, this.fullExtent = null, this.geometryType = null, this.graphicOrigin = new a3(this), this.hasZ = void 0, this.labelingInfo = null, this.labelsVisible = true, this.legendEnabled = true, this.maxRecordCount = null, this.objectIdField = null, this.operationalLayerType = "OGCFeatureLayer", this.popupEnabled = true, this.popupTemplate = null, this.screenSizePerspectiveEnabled = true, this.source = new C2({ layer: this }), this.spatialReference = null, this.title = null, this.type = "ogc-feature", this.typeIdField = null, this.types = null, this.url = null;
  }
  destroy() {
    this.source?.destroy();
  }
  load(e2) {
    return this.addResolvingPromise(this.loadFromPortal({ supportedTypes: ["OGCFeatureServer"] }, e2).then(() => this._fetchService(e2))), this.when();
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  get effectiveMaxRecordCount() {
    return this.maxRecordCount ?? this.capabilities?.query.maxRecordCount ?? 5e3;
  }
  get isTable() {
    return this.loaded && null == this.geometryType;
  }
  set renderer(e2) {
    y2(e2, this.fieldsIndex), this._set("renderer", e2);
  }
  createPopupTemplate(e2) {
    return d(this, e2);
  }
  createQuery() {
    return new b();
  }
  getField(e2) {
    return this.fieldsIndex.get(e2);
  }
  getFieldDomain(e2, r) {
    let t2, i2 = false;
    const o5 = r?.feature?.attributes, s7 = this.typeIdField && o5?.[this.typeIdField];
    return null != s7 && this.types && (i2 = this.types.some((r2) => r2.id == s7 && (t2 = r2.domains?.[e2], "inherited" === t2?.type && (t2 = this._getLayerDomain(e2)), true))), i2 || t2 || (t2 = this._getLayerDomain(e2)), t2;
  }
  queryFeatures(e2, r) {
    return this.load().then(() => this.source.queryFeatures(b.from(e2) || this.createQuery(), r)).then((e3) => (e3?.features?.forEach((e4) => {
      e4.layer = e4.sourceLayer = this, e4.origin = this.graphicOrigin;
    }), e3));
  }
  async queryAttributeBins(e2, r) {
    throw new s("OGCFeatureLayer", "Layer source does not support queryAttributeBins capability");
  }
  serviceSupportsSpatialReference(e2) {
    return this.source?.serviceSupportsSpatialReference(e2) ?? false;
  }
  async _fetchService(e2) {
    await this.source.load(e2), this.read(this.source.featureDefinition, { origin: "service" }), y2(this.renderer, this.fieldsIndex), F(this.timeInfo, this.fieldsIndex);
  }
  _getLayerDomain(e2) {
    if (!this.fields) return null;
    for (const r of this.fields) if (r.name === e2 && r.domain) return r.domain;
    return null;
  }
};
__decorate([m({ readOnly: true, json: { origins: { service: { read: true } } } })], V.prototype, "capabilities", void 0), __decorate([m({ type: String, json: { write: true } })], V.prototype, "collectionId", void 0), __decorate([m({ type: String })], V.prototype, "copyright", void 0), __decorate([m({ readOnly: true })], V.prototype, "defaultPopupTemplate", null), __decorate([m({ readOnly: true, type: String, json: { origins: { service: { name: "collection.description" } } } })], V.prototype, "description", void 0), __decorate([m({ type: String })], V.prototype, "displayField", void 0), __decorate([m({ type: Number })], V.prototype, "effectiveMaxRecordCount", null), __decorate([m(m5)], V.prototype, "elevationInfo", void 0), __decorate([m({ type: [m2], json: { origins: { service: { name: "layerDefinition.fields" } } } })], V.prototype, "fields", void 0), __decorate([m(Q.fieldsIndex)], V.prototype, "fieldsIndex", void 0), __decorate([m({ readOnly: true, type: z, json: { origins: { service: { name: "layerDefinition.extent" } } } })], V.prototype, "fullExtent", void 0), __decorate([m({ type: y.apiValues, json: { origins: { service: { name: "layerDefinition.geometryType", read: { reader: y.read } } } } })], V.prototype, "geometryType", void 0), __decorate([m({ readOnly: true, clonable: false })], V.prototype, "graphicOrigin", void 0), __decorate([m({ type: Boolean, json: { origins: { service: { name: "layerDefinition.hasZ" } } } })], V.prototype, "hasZ", void 0), __decorate([m({ type: Boolean, readOnly: true })], V.prototype, "isTable", null), __decorate([m({ type: [A], json: { origins: { "web-document": { name: "layerDefinition.drawingInfo.labelingInfo", read: { reader: l3 }, write: true } } } })], V.prototype, "labelingInfo", void 0), __decorate([m(p3)], V.prototype, "labelsVisible", void 0), __decorate([m(d2)], V.prototype, "legendEnabled", void 0), __decorate([m({ type: Number })], V.prototype, "maxRecordCount", void 0), __decorate([m({ type: String, json: { origins: { service: { name: "layerDefinition.objectIdField" } } } })], V.prototype, "objectIdField", void 0), __decorate([m({ type: ["OGCFeatureLayer"] })], V.prototype, "operationalLayerType", void 0), __decorate([m(l4)], V.prototype, "popupEnabled", void 0), __decorate([m({ type: q2, json: { name: "popupInfo", write: true } })], V.prototype, "popupTemplate", void 0), __decorate([m({ types: m4, json: { origins: { service: { name: "layerDefinition.drawingInfo.renderer", write: false }, "web-scene": { types: u2, name: "layerDefinition.drawingInfo.renderer", write: true } }, name: "layerDefinition.drawingInfo.renderer", write: true } })], V.prototype, "renderer", null), __decorate([m(s5)], V.prototype, "screenSizePerspectiveEnabled", void 0), __decorate([m({ readOnly: true })], V.prototype, "source", void 0), __decorate([m({ readOnly: true, type: f, json: { origins: { service: { read: true } } } })], V.prototype, "spatialReference", void 0), __decorate([m({ type: String, json: { write: { enabled: true, ignoreOrigin: true, isRequired: true }, origins: { service: { name: "collection.title" } } } })], V.prototype, "title", void 0), __decorate([m({ readOnly: true, json: { read: false } })], V.prototype, "type", void 0), __decorate([m({ type: String, readOnly: true })], V.prototype, "typeIdField", void 0), __decorate([m({ type: [c2] })], V.prototype, "types", void 0), __decorate([m(y3)], V.prototype, "url", void 0), V = __decorate([a("esri.layers.OGCFeatureLayer")], V);
var Z = V;
export {
  Z as default
};
//# sourceMappingURL=OGCFeatureLayer-OYZTJXQ3.js.map
