import {
  a as a2
} from "./chunk-XPO6OCCI.js";
import {
  s as s3,
  t
} from "./chunk-43UUQEW5.js";
import {
  e,
  i as i3,
  p,
  p2
} from "./chunk-UOYGNM27.js";
import {
  g
} from "./chunk-HCTBVF3W.js";
import {
  P as P2
} from "./chunk-6VL5D5UP.js";
import {
  f as f2,
  u as u2
} from "./chunk-PLNHHGHL.js";
import {
  m as m3
} from "./chunk-QZQPB5XR.js";
import {
  m as m4
} from "./chunk-3FUHCAX3.js";
import {
  P,
  y3 as y
} from "./chunk-PZ5RULLK.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  r
} from "./chunk-7H3U4IJR.js";
import {
  _,
  c
} from "./chunk-AXZMNHTN.js";
import {
  f
} from "./chunk-5T3MJDSR.js";
import {
  n
} from "./chunk-234CIOHE.js";
import {
  H2 as H,
  s2
} from "./chunk-V2H77UEV.js";
import {
  o as o3
} from "./chunk-XWE6BM2U.js";
import {
  n as n2
} from "./chunk-XXLHAM2M.js";
import {
  b,
  m as m2
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a,
  m
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  i as i2,
  o as o2
} from "./chunk-65HD3WXL.js";
import {
  d,
  u3 as u,
  w
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i,
  o,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import {
  has
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/rest/geoprocessor/GPOptions.js
var i4;
var l = i4 = class extends b {
  constructor(e11) {
    super(e11), this.outSpatialReference = null, this.processExtent = null, this.processSpatialReference = null, this.returnColumnName = false, this.returnFeatureCollection = false, this.returnM = false, this.returnZ = false;
  }
  static from(e11) {
    return m(i4, e11);
  }
};
__decorate([m2({ type: f })], l.prototype, "outSpatialReference", void 0), __decorate([m2({ type: z })], l.prototype, "processExtent", void 0), __decorate([m2({ type: f })], l.prototype, "processSpatialReference", void 0), __decorate([m2({ nonNullable: true })], l.prototype, "returnColumnName", void 0), __decorate([m2({ nonNullable: true })], l.prototype, "returnFeatureCollection", void 0), __decorate([m2({ nonNullable: true })], l.prototype, "returnM", void 0), __decorate([m2({ nonNullable: true })], l.prototype, "returnZ", void 0), l = i4 = __decorate([a("esri.rest.geoprocessor.GPOptions")], l);

// node_modules/@arcgis/core/layers/support/MapImage.js
var s4 = class extends n2 {
  constructor(o7) {
    super(o7), this.extent = null, this.height = null, this.href = null, this.opacity = 1, this.rotation = 0, this.scale = null, this.visible = true, this.width = null;
  }
};
__decorate([m2({ type: z })], s4.prototype, "extent", void 0), __decorate([m2()], s4.prototype, "height", void 0), __decorate([m2()], s4.prototype, "href", void 0), __decorate([m2()], s4.prototype, "opacity", void 0), __decorate([m2()], s4.prototype, "rotation", void 0), __decorate([m2()], s4.prototype, "scale", void 0), __decorate([m2()], s4.prototype, "visible", void 0), __decorate([m2()], s4.prototype, "width", void 0), s4 = __decorate([a("esri.layers.support.MapImage")], s4);

// node_modules/@arcgis/core/rest/support/ArealUnit.js
var c2 = class extends n2 {
  constructor(r6) {
    super(r6), this.area = 0, this.units = null;
  }
};
__decorate([m2({ json: { write: true } })], c2.prototype, "area", void 0), __decorate([r(s3)], c2.prototype, "units", void 0), c2 = __decorate([a("esri.rest.support.ArealUnit")], c2);

// node_modules/@arcgis/core/rest/support/DataFile.js
var s5 = class extends n2 {
  constructor(r6) {
    super(r6), this.itemId = null, this.url = null;
  }
};
__decorate([m2({ type: String, json: { read: { source: "itemID" }, write: { target: "itemID" } } })], s5.prototype, "itemId", void 0), __decorate([m2({ type: String, json: { write: true } })], s5.prototype, "url", void 0), s5 = __decorate([a("esri.rest.support.DataFile")], s5);

// node_modules/@arcgis/core/rest/support/LinearUnit.js
var i5 = class extends n2 {
  constructor(o7) {
    super(o7), this.distance = 0, this.units = null;
  }
};
__decorate([m2({ json: { write: true } })], i5.prototype, "distance", void 0), __decorate([r(t)], i5.prototype, "units", void 0), i5 = __decorate([a("esri.rest.support.LinearUnit")], i5);

// node_modules/@arcgis/core/rest/support/parameterValueUtils.js
var a3 = "multi-value-";
var t2 = new o2({ GPArealUnit: "areal-unit", GPBoolean: "boolean", GPComposite: "composite", GPDataFile: "data-file", GPDate: "date", GPDouble: "double", GPFeatureRecordSetLayer: "feature-record-set-layer", Field: "field", GPLinearUnit: "linear-unit", GPLong: "long", GPRasterData: "raster-data", GPRasterDataLayer: "raster-data-layer", GPRecordSet: "record-set", GPString: "string", GPValueTable: "value-table", "GPMultiValue:GPArealUnit": `${a3}areal-unit`, "GPMultiValue:GPBoolean": `${a3}boolean`, "GPMultiValue:GPComposite": `${a3}composite`, "GPMultiValue:GPDataFile": `${a3}data-file`, "GPMultiValue:GPDate": `${a3}date`, "GPMultiValue:GPDouble": `${a3}double`, "GPMultiValue:GPFeatureRecordSetLayer": `${a3}feature-record-set-layer`, "GPMultiValue:Field": `${a3}field`, "GPMultiValue:GPLinearUnit": `${a3}linear-unit`, "GPMultiValue:GPLong": `${a3}long`, "GPMultiValue:GPRasterData": `${a3}raster-data`, "GPMultiValue:GPRasterDataLayer": `${a3}raster-data-layer`, "GPMultiValue:GPRecordSet": `${a3}record-set`, "GPMultiValue:GPString": `${a3}string` });

// node_modules/@arcgis/core/rest/support/ParameterValue.js
var a4 = class extends n2 {
  constructor(r6) {
    super(r6), this.dataType = null, this.paramName = null, this.value = null;
  }
};
__decorate([r(t2, { ignoreUnknown: false })], a4.prototype, "dataType", void 0), __decorate([m2()], a4.prototype, "paramName", void 0), __decorate([m2()], a4.prototype, "value", void 0), a4 = __decorate([a("esri.rest.support.ParameterValue")], a4);

// node_modules/@arcgis/core/rest/support/RasterData.js
var p3 = class extends n2 {
  constructor(r6) {
    super(r6), this.format = null, this.itemId = null, this.type = null, this.url = null;
  }
  readType(r6) {
    return "ImageService" === r6 ? "image-service" : null;
  }
};
__decorate([m2()], p3.prototype, "format", void 0), __decorate([m2({ json: { name: "itemID", write: true } })], p3.prototype, "itemId", void 0), __decorate([m2()], p3.prototype, "type", void 0), __decorate([o3("type")], p3.prototype, "readType", null), __decorate([m2({ json: { write: true } })], p3.prototype, "url", void 0), p3 = __decorate([a("esri.rest.support.RasterData")], p3);

// node_modules/@arcgis/core/rest/geoprocessor/utils.js
async function S(r6, a8, n6, s18, i11) {
  const u5 = {}, m9 = {}, c6 = [];
  return d2(s18, c6, u5), P2(c6).then((t19) => {
    const { outSpatialReference: c7, processExtent: p17, processSpatialReference: f7, returnColumnName: l5, returnFeatureCollection: y7, returnM: S3, returnZ: d6 } = n6, { path: N2 } = f2(r6);
    for (const e11 in u5) {
      const [r7, a9] = u5[e11];
      m9[e11] = t19.slice(r7, a9);
    }
    const j4 = c7 ? c7.wkid || c7 : null, g7 = f7 ? f7.wkid || f7 : null, J3 = "execute" === a8 ? { returnColumnName: l5 || void 0, returnFeatureCollection: y7 || void 0, returnM: S3 || void 0, returnZ: d6 || void 0 } : null, O3 = R({ ...p17 ? { context: { extent: p17, outSR: j4, processSR: g7 } } : { "env:outSR": j4, "env:processSR": g7 }, ...s18, ...J3, f: "json" }, null, m9), v2 = { ...i11, query: O3 };
    return H(`${N2}/${a8}`, v2);
  });
}
function d2(e11, r6, t19) {
  for (const a8 in e11) {
    const n6 = e11[a8];
    if (n6 && "object" == typeof n6 && n6 instanceof g) {
      const { features: e12 } = n6;
      t19[a8] = [r6.length, r6.length + e12.length], e12.forEach((e13) => {
        r6.push(e13.geometry);
      });
    }
  }
}
async function N(e11, t19) {
  switch (e11) {
    case "areal-unit":
      return c2.fromJSON(t19);
    case "boolean":
    case "double":
    case "long":
    case "string":
    case "value-table":
      return t19;
    case "date":
      return new Date(t19);
    case "data-file":
      return s5.fromJSON(t19);
    case "linear-unit":
      return i5.fromJSON(t19);
    case "feature-record-set-layer":
      if ("url" in t19) return s5.fromJSON(t19);
      if ("layerDefinition" in t19) {
        const e12 = new (0, (await import("./FeatureLayer-67ZFNT6Z.js")).default)(), { layerDefinition: a8, featureSet: n6 } = t19;
        return e12.read({ layerDefinition: a8, featureSet: n6 }, { origin: "portal-item" }), e12.spatialReference = f.fromJSON(n6.spatialReference ?? a8.spatialReference ?? a8.extent.spatialReference), e12;
      }
      return g.fromJSON(t19);
    case "record-set":
      return "url" in t19 ? s5.fromJSON(t19) : g.fromJSON(t19);
    case "raster-data":
    case "raster-data-layer":
      return "mapImage" in t19 ? s4.fromJSON(t19.mapImage) : p3.fromJSON(t19);
    case "field":
      return m3.fromJSON(t19);
  }
}
function j(e11) {
  return e11.startsWith(a3);
}
function g2(e11) {
  return e11.replace(a3, "");
}
async function J(e11, r6) {
  const t19 = g2(e11), a8 = "composite" === t19 ? r6.map((e12) => N(t2.fromJSON(e12.dataType), e12.value)) : r6.map((e12) => N(t19, e12));
  return Promise.all(a8);
}
async function O(e11) {
  const r6 = t2.fromJSON(e11.dataType), { paramName: t19 } = e11, a8 = j(r6) ? await J(r6, e11.value) : await N(r6, e11.value);
  return new a4({ dataType: r6, paramName: t19, value: a8 });
}
function R(e11, r6, t19) {
  for (const a8 in e11) {
    const r7 = e11[a8];
    Array.isArray(r7) ? e11[a8] = JSON.stringify(r7.map((e12) => R({ item: e12 }, true).item)) : r7 instanceof Date && (e11[a8] = r7.getTime());
  }
  return u2(e11, r6, t19);
}

// node_modules/@arcgis/core/rest/support/JobInfo.js
var p4;
var h = i2()({ esriJobCancelled: "job-cancelled", esriJobCancelling: "job-cancelling", esriJobDeleted: "job-deleted", esriJobDeleting: "job-deleting", esriJobTimedOut: "job-timed-out", esriJobExecuting: "job-executing", esriJobFailed: "job-failed", esriJobNew: "job-new", esriJobSubmitted: "job-submitted", esriJobSucceeded: "job-succeeded", esriJobWaiting: "job-waiting" }, { ignoreUnknown: false });
var d3 = 1e3;
var _a;
var g3 = (_a = class extends n2 {
  constructor(e11) {
    super(e11), this.jobId = null, this.jobStatus = null, this.messages = null, this.progress = null, this.requestOptions = null, this.sourceUrl = null, this._cancelJobTimer = void 0, this._jobCompletionTimer = void 0;
  }
  async cancelJob(e11) {
    const { jobId: t19, sourceUrl: s18 } = this, { path: a8 } = f2(s18), c6 = { ...this.requestOptions, ...e11, query: { f: "json" } }, n6 = `${a8}/jobs/${t19}/cancel`, { data: u5 } = await H(n6, c6), { messages: b4, jobStatus: m9, progress: j4 } = p4.fromJSON(u5);
    return this.set({ messages: b4, jobStatus: m9, progress: j4 }), "job-cancelled" === m9 ? this : new Promise((o7, t20) => {
      w(c6.signal, () => {
        this.clearCancelJobTimer(), t20(u());
      }), this.clearCancelJobTimer();
      const s19 = () => {
        this._cancelJobTimer || t20(u()), this.checkJobStatus(e11).then(({ jobStatus: e12 }) => {
          switch (e12) {
            case "job-cancelling":
            default:
              this._cancelJobTimer = setTimeout(s19, d3);
              break;
            case "job-deleted":
            case "job-deleting":
            case "job-executing":
            case "job-failed":
            case "job-new":
            case "job-submitted":
            case "job-succeeded":
            case "job-timed-out":
            case "job-waiting":
              t20(this);
              break;
            case "job-cancelled":
              o7(this);
          }
        }).catch((e12) => {
          t20(e12);
        });
      };
      this._cancelJobTimer = setTimeout(s19, d3);
    });
  }
  destroy() {
    clearInterval(this._cancelJobTimer), clearInterval(this._jobCompletionTimer);
  }
  async checkJobStatus(e11) {
    const { path: t19 } = f2(this.sourceUrl), s18 = { ...this.requestOptions, ...e11, query: { ...e11?.query, f: "json" } }, r6 = `${t19}/jobs/${this.jobId}`, { data: i11 } = await H(r6, s18), { messages: a8, jobStatus: c6, progress: n6 } = p4.fromJSON(i11);
    return this.set({ messages: a8, jobStatus: c6, progress: n6 }), this;
  }
  async fetchResultData(e11, t19, s18) {
    t19 = l.from(t19 || {});
    const { returnColumnName: r6, returnFeatureCollection: i11, returnM: a8, returnZ: c6, outSpatialReference: n6 } = t19, { path: j4 } = f2(this.sourceUrl), p17 = { returnColumnName: r6 || null, returnFeatureCollection: i11 || null, returnM: a8 || null, returnZ: c6 || null, outSR: n6, returnType: "data", f: "json", ...s18?.query }, h8 = R(p17, null), d6 = { ...this.requestOptions, ...s18, query: h8 }, g7 = `${j4}/jobs/${this.jobId}/results/${e11}`, { data: J3 } = await H(g7, d6);
    return O(J3);
  }
  async fetchResultImage(e11, t19, s18) {
    const { path: r6 } = f2(this.sourceUrl), i11 = { ...t19.toJSON(), f: "json" }, a8 = R(i11), c6 = { ...this.requestOptions, ...s18, query: a8 }, n6 = `${r6}/jobs/${this.jobId}/results/${e11}`, { data: u5 } = await H(n6, c6);
    return O(u5);
  }
  async fetchResultMapImageLayer() {
    const { path: e11 } = f2(this.sourceUrl), o7 = e11.indexOf("/GPServer/"), t19 = `${e11.slice(0, Math.max(0, o7))}/MapServer/jobs/${this.jobId}`;
    return new (0, (await import("./MapImageLayer-VQUQ2MO2.js")).default)({ url: t19 });
  }
  async waitForJobCompletion(e11 = {}) {
    const { interval: o7 = d3, signal: t19, statusCallback: s18, apiKey: a8 } = e11;
    return new Promise((e12, c6) => {
      w(t19, () => {
        this.clearJobCompletionTimer(), c6(u());
      }), this.clearJobCompletionTimer();
      const n6 = () => {
        this._jobCompletionTimer || c6(u()), this.checkJobStatus({ query: { token: a8 } }).then(({ jobStatus: t20 }) => {
          switch (t20) {
            case "job-succeeded":
              e12(this);
              break;
            case "job-executing":
            case "job-new":
            case "job-submitted":
            case "job-waiting":
              s18 && s18(this), this._jobCompletionTimer = setTimeout(n6, o7);
              break;
            case "job-cancelled":
            case "job-cancelling":
            case "job-deleted":
            case "job-deleting":
            case "job-failed":
            case "job-timed-out":
              c6(this);
              break;
            default:
              this._jobCompletionTimer = setTimeout(n6, o7);
          }
        }).catch((e13) => {
          c6(e13);
        });
      };
      this._jobCompletionTimer = setTimeout(n6, o7);
    });
  }
  clearCancelJobTimer() {
    clearTimeout(this._cancelJobTimer), this._cancelJobTimer = void 0;
  }
  clearJobCompletionTimer() {
    clearTimeout(this._jobCompletionTimer), this._jobCompletionTimer = void 0;
  }
}, p4 = _a, _a);
__decorate([m2()], g3.prototype, "jobId", void 0), __decorate([r(h, { ignoreUnknown: false })], g3.prototype, "jobStatus", void 0), __decorate([m2({ type: [a2] })], g3.prototype, "messages", void 0), __decorate([m2()], g3.prototype, "progress", void 0), __decorate([m2()], g3.prototype, "requestOptions", void 0), __decorate([m2({ json: { write: true } })], g3.prototype, "sourceUrl", void 0), g3 = p4 = __decorate([a("esri.rest.support.JobInfo")], g3);

// node_modules/@arcgis/core/rest/geoprocessor/submitJob.js
async function s6(s18, m9, n6, f7) {
  return n6 = l.from(n6 || {}), S(s18, "submitJob", n6, m9 ?? {}, f7).then(({ data: o7 }) => {
    const r6 = g3.fromJSON(o7);
    return r6.sourceUrl = s18, r6;
  });
}

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphQueryResultHeader.js
var s7 = class extends b {
  constructor(e11) {
    super(e11), this.headerKeys = [], this.outSpatialReference = null, this.exceededTransferLimit = false;
  }
};
__decorate([m2()], s7.prototype, "headerKeys", void 0), __decorate([m2()], s7.prototype, "outSpatialReference", void 0), __decorate([m2()], s7.prototype, "exceededTransferLimit", void 0), s7 = __decorate([a("esri.rest.knowledgeGraph.GraphQueryResultHeader")], s7);

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphQueryResult.js
var p5 = class extends b {
  constructor(r6) {
    super(r6), this.resultRows = [], this.resultHeader = new s7();
  }
};
__decorate([m2()], p5.prototype, "resultRows", void 0), __decorate([m2()], p5.prototype, "resultHeader", void 0), p5 = __decorate([a("esri.rest.knowledgeGraph.GraphQueryResult")], p5);

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphQueryStreamingResult.js
var p6 = class extends b {
  constructor(r6) {
    super(r6), this.resultRowsStream = new ReadableStream(), this.resultHeader = new s7();
  }
};
__decorate([m2()], p6.prototype, "resultRowsStream", void 0), __decorate([m2()], p6.prototype, "resultHeader", void 0), p6 = __decorate([a("esri.rest.knowledgeGraph.GraphQueryStreamingResult")], p6);

// node_modules/@arcgis/core/rest/knowledgeGraph/FieldIndex.js
var s8 = class extends n2 {
  constructor(o7) {
    super(o7), this.name = null, this.unique = null, this.ascending = true, this.description = "", this.fieldNames = [];
  }
};
__decorate([m2({ type: String, json: { write: true } })], s8.prototype, "name", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], s8.prototype, "unique", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], s8.prototype, "ascending", void 0), __decorate([m2({ type: String, json: { write: true } })], s8.prototype, "description", void 0), __decorate([m2({ type: [String], json: { write: true } })], s8.prototype, "fieldNames", void 0), s8 = __decorate([a("esri.rest.knowledgeGraph.FieldIndex")], s8);

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphProperty.js
var i6 = class extends n2 {
  constructor(t19) {
    super(t19), this.name = null, this.alias = null, this.fieldType = null, this.geometryType = null, this.hasM = null, this.hasZ = null, this.nullable = null, this.editable = true, this.required = false, this.defaultVisibility = true, this.systemMaintained = null, this.role = "esriGraphPropertyUNSPECIFIED", this.defaultValue = null;
  }
};
__decorate([m2({ type: String, json: { write: true } })], i6.prototype, "name", void 0), __decorate([m2({ type: String, json: { write: true } })], i6.prototype, "alias", void 0), __decorate([m2({ type: String, json: { write: true } })], i6.prototype, "fieldType", void 0), __decorate([m2({ type: String, json: { write: true } })], i6.prototype, "geometryType", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "hasM", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "hasZ", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "nullable", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "editable", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "required", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "defaultVisibility", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i6.prototype, "systemMaintained", void 0), __decorate([m2({ type: String, json: { write: true } })], i6.prototype, "role", void 0), __decorate([m2({ json: { write: true } })], i6.prototype, "defaultValue", void 0), i6 = __decorate([a("esri.rest.knowledgeGraph.GraphProperty")], i6);

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphObjectType.js
var i7 = class extends n2 {
  constructor(o7) {
    super(o7), this.name = null, this.alias = null, this.role = "Regular", this.strict = null, this.properties = [], this.fieldIndexes = [], this.type = null;
  }
};
__decorate([m2({ type: String, json: { write: true } })], i7.prototype, "name", void 0), __decorate([m2({ type: String, json: { write: true } })], i7.prototype, "alias", void 0), __decorate([m2({ type: String, json: { write: true } })], i7.prototype, "role", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], i7.prototype, "strict", void 0), __decorate([m2({ type: [i6], json: { write: true } })], i7.prototype, "properties", void 0), __decorate([m2({ type: [s8], json: { write: true } })], i7.prototype, "fieldIndexes", void 0), i7 = __decorate([a("esri.rest.knowledgeGraph.GraphObjectType")], i7);

// node_modules/@arcgis/core/rest/knowledgeGraph/EntityType.js
var e2 = class extends i7 {
  constructor(r6) {
    super(r6), this.type = "entity";
  }
};
e2 = __decorate([a("esri.rest.knowledgeGraph.EntityType")], e2);

// node_modules/@arcgis/core/rest/knowledgeGraph/RelationshipType.js
var t3 = class extends i7 {
  constructor(o7) {
    super(o7), this.endPoints = [], this.type = "relationship";
  }
};
__decorate([m2({ json: { write: true } })], t3.prototype, "endPoints", void 0), t3 = __decorate([a("esri.rest.knowledgeGraph.RelationshipType")], t3);

// node_modules/@arcgis/core/rest/knowledgeGraph/SourceTypeValueBehavior.js
var s9 = class extends n2 {
  constructor(r6) {
    super(r6), this.value = null, this.behavior = null;
  }
};
__decorate([m2({ type: String, json: { write: true } })], s9.prototype, "value", void 0), __decorate([m2({ type: String, json: { write: true } })], s9.prototype, "behavior", void 0), s9 = __decorate([a("esri.rest.knowledgeGraph.SourceTypeValueBehavior")], s9);

// node_modules/@arcgis/core/rest/knowledgeGraph/DataModel.js
var a5 = class extends n2 {
  constructor(e11) {
    super(e11), this.timestamp = null, this.spatialReference = null, this.strict = null, this.objectIdField = null, this.globalIdField = null, this.arcgisManaged = null, this.identifierInfo = null, this.searchIndexes = [], this.entityTypes = [], this.relationshipTypes = [], this.metaEntityTypes = [], this.provenanceSourceTypeValues = [];
  }
};
__decorate([m2({ type: Date, json: { type: Number, write: { writer: (e11, t19) => {
  t19.timestamp = e11?.getTime();
} } } })], a5.prototype, "timestamp", void 0), __decorate([m2({ type: f, json: { write: true } })], a5.prototype, "spatialReference", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], a5.prototype, "strict", void 0), __decorate([m2({ type: String, json: { write: true } })], a5.prototype, "objectIdField", void 0), __decorate([m2({ type: String, json: { write: true } })], a5.prototype, "globalIdField", void 0), __decorate([m2()], a5.prototype, "arcgisManaged", void 0), __decorate([m2()], a5.prototype, "identifierInfo", void 0), __decorate([m2()], a5.prototype, "searchIndexes", void 0), __decorate([m2({ type: [e2], json: { write: true } })], a5.prototype, "entityTypes", void 0), __decorate([m2({ type: [t3], json: { write: true } })], a5.prototype, "relationshipTypes", void 0), __decorate([m2({ type: [e2], json: { write: true } })], a5.prototype, "metaEntityTypes", void 0), __decorate([m2({ type: [s9], json: { write: true } })], a5.prototype, "provenanceSourceTypeValues", void 0), a5 = __decorate([a("esri.rest.knowledgeGraph.DataModel")], a5);

// node_modules/@arcgis/core/rest/knowledgeGraph/ServiceDefinition.js
var p7 = class extends n2 {
  constructor(t19) {
    super(t19), this.capabilities = [], this.supportsSearch = false, this.supportedQueryFormats = [], this.allowGeometryUpdates = false, this.searchMaxRecordCount = null, this.serviceCapabilities = null, this.maxRecordCount = null, this.description = "", this.copyrightText = "", this.units = "", this.spatialReference = null, this.currentVersion = null, this.dateFieldsTimeReference = null, this.serviceItemId = "", this.supportsDocuments = false, this.dataEditingNotSupported = false, this.schemaEditingNotSupported = false, this.supportsProvenance = false;
  }
};
__decorate([m2({ type: [String], json: { write: true } })], p7.prototype, "capabilities", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], p7.prototype, "supportsSearch", void 0), __decorate([m2({ type: [String], json: { write: true } })], p7.prototype, "supportedQueryFormats", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], p7.prototype, "allowGeometryUpdates", void 0), __decorate([m2({ type: Number, json: { write: true } })], p7.prototype, "searchMaxRecordCount", void 0), __decorate([m2({ type: Object, json: { write: true } })], p7.prototype, "serviceCapabilities", void 0), __decorate([m2({ type: Number, json: { write: true } })], p7.prototype, "maxRecordCount", void 0), __decorate([m2({ type: String, json: { write: true } })], p7.prototype, "description", void 0), __decorate([m2({ type: String, json: { write: true } })], p7.prototype, "copyrightText", void 0), __decorate([m2({ type: String, json: { write: true } })], p7.prototype, "units", void 0), __decorate([m2({ type: f, json: { write: true } })], p7.prototype, "spatialReference", void 0), __decorate([m2({ type: Number, json: { write: true } })], p7.prototype, "currentVersion", void 0), __decorate([m2({ type: Object, json: { write: true } })], p7.prototype, "dateFieldsTimeReference", void 0), __decorate([m2({ type: String, json: { write: true } })], p7.prototype, "serviceItemId", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], p7.prototype, "supportsDocuments", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], p7.prototype, "dataEditingNotSupported", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], p7.prototype, "schemaEditingNotSupported", void 0), __decorate([m2({ type: Boolean, json: { write: true } })], p7.prototype, "supportsProvenance", void 0), p7 = __decorate([a("esri.rest.knowledgeGraph.ServiceDefinition")], p7);

// node_modules/@arcgis/core/rest/knowledgeGraph/KnowledgeGraph.js
var p8 = class extends n2 {
  constructor(o7) {
    super(o7), this.url = null, this.dataModel = null, this.serviceDefinition = null;
  }
};
__decorate([m2({ type: String, json: { write: true } })], p8.prototype, "url", void 0), __decorate([m2({ type: a5, json: { write: true } })], p8.prototype, "dataModel", void 0), __decorate([m2({ type: p7, json: { write: true } })], p8.prototype, "serviceDefinition", void 0), p8 = __decorate([a("esri.rest.knowledgeGraph.KnowledgeGraph")], p8);

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmUtils.js
function e3(e11, o7, d6) {
  if (0 !== e11.error_code) throw new s(o7, d6, { errorCode: e11.error_code, errorMessage: e11.error_message });
}
function o4(e11) {
  return e11?.error_code ? new s("knowledgeGraphService:server-or-decoding-error", e11.error_message, { errorCode: e11.error_code }) : void 0;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/clientDataToWasmEncodedFactories.js
function t4(t19, r6, a8, o7 = false) {
  const c6 = new a8.ClientDataFetchRequestEncoder();
  c6.deleteLater();
  for (const e11 of t19) {
    const t20 = n3(e11, r6, a8, o7);
    c6.add_client_data_fetch_request_parameter(t20);
  }
  c6.encode();
  const s18 = c6.get_encoding_result();
  return e3(s18.error, "knowledge-graph:fetchClientDataAtKeys-encoding-failed", "Attempting to encode the fetchClientDataAtKeys failed"), structuredClone(s18.get_byte_buffer());
}
function n3(e11, t19, n6, r6) {
  const a8 = new n6.ClientDataKey();
  a8.deleteLater(), a8.key_string = e11;
  const o7 = new n6.ClientDataFetchRequestParameter();
  o7.deleteLater(), o7.set_key(a8);
  const c6 = t19.get(e11);
  return c6 && !r6 && (o7.v_tag = { v_tag: c6.version }), o7;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/knowledgeWasmAccess.js
var t5 = "esri/rest/knowledgeGraph/wasmInterface/";
var s10;
var r2;
async function n4() {
  const e11 = s10 ?? r2;
  if (e11) return e11;
  const t19 = !!has("wasm-simd");
  return r2 = o5(t19), r2;
}
async function o5(s18) {
  if (s18) {
    const { default: s19 } = await import("./arcgis-knowledge-client-core-simd-BSHATYJ3.js").then((e11) => e11.a);
    return s19({ locateFile: (s20) => n(t5 + s20) });
  }
  const { default: r6 } = await import("./arcgis-knowledge-client-core-RAMXGDKH.js").then((e11) => e11.a);
  return r6({ locateFile: (s19) => n(t5 + s19) });
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/WasmQueryWrapperInterfaces.js
var e4 = { exclude: 0, include: 1 };

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/queryToWasmEncodedFactories.js
function l2(e11, t19) {
  const n6 = new t19.ArrayValue();
  return n6.deleteLater(), e11.forEach((e12) => {
    n6.add_value(f3(e12, t19));
  }), n6;
}
function s11(e11, t19) {
  const n6 = new t19.ObjectValue();
  n6.deleteLater();
  for (const [o7, r6] of Object.entries(e11)) n6.set_key_value(o7, f3(r6, t19));
  return n6;
}
function u3(t19, i11) {
  if (t19 instanceof m4) return g4(t19, i11);
  if (t19 instanceof _) return h2(t19, i11);
  if (t19 instanceof y || t19 instanceof P) return p9(t19, i11);
  throw new s("knowledge-graph:unsupported-geometry", "Only Point, Multipoint, Polyline, and Polygon geometry are supported by ArcGIS Knowledge", { geometry: t19 });
}
function y2(e11, t19) {
  t19.input_quantization_parameters = { xy_resolution: e11.xyResolution, x_false_origin: e11.xFalseOrigin, y_false_origin: e11.yFalseOrigin, z_resolution: e11.zResolution, z_false_origin: e11.zFalseOrigin, m_resolution: e11.mResolution, m_false_origin: e11.mFalseOrigin };
}
function m5(t19, n6, o7) {
  if (!t19.extent) throw new s("knowledge-graph:illegal-output-quantization", "The Output quantization provided to the encoder had an illegal value as part of its extent", t19.extent);
  if (!t19.quantizeMode) throw new s("knowledge-graph:illegal-output-quantization", "The Output quantization contained an illegal mode setting", t19.quantizeMode);
  if (!t19.tolerance) throw new s("knowledge-graph:illegal-output-quantization", "The Output quantization contained an illegal tolerance setting", t19.quantizeMode);
  n6.output_quantization_parameters = { extent: { xmax: t19.extent.xmax, ymax: t19.extent.ymax, xmin: t19.extent.xmin, ymin: t19.extent.ymin }, quantize_mode: o7.esriQuantizeMode[t19.quantizeMode], tolerance: t19.tolerance };
}
function c3(e11, t19) {
  t19.provenance_behavior = { value: e4[e11] };
}
function f3(e11, n6) {
  if (null == e11) return "";
  if ("object" != typeof e11) return e11;
  if (e11 instanceof Date) return e11;
  if (e11 instanceof c) return u3(e11, n6);
  if (Array.isArray(e11)) {
    const t19 = new n6.ArrayValue();
    return t19.deleteLater(), e11.forEach((e12) => {
      t19.add_value(f3(e12, n6));
    }), t19;
  }
  return s11(e11, n6);
}
function p9(e11, t19) {
  const n6 = new t19.GeometryValue();
  n6.deleteLater(), n6.has_z = e11.hasZ, n6.has_m = e11.hasM;
  const o7 = [], i11 = [];
  let l5 = [];
  e11 instanceof y ? (n6.geometry_type = t19.esriGeometryType.esriGeometryPolyline, l5 = e11.paths) : e11 instanceof P && (n6.geometry_type = t19.esriGeometryType.esriGeometryPolygon, l5 = e11.rings);
  let s18 = 0, u5 = 0;
  return l5.forEach((e12) => {
    let t20 = 0;
    e12.forEach((e13) => {
      t20++, e13.forEach((e14) => {
        o7[u5] = e14, u5++;
      });
    }), i11[s18] = t20, s18++;
  }), n6.coords = new Float64Array(o7), n6.lengths = new Uint32Array(i11), n6;
}
function g4(e11, t19) {
  const n6 = new t19.GeometryValue();
  n6.deleteLater(), n6.geometry_type = n6.geometry_type = t19.esriGeometryType.esriGeometryMultipoint, n6.has_z = e11.hasZ, n6.has_m = e11.hasM;
  const o7 = [], r6 = [];
  r6[0] = e11.points.length;
  let a8 = 0;
  return e11.points.forEach((e12) => {
    e12.forEach((e13) => {
      o7[a8] = e13, a8++;
    });
  }), n6.coords = new Float64Array(o7), n6.lengths = new Uint32Array(r6), n6;
}
function h2(e11, t19) {
  const n6 = new t19.GeometryValue();
  n6.deleteLater(), n6.geometry_type = t19.esriGeometryType.esriGeometryPoint, n6.has_z = e11.hasZ, n6.has_m = e11.hasM;
  const o7 = [], r6 = [];
  r6[0] = 1, o7[0] = e11.x, o7[1] = e11.y;
  let a8 = 2;
  return e11.hasZ && (o7[a8] = e11.z, a8++), e11.hasM && (o7[a8] = e11.m, a8++), n6.coords = new Float64Array(o7), n6.lengths = new Uint32Array(r6), n6;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/WasmDataModelWrapperInterfaces.js
var e5 = { Regular: 0, Provenance: 1, Document: 2 };
var r3 = { esriFieldTypeSmallInteger: 0, esriFieldTypeInteger: 1, esriFieldTypeSingle: 2, esriFieldTypeDouble: 3, esriFieldTypeString: 4, esriFieldTypeDate: 5, esriFieldTypeOID: 6, esriFieldTypeGeometry: 7, esriFieldTypeBlob: 8, esriFieldTypeRaster: 9, esriFieldTypeGUID: 10, esriFieldTypeGlobalID: 11, esriFieldTypeXML: 12, esriFieldTypeBigInteger: 13, esriFieldTypeDateOnly: 14, esriFieldTypeTimeOnly: 15, esriFieldTypeTimestampOffset: 16 };
var i8 = { esriGeometryNull: 0, esriGeometryPoint: 1, esriGeometryMultipoint: 2, esriGeometryPolyline: 3, esriGeometryPolygon: 4, esriGeometryEnvelope: 5, esriGeometryAny: 7, esriGeometryMultiPatch: 9 };
var t6 = { esriMethodHintUNSPECIFIED: 0, esriUUIDESRI: 1, esriUUIDRFC4122: 2 };
var o6 = { esriTypeUNSPECIFIED: 0, esriTypeEntity: 1, esriTypeRelationship: 2, esriTypeBoth: 4, esriTypeMetaEntityProvenance: 8 };
var p10 = { esriGraphPropertyUNSPECIFIED: 0, esriGraphPropertyRegular: 1, esriGraphPropertyDocumentName: 2, esriGraphPropertyDocumentTitle: 3, esriGraphPropertyDocumentUrl: 4, esriGraphPropertyDocumentText: 5, esriGraphPropertyDocumentKeywords: 6, esriGraphPropertyDocumentContentType: 7, esriGraphPropertyDocumentMetadata: 8, esriGraphPropertyDocumentFileExtension: 9, esriGraphPropertyProvenanceInstanceId: 10, esriGraphPropertyProvenanceSourceType: 11, esriGraphPropertyProvenanceSourceName: 12, esriGraphPropertyProvenanceSource: 13, esriGraphPropertyProvenanceComment: 14, esriGraphPropertyProvenanceTypeName: 15, esriGraphPropertyProvenancePropertyName: 16 };
var y3 = { esriIdentifierInfoTypeUNSPECIFIED: 0, esriIdentifierInfoTypeDatabaseNative: 1, esriIdentifierInfoTypeUniformProperty: 2 };

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/updateToWasmEncodedFactories.js
function s12(t19, n6) {
  if (!t19.typeName) throw new s("knowledge-graph:no-type-name", "You must indicate the entity/relationship named object type to apply edits");
  if (!("originId" in t19)) {
    const e11 = new n6.EntityValue();
    e11.deleteLater(), e11.type_name = t19.typeName;
    for (const [i11, r6] of Object.entries(t19.properties)) e11.set_key_value(i11, w2(r6, n6));
    return t19.id && e11.set_id(t19.id), e11;
  }
  if ("originId" in t19 && "destinationId" in t19) {
    const e11 = new n6.RelationshipValue();
    e11.deleteLater(), e11.type_name = t19.typeName;
    for (const [i11, r6] of Object.entries(t19.properties)) e11.set_key_value(i11, w2(r6, n6));
    return t19.id && e11.set_id(t19.id), t19.originId && t19.destinationId && e11.set_related_entity_ids(t19.originId, t19.destinationId), e11;
  }
  throw new s("knowledge-graph:applyEdits-encoding-failure", "Could not determine the type of a named graph object passed to the encoder");
}
function l3(e11) {
  return { xy_resolution: e11.xyResolution, x_false_origin: e11.xFalseOrigin, y_false_origin: e11.yFalseOrigin, z_resolution: e11.zResolution, z_false_origin: e11.zFalseOrigin, m_resolution: e11.mResolution, m_false_origin: e11.mFalseOrigin };
}
function d4(e11, t19) {
  const n6 = new t19.EntityType();
  return n6.deleteLater(), g5(e11, t19, n6);
}
function u4(e11, t19) {
  const n6 = new t19.RelationshipType();
  n6.deleteLater();
  for (const i11 of e11.endPoints) {
    const e12 = new t19.EndPoint();
    e12.deleteLater(), e12.origin_entity_type = i11.originEntityType, e12.dest_entity_type = i11.destinationEntityType, n6.add_end_point(e12);
  }
  return g5(e11, t19, n6);
}
function p11(e11, t19) {
  const n6 = new t19.EntityType();
  return n6.deleteLater(), h3(e11, n6);
}
function y4(e11, t19) {
  const n6 = new t19.RelationshipType();
  return n6.deleteLater(), h3(e11, n6);
}
function f4(e11, t19) {
  const n6 = new t19.GraphProperty();
  return n6.deleteLater(), n6.name = e11.name, n6.alias = e11.alias ?? "", n6.field_type = { value: r3[e11.fieldType] }, n6.geometry_type = { value: e11.geometryType ? i8[e11.geometryType] : i8.esriGeometryNull }, n6.has_m = e11.hasM ?? false, n6.has_z = e11.hasZ ?? false, n6.nullable = e11.nullable ?? false, n6.editable = e11.editable, n6.required = e11.required, n6.default_visibility = e11.defaultVisibility, n6.system_maintained = e11.systemMaintained ?? false, n6.role = { value: p10[e11.role] }, n6.default_value = w2(e11.defaultValue, t19), n6;
}
function c4(e11, t19) {
  const n6 = new t19.GraphProperty();
  return n6.deleteLater(), e11.hasOwnProperty("alias") && (n6.alias = e11.alias), e11.hasOwnProperty("editable") && (n6.editable = e11.editable), e11.hasOwnProperty("required") && (n6.required = e11.required), e11.hasOwnProperty("defaultVisibility") && (n6.default_visibility = e11.defaultVisibility), e11.hasOwnProperty("defaultValue") && (n6.default_value = w2(e11.defaultValue, t19)), n6;
}
function m6(e11, t19) {
  const n6 = new t19.SearchIndexProperties();
  n6.deleteLater();
  for (const i11 of e11.propertyNames) n6.add_search_property_name(i11);
  return n6;
}
function _2(e11, t19) {
  const n6 = new t19.FieldIndex();
  n6.deleteLater(), n6.name = e11.name, n6.unique = e11.unique, n6.ascending = e11.ascending, n6.description = e11.description ?? "";
  for (const i11 of e11.fieldNames) n6.add_field(i11);
  return n6;
}
function g5(e11, t19, n6) {
  n6.name = e11.name, n6.alias = e11.alias ?? "", n6.role = { value: e5[e11.role] }, n6.strict = e11.strict;
  for (const i11 of e11.properties) {
    const e12 = f4(i11, t19);
    n6.add_property(e12);
  }
  return n6;
}
function h3(e11, t19) {
  return e11.hasOwnProperty("alias") && (t19.alias = e11.alias), t19;
}
function w2(e11, i11) {
  return null == e11 ? null : "object" != typeof e11 || e11 instanceof Date ? e11 : e11 instanceof c ? u3(e11, i11) : null;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmToClientDataFactories.js
function e6(e11, t19, _4, a8 = false) {
  const n6 = /* @__PURE__ */ new Map();
  for (let s18 = 0; s18 < e11.get_results_count(); s18++) {
    const r6 = e11.get_result_at(s18);
    if (2 !== r6.get_fetch_result_case().value || 0 !== r6.error().error_code) {
      const e12 = r6.get_key().key_string;
      _4.has(e12) && t19.delete(e12);
      continue;
    }
    const g7 = r6.get_value(), c6 = r6.get_key().key_string, o7 = _4.get(c6);
    let u5;
    if (2 === g7.get_data_case().value && o7) u5 = o7.value;
    else {
      if (1 !== g7.get_data_case().value) continue;
      {
        u5 = g7.get_data().client_data_string;
        const e12 = r6.get_value().get_v_tag().v_tag;
        a8 || t19.set(c6, { key: c6, version: e12, value: u5 });
      }
    }
    n6.set(c6, u5);
  }
  return n6;
}
function t7(e11) {
  const t19 = e11.get_keys(), _4 = new Array();
  for (let a8 = 0; a8 < t19.get_keys_count(); a8++) {
    const e12 = t19.get_key_at(a8);
    1 === e12.get_client_data_key_type().value && _4.push(e12.key_string);
  }
  return _4;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphDataModelOperationResult.js
var s13 = class extends b {
  constructor(o7) {
    super(o7), this.decoderError = null, this.resultsCount = 0, this.results = [], this.updatedKnowledgeGraph = null;
  }
};
__decorate([m2()], s13.prototype, "decoderError", void 0), __decorate([m2()], s13.prototype, "resultsCount", void 0), __decorate([m2()], s13.prototype, "results", void 0), __decorate([m2()], s13.prototype, "updatedKnowledgeGraph", void 0), s13 = __decorate([a("esri.rest.knowledgeGraph.GraphDataModelOperationResult")], s13);
var p12 = s13;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphAddFieldIndexResult.js
var e7 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
e7 = __decorate([a("esri.rest.knowledgeGraph.GraphAddFieldIndexResult")], e7);
var t8 = e7;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphAddNamedTypesResult.js
var r4 = class extends p12 {
  constructor(t19) {
    super(t19), this.entityAddResultsCount = 0, this.relationshipAddResultsCount = 0, this.entityAddResults = [], this.relationshipAddResults = [];
  }
};
__decorate([m2()], r4.prototype, "entityAddResultsCount", void 0), __decorate([m2()], r4.prototype, "relationshipAddResultsCount", void 0), __decorate([m2()], r4.prototype, "entityAddResults", void 0), __decorate([m2()], r4.prototype, "relationshipAddResults", void 0), r4 = __decorate([a("esri.rest.knowledgeGraph.GraphAddNamedTypesResult")], r4);
var p13 = r4;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphAddPropertyResult.js
var e8 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
e8 = __decorate([a("esri.rest.knowledgeGraph.GraphAddPropertyResult")], e8);
var t9 = e8;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphDeleteFieldIndexResult.js
var s14 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
s14 = __decorate([a("esri.rest.knowledgeGraph.GraphDeleteFieldIndexResult")], s14);
var t10 = s14;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphDeleteNamedTypeResult.js
var s15 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
s15 = __decorate([a("esri.rest.knowledgeGraph.GraphDeleteNamedTypeResult")], s15);
var t11 = s15;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphDeletePropertyResult.js
var s16 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
s16 = __decorate([a("esri.rest.knowledgeGraph.GraphDeletePropertyResult")], s16);
var t12 = s16;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphUpdateNamedTypesResult.js
var e9 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
e9 = __decorate([a("esri.rest.knowledgeGraph.GraphUpdateNamedTypesResult")], e9);
var t13 = e9;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphUpdatePropertyResult.js
var e10 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
e10 = __decorate([a("esri.rest.knowledgeGraph.GraphUpdatePropertyResult")], e10);
var t14 = e10;

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphUpdateSearchIndexResult.js
var s17 = class extends p12 {
  constructor(r6) {
    super(r6);
  }
};
s17 = __decorate([a("esri.rest.knowledgeGraph.GraphUpdateSearchIndexResult")], s17);
var t15 = s17;

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmToDataModelChangeResponseFactories.js
function c5(r6, e11) {
  const t19 = [];
  for (let s18 = 0; s18 < e11; s18++) {
    const e12 = r6.get_result_at(s18);
    t19.push({ name: e12.get_name(), error: o4(e12.get_error()) });
  }
  return t19;
}
function p14(r6) {
  const t19 = r6.get_results_count(), s18 = r6.get_entity_type_add_results_count(), o7 = r6.get_relationship_type_add_results_count(), n6 = new p13({ resultsCount: t19, results: c5(r6, t19), decoderError: o4(r6.error), entityAddResultsCount: s18, relationshipAddResultsCount: o7 });
  for (let e11 = 0; e11 < s18; e11++) {
    const t20 = r6.get_entity_type_add_results_at(e11), s19 = t20.get_name(), o8 = t20.get_error();
    n6.entityAddResults.push({ name: s19, error: o4(o8) });
  }
  for (let e11 = 0; e11 < o7; e11++) {
    const t20 = r6.get_relationship_type_add_results_at(e11), s19 = t20.get_name(), o8 = t20.get_error();
    n6.relationshipAddResults.push({ name: s19, error: o4(o8) });
  }
  return n6;
}
function i9(r6) {
  const e11 = r6.get_results_count();
  return new t13({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}
function a6(r6) {
  const e11 = r6.get_results_count();
  return new t11({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}
function m7(r6) {
  const e11 = r6.get_results_count();
  return new t9({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}
function f5(r6) {
  const e11 = r6.get_results_count();
  return new t12({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}
function g6(r6) {
  const e11 = r6.get_results_count();
  return new t14({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}
function h4(r6) {
  const e11 = r6.get_results_count();
  return new t15({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}
function y5(e11) {
  const t19 = e11.get_results_count();
  return new t8({ resultsCount: t19, results: c5(e11, t19), decoderError: o4(e11.error) });
}
function R2(r6) {
  const e11 = r6.get_results_count();
  return new t10({ resultsCount: e11, results: c5(r6, e11), decoderError: o4(r6.error) });
}

// node_modules/@arcgis/core/rest/knowledgeGraph/SearchIndex.js
var t16 = class extends b {
  constructor(r6) {
    super(r6), this.name = null, this.supportedCategory = "esriTypeUNSPECIFIED", this.analyzers = [], this.searchProperties = /* @__PURE__ */ new Map();
  }
};
__decorate([m2()], t16.prototype, "name", void 0), __decorate([m2()], t16.prototype, "supportedCategory", void 0), __decorate([m2()], t16.prototype, "analyzers", void 0), __decorate([m2()], t16.prototype, "searchProperties", void 0), t16 = __decorate([a("esri.rest.knowledgeGraph.SearchIndex")], t16);

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmToDataModelFactories.js
var h5 = false;
function v(n6) {
  n6.deleteLater(), h5 = false;
  const o7 = new a5({ timestamp: n6.timestamp, spatialReference: new f(n6.spatial_reference), strict: n6.strict, objectIdField: n6.objectid_property, globalIdField: n6.globalid_property, arcgisManaged: n6.arcgis_managed, identifierInfo: { identifierMappingInfo: { identifierInfoType: o(y3, n6.identifier_info?.identifier_mapping_info?.identifier_info_type?.value), databaseNativeIdentifier: n6.identifier_info?.identifier_mapping_info?.database_native_identifier, uniformPropertyIdentifier: { identifierPropertyName: n6.identifier_info?.identifier_mapping_info?.uniform_property_identifier?.identifier_property_name } }, identifierGenerationInfo: { uuidMethodHint: o(t6, n6.identifier_info?.identifier_generation_info?.uuid_method_hint?.value) } }, searchIndexes: k(n6.search_indexes), entityTypes: x(n6.entity_types), relationshipTypes: G(n6.relationship_types), metaEntityTypes: x(n6.meta_entity_types), provenanceSourceTypeValues: S2(n6.provenance_source_type_values.value_behavior_array) });
  return h5 && i.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("A big integer field was detected in the retrieved data model.  The `big-integer` field type is not fully supported in web clients.  Please see https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-Field.html#type"), o7;
}
function b2(e11) {
  return e11.deleteLater(), new e2(T(e11));
}
function j2(e11) {
  return e11.deleteLater(), new s8({ name: e11.name, unique: e11.unique, ascending: e11.ascending, description: e11.description, fieldNames: M(e11.fields) });
}
function T(e11) {
  return { name: e11.name, alias: e11.alias, role: o(e5, e11.role.value), strict: e11.strict, properties: P3(e11.properties), fieldIndexes: F(e11.field_indexes) };
}
function w3(e11) {
  return e11.deleteLater(), new i6({ alias: e11.alias, name: e11.name, fieldType: o(r3, e11.field_type.value) ?? void 0, geometryType: o(i8, e11.geometry_type.value) ?? null, hasM: e11.has_m, hasZ: e11.has_z, nullable: e11.nullable, editable: e11.editable, required: e11.required, defaultVisibility: e11.default_visibility, systemMaintained: e11.system_maintained, role: o(p10, e11.role.value), defaultValue: e11.default_value });
}
function I(e11) {
  e11.deleteLater();
  const t19 = T(e11), i11 = [];
  for (let r6 = 0; r6 < e11.end_points.size(); r6++) {
    const t20 = e11.end_points.get(r6);
    i11.push({ originEntityType: t20.origin_entity_type, destinationEntityType: t20.dest_entity_type });
  }
  return e11.end_points.delete(), new t3(Object.assign({ endPoints: i11 }, t19));
}
function L(e11) {
  return new s9({ behavior: e11.behavior, value: e11.value });
}
function x(e11) {
  const t19 = [];
  for (let i11 = 0; i11 < e11.size(); i11++) t19.push(b2(e11.get(i11)));
  return e11.delete(), t19;
}
function M(e11) {
  const t19 = [];
  for (let i11 = 0; i11 < e11.size(); i11++) t19.push(e11.get(i11));
  return e11.delete(), t19;
}
function P3(e11) {
  const t19 = [];
  for (let i11 = 0; i11 < e11.size(); i11++) {
    const r6 = w3(e11.get(i11));
    "esriFieldTypeBigInteger" === r6.fieldType && (h5 = true), t19.push(r6);
  }
  return e11.delete(), t19;
}
function F(e11) {
  const t19 = [];
  for (let i11 = 0; i11 < e11.size(); i11++) t19.push(j2(e11.get(i11)));
  return e11.delete(), t19;
}
function G(e11) {
  const t19 = [];
  for (let i11 = 0; i11 < e11.size(); i11++) t19.push(I(e11.get(i11)));
  return e11.delete(), t19;
}
function S2(e11) {
  const t19 = [];
  for (let i11 = 0; i11 < e11.size(); i11++) {
    const r6 = e11.get(i11);
    r6.deleteLater(), t19.push(L(r6));
  }
  return e11.delete(), t19;
}
function k(e11) {
  const i11 = [];
  for (let r6 = 0; r6 < e11.size(); r6++) {
    const n6 = new t16(), o7 = e11.get(r6);
    n6.name = o7.name, n6.supportedCategory = o(o6, o7.supported_category.value);
    const a8 = o7.analyzers.size();
    for (let e12 = 0; e12 < a8; e12++) n6.analyzers.push({ name: o7.analyzers.get(e12).name });
    o7.analyzers.delete();
    for (let e12 = 0; e12 < o7.search_properties.keys().size(); e12++) {
      const t19 = o7.search_properties.keys().get(e12), i12 = o7.search_properties.get(t19), r7 = [];
      for (let e13 = 0; e13 < i12.property_names.size(); e13++) r7.push(i12.property_names.get(e13));
      n6.searchProperties.set(t19, { propertyNames: r7 });
    }
    i11.push(n6);
  }
  return e11.delete(), i11;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmToGeometryFactories.js
function n5(t19, o7) {
  const s18 = { spatialReference: o7 }, r6 = p15(t19, s18), n6 = t19.lengths, a8 = t19.coords, h8 = n6[0];
  s18.points = [];
  let l5 = 0;
  for (let e11 = 0; e11 < h8; e11++) {
    const t20 = [];
    for (let e12 = 0; e12 < r6; e12++) t20[e12] = a8[l5], l5++;
    s18.points.push(t20);
  }
  return new m4(s18);
}
function a7(t19, e11) {
  const s18 = { spatialReference: e11 };
  let r6 = 2;
  p15(t19, s18);
  const n6 = t19.coords;
  return s18.x = n6[0], s18.y = n6[1], t19.has_z && (s18.z = n6[r6], r6++), t19.has_m && (s18.m = n6[r6]), new _(s18);
}
function h6(t19, e11) {
  const { paths: o7, hasM: s18, hasZ: n6 } = i10(t19, 3);
  return new y({ paths: o7, hasM: s18, hasZ: n6, spatialReference: e11 });
}
function l4(t19, e11) {
  const { paths: o7, hasM: r6, hasZ: n6 } = i10(t19, 4);
  return new P({ rings: o7, hasM: r6, hasZ: n6, spatialReference: e11 });
}
function i10(e11, o7) {
  const s18 = { paths: [], hasM: false, hasZ: false }, r6 = p15(e11, s18), { coords: n6, geometry_type: a8, lengths: h8 } = e11;
  if (a8.value !== o7) throw new s("KnowledgeGraph:illegal-geometry-type", "Illegal Geometry type for multipath conversion");
  let l5 = 0;
  return h8.forEach((t19) => {
    const e12 = [];
    for (let o8 = 0; o8 < t19; o8++) {
      const t20 = [];
      for (let e13 = 0; e13 < r6; e13++) t20[e13] = n6[l5], l5++;
      e12.push(t20);
    }
    s18.paths.push(e12);
  }), s18;
}
function p15(t19, e11) {
  let o7 = 2;
  return t19.has_z ? (e11.hasZ = t19.has_z, o7++) : e11.hasZ = false, t19.has_m ? (e11.hasM = t19.has_m, o7++) : e11.hasM = false, o7;
}

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmToQueryResponseObjFactories.js
var d5 = () => i.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors");
var _3 = { decodedWasmObjToQueryResponseObj: (e11, t19, n6) => {
  if (null == e11) return null;
  if ("object" != typeof e11) return e11;
  if ("getDate" in e11) return e11;
  if ("geometry_type" in e11) switch (e11.geometry_type.value) {
    case null:
      return null;
    case 1:
      return a7(e11, n6);
    case 2:
      return n5(e11, n6);
    case 3:
      return h6(e11, n6);
    case 4:
      return l4(e11, n6);
    case 5:
    case 7:
      return d5().warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"), null;
    default:
      return d5().warnOnce("Unknown or blank geometry type returned - Result interpreted as null"), null;
  }
  else {
    if (!("object_value_type" in e11)) return d5().warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"), null;
    switch (e11.object_value_type.value) {
      case 0:
        return h7(e11, t19, n6);
      case 1:
        return y6(e11, t19, n6);
      case 2:
        return b3(e11, t19, n6);
      case 3:
        return w4(e11, t19, n6);
      case 4:
        return f6(e11, t19, n6);
      default:
        return d5().warnOnce("Unknown graph object type detected!  Result interpreted as null"), null;
    }
  }
} };
function f6(e11, t19, n6) {
  const r6 = [], o7 = e11.count();
  for (let s18 = 0; s18 < o7; s18++) {
    const o8 = e11.get_value_at(s18);
    r6.push(m8(o8, t19, n6));
  }
  return r6;
}
function m8(e11, t19, n6) {
  return _3.decodedWasmObjToQueryResponseObj(e11, t19, n6);
}
function y6(e11, t19, r6) {
  const o7 = e11.type_name, s18 = j3(e11, t19, r6), u5 = e11.get_id();
  return new p(Object.assign({ typeName: o7, id: u5 }, s18));
}
function j3(e11, t19, n6) {
  const r6 = {}, o7 = e11.key_count();
  for (let s18 = 0; s18 < o7; s18++) r6[e11.get_key_at(s18)] = m8(e11.get_value_at(s18), t19, n6);
  return { properties: r6 };
}
function h7(e11, t19, n6) {
  return new e(j3(e11, t19, n6));
}
function w4(e11, t19, n6) {
  const r6 = e11.entity_count(), o7 = e11.relationship_count(), s18 = [];
  for (let u5 = 0; u5 < r6; u5++) s18.push(y6(e11.get_entity_at(u5), t19, n6)), u5 < o7 && s18.push(b3(e11.get_relationship_at(u5), t19, n6));
  return new p2({ path: s18 });
}
function b3(e11, t19, n6) {
  const r6 = e11.type_name, o7 = j3(e11, t19, n6);
  return new i3(Object.assign({ typeName: r6, id: e11.get_id(), originId: e11.get_origin_entity_id(), destinationId: e11.get_destination_entity_id() }, o7));
}
function O2(e11) {
  const n6 = [];
  for (let t19 = 0; t19 < e11.get_header_keys().size(); t19++) n6.push(e11.get_header_keys().get(t19));
  const r6 = new f(e11.get_out_sr());
  return new s7({ headerKeys: n6, outSpatialReference: r6, exceededTransferLimit: e11.exceeded_transfer_limit() });
}

// node_modules/@arcgis/core/rest/knowledgeGraph/GraphApplyEditsResult.js
var t18 = class extends b {
  constructor(e11) {
    super(e11), this.hasError = false, this.error = null, this.editResults = [], this.cascadeRelationshipDeleteResults = [], this.cascadeProvenanceDeleteResults = [];
  }
};
__decorate([m2()], t18.prototype, "hasError", void 0), __decorate([m2()], t18.prototype, "error", void 0), __decorate([m2()], t18.prototype, "editResults", void 0), __decorate([m2()], t18.prototype, "cascadeRelationshipDeleteResults", void 0), __decorate([m2()], t18.prototype, "cascadeProvenanceDeleteResults", void 0), t18 = __decorate([a("esri.rest.knowledgeGraph.GraphApplyEditsResult")], t18);
var p16 = t18;

// node_modules/@arcgis/core/rest/knowledgeGraph/wasmInterface/wasmToUpdateResponseFactories.js
function r5(r6) {
  const s18 = r6.has_error(), _4 = new p16({ hasError: s18, error: s18 ? o4(r6.error) : null }), d6 = r6.get_edit_results_count();
  for (let e11 = 0; e11 < d6; e11++) {
    const s19 = r6.get_edit_results_at(e11);
    s19.deleteLater();
    const d7 = r6.get_edit_results_type_name_at(e11), o8 = [], a8 = [], l5 = [], n6 = s19.get_add_results_count(), c6 = s19.get_update_results_count(), u5 = s19.get_delete_results_count();
    for (let e12 = 0; e12 < n6; e12++) {
      const r7 = s19.get_add_result_at(e12);
      r7.deleteLater(), o8.push({ id: r7.id, error: o4(r7.error) });
    }
    for (let e12 = 0; e12 < c6; e12++) {
      const r7 = s19.get_update_result_at(e12);
      r7.deleteLater(), a8.push({ id: r7.id, error: o4(r7.error) });
    }
    for (let e12 = 0; e12 < u5; e12++) {
      const r7 = s19.get_delete_result_at(e12);
      r7.deleteLater(), l5.push({ id: r7.id, error: o4(r7.error) });
    }
    _4.editResults.push({ typeName: d7, adds: o8, updates: a8, deletes: l5 });
  }
  const o7 = r6.get_cascaded_rel_deletes_count();
  for (let e11 = 0; e11 < o7; e11++) {
    const s19 = r6.get_cascaded_rel_deletes_at(e11);
    s19.deleteLater();
    const d7 = r6.get_cascaded_rel_deletes_type_name_at(e11), o8 = [];
    for (let e12 = 0; e12 < s19.get_count(); e12++) {
      const r7 = s19.get_result_at(e12);
      r7.deleteLater(), o8.push({ id: r7.id, originId: r7.origin_id, destinationId: r7.dest_id, error: o4(r7.error) });
    }
    _4.cascadeRelationshipDeleteResults.push({ typeName: d7, cascadeRelationshipDeletes: o8 });
  }
  if (r6.has_cascading_provenance_deletes()) {
    const e11 = r6.get_cascading_provenance_deletes();
    e11.deleteLater();
    const s19 = e11.get_count();
    for (let r7 = 0; r7 < s19; r7++) {
      const s20 = e11.get_result_at(r7);
      s20.deleteLater(), _4.cascadeProvenanceDeleteResults.push({ id: s20.id, error: o4(s20.error) });
    }
  }
  return _4;
}

// node_modules/@arcgis/core/rest/knowledgeGraphService.js
var z2 = /* @__PURE__ */ new Map();
var B = () => new Map(z2.entries());
var J2 = { fetchKnowledgeGraph: async (e11) => {
  const t19 = new p8({ url: e11 }), r6 = [];
  return r6.push(he(t19)), r6.push(we(t19)), await Promise.all(r6), t19;
}, refreshDataModel: async (e11) => {
  e11.dataModel = await Ye(e11);
}, refreshServiceDefinition: async (e11) => {
  const r6 = (await H(e11.url, { query: { f: "json" } })).data;
  return r6.capabilities = r6?.capabilities?.split(","), r6.supportedQueryFormats = r6?.supportedQueryFormats?.split(","), e11.serviceDefinition = new p7(r6), e11.serviceDefinition;
}, executeFindPathsAsynchronous: async (e11, t19) => {
  const a8 = e11.inKnowledgeGraphUrl.split("/rest/services");
  if (a8.length < 2) throw new s("knowledge-graph:invalid-tool-url", "The URL for the KG Service was not correctly formatted.  It should contain /rest/services/");
  const n6 = a8[0], o7 = (await Ge(`${n6}/rest/info`, { query: { f: "json" } })).data.currentVersion, d6 = `/rest/services/${o7 && o7 < 12 ? "System" : "Utilities"}/KnowledgeGraphServerToolsAsync/GPServer/ServerFilteredFindPaths`;
  return await ke(`${n6}${d6}`, { in_knowledge_graph_url: e11.inKnowledgeGraphUrl, config_type: "STRING", config_string: e11.config.toJSON(), result_type: "STRING" }, {}, t19);
}, executeFindPaths: async (e11, t19) => {
  const a8 = e11.inKnowledgeGraphUrl.split("/rest/services");
  if (a8.length < 2) throw new s("knowledge-graph:invalid-tool-url", "The URL for the KG Service was not correctly formatted.  It should contain /rest/services/");
  const n6 = a8[0], o7 = (await Ge(`${n6}/rest/info`, { query: { f: "json" } })).data.currentVersion, d6 = `/rest/services/${o7 && o7 < 12 ? "System" : "Utilities"}/KnowledgeGraphServerTools/GPServer/ServerFilteredFindPaths/execute`, i11 = await Ge(`${n6}${d6}`, { method: "post", query: { f: "pjson", in_knowledge_graph_url: e11.inKnowledgeGraphUrl, config_type: "STRING", config_string: JSON.stringify(e11.config), result_type: "STRING" }, ...t19 });
  if (i11.data.results.length < 1) throw new s("knowledge-graph:no-results", "No results were returned from the FindPaths tool - no results returned", i11);
  let s18;
  for (const r6 of i11.data.results) if ("out_results_string" === r6.paramName) {
    s18 = r6.value;
    break;
  }
  if (!s18) throw new s("knowledge-graph:no-results", "No results were returned from the FindPaths tool - no results were returned on the expected paramater out_results_string", i11);
  return s18;
}, fetchAsynchronousFindPathsResultData: async (e11, t19) => (await e11.fetchResultData("out_results_string", null, t19)).value, executeQueryStreaming: async (e11, t19, a8) => {
  const n6 = "include", o7 = `${e11.url}/graph/query`;
  await be(e11);
  const d6 = await qe(o7, a8);
  if (!e11.serviceDefinition?.supportsProvenance && t19.provenanceBehavior === n6) throw new s("knowledge-graph:provenance-not-supported", "The Knowledge Graph Service definition indicated that provenance is not supported");
  d6.data.body = await Fe(t19, e11);
  const i11 = await _e(d6.data.url, d6.data);
  if (e11.dataModel) {
    const t20 = await Ve(i11, e11.dataModel);
    return new p6({ resultRowsStream: t20.readableStream, resultHeader: t20.resultHeader });
  }
  throw new s("knowledge-graph:undefined-data-model", "The KnowledgeGraph supplied did not have a data model");
}, executeApplyEdits: async (e11, t19, a8) => {
  if (e11.serviceDefinition?.dataEditingNotSupported) throw new s("knowledge-graph:data-editing-not-supported", "The Knowledge Graph Service definition indicated that data editing is not supported");
  const n6 = `${e11.url}/graph/applyEdits`;
  await be(e11);
  const o7 = await qe(n6, a8);
  o7.data.body = await ve(t19, e11);
  return je(await _e(o7.data.url, o7.data));
}, executeAddNamedTypes: async (e11, t19, a8) => {
  if (!t19.newEntityTypes?.length && !t19.newRelationshipTypes?.length) throw new s("knowledge-graph:no-arguments", "The operation to add types to the data model contained no values");
  const n6 = `${e11.url}/dataModel/edit/namedTypes/add`;
  await be(e11);
  const o7 = await qe(n6, a8);
  o7.data.body = await Te(t19);
  const d6 = await _e(o7.data.url, o7.data), i11 = await Ue(d6);
  return i11.updatedKnowledgeGraph = await ue(e11.url), i11;
}, executeDeleteNamedType: async (e11, t19, a8) => {
  if (!t19) throw new s("knowledge-graph:no-arguments", "The operation to delete a named type from the data model contained no value");
  const n6 = `${e11.url}/dataModel/edit/namedTypes/${t19}/delete`;
  await be(e11);
  const o7 = await qe(n6, a8);
  o7.data.body = "";
  const d6 = await _e(o7.data.url, o7.data), i11 = await Ne(d6);
  return i11.updatedKnowledgeGraph = await ue(e11.url), i11;
}, executeUpdateNamedType: async (e11, t19, a8, n6) => {
  if (!t19 && !Object.keys(a8).length) throw new s("knowledge-graph:no-arguments", "The operation to update types in the data model contained missing or empty values");
  const o7 = `${e11.url}/dataModel/edit/namedTypes/${t19}/update`;
  await be(e11);
  const d6 = await qe(o7, n6);
  d6.data.body = await Ae(a8, t19, e11.dataModel);
  const i11 = await _e(d6.data.url, d6.data), s18 = await Ke(i11);
  return s18.updatedKnowledgeGraph = await ue(e11.url), s18;
}, executeAddGraphProperties: async (e11, t19, a8, n6) => {
  if (!t19 && !a8.length) throw new s("knowledge-graph:no-arguments", "The operation to add properties to the data model contained missing or empty values");
  const o7 = `${e11.url}/dataModel/edit/namedTypes/${t19}/fields/add`;
  await be(e11);
  const d6 = await qe(o7, n6);
  d6.data.body = await Pe(a8);
  const i11 = await _e(d6.data.url, d6.data), s18 = await Qe(i11);
  return s18.updatedKnowledgeGraph = await ue(e11.url), s18;
}, executeDeleteGraphProperty: async (e11, t19, a8, n6) => {
  if (!t19 && !a8) throw new s("knowledge-graph:no-arguments", "The operation to delete property contained missing or empty values");
  const o7 = `${e11.url}/dataModel/edit/namedTypes/${t19}/fields/delete`;
  await be(e11);
  const d6 = await qe(o7, n6);
  d6.data.body = await Se(a8);
  const i11 = await _e(d6.data.url, d6.data), s18 = await $e(i11);
  return s18.updatedKnowledgeGraph = await ue(e11.url), s18;
}, executeUpdateGraphProperty: async (e11, t19, a8, n6, o7) => {
  if (!t19 && !a8 && !Object.keys(n6).length) throw new s("knowledge-graph:no-arguments", "The operation to update properties in the data model contained missing or empty values");
  const d6 = `${e11.url}/dataModel/edit/namedTypes/${t19}/fields/update`;
  await be(e11);
  const i11 = await qe(d6, o7);
  i11.data.body = await De(a8, n6);
  const s18 = await _e(i11.data.url, i11.data), p17 = await Le(s18);
  return p17.updatedKnowledgeGraph = await ue(e11.url), p17;
}, executeAddGraphFieldIndex: async (e11, t19, a8, n6) => {
  if (!t19) throw new s("knowledge-graph:no-arguments", "The operation to update search index in the data model contained missing named type");
  if (!a8?.length) throw new s("knowledge-graph:no-arguments", "The operation to update search index in the data model contained missing or empty field index values");
  const o7 = `${e11.url}/dataModel/edit/namedTypes/${t19}/indexes/add`;
  await be(e11);
  const d6 = await qe(o7, n6);
  d6.data.body = await Re(a8);
  const i11 = await _e(d6.data.url, d6.data), s18 = await Oe(i11);
  return s18.updatedKnowledgeGraph = await ue(e11.url), s18;
}, executeDeleteGraphFieldIndex: async (e11, t19, a8, n6) => {
  if (!t19) throw new s("knowledge-graph:no-arguments", "The operation to update search index in the data model contained missing named type");
  if (!a8?.length) throw new s("knowledge-graph:no-arguments", "The operation to update search index in the data model contained missing or empty field index values");
  const o7 = `${e11.url}/dataModel/edit/namedTypes/${t19}/indexes/delete`;
  await be(e11);
  const d6 = await qe(o7, n6);
  d6.data.body = await Ee(a8);
  const i11 = await _e(d6.data.url, d6.data), s18 = await We(i11);
  return s18.updatedKnowledgeGraph = await ue(e11.url), s18;
}, executeUpdateSearchIndex: async (e11, t19, a8, n6) => {
  if (!t19) throw new s("knowledge-graph:no-arguments", "The operation to update search index in the data model contained missing named type");
  if (!Object.keys(a8.addSearchProperties ?? {}).length && !Object.keys(a8.removeSearchProperties ?? {}).length) throw new s("knowledge-graph:no-arguments", "The operation to update search index in the data model contained missing or empty properties values");
  const o7 = `${e11.url}/dataModel/searchIndex/update`;
  await be(e11);
  const d6 = await qe(o7, n6);
  d6.data.body = await Ce(t19, a8);
  const i11 = await _e(d6.data.url, d6.data), s18 = await He(i11);
  return s18.updatedKnowledgeGraph = await ue(e11.url), s18;
}, executeQuery: async (e11, a8, n6) => {
  const o7 = `${e11.url}/graph/query`, d6 = await H(o7, { responseType: "array-buffer", query: { f: "pbf", openCypherQuery: a8.openCypherQuery, ...n6?.query }, signal: n6?.signal, timeout: n6?.timeout }), i11 = d6.getHeader?.("content-type"), p17 = d6.data;
  if (i11?.includes("application/x-protobuf")) {
    const t19 = new (await n4()).GraphQueryDecoder();
    if (t19.deleteLater(), e11.dataModel) {
      const r6 = Je({ wasmQueryDecoder: t19, newArrayBufferToParse: p17, dataModel: e11.dataModel });
      return new p5({ resultRows: r6.resultRows, resultHeader: r6.resultHeader });
    }
    throw new s("knowledge-graph:undefined-data-model", "The KnowledgeGraph supplied did not have a data model");
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response", { responseType: i11, data: d6.data });
}, executeSearch: async (e11, a8, n6) => {
  const o7 = "provenance" === a8.typeCategoryFilter ? "metaEntityProvenance" : a8.typeCategoryFilter, d6 = `${e11.url}/graph/search`, i11 = await H(d6, { responseType: "array-buffer", query: { f: "pbf", searchQuery: `"${a8.searchQuery}"`, typeCategoryFilter: o7, ...n6?.query }, signal: n6?.signal, timeout: n6?.timeout }), p17 = i11.getHeader?.("content-type"), c6 = i11.data;
  if (p17?.includes("application/x-protobuf")) {
    const t19 = new (await n4()).GraphQueryDecoder();
    if (t19.deleteLater(), e11.dataModel) {
      const r6 = Je({ wasmQueryDecoder: t19, newArrayBufferToParse: c6, dataModel: e11.dataModel });
      return new p5({ resultRows: r6.resultRows, resultHeader: r6.resultHeader });
    }
    throw new s("knowledge-graph:undefined-data-model", "The KnowledgeGraph supplied did not have a data model");
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response", { responseType: p17, data: i11.data });
}, executeSearchStreaming: async (e11, t19, a8) => {
  const n6 = `${e11.url}/graph/search`;
  await be(e11);
  const o7 = await qe(n6, a8);
  o7.data.body = await Ie(t19);
  const d6 = await _e(o7.data.url, o7.data);
  if (e11.dataModel) {
    const t20 = await Ve(d6, e11.dataModel);
    return new p6({ resultRowsStream: t20.readableStream, resultHeader: t20.resultHeader });
  }
  throw new s("knowledge-graph:undefined-data-model", "The KnowledgeGraph supplied did not have a data model");
}, fetchClientDataAtKeys: async (e11, t19, a8 = { ignoreCache: false }) => {
  if (!t19.length) return /* @__PURE__ */ new Map();
  let n6 = z2.get(e11.url || "");
  n6 || (n6 = /* @__PURE__ */ new Map(), z2.set(e11.url || "", n6));
  const o7 = new Map(n6.entries()), d6 = `${e11.url}/clientData/fetch`;
  t19 = Array.from(new Set(t19));
  const i11 = await n4(), s18 = t4(t19, n6, i11, a8.ignoreCache), p17 = await qe(d6, a8.requestOptions);
  p17.data.body = s18;
  const c6 = await _e(p17.data.url, p17.data), l5 = c6.headers.get("content-type");
  if (l5?.includes("application/x-protobuf")) {
    const e12 = new i11.ClientDataFetchResponseDecoder();
    e12.deleteLater();
    const t20 = await c6.arrayBuffer();
    return e12.decode(new Uint8Array(t20)), e12.has_error() && e3(e12.error, "knowledge-graph:fetchClientDataAtKeys-decoding-error", "An error occurred while decoding the client data keys response"), e6(e12, n6, o7, a8.ignoreCache);
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response when fetching client data", { responseType: l5, data: c6 });
}, fetchAllClientDataKeys: async (e11, a8) => {
  const n6 = `${e11.url}/clientData`, o7 = await H(n6, { responseType: "array-buffer", query: { f: "pbf" }, signal: a8?.signal, timeout: a8?.timeout }), d6 = o7.getHeader?.("content-type"), i11 = o7.data;
  if (d6?.includes("application/x-protobuf")) {
    const e12 = new (await n4()).ClientDataKeysResponseDecoder();
    return e12.deleteLater(), e12.decode(new Uint8Array(i11)), e12.has_error() && e3(e12.error, "knowledge-graph:fetchAllClientDataKeys-decoding-error", "An error occurred while decoding the client data keys response"), t7(e12);
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response", { responseType: d6, data: o7.data });
}, clearClientDataCache: () => z2.clear(), _fetchWrapper: async (e11, t19) => fetch(e11, t19), _submitJobWrapper: async (e11, t19, r6, a8) => s6(e11, t19, r6, a8), _esriRequestWrapper: async (e11, r6) => H(e11, r6) };
async function V(e11, t19, r6) {
  return J2.executeApplyEdits(e11, t19, r6);
}
async function Y(e11, t19, r6) {
  return J2.executeAddNamedTypes(e11, t19, r6);
}
async function X(e11, t19, r6) {
  return J2.executeDeleteNamedType(e11, t19, r6);
}
async function Z(e11, t19, r6, a8) {
  return J2.executeUpdateNamedType(e11, t19, r6, a8);
}
async function ee(e11, t19, r6, a8) {
  return J2.executeAddGraphProperties(e11, t19, r6, a8);
}
async function te(e11, t19, r6, a8) {
  return J2.executeDeleteGraphProperty(e11, t19, r6, a8);
}
async function re(e11, t19, r6, a8, n6) {
  return J2.executeUpdateGraphProperty(e11, t19, r6, a8, n6);
}
async function ae(e11, t19, r6, a8) {
  return J2.executeAddGraphFieldIndex(e11, t19, r6, a8);
}
async function ne(e11, t19, r6, a8) {
  return J2.executeDeleteGraphFieldIndex(e11, t19, r6, a8);
}
async function oe(e11, t19, r6, a8) {
  return J2.executeUpdateSearchIndex(e11, t19, r6, a8);
}
async function de(e11, t19, r6) {
  return J2.executeQuery(e11, t19, r6);
}
async function ie(e11, t19, r6) {
  return J2.executeQueryStreaming(e11, t19, r6);
}
async function se(e11, t19, r6) {
  return J2.executeSearch(e11, t19, r6);
}
async function pe(e11, t19, r6) {
  return J2.executeSearchStreaming(e11, t19, r6);
}
function ce(e11, t19) {
  return J2.fetchAllClientDataKeys(e11, t19);
}
function le(e11, t19, r6) {
  return J2.fetchClientDataAtKeys(e11, t19, r6);
}
async function ue(e11) {
  return J2.fetchKnowledgeGraph(e11);
}
async function he(e11) {
  return J2.refreshDataModel(e11);
}
async function we(e11) {
  return J2.refreshServiceDefinition(e11);
}
async function ge(e11, t19) {
  return J2.executeFindPathsAsynchronous(e11, t19);
}
async function ye(e11, t19) {
  return J2.executeFindPaths(e11, t19);
}
async function fe(e11, t19) {
  return J2.fetchAsynchronousFindPathsResultData(e11, t19);
}
function me() {
  return J2.clearClientDataCache();
}
async function _e(e11, t19) {
  return J2._fetchWrapper(e11, t19);
}
async function ke(e11, t19, r6, a8) {
  return J2._submitJobWrapper(e11, t19, r6, a8);
}
async function Ge(e11, t19) {
  return J2._esriRequestWrapper(e11, t19);
}
async function be(t19) {
  const r6 = s2?.findCredential(t19.url);
  r6 || (t19.dataModel ? await Ye(t19) : await he(t19));
}
function xe(e11, t19, r6, a8) {
  null == t19 ? r6.set_param_key_value(e11, "") : "object" != typeof t19 || t19 instanceof Date ? r6.set_param_key_value(e11, t19) : t19 instanceof c ? r6.set_param_key_value(e11, u3(t19, a8)) : Array.isArray(t19) ? r6.set_param_key_value(e11, l2(t19, a8)) : r6.set_param_key_value(e11, s11(t19, a8));
}
async function ve(e11, t19) {
  if (t19.dataModel || await he(t19), !t19.dataModel) throw new s("knowledge-graph:data-model-undefined", "Encoding could not proceed because a data model was not provided and it could not be determined from the service");
  const a8 = await n4(), n6 = !!e11.options?.cascadeDelete, o7 = !!e11.options?.cascadeProvenanceDelete, d6 = new a8.GraphApplyEditsEncoder(a8.SpatialReferenceUtil.WGS84(), e11.options?.inputQuantizationParameters ? l3(e11.options?.inputQuantizationParameters) : a8.InputQuantizationUtil.WGS84_lossless());
  d6.deleteLater(), d6.cascade_delete = n6, d6.cascade_delete_provenance = o7;
  try {
    let t20;
    e11.entityAdds?.forEach((e12) => {
      t20 = d6.add_entity(s12(e12, a8)), e3(t20, "knowledge-graph:applyEdits-encoding-failed", "Attempting to encode the applyEdits - an entity failed to be added to the encoder");
    }), e11.relationshipAdds?.forEach((e12) => {
      if (!e12.originId || !e12.destinationId) throw new s("knowledge-graph:relationship-origin-destination-missing", "When adding a new relationship, you must provide both an origin and destination id on the appropriate class property");
      t20 = d6.add_relationship(s12(e12, a8)), e3(t20, "knowledge-graph:applyEdits-encoding-failed", "Attempting to encode the applyEdits - a relationship failed to be added to the encoder");
    }), e11.entityUpdates?.forEach((e12) => {
      if (!e12.id) throw new s("knowledge-graph:entity-id-missing", "When updating an entity or relationship, you must specify the id on the class level property");
      t20 = d6.update_entity(s12(e12, a8)), e3(t20, "knowledge-graph:applyEdits-encoding-failed", "Attempting to encode the applyEdits - an entity failed to be added to the encoder");
    }), e11.relationshipUpdates?.forEach((e12) => {
      if (!e12.id) throw new s("knowledge-graph:relationship-id-missing", "When updating an entity or relationship, you must specify the id on the class level property");
      t20 = d6.update_relationship(s12(e12, a8)), e3(t20, "knowledge-graph:applyEdits-encoding-failed", "Attempting to encode the applyEdits - a relationship failed to be added to the encoder");
    }), e11.entityDeletes?.forEach((e12) => {
      if (!e12.typeName) throw new s("knowledge-graph:no-type-name", "You must indicate the entity/relationship named object type to apply edits - delete");
      const t21 = d6.make_delete_helper(e12.typeName, true);
      t21.deleteLater(), e12.ids?.forEach((e13) => {
        t21.delete_by_id(e13);
      });
    }), e11.relationshipDeletes?.forEach((e12) => {
      if (!e12.typeName) throw new s("knowledge-graph:no-type-name", "You must indicate the entity/relationship named object type to apply edits - delete");
      const t21 = d6.make_delete_helper(e12.typeName, false);
      e12.ids?.forEach((e13) => {
        t21.delete_by_id(e13);
      });
    }), d6.encode();
  } catch (s18) {
    throw new s("knowledge-graph:applyEdits-encoding-failed", "Attempting to encode the applyEdits failed", { error: s18 });
  }
  const i11 = d6.get_encoding_result();
  return e3(i11.error, "knowledge-graph:applyEdits-encoding-failed", "Attempting to encode the applyEdits failed"), structuredClone(i11.get_byte_buffer());
}
async function Te(e11) {
  const t19 = await n4(), a8 = new t19.GraphNamedObjectTypeAddsRequestEncoder();
  a8.deleteLater(), e11.newEntityTypes?.forEach((e12) => {
    a8.add_entity_type(d4(e12, t19));
  }), e11.newRelationshipTypes?.forEach((e12) => {
    a8.add_relationship_type(u4(e12, t19));
  });
  try {
    a8.encode();
  } catch (o7) {
    throw new s("knowledge-graph:addNamedTypes-encoding-failed", "Attempting to encode the addNamedTypes failed", { error: o7 });
  }
  const n6 = a8.get_encoding_result();
  return e3(n6.error, "knowledge-graph:addNamedTypes-encoding-failed", "Attempting to encode the addNamedTypes failed"), structuredClone(n6.get_byte_buffer());
}
async function Ae(e11, t19, a8) {
  const n6 = await n4(), o7 = new n6.GraphNamedObjectTypeUpdateRequestEncoder();
  o7.deleteLater();
  if (a8.entityTypes.some((e12) => e12.name === t19)) o7.update_entity_type(p11(e11, n6));
  else {
    if (!a8.relationshipTypes.some((e12) => e12.name === t19)) throw new s("knowledge-graph:updateNamedType-encoding-failed", "The named type you are trying to update does not exist in the data model");
    o7.update_relationship_type(y4(e11, n6));
  }
  o7.update_alias = e11.hasOwnProperty("alias");
  try {
    o7.encode();
  } catch (i11) {
    throw new s("knowledge-graph:updateNamedType-encoding-failed", "Attempting to encode the updateNamedType failed", { error: i11 });
  }
  const d6 = o7.get_encoding_result();
  return e3(d6.error, "knowledge-graph:updateNamedType-encoding-failed", "Attempting to encode the updateNamedType failed"), structuredClone(d6.get_byte_buffer());
}
async function Pe(e11) {
  const t19 = await n4(), a8 = new t19.GraphPropertyAddsRequestEncoder();
  a8.deleteLater(), e11.forEach((e12) => {
    a8.add_graph_property(f4(e12, t19));
  });
  try {
    a8.encode();
  } catch (o7) {
    throw new s("knowledge-graph:addGraphProperties-encoding-failed", "Attempting to encode the addGraphProperties failed", { error: o7 });
  }
  const n6 = a8.get_encoding_result();
  return e3(n6.error, "knowledge-graph:addGraphProperties-encoding-failed", "Attempting to encode the addGraphProperties failed"), structuredClone(n6.get_byte_buffer());
}
async function Se(e11) {
  const t19 = new (await n4()).GraphPropertyDeleteRequestEncoder();
  t19.deleteLater(), t19.field_name = e11;
  try {
    t19.encode();
  } catch (n6) {
    throw new s("knowledge-graph:deleteGraphProperty-encoding-failed", "Attempting to encode the deleteGraphProperty failed", { error: n6 });
  }
  const a8 = t19.get_encoding_result();
  return e3(a8.error, "knowledge-graph:deleteGraphProperty-encoding-failed", "Attempting to encode the deleteGraphProperty failed"), structuredClone(a8.get_byte_buffer());
}
async function De(e11, t19) {
  const a8 = await n4(), n6 = new a8.GraphPropertyUpdateRequestEncoder();
  n6.deleteLater(), n6.update_graph_property(c4(t19, a8)), n6.set_property_name(e11), n6.update_alias = t19.hasOwnProperty("alias"), n6.update_editable = t19.hasOwnProperty("editable"), n6.update_required = t19.hasOwnProperty("required"), n6.update_visible = t19.hasOwnProperty("defaultVisibility"), n6.update_default_value = t19.hasOwnProperty("defaultValue");
  try {
    n6.encode();
  } catch (d6) {
    throw new s("knowledge-graph:updateGraphProperty-encoding-failed", "Attempting to encode the updateGraphProperty failed", { error: d6 });
  }
  const o7 = n6.get_encoding_result();
  return e3(o7.error, "knowledge-graph:updateGraphProperty-encoding-failed", "Attempting to encode the updateGraphProperty failed"), structuredClone(o7.get_byte_buffer());
}
async function Re(e11) {
  const t19 = await n4(), a8 = new t19.GraphIndexAddsRequestEncoder();
  a8.deleteLater(), e11.forEach((e12) => {
    a8.add_field_index(_2(e12, t19));
  });
  try {
    a8.encode();
  } catch (o7) {
    throw new s("knowledge-graph:addGraphFieldIndex-encoding-failed", "Attempting to encode the addGraphFieldIndex failed", { error: o7 });
  }
  const n6 = a8.get_encoding_result();
  return e3(n6.error, "knowledge-graph:addGraphFieldIndex-encoding-failed", "Attempting to encode the addGraphFieldIndex failed"), structuredClone(n6.get_byte_buffer());
}
async function Ee(e11) {
  const t19 = new (await n4()).GraphIndexDeleteRequestEncoder();
  t19.deleteLater(), e11.forEach((e12) => {
    t19.add_index_name(e12);
  });
  try {
    t19.encode();
  } catch (n6) {
    throw new s("knowledge-graph:deleteGraphFieldIndex-encoding-failed", "Attempting to encode the deleteGraphFieldIndex failed", { error: n6 });
  }
  const a8 = t19.get_encoding_result();
  return e3(a8.error, "knowledge-graph:deleteGraphFieldIndex-encoding-failed", "Attempting to encode the deleteGraphFieldIndex failed"), structuredClone(a8.get_byte_buffer());
}
async function Ce(e11, t19) {
  const a8 = await n4(), n6 = new a8.GraphUpdateSearchIndexRequestEncoder();
  n6.deleteLater(), t19.hasOwnProperty("addSearchProperties") && n6.insert_add_search_property(e11, m6(t19.addSearchProperties, a8)), t19.hasOwnProperty("removeSearchProperties") && n6.insert_delete_search_property(e11, m6(t19.removeSearchProperties, a8));
  try {
    n6.encode();
  } catch (d6) {
    throw new s("knowledge-graph:updateSearchIndex-encoding-failed", "Attempting to encode the updateSearchIndex failed", { error: d6 });
  }
  const o7 = n6.get_encoding_result();
  return e3(o7.error, "knowledge-graph:updateSearchIndex-encoding-failed", "Attempting to encode the updateSearchIndex failed"), structuredClone(o7.get_byte_buffer());
}
async function Fe(e11, t19) {
  const a8 = await n4(), n6 = new a8.GraphQueryRequestEncoder();
  if (n6.deleteLater(), e11.outputSpatialReference ? n6.output_spatial_reference = { wkid: e11.outputSpatialReference.wkid, latestWkid: e11.outputSpatialReference.latestWkid, vcsWkid: e11.outputSpatialReference.vcsWkid, latestVcsWkid: e11.outputSpatialReference.latestVcsWkid, wkt: e11.outputSpatialReference.wkt ?? "" } : n6.output_spatial_reference = a8.SpatialReferenceUtil.WGS84(), n6.open_cypher_query = e11.openCypherQuery, e11.bindParameters) for (const [r6, i11] of Object.entries(e11.bindParameters)) xe(r6, i11, n6, a8);
  if (e11.bindGeometryQuantizationParameters) y2(e11.bindGeometryQuantizationParameters, n6);
  else {
    if (t19.dataModel || await he(t19), 4326 !== t19.dataModel?.spatialReference?.wkid) throw new s("knowledge-graph:SR-quantization-mismatch", "If the DataModel indicates a coordinate system other than WGS84, inputQuantizationParameters must be provided to the query encoder");
    n6.input_quantization_parameters = a8.InputQuantizationUtil.WGS84_lossless();
  }
  e11.outputQuantizationParameters && m5(e11.outputQuantizationParameters, n6, a8), e11.provenanceBehavior && c3(e11.provenanceBehavior, n6);
  try {
    n6.encode();
  } catch (d6) {
    throw new s("knowledge-graph:query-encoding-failed", "Attempting to encode the query failed", { error: d6 });
  }
  const o7 = n6.get_encoding_result();
  if (0 !== o7.error.error_code) throw new s("knowledge-graph:query-encoding-failed", "Attempting to encode the query failed", { errorCode: o7.error.error_code, errorMessage: o7.error.error_message });
  return structuredClone(o7.get_byte_buffer());
}
async function Ie(e11) {
  const t19 = await n4(), a8 = new t19.GraphSearchRequestEncoder();
  a8.deleteLater(), a8.search_query = e11.searchQuery;
  const n6 = "provenance" === e11.typeCategoryFilter ? "meta_entity_provenance" : e11.typeCategoryFilter;
  if (a8.type_category_filter = t19.esriNamedTypeCategory[n6], true === e11.returnSearchContext && (a8.return_search_context = e11.returnSearchContext), null != e11.start && e11.start > 0 && (a8.start_index = e11.start), null != e11.num && (a8.max_num_results = e11.num), null != e11.idsFilter && Array.isArray(e11.idsFilter) && e11.idsFilter.length > 0) try {
    a8.set_ids_filter(l2(e11.idsFilter, t19));
  } catch (d6) {
    throw new s("knowledge-graph:ids-format-error", "Attempting to set ids filter failed.  This is usually caused by an incorrectly formatted UUID string", { error: d6 });
  }
  e11.namedTypesFilter?.forEach((e12) => {
    a8.add_named_type_filter(e12);
  });
  try {
    a8.encode();
  } catch (d6) {
    throw new s("knowledge-graph:search-encoding-failed", "Attempting to encode the search failed", { error: d6 });
  }
  const o7 = a8.get_encoding_result();
  if (0 !== o7.error.error_code) throw new s("knowledge-graph:search-encoding-failed", "Attempting to get encoding result from the query failed", { errorCode: o7.error.error_code, errorMessage: o7.error.error_message });
  return structuredClone(o7.get_byte_buffer());
}
async function qe(e11, r6) {
  return H(e11, { responseType: "native-request-init", method: "post", query: { f: "pbf", ...r6?.query }, body: "x", headers: { "Content-Type": "application/octet-stream" }, signal: r6?.signal, timeout: r6?.timeout });
}
async function Me(e11, t19, a8) {
  const n6 = e11.headers.get("content-type");
  if (n6?.includes("application/x-protobuf")) {
    const r6 = await e11.arrayBuffer(), n7 = new t19();
    try {
      return n7.decode(new Uint8Array(r6)), a8(n7);
    } finally {
      n7.deleteLater();
    }
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response", { responseType: n6, data: await e11.text() });
}
async function je(e11) {
  return Me(e11, (await n4()).GraphApplyEditsDecoder, r5);
}
async function Ue(e11) {
  return Me(e11, (await n4()).GraphNamedObjectTypeAddsResponseDecoder, p14);
}
async function Ne(e11) {
  return Me(e11, (await n4()).GraphNamedObjectTypeDeleteResponseDecoder, a6);
}
async function Ke(e11) {
  return Me(e11, (await n4()).GraphNamedObjectTypeUpdateResponseDecoder, i9);
}
async function Qe(e11) {
  return Me(e11, (await n4()).GraphPropertyAddsResponseDecoder, m7);
}
async function $e(e11) {
  return Me(e11, (await n4()).GraphPropertyDeleteResponseDecoder, f5);
}
async function Le(e11) {
  return Me(e11, (await n4()).GraphPropertyUpdateResponseDecoder, g6);
}
async function Oe(e11) {
  return Me(e11, (await n4()).GraphIndexAddsResponseDecoder, y5);
}
async function We(e11) {
  return Me(e11, (await n4()).GraphIndexDeleteResponseDecoder, R2);
}
async function He(e11) {
  return Me(e11, (await n4()).GraphUpdateSearchIndexResponseDecoder, h4);
}
var ze = 50;
function Be(e11) {
  ze = e11;
}
function Je({ wasmQueryDecoder: e11, newArrayBufferToParse: t19, dataModel: a8, decodedHeader: n6, limitMaxProcessingTime: o7 = false }) {
  t19 && e11.push_buffer(new Uint8Array(t19));
  const i11 = [];
  let s18, p17, c6 = 0;
  const l5 = Date.now();
  let u5 = true;
  for (; e11.next_row(); ) {
    s18 && p17 || (s18 = n6 ?? O2(e11), p17 = s18.outSpatialReference ?? new f({ wkid: 4326 })), c6 || (c6 = e11.get_header_keys().size());
    const t20 = new Array(c6);
    for (let r6 = 0; r6 < c6; r6++) {
      const n7 = e11.get_value(r6);
      t20[r6] = m8(n7, a8, p17);
    }
    if (i11.push(t20), o7 && Date.now() - l5 > ze) {
      u5 = false;
      break;
    }
  }
  if (e11.has_error()) throw new s("knowledge-graph:stream-decoding-error", "One or more result rows were not successfully decoded - inner row decoding", { errorCode: e11.error.error_code, errorMessage: e11.error.error_message });
  return { resultHeader: s18, resultRows: i11, parsedAllResultsFromBuffer: u5 };
}
async function Ve(e11, t19) {
  const o7 = e11.headers.get("content-type");
  if (e11.headers.get("content-length") && i.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("Found `Content-Length` header when expecting a streaming HTTP response! Please investigate whether all intermediate HTTP proxies and/or load balancers are configured such that they don't forcefully buffer the entire response before returning it to the client. A valid HTTP streaming response should use Chunked Transfer Encoding and not have a Content Length defined."), o7?.includes("application/x-protobuf")) {
    const o8 = e11.body?.getReader(), d6 = new (await n4()).GraphQueryDecoder();
    let i11, s18, c6;
    d6.deleteLater();
    const l5 = new Promise((e12, t20) => {
      s18 = e12, c6 = t20;
    });
    let u5 = false, h8 = null;
    const g7 = new ReadableStream({ pull: async function e12(l6) {
      if (!o8) {
        const e13 = new s("knowledge-graph:stream-decoding-error", "Error reading from stream - reader is undefined");
        throw c6(e13), e13;
      }
      const { done: w5, value: g8 } = h8 ? { done: false, value: null } : await o8.read().catch((e13) => {
        throw c6(e13), o8.releaseLock(), e13;
      });
      g8 && (h8 = g8);
      try {
        if (w5) {
          let e13;
          if (d6.has_error() ? e13 = new s("knowledge-graph:stream-decoding-error", "One or more result rows were not successfully decoded - query stream done", { errorCode: d6.error.error_code, errorMessage: d6.error.error_message }) : u5 || s18(new s7()), o8.releaseLock(), e13) throw l6.error(e13), c6(e13), e13;
          return void l6.close();
        }
        const { resultHeader: a8, resultRows: n6, parsedAllResultsFromBuffer: y7 } = Je({ wasmQueryDecoder: d6, newArrayBufferToParse: g8, dataModel: t19, decodedHeader: i11, limitMaxProcessingTime: true });
        return y7 && (h8 = null), !i11 && a8 && (i11 = a8, s18(a8), u5 = true), n6.length > 0 ? void l6.enqueue(n6) : await e12(l6);
      } catch (y7) {
        throw i.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").error(y7), c6(y7), o8.releaseLock(), d(y7) ? y7 : new s("knowledge-graph:unexpected-server-response", "Error inside streaming data return parsing", { error: y7 });
      }
    } });
    return { readableStream: g7, resultHeader: await l5 };
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response", { responseType: o7, data: e11.text() });
}
async function Ye(e11) {
  const a8 = `${e11.url}/dataModel/queryDataModel`, n6 = await H(a8, { responseType: "array-buffer", query: { f: "pbf" } }), o7 = n6.getHeader?.("content-type"), d6 = n6.data;
  if (o7?.includes("application/x-protobuf")) {
    const e12 = (await n4()).decode_data_model_from_protocol_buffer(new Uint8Array(d6));
    if (!e12) throw new s("knowledge-graph:data-model-decode-failure", "The server responded to the data model query, but the response failed to be decoded.  This typically occurs when the Knowledge JS API (4.26 or later) is used with an unsupported backend (11.0 or earlier)");
    return v(e12);
  }
  throw new s("knowledge-graph:unexpected-server-response", "server returned an unexpected response", { responseType: o7, data: n6.data });
}

export {
  n4 as n,
  r3 as r,
  i8 as i,
  z2 as z,
  B,
  J2 as J,
  V,
  Y,
  X,
  Z,
  ee,
  te,
  re,
  ae,
  ne,
  oe,
  de,
  ie,
  se,
  pe,
  ce,
  le,
  ue,
  he,
  we,
  ge,
  ye,
  fe,
  me,
  _e,
  ke,
  Ge,
  be,
  Be
};
//# sourceMappingURL=chunk-LH5BO2EF.js.map
