import {
  f,
  l,
  n,
  q
} from "./chunk-JNJX34GB.js";
import {
  m
} from "./chunk-67Q6KVC6.js";
import {
  E,
  H,
  K,
  qe
} from "./chunk-MC6NAKKX.js";

// node_modules/@arcgis/core/support/popupUtils.js
function d({ displayField: t, editFieldsInfo: i, fields: n2, objectIdField: o, title: r }, s) {
  if (!n2) return null;
  const l2 = b({ editFieldsInfo: i, fields: n2, objectIdField: o }, s);
  if (!l2.length) return null;
  const a = I({ titleBase: r, fields: n2, displayField: t }), d2 = y();
  return new q({ title: a, content: d2, fieldInfos: l2 });
}
var c = (e, i) => i.visibleFieldNames ? i.visibleFieldNames.has(e.name) : K(e, i);
function f2({ fields: e, ignoreFieldTypes: t, sortDisabled: i }) {
  const n2 = e;
  return t && (e = e.filter((e2) => !t.includes(e2.type))), e === n2 && (e = e.slice()), true !== i && e.sort(p), e;
}
function p(e, t) {
  return "oid" === e.type ? -1 : "oid" === t.type ? 1 : j(e) ? -1 : j(t) ? 1 : (e.alias || e.name).toLocaleLowerCase().localeCompare((t.alias || t.name).toLocaleLowerCase());
}
function b(e, t) {
  const n2 = t?.visibleFieldNames;
  return f2({ fields: e.fields ?? [], ignoreFieldTypes: t?.ignoreFieldTypes || C, sortDisabled: t?.sortDisabled }).map((t2) => new f({ fieldName: t2.name, isEditable: H(t2, e), label: t2.alias, format: g(t2), visible: c(t2, { ...e, visibleFieldNames: n2 }) }));
}
function g(e) {
  switch (e.type) {
    case "small-integer":
    case "integer":
      return new m({ digitSeparator: true, places: 0 });
    case "single":
    case "double":
      return new m({ digitSeparator: true, places: 2 });
    case "string":
      return qe(e.name) ? new m({ digitSeparator: true, places: 0 }) : void 0;
    default:
      return;
  }
}
function y() {
  return [new l(), new n()];
}
function I(e) {
  const t = E(e), { titleBase: i } = e;
  return t ? `${i}: {${t.trim()}}` : i ?? "";
}
function j(e) {
  if ("name" === (e.name && e.name.toLowerCase())) return true;
  const t = e.alias?.toLowerCase();
  return "name" === t;
}
var C = ["geometry", "blob", "raster", "guid", "xml"];

export {
  d
};
//# sourceMappingURL=chunk-UVDECGZC.js.map
