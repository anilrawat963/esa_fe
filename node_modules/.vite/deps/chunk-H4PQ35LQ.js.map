{
  "version": 3,
  "sources": ["../../@arcgis/core/views/draw/support/drawUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{equals as t}from\"../../../core/arrayUtils.js\";import{rad2deg as n}from\"../../../core/mathUtils.js\";import{create as r,center as o}from\"../../../geometry/support/aaBoundingRect.js\";import{getRingsOrPathsBounds as e}from\"../../../geometry/support/boundsUtils.js\";import{geometryToCoordinates as i}from\"../../../geometry/support/coordsUtils.js\";import{toEllipticArc7 as s}from\"../../../geometry/support/curves/circularArcUtils.js\";import{isCurvedGeometry as c,getEndpoint as u,isCoordinate as a,isBezierCurve as m,isCircularArc as l}from\"../../../geometry/support/curves/curveUtils.js\";import{transformEllipticArc as p}from\"../../../geometry/support/curves/ellipticArc7Utils.js\";import{getScaleTransform as f}from\"../../interactive/editGeometry/operations/curveOperationUtils.js\";function y(t,n,r,o){if(null==o||t.hasZ||(o=void 0),\"point\"===t.type)return t.x+=n,t.y+=r,t.hasZ&&null!=o&&(t.z+=o),t;if(\"multipoint\"===t.type){const e=t.points;for(let t=0;t<e.length;t++)e[t]=g(e[t],n,r,o);return t}if(\"extent\"===t.type)return t.xmin+=n,t.xmax+=n,t.ymin+=r,t.ymax+=r,null!=o&&(t.zmin??=0,t.zmin+=o,t.zmax??=0,t.zmax+=o),t;const e=\"polyline\"===t.type?t.curvePaths??t.paths:t.curveRings??t.rings,i=c(t);for(let s=0;s<e.length;s++){const t=e[s];for(let e=0;e<t.length;e++)t[e]=v(t[e],n,r,o)}return\"paths\"in t?i?t.curvePaths=e:t.paths=e:i?t.curveRings=e:t.rings=e,t}function x(t,n,r,o,e){const i=t.clone();if(e){const{resolution:t}=o;y(i,n*t,-r*t)}else{const{dxMap:t,dyMap:e}=h(n,r,o);y(i,t,e)}return i}function h(t,n,r){const o=r.state.inverseTransform;return{dxMap:o[0]*t+o[2]*n,dyMap:o[1]*t+o[3]*n}}function g(t,n,r,o){return z(t,t[0]+n,t[1]+r,null!=t[2]&&null!=o?t[2]+o:void 0)}function v(t,n,r,o){const e=g(u(t),n,r,o);if(a(t))return e;if(m(t)){const[,o,i]=t.b;return{b:[e,[o[0]+n,o[1]+r],[i[0]+n,i[1]+r]]}}if(l(t)){const[,o]=t.c;return{c:[e,[o[0]+n,o[1]+r]]}}const[,i,...s]=t.a;return{a:[e,[i[0]+n,i[1]+r],...s]}}function M(n,s,c,a){if(\"point\"===n.type){const{x:t,y:r}=n,o=a?a[0]:t,e=a?a[1]:r,i=n.clone(),u=(t-o)*s+o,m=(r-e)*c+e;return i.x=u,i.y=m,i}if(\"extent\"===n.type){const{xmin:t,xmax:r,ymin:o,ymax:e}=n,i=a?a[0]:(t+r)/2,u=a?a[1]:(e+o)/2,m=n.clone();if(m.xmin=(t-i)*s+i,m.ymax=(e-u)*c+u,m.xmax=(r-i)*s+i,m.ymin=(o-u)*c+u,m.xmin>m.xmax){const t=m.xmin,n=m.xmax;m.xmin=n,m.xmax=t}if(m.ymin>m.ymax){const t=m.ymin,n=m.ymax;m.ymin=n,m.ymax=t}return m}let m=null;if(!a){m=i(n);const t=r(),o=e(t,m);if(!o)return n.clone();const[s,c,u,l]=o;a=[(s+u)/2,(c+l)/2]}const[l,p]=a;if(\"multipoint\"===n.type){const t=n.clone(),r=t.points;for(let n=0;n<r.length;n++){const t=r[n],[o,e]=t,i=(o-l)*s+l,u=(e-p)*c+p;r[n]=z(t,i,u,void 0)}return t.points=r,t}const f=n.clone();m??=i(n);const y=\"polygon\"===f.type,x=y?f.curveRings??f.rings:f.curvePaths??f.paths;if(!a){const t=r(),n=e(t,x,!1,!1);if(!n)return f;a=o(n)}for(const r of x){let n=null;const o=y&&r.length>0&&t(u(r[0]),u(r.at(-1)));for(let t=0;t<r.length;t++){const o=r[t];r[t]=j(o,s,c,l,p,n),n=o}o&&(r[0]=[...u(r.at(-1))])}return f}function d(t,n,r,o,e){const[i,s,...c]=t;return[(i-o)*n+o,(s-e)*r+e,...c]}function j(t,n,r,o,e,i){if(a(t))return d(t,n,r,o,e);if(m(t)){const[i,s,c]=t.b.map(t=>d(t,n,r,o,e));return{b:[i,s,c]}}if(!i)return t;const c=u(i),y=l(t)?s(c,t):t,[x,h,g,v,M,j,U]=y.a,b=M??0,z=j??Math.hypot(x[0]-h[0],x[1]-h[1]),R=U??1,P=f(o,e,1,0,0,1,n,r);return p(c,{a:[[...x],[...h],g,v,b,z,R]},P)}function U(t,n,r,o,e,i){const s=Math.sqrt((r-t)*(r-t)+(o-n)*(o-n));return Math.sqrt((e-t)*(e-t)+(i-n)*(i-n))/s}function b(t,r,o,e=!1){const i=Math.atan2(r.y-o.y,r.x-o.x)-Math.atan2(t.y-o.y,t.x-o.x),s=Math.atan2(Math.sin(i),Math.cos(i));return e?s:n(s)}function z(t,n,r,o){const e=[n,r];return t.length>2&&e.push(null!=o?o:t[2]),t.length>3&&e.push(t[3]),e}export{x as cloneMove,b as getRotationAngle,U as getScaleRatio,y as move,M as scale,h as screenDeltaToMapDelta};\n"],
  "mappings": "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",
  "names": ["y", "t", "n", "r", "e", "g", "i", "h", "f", "o", "M", "c", "u", "m", "s", "l", "x", "v", "j", "U", "b", "z"]
}
