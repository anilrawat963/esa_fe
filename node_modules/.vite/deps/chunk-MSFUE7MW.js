import {
  L,
  M,
  N
} from "./chunk-BTFBYI67.js";
import {
  S
} from "./chunk-23NJHA5Q.js";
import {
  e2 as e
} from "./chunk-MC6NAKKX.js";

// node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js
var m = "esri-relationship-ramp";
var b = `${m}--diamond`;
var u = `${m}--square`;
var f = { diamondContainer: `${b}__container`, diamondLeftCol: `${b}__left-column`, diamondRightCol: `${b}__right-column`, diamondMidCol: `${b}__middle-column`, diamondMidColLabel: `${b}__middle-column--label`, diamondMidColRamp: `${b}__middle-column--ramp`, squareTable: `${u}__table`, squareTableRow: `${u}__table-row`, squareTableCell: `${u}__table-cell`, squareTableLabel: `${u}__table-label`, squareTableLabelLeftBottom: `${u}__table-label--left-bottom`, squareTableLabelRightBottom: `${u}__table-label--right-bottom`, squareTableLabelLeftTop: `${u}__table-label--left-top`, squareTableLabelRightTop: `${u}__table-label--right-top` };

// node_modules/@arcgis/core/symbols/support/symbolUtils.js
function R2(e3) {
  return e3 && void 0 !== e3.opacity ? e3.opacity * ("parent" in e3 ? R2(e3.parent) : 1) : 1;
}
async function F(e3, t) {
  if (!e3) return;
  const l2 = e3.sourceLayer, a2 = (null != t && t.useSourceLayer ? l2 : e3.layer) ?? l2, r = t?.ignoreOpacity ? 1 : R2(a2);
  if (null != e3.symbol && (null == t || true !== t.ignoreGraphicSymbol)) {
    const l3 = "web-style" === e3.symbol.type ? await e3.symbol.fetchSymbol({ ...t, acceptedFormats: t?.webStyleAcceptedFormats, cache: t?.webStyleCache }) : e3.symbol.clone();
    return L(l3, null, { add: r }), l3;
  }
  const s2 = t?.renderer ?? I2(a2);
  let o2 = s2 && "getSymbolAsync" in s2 ? await s2.getSymbolAsync(e3, t) : null;
  if (!o2) return;
  if (o2 = "web-style" === o2.type ? await o2.fetchSymbol({ ...t, acceptedFormats: t?.webStyleAcceptedFormats, cache: t?.webStyleCache }) : o2.clone(), !(s2 && "visualVariables" in s2 && s2.visualVariables?.length && j(o2))) return L(o2, null, { add: r }), o2;
  if ("arcadeRequiredForVisualVariables" in s2 && s2.arcadeRequiredForVisualVariables && null == t?.arcade) {
    const e4 = { ...t };
    e4.arcade = await e(), t = e4;
  }
  const { getColor: n2, getOpacity: f2, getAllSizes: y2, getRotationAngle: h } = await import("./visualVariableUtils-EKNNTOCH.js"), d2 = [], m2 = [], b3 = [], g = [];
  for (const i2 of s2.visualVariables) switch (i2.type) {
    case "color":
      d2.push(i2);
      break;
    case "opacity":
      m2.push(i2);
      break;
    case "rotation":
      g.push(i2);
      break;
    case "size":
      i2.target || b3.push(i2);
  }
  const w = !!d2.length && d2[d2.length - 1], S3 = w ? n2(w, e3, t) : null, v2 = !!t?.ignoreOpacity, V = !!m2.length && m2[m2.length - 1], k3 = V ? f2(V, e3, t) : null;
  if (L(o2, S3, v2 ? void 0 : { override: k3, add: r }), b3.length && true !== t?.ignoreSizeVariables) {
    const l3 = y2(b3, e3, t);
    await M(o2, l3);
  }
  if (true !== t?.ignoreRotationVariables) for (const i2 of g) N(o2, h(i2, e3, t), i2.axis);
  return o2;
}
function j(e3) {
  return !S(e3) || "water" !== e3.symbolLayers.at(0)?.type;
}
function I2(e3) {
  if (e3) return "renderer" in e3 ? e3.renderer : void 0;
}

export {
  F
};
//# sourceMappingURL=chunk-MSFUE7MW.js.map
