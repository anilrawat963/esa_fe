{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{Float2BindUniform as r}from\"../../shaderModules/Float2BindUniform.js\";import{glsl as o}from\"../../shaderModules/glsl.js\";function a(e){e.uniforms.add(new r(\"zProjectionMap\",e=>d(e.camera))),e.code.add(o`float linearizeDepth(float depth) {\nfloat depthNdc = depth * 2.0 - 1.0;\nfloat c1 = zProjectionMap[0];\nfloat c2 = zProjectionMap[1];\nreturn -(c1 / (depthNdc + c2 + 1e-7));\n}`),e.code.add(o`float delinearizeDepth(float linearDepth) {\nfloat c1 = zProjectionMap[0];\nfloat c2 = zProjectionMap[1];\nfloat depthNdc = (-c1/linearDepth) - c2 - 1e-7;\nfloat depthNonlinear01 = (depthNdc + 1.0 ) / 2.0;\nreturn depthNonlinear01;\n}`),e.code.add(o`float depthFromTexture(sampler2D depthTexture, vec2 uv) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nfloat depth = texelFetch(depthTexture, iuv, 0).r;\nreturn depth;\n}`),e.code.add(o`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {\nreturn linearizeDepth(depthFromTexture(depthTexture, uv));\n}`)}function d(t){const r=t.projectionMatrix;return e(c,r[14],r[10])}const c=t();export{a as ReadDepth};\n"],
  "mappings": ";;;;;;;;;;;;;;AAIiS,SAAS,EAAEA,IAAE;AAAC,EAAAA,GAAE,SAAS,IAAI,IAAI,EAAE,kBAAiB,CAAAA,OAAG,EAAEA,GAAE,MAAM,CAAC,CAAC,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,EAK/W,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMb,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA,EAIb,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA,EAEb;AAAC;AAAC,SAAS,EAAEC,IAAE;AAAC,QAAM,IAAEA,GAAE;AAAiB,SAAO,EAAE,GAAE,EAAE,EAAE,GAAE,EAAE,EAAE,CAAC;AAAC;AAAC,IAAM,IAAE,EAAE;",
  "names": ["e", "t"]
}
