{
  "version": 3,
  "sources": ["../../@arcgis/core/webdoc/support/writeUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{clone as t}from\"../../core/lang.js\";import{getDeepValue as r}from\"../../core/object.js\";import{numberToJSON as n}from\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import{isFeatureCollectionLayer as i}from\"../../layers/support/layerUtils.js\";const o=new Set([\"bing-maps\",\"imagery\",\"imagery-tile\",\"map-image\",\"open-street-map\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wcs\",\"wms\",\"wmts\"]),a=new Set([\"integrated-mesh-3dtiles\"]),l=new Set([\"catalog\",\"csv\",\"feature\",\"geo-rss\",\"geojson\",\"group\",\"imagery\",\"imagery-tile\",\"kml\",\"knowledge-graph\",\"map-image\",\"map-notes\",\"media\",\"ogc-feature\",\"oriented-imagery\",\"parquet\",\"route\",\"stream\",\"subtype-group\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"video\",\"web-tile\",\"wcs\",\"wfs\",\"wms\",\"wmts\"]),s=new Set([...l,\"link-chart\"]);function c(e){o.delete(e),l.delete(e)}function u(e){o.add(e),l.add(e)}function d(e){switch(e.layerContainerType){case\"basemap-base-layers\":return o;case\"basemap-ground-layers\":return a;case\"operational-layers\":return\"link-chart\"===e.origin?s:l;default:return null}}function p(e,t){if(t.restrictedWebMapWriting){const r=d(t);return null==r||r.has(e.type)&&!i(e)}return!0}function m(e,t){if(t)if(i(e)){const n=r(\"featureCollection.layers\",t),i=n?.[0]?.layerDefinition;i&&f(e,i)}else\"group\"!==e.type&&f(e,t)}function f(e,t){\"maxScale\"in e&&(t.maxScale=n(e.maxScale)??void 0),\"minScale\"in e&&(t.minScale=n(e.minScale)??void 0)}function g(e,t){if(m(e,t),t&&(t.id=e.id,\"blendMode\"in e&&(t.blendMode=e.blendMode,\"normal\"===t.blendMode&&delete t.blendMode),t.opacity=n(e.opacity)??void 0,t.title=e.title||\"Layer\",t.visibility=e.visible,\"legendEnabled\"in e&&\"wmts\"!==e.type))if(i(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function y(r,n,o){if(!r.persistenceEnabled)return null;if(!(\"write\"in r)||!r.write)return o?.messages&&o.messages.push(new e(\"layer:unsupported\",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(i(r)&&!r.isTable)n=r.resourceInfo;else if(p(r,o)){const e={};return r.write(e,o)?e:null}return null!=n&&g(r,n=t(n)),n}export{u as disableRestrictedWriting,c as enableRestrictedWriting,y as getLayerJSON};\n"],
  "mappings": ";;;;;;;;;;;;;AAIoT,IAAM,IAAE,oBAAI,IAAI,CAAC,aAAY,WAAU,gBAAe,aAAY,mBAAkB,QAAO,WAAU,eAAc,eAAc,YAAW,OAAM,OAAM,MAAM,CAAC;AAA/J,IAAiKA,KAAE,oBAAI,IAAI,CAAC,yBAAyB,CAAC;AAAtM,IAAwM,IAAE,oBAAI,IAAI,CAAC,WAAU,OAAM,WAAU,WAAU,WAAU,SAAQ,WAAU,gBAAe,OAAM,mBAAkB,aAAY,aAAY,SAAQ,eAAc,oBAAmB,WAAU,SAAQ,UAAS,iBAAgB,QAAO,WAAU,eAAc,eAAc,SAAQ,YAAW,OAAM,OAAM,OAAM,MAAM,CAAC;AAA/f,IAAigBC,KAAE,oBAAI,IAAI,CAAC,GAAG,GAAE,YAAY,CAAC;AAAwE,SAAS,EAAE,GAAE;AAAC,UAAO,EAAE,oBAAmB;AAAA,IAAC,KAAI;AAAsB,aAAO;AAAA,IAAE,KAAI;AAAwB,aAAOC;AAAA,IAAE,KAAI;AAAqB,aAAM,iBAAe,EAAE,SAAOC,KAAE;AAAA,IAAE;AAAQ,aAAO;AAAA,EAAI;AAAC;AAAC,SAAS,EAAE,GAAEC,IAAE;AAAC,MAAGA,GAAE,yBAAwB;AAAC,UAAM,IAAE,EAAEA,EAAC;AAAE,WAAO,QAAM,KAAG,EAAE,IAAI,EAAE,IAAI,KAAG,CAAC,EAAE,CAAC;AAAA,EAAC;AAAC,SAAM;AAAE;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,MAAGA,GAAE,KAAG,EAAE,CAAC,GAAE;AAAC,UAAM,IAAE,EAAE,4BAA2BA,EAAC,GAAE,IAAE,IAAI,CAAC,GAAG;AAAgB,SAAG,EAAE,GAAE,CAAC;AAAA,EAAC,MAAK,aAAU,EAAE,QAAM,EAAE,GAAEA,EAAC;AAAC;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,gBAAa,MAAIA,GAAE,WAAS,EAAE,EAAE,QAAQ,KAAG,SAAQ,cAAa,MAAIA,GAAE,WAAS,EAAE,EAAE,QAAQ,KAAG;AAAO;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,MAAG,EAAE,GAAEA,EAAC,GAAEA,OAAIA,GAAE,KAAG,EAAE,IAAG,eAAc,MAAIA,GAAE,YAAU,EAAE,WAAU,aAAWA,GAAE,aAAW,OAAOA,GAAE,YAAWA,GAAE,UAAQ,EAAE,EAAE,OAAO,KAAG,QAAOA,GAAE,QAAM,EAAE,SAAO,SAAQA,GAAE,aAAW,EAAE,SAAQ,mBAAkB,KAAG,WAAS,EAAE,MAAM,KAAG,EAAE,CAAC,GAAE;AAAC,UAAM,IAAEA,GAAE;AAAkB,UAAI,EAAE,aAAW,EAAE;AAAA,EAAc,MAAM,CAAAA,GAAE,aAAW,EAAE;AAAa;AAAC,SAASC,GAAE,GAAE,GAAEC,IAAE;AAAC,MAAG,CAAC,EAAE,mBAAmB,QAAO;AAAK,MAAG,EAAE,WAAU,MAAI,CAAC,EAAE,MAAM,QAAOA,IAAG,YAAUA,GAAE,SAAS,KAAK,IAAI,EAAE,qBAAoB,WAAW,EAAE,KAAK,KAAK,EAAE,EAAE,cAAc,EAAE,aAAa,yBAAwB,EAAC,OAAM,EAAC,CAAC,CAAC,GAAE;AAAK,MAAG,EAAE,CAAC,KAAG,CAAC,EAAE,QAAQ,KAAE,EAAE;AAAA,WAAqB,EAAE,GAAEA,EAAC,GAAE;AAAC,UAAM,IAAE,CAAC;AAAE,WAAO,EAAE,MAAM,GAAEA,EAAC,IAAE,IAAE;AAAA,EAAI;AAAC,SAAO,QAAM,KAAG,EAAE,GAAE,IAAE,EAAE,CAAC,CAAC,GAAE;AAAC;",
  "names": ["a", "s", "a", "s", "t", "y", "o"]
}
