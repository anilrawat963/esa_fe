import {
  b,
  o,
  r3 as r2,
  s,
  u as u2,
  u2 as u3
} from "./chunk-5EI5H4QX.js";
import {
  a2,
  i2,
  n as n2,
  r2 as r
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  n,
  u
} from "./chunk-6SSZNBOK.js";
import {
  a,
  i3 as i,
  s2
} from "./chunk-QY7XKUIV.js";
import {
  h
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/core/accessorSupport/write.js
function a3(r3, e, t3, i4, o2) {
  const n5 = {};
  return e.write?.writer?.call(r3, i4, n5, t3, o2), n5;
}
function p(r3, o2, s4, u6, l, a6) {
  if (!u6?.write) return false;
  const p2 = o(r3, s4);
  if (!l && u6.write.overridePolicy) {
    const e = u6.write.overridePolicy.call(r3, p2, s4, a6 ?? void 0);
    void 0 !== e && (l = e);
  }
  if (l || (l = u6.write), !l || false === l.enabled) return false;
  if (l.layerContainerTypes && a6?.layerContainerType && !l.layerContainerTypes.includes(a6.layerContainerType)) return false;
  if ((null === p2 && !l.allowNull && !l.writerEnsuresNonNull || void 0 === p2) && l.isRequired) {
    const i4 = new s2("web-document-write:property-required", `Missing value for required property '${s4}' on '${r3.declaredClass}'`, { propertyName: s4, target: r3 });
    return i4 && a6?.messages ? a6.messages.push(i4) : i4 && !a6 && i.getLogger("esri.core.accessorSupport.write").error(i4.name, i4.message), false;
  }
  if (void 0 === p2) return false;
  if (null === p2 && !l.allowNull && !l.writerEnsuresNonNull) return false;
  if (!l.alwaysWriteDefaults && (!o2.store.multipleOriginsSupported || 0 === o2.store.originOf(s4)) && f(r3, s4, a6, u6, p2)) return false;
  if (!l.ignoreOrigin && a6?.origin && o2.store.multipleOriginsSupported) {
    if (o2.store.originOf(s4) < r2(a6.origin)) return false;
  }
  return true;
}
function f(e, t3, i4, o2, n5) {
  const s4 = o2.default;
  if (void 0 === s4) return false;
  if (null != o2.defaultEquals) return o2.defaultEquals(n5);
  if ("function" == typeof s4) {
    if (Array.isArray(n5)) {
      const o3 = s4.call(e, t3, i4 ?? void 0);
      return h(o3, n5);
    }
    return false;
  }
  return s4 === n5;
}
function c(r3, e, t3, i4) {
  const o2 = n(r3), n5 = o2.metadata, s4 = r(n5[e], i4);
  return !!s4 && p(r3, o2, e, s4, t3, i4);
}
function g(r3, e, t3) {
  if (r3 && "function" == typeof r3.toJSON && (!r3.toJSON.isDefaultToJSON || !r3.write)) return u(e, r3.toJSON(t3));
  const n5 = n(r3), f3 = n5.metadata;
  for (const u6 in f3) {
    const c3 = r(f3[u6], t3);
    if (!p(r3, n5, u6, c3, void 0, t3)) continue;
    const g2 = o(r3, u6), d2 = a3(r3, c3, c3.write && "string" == typeof c3.write.target ? c3.write.target : u6, g2, t3);
    Object.keys(d2).length > 0 && (e = u(e, d2), t3?.resources?.pendingOperations?.length && t3.resources.pendingOperations.push(Promise.all(t3.resources.pendingOperations).then(() => u(e, d2, () => "replace-arrays"))), t3?.writtenProperties && t3.writtenProperties.push({ target: r3, propName: u6, oldOrigin: u3(n5.store.originOf(u6)), newOrigin: t3.origin }));
  }
  return e;
}

// node_modules/@arcgis/core/core/accessorSupport/DefaultsStore.js
var s3 = class _s {
  constructor() {
    this._values = /* @__PURE__ */ new Map(), this.multipleOriginsSupported = false;
  }
  clone(t3) {
    const e = new _s();
    return this._values.forEach((s4, r3) => {
      t3 && t3.has(r3) || e.set(r3, a(s4.value), s4.origin);
    }), e;
  }
  get(i4, s4) {
    s4 = this._normalizeOrigin(s4);
    const t3 = this._values.get(i4);
    return null == s4 || t3?.origin === s4 ? t3?.value : void 0;
  }
  originOf(i4) {
    return this._values.get(i4)?.origin ?? 7;
  }
  keys(i4) {
    i4 = this._normalizeOrigin(i4);
    const s4 = [...this._values.keys()];
    return null == i4 ? s4 : s4.filter((s5) => this._values.get(s5)?.origin === i4);
  }
  set(i4, s4, e) {
    if (0 === (e = this._normalizeOrigin(e))) {
      const s5 = this._values.get(i4);
      if (null != s5?.origin && s5.origin > e) return;
    }
    this._values.set(i4, new t(s4, e));
  }
  delete(i4, s4) {
    null != (s4 = this._normalizeOrigin(s4)) && this._values.get(i4)?.origin !== s4 || this._values.delete(i4);
  }
  has(i4, s4) {
    return null != (s4 = this._normalizeOrigin(s4)) ? this._values.get(i4)?.origin === s4 : this._values.has(i4);
  }
  isAtOrigin(i4, s4) {
    return s4 = this._normalizeOrigin(s4), this.has(i4, s4) && this.originOf(i4) === s4;
  }
  isBelowOrigin(i4, s4) {
    return s4 = this._normalizeOrigin(s4), !this.has(i4) || this.originOf(i4) < s4;
  }
  forEach(i4) {
    this._values.forEach(({ value: s4 }, t3) => i4(s4, t3));
  }
  _normalizeOrigin(i4) {
    if (null != i4) return 0 === i4 ? i4 : 7;
  }
};
var t = class {
  constructor(i4, s4) {
    this.value = i4, this.origin = s4;
  }
};

// node_modules/@arcgis/core/core/accessorSupport/defaultsStoreUtils.js
function t2(t3, e, a6) {
  e.keys().forEach((t4) => {
    a6.set(t4, e.get(t4), 0);
  });
  const n5 = t3.metadata;
  Object.keys(n5).forEach((e2) => {
    t3.internalGet(e2) && a6.set(e2, t3.internalGet(e2), 0);
  });
}

// node_modules/@arcgis/core/core/accessorSupport/read.js
function n3(e, r3, s4) {
  if (!e?.read || false === e.read.enabled || !e.read.source) return false;
  const o2 = e.read.source;
  if ("string" == typeof o2) {
    if (o2 === r3) return true;
    if (o2.includes(".") && o2.startsWith(r3) && s(o2, s4)) return true;
  } else for (const n5 of o2) {
    if (n5 === r3) return true;
    if (n5.includes(".") && n5.startsWith(r3) && s(n5, s4)) return true;
  }
  return false;
}
function i3(e) {
  return e && (!e.read || false !== e.read.enabled && !e.read.source);
}
function a4(e, t3, r3, o2, a6) {
  let f3 = i2(t3[r3], a6);
  i3(f3) && (e[r3] = true);
  for (const i4 of Object.getOwnPropertyNames(t3)) f3 = i2(t3[i4], a6), n3(f3, r3, o2) && (e[i4] = true);
}
function f2(e, t3, r3, s4) {
  const n5 = r3.metadata, i4 = n2(n5[t3], s4), a6 = i4?.default;
  if (void 0 === a6) return;
  const f3 = "function" == typeof a6 ? a6.call(e, t3, s4) : a6;
  void 0 !== f3 && r3.set(t3, f3);
}
var c2 = { origin: "service" };
function u4(t3, o2, n5 = c2) {
  if (!o2 || "object" != typeof o2) return;
  const i4 = n(t3), u6 = i4.metadata, d2 = {};
  for (const e of Object.getOwnPropertyNames(o2)) a4(d2, u6, e, o2, n5);
  i4.setDefaultOrigin(n5.origin);
  for (const r3 of Object.getOwnPropertyNames(d2)) {
    const a6 = i2(u6[r3], n5).read, f3 = a6?.source;
    let c3;
    c3 = f3 && "string" == typeof f3 ? u2(o2, f3) : o2[r3], a6?.reader && (c3 = a6.reader.call(t3, c3, o2, n5)), void 0 !== c3 && i4.set(r3, c3);
  }
  if (!n5 || !n5.ignoreDefaults) {
    i4.setDefaultOrigin("defaults");
    for (const e of Object.getOwnPropertyNames(u6)) d2[e] || f2(t3, e, i4, n5);
  }
  i4.setDefaultOrigin("user");
}
function d(e, t3, r3, s4 = c2) {
  const o2 = { ...s4, messages: [] };
  r3(o2), o2.messages?.forEach((t4) => {
    "warning" !== t4.type || e.loaded ? s4?.messages && s4.messages.push(t4) : e.loadWarnings.push(t4);
  });
}

// node_modules/@arcgis/core/core/JSONSupport.js
var a5 = (t3) => {
  const a6 = t3;
  let n5 = class extends a6 {
    constructor(...r3) {
      super(...r3);
      const t4 = n(this), e = t4.store, i4 = new s3();
      t4.store = i4, t2(t4, e, i4);
    }
    read(r3, t4) {
      u4(this, r3, t4);
    }
    write(r3, t4) {
      return g(this, r3 ?? {}, t4);
    }
    toJSON(r3) {
      return this.write({}, r3);
    }
    static fromJSON(r3, t4) {
      return u5.call(this, r3, t4);
    }
  };
  return n5 = __decorate([a2("esri.core.JSONSupport")], n5), n5.prototype.toJSON.isDefaultToJSON = true, n5;
};
function u5(r3, t3) {
  if (!r3) return null;
  if (r3.declaredClass) throw new Error("JSON object is already hydrated");
  const o2 = new this();
  return o2.read(r3, t3), o2;
}
var n4 = a5(b);

export {
  t2 as t,
  u4 as u,
  d,
  c,
  g,
  a5 as a,
  n4 as n
};
//# sourceMappingURL=chunk-XXLHAM2M.js.map
