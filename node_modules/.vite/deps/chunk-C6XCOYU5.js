import {
  x
} from "./chunk-U73R3I4U.js";
import {
  i,
  m as m2
} from "./chunk-67Q6KVC6.js";
import {
  m
} from "./chunk-4SOQWNPG.js";
import {
  I
} from "./chunk-CNYNCKEV.js";
import {
  c,
  l,
  s
} from "./chunk-UDHS2MGH.js";
import {
  r
} from "./chunk-LPZUGJNG.js";

// node_modules/@arcgis/core/renderers/support/numberUtils.js
var n = /^-?(\d+)(\.(\d+))?$/i;
function e(t, n2) {
  return t - n2;
}
function r2(t, n2) {
  let e2, r3;
  return e2 = Number(t.toFixed(n2)), e2 < t ? r3 = e2 + 1 / 10 ** n2 : (r3 = e2, e2 -= 1 / 10 ** n2), e2 = Number(e2.toFixed(n2)), r3 = Number(r3.toFixed(n2)), [e2, r3];
}
function o(t, n2, e2, r3, o2) {
  const i3 = l2(t, n2, e2, r3), u3 = null == i3.previous || i3.previous <= o2, s3 = null == i3.next || i3.next <= o2;
  return u3 && s3 || i3.previous + i3.next <= 2 * o2;
}
function i2(t) {
  const e2 = String(t), r3 = e2.match(n);
  if (r3?.[1]) return { integer: r3[1].split("").length, fractional: r3[3] ? r3[3].split("").length : 0 };
  if (e2.toLowerCase().includes("e")) {
    const t2 = e2.split("e"), n2 = t2[0], r4 = t2[1];
    if (n2 && r4) {
      const t3 = Number(n2);
      let e3 = Number(r4);
      const o2 = e3 > 0;
      o2 || (e3 = Math.abs(e3));
      const l3 = i2(t3);
      return o2 ? (l3.integer += e3, e3 > l3.fractional ? l3.fractional = 0 : l3.fractional -= e3) : (l3.fractional += e3, e3 > l3.integer ? l3.integer = 1 : l3.integer -= e3), l3;
    }
  }
  return { integer: 0, fractional: 0 };
}
function l2(t, n2, e2, r3) {
  const o2 = { previous: null, next: null };
  if (null != e2) {
    const r4 = t - e2, i3 = n2 - e2 - r4;
    o2.previous = Math.floor(Math.abs(100 * i3 / r4));
  }
  if (null != r3) {
    const e3 = r3 - t, i3 = r3 - n2 - e3;
    o2.next = Math.floor(Math.abs(100 * i3 / e3));
  }
  return o2;
}
function u(t, n2 = {}) {
  const l3 = t.slice(), { tolerance: u3 = 2, strictBounds: s3 = false, indexes: c4 = l3.map((t2, n3) => n3) } = n2;
  c4.sort(e);
  for (let e2 = 0; e2 < c4.length; e2++) {
    const t2 = c4[e2], n3 = l3[t2], a = 0 === t2 ? null : l3[t2 - 1], f2 = t2 === l3.length - 1 ? null : l3[t2 + 1], m4 = i2(n3).fractional;
    if (m4) {
      let i3, c5 = 0, g2 = false;
      for (; c5 <= m4 && !g2; ) {
        const t3 = r2(n3, c5);
        i3 = s3 && 0 === e2 ? t3[1] : t3[0], g2 = o(n3, i3, a, f2, u3), c5++;
      }
      g2 && (l3[t2] = i3);
    }
  }
  return l3;
}
var s2 = { maximumFractionDigits: 20 };
function c2(n2) {
  return c(n2, s2);
}

// node_modules/@arcgis/core/widgets/Legend/support/utils.js
var u2 = "<";
var f = ">";
function m3(t, e2, n2, i3) {
  let o2 = "";
  0 === e2 ? o2 = `${u2} ` : e2 === n2 && (o2 = `${f} `);
  const r3 = d(t, i3);
  return null == r3 ? "" : o2 + r3;
}
function p(t) {
  const { format: e2, fieldFormat: n2 } = t || {};
  return "number" === n2?.type || !!e2 && null == e2.dateFormat && (null != e2.places || null != e2.digitSeparator);
}
function d(t, e2) {
  if (null == t) return t;
  const { fieldType: n2, format: i3, fieldFormat: l3, timeZoneOptions: u3 } = e2 || {};
  if (F(n2)) return x(t, { fieldType: n2, format: i3?.dateFormat, fieldFormat: "date-time" === l3?.type ? l3 : void 0, timeZoneOptions: u3 });
  if ("string" == typeof t && p(e2)) {
    const e3 = Number(t);
    isNaN(e3) || (t = e3);
  }
  if ("string" == typeof t) return t;
  const f2 = "number" === l3?.type ? s(l3) : i3 ? l(i3) : void 0;
  return f2 ? c(t, f2) : c2(t);
}
var c3 = ["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];
async function g(t) {
  if (!("visualVariables" in t) || !t.visualVariables) return null;
  const e2 = t.visualVariables.find((t2) => "color" === t2.type);
  if (!e2) return null;
  let n2 = null, i3 = null;
  if (e2.stops) {
    if (1 === e2.stops.length) return e2.stops[0].color;
    n2 = e2.stops[0].value, i3 = e2.stops[e2.stops.length - 1].value;
  }
  const o2 = null != n2 && null != i3 ? n2 + (i3 - n2) / 2 : 0, { getColor: r3 } = await import("./visualVariableUtils-EKNNTOCH.js");
  return r3(e2, o2) ?? null;
}
async function w(t, e2) {
  const n2 = t.trailCap, i3 = t.trailWidth || 1, o2 = e2 || await g(t) || t.color;
  return new m({ cap: n2, color: o2, width: i3 });
}
function y(t, e2) {
  if (!e2) return null;
  if ("featureReduction" in t) switch (t.featureReduction?.type) {
    case "cluster":
    case "binning": {
      const n2 = t.featureReduction.fields.find(({ name: t2 }) => t2.toLowerCase() === e2.toLowerCase());
      return n2 && "getField" in t ? t.getField(n2.onStatisticField) : null;
    }
  }
  return "getField" in t ? t.getField?.(e2) : null;
}
function I2(t, e2) {
  const n2 = "popupTemplate" in t ? t.popupTemplate?.fieldInfos : null;
  if (n2?.length && e2) return n2.find((t2) => t2.fieldName?.toLowerCase() === e2.toLowerCase());
}
function U(e2) {
  let n2 = 0, i3 = 0;
  return e2.stops ? (n2 = e2.stops?.at(0)?.value ?? n2, i3 = e2.stops?.at(-1)?.value ?? i3) : "minDataValue" in e2 && "maxDataValue" in e2 && (n2 = e2.minDataValue ?? n2, i3 = e2.maxDataValue ?? i3), i3 - n2 > 2 * r.days ? "short-date" : "short-date-short-time";
}
function F(t) {
  return ["date", "date-only", "time-only", "timestamp-offset"].includes(t || "");
}
function h(t) {
  return I(t) && !("featureReduction" in t && t.featureReduction);
}
function V(t, n2, o2) {
  const r3 = j(t, n2.field, o2);
  return r3 ? (F(r3.fieldType) && (h(t) ? r3.fieldFormat ??= new i({ dateStyle: "short", timeStyle: "short-date-short-time" === U(n2) ? "short" : null }) : r3.format ??= new m2({ dateFormat: U(n2) })), r3) : null;
}
function j(t, e2, n2) {
  const i3 = y(t, e2), o2 = i3?.name;
  if (!o2) return null;
  const r3 = i3?.type, l3 = h(t);
  return { fieldType: r3, format: l3 ? null : I2(t, o2)?.format, fieldFormat: l3 ? t.getFieldConfiguration(o2)?.fieldFormat : null, timeZoneOptions: F(r3) ? { layerTimeZone: "preferredTimeZone" in t ? t.preferredTimeZone : null, viewTimeZone: n2, datesInUnknownTimezone: "datesInUnknownTimezone" in t && t.datesInUnknownTimezone } : null };
}
function C(t, e2) {
  if ("authoringInfo" in t) return t.authoringInfo?.visualVariables?.find(({ theme: t2 }) => t2 === e2);
}
function b(t, e2) {
  let n2 = null != t ? t : "";
  return null != e2 && e2 && (n2 = n2 ? "(" + n2 + ") AND (" + e2 + ")" : e2), n2;
}

export {
  i2 as i,
  l2 as l,
  u,
  u2,
  f,
  m3 as m,
  d,
  c3 as c,
  g,
  w,
  V,
  j,
  C,
  b
};
//# sourceMappingURL=chunk-C6XCOYU5.js.map
