import {
  r as r3
} from "./chunk-XZMK6YI6.js";
import {
  d,
  x,
  y as y2
} from "./chunk-2ZH6SNCD.js";
import {
  P as P4,
  Z,
  d as d2,
  z as z3
} from "./chunk-EC6KNOF4.js";
import {
  l as l2
} from "./chunk-BH5ZTBHN.js";
import {
  t as t4
} from "./chunk-OOOA6BWY.js";
import {
  t as t5
} from "./chunk-JCVDJALY.js";
import {
  i as i6
} from "./chunk-CXUJAI27.js";
import {
  L,
  i as i4
} from "./chunk-FAA2FDN5.js";
import {
  I,
  a
} from "./chunk-J4LH6NQT.js";
import {
  $,
  $e,
  Ae,
  B,
  Be,
  De,
  E,
  H,
  He,
  Je,
  K,
  Ke,
  L as L2,
  P as P3,
  Q,
  Qe,
  Se,
  U,
  V,
  W,
  We,
  X,
  Xe,
  Y,
  Ze,
  be,
  ce,
  f as f3,
  ge,
  i as i5,
  ie,
  je,
  ne,
  oe,
  p as p2,
  re,
  se,
  te,
  ue,
  ye,
  z as z2
} from "./chunk-AH42IBBP.js";
import {
  P
} from "./chunk-ZGTANDVY.js";
import {
  t as t3
} from "./chunk-5LMO3VQI.js";
import {
  p
} from "./chunk-ZHSPVODX.js";
import {
  h,
  i as i3,
  m,
  r
} from "./chunk-MDJNYPVI.js";
import {
  n as n3,
  o as o2,
  s,
  t
} from "./chunk-4PXNA4MD.js";
import {
  f as f2
} from "./chunk-GD4FJL3C.js";
import {
  e,
  n as n4,
  o as o3,
  r as r2,
  t as t2
} from "./chunk-C5OQVQZF.js";
import {
  n as n2
} from "./chunk-QF7FRVN6.js";
import {
  M
} from "./chunk-7P2ANHQ3.js";
import {
  m as m2
} from "./chunk-3FUHCAX3.js";
import {
  P as P2,
  y3 as y
} from "./chunk-PZ5RULLK.js";
import {
  h as h2
} from "./chunk-OPJX4KXH.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  DateTime
} from "./chunk-4YDOPHTZ.js";
import {
  l
} from "./chunk-YY5PITIH.js";
import {
  v
} from "./chunk-SMWUT52Z.js";
import {
  _,
  c
} from "./chunk-AXZMNHTN.js";
import {
  f
} from "./chunk-5T3MJDSR.js";
import {
  D
} from "./chunk-V2H77UEV.js";
import {
  i2,
  o3 as o
} from "./chunk-5EI5H4QX.js";
import {
  C,
  n
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i
} from "./chunk-QY7XKUIV.js";

// node_modules/@arcgis/core/arcade/ArcadeModuleLoader.js
var s2 = class {
  constructor(s7, t8) {
    this._moduleSingletons = s7, this._syntaxModules = t8;
  }
  loadLibrary(s7) {
    if (null == this._syntaxModules) return null;
    const t8 = this._syntaxModules[s7];
    return t8 ? { syntax: t8.script, uri: t8.uri } : null;
  }
};

// node_modules/@arcgis/core/arcade/compilerUtils.js
var a2 = () => i.getLogger("esri.arcade.compilerUtils");
function c2(t8, r6, o5) {
  switch (t8.type) {
    case "VariableDeclaration":
      for (const o6 of t8.declarations) r6.add(r3(o6.id));
      return;
    case "BlockStatement":
      for (const e3 of t8.body) c2(e3, r6, o5);
      return;
    case "ExportNamedDeclaration": {
      const e3 = /* @__PURE__ */ new Set();
      c2(t8.declaration, e3, o5);
      for (const t9 of e3) r6.add(t9), o5.add(t9);
      return;
    }
    case "ForInStatement":
    case "ForOfStatement":
      return "VariableDeclaration" === t8.left.type && c2(t8.left, r6, o5), void c2(t8.body, r6, o5);
    case "ForStatement":
      return "VariableDeclaration" === t8.init?.type && c2(t8.init, r6, o5), void c2(t8.body, r6, o5);
    case "FunctionDeclaration":
      return void r6.add(r3(t8.id));
    case "IfStatement":
      return c2(t8.consequent, r6, o5), void (t8.alternate && c2(t8.alternate, r6, o5));
    case "ImportDeclaration":
      for (const o6 of t8.specifiers) r6.add(r3(o6.local));
      return;
    case "WhileStatement":
      return void c2(t8.body, r6, o5);
    case "BreakStatement":
    case "ContinueStatement":
    case "EmptyStatement":
    case "ExpressionStatement":
    case "ReturnStatement":
      return;
  }
}
function i7(e3) {
  const r6 = /* @__PURE__ */ new Set(), i11 = /* @__PURE__ */ new Set();
  for (const t8 of e3.body) c2(t8, r6, i11);
  if (!o(i11, r6)) throw a2().error(`Internal error: exported undeclared symbols {${Array.from(i2(i11, r6)).join(", ")}}`), new s(null, "NeverReach", null);
  return { globals: r6, exports: i11 };
}
function s3(e3) {
  const r6 = /* @__PURE__ */ new Set(), o5 = /* @__PURE__ */ new Set();
  if (c2(e3.body, r6, o5), o5.size > 0) throw a2().error(`Internal error: cannot export locals {${Array.from(o5.values()).join(", ")}}`), new s(null, "NeverReach", null);
  return r6;
}

// node_modules/@arcgis/core/arcade/treeAnalysis.js
var n5 = { all: { min: 2, max: 2 }, time: { min: 0, max: 4 }, dateonly: { min: 0, max: 3 }, getenvironment: { min: 0, max: 0 }, none: { min: 2, max: 2 }, any: { min: 2, max: 2 }, reduce: { min: 2, max: 3 }, map: { min: 2, max: 2 }, filter: { min: 2, max: 2 }, fromcodepoint: { min: 1, max: -1 }, fromcharcode: { min: 1, max: -1 }, tocodepoint: { min: 1, max: 2 }, tocharcode: { min: 1, max: 2 }, concatenate: { min: 0, max: -1 }, expects: { min: 1, max: -1 }, getfeatureset: { min: 1, max: 2 }, week: { min: 1, max: 2 }, fromjson: { min: 1, max: 1 }, length3d: { min: 1, max: 2 }, tohex: { min: 1, max: 1 }, hash: { min: 1, max: 1 }, timezone: { min: 1, max: 1 }, timezoneoffset: { min: 1, max: 1 }, changetimezone: { min: 2, max: 2 }, isoweek: { min: 1, max: 1 }, isoweekday: { min: 1, max: 1 }, hasvalue: { min: 2, max: 2 }, isomonth: { min: 1, max: 1 }, isoyear: { min: 1, max: 1 }, resize: { min: 2, max: 3 }, slice: { min: 0, max: -1 }, splice: { min: 0, max: -1 }, push: { min: 2, max: 2 }, pop: { min: 1, max: 1 }, includes: { min: 2, max: 2 }, array: { min: 0, max: 2 }, front: { min: 1, max: 1 }, back: { min: 1, max: 1 }, insert: { min: 3, max: 3 }, erase: { min: 2, max: 2 }, split: { min: 2, max: 4 }, guid: { min: 0, max: 1 }, standardizeguid: { min: 2, max: 2 }, today: { min: 0, max: 0 }, angle: { min: 2, max: 3 }, bearing: { min: 2, max: 3 }, urlencode: { min: 1, max: 1 }, now: { min: 0, max: 0 }, timestamp: { min: 0, max: 0 }, day: { min: 1, max: 1 }, month: { min: 1, max: 1 }, year: { min: 1, max: 1 }, hour: { min: 1, max: 1 }, second: { min: 1, max: 1 }, millisecond: { min: 1, max: 1 }, minute: { min: 1, max: 1 }, weekday: { min: 1, max: 1 }, toutc: { min: 1, max: 1 }, tolocal: { min: 1, max: 1 }, date: { min: 0, max: 8 }, datediff: { min: 2, max: 4 }, dateadd: { min: 2, max: 3 }, trim: { min: 1, max: 1 }, text: { min: 1, max: 2 }, left: { min: 2, max: 2 }, right: { min: 2, max: 2 }, mid: { min: 2, max: 3 }, upper: { min: 1, max: 1 }, proper: { min: 1, max: 2 }, lower: { min: 1, max: 1 }, find: { min: 2, max: 3 }, iif: { min: 3, max: 3 }, decode: { min: 2, max: -1 }, when: { min: 2, max: -1 }, defaultvalue: { min: 2, max: 3 }, isempty: { min: 1, max: 1 }, domaincode: { min: 2, max: 4 }, domainname: { min: 2, max: 4 }, polygon: { min: 1, max: 1 }, point: { min: 1, max: 1 }, polyline: { min: 1, max: 1 }, extent: { min: 1, max: 1 }, multipoint: { min: 1, max: 1 }, ringisclockwise: { min: 1, max: 1 }, geometry: { min: 1, max: 1 }, count: { min: 0, max: -1 }, number: { min: 1, max: 2 }, acos: { min: 1, max: 1 }, asin: { min: 1, max: 1 }, atan: { min: 1, max: 1 }, atan2: { min: 2, max: 2 }, ceil: { min: 1, max: 2 }, floor: { min: 1, max: 2 }, round: { min: 1, max: 2 }, cos: { min: 1, max: 1 }, exp: { min: 1, max: 1 }, log: { min: 1, max: 1 }, min: { min: 0, max: -1 }, constrain: { min: 3, max: 3 }, console: { min: 0, max: -1 }, max: { min: 0, max: -1 }, pow: { min: 2, max: 2 }, random: { min: 0, max: 0 }, sqrt: { min: 1, max: 1 }, sin: { min: 1, max: 1 }, tan: { min: 1, max: 1 }, abs: { min: 1, max: 1 }, isnan: { min: 1, max: 1 }, stdev: { min: 0, max: -1 }, average: { min: 0, max: -1 }, mean: { min: 0, max: -1 }, sum: { min: 0, max: -1 }, variance: { min: 0, max: -1 }, distinct: { min: 0, max: -1 }, first: { min: 1, max: 1 }, top: { min: 2, max: 2 }, boolean: { min: 1, max: 1 }, dictionary: { min: 0, max: -1 }, typeof: { min: 1, max: 1 }, reverse: { min: 1, max: 1 }, replace: { min: 3, max: 4 }, sort: { min: 1, max: 2 }, feature: { min: 1, max: -1 }, haskey: { min: 2, max: 2 }, indexof: { min: 2, max: 2 }, disjoint: { min: 2, max: 2 }, intersects: { min: 2, max: 2 }, touches: { min: 2, max: 2 }, crosses: { min: 2, max: 2 }, within: { min: 2, max: 2 }, contains: { min: 2, max: 2 }, overlaps: { min: 2, max: 2 }, equals: { min: 2, max: 2 }, relate: { min: 3, max: 3 }, intersection: { min: 2, max: 2 }, union: { min: 1, max: 2 }, difference: { min: 2, max: 2 }, symmetricdifference: { min: 2, max: 2 }, clip: { min: 2, max: 2 }, cut: { min: 2, max: 2 }, area: { min: 1, max: 2 }, areageodetic: { min: 1, max: 2 }, length: { min: 1, max: 2 }, lengthgeodetic: { min: 1, max: 2 }, distancegeodetic: { min: 2, max: 3 }, distance: { min: 2, max: 3 }, densify: { min: 2, max: 3 }, densifygeodetic: { min: 2, max: 3 }, generalize: { min: 2, max: 4 }, buffer: { min: 2, max: 3 }, buffergeodetic: { min: 2, max: 3 }, offset: { min: 2, max: 6 }, rotate: { min: 2, max: 3 }, issimple: { min: 1, max: 1 }, simplify: { min: 1, max: 1 }, convexhull: { min: 1, max: 1 }, centroid: { min: 1, max: 1 }, nearestcoordinate: { min: 2, max: 2 }, nearestvertex: { min: 2, max: 2 }, isselfintersecting: { min: 1, max: 1 }, multiparttosinglepart: { min: 1, max: 1 }, setgeometry: { min: 2, max: 2 }, portal: { min: 1, max: 1 }, getuser: { min: 0, max: 2 }, subtypes: { min: 1, max: 1 }, subtypecode: { min: 1, max: 1 }, subtypename: { min: 1, max: 1 }, domain: { min: 2, max: 3 }, convertdirection: { min: 3, max: 3 }, sqltimestamp: { min: 1, max: 3 }, schema: { min: 1, max: 1 }, measuretocoordinate: { min: 2, max: 2 }, distancetocoordinate: { min: 2, max: 2 }, pointtocoordinate: { min: 2, max: 2 } };
var a3 = { functionDefinitions: /* @__PURE__ */ new Map(), constantDefinitions: /* @__PURE__ */ new Map() };
var t6 = { functionDefinitions: /* @__PURE__ */ new Map(), constantDefinitions: /* @__PURE__ */ new Map() };
for (const k3 of ["pi", "infinity"]) t6.constantDefinitions.set(k3, { type: "constant" }), a3.constantDefinitions.set(k3, { type: "constant" });
t6.constantDefinitions.set("textformatting", { type: "namespace", key: "textformatting", members: [{ key: "backwardslash", type: "constant" }, { key: "doublequote", type: "constant" }, { key: "forwardslash", type: "constant" }, { key: "tab", type: "constant" }, { key: "singlequote", type: "constant" }, { key: "newline", type: "constant" }] }), a3.constantDefinitions.set("textformatting", { type: "namespace", key: "textformatting", members: [{ key: "backwardslash", type: "constant" }, { key: "tab", type: "constant" }, { key: "singlequote", type: "constant" }, { key: "doublequote", type: "constant" }, { key: "forwardslash", type: "constant" }, { key: "newline", type: "constant" }] });
for (const k3 in n5) {
  const e3 = n5[k3];
  t6.functionDefinitions.set(k3, { overloads: [{ type: "function", parametersInfo: { min: e3.min, max: e3.max } }] }), a3.functionDefinitions.set(k3, { overloads: [{ type: "function", parametersInfo: { min: e3.min, max: e3.max } }] });
}
var i8 = /* @__PURE__ */ new Set(["attachments", "featureset", "featuresetbyassociation", "featuresetbyid", "featuresetbyname", "featuresetbyportalitem", "featuresetbyrelationshipname", "featuresetbyurl", "filterbysubtypecode", "getfeatureset", "getfeaturesetinfo", "getuser", "knowledgegraphbyportalitem", "querygraph"]);
var m3 = /* @__PURE__ */ new Set(["translatetext"]);
var s4 = /* @__PURE__ */ new Set(["area", "areageodetic", "buffer", "buffergeodetic", "centroid", "clip", "contains", "convexhull", "crosses", "cut", "densify", "densifygeodetic", "difference", "disjoint", "distance", "distancegeodetic", "distancetocoordinate", "equals", "generalize", "intersection", "intersects", "isselfintersecting", "issimple", "length", "length3d", "lengthgeodetic", "measuretocoordinate", "multiparttosinglepart", "nearestcoordinate", "nearestvertex", "offset", "overlaps", "pointtocoordinate", "relate", "rotate", "simplify", "symmetricdifference", "touches", "union", "within"]);
function o4(e3, n7) {
  const i11 = "sync" === n7 ? a3 : t6;
  i11.functionDefinitions.has(e3.name.toLowerCase()) ? i11.functionDefinitions.get(e3.name.toLowerCase())?.overloads.push({ type: "function", parametersInfo: { min: e3.min, max: e3.max } }) : i11.functionDefinitions.set(e3.name.toLowerCase(), { overloads: [{ type: "function", parametersInfo: { min: e3.min, max: e3.max } }] });
}
function r4(e3, n7) {
  if (e3) for (const a5 of e3) c3(a5, n7);
}
function c3(e3, n7) {
  if (e3 && false !== n7(e3)) switch (e3.type) {
    case "ImportDeclaration":
      r4(e3.specifiers, n7), c3(e3.source, n7);
      break;
    case "ExportNamedDeclaration":
      c3(e3.declaration, n7);
      break;
    case "ArrayExpression":
      r4(e3.elements, n7);
      break;
    case "AssignmentExpression":
    case "BinaryExpression":
    case "LogicalExpression":
      c3(e3.left, n7), c3(e3.right, n7);
      break;
    case "BlockStatement":
    case "Program":
      r4(e3.body, n7);
      break;
    case "BreakStatement":
    case "ContinueStatement":
    case "EmptyStatement":
    case "Identifier":
    case "Literal":
      break;
    case "CallExpression":
      c3(e3.callee, n7), r4(e3.arguments, n7);
      break;
    case "ExpressionStatement":
      c3(e3.expression, n7);
      break;
    case "ForInStatement":
    case "ForOfStatement":
      c3(e3.left, n7), c3(e3.right, n7), c3(e3.body, n7);
      break;
    case "ForStatement":
      c3(e3.init, n7), c3(e3.test, n7), c3(e3.update, n7), c3(e3.body, n7);
      break;
    case "WhileStatement":
      c3(e3.test, n7), c3(e3.body, n7);
      break;
    case "FunctionDeclaration":
      c3(e3.id, n7), r4(e3.params, n7), c3(e3.body, n7);
      break;
    case "IfStatement":
      c3(e3.test, n7), c3(e3.consequent, n7), c3(e3.alternate, n7);
      break;
    case "MemberExpression":
      c3(e3.object, n7), c3(e3.property, n7);
      break;
    case "ObjectExpression":
      r4(e3.properties, n7);
      break;
    case "Property":
      c3(e3.key, n7), c3(e3.value, n7);
      break;
    case "ReturnStatement":
    case "UnaryExpression":
    case "UpdateExpression":
      c3(e3.argument, n7);
      break;
    case "VariableDeclaration":
      r4(e3.declarations, n7);
      break;
    case "VariableDeclarator":
      c3(e3.id, n7), c3(e3.init, n7);
      break;
    case "TemplateLiteral":
      r4(e3.expressions, n7), r4(e3.quasis, n7);
  }
}
function x2(e3) {
  return "Literal" === e3?.type && "string" == typeof e3.value;
}
function l3(e3, n7) {
  let a5 = false;
  const t8 = n7.toLowerCase();
  return c3(e3, (e4) => !a5 && ("Identifier" === e4.type && e4.name && e4.name.toLowerCase() === t8 && (a5 = true), true)), a5;
}
function u(n7) {
  const a5 = [];
  return c3(n7, (n8) => ("ImportDeclaration" === n8.type && n8.source && n8.source.value && a5.push({ libname: r3(n8.specifiers[0].local), source: n8.source.value }), true)), a5;
}
function p3(e3, n7) {
  let a5 = false;
  const t8 = n7.toLowerCase();
  return c3(e3, (e4) => !a5 && ("CallExpression" !== e4.type || "Identifier" !== e4.callee.type || !e4.callee.name || e4.callee.name.toLowerCase() !== t8 || (a5 = true, false))), a5;
}
function f4(n7) {
  const a5 = [];
  return c3(n7, (n8) => "MemberExpression" !== n8.type || "Identifier" !== n8.object.type || (("Identifier" === n8.property.type || "Literal" === n8.property.type && "string" == typeof n8.property.value) && a5.push({ varId: r3(n8.object), memberId: r3(n8.property) }), false)), a5;
}
function d3(n7) {
  const a5 = [];
  return c3(n7, (n8) => {
    if ("CallExpression" === n8.type && "Identifier" === n8.callee.type) switch (r3(n8.callee)) {
      case "expects":
        if (n8.arguments.length > 1) {
          const [t8, ...i11] = n8.arguments;
          if ("Identifier" === t8?.type) {
            const n9 = r3(t8);
            for (const e3 of i11) x2(e3) && a5.push({ varId: n9, memberNamePattern: e3.value });
          }
        }
        return false;
      case "domainname":
      case "domaincode":
      case "domain":
      case "haskey":
      case "hasvalue":
        if (n8.arguments.length >= 2) {
          const [t8, i11] = n8.arguments;
          "Identifier" === t8?.type && x2(i11) && a5.push({ varId: r3(t8), memberNamePattern: i11.value });
        }
        return true;
      case "defaultvalue":
        if (n8.arguments.length > 2) {
          const [t8, i11] = n8.arguments;
          "Identifier" === t8?.type && x2(i11) && a5.push({ varId: r3(t8), memberNamePattern: i11.value });
        }
        return true;
      default:
        return true;
    }
    return "MemberExpression" !== n8.type || "Identifier" !== n8.object.type || (n8.computed ? !!x2(n8.property) && (a5.push({ varId: r3(n8.object), memberNamePattern: n8.property.value }), false) : (a5.push({ varId: r3(n8.object), memberNamePattern: n8.property.name }), false));
  }), a5;
}
function g(n7) {
  const a5 = [];
  return c3(n7, (n8) => ("CallExpression" === n8.type && "Identifier" === n8.callee.type && a5.push(r3(n8.callee)), true)), a5;
}
function b(e3, n7 = []) {
  let a5 = null;
  if (void 0 === e3.usesFeatureSet) {
    null === a5 && (a5 = g(e3)), e3.usesFeatureSet = false;
    for (let n8 = 0; n8 < a5.length; n8++) i8.has(a5[n8]) && (e3.usesFeatureSet = true, e3.isAsync = true);
    if (false === e3.usesFeatureSet && n7 && n7.length > 0) {
      for (const a6 of n7) if (l3(e3, a6)) {
        e3.usesFeatureSet = true, e3.isAsync = true;
        break;
      }
    }
  }
  if (void 0 === e3.isAsync && (null === a5 && (a5 = g(e3)), a5.some((e4) => m3.has(e4)) && (e3.isAsync = true)), void 0 === e3.usesModules) {
    e3.usesModules = false;
    u(e3).length > 0 && (e3.usesModules = true);
  }
  if (void 0 === e3.usesGeometry) {
    e3.usesGeometry = false, null === a5 && (a5 = g(e3));
    for (let n8 = 0; n8 < a5.length; n8++) s4.has(a5[n8]) && (e3.usesGeometry = true);
  }
}

// node_modules/@arcgis/core/chunks/array.js
function F(F4) {
  function p7(n7, e3, o5) {
    if (n7 instanceof t3) return n7.toArray();
    if (o3(n7)) return n7;
    throw new n3(e3, "InvalidParameter", o5);
  }
  function y4(n7, t8) {
    const r6 = n7.length, e3 = Math.floor(r6 / 2);
    return 0 === r6 ? [] : 1 === r6 ? [n7[0]] : v4(y4(n7.slice(0, e3), t8), y4(n7.slice(e3, r6), t8), t8);
  }
  function v4(n7, t8, r6) {
    const e3 = [];
    for (; n7.length > 0 || t8.length > 0; ) if (n7.length > 0 && t8.length > 0) {
      let o5 = r6(n7[0], t8[0]);
      isNaN(o5) && (o5 = 0), o5 <= 0 ? (e3.push(n7[0]), n7 = n7.slice(1)) : (e3.push(t8[0]), t8 = t8.slice(1));
    } else n7.length > 0 ? (e3.push(n7[0]), n7 = n7.slice(1)) : t8.length > 0 && (e3.push(t8[0]), t8 = t8.slice(1));
    return e3;
  }
  async function P8(n7, t8) {
    const r6 = n7.length, e3 = Math.floor(r6 / 2);
    if (0 === r6) return [];
    if (1 === r6) return [n7[0]];
    const o5 = [await P8(n7.slice(0, e3), t8), await P8(n7.slice(e3, r6), t8)];
    return I4(o5[0], o5[1], t8, []);
  }
  async function I4(n7, t8, r6, e3) {
    const o5 = e3;
    if (n7.length > 0 || t8.length > 0) {
      if (n7.length > 0 && t8.length > 0) {
        let i11 = await r6(n7[0], t8[0]);
        return isNaN(i11) && (i11 = 1), i11 <= 0 ? (o5.push(n7[0]), n7 = n7.slice(1)) : (o5.push(t8[0]), t8 = t8.slice(1)), I4(n7, t8, r6, e3);
      }
      return n7.length > 0 ? (o5.push(n7[0]), I4(n7 = n7.slice(1), t8, r6, e3)) : (o5.push(t8[0]), I4(n7, t8 = t8.slice(1), r6, e3));
    }
    return e3;
  }
  function N2(n7, r6, o5, u3) {
    oe(o5, 1, 2, n7, r6);
    let s7 = o5[0];
    if (te(s7) && (s7 = s7.toArray()), false === o3(s7)) throw new n3(n7, "InvalidParameter", r6);
    if (o5.length > 1) {
      if (false === L2(o5[1])) throw new n3(n7, "InvalidParameter", r6);
      let e3 = s7;
      const i11 = o5[1].createFunction(n7);
      return u3 ? P8(e3, i11) : (e3 = y4(e3, (n8, t8) => i11(n8, t8)), e3);
    }
    let l6 = s7;
    if (0 === l6.length) return [];
    const h4 = {};
    for (let t8 = 0; t8 < l6.length; t8++) {
      const n8 = E(l6[t8]);
      "" !== n8 && (h4[n8] = true);
    }
    if (true === h4.Array || true === h4.Dictionary || true === h4.Feature || true === h4.Voxel || true === h4.Pixel || true === h4.Point || true === h4.Polygon || true === h4.Polyline || true === h4.Multipoint || true === h4.Extent || true === h4.Function) return l6.slice();
    let g5 = 0, m6 = "";
    for (const t8 in h4) g5++, m6 = t8;
    return l6 = g5 > 1 || "String" === m6 ? y4(l6, (n8, t8) => {
      if (null == n8 || n8 === P3) return null == t8 || t8 === P3 ? 0 : 1;
      if (null == t8 || t8 === P3) return -1;
      const r7 = ge(n8), e3 = ge(t8);
      return r7 < e3 ? -1 : r7 === e3 ? 0 : 1;
    }) : "Number" === m6 ? y4(l6, (n8, t8) => n8 - t8) : "Boolean" === m6 ? y4(l6, (n8, t8) => n8 === t8 ? 0 : t8 ? -1 : 1) : "Date" === m6 ? y4(l6, (n8, t8) => n8.toNumber() - t8.toNumber()) : l6.slice(), l6;
  }
  F4.functions.array = function(r6, a5) {
    return F4.standardFunction(r6, a5, (s7, c5, l6) => {
      if (oe(l6, 0, 2, r6, a5), 0 === l6.length) return [];
      if (1 === l6.length && null === l6[0]) return [];
      if (o3(l6[0])) {
        if (2 === l6.length && false === t2(l6[1])) throw new n3(r6, "InvalidParameter", a5);
        return true === z2(l6[1], false) ? f3(l6[0]) : l6[0].slice();
      }
      if (te(l6[0])) {
        if (2 === l6.length && false === t2(l6[1])) throw new n3(r6, "InvalidParameter", a5);
        return true === z2(l6[1], false) ? f3(l6[0]) : l6[0].toArray().slice();
      }
      const f8 = Se(l6[0]);
      if (isNaN(f8) || false === r2(f8)) throw new n3(r6, "InvalidParameter", a5);
      const d6 = z2(l6[1], null), h4 = new Array(f8);
      return h4.fill(d6), h4;
    });
  }, F4.functions.front = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, u3, a5) => {
      if (oe(a5, 1, 1, n7, r6), te(a5[0])) {
        if (a5[0].length() <= 0) throw new n3(n7, "OutOfBounds", r6);
        return a5[0].get(0);
      }
      if (o3(a5[0])) {
        if (a5[0].length <= 0) throw new n3(n7, "OutOfBounds", r6);
        return a5[0][0];
      }
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.back = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, u3, a5) => {
      if (oe(a5, 1, 1, n7, r6), te(a5[0])) {
        if (a5[0].length() <= 0) throw new n3(n7, "OutOfBounds", r6);
        return a5[0].get(a5[0].length() - 1);
      }
      if (o3(a5[0])) {
        if (a5[0].length <= 0) throw new n3(n7, "OutOfBounds", r6);
        return a5[0][a5[0].length - 1];
      }
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.push = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, i11, u3) => {
      if (oe(u3, 1, 2, n7, r6), o3(u3[0])) return u3[0][u3[0].length] = u3[1], u3[0].length;
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.pop = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, i11, u3) => {
      if (oe(u3, 1, 1, n7, r6), o3(u3[0])) {
        if (u3[0].length <= 0) throw new n3(n7, "OutOfBounds", r6);
        const e3 = u3[0][u3[0].length - 1];
        return u3[0].length = u3[0].length - 1, e3;
      }
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.erase = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, i11, l6) => {
      if (oe(l6, 2, 2, n7, r6), o3(l6[0])) {
        let e3 = Se(l6[1]);
        if (isNaN(e3) || false === r2(e3)) throw new n3(n7, "InvalidParameter", r6);
        const o6 = l6[0];
        if (o6.length <= 0) throw new n3(n7, "OutOfBounds", r6);
        if (e3 < 0 && (e3 = o6.length + e3), e3 < 0) throw new n3(n7, "OutOfBounds", r6);
        if (e3 >= o6.length) throw new n3(n7, "OutOfBounds", r6);
        return o6.splice(e3, 1), P3;
      }
      if (K(l6[0])) return l6[0].eraseField(ge(l6[1])), P3;
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.insert = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, i11, l6) => {
      if (oe(l6, 3, 3, n7, r6), o3(l6[0])) {
        const e3 = Se(l6[1]);
        if (isNaN(e3) || false === r2(e3)) throw new n3(n7, "InvalidParameter", r6);
        const o6 = l6[2], i12 = l6[0];
        if (e3 > i12.length) throw new n3(n7, "OutOfBounds", r6);
        if (e3 < 0 && e3 < -1 * i12.length) throw new n3(n7, "OutOfBounds", r6);
        return e3 === i12.length ? (i12[e3] = o6, P3) : (i12.splice(e3, 0, o6), P3);
      }
      if (K(l6[0])) return l6[0].setField(ge(l6[1]), l6[2]), P3;
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.getkeys = function(n7, r6) {
    return F4.standardFunction(n7, r6, (n8, r7, o5) => {
      if (oe(o5, 1, 1, n8, r7), null == o5[0]) return [];
      if (K(o5[0])) return o5[0].keys();
      throw new n3(n8, "InvalidParameter", r7);
    });
  }, F4.functions.getvalues = function(n7, r6) {
    return F4.standardFunction(n7, r6, (n8, r7, o5) => {
      if (oe(o5, 1, 1, n8, r7), null == o5[0]) return [];
      if (K(o5[0])) return o5[0].values();
      throw new n3(n8, "InvalidParameter", r7);
    });
  }, F4.functions.resize = function(n7, r6) {
    return F4.standardFunction(n7, r6, (i11, s7, c5) => {
      if (oe(c5, 2, 3, n7, r6), o3(c5[0])) {
        const e3 = Se(c5[1]);
        if (isNaN(e3) || false === r2(e3)) throw new n3(n7, "InvalidParameter", r6);
        if (e3 < 0) throw new n3(n7, "InvalidParameter", r6);
        const i12 = z2(c5[2], null), s8 = c5[0];
        if (s8.length >= e3) return s8.length = e3, P3;
        const l6 = s8.length;
        s8.length = e3;
        for (let n8 = l6; n8 < s8.length; n8++) s8[n8] = i12;
        return P3;
      }
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.includes = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, u3, a5) => {
      if (oe(a5, 2, 2, n7, r6), o3(a5[0])) {
        const n8 = a5[1];
        return !!a5[0].some((t8) => ye(t8, n8));
      }
      if (te(a5[0])) {
        const n8 = a5[1];
        return !!a5[0].toArray().some((t8) => ye(t8, n8));
      }
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.slice = function(n7, r6) {
    return F4.standardFunction(n7, r6, (a5, s7, c5) => {
      if (oe(c5, 1, 3, n7, r6), o3(c5[0])) {
        const e3 = Se(z2(c5[1], 0)), i11 = Se(z2(c5[2], c5[0].length));
        if (isNaN(e3) || false === r2(e3)) throw new n3(n7, "InvalidParameter", r6);
        if (isNaN(i11) || false === r2(i11)) throw new n3(n7, "InvalidParameter", r6);
        return c5[0].slice(e3, i11);
      }
      if (te(c5[0])) {
        const e3 = c5[0], i11 = Se(z2(c5[1], 0)), a6 = Se(z2(c5[2], e3.length()));
        if (isNaN(i11) || false === r2(i11)) throw new n3(n7, "InvalidParameter", r6);
        if (isNaN(a6) || false === r2(a6)) throw new n3(n7, "InvalidParameter", r6);
        return e3.toArray().slice(i11, a6);
      }
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.splice = function(n7, t8) {
    return F4.standardFunction(n7, t8, (n8, t9, r6) => {
      const e3 = [];
      for (let o5 = 0; o5 < r6.length; o5++) o3(r6[o5]) ? e3.push(...r6[o5]) : te(r6[o5]) ? e3.push(...r6[o5].toArray()) : e3.push(r6[o5]);
      return e3;
    });
  }, F4.functions.top = function(n7, r6) {
    return F4.standardFunction(n7, r6, (o5, a5, s7) => {
      if (oe(s7, 2, 2, n7, r6), o3(s7[0])) return Se(s7[1]) >= s7[0].length ? s7[0].slice() : s7[0].slice(0, Se(s7[1]));
      if (te(s7[0])) return Se(s7[1]) >= s7[0].length() ? s7[0].slice() : s7[0].slice(0, Se(s7[1]));
      throw new n3(n7, "InvalidParameter", r6);
    });
  }, F4.functions.first = function(n7, t8) {
    return F4.standardFunction(n7, t8, (r6, o5, u3) => (oe(u3, 1, 1, n7, t8), o3(u3[0]) ? 0 === u3[0].length ? null : u3[0][0] : te(u3[0]) ? 0 === u3[0].length() ? null : u3[0].get(0) : null));
  }, "sync" === F4.mode && (F4.functions.sort = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, e3) => N2(n7, r6, e3, false));
  }, F4.functions.any = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      for (const n8 of u3) {
        const t10 = i11(n8);
        if (t2(t10) && true === t10) return true;
      }
      return false;
    });
  }, F4.functions.all = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      for (const n8 of u3) {
        if (true !== i11(n8)) return false;
      }
      return true;
    });
  }, F4.functions.none = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      for (const n8 of u3) {
        if (true === i11(n8)) return false;
      }
      return true;
    });
  }, F4.functions.reduce = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, o5) => {
      oe(o5, 2, 3, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      return 2 === o5.length ? 0 === u3.length ? null : u3.reduce((n8, t10) => {
        const r7 = i11(n8, t10);
        return n8 = void 0 !== r7 && r7 !== P3 ? r7 : null;
      }) : u3.reduce((n8, t10) => {
        const r7 = i11(n8, t10);
        return n8 = void 0 !== r7 && r7 !== P3 ? r7 : null;
      }, o5[2]);
    });
  }, F4.functions.map = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6), s7 = [];
      for (const n8 of u3) {
        const t10 = i11(n8);
        void 0 !== t10 && t10 !== P3 ? s7.push(t10) : s7.push(null);
      }
      return s7;
    });
  }, F4.functions.filter = function(n7, t8) {
    return F4.standardFunction(n7, t8, (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6), a5 = [];
      for (const n8 of u3) {
        true === i11(n8) && a5.push(n8);
      }
      return a5;
    });
  }), "async" === F4.mode && (F4.functions.sort = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, e3) => N2(n7, r6, e3, true));
  }, F4.functions.any = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      for (const n8 of u3) {
        const t10 = await i11(n8);
        let r7 = null;
        if (r7 = C(r7) ? await t10 : t10, t2(r7) && true === r7) return true;
      }
      return false;
    });
  }, F4.functions.all = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      for (const n8 of u3) {
        const t10 = await i11(n8);
        let r7 = null;
        if (r7 = C(r7) ? await t10 : t10, true !== r7) return false;
      }
      return true;
    });
  }, F4.functions.none = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6);
      for (const n8 of u3) {
        const t10 = await i11(n8);
        let r7 = null;
        if (r7 = C(r7) ? await t10 : t10, true === r7) return false;
      }
      return true;
    });
  }, F4.functions.filter = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6), a5 = [];
      for (const n8 of u3) {
        const t10 = await i11(n8);
        let r7 = null;
        r7 = C(r7) ? await t10 : t10, true === r7 && a5.push(n8);
      }
      return a5;
    });
  }, F4.functions.reduce = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, i11) => {
      oe(i11, 2, 3, n7, r6);
      const u3 = i11[1].createFunction(n7), s7 = p7(i11[0], n7, r6);
      let c5;
      if (i11.length > 2) {
        const n8 = z2(i11[2], null);
        c5 = s7.reduce(async (n9, t10) => {
          let r7 = await n9;
          return void 0 !== r7 && r7 !== P3 || (r7 = null), u3(r7, t10);
        }, Promise.resolve(n8));
      } else {
        if (0 === s7.length) return null;
        c5 = s7.reduce(async (n8, t10, r7) => {
          if (r7 <= 1) return u3(n8, t10);
          let e3 = await n8;
          return void 0 !== e3 && e3 !== P3 || (e3 = null), u3(e3, t10);
        });
      }
      return c5.then((n8) => void 0 !== n8 && n8 !== P3 ? n8 : null);
    });
  }, F4.functions.map = function(n7, t8) {
    return F4.standardFunctionAsync(n7, t8, async (t9, r6, o5) => {
      oe(o5, 2, 2, n7, r6);
      const i11 = o5[1].createFunction(n7), u3 = p7(o5[0], n7, r6), s7 = [];
      for (const n8 of u3) {
        const t10 = await i11(n8);
        let r7 = null;
        r7 = C(r7) ? await t10 : t10, void 0 !== r7 && r7 !== P3 ? s7.push(r7) : s7.push(null);
      }
      return s7;
    });
  });
}
var p4 = Object.freeze(Object.defineProperty({ __proto__: null, registerFunctions: F }, Symbol.toStringTag, { value: "Module" }));

// node_modules/@arcgis/core/arcade/functions/date.js
function D2(n7, r6, e3) {
  return n7 + (k(e3) ? p5 : P5)[r6];
}
function k(n7) {
  return n7 % 4 == 0 && (n7 % 100 != 0 || n7 % 400 == 0);
}
var P5 = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
var p5 = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
function S(n7) {
  return null === n7 ? n7 : false === n7.isValid ? null : n7;
}
function Z2(n7, r6) {
  switch (t(n7)) {
    case "":
    case "default":
      return Ke(r6);
    case "z":
      return "UTC";
    default:
      return n7;
  }
}
function O(n7, r6) {
  return re(n7) ? n7.toArcadeDate() : Ze(n7, Ke(r6));
}
var C2 = new o2(["days", "months", "minutes", "seconds", "hours", "years", "milliseconds"], [["day", "days"], ["d", "days"], ["month", "months"], ["minute", "minutes"], ["m", "minutes"], ["second", "seconds"], ["s", "seconds"], ["hour", "hours"], ["h", "hours"], ["year", "years"], ["y", "years"], ["millisecond", "milliseconds"], ["ms", "milliseconds"]]);
function U2(n7) {
  return "M" === n7 ? "months" : C2.lookup(ge(n7)) ?? "milliseconds";
}
function j(e3, t8) {
  e3.today = function(r6, e4) {
    return t8(r6, e4, (t9, o5, i11) => {
      oe(i11, 0, 0, r6, e4);
      const a5 = /* @__PURE__ */ new Date();
      return a5.setHours(0, 0, 0, 0), m.dateJSAndZoneToArcadeDate(a5, Ke(r6));
    });
  }, e3.time = function(r6, e4) {
    return t8(r6, e4, (t9, f8, m6) => {
      switch (oe(m6, 0, 4, r6, e4), m6.length) {
        case 0: {
          const e5 = m.nowToArcadeDate(Ke(r6));
          return new r(e5.hour, e5.minute, e5.second, e5.millisecond);
        }
        case 1: {
          if (ie(m6[0])) return m6[0].clone();
          if (ne(m6[0])) return new r(m6[0].hour, m6[0].minute, m6[0].second, m6[0].millisecond);
          if (re(m6[0])) return new r(0, 0, 0, 0);
          if (e(m6[0])) return r.fromString(m6[0]);
          const n7 = Se(m6[0]);
          return false === isNaN(n7) ? r.fromMilliseconds(n7) : null;
        }
        case 2:
          return e(m6[0]) && e(m6[1]) ? r.fromString(m6[0], m6[1]) : r.fromParts(Se(m6[0]), Se(m6[1]), 0, 0);
        case 3:
          return r.fromParts(Se(m6[0]), Se(m6[1]), Se(m6[2]), 0);
        case 4:
          return r.fromParts(Se(m6[0]), Se(m6[1]), Se(m6[2]), Se(m6[3]));
      }
      throw new n3(r6, "InvalidParameter", e4);
    });
  }, e3.dateonly = function(r6, e4) {
    return t8(r6, e4, (t9, o5, a5) => {
      if (oe(a5, 0, 3, r6, e4), 3 === a5.length) return i3.fromParts(Se(a5[0]), Se(a5[1]) + 1, Se(a5[2]));
      if (2 === a5.length) {
        const n7 = ge(a5[1]);
        return "" === n7 ? null : "X" === n7 ? i3.fromSeconds(Se(a5[0])) : "x" === n7 ? i3.fromMilliseconds(Se(a5[0])) : i3.fromString(ge(a5[0]), n7);
      }
      if (1 === a5.length) {
        if (e(a5[0])) {
          if ("" === a5[0].replaceAll(/^\s+|\s+$/g, "")) return null;
          if (true === /^[0-9][0-9][0-9][0-9]$/.test(a5[0])) return i3.fromString(a5[0] + "-01-01");
        }
        if (re(a5[0])) return a5[0].clone();
        if (ne(a5[0])) return i3.fromParts(a5[0].year, a5[0].monthJS + 1, a5[0].day);
        const n7 = Se(a5[0]);
        return false === isNaN(n7) ? i3.fromMilliseconds(n7) : e(a5[0]) ? i3.fromString(a5[0]) : null;
      }
      if (0 === a5.length) {
        const e5 = m.nowToArcadeDate(Ke(r6));
        return false === e5.isValid ? null : i3.fromParts(e5.year, e5.monthJS + 1, e5.day);
      }
      return null;
    });
  }, e3.changetimezone = function(e4, i11) {
    return t8(e4, i11, (t9, a5, s7) => {
      if (oe(s7, 2, 2, e4, i11), null === s7[0]) return null;
      if (re(s7[0])) throw new n3(e4, "CannotChangeTimeZoneDateOnly", i11);
      if (re(s7[0])) throw new n3(e4, "CannotChangeTimeZoneTime", i11);
      const d6 = Ze(s7[0], Ke(e4));
      if (null === d6) throw new n3(e4, "InvalidParameter", i11);
      const h4 = h(Z2(ge(s7[1]), e4), false);
      if (null === h4) return null;
      const N2 = m.arcadeDateAndZoneToArcadeDate(d6, h4);
      return false === N2.isValid ? null : N2;
    });
  }, e3.timezone = function(r6, e4) {
    return t8(r6, e4, (t9, o5, i11) => {
      if (oe(i11, 1, 2, r6, e4), ie(i11[0])) return "Unknown";
      if (re(i11[0])) return "Unknown";
      const s7 = Ze(i11[0], Ke(r6));
      if (null === s7) return null;
      const f8 = s7.timeZone;
      return "system" === f8 ? m.systemTimeZoneCanonicalName : "utc" === f8.toLowerCase() ? "UTC" : "unknown" === f8.toLowerCase() ? "Unknown" : f8;
    });
  }, e3.timezoneoffset = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? null : 60 * i11.timeZoneOffset * 1e3;
    });
  }, e3.now = function(r6, e4) {
    return t8(r6, e4, (t9, o5, i11) => {
      oe(i11, 0, 0, r6, e4);
      const a5 = m.nowToArcadeDate(Ke(r6));
      return false === a5.isValid ? null : a5;
    });
  }, e3.timestamp = function(r6, e4) {
    return t8(r6, e4, (t9, o5, l6) => {
      oe(l6, 0, 0, r6, e4);
      const i11 = m.nowUTCToArcadeDate();
      return false === i11.isValid ? null : i11;
    });
  }, e3.toutc = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? null : i11.toUTC();
    });
  }, e3.tolocal = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? null : i11.toLocal();
    });
  }, e3.day = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.day;
    });
  }, e3.month = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.monthJS;
    });
  }, e3.year = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.year;
    });
  }, e3.hour = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      if (oe(o5, 1, 1, n7, r6), ie(o5[0])) return o5[0].hour;
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.hour;
    });
  }, e3.second = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      if (oe(o5, 1, 1, n7, r6), ie(o5[0])) return o5[0].second;
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.second;
    });
  }, e3.millisecond = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      if (oe(o5, 1, 1, n7, r6), ie(o5[0])) return o5[0].millisecond;
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.millisecond;
    });
  }, e3.minute = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      if (oe(o5, 1, 1, n7, r6), ie(o5[0])) return o5[0].minute;
      const i11 = Ze(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.minute;
    });
  }, e3.week = function(n7, r6) {
    return t8(n7, r6, (e4, t9, a5) => {
      oe(a5, 1, 2, n7, r6);
      const s7 = O(a5[0], Ke(n7));
      if (null === s7) return NaN;
      const c5 = Se(z2(a5[1], 0));
      if (c5 < 0 || c5 > 6) throw new n3(n7, "InvalidParameter", r6);
      const f8 = s7.day, m6 = s7.monthJS, h4 = s7.year, N2 = s7.dayOfWeekJS, y4 = D2(f8, m6, h4) - 1, w = Math.floor(y4 / 7);
      return N2 - c5 + (N2 - c5 < 0 ? 7 : 0) < y4 - 7 * w ? w + 1 : w;
    });
  }, e3.weekday = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.dayOfWeekJS;
    });
  }, e3.isoweekday = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.dayOfWeekISO;
    });
  }, e3.isomonth = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.monthISO;
    });
  }, e3.isoweek = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.weekISO;
    });
  }, e3.isoyear = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 1, 1, n7, r6);
      const i11 = O(o5[0], Ke(n7));
      return null === i11 ? NaN : i11.yearISO;
    });
  }, e3.date = function(e4, o5) {
    return t8(e4, o5, (t9, s7, d6) => {
      if (oe(d6, 0, 8, e4, o5), 3 === d6.length) {
        if (re(d6[0]) && ie(d6[1]) && e(d6[2])) {
          const t10 = h(Z2(ge(d6[2]) ?? "unknown", e4), false);
          return null === t10 ? null : S(m.fromParts(d6[0].year, d6[0].month, d6[0].day, d6[1].hour, d6[1].minute, d6[1].second, d6[1].millisecond, t10));
        }
        return S(m.fromParts(Se(d6[0]), Se(d6[1]) + 1, Se(d6[2]), 0, 0, 0, 0, Ke(e4)));
      }
      if (4 === d6.length) return S(m.fromParts(Se(d6[0]), Se(d6[1]) + 1, Se(d6[2]), Se(d6[3]), 0, 0, 0, Ke(e4)));
      if (5 === d6.length) return S(m.fromParts(Se(d6[0]), Se(d6[1]) + 1, Se(d6[2]), Se(d6[3]), Se(d6[4]), 0, 0, Ke(e4)));
      if (6 === d6.length) return S(m.fromParts(Se(d6[0]), Se(d6[1]) + 1, Se(d6[2]), Se(d6[3]), Se(d6[4]), Se(d6[5]), 0, Ke(e4)));
      if (7 === d6.length) return S(m.fromParts(Se(d6[0]), Se(d6[1]) + 1, Se(d6[2]), Se(d6[3]), Se(d6[4]), Se(d6[5]), Se(d6[6]), Ke(e4)));
      if (8 === d6.length) {
        const t10 = h(Z2(ge(d6[7]) ?? "unknown", e4), false);
        return null === t10 ? null : S(m.fromParts(Se(d6[0]), Se(d6[1]) + 1, Se(d6[2]), Se(d6[3]), Se(d6[4]), Se(d6[5]), Se(d6[6]), t10));
      }
      if (2 === d6.length) {
        if (re(d6[0]) && e(d6[1])) {
          const t11 = h(Z2(ge(d6[1]) ?? "unknown", e4), false);
          return null === t11 ? null : S(m.fromParts(d6[0].year, d6[0].month, d6[0].day, 0, 0, 0, 0, t11));
        }
        if (re(d6[0]) && ie(d6[1])) return S(m.fromParts(d6[0].year, d6[0].month, d6[0].day, d6[1].hour, d6[1].minute, d6[1].second, d6[1].millisecond, "unknown"));
        let t10, o6 = ge(d6[1]);
        return "" === o6 ? null : (o6 = ce(o6, true), t10 = "X" === o6 ? DateTime.fromSeconds(Se(d6[0])) : "x" === o6 ? DateTime.fromMillis(Se(d6[0])) : DateTime.fromFormat(ge(d6[0]), o6, { locale: l(), numberingSystem: "latn" }), t10.isValid ? m.dateTimeToArcadeDate(t10) : null);
      }
      if (1 === d6.length) {
        if (re(d6[0])) return S(m.fromParts(d6[0].year, d6[0].month, d6[0].day, 0, 0, 0, 0, "unknown"));
        if (e(d6[0])) {
          if ("" === d6[0].replaceAll(/^\s+|\s+$/g, "")) return null;
          if (true === /^[0-9][0-9][0-9][0-9]$/.test(d6[0])) return Ze(d6[0] + "-01-01", Ke(e4));
        }
        const r6 = Se(d6[0]);
        if (false === isNaN(r6)) {
          const t10 = DateTime.fromMillis(r6);
          return t10.isValid ? m.dateTimeAndZoneToArcadeDate(t10, Ke(e4)) : null;
        }
        return Ze(d6[0], Ke(e4));
      }
      return 0 === d6.length ? m.nowToArcadeDate(Ke(e4)) : null;
    });
  }, e3.datediff = function(r6, e4) {
    return t8(r6, e4, (t9, o5, i11) => {
      if (oe(i11, 2, 4, r6, e4), ie(i11[0])) return ie(i11[1]) ? i11[0].difference(i11[1], ge(i11[2])) : NaN;
      if (ie(i11[1])) return NaN;
      if (re(i11[0])) return re(i11[1]) ? i11[0].difference(i11[1], ge(i11[2])) : NaN;
      if (re(i11[1])) return NaN;
      let s7 = Ze(i11[0], Ke(r6)), h4 = Ze(i11[1], Ke(r6));
      if (null === s7 || null === h4) return NaN;
      let N2 = z2(i11[3], "");
      return "" !== N2 && null !== N2 ? (N2 = Z2(ge(N2), r6), s7 = m.arcadeDateAndZoneToArcadeDate(s7, N2), h4 = m.arcadeDateAndZoneToArcadeDate(h4, N2)) : s7.timeZone !== h4.timeZone && (s7.isUnknownTimeZone ? s7 = m.arcadeDateAndZoneToArcadeDate(s7, h4.timeZone) : h4 = (h4.isUnknownTimeZone, m.arcadeDateAndZoneToArcadeDate(h4, s7.timeZone))), s7.diff(h4, U2(i11[2]));
    });
  }, e3.dateadd = function(n7, r6) {
    return t8(n7, r6, (e4, t9, o5) => {
      oe(o5, 2, 3, n7, r6);
      let s7 = Se(o5[1]);
      if (isNaN(s7) || s7 === 1 / 0 || s7 === -1 / 0) return ie(o5[0]) || re(o5[0]) ? o5[0].clone() : Ze(o5[0], Ke(n7));
      const f8 = U2(o5[2]);
      if ("days" !== f8 && "months" !== f8 || (s7 = re(o5[0]) ? s7 : se(s7)), ie(o5[0])) return o5[0].plus(f8, s7);
      if (re(o5[0])) return o5[0].plus(f8, s7);
      const d6 = Ze(o5[0], Ke(n7));
      return null === d6 ? null : d6.plus({ [f8]: s7 });
    });
  };
}

// node_modules/@arcgis/core/arcade/functions/feature.js
function I2(e3) {
  const r6 = e3?.fullSchema();
  return r6?.datesInUnknownTimezone ? "unknown" : r6?.dateFieldsTimeZone || "UTC";
}
function F2(e3) {
  const r6 = e3.fullSchema()?.fieldsIndex;
  return null == r6 && e3 instanceof I ? e3.fieldsIndex : r6;
}
var g2 = { getAttributeSQL(e3, r6) {
  const t8 = e3.field(r6);
  if (null == t8) return t8;
  if (ne(t8)) {
    const n7 = t8.toDateTime(), o5 = F2(e3)?.get(r6)?.type;
    return "esriFieldTypeTimestampOffset" === o5 || "timestamp-offset" === o5 ? i4.fromDateTime(n7) : n7;
  }
  return t8;
} };
function P6(o5, w, P8) {
  o5.domain = function(e3, r6) {
    return w(e3, r6, (o6, m6, c5) => {
      if (oe(c5, 2, 3, e3, r6), H(c5[0])) {
        const r7 = He(c5[0], ge(c5[1]), void 0 === c5[2] ? void 0 : c5[2]);
        return r7 && r7.domain ? "coded-value" === r7.domain.type || "codedValue" === r7.domain.type ? p2.convertObjectToArcadeDictionary({ type: "codedValue", name: r7.domain.name, dataType: P[r7.field.type], codedValues: r7.domain.codedValues.map((e4) => ({ name: e4.name, code: e4.code })) }, Ke(e3)) : p2.convertObjectToArcadeDictionary({ type: "range", name: r7.domain.name, dataType: P[r7.field.type], min: r7.domain.minValue, max: r7.domain.maxValue }, Ke(e3)) : null;
      }
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.domaincode = function(e3, r6) {
    return w(e3, r6, (t8, o6, u3) => {
      if (oe(u3, 2, 4, e3, r6), H(u3[0])) return Be(u3[0], ge(u3[1]), u3[2], void 0 === u3[3] ? void 0 : u3[3]);
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.domainname = function(e3, r6) {
    return w(e3, r6, (t8, o6, u3) => {
      if (oe(u3, 2, 4, e3, r6), H(u3[0])) return $e(u3[0], ge(u3[1]), u3[2], void 0 === u3[3] ? void 0 : u3[3]);
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.expects = function(e3, r6) {
    return w(e3, r6, (t8, o6, i11) => {
      if (i11.length < 1) throw new n3(e3, "WrongNumberOfParameters", r6);
      return P3;
    });
  }, o5.featureinfilter = function(e3, r6) {
    return w(e3, r6, (e4, r7, t8) => {
      oe(t8, 2, 2, e4, r7);
      const [o6, u3] = t8;
      if (null == o6) return false;
      if ("" === u3 || null == u3) return true;
      if (!H(o6) || !e(u3)) throw new n3(e4, "InvalidParameter", r7);
      const s7 = L.create(u3, { fieldsIndex: F2(o6), timeZone: I2(o6) }), d6 = s7.getVariables();
      for (const n7 of d6) s7.parameters[n7] = P8(e4, { name: n7 });
      return s7.testFeature(o6, g2);
    });
  }, o5.gdbversion = function(e3, r6) {
    return w(e3, r6, (t8, o6, u3) => {
      if (oe(u3, 1, 1, e3, r6), H(u3[0])) return u3[0].gdbVersion();
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.schema = function(e3, r6) {
    return w(e3, r6, (o6, i11, u3) => {
      if (H(u3[0])) {
        const r7 = Qe(u3[0]);
        return r7 ? p2.convertObjectToArcadeDictionary(r7, Ke(e3)) : null;
      }
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.subtypecode = function(e3, r6) {
    return w(e3, r6, (t8, o6, u3) => {
      if (oe(u3, 1, 1, e3, r6), H(u3[0])) {
        const e4 = We(u3[0]);
        if (!e4) return null;
        if (e4.subtypeField && u3[0].hasField(e4.subtypeField)) {
          const r7 = u3[0].field(e4.subtypeField);
          for (const t9 of e4.subtypes) if (t9.code === r7) return t9.code;
          return null;
        }
        return null;
      }
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.subtypename = function(e3, r6) {
    return w(e3, r6, (t8, o6, u3) => {
      if (oe(u3, 1, 1, e3, r6), H(u3[0])) {
        const e4 = We(u3[0]);
        if (!e4) return "";
        if (e4.subtypeField && u3[0].hasField(e4.subtypeField)) {
          const r7 = u3[0].field(e4.subtypeField);
          for (const t9 of e4.subtypes) if (t9.code === r7) return t9.name;
          return "";
        }
        return "";
      }
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5.subtypes = function(e3, r6) {
    return w(e3, r6, (o6, u3, s7) => {
      if (oe(s7, 1, 1, e3, r6), H(s7[0])) {
        const r7 = We(s7[0]);
        return r7 ? p2.convertObjectToArcadeDictionary(r7, Ke(e3)) : null;
      }
      throw new n3(e3, "InvalidParameter", r6);
    });
  }, o5[r3("TimeReceived")] = function(r6, t8) {
    return w(r6, t8, (r7, t9, o6) => {
      if (oe(o6, 1, 1, r7, t9), H(o6[0])) {
        if (o6[0].hasField(i6)) {
          const t10 = o6[0].field(i6);
          return n4(t10) ? m.epochToArcadeDate(t10, r7.timeZone ?? "system") : ne(t10) ? t10 : null;
        }
        return null;
      }
      throw new n3(r7, "InvalidParameter", t9);
    });
  };
}

// node_modules/@arcgis/core/arcade/functions/geometry.js
function C3(C5, E4) {
  C5.ringisclockwise = function(e3, t8) {
    return E4(e3, t8, (n7, a5, s7) => {
      oe(s7, 1, 1, e3, t8);
      let f8 = [];
      if (null === s7[0]) return false;
      if (o3(s7[0])) for (const i11 of s7[0]) {
        if (!(i11 instanceof _)) throw new n3(e3, "InvalidParameter", t8);
        f8.push(i11.hasZ ? i11.hasM ? [i11.x, i11.y, i11.z, i11.m] : [i11.x, i11.y, i11.z] : [i11.x, i11.y]);
      }
      else if (s7[0] instanceof i5) f8 = s7[0]._elements;
      else {
        if (!te(s7[0])) throw new n3(e3, "InvalidParameter", t8);
        for (const n8 of s7[0].toArray()) {
          if (!(n8 instanceof _)) throw new n3(e3, "InvalidParameter", t8);
          f8.push(n8.hasZ ? n8.hasM ? [n8.x, n8.y, n8.z, n8.m] : [n8.x, n8.y, n8.z] : [n8.x, n8.y]);
        }
      }
      return !(f8.length < 3) && h2(f8);
    });
  }, C5.polygon = function(e3, t8) {
    return E4(e3, t8, (a5, i11, o5) => {
      let c5;
      if (oe(o5, 1, 1, e3, t8), o5[0] instanceof p2) {
        const t9 = De(a(o5[0], e3.spatialReference, "polygon"), e3.spatialReference);
        if (null == t9) return null;
        c5 = t9;
      } else if (o5[0] instanceof P2) c5 = f2(o5[0].toJSON());
      else {
        const t9 = JSON.parse(o5[0]);
        t9 && !t9.spatialReference && (t9.spatialReference = e3.spatialReference), c5 = De(new P2(t9), e3.spatialReference);
      }
      if (null !== c5 && false === c5.spatialReference.equals(e3.spatialReference)) throw new n3(e3, "WrongSpatialReference", t8);
      return je(c5);
    });
  }, C5.polyline = function(e3, t8) {
    return E4(e3, t8, (a5, i11, o5) => {
      let c5;
      if (oe(o5, 1, 1, e3, t8), o5[0] instanceof p2) {
        const t9 = De(a(o5[0], e3.spatialReference, "polyline"), e3.spatialReference);
        if (null == t9) return null;
        c5 = t9;
      } else if (o5[0] instanceof y) c5 = f2(o5[0].toJSON());
      else {
        const t9 = JSON.parse(o5[0]);
        t9 && !t9.spatialReference && (t9.spatialReference = e3.spatialReference), c5 = De(new y(t9), e3.spatialReference);
      }
      if (null !== c5 && false === c5.spatialReference.equals(e3.spatialReference)) throw new n3(e3, "WrongSpatialReference", t8);
      return je(c5);
    });
  }, C5.point = function(e3, t8) {
    return E4(e3, t8, (a5, i11, o5) => {
      let c5;
      if (oe(o5, 1, 1, e3, t8), o5[0] instanceof p2) {
        const t9 = De(a(o5[0], e3.spatialReference, "point"), e3.spatialReference);
        if (null == t9) return null;
        c5 = t9;
      } else if (o5[0] instanceof _) c5 = f2(o5[0].toJSON());
      else {
        const t9 = JSON.parse(o5[0]);
        t9 && !t9.spatialReference && (t9.spatialReference = e3.spatialReference), c5 = De(new _(t9), e3.spatialReference);
      }
      if (null !== c5 && false === c5.spatialReference.equals(e3.spatialReference)) throw new n3(e3, "WrongSpatialReference", t8);
      return je(c5);
    });
  }, C5.multipoint = function(e3, t8) {
    return E4(e3, t8, (a5, i11, o5) => {
      let c5;
      if (oe(o5, 1, 1, e3, t8), o5[0] instanceof p2) {
        const t9 = De(a(o5[0], e3.spatialReference, "multipoint"), e3.spatialReference);
        if (null == t9) return null;
        c5 = t9;
      } else if (o5[0] instanceof m2) c5 = f2(o5[0].toJSON());
      else {
        const t9 = JSON.parse(o5[0]);
        t9 && !t9.spatialReference && (t9.spatialReference = e3.spatialReference), c5 = De(new m2(t9), e3.spatialReference);
      }
      if (null !== c5 && false === c5.spatialReference.equals(e3.spatialReference)) throw new n3(e3, "WrongSpatialReference", t8);
      return je(c5);
    });
  }, C5.extent = function(e3, t8) {
    return E4(e3, t8, (a5, i11, o5) => {
      o5 = Je(o5), oe(o5, 1, 1, e3, t8);
      let u3 = null;
      if (o5[0] instanceof p2) u3 = De(a(o5[0], e3.spatialReference), e3.spatialReference);
      else if (o5[0] instanceof _) {
        const e4 = { xmin: o5[0].x, ymin: o5[0].y, xmax: o5[0].x, ymax: o5[0].y, spatialReference: o5[0].spatialReference.toJSON() }, t9 = o5[0];
        t9.hasZ && (e4.zmin = t9.z, e4.zmax = t9.z), t9.hasM && (e4.mmin = t9.m, e4.mmax = t9.m), u3 = f2(e4);
      } else if (o5[0] instanceof P2) u3 = f2(o5[0].extent?.toJSON());
      else if (o5[0] instanceof y) u3 = f2(o5[0].extent?.toJSON());
      else if (o5[0] instanceof m2) u3 = f2(o5[0].extent?.toJSON());
      else if (o5[0] instanceof z) u3 = f2(o5[0].toJSON());
      else {
        const t9 = JSON.parse(o5[0]);
        t9 && !t9.spatialReference && (t9.spatialReference = e3.spatialReference), u3 = De(new z(t9), e3.spatialReference);
      }
      if (null !== u3 && false === u3.spatialReference.equals(e3.spatialReference)) throw new n3(e3, "WrongSpatialReference", t8);
      return je(u3);
    });
  }, C5.geometry = function(e3, t8) {
    return E4(e3, t8, (a5, i11, o5) => {
      oe(o5, 1, 1, e3, t8);
      let c5 = null;
      if (null === o5[0]) return null;
      if (H(o5[0])) c5 = De(o5[0].geometry(), e3.spatialReference);
      else if (o5[0] instanceof p2) c5 = De(a(o5[0], e3.spatialReference), e3.spatialReference);
      else {
        const t9 = JSON.parse(o5[0]);
        t9 && !t9.spatialReference && (t9.spatialReference = e3.spatialReference), c5 = De(f2(t9), e3.spatialReference);
      }
      if (null !== c5 && false === c5.spatialReference.equals(e3.spatialReference)) throw new n3(e3, "WrongSpatialReference", t8);
      return je(c5);
    });
  }, C5.setgeometry = function(e3, t8) {
    return E4(e3, t8, (n7, a5, i11) => {
      if (oe(i11, 2, 2, e3, t8), !H(i11[0])) throw new n3(e3, "InvalidParameter", t8);
      if (true === i11[0].immutable) throw new n3(e3, "Immutable", t8);
      if (!(i11[1] instanceof c || null === i11[1])) throw new n3(e3, "InvalidParameter", t8);
      return i11[0]._geometry = i11[1], P3;
    });
  }, C5.feature = function(e3, t8) {
    return E4(e3, t8, (i11, l6, o5) => {
      if (0 === o5.length) throw new n3(e3, "WrongNumberOfParameters", t8);
      let f8;
      if (1 === o5.length) if (e(o5[0])) f8 = I.fromJson(JSON.parse(o5[0]), e3.timeZone);
      else if (H(o5[0])) f8 = I.createFromArcadeFeature(o5[0]);
      else if (o5[0] instanceof c) f8 = I.createFromGraphicLikeObject(o5[0], null, null, e3.timeZone);
      else {
        if (!(o5[0] instanceof p2)) throw new n3(e3, "InvalidParameter", t8);
        {
          const n7 = o5[0].hasField("geometry") ? o5[0].field("geometry") : null, i12 = o5[0].hasField("attributes") ? o5[0].field("attributes") : null;
          let l7, s7;
          if (K(n7)) l7 = a(n7, e3.spatialReference);
          else {
            if (null != n7 && !U(n7)) throw new n3(e3, "InvalidParameter", t8);
            l7 = n7;
          }
          if (K(i12)) s7 = I.parseAttributesFromDictionary(i12);
          else {
            if (null != i12) throw new n3(e3, "InvalidParameter", t8);
            s7 = null;
          }
          f8 = I.createFromGraphicLikeObject(l7, s7, null, e3.timeZone);
        }
      }
      else if (2 === o5.length) {
        let i12 = null, l7 = null;
        if (null !== o5[0]) if (o5[0] instanceof c) i12 = o5[0];
        else {
          if (!(o5[0] instanceof p2)) throw new n3(e3, "InvalidParameter", t8);
          i12 = a(o5[0], e3.spatialReference);
        }
        if (null !== o5[1]) {
          if (!(o5[1] instanceof p2)) throw new n3(e3, "InvalidParameter", t8);
          l7 = I.parseAttributesFromDictionary(o5[1]);
        }
        f8 = I.createFromGraphicLikeObject(i12, l7, null, e3.timeZone);
      } else {
        let i12 = null;
        const l7 = {};
        if (null !== o5[0]) if (o5[0] instanceof c) i12 = o5[0];
        else {
          if (!(o5[0] instanceof p2)) throw new n3(e3, "InvalidParameter", t8);
          i12 = a(o5[0], e3.spatialReference);
        }
        for (let n7 = 1; n7 < o5.length; n7 += 2) {
          const a5 = ge(o5[n7]), i13 = o5[n7 + 1];
          if (!(null == i13 || e(i13) || isNaN(i13) || ne(i13) || n4(i13) || ie(i13) || re(i13) || t2(i13))) throw new n3(e3, "InvalidParameter", t8);
          if (L2(i13) || false === V(i13)) throw new n3(e3, "InvalidParameter", t8);
          l7[a5] = i13 === P3 ? null : i13;
        }
        f8 = I.createFromGraphicLikeObject(i12, l7, null, e3.timeZone);
      }
      return f8._geometry = De(f8.geometry(), e3.spatialReference), f8.immutable = false, f8;
    });
  }, C5.dictionary = function(e3, t8) {
    return E4(e3, t8, (a5, i11, l6) => {
      if (0 === l6.length || 1 === l6.length && null === l6[0]) {
        const e4 = new p2();
        return e4.immutable = false, e4;
      }
      if (1 === l6.length && e(l6[0])) try {
        const t9 = JSON.parse(l6[0]), r6 = p2.convertObjectToArcadeDictionary(t9, Ke(e3), false);
        return r6.immutable = false, r6;
      } catch (c5) {
        throw new n3(e3, "InvalidParameter", t8);
      }
      if (1 === l6.length && l6[0] instanceof c) try {
        const t9 = l6[0].toJSON();
        t9.hasZ = true === l6[0].hasZ, t9.hasM = true === l6[0].hasM;
        const r6 = p2.convertObjectToArcadeDictionary(t9, Ke(e3), false);
        return r6.immutable = false, r6;
      } catch (c5) {
        throw new n3(e3, "InvalidParameter", t8);
      }
      if (1 === l6.length && H(l6[0])) try {
        const e4 = new p2();
        e4.immutable = false, e4.setField("geometry", l6[0].geometry());
        const t9 = new p2();
        t9.immutable = false, e4.setField("attributes", t9);
        for (const n7 of l6[0].keys()) t9.setField(n7, l6[0].field(n7));
        return e4;
      } catch (c5) {
        throw new n3(e3, "InvalidParameter", t8);
      }
      if (1 === l6.length && (K(l6[0]) || W(l6[0]) || $(l6[0]))) try {
        const e4 = new p2();
        e4.immutable = false;
        for (const t9 of l6[0].keys()) e4.setField(t9, l6[0].field(t9));
        return e4;
      } catch (c5) {
        throw new n3(e3, "InvalidParameter", t8);
      }
      if (2 === l6.length && l6[0] instanceof p2 && t2(l6[1])) try {
        if (!(true === l6[1])) {
          const e4 = new p2();
          e4.immutable = false;
          for (const t9 of l6[0].keys()) e4.setField(t9, l6[0].field(t9));
          return e4;
        }
        return l6[0].deepClone();
      } catch (c5) {
        throw new n3(e3, "InvalidParameter", t8);
      }
      if (l6.length % 2 != 0) throw new n3(e3, "WrongNumberOfParameters", t8);
      const s7 = /* @__PURE__ */ Object.create(null);
      for (let n7 = 0; n7 < l6.length; n7 += 2) {
        const a6 = ge(l6[n7]), i12 = l6[n7 + 1];
        if (!(null == i12 || e(i12) || isNaN(i12) || ne(i12) || n4(i12) || t2(i12) || re(i12) || ie(i12) || o3(i12) || te(i12))) throw new n3(e3, "InvalidParameter", t8);
        if (L2(i12)) throw new n3(e3, "InvalidParameter", t8);
        s7[a6] = i12 === P3 ? null : i12;
      }
      const f8 = new p2(s7);
      return f8.immutable = false, f8;
    });
  }, C5.haskey = function(t8, a5) {
    return E4(t8, a5, (i11, o5, s7) => {
      oe(s7, 2, 2, t8, a5);
      const f8 = ge(s7[1]);
      if (Q(s7[0]) || s7[0] instanceof p2) return s7[0].hasField(f8);
      if (s7[0] instanceof c) {
        const t9 = d(s7[0], f8, null, null, 2);
        return !t9 || "notfound" !== t9.keystate;
      }
      throw new n3(t8, "InvalidParameter", a5);
    });
  }, C5.hasvalue = function(e3, n7) {
    return E4(e3, n7, (r6, a5, i11) => (oe(i11, 2, 2, e3, n7), null != y2(i11[0], i11[1])));
  }, C5.indexof = function(e3, t8) {
    return E4(e3, t8, (n7, a5, i11) => {
      oe(i11, 2, 2, e3, t8);
      const s7 = i11[1];
      if (o3(i11[0])) {
        for (let e4 = 0; e4 < i11[0].length; e4++) if (ye(s7, i11[0][e4])) return e4;
        return -1;
      }
      if (te(i11[0])) {
        const e4 = i11[0].length();
        for (let t9 = 0; t9 < e4; t9++) if (ye(s7, i11[0].get(t9))) return t9;
        return -1;
      }
      throw new n3(e3, "InvalidParameter", t8);
    });
  }, C5.angle = function(e3, t8) {
    return E4(e3, t8, (n7, a5, i11) => {
      if (i11 = Je(i11), oe(i11, 2, 3, e3, t8), !(i11[0] instanceof _)) throw new n3(e3, "InvalidParameter", t8);
      if (!(i11[1] instanceof _)) throw new n3(e3, "InvalidParameter", t8);
      if (i11.length > 2 && !(i11[2] instanceof _)) throw new n3(e3, "InvalidParameter", t8);
      return 2 === i11.length ? z3(i11[0], i11[1]) : P4(i11[0], i11[1], i11[2]);
    });
  }, C5.bearing = function(e3, t8) {
    return E4(e3, t8, (n7, a5, i11) => {
      if (i11 = Je(i11), oe(i11, 2, 3, e3, t8), !(i11[0] instanceof _)) throw new n3(e3, "InvalidParameter", t8);
      if (!(i11[1] instanceof _)) throw new n3(e3, "InvalidParameter", t8);
      if (i11.length > 2 && !(i11[2] instanceof _)) throw new n3(e3, "InvalidParameter", t8);
      return 2 === i11.length ? d2(i11[0], i11[1]) : Z(i11[0], i11[1], i11[2]);
    });
  };
}

// node_modules/@arcgis/core/arcade/functions/maths.js
function g3(g5, d6) {
  function j3(r6, n7, t8) {
    const u3 = Se(r6);
    return isNaN(u3) ? u3 : isNaN(n7) || isNaN(t8) || n7 > t8 ? NaN : u3 < n7 ? n7 : u3 > t8 ? t8 : u3;
  }
  g5.number = function(r6, n7) {
    return d6(r6, n7, (a5, s7, f8) => {
      oe(f8, 1, 2, r6, n7);
      const c5 = f8[0];
      if (n4(c5)) return c5;
      if (null === c5) return 0;
      if (ne(c5) || ie(c5) || re(c5)) return c5.toNumber();
      if (t2(c5)) return Number(c5);
      if (o3(c5)) return NaN;
      if ("" === c5) return Number(c5);
      if (void 0 === c5) return Number(c5);
      if (e(c5)) {
        if (void 0 !== f8[1]) {
          let r7 = Y(f8[1], "", "");
          return r7 = Y(r7, "", ""), p(c5, { pattern: r7 });
        }
        return Number(c5.trim());
      }
      return Number(c5);
    });
  }, g5.abs = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.abs(Se(o5[0]))));
  }, g5.acos = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.acos(Se(o5[0]))));
  }, g5.asin = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.asin(Se(o5[0]))));
  }, g5.atan = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.atan(Se(o5[0]))));
  }, g5.atan2 = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 2, 2, r6, n7), Math.atan2(Se(o5[0]), Se(o5[1]))));
  }, g5.ceil = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => {
      if (oe(o5, 1, 2, r6, n7), 2 === o5.length) {
        let r7 = Se(o5[1]);
        return isNaN(r7) && (r7 = 0), v("ceil", Se(o5[0]), -1 * r7);
      }
      return Math.ceil(Se(o5[0]));
    });
  }, g5.round = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => {
      if (oe(o5, 1, 2, r6, n7), 2 === o5.length) {
        let r7 = Se(o5[1]);
        return isNaN(r7) && (r7 = 0), v("round", Se(o5[0]), -1 * r7);
      }
      return Math.round(Se(o5[0]));
    });
  }, g5.floor = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => {
      if (oe(o5, 1, 2, r6, n7), 2 === o5.length) {
        let r7 = Se(o5[1]);
        return isNaN(r7) && (r7 = 0), v("floor", Se(o5[0]), -1 * r7);
      }
      return Math.floor(Se(o5[0]));
    });
  }, g5.cos = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.cos(Se(o5[0]))));
  }, g5.isnan = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), "number" == typeof o5[0] && isNaN(o5[0])));
  }, g5.exp = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.exp(Se(o5[0]))));
  }, g5.log = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.log(Se(o5[0]))));
  }, g5.pow = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 2, 2, r6, n7), Se(o5[0]) ** Se(o5[1])));
  }, g5.random = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 0, 0, r6, n7), Math.random()));
  }, g5.sin = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.sin(Se(o5[0]))));
  }, g5.sqrt = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.sqrt(Se(o5[0]))));
  }, g5.tan = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => (oe(o5, 1, 1, r6, n7), Math.tan(Se(o5[0]))));
  }, g5.isempty = function(u3, e3) {
    return d6(u3, e3, (u4, e4, o5) => {
      if (oe(o5, 1, 2, u4, e4), o5.length >= 2 && !t2(o5[1])) throw new n3(u4, "InvalidParameter", e4);
      return z2(o5[1], false) ? x(o5[0]) : ue(o5[0]);
    });
  }, g5.boolean = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => {
      oe(o5, 1, 1, r6, n7);
      const i11 = o5[0];
      return Ae(i11);
    });
  }, g5.constrain = function(r6, n7) {
    return d6(r6, n7, (u3, e3, o5) => {
      oe(o5, 3, 3, r6, n7);
      const i11 = Se(o5[1]), s7 = Se(o5[2]);
      if (o3(o5[0])) {
        const r7 = [];
        for (const n8 of o5[0]) r7.push(j3(n8, i11, s7));
        return r7;
      }
      if (te(o5[0])) {
        const r7 = [];
        for (let n8 = 0; n8 < o5[0].length(); n8++) r7.push(j3(o5[0].get(n8), i11, s7));
        return r7;
      }
      return j3(o5[0], i11, s7);
    });
  };
}

// node_modules/@arcgis/core/arcade/functions/stats.js
function f5(n7, r6) {
  if (1 === r6.length) {
    if (o3(r6[0])) return l2(n7, r6[0], -1);
    if (te(r6[0])) return l2(n7, r6[0].toArray(), -1);
  }
  return l2(n7, r6, -1);
}
function a4(u3, a5) {
  u3.stdev = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("stdev", t8));
  }, u3.variance = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("variance", t8));
  }, u3.average = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("mean", t8));
  }, u3.mean = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("mean", t8));
  }, u3.sum = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("sum", t8));
  }, u3.min = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("min", t8));
  }, u3.max = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("max", t8));
  }, u3.distinct = function(n7, r6) {
    return a5(n7, r6, (n8, r7, t8) => f5("distinct", t8));
  }, u3.count = function(u4, f8) {
    return a5(u4, f8, (a6, c5, m6) => {
      if (oe(m6, 1, 1, u4, f8), null == m6[0]) return 0;
      if (o3(m6[0]) || e(m6[0])) return m6[0].length;
      if (te(m6[0])) return m6[0].length();
      if (K(m6[0])) return m6[0].entryCount();
      throw new n3(u4, "InvalidParameter", f8);
    });
  };
}

// node_modules/@arcgis/core/arcade/functions/convertdirection.js
var l4 = (e3) => (n7, t8, r6 = 14) => +e3(n7, t8).toFixed(r6);
var d4 = (e3, n7) => e3 + n7;
var g4 = (e3, n7) => e3 * n7;
var m4 = (e3, n7) => e3 / n7;
var f6 = (e3, n7, t8) => l4(d4)(e3, n7, t8);
var A = (e3, n7, t8) => l4(g4)(e3, n7, t8);
var D3 = (e3, n7, t8) => l4(m4)(e3, n7, t8);
var p6 = 360;
var T = 400;
var E2 = 2 * Math.PI;
var S2 = 3600;
var _2 = 3240;
var R = 60;
var F3 = 60;
var M2 = 180 * S2 / Math.PI;
var v2 = p6 * R * F3;
var L3 = 90 * S2;
var U3 = 180 * S2;
var x3 = 270 * S2;
var N = String.fromCharCode(7501);
var b2 = "";
function O2(e3) {
  if (false === e(e3)) throw new n3(null, "InvalidParameter", null);
  return e3;
}
function G(e3, n7) {
  const t8 = 10 ** n7;
  return Math.round(e3 * t8) / t8;
}
function I3(e3, n7) {
  return e3 % n7;
}
function y3(e3) {
  const n7 = parseFloat(e3.toString().replace(Math.trunc(e3).toString(), "0")) * Math.sign(e3);
  if (e3 < 0) {
    return { fraction: n7, integer: Math.ceil(e3) };
  }
  return { fraction: n7, integer: Math.floor(e3) };
}
function H2(e3, n7) {
  switch (e3) {
    case 0:
      return "SHORT" === n7 ? "N" : "North";
    case 1:
      return "SHORT" === n7 ? "E" : "East";
    case 2:
      return "SHORT" === n7 ? "S" : "South";
    case 3:
      return "SHORT" === n7 ? "W" : "West";
  }
}
function k2(e3, n7) {
  return e3 - Math.floor(e3 / n7) * n7;
}
function P7(e3) {
  switch (e3) {
    case 6:
    case 1:
      return p6;
    case 4:
      return E2;
    case 5:
      return T;
    case 2:
      return v2;
    case 7:
      return R;
    case 8:
      return F3;
    default:
      throw new n3(null, "LogicError", null, { reason: "unsupported evaluations" });
  }
}
var j2 = new o2([], [["NORTH", 1], ["NORTH AZIMUTH", 1], ["POLAR", 2], ["QUADRANT", 3], ["SOUTH", 4], ["SOUTH AZIMUTH", 4]]);
function z4(e3) {
  const n7 = j2.lookup(e3);
  if (null == n7) throw new n3(null, "LogicError", null, { reason: "unsupported directionType" });
  return n7;
}
var Q2 = new o2([], [["D", 1], ["DD", 1], ["DECIMAL DEGREE", 1], ["DEGREE", 1], ["DECIMAL DEGREES", 1], ["DEGREES", 1], ["DMS", 3], ["DEGREES MINUTES SECONDS", 3], ["R", 4], ["RAD", 4], ["RADS", 4], ["RADIAN", 4], ["RADIANS", 4], ["G", 5], ["GON", 5], ["GONS", 5], ["GRAD", 5], ["GRADS", 5], ["GRADIAN", 5], ["GRADIANS", 5]]);
function C4(e3) {
  const n7 = Q2.lookup(e3);
  if (null == n7) throw new n3(null, "LogicError", null, { reason: "unsupported units" });
  return n7;
}
var W2 = class _W {
  constructor(e3, n7, t8) {
    this.m_degrees = e3, this.m_minutes = n7, this.m_seconds = t8;
  }
  getField(e3) {
    switch (e3) {
      case 1:
      case 6:
        return this.m_degrees;
      case 7:
        return this.m_minutes;
      case 2:
      case 8:
        return this.m_seconds;
      default:
        throw new n3(null, "LogicError", null, { reason: "unexpected evaluation" });
    }
  }
  static secondsToDMS(e3) {
    const n7 = y3(e3).fraction;
    let t8 = y3(e3).integer;
    const r6 = Math.floor(t8 / S2);
    t8 -= r6 * S2;
    const s7 = Math.floor(t8 / F3);
    return t8 -= s7 * F3, new _W(r6, s7, t8 + n7);
  }
  static numberToDms(e3) {
    const n7 = y3(e3).fraction, t8 = y3(e3).integer, r6 = A(y3(100 * n7).fraction, 100), s7 = y3(100 * n7).integer;
    return new _W(t8, s7, r6);
  }
  format(e3, n7) {
    let t8 = G(this.m_seconds, n7), r6 = this.m_minutes, s7 = this.m_degrees;
    if (2 === e3 || 8 === e3) F3 <= t8 && (t8 -= F3, ++r6), R <= r6 && (r6 = 0, ++s7), p6 <= s7 && (s7 = 0);
    else if (7 === e3) t8 = 0, r6 = 30 <= this.m_seconds ? this.m_minutes + 1 : this.m_minutes, s7 = this.m_degrees, R <= r6 && (r6 = 0, ++s7), p6 <= s7 && (s7 = 0);
    else if (1 === e3 || 6 === e3) {
      const e4 = D3(this.m_seconds, S2), n8 = D3(this.m_minutes, R);
      s7 = Math.round(this.m_degrees + n8 + e4), r6 = 0, t8 = 0;
    }
    return new _W(s7, r6, t8);
  }
  static dmsToSeconds(e3, n7, t8) {
    return e3 * S2 + n7 * F3 + t8;
  }
};
var B2 = class {
  constructor(e3, n7, t8) {
    this.meridian = e3, this.angle = n7, this.direction = t8;
  }
  fetchAzimuth(e3) {
    return 0 === e3 ? this.meridian : this.direction;
  }
};
var V2 = class _V {
  constructor(e3) {
    this._angle = e3;
  }
  static createFromAngleAndDirection(e3, n7) {
    return new _V(new Z3(_V._convertDirectionFormat(e3.extractAngularUnits(2), n7, 1)));
  }
  getAngle(e3) {
    const n7 = this._angle.extractAngularUnits(2);
    switch (e3) {
      case 1:
      case 4:
      case 2:
        return new Z3(_V._convertDirectionFormat(n7, 1, e3));
      case 3: {
        const e4 = _V.secondsNorthAzimuthToQuadrant(n7);
        return new Z3(e4.angle);
      }
    }
  }
  getMeridian(e3) {
    const n7 = this._angle.extractAngularUnits(2);
    switch (e3) {
      case 1:
        return 0;
      case 4:
        return 2;
      case 2:
        return 1;
      case 3:
        return _V.secondsNorthAzimuthToQuadrant(n7).meridian;
    }
  }
  getDirection(e3) {
    const n7 = this._angle.extractAngularUnits(2);
    switch (e3) {
      case 1:
        return 1;
      case 4:
        return 3;
      case 2:
        return 0;
      case 3:
        return _V.secondsNorthAzimuthToQuadrant(n7).direction;
    }
  }
  static secondsNorthAzimuthToQuadrant(e3) {
    const n7 = e3 <= L3 || e3 >= x3 ? 0 : 2, t8 = 0 === n7 ? Math.min(v2 - e3, e3) : Math.abs(e3 - U3);
    return new B2(n7, t8, e3 > U3 ? 3 : 1);
  }
  static createFromAngleMeridianAndDirection(e3, n7, t8) {
    return new _V(new Z3(_V.secondsQuadrantToNorthAzimuth(e3.extractAngularUnits(2), n7, t8)));
  }
  static secondsQuadrantToNorthAzimuth(e3, n7, t8) {
    return 0 === n7 ? 1 === t8 ? e3 : v2 - e3 : 1 === t8 ? U3 - e3 : U3 + e3;
  }
  static _convertDirectionFormat(e3, n7, r6) {
    let s7 = 0;
    switch (n7) {
      case 1:
        s7 = e3;
        break;
      case 2:
        s7 = L3 - e3;
        break;
      case 3:
        throw new n3(null, "LogicError", null, { reason: "unexpected evaluation" });
      case 4:
        s7 = e3 + U3;
    }
    let i11 = 0;
    switch (r6) {
      case 1:
        i11 = s7;
        break;
      case 2:
        i11 = L3 - s7;
        break;
      case 3:
        throw new n3(null, "LogicError", null, { reason: "unexpected evaluation" });
      case 4:
        i11 = s7 - U3;
    }
    return i11 = I3(i11, v2), i11 < 0 ? v2 + i11 : i11;
  }
};
function X2(e3, n7, r6) {
  let s7 = null;
  switch (n7) {
    case 1:
      s7 = A(e3, S2);
      break;
    case 2:
      s7 = e3;
      break;
    case 5:
      s7 = A(e3, _2);
      break;
    case 4:
      s7 = A(e3, M2);
      break;
    default:
      throw new n3(null, "LogicError", null, { reason: "unexpected evaluation" });
  }
  switch (r6) {
    case 1:
      return D3(s7, S2);
    case 2:
      return s7;
    case 5:
      return D3(s7, _2);
    case 4:
      return s7 / M2;
    default:
      throw new n3(null, "LogicError", null, { reason: "unexpected evaluation" });
  }
}
var Z3 = class _Z {
  constructor(e3) {
    this._seconds = e3;
  }
  static createFromAngleAndUnits(e3, n7) {
    return new _Z(X2(e3, n7, 2));
  }
  extractAngularUnits(e3) {
    return X2(this._seconds, 2, q(e3));
  }
  static createFromDegreesMinutesSeconds(e3, n7, t8) {
    return new _Z(f6(f6(A(e3, S2), A(n7, F3)), t8));
  }
};
function q(e3) {
  switch (n(e3), e3) {
    case 1:
    case 6:
    case 3:
      return 1;
    case 5:
      return 5;
    case 7:
      return 7;
    case 4:
      return 4;
    case 2:
    case 8:
      return 2;
  }
}
var J = class _J {
  constructor(e3, n7, t8, r6) {
    this.view = e3, this.angle = n7, this.merdian = t8, this.direction = r6, this._dms = null, this._formattedDms = null;
  }
  static createFromStringAndBearing(e3, n7, t8) {
    return new _J(e3, n7.getAngle(t8), n7.getMeridian(t8), n7.getDirection(t8));
  }
  fetchAngle() {
    return this.angle;
  }
  fetchMeridian() {
    return this.merdian;
  }
  fetchDirection() {
    return this.direction;
  }
  fetchView() {
    return this.view;
  }
  fetchDms() {
    return null === this._dms && this._calculateDms(), this._dms;
  }
  fetchFormattedDms() {
    return null === this._formattedDms && this._calculateDms(), this._formattedDms;
  }
  _calculateDms() {
    let e3 = null, n7 = 6, t8 = 0;
    for (let r6 = 0; r6 < this.view.length; r6++) {
      const s7 = this.view[r6];
      switch (s7) {
        case "m":
          e3 = ae(this.view, r6, s7), n7 = 6 === n7 ? 7 : n7, r6 = e3.newpos;
          continue;
        case "s":
          e3 = ae(this.view, r6, s7), n7 = 8, t8 = t8 < e3.rounding ? e3.rounding : t8, r6 = e3.newpos;
          continue;
        default:
          continue;
      }
    }
    this._dms = W2.secondsToDMS(this.angle.extractAngularUnits(2)), this._formattedDms = W2.secondsToDMS(this.angle.extractAngularUnits(2)).format(n7, t8);
  }
};
function K2(e3, n7, r6, s7, i11) {
  let o5 = null;
  switch (n7) {
    case 1:
    case 4:
    case 5:
      return o5 = k2(G(e3.extractAngularUnits(n7), s7), P7(n7)), o5.toFixed(s7).padStart(r6 + s7 + (s7 > 0 ? 1 : 0), "0");
    case 6:
    case 7:
      return o5 = k2(i11.fetchFormattedDms().getField(n7), P7(n7)), o5.toFixed(s7).padStart(r6 + s7 + (s7 > 0 ? 1 : 0), "0");
    case 8:
      return o5 = k2(G(i11.fetchDms().getField(n7), s7), P7(n7)), o5.toFixed(s7).padStart(r6 + s7 + (s7 > 0 ? 1 : 0), "0");
    default:
      throw new n3(null, "LogicError", null, { reason: "unexpected evaluation" });
  }
}
function Y2(e3, n7, r6) {
  if (3 === r6) throw new n3(null, "LogicError", null, { reason: "conversion error" });
  if (3 === n7) {
    const n8 = W2.numberToDms(e3);
    return V2.createFromAngleAndDirection(Z3.createFromDegreesMinutesSeconds(n8.m_degrees, n8.m_minutes, n8.m_seconds), r6);
  }
  return V2.createFromAngleAndDirection(Z3.createFromAngleAndUnits(e3, q(n7)), r6);
}
function $2(e3) {
  switch (Se(e3)) {
    case 1:
      return { first: 0, second: 1 };
    case 2:
      return { first: 2, second: 1 };
    case 3:
      return { first: 2, second: 3 };
    case 4:
      return { first: 0, second: 3 };
  }
  return null;
}
function ee(e3) {
  switch (e3.toUpperCase().trim()) {
    case "N":
    case "NORTH":
      return 0;
    case "E":
    case "EAST":
      return 1;
    case "S":
    case "SOUTH":
      return 2;
    case "W":
    case "WEST":
      return 3;
  }
  return null;
}
function ne2(e3) {
  const n7 = parseFloat(e3);
  if (n4(n7)) {
    if (isNaN(n7)) throw new n3(null, "LogicError", null, { reason: "invalid conversion" });
    return n7;
  }
  throw new n3(null, "LogicError", null, { reason: "invalid conversion" });
}
function te2(e3, n7, s7) {
  const i11 = 3 === s7;
  let o5 = null, c5 = null, a5 = 0, u3 = 0, l6 = 0;
  if (i11) {
    if (e3.length < 2) throw new n3(null, "LogicError", null, { reason: "conversion error" });
    l6 = 1;
    const n8 = $2(ge(e3[e3.length - 1]));
    if (n8 ? (o5 = n8.first, c5 = n8.second) : (a5 = 1, o5 = ee(ge(e3[0])), c5 = ee(ge(e3[e3.length - 1]))), null === o5 || null === c5) throw new n3(null, "LogicError", null, { reason: "invalid conversion" });
  }
  switch (n7) {
    case 1:
    case 4:
    case 5:
      if (0 === e3.length) throw new n3(null, "LogicError", null, { reason: "invalid conversion" });
      return i11 ? V2.createFromAngleMeridianAndDirection(Z3.createFromAngleAndUnits(ne2(e3[a5]), q(n7)), o5, c5) : V2.createFromAngleAndDirection(Z3.createFromAngleAndUnits(ne2(e3[a5]), q(n7)), s7);
    case 3:
      if (u3 = e3.length - l6 - a5, 3 === u3) {
        const n8 = Z3.createFromDegreesMinutesSeconds(ne2(e3[a5]), ne2(e3[a5 + 1]), ne2(e3[a5 + 2]));
        return i11 ? V2.createFromAngleMeridianAndDirection(n8, o5, c5) : V2.createFromAngleAndDirection(n8, s7);
      }
      if (1 === u3) {
        const n8 = ne2(e3[a5]), t8 = W2.numberToDms(n8), r6 = Z3.createFromDegreesMinutesSeconds(t8.m_degrees, t8.m_minutes, t8.m_seconds);
        return i11 ? V2.createFromAngleMeridianAndDirection(r6, o5, c5) : V2.createFromAngleAndDirection(r6, s7);
      }
  }
  throw new n3(null, "LogicError", null, { reason: "invalid conversion" });
}
function re2(e3) {
  const n7 = /* @__PURE__ */ new Set([" ", "-", "/", "'", '"', "\\", "^", b2, N, "	", "\r", "\n", "*"]);
  let t8 = "";
  for (let r6 = 0; r6 < e3.length; r6++) {
    const s7 = e3.charAt(r6);
    n7.has(s7) ? t8 += "RRSPLITRRSPLITRR" : t8 += s7;
  }
  return t8.split("RRSPLITRRSPLITRR").filter((e4) => "" !== e4);
}
function se2(e3, n7, r6) {
  if (n4(e3)) return Y2(Se(e3), n7, r6);
  if (e(e3)) return te2(re2(e3), n7, r6);
  if (o3(e3)) return te2(e3, n7, r6);
  if (te(e3)) return te2(e3.toArray(), n7, r6);
  throw new n3(null, "LogicError", null, { reason: "conversion error" });
}
function ie2(e3, n7, r6) {
  const s7 = q(r6);
  if (s7 && 3 !== r6) {
    return e3.getAngle(n7).extractAngularUnits(s7);
  }
  throw new n3(null, "LogicError", null, { reason: "conversion error" });
}
function oe2(e3, n7, t8) {
  const r6 = e3.getAngle(n7);
  if (3 === n7 && 3 === t8) {
    const t9 = W2.secondsToDMS(r6.extractAngularUnits(2));
    return [H2(e3.getMeridian(n7), "SHORT"), t9.m_degrees, t9.m_minutes, t9.m_seconds, H2(e3.getDirection(n7), "SHORT")];
  }
  if (3 === t8) {
    const e4 = W2.secondsToDMS(r6.extractAngularUnits(2));
    return [e4.m_degrees, e4.m_minutes, e4.m_seconds];
  }
  return 3 === n7 ? [H2(e3.getMeridian(n7), "SHORT"), r6.extractAngularUnits(t8), H2(e3.getDirection(n7), "SHORT")] : [r6.extractAngularUnits(t8)];
}
function ce2(e3, n7) {
  let r6 = "";
  switch (e3) {
    case 1:
      r6 = 3 === n7 ? "DD.DD" + b2 : "DDD.DD" + b2;
      break;
    case 3:
      r6 = 3 === n7 ? "dd" + b2 + ` mm' ss"` : "ddd" + b2 + ` mm' ss.ss"`;
      break;
    case 4:
      r6 = "R.RR";
      break;
    case 5:
      r6 = "GGG.GG" + N;
      break;
    default:
      throw new n3(null, "LogicError", null, { reason: "conversion error" });
  }
  return 3 === n7 && (r6 = "p " + r6 + " b"), r6;
}
function ae(e3, n7, t8) {
  const r6 = { padding: 0, rounding: 0, newpos: n7 };
  let s7 = false;
  for (; n7 < e3.length; ) {
    const i11 = e3[n7];
    if (i11 === t8) s7 ? r6.rounding++ : r6.padding++, n7++;
    else {
      if ("." !== i11) break;
      s7 = true, n7++;
    }
  }
  return r6.newpos = n7 - 1, r6;
}
function ue2(e3, n7, t8) {
  const r6 = { escaped: "", newpos: n7 };
  for (n7++; n7 < e3.length; ) {
    const t9 = e3[n7];
    if (n7++, "]" === t9) break;
    r6.escaped += t9;
  }
  return r6.newpos = n7 - 1, r6;
}
function le(e3, n7, t8) {
  let r6 = "", s7 = null, i11 = null;
  const o5 = J.createFromStringAndBearing(n7, e3, t8), c5 = { D: 1, d: 6, m: 7, s: 8, R: 4, G: 5 };
  for (let a5 = 0; a5 < n7.length; a5++) {
    const u3 = n7[a5];
    switch (u3) {
      case "[":
        s7 = ue2(n7, a5), r6 += s7.escaped, a5 = s7.newpos;
        continue;
      case "D":
      case "d":
      case "m":
      case "s":
      case "R":
      case "G":
        s7 = ae(n7, a5, u3), i11 = e3.getAngle(t8), r6 += K2(i11, c5[u3], s7.padding, s7.rounding, o5), a5 = s7.newpos;
        continue;
      case "P":
      case "p":
        r6 += H2(o5.fetchMeridian(), "p" === u3 ? "SHORT" : "LONG");
        continue;
      case "B":
      case "b":
        r6 += H2(o5.fetchDirection(), "b" === u3 ? "SHORT" : "LONG");
        continue;
      default:
        r6 += u3;
    }
  }
  return r6;
}
var de = new o2(["TEXT", "VALUE"]);
function he(n7, s7, i11) {
  if (!(s7 instanceof p2)) throw new n3(null, "InvalidParameter", null);
  if (false === s7.hasField("directionType")) throw new n3(null, "LogicError", null, { reason: "missing directionType" });
  if (false === s7.hasField("angleType")) throw new n3(null, "LogicError", null, { reason: "missing angleType" });
  const o5 = z4(O2(s7.field("directiontype"))), c5 = se2(n7, C4(O2(s7.field("angletype"))), o5);
  if (!(i11 instanceof p2)) throw new n3(null, "InvalidParameter", null);
  if (false === i11.hasField("directionType")) throw new n3(null, "LogicError", null, { reason: "missing directionType" });
  if (false === i11.hasField("outputType")) throw new n3(null, "LogicError", null, { reason: "missing angleType" });
  const a5 = z4(O2(i11.field("directiontype"))), u3 = i11.hasField("angleType") ? C4(O2(i11.field("angletype"))) : null, l6 = de.get(O2(i11.field("outputType")));
  if (!a5 || !l6) throw new n3(null, "LogicError", null, { reason: "conversion error" });
  if (!(u3 || "TEXT" === l6 && i11.hasField("format"))) throw new n3(null, "LogicError", null, { reason: "invalid unit" });
  switch (l6) {
    case "VALUE":
      return 3 === a5 || 3 === u3 ? oe2(c5, a5, u3) : ie2(c5, a5, u3);
    case "TEXT": {
      let e3 = "";
      return i11.hasField("format") && (e3 = ge(i11.field("format"))), null !== e3 && "" !== e3 || (e3 = ce2(u3, a5)), le(c5, e3, a5);
    }
    default:
      throw new n3(null, "InvalidParameter", null);
  }
}

// node_modules/@arcgis/core/arcade/functions/hash.js
var t7 = 2654435761;
var s5 = 2246822519;
var n6 = 3266489917;
var e2 = 668265263;
var r5 = 374761393;
function h3(t8) {
  const s7 = [];
  for (let n7 = 0, e3 = t8.length; n7 < e3; n7++) {
    let e4 = t8.charCodeAt(n7);
    e4 < 128 ? s7.push(e4) : e4 < 2048 ? s7.push(192 | e4 >> 6, 128 | 63 & e4) : e4 < 55296 || e4 >= 57344 ? s7.push(224 | e4 >> 12, 128 | e4 >> 6 & 63, 128 | 63 & e4) : (n7++, e4 = 65536 + ((1023 & e4) << 10 | 1023 & t8.charCodeAt(n7)), s7.push(240 | e4 >> 18, 128 | e4 >> 12 & 63, 128 | e4 >> 6 & 63, 128 | 63 & e4));
  }
  return new Uint8Array(s7);
}
var i9 = class {
  constructor(t8) {
    this._seed = t8, this._totallen = 0, this._bufs = [], this.init();
  }
  init() {
    return this._bufs = [], this._totallen = 0, this;
  }
  updateFloatArray(t8) {
    const s7 = [];
    for (const n7 of t8) isNaN(n7) ? s7.push("NaN") : n7 === 1 / 0 ? s7.push("Infinity") : n7 === -1 / 0 ? s7.push("-Infinity") : 0 === n7 ? s7.push("0") : s7.push(n7.toString(16));
    this.update(h3(s7.join("")));
  }
  updateIntArray(t8) {
    const s7 = Int32Array.from(t8);
    this.update(new Uint8Array(s7.buffer));
  }
  updateUint8Array(t8) {
    this.update(Uint8Array.from(t8));
  }
  updateWithString(t8) {
    return this.update(h3(t8));
  }
  update(t8) {
    return this._bufs.push(t8), this._totallen += t8.length, this;
  }
  digest() {
    const t8 = new Uint8Array(this._totallen);
    let s7 = 0;
    for (const n7 of this._bufs) t8.set(n7, s7), s7 += n7.length;
    return this.init(), this._xxHash32(t8, this._seed);
  }
  _xxHash32(h4, i11 = 0) {
    const o5 = h4;
    let u3 = i11 + r5 & 4294967295, a5 = 0;
    if (o5.length >= 16) {
      const n7 = [i11 + t7 + s5 & 4294967295, i11 + s5 & 4294967295, i11 + 0 & 4294967295, i11 - t7 & 4294967295], e3 = h4, r6 = e3.length - 16;
      let o6 = 0;
      for (a5 = 0; (4294967280 & a5) <= r6; a5 += 4) {
        const r7 = a5, h5 = e3[r7] + (e3[r7 + 1] << 8), i12 = e3[r7 + 2] + (e3[r7 + 3] << 8), u4 = h5 * s5 + (i12 * s5 << 16);
        let l7 = n7[o6] + u4 & 4294967295;
        l7 = l7 << 13 | l7 >>> 19;
        const f8 = 65535 & l7, p7 = l7 >>> 16;
        n7[o6] = f8 * t7 + (p7 * t7 << 16) & 4294967295, o6 = o6 + 1 & 3;
      }
      u3 = (n7[0] << 1 | n7[0] >>> 31) + (n7[1] << 7 | n7[1] >>> 25) + (n7[2] << 12 | n7[2] >>> 20) + (n7[3] << 18 | n7[3] >>> 14) & 4294967295;
    }
    u3 = u3 + h4.length & 4294967295;
    const l6 = h4.length - 4;
    for (; a5 <= l6; a5 += 4) {
      const t8 = a5, s7 = o5[t8] + (o5[t8 + 1] << 8), r6 = o5[t8 + 2] + (o5[t8 + 3] << 8);
      u3 = u3 + (s7 * n6 + (r6 * n6 << 16)) & 4294967295, u3 = u3 << 17 | u3 >>> 15, u3 = (65535 & u3) * e2 + ((u3 >>> 16) * e2 << 16) & 4294967295;
    }
    for (; a5 < o5.length; ++a5) {
      u3 += o5[a5] * r5, u3 = u3 << 11 | u3 >>> 21, u3 = (65535 & u3) * t7 + ((u3 >>> 16) * t7 << 16) & 4294967295;
    }
    return u3 ^= u3 >>> 15, u3 = ((65535 & u3) * s5 & 4294967295) + ((u3 >>> 16) * s5 << 16), u3 ^= u3 >>> 13, u3 = ((65535 & u3) * n6 & 4294967295) + ((u3 >>> 16) * n6 << 16), u3 ^= u3 >>> 16, u3 < 0 ? u3 + 4294967296 : u3;
  }
};

// node_modules/@arcgis/core/arcade/functions/string.js
function D4(t8) {
  if ("loaded" === t8.loadStatus && t8.user?.sourceJSON) {
    return t8.user.sourceJSON;
  }
  return null;
}
function J2(t8, e3) {
  return !!t8 && D(t8, e3?.restUrl || "");
}
function W3(t8, e3) {
  if (!t8 || !e3) return t8 === e3;
  if (t8.x === e3.x && t8.y === e3.y) {
    if (t8.hasZ) {
      if (t8.z !== e3.z) return false;
    } else if (e3.hasZ) return false;
    if (t8.hasM) {
      if (t8.m !== e3.m) return false;
    } else if (e3.hasM) return false;
    return true;
  }
  return false;
}
function B3(n7, o5, i11) {
  if (null !== n7) if (o3(n7)) {
    if (o5.updateUint8Array([61]), i11.map.has(n7)) {
      const t8 = i11.map.get(n7);
      o5.updateIntArray([61237541 ^ t8]);
    } else {
      i11.map.set(n7, i11.currentLength++);
      for (const t8 of n7) B3(t8, o5, i11);
      i11.map.delete(n7), i11.currentLength--;
    }
    o5.updateUint8Array([199]);
  } else if (te(n7)) {
    if (o5.updateUint8Array([61]), i11.map.has(n7)) {
      const t8 = i11.map.get(n7);
      o5.updateIntArray([61237541 ^ t8]);
    } else {
      i11.map.set(n7, i11.currentLength++);
      for (const t8 of n7.toArray()) B3(t8, o5, i11);
      i11.map.delete(n7), i11.currentLength--;
    }
    o5.updateUint8Array([199]);
  } else {
    if (ne(n7)) return o5.updateIntArray([n7.toNumber()]), void o5.updateUint8Array([241]);
    if (re(n7)) return o5.updateIntArray([n7.toNumber()]), void o5.updateIntArray([257]);
    if (ie(n7)) return o5.updateIntArray([n7.toNumber()]), void o5.updateIntArray([263]);
    if (e(n7)) return o5.updateIntArray([n7.length]), o5.updateWithString(n7), void o5.updateUint8Array([41]);
    if (t2(n7)) o5.updateUint8Array([true === n7 ? 1 : 0, 113]);
    else {
      if (n4(n7)) return o5.updateFloatArray([n7]), void o5.updateUint8Array([173]);
      if (n7 instanceof t5) throw new n3(i11.context, "UnsupportedHashType", i11.node);
      if (n7 instanceof t4) throw new n3(i11.context, "UnsupportedHashType", i11.node);
      if (!(n7 instanceof p2)) {
        if (H(n7)) throw new n3(i11.context, "UnsupportedHashType", i11.node);
        if (n7 instanceof _) return o5.updateIntArray([3833836621]), o5.updateIntArray([0]), o5.updateFloatArray([n7.x]), o5.updateIntArray([1]), o5.updateFloatArray([n7.y]), n7.hasZ && (o5.updateIntArray([2]), o5.updateFloatArray([n7.z])), n7.hasM && (o5.updateIntArray([3]), o5.updateFloatArray([n7.m])), o5.updateIntArray([3765347959]), void B3(n7.spatialReference.wkid, o5, i11);
        if (n7 instanceof P2) {
          o5.updateIntArray([1266616829]);
          for (let t8 = 0; t8 < n7.rings.length; t8++) {
            const e3 = n7.rings[t8], r6 = [];
            let a5 = null, u3 = null;
            for (let o6 = 0; o6 < e3.length; o6++) {
              const i12 = n7.getPoint(t8, o6);
              if (0 === o6) a5 = i12;
              else if (W3(u3, i12)) continue;
              u3 = i12, o6 === e3.length - 1 && W3(a5, i12) || r6.push(i12);
            }
            o5.updateIntArray([1397116793, r6.length]);
            for (let t9 = 0; t9 < r6.length; t9++) {
              const e4 = r6[t9];
              o5.updateIntArray([3962308117, t9]), B3(e4, o5, i11), o5.updateIntArray([2716288009]);
            }
            o5.updateIntArray([2278822459]);
          }
          return o5.updateIntArray([3878477243]), void B3(n7.spatialReference.wkid, o5, i11);
        }
        if (n7 instanceof y) {
          o5.updateIntArray([4106883559]);
          for (let t8 = 0; t8 < n7.paths.length; t8++) {
            const e3 = n7.paths[t8];
            o5.updateIntArray([1397116793, e3.length]);
            for (let r6 = 0; r6 < e3.length; r6++) o5.updateIntArray([3962308117, r6]), B3(n7.getPoint(t8, r6), o5, i11), o5.updateIntArray([2716288009]);
            o5.updateIntArray([2278822459]);
          }
          return o5.updateIntArray([2568784753]), void B3(n7.spatialReference.wkid, o5, i11);
        }
        if (n7 instanceof m2) {
          o5.updateIntArray([588535921, n7.points.length]);
          for (let t8 = 0; t8 < n7.points.length; t8++) {
            const e3 = n7.getPoint(t8);
            o5.updateIntArray([t8]), B3(e3, o5, i11);
          }
          return o5.updateIntArray([1700171621]), void B3(n7.spatialReference.wkid, o5, i11);
        }
        if (n7 instanceof z) return o5.updateIntArray([3483648373]), o5.updateIntArray([0]), o5.updateFloatArray([n7.xmax]), o5.updateIntArray([1]), o5.updateFloatArray([n7.xmin]), o5.updateIntArray([2]), o5.updateFloatArray([n7.ymax]), o5.updateIntArray([3]), o5.updateFloatArray([n7.ymin]), n7.hasZ && (o5.updateIntArray([4]), o5.updateFloatArray([n7.zmax]), o5.updateIntArray([5]), o5.updateFloatArray([n7.zmin])), n7.hasM && (o5.updateIntArray([6]), o5.updateFloatArray([n7.mmax]), o5.updateIntArray([7]), o5.updateFloatArray([n7.mmin])), o5.updateIntArray([3622027469]), void B3(n7.spatialReference.wkid, o5, i11);
        if (n7 instanceof f) return o5.updateIntArray([14]), void 0 !== n7.wkid && null !== n7.wkid && o5.updateIntArray([n7.wkid]), n7.wkt && o5.updateWithString(n7.wkt), void (n7.wkt2 && o5.updateWithString(n7.wkt2));
        if (L2(n7)) throw new n3(i11.context, "UnsupportedHashType", i11.node);
        if (B(n7)) throw new n3(i11.context, "UnsupportedHashType", i11.node);
        if (X(n7)) throw new n3(i11.context, "UnsupportedHashType", i11.node);
        if (n7 === P3) throw new n3(i11.context, "UnsupportedHashType", i11.node);
        throw new n3(i11.context, "UnsupportedHashType", i11.node);
      }
      if (o5.updateUint8Array([223]), i11.map.has(n7)) {
        const t8 = i11.map.get(n7);
        o5.updateIntArray([61237541 ^ t8]);
      } else {
        i11.map.set(n7, i11.currentLength++);
        for (const t8 of n7.keys()) {
          o5.updateIntArray([t8.length]), o5.updateWithString(t8), o5.updateUint8Array([251]);
          B3(n7.field(t8), o5, i11), o5.updateUint8Array([239]);
        }
        i11.map.delete(n7), i11.currentLength--;
      }
      o5.updateUint8Array([73]);
    }
  }
  else o5.updateUint8Array([0, 139]);
}
function E3(e3, m6) {
  e3.portal = function(e4, r6) {
    return m6(e4, r6, (n7, a5, u3) => (oe(u3, 1, 1, e4, r6), new t4(ge(u3[0]))));
  }, e3.typeof = function(t8, e4) {
    return m6(t8, e4, (r6, n7, i11) => {
      oe(i11, 1, 1, t8, e4);
      const s7 = E(i11[0]);
      if ("Unrecognized Type" === s7) throw new n3(t8, "UnrecognizedType", e4);
      return s7;
    });
  }, e3.trim = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => (oe(a5, 1, 1, t8, e4), ge(a5[0]).trim()));
  }, e3.tohex = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 1, 1, t8, e4);
      const i11 = Se(a5[0]);
      return isNaN(i11) ? i11 : i11.toString(16);
    });
  }, e3.upper = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => (oe(a5, 1, 1, t8, e4), ge(a5[0]).toUpperCase()));
  };
  const A2 = new o2(["every-word", "first-word"]);
  e3.proper = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 1, 2, t8, e4);
      const u3 = (a5.length >= 2 ? A2.lookup(ge(a5[1])) : null) ?? "every-word", s7 = /\s/, l6 = ge(a5[0]);
      let p7 = "", f8 = true;
      for (let t9 = 0; t9 < l6.length; t9++) {
        let e5 = l6[t9];
        if (s7.test(e5)) "every-word" === u3 && (f8 = true);
        else {
          e5.toUpperCase() !== e5.toLowerCase() && (f8 ? (e5 = e5.toUpperCase(), f8 = false) : e5 = e5.toLowerCase());
        }
        p7 += e5;
      }
      return p7;
    });
  }, e3.lower = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => (oe(a5, 1, 1, t8, e4), ge(a5[0]).toLowerCase()));
  };
  const w = new o2(["digits", "digits-hyphen", "digits-hyphen-braces", "digits-hyphen-parentheses"]);
  e3.guid = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 0, 1, t8, e4);
      switch (a5.length > 0 ? w.lookup(ge(a5[0])) : null) {
        case "digits":
          return n2().replace("-", "").replace("-", "").replace("-", "").replace("-", "");
        case "digits-hyphen":
          return n2();
        case "digits-hyphen-parentheses":
          return "(" + n2() + ")";
        default:
          return "{" + n2() + "}";
      }
    });
  }, e3.standardizeguid = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 2, 2, t8, e4);
      let u3 = ge(a5[0]);
      if ("" === u3 || null === u3) return "";
      const s7 = /^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(u3);
      if (!s7) return "";
      const l6 = s7.groups;
      switch (u3 = l6.partA + "-" + l6.partB + "-" + l6.partC + "-" + l6.partD + "-" + l6.partE, w.lookup(ge(a5[1]))) {
        case "digits":
          return u3.replace("-", "").replace("-", "").replace("-", "").replace("-", "");
        case "digits-hyphen":
          return u3;
        case "digits-hyphen-parentheses":
          return "(" + u3 + ")";
        default:
          return "{" + u3 + "}";
      }
    });
  }, e3.console = function(t8, e4) {
    return m6(t8, e4, (e5, r6, n7) => (0 === n7.length || (1 === n7.length ? t8.console(ge(n7[0])) : t8.console(ge(n7))), P3));
  }, e3.mid = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 2, 3, t8, e4);
      let u3 = Se(a5[1]);
      if (isNaN(u3)) return "";
      if (u3 = Math.max(0, u3), 2 === a5.length) return ge(a5[0]).slice(u3);
      let l6 = Se(a5[2]);
      return isNaN(l6) ? "" : (l6 < 0 && (l6 = 0), ge(a5[0]).slice(u3, u3 + l6));
    });
  }, e3.find = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 2, 3, t8, e4);
      let u3 = 0;
      if (a5.length > 2) {
        if (u3 = Se(z2(a5[2], 0)), isNaN(u3)) return -1;
        u3 < 0 && (u3 = 0);
      }
      return ge(a5[1]).indexOf(ge(a5[0]), u3);
    });
  }, e3.left = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 2, 2, t8, e4);
      let u3 = Se(a5[1]);
      return isNaN(u3) ? "" : (u3 < 0 && (u3 = 0), ge(a5[0]).slice(0, u3));
    });
  }, e3.right = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 2, 2, t8, e4);
      const u3 = Se(a5[1]);
      if (isNaN(u3) || u3 <= 0) return "";
      return ge(a5[0]).slice(-u3);
    });
  }, e3.split = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      let u3;
      oe(a5, 2, 4, t8, e4);
      let l6 = Se(z2(a5[2], -1));
      const c5 = Ae(z2(a5[3], false));
      if (-1 === l6 || null === l6 || true === c5 ? u3 = ge(a5[0]).split(ge(a5[1])) : (isNaN(l6) && (l6 = -1), l6 < -1 && (l6 = -1), u3 = ge(a5[0]).split(ge(a5[1]), l6)), false === c5) return u3;
      const d6 = [];
      for (let t9 = 0; t9 < u3.length && !(-1 !== l6 && d6.length >= l6); t9++) "" !== u3[t9] && void 0 !== u3[t9] && d6.push(u3[t9]);
      return d6;
    });
  }, e3.text = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => (oe(a5, 1, 2, t8, e4), be(a5[0], a5[1])));
  }, e3.concatenate = function(t8, e4) {
    return m6(t8, e4, (t9, e5, r6) => {
      const n7 = [];
      if (r6.length < 1) return "";
      if (o3(r6[0])) {
        const t10 = z2(r6[2], "");
        for (let e6 = 0; e6 < r6[0].length; e6++) n7[e6] = be(r6[0][e6], t10);
        return r6.length > 1 ? n7.join(r6[1]) : n7.join("");
      }
      if (te(r6[0])) {
        const t10 = z2(r6[2], "");
        for (let e6 = 0; e6 < r6[0].length(); e6++) n7[e6] = be(r6[0].get(e6), t10);
        return r6.length > 1 ? n7.join(r6[1]) : n7.join("");
      }
      for (let a5 = 0; a5 < r6.length; a5++) n7[a5] = be(r6[a5]);
      return n7.join("");
    });
  }, e3.reverse = function(t8, e4) {
    return m6(t8, e4, (r6, n7, i11) => {
      if (oe(i11, 1, 1, t8, e4), o3(i11[0])) {
        const t9 = i11[0].slice();
        return t9.reverse(), t9;
      }
      if (te(i11[0])) {
        const t9 = i11[0].toArray().slice();
        return t9.reverse(), t9;
      }
      throw new n3(t8, "InvalidParameter", e4);
    });
  }, e3.replace = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 3, 4, t8, e4);
      const u3 = ge(a5[0]), s7 = ge(a5[1]), l6 = ge(a5[2]);
      return 4 !== a5.length || Ae(a5[3]) ? Y(u3, s7, l6) : u3.replace(s7, l6);
    });
  }, e3.urlencode = function(t8, e4) {
    return m6(t8, e4, (n7, a5, u3) => {
      if (oe(u3, 1, 1, t8, e4), null === u3[0]) return "";
      if (u3[0] instanceof p2) {
        let t9 = "";
        for (const e5 of u3[0].keys()) {
          const r6 = u3[0].field(e5);
          "" !== t9 && (t9 += "&"), t9 += null === r6 ? encodeURIComponent(e5) + "=" : encodeURIComponent(e5) + "=" + encodeURIComponent(r6);
        }
        return t9;
      }
      return encodeURIComponent(ge(u3[0]));
    });
  }, e3.hash = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => {
      oe(a5, 1, 1, t8, e4);
      const i11 = new i9(0);
      return B3(a5[0], i11, { context: t8, node: e4, map: /* @__PURE__ */ new Map(), currentLength: 0 }), i11.digest();
    });
  }, e3.convertdirection = function(t8, e4) {
    return m6(t8, e4, (r6, n7, a5) => (oe(a5, 3, 3, t8, e4), he(a5[0], a5[1], a5[2])));
  }, e3.fromjson = function(t8, e4) {
    return m6(t8, e4, (n7, u3, s7) => {
      if (oe(s7, 1, 1, t8, e4), false === e(s7[0])) throw new n3(t8, "InvalidParameter", e4);
      return p2.convertJsonToArcade(JSON.parse(ge(s7[0])), Ke(t8));
    });
  }, e3.tocharcode = function(t8, e4) {
    return m6(t8, e4, (r6, n7, u3) => {
      oe(u3, 1, 2, t8, e4);
      const l6 = Se(z2(u3[1], 0)), f8 = ge(u3[0]);
      if (0 === f8.length && 1 === u3.length) return null;
      if (f8.length <= l6 || l6 < 0) throw new n3(t8, "OutOfBounds", e4);
      return f8.charCodeAt(l6);
    });
  }, e3.tocodepoint = function(t8, e4) {
    return m6(t8, e4, (r6, n7, u3) => {
      oe(u3, 1, 2, t8, e4);
      const l6 = Se(z2(u3[1], 0)), f8 = ge(u3[0]);
      if (0 === f8.length && 1 === u3.length) return null;
      if (f8.length <= l6 || l6 < 0) throw new n3(t8, "OutOfBounds", e4);
      return f8.codePointAt(l6);
    });
  }, e3.fromcharcode = function(t8, e4) {
    return m6(t8, e4, (r6, n7, o5) => {
      if (o5.length < 1) throw new n3(t8, "WrongNumberOfParameters", e4);
      const i11 = o5.map((t9) => Math.trunc(Se(t9))).filter((t9) => t9 >= 0 && t9 <= 65535);
      return 0 === i11.length ? null : String.fromCharCode.apply(null, i11);
    });
  }, e3.fromcodepoint = function(t8, e4) {
    return m6(t8, e4, (r6, n7, o5) => {
      if (o5.length < 1) throw new n3(t8, "WrongNumberOfParameters", e4);
      let i11;
      try {
        i11 = o5.map((t9) => Math.trunc(Se(t9))).filter((t9) => t9 <= 1114111 && t9 >>> 0 === t9);
      } catch (u3) {
        return null;
      }
      return 0 === i11.length ? null : String.fromCodePoint.apply(null, i11);
    });
  }, e3.getuser = function(e4, n7) {
    return m6(e4, n7, (u3, s7, l6) => {
      oe(l6, 0, 2, e4, n7);
      let f8 = z2(l6[1], "");
      if (f8 = true === f8 || false === f8 ? "" : ge(f8), null !== f8 && "" !== f8) return null;
      if (0 === l6.length || l6[0] instanceof t4) {
        let t8 = null;
        if (t8 = e4.services?.portal ? e4.services.portal : M.getDefault(), l6.length > 0) {
          if (!J2(l6[0].field("url"), t8)) return null;
        }
        if (!t8) return null;
        if ("" === f8) {
          const n8 = D4(t8);
          if (n8) {
            const t9 = JSON.parse(JSON.stringify(n8));
            for (const e5 of ["lastLogin", "created", "modified"]) void 0 !== t9[e5] && null !== t9[e5] && (t9[e5] = new Date(t9[e5]));
            return p2.convertObjectToArcadeDictionary(t9, Ke(e4));
          }
        }
        return null;
      }
      throw new n3(e4, "InvalidParameter", n7);
    });
  }, e3.getenvironment = function(t8, e4) {
    return m6(t8, e4, (n7, a5, i11) => (oe(i11, 0, 0, t8, e4), p2.convertObjectToArcadeDictionary(Xe(Ke(t8), t8.spatialReference), Ke(t8), true)));
  }, e3.standardizefilename = function(t8, e4) {
    return m6(t8, e4, (t9, e5, r6) => {
      oe(r6, 1, 1, t9, e5);
      const [n7] = r6;
      if (null == n7) return "";
      if (!e(n7)) throw new n3(t9, "InvalidParameter", e5);
      return n7.replaceAll(/[<>"?*]/g, "_").replaceAll(/[/\\|]/g, "-").replaceAll(":", ", ");
    });
  };
}

// node_modules/@arcgis/core/arcade/functions/track.js
var c4;
async function s6() {
  null == c4 && (c4 = await import("./geodeticDistanceOperator-VKQ7PQ5F.js"), await c4.load());
}
function i10(t8) {
  const n7 = t8.track;
  if (null == n7) throw new n3(t8, "InvalidParameter", null);
  return n7;
}
function u2(t8, n7, r6, e3) {
  const o5 = Math.max(0, f7(t8, n7)), a5 = Math.max(0, f7(t8, r6));
  return t8.observations.slice(o5, a5).map((t9, n8) => e3(t9, n8 + o5));
}
function f7(t8, n7) {
  return t8.currentObservationIndex + n7;
}
function l5(t8, n7) {
  const e3 = f7(t8, n7);
  if (e3 < 0 || e3 >= t8.observations.length) throw new n3(null, "InvalidParameter", null);
  return e3;
}
function d5(t8, n7) {
  const { stats: r6 } = t8.observations[n7];
  if (null != r6.totalDistance) return r6.totalDistance;
  if (0 === n7) return r6.totalDistance = 0;
  let e3, o5 = 0;
  for (e3 = n7 - 1; e3 > 0; e3--) {
    const n8 = t8.observations[e3].stats;
    if (null != n8.totalDistance) {
      o5 = n8.totalDistance;
      break;
    }
  }
  for (let a5 = e3 + 1; a5 <= n7; a5++) {
    const n8 = t8.observations[a5];
    o5 += m5(t8, a5), n8.stats.totalDistance = o5;
  }
  return o5;
}
function m5(t8, n7) {
  const r6 = t8.observations[n7], e3 = r6.stats;
  if (null != e3.distance) return e3.distance;
  if (0 === n7) return e3.distance = 0;
  const o5 = t8.observations[n7 - 1];
  return e3.distance = c4.execute(o5.feature.geometry(), r6.feature.geometry());
}
function T2(t8, n7) {
  const r6 = t8.observations[n7], e3 = r6.stats;
  if (null != e3.speed) return e3.speed;
  if (0 === n7) return e3.speed = 0;
  const o5 = t8.observations[n7 - 1], a5 = r6.endTime - o5.startTime;
  if (a5 <= 0) return e3.speed = 0;
  const c5 = m5(t8, n7);
  return e3.speed = c5 / (a5 / 1e3);
}
function v3(t8, n7) {
  const r6 = t8.observations[n7], e3 = r6.stats;
  if (null != e3.acceleration) return e3.acceleration;
  if (0 === n7) return e3.acceleration = 0;
  const o5 = t8.observations[n7 - 1], a5 = r6.endTime - o5.startTime;
  if (a5 <= 0) return e3.acceleration = 0;
  const c5 = T2(t8, n7), s7 = T2(t8, n7 - 1);
  return e3.acceleration = (c5 - s7) / (a5 / 1e3);
}
function b3(r6, c5) {
  r6[r3("TrackIndex")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => (oe(r7, 0, 0, t9, n8), i10(t9).currentObservationIndex));
  }, r6[r3("TrackWindow")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 2, 2, t9, n8);
      const a5 = Se(r7[0]), c6 = Se(r7[1]);
      return u2(i10(t9), a5, c6, (t10) => t10.feature);
    });
  }, r6[r3("TrackFieldWindow")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 3, 3, t9, n8);
      const c6 = ge(r7[0]), s7 = Se(r7[1]), f8 = Se(r7[2]);
      return u2(i10(t9), s7, f8, (t10) => t10.feature.field(c6));
    });
  }, r6[r3("TrackGeometryWindow")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 2, 2, t9, n8);
      const a5 = Se(r7[0]), c6 = Se(r7[1]);
      return u2(i10(t9), a5, c6, (t10) => t10.feature.geometry());
    });
  }, r6[r3("TrackStartTime")] = function(n7, r7) {
    return c5(n7, r7, (n8, r8, o5) => (oe(o5, 0, 0, n8, r8), m.epochToArcadeDate(i10(n8).observations[0].startTime, n8.timeZone ?? "system")));
  }, r6[r3("TrackCurrentTime")] = function(n7, r7) {
    return c5(n7, r7, (n8, r8, o5) => {
      oe(o5, 0, 0, n8, r8);
      const a5 = i10(n8);
      return m.epochToArcadeDate(a5.observations[a5.currentObservationIndex].startTime, n8.timeZone ?? "system");
    });
  }, r6[r3("TrackDuration")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 0, 0, t9, n8);
      const o5 = i10(t9);
      return o5.observations[o5.currentObservationIndex].startTime - o5.observations[0].startTime;
    });
  }, r6[r3("TrackCurrentDistance")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 0, 0, t9, n8);
      const o5 = i10(t9);
      return d5(o5, o5.currentObservationIndex);
    });
  }, r6[r3("TrackDistanceAt")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 1, 1, t9, n8);
      const a5 = Se(r7[0]), c6 = i10(t9);
      return d5(c6, l5(c6, a5));
    });
  }, r6[r3("TrackDistanceWindow")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 2, 2, t9, n8);
      const a5 = Se(r7[0]), c6 = Se(r7[1]), s7 = i10(t9);
      return u2(s7, a5, c6, (t10, n9) => d5(s7, n9));
    });
  }, r6[r3("TrackCurrentSpeed")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 0, 0, t9, n8);
      const o5 = i10(t9);
      return T2(o5, o5.currentObservationIndex);
    });
  }, r6[r3("TrackSpeedAt")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 1, 1, t9, n8);
      const a5 = Se(r7[0]), c6 = i10(t9);
      return T2(c6, l5(c6, a5));
    });
  }, r6[r3("TrackSpeedWindow")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 2, 2, t9, n8);
      const a5 = Se(r7[0]), c6 = Se(r7[1]), s7 = i10(t9);
      return u2(s7, a5, c6, (t10, n9) => T2(s7, n9));
    });
  }, r6[r3("TrackCurrentAcceleration")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 0, 0, t9, n8);
      const o5 = i10(t9);
      return v3(o5, o5.currentObservationIndex);
    });
  }, r6[r3("TrackAccelerationAt")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 1, 1, t9, n8);
      const a5 = Se(r7[0]), c6 = i10(t9);
      return v3(c6, l5(c6, a5));
    });
  }, r6[r3("TrackAccelerationWindow")] = function(t8, n7) {
    return c5(t8, n7, (t9, n8, r7) => {
      oe(r7, 2, 2, t9, n8);
      const a5 = Se(r7[0]), c6 = Se(r7[1]), s7 = i10(t9);
      return u2(s7, a5, c6, (t10, n9) => v3(s7, n9));
    });
  };
}

export {
  s2 as s,
  i7 as i,
  s3 as s2,
  o4 as o,
  l3 as l,
  u,
  p3 as p,
  f4 as f,
  d3 as d,
  g,
  b,
  p4 as p2,
  j,
  P6 as P,
  C3 as C,
  g3 as g2,
  a4 as a,
  E3 as E,
  s6 as s3,
  b3 as b2
};
//# sourceMappingURL=chunk-OVCUKFGI.js.map
