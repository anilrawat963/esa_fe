import {
  i as i3
} from "./chunk-VEW6BMSK.js";
import {
  M
} from "./chunk-FNGWHAZ7.js";
import {
  s as s3
} from "./chunk-QHEXZ62Z.js";
import "./chunk-62W3XEE6.js";
import "./chunk-2XM57LB5.js";
import {
  i as i2
} from "./chunk-UXLDVCDU.js";
import "./chunk-JGWZMI5Q.js";
import "./chunk-43423NKQ.js";
import {
  b
} from "./chunk-T5PAMHK6.js";
import {
  d as d2
} from "./chunk-PZZ55S55.js";
import "./chunk-ALLCMCHO.js";
import "./chunk-NNZE65VM.js";
import "./chunk-RZOWZMPW.js";
import "./chunk-7LPDSYJP.js";
import {
  a as a2
} from "./chunk-PUPK5C6R.js";
import "./chunk-XQWYTOXM.js";
import "./chunk-VIDAPS4J.js";
import "./chunk-QTS3W27E.js";
import "./chunk-3RABUJDL.js";
import "./chunk-WJ3E33GQ.js";
import "./chunk-U3B7YMY7.js";
import "./chunk-F75XORHS.js";
import "./chunk-JPZOLUPV.js";
import "./chunk-GG4AQJJO.js";
import "./chunk-M5JMVUW2.js";
import "./chunk-ALR6N4CF.js";
import "./chunk-4X4BOGIG.js";
import "./chunk-XX3OKYJS.js";
import "./chunk-OTCNIJ2H.js";
import "./chunk-JGA5YJWL.js";
import "./chunk-GCI4MA3M.js";
import "./chunk-SJ2OBYX2.js";
import "./chunk-VX2NEBRT.js";
import "./chunk-IXRRTVLJ.js";
import "./chunk-EKM7KERW.js";
import "./chunk-WKTI47FV.js";
import "./chunk-T3SYSTKO.js";
import "./chunk-U55FA2EK.js";
import "./chunk-7CDU3B2L.js";
import "./chunk-B5A4L35M.js";
import "./chunk-52SEOH5H.js";
import "./chunk-JUZ3H47H.js";
import "./chunk-UYMV6HXW.js";
import "./chunk-JE2NJSBU.js";
import "./chunk-7HTU7ZUX.js";
import "./chunk-QNVJVDYZ.js";
import "./chunk-WDTGOP77.js";
import "./chunk-VYMBX5H5.js";
import "./chunk-BPTFV5VM.js";
import "./chunk-YP3WVJP3.js";
import "./chunk-M24KZOVI.js";
import "./chunk-4WTOIJXV.js";
import "./chunk-BUQC3CLV.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-ONXWBTTM.js";
import "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  l
} from "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import "./chunk-XXLHAM2M.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  d,
  s as s2,
  u2 as u
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/views/layers/WMSLayerView.js
var m2 = (m3) => {
  const n = m3;
  let c = class extends n {
    initialize() {
      this.exportImageParameters = new a2({ layer: this.layer });
    }
    destroy() {
      this.exportImageParameters = u(this.exportImageParameters);
    }
    get exportImageVersion() {
      return this.exportImageParameters?.commitProperty("version"), this.commitProperty("timeExtent"), (this._get("exportImageVersion") || 0) + 1;
    }
    get timeExtent() {
      return i3(this.layer, this.view?.timeExtent, this._get("timeExtent"));
    }
    async fetchPopupFeaturesAtLocation(e, r) {
      const { layer: s4 } = this;
      if (!e) throw new s("wmslayerview:fetchPopupFeatures", "Nothing to fetch without area", { layer: s4 });
      const { popupEnabled: p } = s4;
      if (!p) throw new s("wmslayerview:fetchPopupFeatures", "popupEnabled should be true", { popupEnabled: p });
      const a3 = this.createFetchPopupFeaturesQuery(e);
      if (!a3) return [];
      const { extent: i4, width: m4, height: n2, x: c2, y: h } = a3;
      if (!(i4 && m4 && n2)) throw new s("wmslayerview:fetchPopupFeatures", "WMSLayer does not support fetching features.", { extent: i4, width: m4, height: n2 });
      const u2 = await s4.fetchFeatureInfo(i4, m4, n2, c2, h);
      return s2(r), u2;
    }
  };
  return __decorate([m()], c.prototype, "exportImageParameters", void 0), __decorate([m({ readOnly: true })], c.prototype, "exportImageVersion", null), __decorate([m()], c.prototype, "layer", void 0), __decorate([m({ readOnly: true })], c.prototype, "timeExtent", null), c = __decorate([a("esri.views.layers.WMSLayerView")], c), c;
};

// node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js
var g = class extends m2(i2(b(d2))) {
  constructor() {
    super(...arguments), this.bitmapContainer = new s3();
  }
  supportsSpatialReference(e) {
    return this.layer.serviceSupportsSpatialReference(e);
  }
  update(e) {
    this.strategy.update(e).catch((e2) => {
      d(e2) || i.getLogger(this).error(e2);
    });
  }
  attach() {
    const { layer: e } = this, { imageMaxHeight: t, imageMaxWidth: r } = e;
    this.bitmapContainer = new s3(), this.container.addChild(this.bitmapContainer), this.strategy = new M({ container: this.bitmapContainer, fetchSource: this.fetchImage.bind(this), requestUpdate: this.requestUpdate.bind(this), imageMaxHeight: t, imageMaxWidth: r, imageRotationSupported: false, imageNormalizationSupported: false, hidpi: false }), this.addAttachHandles(l(() => this.exportImageVersion, () => this.requestUpdate()));
  }
  detach() {
    this.strategy = u(this.strategy), this.container.removeAllChildren();
  }
  viewChange() {
  }
  moveEnd() {
    this.requestUpdate();
  }
  createFetchPopupFeaturesQuery(e) {
    const { view: t, bitmapContainer: r } = this, { x: i4, y: s4 } = e, { spatialReference: a3 } = t;
    let o, m3 = 0, p = 0;
    if (r.children.some((e2) => {
      const { width: t2, height: r2, resolution: h2, x: c2, y: d4 } = e2, u2 = c2 + h2 * t2, g2 = d4 - h2 * r2;
      return i4 >= c2 && i4 <= u2 && s4 <= d4 && s4 >= g2 && (o = new z({ xmin: c2, ymin: g2, xmax: u2, ymax: d4, spatialReference: a3 }), m3 = t2, p = r2, true);
    }), !o) return null;
    const h = o.width / m3, c = Math.round((i4 - o.xmin) / h), d3 = Math.round((o.ymax - s4) / h);
    return { extent: o, width: m3, height: p, x: c, y: d3 };
  }
  async doRefresh() {
    this.requestUpdate();
  }
  isUpdating() {
    return this.strategy.updating || this.updateRequested;
  }
  fetchImage(e, t, r, i4) {
    return this.layer.fetchImageBitmap(e, t, r, { timeExtent: this.timeExtent, ...i4 });
  }
};
__decorate([m()], g.prototype, "strategy", void 0), g = __decorate([a("esri.views.2d.layers.WMSLayerView2D")], g);
var y = g;
export {
  y as default
};
//# sourceMappingURL=WMSLayerView2D-IIW4BNYW.js.map
