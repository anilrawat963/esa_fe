import {
  M
} from "./chunk-CNYNCKEV.js";
import {
  y
} from "./chunk-ZIE53VIV.js";
import {
  a,
  s2 as s,
  t
} from "./chunk-QY7XKUIV.js";

// node_modules/@arcgis/core/webdoc/support/writeUtils.js
var o = /* @__PURE__ */ new Set(["bing-maps", "imagery", "imagery-tile", "map-image", "open-street-map", "tile", "unknown", "unsupported", "vector-tile", "web-tile", "wcs", "wms", "wmts"]);
var a2 = /* @__PURE__ */ new Set(["integrated-mesh-3dtiles"]);
var l = /* @__PURE__ */ new Set(["catalog", "csv", "feature", "geo-rss", "geojson", "group", "imagery", "imagery-tile", "kml", "knowledge-graph", "map-image", "map-notes", "media", "ogc-feature", "oriented-imagery", "parquet", "route", "stream", "subtype-group", "tile", "unknown", "unsupported", "vector-tile", "video", "web-tile", "wcs", "wfs", "wms", "wmts"]);
var s2 = /* @__PURE__ */ new Set([...l, "link-chart"]);
function d(e) {
  switch (e.layerContainerType) {
    case "basemap-base-layers":
      return o;
    case "basemap-ground-layers":
      return a2;
    case "operational-layers":
      return "link-chart" === e.origin ? s2 : l;
    default:
      return null;
  }
}
function p(e, t2) {
  if (t2.restrictedWebMapWriting) {
    const r = d(t2);
    return null == r || r.has(e.type) && !M(e);
  }
  return true;
}
function m(e, t2) {
  if (t2) if (M(e)) {
    const n = t("featureCollection.layers", t2), i = n?.[0]?.layerDefinition;
    i && f(e, i);
  } else "group" !== e.type && f(e, t2);
}
function f(e, t2) {
  "maxScale" in e && (t2.maxScale = y(e.maxScale) ?? void 0), "minScale" in e && (t2.minScale = y(e.minScale) ?? void 0);
}
function g(e, t2) {
  if (m(e, t2), t2 && (t2.id = e.id, "blendMode" in e && (t2.blendMode = e.blendMode, "normal" === t2.blendMode && delete t2.blendMode), t2.opacity = y(e.opacity) ?? void 0, t2.title = e.title || "Layer", t2.visibility = e.visible, "legendEnabled" in e && "wmts" !== e.type)) if (M(e)) {
    const r = t2.featureCollection;
    r && (r.showLegend = e.legendEnabled);
  } else t2.showLegend = e.legendEnabled;
}
function y2(r, n, o2) {
  if (!r.persistenceEnabled) return null;
  if (!("write" in r) || !r.write) return o2?.messages && o2.messages.push(new s("layer:unsupported", `Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`, { layer: r })), null;
  if (M(r) && !r.isTable) n = r.resourceInfo;
  else if (p(r, o2)) {
    const e = {};
    return r.write(e, o2) ? e : null;
  }
  return null != n && g(r, n = a(n)), n;
}

export {
  y2 as y
};
//# sourceMappingURL=chunk-KZCOWPYM.js.map
