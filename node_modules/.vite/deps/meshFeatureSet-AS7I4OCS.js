import {
  i as i3,
  n as n2
} from "./chunk-ABFGIDIM.js";
import {
  Y
} from "./chunk-FQUT4EXK.js";
import "./chunk-C7T2CCN3.js";
import "./chunk-M5JMVUW2.js";
import "./chunk-2JMKFI2D.js";
import "./chunk-QYAMBIRP.js";
import {
  i as i2,
  n
} from "./chunk-DGQSLK46.js";
import "./chunk-EOQ2S5UA.js";
import "./chunk-WBXDB33U.js";
import {
  g
} from "./chunk-HCTBVF3W.js";
import "./chunk-QL52LNOM.js";
import "./chunk-V6DIT5FJ.js";
import "./chunk-NAJIRKWY.js";
import "./chunk-7EFQIJSP.js";
import "./chunk-YJPRACXY.js";
import "./chunk-GVMCGYZ6.js";
import "./chunk-JHV6OBEB.js";
import {
  s
} from "./chunk-S5K4XWUR.js";
import "./chunk-Y4O7HJXV.js";
import "./chunk-YYXR3KOD.js";
import "./chunk-274P3DJ3.js";
import "./chunk-2WMZLC2C.js";
import "./chunk-HHDWMGJ3.js";
import "./chunk-WHHIH5YU.js";
import "./chunk-MEDXVTKR.js";
import "./chunk-5LMH6D7V.js";
import "./chunk-BZLHV37L.js";
import "./chunk-V6V3WWJF.js";
import "./chunk-NDFIZYZY.js";
import "./chunk-TLTSPUO7.js";
import "./chunk-ZVTEFYZX.js";
import "./chunk-LPUPM55U.js";
import "./chunk-WCWUUHUV.js";
import "./chunk-WDTGOP77.js";
import "./chunk-VYMBX5H5.js";
import "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import {
  _
} from "./chunk-C3FRY5U4.js";
import "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import "./chunk-T7F6Q6JJ.js";
import "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import {
  f
} from "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import "./chunk-XXLHAM2M.js";
import "./chunk-5EI5H4QX.js";
import "./chunk-ZIE53VIV.js";
import "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import {
  e
} from "./chunk-4DGC7CBY.js";
import "./chunk-GNMPGHLQ.js";
import {
  i3 as i
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/rest/support/meshFeatureSet.js
var p = () => i.getLogger("esri.rest.support.meshFeatureSet");
function l(t, r, s2) {
  const o = s2.features;
  s2.features = [], delete s2.geometryType;
  const a = g.fromJSON(s2);
  if (a.geometryType = "mesh", !s2.assetMaps) return a;
  const u = g2(r, s2.assetMaps), i4 = t.sourceSpatialReference ?? f.WGS84, m = s2.globalIdFieldName, { outFields: c } = t, p2 = null != c && c.length > 0 ? y(c.includes("*") ? null : new Set(c)) : () => ({});
  for (const n3 of o) {
    const t2 = h(n3, m, i4, r, u);
    a.features.push(new _({ geometry: t2, attributes: p2(n3) }));
  }
  return a;
}
function y(e2) {
  return ({ attributes: t }) => {
    if (!t) return {};
    if (!e2) return t;
    for (const r in t) e2.has(r) || delete t[r];
    return t;
  };
}
function h(e2, t, r, n3, a) {
  const u = e2.attributes[t], i4 = a.get(u);
  if (null == i4 || !e2.geometry) return null;
  const f2 = n2(e2.attributes, r, n3.transformFieldRoles), p2 = z.fromJSON(e2.geometry);
  p2.spatialReference = r;
  const l2 = i3(e2.attributes, n3.transformFieldRoles), y2 = r.isGeographic ? "local" : "georeferenced", h2 = d(i4);
  return h2 ? Y.createWithExternalSource(f2, h2, { extent: p2, transform: l2, vertexSpace: y2, unitConversionDisabled: true }) : Y.createIncomplete(f2, { extent: p2, transform: l2, vertexSpace: y2 });
}
function g2(e2, t) {
  const s2 = /* @__PURE__ */ new Map();
  for (const o of t) {
    const t2 = o.parentGlobalId;
    if (null == t2) continue;
    const n3 = o.assetName, a = o.assetType, u = o.assetHash, f2 = o.assetURL, m = o.conversionStatus, c = o.seqNo, l2 = s(a, e2.supportedFormats);
    if (!l2) {
      p().error("mesh-feature-set:unknown-format", `Service returned an asset of type ${a}, but it does not list it as a supported type`);
      continue;
    }
    const y2 = e(s2, t2, () => ({ files: /* @__PURE__ */ new Map() }));
    e(y2.files, n3, () => ({ name: n3, type: a, mimeType: l2, status: S(m), parts: [] })).parts[c] = { hash: u, url: f2 };
  }
  return s2;
}
function d(e2) {
  const t = Array.from(e2.files.values()), r = new Array();
  for (const s2 of t) {
    if (2 !== s2.status) return null;
    const e3 = new Array();
    for (const t2 of s2.parts) {
      if (!t2) return null;
      e3.push(new n(t2.url, t2.hash));
    }
    r.push(new i2(s2.name, s2.mimeType, e3));
  }
  return { type: "service", assets: r };
}
function S(e2) {
  switch (e2) {
    case "COMPLETED":
    case "SUBMITTED":
      return 2;
    case "INPROGRESS":
      return 1;
    default:
      return 0;
  }
}
export {
  g2 as assetMapFromAssetMapsJSON,
  h as extractMesh,
  l as meshFeatureSetFromJSON
};
//# sourceMappingURL=meshFeatureSet-AS7I4OCS.js.map
