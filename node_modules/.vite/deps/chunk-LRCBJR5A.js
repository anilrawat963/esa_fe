import {
  l
} from "./chunk-XXBJY7RN.js";
import {
  b
} from "./chunk-P6IKJIMO.js";
import {
  n
} from "./chunk-MA3QDRC3.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  C
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i
} from "./chunk-QY7XKUIV.js";

// node_modules/@arcgis/core/support/collectionUtils.js
function t(t2) {
  return new l({ getCollections: () => [t2.tables, t2.layers], getChildrenFunction: (e) => {
    const t3 = [];
    return "tables" in e && t3.push(e.tables), "layers" in e && t3.push(e.layers), t3;
  }, itemFilterFunction: (e) => {
    const t3 = e.parent;
    return !!t3 && "tables" in t3 && t3.tables.includes(e);
  } });
}
function n2(e) {
  for (const t2 of e.values()) t2?.destroy();
  e.clear();
}

// node_modules/@arcgis/core/support/LayersMixin.js
function d(e, r, t2) {
  let o, s;
  if (e) for (let a3 = 0, i2 = e.length; a3 < i2; a3++) {
    if (o = e.at(a3), o?.[r] === t2) return o;
    if ("group" === o?.type && (s = d(o.layers, r, t2), s)) return s;
  }
}
var n3 = (n5) => {
  const y = n5;
  let h = class extends y {
    constructor(...e) {
      super(...e), this.layers = new O();
      const t2 = (e2) => {
        e2.parent && e2.removeFromParent();
      }, s = (e2) => {
        e2.parent = this, this.layerAdded(e2), "elevation" !== e2.type && "base-elevation" !== e2.type || i.getLogger(this).error(`Layer 'title:${e2.title}, id:${e2.id}' of type '${e2.type}' is not supported as an operational layer and will therefore be ignored.`);
      }, a3 = (e2) => {
        e2.parent = null, this.layerRemoved(e2);
      };
      this.addHandles([this.layers.on("before-add", (e2) => {
        if (e2.item === this) return e2.preventDefault(), void i.getLogger(this).error("#add()", "Cannot add layer to itself.");
        t2(e2.item);
      }), this.layers.on("after-add", (e2) => s(e2.item)), this.layers.on("after-remove", (e2) => a3(e2.item))]);
    }
    destroy() {
      const e = this.layers.toArray();
      for (const r of e) r.destroy();
      this.layers.destroy();
    }
    removeChildLayer(e) {
      this.layers.remove(e), super.removeChildLayer?.(e);
    }
    set layers(e) {
      this._set("layers", n(e, this._get("layers")));
    }
    add(e, r) {
      const t2 = this.layers;
      if (r = t2.getNextIndex(r), e instanceof b) {
        const o = e;
        o.parent === this ? this.reorder(o, r) : t2.add(o, r);
      } else C(e) ? e.then((e2) => {
        this.destroyed || this.add(e2, r);
      }) : i.getLogger(this).error("#add()", "The item being added is not a Layer or a Promise that resolves to a Layer.");
    }
    addMany(e, r) {
      const t2 = this.layers;
      let o = t2.getNextIndex(r);
      e.slice().forEach((e2) => {
        e2.parent !== this ? (t2.add(e2, o), o += 1) : this.reorder(e2, o);
      });
    }
    findLayerById(e) {
      return d(this.layers, "id", e);
    }
    findLayerByUid(e) {
      return d(this.layers, "uid", e);
    }
    remove(e) {
      return this.layers.remove(e);
    }
    removeMany(e) {
      return this.layers.removeMany(e);
    }
    removeAll() {
      return this.layers.removeAll();
    }
    reorder(e, r) {
      return this.layers.reorder(e, r);
    }
    layerAdded(e) {
    }
    layerRemoved(e) {
    }
  };
  return __decorate([m()], h.prototype, "layers", null), h = __decorate([a("esri.support.LayersMixin")], h), h;
};

// node_modules/@arcgis/core/support/TablesMixin.js
var a2 = /* @__PURE__ */ new Set(["feature", "subtype-group"]);
function l2(t2, e, r) {
  if (t2) for (let o = 0, s = t2.length; o < s; o++) {
    const s2 = t2.at(o);
    if (s2[e] === r) return s2;
    if ("group" === s2?.type) {
      const t3 = l2(s2.tables, e, r);
      if (t3) return t3;
    }
  }
}
var n4 = (n5) => {
  const p = n5;
  let c = class extends p {
    constructor(...t2) {
      super(...t2), this.tables = new O(), this.addHandles([this.tables.on("after-add", (t3) => {
        const e = t3.item;
        e.parent && e.parent !== this && e.removeFromParent(), e.parent = this, a2.has(e.type) || i.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`);
      }), this.tables.on("after-remove", (t3) => {
        t3.item.parent = null;
      })]);
    }
    destroy() {
      const t2 = this.tables.toArray();
      for (const e of t2) e.destroy();
      this.tables.destroy();
    }
    removeChildLayer(t2) {
      this.tables.remove(t2), super.removeChildLayer?.(t2);
    }
    set tables(t2) {
      this._set("tables", n(t2, this._get("tables")));
    }
    findTableById(t2) {
      return l2(this.tables, "id", t2);
    }
    findTableByUid(t2) {
      return l2(this.tables, "uid", t2);
    }
  };
  return __decorate([m()], c.prototype, "tables", null), c = __decorate([a("esri.support.TablesMixin")], c), c;
};

export {
  t,
  n2 as n,
  n3 as n2,
  n4 as n3
};
//# sourceMappingURL=chunk-LRCBJR5A.js.map
