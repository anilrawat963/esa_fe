import {
  n2 as n4
} from "./chunk-P77QHDEC.js";
import {
  t as t3
} from "./chunk-2I7JAYEU.js";
import {
  E,
  F,
  I as I3,
  g as g2
} from "./chunk-PG3227VO.js";
import {
  B,
  C,
  C2,
  Ct,
  Dt,
  Gt as Gt2,
  I as I2,
  P,
  Qt,
  St,
  Te,
  Tt,
  U,
  W,
  We,
  X,
  Xe,
  Y,
  Ye,
  Yt,
  _ as _2,
  _2 as _3,
  _e,
  _t,
  f2 as f4,
  ge,
  hn,
  ie,
  it,
  je,
  l,
  ln,
  m as m3,
  nn,
  oe,
  on,
  rt as rt2,
  se,
  un,
  v,
  w,
  we,
  wn,
  zt
} from "./chunk-JGWZMI5Q.js";
import {
  n2 as n3
} from "./chunk-43423NKQ.js";
import {
  t as t2
} from "./chunk-YYGF76T3.js";
import {
  I
} from "./chunk-RQGBRVDD.js";
import {
  r as r5
} from "./chunk-73FJYU43.js";
import {
  f as f3
} from "./chunk-3BNOOWTA.js";
import {
  o as o4
} from "./chunk-HOJHSMLY.js";
import {
  $,
  Gt,
  Rt,
  bt,
  kt,
  m as m2,
  pt,
  rt
} from "./chunk-6RE6OSTE.js";
import {
  o as o3
} from "./chunk-JE2NJSBU.js";
import {
  n as n2
} from "./chunk-WDTGOP77.js";
import {
  g,
  o as o2,
  r as r4
} from "./chunk-VYMBX5H5.js";
import {
  n,
  r as r2
} from "./chunk-75XOUSSS.js";
import {
  o,
  r as r3,
  u as u3
} from "./chunk-AZXJIEZ6.js";
import {
  f
} from "./chunk-2OFHDVO5.js";
import {
  i
} from "./chunk-TFJXG32O.js";
import {
  f as f2,
  i as i2
} from "./chunk-CSMCPN64.js";
import {
  r
} from "./chunk-SMWUT52Z.js";
import {
  _
} from "./chunk-AXZMNHTN.js";
import {
  b,
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate,
  __param
} from "./chunk-SS5CLIUY.js";
import {
  t,
  u as u2
} from "./chunk-45CFSCQX.js";
import {
  u2 as u
} from "./chunk-GNMPGHLQ.js";
import {
  has
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BitBlitPrograms.js
var r6 = { vertexShader: n3("bitBlit/bitBlit.vert"), fragmentShader: n3("bitBlit/bitBlit.frag") };

// node_modules/@arcgis/core/views/2d/engine/webgl/shaders/StencilPrograms.js
var r7 = { vertexShader: n3("stencil/stencil.vert"), fragmentShader: n3("stencil/stencil.frag") };

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/BlendShader.js
var z = class extends C2 {
};
__decorate([f4(0, X)], z.prototype, "position", void 0);
var A = class extends I2 {
};
var D = class extends w {
};
__decorate([m3(U)], D.prototype, "layerTexture", void 0), __decorate([m3(U)], D.prototype, "backbufferTexture", void 0), __decorate([m3(C)], D.prototype, "opacity", void 0), __decorate([m3(C)], D.prototype, "inFadeOpacity", void 0);
var E2 = class extends P {
  constructor() {
    super(...arguments), this.type = "BlendShader";
  }
  vertex(t5) {
    return { uv: t5.position, glPosition: new _2(g2(t5.position), 0, 1) };
  }
  fragment(t5) {
    const l5 = new v(), e2 = wn(this.config.layerTexture, t5.uv), n8 = wn(this.config.backbufferTexture, t5.uv), i5 = zt(Ct(e2.a, new C(0)), e2.rgb, e2.rgb.divide(e2.a)), a5 = zt(Ct(n8.a, new C(0)), n8.rgb, n8.rgb.divide(n8.a)), o5 = this.config.opacity.multiply(e2.a), u5 = n8.a;
    switch (this.blendMode) {
      case "destination-over":
        l5.fragColor = new _2(i5.multiply(o5).multiply(E(u5)).add(a5.multiply(u5)), o5.add(u5).subtract(o5.multiply(u5)));
        break;
      case "source-in":
        {
          const t6 = new _2(i5.multiply(o5).multiply(u5), o5.multiply(u5)), e3 = new _2(a5.multiply(u5), u5).multiply(E(this.config.opacity)).multiply(this.config.inFadeOpacity);
          l5.fragColor = t6.add(e3);
        }
        break;
      case "destination-in":
        {
          const t6 = new _2(a5.multiply(u5).multiply(o5), u5.multiply(o5)), e3 = new _2(a5.multiply(u5), u5).multiply(new _2(E(this.config.opacity).multiply(this.config.inFadeOpacity)));
          l5.fragColor = t6.add(e3);
        }
        break;
      case "source-out":
        l5.fragColor = new _2(i5.multiply(o5).multiply(E(u5)), o5.multiply(E(u5)));
        break;
      case "destination-out":
        l5.fragColor = new _2(a5.multiply(u5).multiply(E(o5)), u5.multiply(E(o5)));
        break;
      case "source-atop":
        l5.fragColor = new _2(i5.multiply(o5).multiply(u5).add(a5.multiply(u5.multiply(E(o5)))), u5);
        break;
      case "destination-atop":
        l5.fragColor = new _2(i5.multiply(o5.multiply(E(u5))).add(a5.multiply(u5).multiply(o5)), o5);
        break;
      case "xor":
        l5.fragColor = new _2(i5.multiply(o5.multiply(E(u5))).add(a5.multiply(u5.multiply(E(o5)))), o5.multiply(E(u5)).add(u5.multiply(E(o5))));
        break;
      case "multiply":
        l5.fragColor = new _2(i5.multiply(o5).multiply(a5.multiply(u5)).add(i5.multiply(o5).multiply(E(u5))).add(a5.multiply(u5).multiply(E(o5))), o5.add(u5.multiply(E(o5))));
        break;
      case "screen":
        l5.fragColor = new _2(i5.add(a5).subtract(i5.multiply(a5)).multiply(o5.multiply(u5)).add(i5.multiply(o5).multiply(E(u5))).add(a5.multiply(u5).multiply(E(o5))), o5.add(u5.multiply(E(o5))));
        break;
      case "overlay":
        {
          const t6 = new Y(I4(a5.r, i5.r), I4(a5.g, i5.g), I4(a5.b, i5.b));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "darken":
        {
          const t6 = Ye(i5, a5);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "lighter":
        l5.fragColor = new _2(i5.multiply(o5).add(a5.multiply(u5)), o5.add(u5));
        break;
      case "lighten":
        {
          const t6 = Xe(i5, a5);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "color-dodge":
        {
          const t6 = se(new Y(J(a5.r, i5.r), J(a5.g, i5.g), J(a5.b, i5.b)), new Y(0), new Y(1));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "color-burn":
        {
          const t6 = new Y(K(a5.r, i5.r), K(a5.g, i5.g), K(a5.b, i5.b));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "hard-light":
        {
          const t6 = new Y(L(a5.r, i5.r), L(a5.g, i5.g), L(a5.b, i5.b));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "soft-light":
        {
          const t6 = new Y(N(a5.r, i5.r), N(a5.g, i5.g), N(a5.b, i5.b));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "difference":
        {
          const t6 = Qt(a5.subtract(i5));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "exclusion":
        {
          const t6 = i5.add(a5).subtract(new C(2).multiply(i5).multiply(a5));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "invert":
        l5.fragColor = new _2(new Y(1).subtract(a5).multiply(o5).multiply(u5).add(a5.multiply(u5).multiply(E(o5))), u5);
        break;
      case "vivid-light":
        {
          const t6 = new Y(se(Q(a5.r, i5.r), new C(0), new C(1)), se(Q(a5.g, i5.g), new C(0), new C(1)), se(Q(a5.b, i5.b), new C(0), new C(1)));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "hue":
        {
          const t6 = Z(i5, a5, a5);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "saturation":
        {
          const t6 = Z(a5, i5, a5);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "color":
        {
          const t6 = Y2(i5, a5);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "luminosity":
        {
          const t6 = Y2(a5, i5);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "plus":
        l5.fragColor = se(new _2(e2.r.add(a5.r), e2.g.add(a5.g), e2.b.add(a5.b), o5.add(u5)), new _2(0), new _2(1));
        break;
      case "minus":
        l5.fragColor = new _2(se(new Y(a5.r.subtract(e2.r), a5.g.subtract(e2.g), a5.b.subtract(e2.b)), new Y(0), new Y(1)), u5.multiply(o5));
        break;
      case "average":
        {
          const t6 = a5.add(i5).divide(2);
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      case "reflect":
        {
          const t6 = se(new Y($2(a5.r, i5.r), $2(a5.g, i5.g), $2(a5.b, i5.b)), new Y(0), new Y(1));
          l5.fragColor = H(t6, i5, a5, o5, u5);
        }
        break;
      default:
        l5.fragColor = e2.multiply(this.config.opacity);
    }
    return l5;
  }
};
function H(t5, l5, e2, r10, n8) {
  return new _2(t5.multiply(r10).multiply(n8).add(l5.multiply(r10).multiply(E(n8))).add(e2.multiply(n8).multiply(E(r10))), r10.add(n8.multiply(E(r10))));
}
function I4(t5, l5) {
  return new C(1).subtract(ln(new C(0.5), l5)).multiply(E(new C(2).multiply(E(l5).multiply(E(t5))))).add(ln(new C(0.5), l5).multiply(new C(2).multiply(l5).multiply(t5)));
}
function J(t5, l5) {
  return zt(Ct(t5, new C(0)), new C(0), zt(Ct(l5, new C(1)), new C(1), Ye(new C(1), t5.divide(new C(1).subtract(l5)))));
}
function K(t5, l5) {
  return zt(Ct(t5, new C(1)), new C(1), zt(Ct(l5, new C(0)), new C(0), E(Ye(new C(1), E(t5).divide(l5)))));
}
function L(t5, l5) {
  return new C(1).subtract(ln(new C(0.5), l5)).multiply(new C(2).multiply(l5).multiply(t5)).add(ln(new C(0.5), l5).multiply(E(new C(2).multiply(E(l5).multiply(E(t5))))));
}
function N(t5, l5) {
  return Tt([_t(l5, new C(0.5)), () => {
    const e2 = new C(2).multiply(l5), r10 = E(e2), n8 = E(t5);
    return t5.subtract(r10.multiply(t5).multiply(n8));
  }], [_t(t5, new C(0.25)), () => {
    const e2 = new C(2).multiply(l5), r10 = F(e2).multiply(t5), n8 = new C(16).multiply(t5).subtract(new C(12)).multiply(t5).add(new C(3));
    return t5.add(r10.multiply(n8));
  }], [true, () => {
    const e2 = new C(2).multiply(l5), r10 = F(e2), n8 = hn(t5).subtract(t5);
    return t5.add(r10.multiply(n8));
  }]);
}
function Q(t5, l5) {
  const e2 = E(ln(new C(0.5), l5)).multiply(K(t5, new C(2).multiply(l5))), r10 = ln(new C(0.5), l5).multiply(J(t5, new C(2).multiply(I3(l5, 0.5))));
  return e2.add(r10);
}
function R(t5) {
  return Ye(Ye(t5.r, t5.g), t5.b);
}
function U2(t5) {
  return Xe(Xe(t5.r, t5.g), t5.b);
}
function V(t5) {
  return we(t5, new Y(0.3, 0.59, 0.11));
}
function W2(t5) {
  return U2(t5).subtract(R(t5));
}
function X2(t5) {
  const l5 = V(t5), e2 = R(t5), r10 = U2(t5);
  return Tt([Yt(e2, new C(0)), () => {
    const r11 = t5.subtract(l5).multiply(l5), n8 = l5.subtract(e2);
    return l5.add(r11.divide(n8));
  }], [Gt2(r10, new C(1)), () => {
    const e3 = t5.subtract(l5), n8 = E(l5), i5 = e3.multiply(n8), a5 = r10.subtract(l5);
    return l5.add(i5.divide(a5));
  }], [true, t5]);
}
function Y2(t5, l5) {
  const e2 = V(t5), r10 = V(l5).subtract(e2);
  return X2(t5.add(new Y(r10)));
}
function Z(t5, l5, e2) {
  const r10 = R(t5), n8 = W2(t5), i5 = W2(l5);
  return Y2(zt(Gt2(n8, new C(0)), () => t5.subtract(r10).multiply(i5).divide(n8), new Y(0)), e2);
}
function $2(t5, l5) {
  return zt(Ct(l5, new C(1)), l5, () => {
    const e2 = E(l5), r10 = t5.multiply(t5).divide(e2);
    return Ye(r10, new C(1));
  });
}
__decorate([_3], E2.prototype, "blendMode", void 0), __decorate([m3(D)], E2.prototype, "config", void 0), __decorate([__param(0, l(z))], E2.prototype, "vertex", null), __decorate([__param(0, l(A))], E2.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js
var f5 = class extends C2 {
};
__decorate([f4(0, X)], f5.prototype, "position", void 0);
var g3 = class extends I2 {
};
var x = class extends w {
};
__decorate([m3(U)], x.prototype, "layerTexture", void 0), __decorate([m3(C)], x.prototype, "opacity", void 0);
var v2 = class extends P {
  constructor() {
    super(...arguments), this.type = "OpacityShader";
  }
  vertex(t5) {
    return { uv: t5.position, glPosition: new _2(t5.position.subtract(new X(0.5)).multiply(2), 0, 1) };
  }
  fragment(t5) {
    const o5 = new v();
    return o5.fragColor = wn(this.config.layerTexture, t5.uv).multiply(this.config.opacity), o5;
  }
};
__decorate([m3(x)], v2.prototype, "config", void 0), __decorate([__param(0, l(f5))], v2.prototype, "vertex", null), __decorate([__param(0, l(g3))], v2.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaders/HighlightPrograms.js
var e = { vertexShader: n3("highlight/textured.vert"), fragmentShader: n3("highlight/highlight.frag") };
var h = { vertexShader: n3("highlight/textured.vert"), fragmentShader: n3("highlight/blur.frag") };

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/PostProcessingShader.js
var a2 = class extends C2 {
};
__decorate([f4(0, X)], a2.prototype, "position", void 0);
var d = class extends I2 {
};
var u4 = class extends P {
  constructor() {
    super(...arguments), this.type = "PostProcessingShader";
  }
  vertex(o5) {
    return { uv: o5.position, glPosition: new _2(g2(o5.position), 0, 1) };
  }
};
__decorate([__param(0, l(a2))], u4.prototype, "vertex", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/BlitShader.js
var a3 = class extends w {
};
__decorate([m3(U)], a3.prototype, "blitTexture", void 0);
var f6 = class extends u4 {
  fragment(t5) {
    const o5 = new v();
    return o5.fragColor = wn(this.blitConfig.blitTexture, t5.uv), o5;
  }
};
__decorate([m3(a3)], f6.prototype, "blitConfig", void 0), __decorate([__param(0, l(d))], f6.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/BloomShader.js
var b2 = class extends w {
};
__decorate([m3(U)], b2.prototype, "luminosityTexture", void 0), __decorate([m3(Y)], b2.prototype, "defaultColor", void 0), __decorate([m3(C)], b2.prototype, "defaultOpacity", void 0), __decorate([m3(C)], b2.prototype, "luminosityThreshold", void 0), __decorate([m3(C)], b2.prototype, "smoothWidth", void 0);
var x2 = class extends u4 {
  constructor() {
    super(...arguments), this.type = "LuminosityHighPassShader";
  }
  fragment(o5) {
    const t5 = new v(), r10 = wn(this.luminosityHighPassConfig.luminosityTexture, o5.uv), e2 = new Y(0.299, 0.587, 0.114), l5 = we(r10.xyz, e2), s3 = new _2(this.luminosityHighPassConfig.defaultColor.rgb, this.luminosityHighPassConfig.defaultOpacity), n8 = on(this.luminosityHighPassConfig.luminosityThreshold, this.luminosityHighPassConfig.luminosityThreshold.add(this.luminosityHighPassConfig.smoothWidth), l5);
    return t5.fragColor = _e(s3, r10, n8), t5;
  }
};
__decorate([m3(b2)], x2.prototype, "luminosityHighPassConfig", void 0), __decorate([__param(0, l(d))], x2.prototype, "fragment", null);
var T = class extends w {
};
__decorate([m3(U)], T.prototype, "blurTexture1", void 0), __decorate([m3(U)], T.prototype, "blurTexture2", void 0), __decorate([m3(U)], T.prototype, "blurTexture3", void 0), __decorate([m3(U)], T.prototype, "blurTexture4", void 0), __decorate([m3(U)], T.prototype, "blurTexture5", void 0), __decorate([m3(C)], T.prototype, "bloomStrength", void 0), __decorate([m3(C)], T.prototype, "bloomRadius", void 0), __decorate([m3(B.ofType(C, 5))], T.prototype, "bloomFactors", void 0), __decorate([m3(Y)], T.prototype, "bloomTintColor", void 0);
var C3 = class extends u4 {
  constructor() {
    super(...arguments), this.type = "CompositeShader";
  }
  fragment(o5) {
    const t5 = new v(), { blurTexture1: r10, blurTexture2: e2, blurTexture3: l5, blurTexture4: s3, blurTexture5: y3, bloomStrength: d5, bloomFactors: a5, bloomTintColor: h6 } = this.compositeConfig, g8 = this._lerpBloomFactor(a5[0]).multiply(new _2(h6, 1).multiply(wn(r10, o5.uv))), c4 = this._lerpBloomFactor(a5[1]).multiply(new _2(h6, 1).multiply(wn(e2, o5.uv))), f10 = this._lerpBloomFactor(a5[2]).multiply(new _2(h6, 1).multiply(wn(l5, o5.uv))), v6 = this._lerpBloomFactor(a5[3]).multiply(new _2(h6, 1).multiply(wn(s3, o5.uv))), b3 = this._lerpBloomFactor(a5[4]).multiply(new _2(h6, 1).multiply(wn(y3, o5.uv))), x4 = d5.multiply(g8.add(c4.add(f10.add(v6.add(b3)))));
    return t5.fragColor = se(x4, new C(0), new C(1)), t5;
  }
  _lerpBloomFactor(o5) {
    const t5 = new C(1.2).subtract(o5);
    return _e(o5, t5, this.compositeConfig.bloomRadius);
  }
};
__decorate([_3], C3.prototype, "numMips", void 0), __decorate([m3(T)], C3.prototype, "compositeConfig", void 0), __decorate([__param(0, l(d))], C3.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/BlurShader.js
var v3 = class extends w {
};
__decorate([m3(U)], v3.prototype, "texture", void 0), __decorate([m3(X)], v3.prototype, "texSize", void 0), __decorate([m3(X)], v3.prototype, "direction", void 0), __decorate([m3(C)], v3.prototype, "sigma", void 0);
var h2 = class extends u4 {
  constructor() {
    super(...arguments), this.type = "GaussianBlurShader";
  }
  fragment(t5) {
    const e2 = new v(), r10 = new C(1).divide(this.gaussianBlurConfig.texSize), o5 = this.gaussianBlurConfig.sigma;
    let l5 = x3(new C(0), o5), s3 = wn(this.gaussianBlurConfig.texture, t5.uv).multiply(l5);
    for (let i5 = 1; i5 < this.kernelRadius; i5++) {
      const e3 = new C(i5), a5 = x3(e3, o5), d5 = this.gaussianBlurConfig.direction.multiply(r10).multiply(e3), p = wn(this.gaussianBlurConfig.texture, t5.uv.add(d5)), y3 = wn(this.gaussianBlurConfig.texture, t5.uv.subtract(d5));
      s3 = s3.add(p.multiply(a5)).add(y3.multiply(a5)), l5 = l5.add(new C(2).multiply(a5));
    }
    return e2.fragColor = s3.divide(l5), e2;
  }
};
function x3(t5, e2) {
  return new C(0.39894).multiply(ge(new C(-0.5).multiply(t5).multiply(t5).divide(e2.multiply(e2))).divide(e2));
}
__decorate([_3], h2.prototype, "kernelRadius", void 0), __decorate([m3(v3)], h2.prototype, "gaussianBlurConfig", void 0), __decorate([__param(0, l(d))], h2.prototype, "fragment", null);
var w2 = class extends w {
};
__decorate([m3(U)], w2.prototype, "texture", void 0);
var B2 = 1;
var C4 = 2.2;
var S = [-0.08, -0.05, -0.03, -0.02, -0.01, 0.01, 0.02, 0.03, 0.05, 0.08];
var R2 = class extends u4 {
  constructor() {
    super(...arguments), this.type = "RadialBlurShader";
  }
  fragment(t5) {
    const e2 = new v();
    let r10 = new C(0.5).subtract(t5.uv);
    const o5 = hn(r10.x.multiply(r10.y).add(r10.y.multiply(r10.y)));
    r10 = r10.divide(o5);
    const l5 = wn(this.radialBlurConfig.texture, t5.uv);
    let s3 = l5;
    for (let i5 = 0; i5 < 10; i5++) {
      const e3 = wn(this.radialBlurConfig.texture, t5.uv.add(r10).multiply(new C(S[i5]).multiply(B2)));
      s3 = s3.add(e3);
    }
    const y3 = new C(1).divide(new C(11));
    s3 = s3.multiply(y3);
    let m5 = o5.multiply(C4);
    return m5 = se(m5, new C(0), new C(1)), e2.fragColor = _e(l5, s3, m5), e2;
  }
};
__decorate([_3], R2.prototype, "kernelRadius", void 0), __decorate([m3(w2)], R2.prototype, "radialBlurConfig", void 0), __decorate([__param(0, l(d))], R2.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ColorizeShader.js
var h3 = class extends w {
};
__decorate([m3(U)], h3.prototype, "colorTexture", void 0), __decorate([m3(it)], h3.prototype, "coefficients", void 0);
var y = class extends u4 {
  constructor() {
    super(...arguments), this.type = "FilterEffectShader";
  }
  fragment(e2) {
    const t5 = new v(), o5 = wn(this.filterEffectConfig.colorTexture, e2.uv), i5 = zt(Gt2(o5.a, new C(0)), o5.rgb.divide(o5.a), new Y(0)), f10 = this.filterEffectConfig.coefficients.multiply(new _2(i5, 1)), m5 = o5.a;
    return t5.fragColor = new _2(m5.multiply(f10.rgb), m5), t5;
  }
};
__decorate([m3(h3)], y.prototype, "filterEffectConfig", void 0), __decorate([__param(0, l(d))], y.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/DropShadowShader.js
var h4 = class extends w {
};
__decorate([m3(U)], h4.prototype, "layerFBOTexture", void 0), __decorate([m3(U)], h4.prototype, "blurTexture", void 0), __decorate([m3(_2)], h4.prototype, "shadowColor", void 0), __decorate([m3(X)], h4.prototype, "shadowOffset", void 0), __decorate([m3(rt2)], h4.prototype, "displayViewMat3", void 0);
var c = class extends u4 {
  constructor() {
    super(...arguments), this.type = "CompositeShader";
  }
  fragment(o5) {
    const t5 = new v(), { layerFBOTexture: r10, blurTexture: s3, shadowColor: p, shadowOffset: d5, displayViewMat3: u5 } = this.compositeConfig, m5 = u5.multiply(new Y(d5, new C(0))), y3 = wn(r10, o5.uv), n8 = wn(s3, o5.uv.subtract(m5.xy.divide(2)));
    return t5.fragColor = n8.a.multiply(p).multiply(new C(1).subtract(y3.a)).add(y3), t5;
  }
};
__decorate([m3(h4)], c.prototype, "compositeConfig", void 0), __decorate([__param(0, l(d))], c.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js
var n5 = !!has("esri-2d-profiler");
var r8 = class {
  constructor(r10, i5) {
    if (this._events = new i(), this._entries = /* @__PURE__ */ new Map(), this._timings = new t2(10), this._currentContainer = null, this._currentPass = null, this._currentBrush = null, this._currentSummary = null, !n5) return;
    this._ext = t3(r10.gl, {}), this._debugOutput = i5;
    const o5 = r10.gl;
    if (!this.enableCommandLogging) return;
    let a5;
    for (a5 in o5) if ("function" == typeof o5[a5]) {
      const e2 = o5[a5], t5 = a5.includes("draw");
      o5[a5] = (...s3) => (this._events.emit("command", { container: this._currentContainer, pass: this._currentPass, brush: this._currentBrush, method: a5, args: s3, isDrawCommand: t5 }), this._currentSummary && (this._currentSummary.commands++, t5 && this._currentSummary.drawCommands++), e2.apply(o5, s3));
    }
  }
  get enableCommandLogging() {
    return "object" == typeof n5 && n5.commandLogging;
  }
  get enableTimeLogging() {
    return "object" == typeof n5 && n5.timeLogging;
  }
  get lastTime() {
    return this._timings.peekLast();
  }
  recordContainerStart(e2) {
    n5 && (this._currentContainer = e2);
  }
  recordContainerEnd() {
    n5 && (this._currentContainer = null);
  }
  recordPassStart(e2) {
    n5 && (this._currentPass = e2, this._initSummary());
  }
  recordPassEnd() {
    n5 && (this._currentPass = null, this._emitSummary());
  }
  recordBrushStart(e2) {
    n5 && (this._currentBrush = e2);
  }
  recordBrushEnd() {
    n5 && (this._currentBrush = null);
  }
  recordStart(e2) {
    if (n5 && null != this._ext) {
      if (this._entries.has(e2)) {
        const t6 = this._entries.get(e2), s3 = this._ext.resultAvailable(t6.query), n8 = this._ext.disjoint();
        if (s3 && !n8) {
          const s4 = this._ext.getResult(t6.query) / 1e6;
          let n9 = 0;
          if (null != this._timings.enqueue(s4) && this.enableTimeLogging) {
            const e3 = this._timings.entries, t7 = e3.length;
            let s5 = 0;
            for (const n10 of e3) s5 += n10;
            n9 = s5 / t7;
          }
          const r10 = s4.toFixed(2), i5 = n9 ? n9.toFixed(2) : "--";
          this.enableCommandLogging ? (this.enableTimeLogging ? console.groupCollapsed(`Frame report for ${e2}, ${r10} ms (${i5} last 10 avg)
              ${t6.commandsLen} Commands (${t6.drawCommands} draw)`) : console.groupCollapsed(`Frame report for ${e2}
              ${t6.commandsLen} Commands (${t6.drawCommands} draw)`), console.log("RenderPass breakdown: "), console.table(t6.summaries), console.log("Commands: ", t6.commands), console.groupEnd()) : this.enableTimeLogging && console.log(`Frame report for ${e2}, ${r10} ms (${i5} last 10 avg)`), this.enableTimeLogging && (this._debugOutput.innerHTML = `${r10} (${i5})`);
        }
        for (const e3 of t6.handles) e3.remove();
        this._ext.deleteQuery(t6.query), this._entries.delete(e2);
      }
      const t5 = { name: e2, query: this._ext.createQuery(), commands: [], commandsLen: 0, drawCommands: 0, summaries: [], handles: [] };
      this.enableCommandLogging && (t5.handles.push(this._events.on("command", (e3) => {
        t5.commandsLen++, t5.commands.push(e3), e3.isDrawCommand && t5.drawCommands++;
      })), t5.handles.push(this._events.on("summary", (e3) => {
        t5.summaries.push(e3);
      }))), this._ext.beginTimeElapsed(t5.query), this._entries.set(e2, t5);
    }
  }
  recordEnd(e2) {
    n5 && null != this._ext && this._entries.has(e2) && this._ext.endTimeElapsed();
  }
  _initSummary() {
    this.enableCommandLogging && (this._currentSummary = { container: this._currentContainer, pass: this._currentPass, drawCommands: 0, commands: 0 });
  }
  _emitSummary() {
    this.enableCommandLogging && this._currentSummary && this._events.emit("summary", this._currentSummary);
  }
};

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VideoScreenShader.js
var f7 = class extends C2 {
};
__decorate([f4(0, X)], f7.prototype, "position", void 0), __decorate([f4(1, X)], f7.prototype, "texcoord", void 0), __decorate([f4(2, C)], f7.prototype, "w", void 0);
var g4 = class extends I2 {
};
var m4 = class extends w {
};
__decorate([m3(U)], m4.prototype, "texture", void 0), __decorate([m3(C)], m4.prototype, "opacity", void 0);
var v4 = class extends P {
  constructor() {
    super(...arguments), this.type = "VideoScreenShader";
  }
  vertex(o5) {
    const { position: t5, texcoord: e2, w: r10 } = o5;
    return { glPosition: new _2(t5, 0, r10), texcoord: e2 };
  }
  fragment(o5) {
    const t5 = new v();
    return t5.fragColor = wn(this.config.texture, o5.texcoord).multiply(this.config.opacity), t5;
  }
};
__decorate([m3(m4)], v4.prototype, "config", void 0), __decorate([__param(0, l(f7))], v4.prototype, "vertex", null), __decorate([__param(0, l(g4))], v4.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/LabelManager.js
var i3 = 7e6;
var n6 = class {
  constructor() {
    this.styles = /* @__PURE__ */ new Map(), this.layerContexts = /* @__PURE__ */ new Map();
  }
  get cachedStyles() {
    return this.styles;
  }
  setLabelClassStyle(e2, t5, s3) {
    this.layerContexts.set(e2, t5), this.styles.set(e2, s3);
  }
  removeContainer(e2) {
    for (const [t5, s3] of this.layerContexts.entries()) s3 === e2 && this.layerContexts.delete(t5);
  }
};
var l2 = class extends b {
  constructor(e2) {
    super(e2), this._faderWorkingSet = [], this._styleRepository = new n6(), this.lastUpdateId = -1, this.updateRequested = false, this.view = null;
    const t5 = (e3, t6) => {
      e3.updateLabelVisibility(), e3.requestRender(), e3.isReady && (e3.decluttered = true);
    };
    this.symbolFader = new n4("feature-tile", this._styleRepository, t5, this._faderWorkingSet, o3, i3);
  }
  get updating() {
    return has("esri-2d-log-updating") && console.log(`Updating LabelManager ${this.updateRequested}:
-> updateRequested: ${this.updateRequested}`), this.updateRequested;
  }
  viewChange() {
    this.requestUpdate();
  }
  requestUpdate() {
    this.updateRequested || (this.updateRequested = true, this.view?.requestUpdate());
  }
  processUpdate(e2) {
    this.doUpdate(e2) ? this.updateRequested = false : (this.updateRequested = true, this.view?.requestUpdate());
  }
  setLabelSchemaStyles(e2, t5) {
    let s3;
    switch (e2.type) {
      case "label":
        s3 = e2.classes;
        break;
      case "subtype":
        s3 = Array.from(Object.values(e2.renderers).flatMap((e3) => e3.classes));
        break;
      case "cluster":
        s3 = [...e2.cluster.classes, ...e2.feature.classes];
        break;
      case "track":
        s3 = [...e2.latestObservation.classes, ...e2.previousObservation.classes, ...e2.trackLine.classes];
    }
    for (const r10 of s3) {
      const e3 = c2(r10);
      this._styleRepository.setLabelClassStyle(r10.labelClassId, t5, e3);
    }
  }
  removeContainer(e2) {
    this._styleRepository.removeContainer(e2), this.requestUpdate();
  }
  doUpdate(e2) {
    this._faderWorkingSet.length = 0;
    const t5 = this.view;
    if (!t5) return false;
    const s3 = t5.allLayerViews.map((e3) => e3.featureContainer).filter((e3) => !!e3 && e3?.hasLabels);
    if (s3.length > 0) {
      for (const t6 of s3) for (const s4 of t6.tiles || []) s4.setTransform(e2.state), this._faderWorkingSet.push(s4);
      const r10 = e2.state.scale, o5 = t5.featuresTilingScheme.scaleToZoom(r10);
      return this.symbolFader.update(o5, e2.state);
    }
    return true;
  }
};
function c2(e2) {
  const t5 = "esriGeometryPolyline" === e2.geometryType ? 0 : 1, s3 = "esriGeometryPolyline" === e2.geometryType ? 0 : 1;
  return { geometryType: e2.geometryType, iconAllowOverlap: !e2.deconflictionEnabled, iconIgnorePlacement: false, textAllowOverlap: !e2.deconflictionEnabled, textIgnorePlacement: false, iconRotationAlignment: t5, textRotationAlignment: t5, iconTranslateAnchor: s3, iconTranslate: [0, 0], textTranslateAnchor: s3, textTranslate: [0, 0] };
}
__decorate([m()], l2.prototype, "updateRequested", void 0), __decorate([m()], l2.prototype, "updating", null), __decorate([m()], l2.prototype, "view", void 0), l2 = __decorate([a("esri.views.2d.LabelManager")], l2);

// node_modules/@arcgis/core/views/2d/navigation/ZoomBox.js
var n7 = "esri-zoom-box";
var h5 = { container: `${n7}__container`, overlay: `${n7}__overlay`, background: `${n7}__overlay-background`, box: `${n7}__outline` };
var l3 = { zoom: "Shift", counter: "Control" };
var d2 = class extends b {
  constructor(t5) {
    super(t5), this._container = null, this._overlay = null, this._backgroundShape = null, this._boxShape = null, this._box = { x: 0, y: 0, width: 0, height: 0 }, this._rafId = null, this._redraw = this._redraw.bind(this);
  }
  destroy() {
    this.view = null;
  }
  set view(t5) {
    this.removeAllHandles(), this._destroyOverlay(), this._set("view", t5), t5 && this.addHandles([t5.on("drag", [l3.zoom], (t6) => this._handleDrag(t6, 1), f3.INTERNAL), t5.on("drag", [l3.zoom, l3.counter], (t6) => this._handleDrag(t6, -1), f3.INTERNAL)]);
  }
  _start() {
    this._createContainer(), this._createOverlay(), this.navigation.begin();
  }
  _update(t5, e2, i5, r10) {
    this._box.x = t5, this._box.y = e2, this._box.width = i5, this._box.height = r10, this._rafId || (this._rafId = requestAnimationFrame(this._redraw));
  }
  _end(t5, e2, r10, o5, a5) {
    const n8 = this.view, h6 = n8.toMap(i2(t5 + 0.5 * r10, e2 + 0.5 * o5));
    let l5 = Math.max(r10 / n8.width, o5 / n8.height);
    -1 === a5 && (l5 = 1 / l5), this._destroyOverlay(), this.navigation.end(), n8.goTo({ center: h6, scale: n8.scale * l5 }, { animationMode: "always", duration: r5() });
  }
  _updateBox(t5, e2, i5, r10) {
    const o5 = this._boxShape;
    o5.setAttributeNS(null, "x", "" + t5), o5.setAttributeNS(null, "y", "" + e2), o5.setAttributeNS(null, "width", "" + i5), o5.setAttributeNS(null, "height", "" + r10), o5.setAttributeNS(null, "class", h5.box);
  }
  _updateBackground(t5, e2, i5, r10) {
    this._backgroundShape.setAttributeNS(null, "d", this._toSVGPath(t5, e2, i5, r10, this.view.width, this.view.height));
  }
  _createContainer() {
    const t5 = document.createElement("div");
    t5.className = h5.container, this.view.root.appendChild(t5), this._container = t5;
  }
  _createOverlay() {
    const t5 = this.view.width, e2 = this.view.height, i5 = document.createElementNS("http://www.w3.org/2000/svg", "path");
    i5.setAttributeNS(null, "d", "M 0 0 L " + t5 + " 0 L " + t5 + " " + e2 + " L 0 " + e2 + " Z"), i5.setAttributeNS(null, "class", h5.background);
    const r10 = document.createElementNS("http://www.w3.org/2000/svg", "rect"), o5 = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    o5.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink"), o5.setAttributeNS(null, "class", h5.overlay), o5.appendChild(i5), o5.appendChild(r10), this._container.appendChild(o5), this._backgroundShape = i5, this._boxShape = r10, this._overlay = o5;
  }
  _destroyOverlay() {
    this._container && this._container.parentNode && this._container.parentNode.removeChild(this._container), this._container = this._backgroundShape = this._boxShape = this._overlay = null;
  }
  _toSVGPath(t5, e2, i5, r10, o5, s3) {
    const a5 = t5 + i5, n8 = e2 + r10;
    return "M 0 0 L " + o5 + " 0 L " + o5 + " " + s3 + " L 0 " + s3 + " ZM " + t5 + " " + e2 + " L " + t5 + " " + n8 + " L " + a5 + " " + n8 + " L " + a5 + " " + e2 + " Z";
  }
  _handleDrag(t5, e2) {
    const i5 = t5.x, r10 = t5.y, o5 = t5.origin.x, s3 = t5.origin.y;
    let a5, n8, h6, l5;
    switch (i5 > o5 ? (a5 = o5, h6 = i5 - o5) : (a5 = i5, h6 = o5 - i5), r10 > s3 ? (n8 = s3, l5 = r10 - s3) : (n8 = r10, l5 = s3 - r10), t5.action) {
      case "start":
        this._start();
        break;
      case "update":
        this._update(a5, n8, h6, l5);
        break;
      case "end":
        this._end(a5, n8, h6, l5, e2);
    }
    t5.stopPropagation();
  }
  _redraw() {
    if (!this._rafId) return;
    if (this._rafId = null, !this._overlay) return;
    const { x: t5, y: e2, width: i5, height: r10 } = this._box;
    this._updateBox(t5, e2, i5, r10), this._updateBackground(t5, e2, i5, r10), this._rafId = requestAnimationFrame(this._redraw);
  }
};
__decorate([m()], d2.prototype, "navigation", void 0), __decorate([m()], d2.prototype, "view", null), d2 = __decorate([a("esri.views.2d.navigation.ZoomBox")], d2);

// node_modules/@arcgis/core/views/navigation/FilteredFiniteDifference.js
var t4 = class {
  constructor(t5) {
    this._gain = t5, this.lastValue = void 0, this.filteredDelta = void 0;
  }
  update(t5) {
    if (this.hasLastValue()) {
      const e2 = this.computeDelta(t5);
      this._updateDelta(e2);
    }
    this.lastValue = t5;
  }
  reset() {
    this.lastValue = void 0, this.filteredDelta = void 0;
  }
  hasLastValue() {
    return void 0 !== this.lastValue;
  }
  hasFilteredDelta() {
    return void 0 !== this.filteredDelta;
  }
  computeDelta(t5) {
    return void 0 === this.lastValue ? NaN : t5 - this.lastValue;
  }
  _updateDelta(t5) {
    void 0 !== this.filteredDelta ? this.filteredDelta = (1 - this._gain) * this.filteredDelta + this._gain * t5 : this.filteredDelta = t5;
  }
};

// node_modules/@arcgis/core/views/navigation/Momentum.js
var i4 = class {
  constructor(i5, o5, r10) {
    this._initialVelocity = i5, this._stopVelocity = o5, this._friction = r10, this._duration = t(Math.abs(Math.log(Math.abs(this._initialVelocity) / this._stopVelocity) / Math.log(1 - this._friction)));
  }
  get duration() {
    return this._duration;
  }
  isFinished(t5) {
    return t5 > this.duration;
  }
  get friction() {
    return this._friction;
  }
  value(t5) {
    return this.valueFromInitialVelocity(this._initialVelocity, t5);
  }
  valueDelta(t5, i5) {
    const o5 = this.value(t5);
    return this.value(t5 + i5) - o5;
  }
  valueFromInitialVelocity(t5, i5) {
    i5 = Math.min(i5, this.duration);
    const o5 = 1 - this.friction;
    return t5 * (o5 ** i5 - 1) / Math.log(o5);
  }
};

// node_modules/@arcgis/core/views/navigation/PanPlanarMomentumEstimator.js
var l4 = class extends i4 {
  constructor(e2, t5, i5, s3, n8) {
    super(e2, t5, i5), this._sceneVelocity = s3, this.direction = n8;
  }
  value(e2) {
    return super.valueFromInitialVelocity(this._sceneVelocity, e2);
  }
};
var c3 = class {
  constructor(e2 = 300, t5 = 12, i5 = 0.84) {
    this._minimumInitialVelocity = e2, this._stopVelocity = t5, this._friction = i5, this.enabled = true, this._time = new t4(0.6), this._screen = [new t4(0.4), new t4(0.4)], this._scene = [new t4(0.6), new t4(0.6), new t4(0.6)], this._tmpDirection = n();
  }
  add(e2, t5, i5) {
    if (this.enabled) {
      if (this._time.hasLastValue()) {
        if (this._time.computeDelta(i5) < 0.015) return;
      }
      this._screen[0].update(e2[0]), this._screen[1].update(e2[1]), this._scene[0].update(t5[0]), this._scene[1].update(t5[1]), this._scene[2].update(t5[2]), this._time.update(i5);
    }
  }
  reset() {
    this._screen[0].reset(), this._screen[1].reset(), this._scene[0].reset(), this._scene[1].reset(), this._scene[2].reset(), this._time.reset();
  }
  evaluateMomentum() {
    if (!this.enabled || !this._screen[0].hasFilteredDelta() || !this._time.hasFilteredDelta()) return null;
    const e2 = this._screen[0].filteredDelta, t5 = this._screen[1].filteredDelta, i5 = null == e2 || null == t5 ? 0 : Math.sqrt(e2 * e2 + t5 * t5), s3 = this._time.filteredDelta, n8 = null == s3 || null == i5 ? 0 : i5 / s3;
    return Math.abs(n8) < this._minimumInitialVelocity ? null : this.createMomentum(n8, this._stopVelocity, this._friction);
  }
  createMomentum(s3, n8, r10) {
    o2(this._tmpDirection, this._scene[0].filteredDelta ?? 0, this._scene[1].filteredDelta ?? 0, this._scene[2].filteredDelta ?? 0);
    const c4 = r4(this._tmpDirection);
    c4 > 0 && g(this._tmpDirection, this._tmpDirection, 1 / c4);
    const h6 = this._time.filteredDelta;
    return new l4(s3, n8, r10, null == h6 ? 0 : c4 / h6, this._tmpDirection);
  }
};

// node_modules/@arcgis/core/views/2d/navigation/actions/Pan.js
var g5 = class extends b {
  constructor(t5) {
    super(t5), this.animationTime = t(0), this.momentumEstimator = new c3(500, 6, 0.92), this.momentum = null, this.tmpMomentum = n(), this.momentumFinished = false, this.viewpoint = new m2({ targetGeometry: new _(), scale: 0, rotation: 0 }), this._previousDrag = null, this.addHandles(f(() => this.momentumFinished, () => this.navigation.stop()));
  }
  begin(t5, i5) {
    this.navigation.begin(), this.momentumEstimator.reset(), this.addToEstimator(i5), this._previousDrag = i5;
  }
  update(t5, i5) {
    this.addToEstimator(i5);
    let o5 = i5.center.x, e2 = i5.center.y;
    const m5 = this._previousDrag;
    o5 = m5 ? m5.center.x - o5 : -o5, e2 = m5 ? e2 - m5.center.y : e2, t5.viewpoint = kt(this.viewpoint, t5.viewpoint, [o5 || 0, e2 || 0]), this._previousDrag = i5;
  }
  end(t5, i5) {
    this.addToEstimator(i5);
    const e2 = t5.navigation.momentumEnabled && !o4();
    this.momentum = e2 ? this.momentumEstimator.evaluateMomentum() : null, this.animationTime = t(0), this.momentum && this.onAnimationUpdate(t5), this._previousDrag = null, this.navigation.end();
  }
  addToEstimator(t5) {
    const i5 = t5.center.x, o5 = t5.center.y, e2 = f2(-i5, o5), m5 = r2(-i5, o5, 0);
    this.momentumEstimator.add(e2, m5, 1e-3 * t5.timestamp);
  }
  onAnimationUpdate(t5) {
    this.navigation.animationManager?.animateContinuous(t5.viewpoint, (i5, o5) => {
      const { momentum: e2, animationTime: m5, tmpMomentum: s3 } = this, a5 = this.momentumFinished = !e2 || e2.isFinished(m5), p = u2(o5);
      if (!a5) {
        const o6 = e2.valueDelta(m5, p);
        g(s3, e2.direction, o6), kt(i5, i5, s3), t5.constraints.constrainByGeometry(i5);
      }
      this.animationTime = t(this.animationTime + p);
    });
  }
  stopMomentumNavigation() {
    this.momentum && (this.momentumEstimator.reset(), this.momentum = null, this.navigation.stop());
  }
};
__decorate([m()], g5.prototype, "momentumFinished", void 0), __decorate([m()], g5.prototype, "viewpoint", void 0), __decorate([m()], g5.prototype, "navigation", void 0), g5 = __decorate([a("esri.views.2d.navigation.actions.Pan")], g5);

// node_modules/@arcgis/core/views/navigation/MomentumEstimator.js
var s = class {
  constructor(t5 = 2.5, i5 = 0.01, s3 = 0.95, l5 = 12) {
    this._minimumInitialVelocity = t5, this._stopVelocity = i5, this._friction = s3, this._maxVelocity = l5, this.enabled = true, this.value = new t4(0.8), this.time = new t4(0.3);
  }
  add(t5, e2) {
    if (this.enabled && null != e2) {
      if (this.time.hasLastValue()) {
        if (this.time.computeDelta(e2) < 0.01) return;
        if (this.value.hasFilteredDelta()) {
          const e3 = this.value.computeDelta(t5);
          this.value.filteredDelta * e3 < 0 && this.value.reset();
        }
      }
      this.time.update(e2), this.value.update(t5);
    }
  }
  reset() {
    this.value.reset(), this.time.reset();
  }
  evaluateMomentum() {
    if (!this.enabled || !this.value.hasFilteredDelta() || !this.time.hasFilteredDelta()) return null;
    let e2 = this.value.filteredDelta / this.time.filteredDelta;
    return e2 = r(e2, -this._maxVelocity, this._maxVelocity), Math.abs(e2) < this._minimumInitialVelocity ? null : this.createMomentum(e2, this._stopVelocity, this._friction);
  }
  createMomentum(t5, e2, s3) {
    return new i4(t5, e2, s3);
  }
};

// node_modules/@arcgis/core/views/navigation/RotationMomentumEstimator.js
var a4 = class extends s {
  constructor(t5 = 3, a5 = 0.01, s3 = 0.95, o5 = 12) {
    super(t5, a5, s3, o5);
  }
  add(t5, a5) {
    const s3 = this.value.lastValue;
    if (null != s3) {
      let a6 = t5 - s3;
      for (; a6 > Math.PI; ) a6 -= 2 * Math.PI;
      for (; a6 < -Math.PI; ) a6 += 2 * Math.PI;
      t5 = s3 + a6;
    }
    super.add(t5, a5);
  }
};

// node_modules/@arcgis/core/views/navigation/ZoomMomentumEstimator.js
var r9 = class extends i4 {
  constructor(e2, t5, r10) {
    super(e2, t5, r10);
  }
  value(e2) {
    const t5 = super.value(e2);
    return Math.exp(t5);
  }
  valueDelta(e2, t5) {
    const r10 = super.value(e2), s3 = super.value(e2 + t5) - r10;
    return Math.exp(s3);
  }
};
var s2 = class extends s {
  constructor(e2 = 2.5, t5 = 0.01, r10 = 0.95, s3 = 12) {
    super(e2, t5, r10, s3);
  }
  add(e2, t5) {
    super.add(Math.log(e2), t5);
  }
  createMomentum(e2, t5, s3) {
    return new r9(e2, t5, s3);
  }
};

// node_modules/@arcgis/core/views/2d/navigation/actions/Pinch.js
var M = class extends b {
  constructor(t5) {
    super(t5), this._animationTime = t(0), this._momentumFinished = false, this._previousAngle = 0, this._previousRadius = 0, this._previousCenter = null, this._rotationMomentumEstimator = new a4(0.6, 0.15, 0.95), this._rotationDirection = 1, this._startAngle = 0, this._startRadius = 0, this._updateTimestamp = null, this._zoomDirection = 1, this._zoomMomentumEstimator = new s2(), this._zoomOnly = null, this.viewpoint = new m2({ targetGeometry: new _(), scale: 0, rotation: 0 }), this.zoomMomentum = null, this.rotateMomentum = null, this.addHandles(f(() => this._momentumFinished, () => this.navigation.stop()));
  }
  begin(t5, o5) {
    this.navigation.begin(), this._rotationMomentumEstimator.reset(), this._zoomMomentumEstimator.reset(), this._zoomOnly = null, this._previousAngle = this._startAngle = o5.angle, this._previousRadius = this._startRadius = o5.radius, this._previousCenter = o5.center, this._updateTimestamp = null, t5.constraints.rotationEnabled && this.addToRotateEstimator(0, o5.timestamp), this.addToZoomEstimator(o5, 1);
  }
  update(t5, o5) {
    null === this._updateTimestamp && (this._updateTimestamp = o5.timestamp);
    const i5 = o5.angle, s3 = o5.radius, e2 = o5.center, m5 = Math.abs(180 * (i5 - this._startAngle) / Math.PI), n8 = Math.abs(s3 - this._startRadius), a5 = this._startRadius / s3;
    if (this._previousRadius && this._previousCenter) {
      const r10 = s3 / this._previousRadius;
      let h6 = 180 * (i5 - this._previousAngle) / Math.PI;
      this._rotationDirection = h6 >= 0 ? 1 : -1, this._zoomDirection = r10 >= 1 ? 1 : -1, t5.constraints.rotationEnabled ? (null === this._zoomOnly && o5.timestamp - this._updateTimestamp > 200 && (this._zoomOnly = n8 - m5 > 0), null === this._zoomOnly || this._zoomOnly ? h6 = 0 : this.addToRotateEstimator(i5 - this._startAngle, o5.timestamp)) : h6 = 0, this.addToZoomEstimator(o5, a5), this.navigation.setViewpoint([e2.x, e2.y], 1 / r10, h6, [this._previousCenter.x - e2.x, e2.y - this._previousCenter.y]);
    }
    this._previousAngle = i5, this._previousRadius = s3, this._previousCenter = e2;
  }
  end(t5) {
    this.rotateMomentum = this._rotationMomentumEstimator.evaluateMomentum(), this.zoomMomentum = this._zoomMomentumEstimator.evaluateMomentum(), this._animationTime = t(0), (this.rotateMomentum || this.zoomMomentum) && this.onAnimationUpdate(t5), this.navigation.end();
  }
  addToRotateEstimator(t5, o5) {
    this._rotationMomentumEstimator.add(t5, 1e-3 * o5);
  }
  addToZoomEstimator(t5, o5) {
    this._zoomMomentumEstimator.add(o5, 1e-3 * t5.timestamp);
  }
  canZoomIn(t5) {
    const o5 = t5.scale, i5 = t5.constraints.effectiveMaxScale;
    return 0 === i5 || o5 > i5;
  }
  canZoomOut(t5) {
    const o5 = t5.scale, i5 = t5.constraints.effectiveMinScale;
    return 0 === i5 || o5 < i5;
  }
  onAnimationUpdate(t5) {
    this.navigation.animationManager?.animateContinuous(t5.viewpoint, (o5, i5) => {
      const s3 = !this.canZoomIn(t5) && this._zoomDirection > 1 || !this.canZoomOut(t5) && this._zoomDirection < 1, n8 = !this.rotateMomentum || this.rotateMomentum.isFinished(this._animationTime), a5 = s3 || !this.zoomMomentum || this.zoomMomentum.isFinished(this._animationTime), l5 = u2(i5);
      if (this._momentumFinished = n8 && a5, !this._momentumFinished) {
        const i6 = this.rotateMomentum ? Math.abs(this.rotateMomentum.valueDelta(this._animationTime, l5)) * this._rotationDirection * 180 / Math.PI : 0;
        let s4 = this.zoomMomentum ? Math.abs(this.zoomMomentum.valueDelta(this._animationTime, l5)) : 1;
        const e2 = n2(), m5 = n2();
        if (this._previousCenter) {
          o(e2, this._previousCenter.x, this._previousCenter.y), rt(m5, t5.size, t5.padding), u3(e2, e2, m5);
          const { constraints: n9, scale: a6 } = t5, u5 = a6 * s4;
          s4 < 1 && !n9.canZoomInTo(u5) ? (s4 = a6 / n9.effectiveMaxScale, this.zoomMomentum = null, this.rotateMomentum = null) : s4 > 1 && !n9.canZoomOutTo(u5) && (s4 = a6 / n9.effectiveMinScale, this.zoomMomentum = null, this.rotateMomentum = null), Gt(o5, t5.viewpoint, s4, i6, e2, t5.size), t5.constraints.constrainByGeometry(o5);
        }
      }
      this._animationTime = t(this._animationTime + l5);
    });
  }
  stopMomentumNavigation() {
    (this.rotateMomentum || this.zoomMomentum) && (this.rotateMomentum && (this._rotationMomentumEstimator.reset(), this.rotateMomentum = null), this.zoomMomentum && (this._zoomMomentumEstimator.reset(), this.zoomMomentum = null), this.navigation.stop());
  }
};
__decorate([m()], M.prototype, "_momentumFinished", void 0), __decorate([m()], M.prototype, "viewpoint", void 0), __decorate([m()], M.prototype, "navigation", void 0), M = __decorate([a("esri.views.2d.navigation.actions.Pinch")], M);

// node_modules/@arcgis/core/views/2d/navigation/actions/Rotate.js
var d3 = n2();
var g6 = n2();
var f8 = class extends b {
  constructor(t5) {
    super(t5), this._previousCenter = n2(), this.viewpoint = new m2({ targetGeometry: new _(), scale: 0, rotation: 0 });
  }
  begin(t5, e2) {
    this.navigation.begin(), o(this._previousCenter, e2.center.x, e2.center.y);
  }
  update(t5, e2) {
    const { state: { size: o5, padding: r10 } } = t5;
    o(d3, e2.center.x, e2.center.y), $(g6, o5, r10), t5.viewpoint = bt(this.viewpoint, t5.state.paddedViewState.viewpoint, pt(g6, this._previousCenter, d3)), r3(this._previousCenter, d3);
  }
  end() {
    this.navigation.end();
  }
};
__decorate([m()], f8.prototype, "viewpoint", void 0), __decorate([m()], f8.prototype, "navigation", void 0), f8 = __decorate([a("esri.views.2d.navigation.actions.Rotate")], f8);

// node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js
var v5 = 10;
var g7 = 1;
var d4 = new m2({ targetGeometry: new _() });
var _4 = [0, 0];
var T2 = 250;
var f9 = class extends b {
  constructor(t5) {
    super(t5), this._endTimer = null, this._lastEventTimestamp = null, this.animationManager = null, this.interacting = false;
  }
  initialize() {
    this.pan = new g5({ navigation: this }), this.rotate = new f8({ navigation: this }), this.pinch = new M({ navigation: this }), this.zoomBox = new d2({ view: this.view, navigation: this });
  }
  destroy() {
    this.pan = u(this.pan), this.rotate = u(this.rotate), this.pinch = u(this.pinch), this.zoomBox = u(this.zoomBox), this.animationManager = null;
  }
  begin() {
    this.stop(), this._set("interacting", true);
  }
  end() {
    this._lastEventTimestamp = performance.now(), this._startTimer(T2);
  }
  async zoom(t5, i5 = this._getDefaultAnchor()) {
    if (this.begin(), this.view.constraints.snapToZoom && this.view.constraints.effectiveLODs) return t5 < 1 ? this.zoomIn(i5) : this.zoomOut(i5);
    this.setViewpoint(i5, t5, 0, [0, 0]);
  }
  async zoomIn(t5) {
    const i5 = this.view, o5 = i5.constraints.snapToNextScale(i5.scale);
    return this._zoomToScale(o5, t5);
  }
  async zoomOut(t5) {
    const i5 = this.view, o5 = i5.constraints.snapToPreviousScale(i5.scale);
    return this._zoomToScale(o5, t5);
  }
  setViewpoint(t5, i5, o5, n8) {
    this.begin(), this.view.stateManager.state.viewpoint = this._scaleRotateTranslateViewpoint(this.view.viewpoint, t5, i5, o5, n8), this.end();
  }
  setViewpointImmediate(t5, i5 = 0, o5 = [0, 0], n8 = this._getDefaultAnchor()) {
    this.view.stateManager.state.viewpoint = this._scaleRotateTranslateViewpoint(this.view.viewpoint, n8, t5, i5, o5);
  }
  continuousRotateClockwise() {
    const t5 = this.view.viewpoint;
    this.animationManager?.animateContinuous(t5, (t6) => {
      bt(t6, t6, -g7);
    });
  }
  continuousRotateCounterclockwise() {
    const t5 = this.view.viewpoint;
    this.animationManager?.animateContinuous(t5, (t6) => {
      bt(t6, t6, g7);
    });
  }
  resetRotation() {
    this.view.constraints.rotationEnabled && (this.view.rotation = 0);
  }
  continuousPanLeft() {
    this._continuousPan([-v5, 0]);
  }
  continuousPanRight() {
    this._continuousPan([v5, 0]);
  }
  continuousPanUp() {
    this._continuousPan([0, v5]);
  }
  continuousPanDown() {
    this._continuousPan([0, -v5]);
  }
  continuousPanVector({ x: t5, y: i5 }) {
    this._continuousPan([t5 * v5, i5 * v5]);
  }
  stop() {
    this.pan.stopMomentumNavigation(), this.animationManager?.stop(), this.end(), null !== this._endTimer && (clearTimeout(this._endTimer), this._endTimer = null, this._set("interacting", false));
  }
  _continuousPan(t5) {
    const i5 = this.view.viewpoint;
    this.animationManager?.animateContinuous(i5, (i6) => {
      kt(i6, i6, t5), this.view.constraints.constrainByGeometry(i6);
    });
  }
  _startTimer(t5) {
    return null !== this._endTimer || (this._endTimer = setTimeout(() => {
      this._endTimer = null;
      const t6 = performance.now() - (this._lastEventTimestamp ?? 0);
      t6 < T2 ? this._endTimer = this._startTimer(t6) : this._set("interacting", false);
    }, t5)), this._endTimer;
  }
  _getDefaultAnchor() {
    const { size: t5, padding: { left: i5, right: o5, top: n8, bottom: e2 } } = this.view;
    return _4[0] = 0.5 * (t5[0] - o5 + i5), _4[1] = 0.5 * (t5[1] - e2 + n8), _4;
  }
  async _zoomToScale(t5, i5 = this._getDefaultAnchor()) {
    const { view: o5 } = this, { constraints: n8, scale: e2, viewpoint: s3, size: a5, padding: r10 } = o5, c4 = n8.canZoomInTo(t5), p = n8.canZoomOutTo(t5);
    if (!(t5 < e2 && !c4 || t5 > e2 && !p)) return Rt(d4, s3, t5 / e2, 0, i5, a5, r10), n8.constrainByGeometry(d4), o5.goTo(d4, { animate: true, animationMode: "always", duration: r5(), pickClosestTarget: false });
  }
  _scaleRotateTranslateViewpoint(t5, i5, o5, n8, e2) {
    const { view: s3 } = this, { size: a5, padding: r10, constraints: h6, scale: p, viewpoint: u5 } = s3, l5 = p * o5, w3 = h6.canZoomInTo(l5), v6 = h6.canZoomOutTo(l5);
    return (o5 < 1 && !w3 || o5 > 1 && !v6) && (o5 = 1), kt(u5, u5, e2), Rt(t5, u5, o5, n8, i5, a5, r10), h6.constrainByGeometry(t5);
  }
};
__decorate([m()], f9.prototype, "animationManager", void 0), __decorate([m({ type: Boolean, readOnly: true })], f9.prototype, "interacting", void 0), __decorate([m()], f9.prototype, "pan", void 0), __decorate([m()], f9.prototype, "pinch", void 0), __decorate([m()], f9.prototype, "rotate", void 0), __decorate([m()], f9.prototype, "view", void 0), __decorate([m()], f9.prototype, "zoomBox", void 0), f9 = __decorate([a("esri.views.2d.navigation.MapViewNavigation")], f9);
var y2 = f9;

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js
var T3 = class extends C2 {
};
__decorate([f4(0, X)], T3.prototype, "position", void 0);
var C5 = class extends I2 {
};
var E3 = class extends w {
};
__decorate([m3(U)], E3.prototype, "readbackTexture", void 0), __decorate([m3(U)], E3.prototype, "maskTexture", void 0), __decorate([m3(U)], E3.prototype, "overlayTexture", void 0), __decorate([m3(_2)], E3.prototype, "background", void 0), __decorate([m3(_2)], E3.prototype, "drawPos", void 0), __decorate([m3(C)], E3.prototype, "maskEnabled", void 0), __decorate([m3(C)], E3.prototype, "overlayEnabled", void 0);
var P2 = class extends P {
  constructor() {
    super(...arguments), this.type = "MagnifierShader";
  }
  vertex(t5) {
    const o5 = t5.position, e2 = t5.position.subtract(new X(0.5)).multiply(this.config.drawPos.zw), r10 = this.config.drawPos.xy.add(e2);
    return { glPosition: new _2(r10, 0, 1), texCoord: o5 };
  }
  fragment(t5) {
    let o5 = wn(this.config.readbackTexture, j(t5.texCoord));
    o5 = o5.add(new C(1).subtract(o5.a)).multiply(this.config.background);
    const e2 = zt(Ct(this.config.maskEnabled, new C(1)), wn(this.config.maskTexture, t5.texCoord).a, new C(1));
    o5 = o5.multiply(e2);
    const n8 = zt(Ct(this.config.overlayEnabled, new C(1)), wn(this.config.overlayTexture, t5.texCoord), new _2(0)), i5 = new v();
    return i5.fragColor = n8.add(new C(1).subtract(n8.a).multiply(o5)), i5;
  }
};
function j(t5) {
  const o5 = t5.multiply(new X(2)).subtract(1);
  return zt(Ct(o5.x, new C(0)).and(Ct(o5.y, new C(0))), new X(0.5), () => {
    const t6 = ie(o5.y, o5.x), e2 = We(je(o5), new C(I)), r10 = new X(oe(t6), un(t6));
    return e2.multiply(r10).multiply(new X(0.5)).add(new C(0.5));
  });
}
__decorate([m3(E3)], P2.prototype, "config", void 0), __decorate([__param(0, l(T3))], P2.prototype, "vertex", null), __decorate([__param(0, l(C5))], P2.prototype, "fragment", null);

// node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/GridShader.js
var G = class extends C2 {
};
__decorate([f4(0, X)], G.prototype, "position", void 0);
var S2 = class extends I2 {
};
var M2 = class extends w {
};
__decorate([m3(rt2)], M2.prototype, "dvs", void 0);
var k = class extends w {
};
__decorate([m3(C)], k.prototype, "halfWidth", void 0), __decorate([m3(C)], k.prototype, "aaWidth", void 0), __decorate([m3(C)], k.prototype, "pxPerCell", void 0), __decorate([m3(_2)], k.prototype, "minorLineColor", void 0), __decorate([m3(_2)], k.prototype, "majorLineColor", void 0), __decorate([m3(W)], k.prototype, "majorLineInterval", void 0);
var q = class extends P {
  constructor() {
    super(...arguments), this.type = "GridShader";
  }
  vertex(t5) {
    const o5 = t5.position.multiply(2).subtract(1);
    return { gridPos: this.transform.dvs.multiply(new Y(o5, 1)).xy, glPosition: new _2(o5, 0, 1) };
  }
  fragment(t5) {
    const o5 = Qt(t5.gridPos), e2 = Te(o5), i5 = Ye(e2.x, new C(1).subtract(e2.x)), n8 = Ye(e2.y, new C(1).subtract(e2.y)), s3 = new X(i5, n8).multiply(this.config.pxPerCell).subtract(this.config.halfWidth), p = Ye(s3.x, s3.y), a5 = new C(1).subtract(on(new C(0), this.config.aaWidth, p)), l5 = new W(nn(o5.x)), d5 = new W(nn(o5.y)), c4 = new C(St(l5, this.config.majorLineInterval)), I5 = new C(St(d5, this.config.majorLineInterval)), G2 = zt(Yt(s3.x, s3.y), c4, I5), S3 = Gt2(Dt(ln(s3.x, this.config.aaWidth), ln(s3.y, this.config.aaWidth)), new C(0.5)), M3 = Ye(c4, I5), k2 = zt(S3, M3, G2), q2 = _e(this.config.majorLineColor, this.config.minorLineColor, Ye(k2, new C(1))), z2 = new v();
    return z2.fragColor = q2.multiply(a5), z2;
  }
};
__decorate([m3(M2)], q.prototype, "transform", void 0), __decorate([m3(k)], q.prototype, "config", void 0), __decorate([__param(0, l(G))], q.prototype, "vertex", null), __decorate([__param(0, l(S2))], q.prototype, "fragment", null);

export {
  r6 as r,
  r7 as r2,
  E2 as E,
  v2 as v,
  e,
  h,
  f6 as f,
  x2 as x,
  C3 as C,
  h2,
  R2 as R,
  y,
  c,
  r8 as r3,
  v4 as v2,
  l2 as l,
  y2,
  P2 as P,
  q
};
//# sourceMappingURL=chunk-JQJENO7I.js.map
