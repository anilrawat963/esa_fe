import {
  D,
  I,
  O,
  P2,
  R,
  b,
  x,
  z2 as z3
} from "./chunk-EC6KNOF4.js";
import {
  l
} from "./chunk-6UYFHUML.js";
import {
  t
} from "./chunk-OOOA6BWY.js";
import {
  a
} from "./chunk-G4TISAAI.js";
import {
  Ae,
  B,
  De,
  Je,
  Ke,
  Pe,
  Re,
  Se,
  U,
  ge,
  ie,
  ne,
  oe,
  p,
  re,
  te,
  ve,
  z as z2
} from "./chunk-AH42IBBP.js";
import {
  o
} from "./chunk-MDJNYPVI.js";
import {
  n
} from "./chunk-4PXNA4MD.js";
import {
  f
} from "./chunk-GD4FJL3C.js";
import {
  o as o2
} from "./chunk-C5OQVQZF.js";
import {
  M
} from "./chunk-7P2ANHQ3.js";
import {
  m
} from "./chunk-3FUHCAX3.js";
import {
  P,
  y3 as y
} from "./chunk-PZ5RULLK.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  _,
  c
} from "./chunk-AXZMNHTN.js";
import {
  H2 as H,
  s2 as s
} from "./chunk-V2H77UEV.js";
import {
  h
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/portal/support/utils.js
async function r(r2, t2, s2) {
  const u = s?.findCredential(r2.restUrl);
  if (!u) return null;
  if ("loaded" === r2.loadStatus && "" === t2 && r2.user?.sourceJSON && false === s2) return r2.user.sourceJSON;
  const o3 = { responseType: "json", query: { f: "json" } };
  if (s2 && (o3.query.returnUserLicenseTypeExtensions = true), "" === t2) {
    const e = await H(r2.restUrl + "/community/self", o3);
    if (e.data) {
      const n2 = e.data;
      if (n2?.username) return n2;
    }
    return null;
  }
  const i = await H(r2.restUrl + "/community/users/" + t2, o3);
  if (i.data) {
    const e = i.data;
    return e.error ? null : e;
  }
  return null;
}

// node_modules/@arcgis/core/arcade/functions/geomasync.js
function z4(n2) {
  if (null == n2) return n2;
  switch (typeof n2) {
    case "string":
    case "number":
      return n2;
    default:
      throw new n(null, "InvalidParameter", null);
  }
}
function B2(B3) {
  "async" === B3.mode && (B3.functions.disjoint = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null === i[0] || null === i[1] || a("disjoint", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.intersects = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null !== i[0] && null !== i[1] && a("intersects", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.touches = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null !== i[0] && null !== i[1] && a("touches", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.crosses = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null !== i[0] && null !== i[1] && a("crosses", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.within = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null !== i[0] && null !== i[1] && a("within", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.contains = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null !== i[0] && null !== i[1] && a("contains", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.overlaps = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, i) => (i = Je(i), P2(i, n2, t2), null !== i[0] && null !== i[1] && a("overlaps", [i[0].toJSON(), i[1].toJSON()])));
  }, B3.functions.equals = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (e, r2, a2) => (oe(a2, 2, 2, n2, t2), a2[0] === a2[1] || (a2[0] instanceof c && a2[1] instanceof c ? a("equals", [a2[0].toJSON(), a2[1].toJSON()]) : (ne(a2[0]) && ne(a2[1]) || !!(ie(a2[0]) && ie(a2[1]) || re(a2[0]) && re(a2[1]))) && a2[0].equals(a2[1]))));
  }, B3.functions.relate = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 3, 3, n2, t2), s2[0] instanceof c && s2[1] instanceof c) return a("relate", [s2[0].toJSON(), s2[1].toJSON(), ge(s2[2])]);
      if (s2[0] instanceof c && null === s2[1]) return false;
      if (s2[1] instanceof c && null === s2[0]) return false;
      if (null === s2[0] && null === s2[1]) return false;
      throw new n(n2, "InvalidParameter", t2);
    });
  }, B3.functions.intersection = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (e, r2, i) => (i = Je(i), P2(i, n2, t2), null === i[0] || null === i[1] ? null : f(await a("intersection", [i[0].toJSON(), i[1].toJSON()]))));
  }, B3.functions.union = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (i, o3, s2) => {
      if (0 === (s2 = Je(s2)).length) throw new n(n2, "WrongNumberOfParameters", t2);
      const c2 = [];
      if (1 === s2.length) if (o2(s2[0])) {
        for (const r2 of Je(s2[0])) if (null !== r2) {
          if (!(r2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
          c2.push(r2.toJSON());
        }
      } else {
        if (!te(s2[0])) {
          if (s2[0] instanceof c) return De(o(s2[0]), n2.spatialReference);
          if (null === s2[0]) return null;
          throw new n(n2, "InvalidParameter", t2);
        }
        for (const r2 of Je(s2[0].toArray())) if (null !== r2) {
          if (!(r2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
          c2.push(r2.toJSON());
        }
      }
      else for (const r2 of s2) if (null !== r2) {
        if (!(r2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
        c2.push(r2.toJSON());
      }
      return 0 === c2.length ? null : f(await a("union", [c2]));
    });
  }, B3.functions.difference = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (e, i, o3) => (o3 = Je(o3), P2(o3, n2, t2), null === o3[0] ? null : null === o3[1] ? o(o3[0]) : f(await a("difference", [o3[0].toJSON(), o3[1].toJSON()]))));
  }, B3.functions.symmetricdifference = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (e, i, o3) => (o3 = Je(o3), P2(o3, n2, t2), null === o3[0] && null === o3[1] ? null : null === o3[0] ? o(o3[1]) : null === o3[1] ? o(o3[0]) : f(await a("symmetricDifference", [o3[0].toJSON(), o3[1].toJSON()]))));
  }, B3.functions.clip = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 2, 2, n2, t2), !(s2[1] instanceof z) && null !== s2[1]) throw new n(n2, "InvalidParameter", t2);
      if (null === s2[0]) return null;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return null === s2[1] ? null : f(await a("clip", [s2[0].toJSON(), s2[1].toJSON()]));
    });
  }, B3.functions.cut = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (o3, s2, c2) => {
      if (c2 = Je(c2), oe(c2, 2, 2, n2, t2), !(c2[1] instanceof y) && null !== c2[1]) throw new n(n2, "InvalidParameter", t2);
      if (null === c2[0]) return [];
      if (!(c2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return null === c2[1] ? [o(c2[0])] : (await a("cut", [c2[0].toJSON(), c2[1].toJSON()])).map((n3) => f(n3));
    });
  }, B3.functions.area = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (oe(s2, 1, 2, n2, t2), s2 = Je(s2), B(s2[0])) {
        const r3 = await s2[0].sumArea(z4(s2[1]), null, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new n(n2, "Cancelled", t2);
        return r3;
      }
      let c2 = s2[0];
      if ((o2(c2) || te(c2)) && (c2 = Re(s2[0], n2.spatialReference)), null === c2) return 0;
      if (!(c2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return a("area", [c2.toJSON(), z4(s2[1])]);
    });
  }, B3.functions.areageodetic = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      oe(s2, 1, 3, n2, t2);
      let c2 = (s2 = Je(s2))[0];
      (o2(c2) || te(c2)) && (c2 = Re(c2, n2.spatialReference));
      const l2 = z4(s2[1]), f2 = D(s2[2]);
      if (B(c2)) {
        const r3 = await c2.sumArea(l2, f2, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new n(n2, "Cancelled", t2);
        return r3;
      }
      if (null == c2) return 0;
      if (!U(c2)) throw new n(n2, "InvalidParameter", t2);
      return a("geodeticArea", [c2.toJSON(), l2, f2]);
    });
  }, B3.functions.length = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (oe(s2, 1, 2, n2, t2), s2 = Je(s2), B(s2[0])) {
        const r3 = await s2[0].sumLength(z4(s2[1]), null, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new n(n2, "Cancelled", t2);
        return r3;
      }
      let c2 = s2[0];
      if ((o2(s2[0]) || te(s2[0])) && (c2 = ve(s2[0], n2.spatialReference)), null === c2) return 0;
      if (!(c2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return a("length", [c2.toJSON(), z4(s2[1])]);
    });
  }, B3.functions.length3d = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (oe(s2, 1, 2, n2, t2), null === (s2 = Je(s2))[0]) return 0;
      let c2 = s2[0];
      if ((o2(s2[0]) || te(s2[0])) && (c2 = ve(s2[0], n2.spatialReference)), null === c2) return 0;
      if (!(c2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
      if (true === c2.hasZ) {
        const { convertFromSpatialReferenceUnit: n3, toLengthUnit: t3 } = await import("./unitConversion-CMCHEK66.js"), e = x(c2);
        return n3(c2.spatialReference, t3(s2[1]), e);
      }
      return a("length", [c2.toJSON(), z4(s2[1])]);
    });
  }, B3.functions.lengthgeodetic = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      oe(s2, 1, 3, n2, t2);
      let c2 = (s2 = Je(s2))[0];
      (o2(s2[0]) || te(s2[0])) && (c2 = ve(s2[0], n2.spatialReference));
      const l2 = z4(s2[1]), f2 = D(s2[2]);
      if (B(c2)) {
        const r3 = await c2.sumLength(l2, f2, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new n(n2, "Cancelled", t2);
        return r3;
      }
      if (null === c2) return 0;
      if (!U(c2)) throw new n(n2, "InvalidParameter", t2);
      return a("geodeticLength", [c2.toJSON(), l2, f2]);
    });
  }, B3.functions.distance = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      s2 = Je(s2), oe(s2, 2, 3, n2, t2);
      let c2 = s2[0];
      if ((o2(s2[0]) || te(s2[0])) && (c2 = Pe(s2[0], n2.spatialReference)), !(c2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
      let l2 = s2[1];
      if ((o2(s2[1]) || te(s2[1])) && (l2 = Pe(s2[1], n2.spatialReference)), !(l2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return a("distance", [c2.toJSON(), l2.toJSON(), z4(s2[2])]);
    });
  }, B3.functions.distancegeodetic = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      s2 = Je(s2), oe(s2, 2, 4, n2, t2);
      const c2 = s2[0];
      if (!(c2 instanceof _)) throw new n(n2, "InvalidParameter", t2);
      const l2 = s2[1];
      if (!(l2 instanceof _)) throw new n(n2, "InvalidParameter", t2);
      const u = new y({ paths: [], spatialReference: c2.spatialReference });
      return u.addPath([c2, l2]), a("geodeticLength", [u.toJSON(), z4(s2[2]), D(s2[3])]);
    });
  }, B3.functions.densify = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 2, 3, n2, t2), null === s2[0]) return null;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      const c2 = Se(s2[1]);
      if (isNaN(c2)) throw new n(n2, "InvalidParameter", t2);
      if (c2 <= 0) throw new n(n2, "InvalidParameter", t2);
      switch (s2[0].type) {
        case "polygon":
        case "polyline":
        case "extent":
          return f(await a("densify", [s2[0].toJSON(), c2, z4(s2[2])]));
        default:
          return s2[0];
      }
    });
  }, B3.functions.densifygeodetic = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      s2 = Je(s2), oe(s2, 2, 4, n2, t2);
      const c2 = s2[0];
      if (null == c2) return null;
      if (!U(c2)) throw new n(n2, "InvalidParameter", t2);
      const l2 = Se(s2[1]);
      if (isNaN(l2)) throw new n(n2, "InvalidParameter", t2);
      if (l2 <= 0) throw new n(n2, "InvalidParameter", t2);
      const u = z4(s2[2]), f2 = D(s2[3]);
      switch (c2.type) {
        case "polygon":
        case "polyline":
        case "extent":
          return f(await a("geodeticDensify", [c2.toJSON(), l2, u, f2]));
        default:
          return c2;
      }
    });
  }, B3.functions.generalize = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 2, 4, n2, t2), null === s2[0]) return null;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      const c2 = Se(s2[1]);
      if (isNaN(c2)) throw new n(n2, "InvalidParameter", t2);
      const l2 = Ae(z2(s2[2], true));
      return f(await a("generalize", [s2[0].toJSON(), c2, z4(s2[3]), { removeDegenerateParts: l2 }]));
    });
  }, B3.functions.buffer = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (o3, s2, c2) => {
      if (c2 = Je(c2), oe(c2, 2, 3, n2, t2), null === c2[0]) return null;
      if (!(c2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      const l2 = Se(c2[1]);
      if (isNaN(l2)) throw new n(n2, "InvalidParameter", t2);
      return 0 === l2 ? o(c2[0]) : f(await a("buffer", [c2[0].toJSON(), l2, z4(c2[2])]));
    });
  }, B3.functions.buffergeodetic = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (o3, s2, c2) => {
      c2 = Je(c2), oe(c2, 2, 4, n2, t2);
      const l2 = c2[0];
      if (null == l2) return null;
      if (!U(l2)) throw new n(n2, "InvalidParameter", t2);
      const u = Se(c2[1]);
      if (isNaN(u)) throw new n(n2, "InvalidParameter", t2);
      if (0 === u) return o(l2);
      const f2 = z4(c2[2]), d = D(c2[3]);
      return f(await a("geodesicBuffer", [l2.toJSON(), u, f2, d]));
    });
  }, B3.functions.offset = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      s2 = Je(s2), oe(s2, 2, 6, n2, t2);
      const c2 = s2[0];
      if (null === c2) return null;
      if (!(c2 instanceof P || c2 instanceof y)) throw new n(n2, "InvalidParameter", t2);
      const l2 = Se(s2[1]);
      if (isNaN(l2)) throw new n(n2, "InvalidParameter", t2);
      const u = s2[2], f2 = z3(s2[3]), d = Se(z2(s2[4], 10));
      if (isNaN(d)) throw new n(n2, "InvalidParameter", t2);
      const w = Se(z2(s2[5], 0));
      if (isNaN(w)) throw new n(n2, "InvalidParameter", t2);
      return f(await a("offset", [c2.toJSON(), l2, z4(u), f2, d, w]));
    });
  }, B3.functions.rotate = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 2, 3, n2, t2), null === s2[0]) return null;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      const c2 = s2[0] instanceof z ? P.fromExtent(s2[0]) : s2[0], l2 = Se(s2[1]);
      if (isNaN(l2)) throw new n(n2, "InvalidParameter", t2);
      const u = z2(s2[2], null);
      if (null === u) {
        const n3 = "point" === c2.type ? c2 : c2.extent?.center;
        return f(await a("rotate", [c2.toJSON(), l2, n3?.x, n3?.y]));
      }
      if (u instanceof _) return f(await a("rotate", [c2.toJSON(), l2, u.x, u.y]));
      throw new n(n2, "InvalidParameter", t2);
    });
  }, B3.functions.centroid = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 1, 2, n2, t2), null === s2[0]) return null;
      const c2 = O(s2[1]);
      let l2 = s2[0];
      if ((o2(s2[0]) || te(s2[0])) && (l2 = "geometric" === c2 ? Pe(s2[0], n2.spatialReference) : Re(s2[0], n2.spatialReference), null === l2)) return null;
      if (!(l2 instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return f("geometric" === c2 ? await a("centroid", [l2.toJSON()]) : await a("labelPoint", [l2.toJSON()]));
    });
  }, B3.functions.measuretocoordinate = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, I);
  }, B3.functions.pointtocoordinate = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, R);
  }, B3.functions.distancetocoordinate = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, b);
  }, B3.functions.multiparttosinglepart = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (o3, s2, c2) => {
      if (c2 = Je(c2), oe(c2, 1, 1, n2, t2), null === c2[0]) return null;
      if (!(c2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      if (c2[0] instanceof _) return [De(o(c2[0]), n2.spatialReference)];
      if (c2[0] instanceof z) return [De(o(c2[0]), n2.spatialReference)];
      const l2 = f(await a("simplify", [c2[0].toJSON()]));
      if (l2 instanceof P) {
        const n3 = [], t3 = [];
        for (let e = 0; e < l2.rings.length; e++) if (l2.isClockwise(l2.rings[e])) {
          const t4 = f({ rings: [l2.rings[e]], hasZ: true === l2.hasZ, hasM: true === l2.hasM, spatialReference: l2.spatialReference.toJSON() });
          n3.push(t4);
        } else t3.push({ ring: l2.rings[e], pt: l2.getPoint(e, 0) });
        for (let e = 0; e < t3.length; e++) for (let r2 = 0; r2 < n3.length; r2++) if (n3[r2].contains(t3[e].pt)) {
          n3[r2].addRing(t3[e].ring);
          break;
        }
        return n3;
      }
      if (l2 instanceof y) {
        const n3 = [];
        for (let t3 = 0; t3 < l2.paths.length; t3++) {
          const e = f({ paths: [l2.paths[t3]], hasZ: true === l2.hasZ, hasM: true === l2.hasM, spatialReference: l2.spatialReference.toJSON() });
          n3.push(e);
        }
        return n3;
      }
      if (c2[0] instanceof m) {
        const t3 = [], e = De(o(c2[0]), n2.spatialReference);
        for (let n3 = 0; n3 < e.points.length; n3++) t3.push(e.getPoint(n3));
        return t3;
      }
      return null;
    });
  }, B3.functions.isselfintersecting = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (n3, t3, e) => {
      oe(e, 1, 1, n3, t3);
      let r2 = (e = Je(e))[0];
      if ((o2(e[0]) || te(e[0])) && (r2 = ve(e[0], n3.spatialReference)), r2 instanceof m) {
        const n4 = r2.points;
        for (let t4 = 0; t4 < n4.length; t4++) for (let e2 = t4 + 1; e2 < n4.length; e2++) if (h(n4[t4], n4[e2])) return true;
        return false;
      }
      return (r2 instanceof y || r2 instanceof P) && await a("isSelfIntersecting", [r2.toJSON()]);
    });
  }, B3.functions.issimple = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 1, 1, n2, t2), null === s2[0]) return true;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return a("isSimple", [s2[0].toJSON()]);
    });
  }, B3.functions.simplify = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 1, 1, n2, t2), null === s2[0]) return null;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return f(await a("simplify", [s2[0].toJSON()]));
    });
  }, B3.functions.convexhull = function(n2, t2) {
    return B3.standardFunctionAsync(n2, t2, async (r2, o3, s2) => {
      if (s2 = Je(s2), oe(s2, 1, 1, n2, t2), null === s2[0]) return null;
      if (!(s2[0] instanceof c)) throw new n(n2, "InvalidParameter", t2);
      return f(await a("convexHull", [s2[0].toJSON()]));
    });
  }, B3.functions.getuser = function(r2, a2) {
    return B3.standardFunctionAsync(r2, a2, async (o3, s2, c2) => {
      oe(c2, 0, 2, r2, a2);
      let u = z2(c2[1], ""), f2 = true === u;
      if (u = true === u || false === u ? "" : ge(u), 0 === c2.length || c2[0] instanceof t) {
        let n2;
        n2 = r2.services?.portal ? r2.services.portal : M.getDefault(), c2.length > 0 && (n2 = l(c2[0], n2));
        const e = await r(n2, u, f2);
        if (e) {
          const n3 = JSON.parse(JSON.stringify(e));
          for (const t2 of ["lastLogin", "created", "modified"]) void 0 !== n3[t2] && null !== n3[t2] && (n3[t2] = new Date(n3[t2]));
          return p.convertObjectToArcadeDictionary(n3, Ke(r2));
        }
        return null;
      }
      let w = null;
      if (B(c2[0]) && (w = c2[0]), w) {
        if (f2 = false, u) return null;
        await w.load();
        const e = await w.getOwningSystemUrl();
        if (!e) {
          if (!u) {
            const n2 = await w.getIdentityUser();
            return n2 ? p.convertObjectToArcadeDictionary({ username: n2 }, Ke(r2)) : null;
          }
          return null;
        }
        let a3;
        a3 = r2.services?.portal ? r2.services.portal : M.getDefault(), a3 = l(new t(e), a3);
        const i = await r(a3, u, f2);
        if (i) {
          const n2 = JSON.parse(JSON.stringify(i));
          for (const t2 of ["lastLogin", "created", "modified"]) void 0 !== n2[t2] && null !== n2[t2] && (n2[t2] = new Date(n2[t2]));
          return p.convertObjectToArcadeDictionary(n2, Ke(r2));
        }
        return null;
      }
      throw new n(r2, "InvalidParameter", a2);
    });
  }, B3.functions.nearestcoordinate = function(n2, r2) {
    return B3.standardFunctionAsync(n2, r2, async (o3, s2, c2) => {
      if (c2 = Je(c2), oe(c2, 2, 2, n2, r2), !(c2[0] instanceof c || null === c2[0])) throw new n(n2, "InvalidParameter", r2);
      if (!(c2[1] instanceof _ || null === c2[1])) throw new n(n2, "InvalidParameter", r2);
      if (null === c2[0] || null === c2[1]) return null;
      const l2 = c2[0] instanceof z ? P.fromExtent(c2[0]) : c2[0], u = await a("getNearestCoordinate", [l2.toJSON(), c2[1].toJSON(), { calculateLeftRightSide: true }]);
      return null === u ? null : p.convertObjectToArcadeDictionary({ coordinate: f(u.coordinate), distance: u.distance, sideOfLine: 0 === u.distance ? "straddle" : u.isRightSide ? "right" : "left" }, Ke(n2), false, true);
    });
  }, B3.functions.nearestvertex = function(n2, r2) {
    return B3.standardFunctionAsync(n2, r2, async (o3, s2, c2) => {
      if (c2 = Je(c2), oe(c2, 2, 2, n2, r2), !(c2[0] instanceof c || null === c2[0])) throw new n(n2, "InvalidParameter", r2);
      if (!(c2[1] instanceof _ || null === c2[1])) throw new n(n2, "InvalidParameter", r2);
      if (null === c2[0] || null === c2[1]) return null;
      const l2 = c2[0] instanceof z ? P.fromExtent(c2[0]) : c2[0], u = await a("getNearestVertex", [l2.toJSON(), c2[1].toJSON()]);
      return null === u ? null : p.convertObjectToArcadeDictionary({ coordinate: f(u.coordinate), distance: u.distance, sideOfLine: 0 === u.distance ? "straddle" : u.isRightSide ? "right" : "left" }, Ke(n2), false, true);
    });
  });
}

export {
  B2 as B
};
//# sourceMappingURL=chunk-P6XHDW5Y.js.map
