{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isColorOrColorEmission as o,isColorEmission as r}from\"../core/shaderLibrary/ShaderOutput.js\";import{Emissions as l}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{OutputHighlight as i}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{ColorConversion as s}from\"../core/shaderLibrary/util/ColorConversion.glsl.js\";import{If as a,glsl as t}from\"../core/shaderModules/glsl.js\";import{alphaCutoff as e}from\"../../../../webscene/support/AlphaCutoff.js\";function n(n,u){n.include(i,u),n.include(l,u),n.fragment.include(s);const{output:f,oitPass:d,discardInvisibleFragments:m,snowCover:p}=u,c=10===f,g=r(f),C=o(f)&&1===d,h=o(f)&&1!==d;let v=0;(h||g||C)&&n.outputs.add(\"fragColor\",\"vec4\",v++),g&&n.outputs.add(\"fragEmission\",\"vec4\",v++),C&&n.outputs.add(\"fragAlpha\",\"float\",v++),n.fragment.code.add(t`\n    void outputColorHighlightOID(vec4 finalColor, const in vec3 vWorldPosition, vec3 emissiveSymbolColor ${a(p,\", float snow\")}) {\n      ${a(c,\"finalColor.a = 1.0;\")}\n\n      ${a(m,`if (finalColor.a < ${t.float(e)}) { discard; }`)}\n\n      finalColor = applySlice(finalColor, vWorldPosition);\n      ${a(C,t`fragColor = premultiplyAlpha(finalColor);\n             fragAlpha = finalColor.a;`)}\n      ${a(h,\"fragColor = finalColor;\")}\n      ${a(g,`fragEmission = ${a(p,\"mix(finalColor.a * getEmissions(emissiveSymbolColor), vec4(0.0), snow);\",\"finalColor.a * getEmissions(emissiveSymbolColor);\")}`)}\n      calculateOcclusionAndOutputHighlight();\n      ${a(c,\"outputObjectAndLayerIdColor();\")}\n    }\n  `)}export{n as outputColorHighlightOID};\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAIke,SAASA,GAAEA,IAAE,GAAE;AAAC,EAAAA,GAAE,QAAQC,IAAE,CAAC,GAAED,GAAE,QAAQ,GAAE,CAAC,GAAEA,GAAE,SAAS,QAAQ,CAAC;AAAE,QAAK,EAAC,QAAO,GAAE,SAAQC,IAAE,2BAA0B,GAAE,WAAU,EAAC,IAAE,GAAE,IAAE,OAAK,GAAE,IAAE,EAAE,CAAC,GAAE,IAAE,EAAE,CAAC,KAAG,MAAIA,IAAE,IAAE,EAAE,CAAC,KAAG,MAAIA;AAAE,MAAI,IAAE;AAAE,GAAC,KAAG,KAAG,MAAID,GAAE,QAAQ,IAAI,aAAY,QAAO,GAAG,GAAE,KAAGA,GAAE,QAAQ,IAAI,gBAAe,QAAO,GAAG,GAAE,KAAGA,GAAE,QAAQ,IAAI,aAAY,SAAQ,GAAG,GAAEA,GAAE,SAAS,KAAK,IAAI;AAAA,2GAC9sB,EAAE,GAAE,cAAc,CAAC;AAAA,QACtH,EAAE,GAAE,qBAAqB,CAAC;AAAA;AAAA,QAE1B,EAAE,GAAE,sBAAsB,EAAE,MAAME,EAAC,CAAC,gBAAgB,CAAC;AAAA;AAAA;AAAA,QAGrD,EAAE,GAAE;AAAA,uCAC2B,CAAC;AAAA,QAChC,EAAE,GAAE,yBAAyB,CAAC;AAAA,QAC9B,EAAE,GAAE,kBAAkB,EAAE,GAAE,2EAA0E,mDAAmD,CAAC,EAAE,CAAC;AAAA;AAAA,QAE3J,EAAE,GAAE,gCAAgC,CAAC;AAAA;AAAA,GAE1C;AAAC;",
  "names": ["n", "d", "o"]
}
