import {
  o as o3,
  x as x2
} from "./chunk-6WSJV2UJ.js";
import {
  F,
  M2 as M,
  N as N2,
  S,
  a3,
  b2 as b,
  d as d2,
  e2 as e5,
  h3 as h2,
  i as i2,
  i2 as i3,
  m as m3,
  m3 as m4,
  s as s6,
  z
} from "./chunk-VIIQX37N.js";
import {
  i as i4,
  i2 as i5
} from "./chunk-KEMYAF6M.js";
import {
  m as m5,
  t as t10
} from "./chunk-CYVJEU2B.js";
import {
  T,
  c as c3,
  d
} from "./chunk-FDSAQJ3R.js";
import {
  l as l2,
  o as o4,
  r2 as r6,
  x as x3
} from "./chunk-I4DSU5MJ.js";
import {
  B,
  H,
  U as U3
} from "./chunk-JNASI2YX.js";
import {
  p as p2
} from "./chunk-P355ISZZ.js";
import {
  e as e6,
  t as t9,
  tt
} from "./chunk-F43BIMML.js";
import {
  o2 as o5
} from "./chunk-BZBDEPRV.js";
import {
  t as t8
} from "./chunk-ALKEERWI.js";
import {
  n as n6,
  r as r5,
  t as t6
} from "./chunk-F75XORHS.js";
import {
  t as t7
} from "./chunk-ME5HHRVQ.js";
import {
  k
} from "./chunk-U6CJFTOF.js";
import {
  K,
  U as U2,
  j2 as j
} from "./chunk-2JMKFI2D.js";
import {
  Q,
  a as a2,
  n as n5,
  t as t4
} from "./chunk-2AOVWXAQ.js";
import {
  t as t5
} from "./chunk-ALR6N4CF.js";
import {
  A as A2,
  U
} from "./chunk-YYXR3KOD.js";
import {
  u as u5
} from "./chunk-BZLHV37L.js";
import {
  g as g4,
  t as t3
} from "./chunk-NDFIZYZY.js";
import {
  s as s5
} from "./chunk-TLTSPUO7.js";
import {
  e as e4,
  n as n3,
  s as s3,
  t as t2,
  u as u3
} from "./chunk-ZVTEFYZX.js";
import {
  m as m2,
  s as s2
} from "./chunk-LPUPM55U.js";
import {
  _ as _3
} from "./chunk-QNVJVDYZ.js";
import {
  n as n4,
  r as r4
} from "./chunk-WDTGOP77.js";
import {
  A,
  E as E3,
  N,
  P,
  R,
  _ as _2,
  c as c2,
  g as g3,
  o as o2,
  p,
  r as r3,
  s as s4,
  u as u4
} from "./chunk-VYMBX5H5.js";
import {
  E as E2,
  g,
  y as y2
} from "./chunk-HWUOAPTX.js";
import {
  e as e3
} from "./chunk-QHCKOBU7.js";
import {
  e as e2
} from "./chunk-K2OZ6WVC.js";
import {
  $
} from "./chunk-2LC2762W.js";
import {
  g as g2
} from "./chunk-DTZUXJMD.js";
import {
  h,
  l,
  m,
  x
} from "./chunk-XLOINTMG.js";
import {
  _,
  n,
  r as r2,
  t,
  u
} from "./chunk-75XOUSSS.js";
import {
  u5 as u2
} from "./chunk-PZ5RULLK.js";
import {
  a,
  c
} from "./chunk-OPJX4KXH.js";
import {
  n as n2
} from "./chunk-LTPHDYPK.js";
import {
  e
} from "./chunk-3OVERDFX.js";
import {
  i
} from "./chunk-FPMLKIDB.js";
import {
  G,
  I,
  o
} from "./chunk-AZXJIEZ6.js";
import {
  r,
  s
} from "./chunk-SMWUT52Z.js";
import {
  E,
  ae
} from "./chunk-NMQNUPE4.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  y
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js
function w(t14, e8) {
  if ("point" === t14.type) return F2(t14, e8, false);
  if (o3(t14)) switch (t14.type) {
    case "extent":
      return F2(t14.center, e8, false);
    case "polygon":
      return F2(P2(t14), e8, false);
    case "polyline":
      return F2(M2(t14), e8, true);
    case "mesh":
      return F2(u5(t14.vertexSpace, t14.spatialReference) ?? t14.extent.center, e8, false);
    case "multipoint":
      return;
  }
  else switch (t14.type) {
    case "extent":
      return F2(R2(t14), e8, true);
    case "polygon":
      return F2(P2(t14), e8, true);
    case "polyline":
      return F2(M2(t14), e8, true);
    case "multipoint":
      return;
  }
}
function M2(t14) {
  const e8 = t14.paths[0];
  if (!e8 || 0 === e8.length) return null;
  const r9 = a(e8, c(e8) / 2);
  return t8(r9[0], r9[1], r9[2], t14.spatialReference);
}
function R2(t14) {
  return t8(0.5 * (t14.xmax + t14.xmin), 0.5 * (t14.ymax + t14.ymin), null != t14.zmin && null != t14.zmax && isFinite(t14.zmin) && isFinite(t14.zmax) ? 0.5 * (t14.zmax + t14.zmin) : void 0, t14.spatialReference);
}
function P2(t14) {
  const e8 = t14.rings[0];
  if (!e8 || 0 === e8.length) return null;
  const r9 = u2(t14.rings, !!t14.hasZ);
  return t8(r9[0], r9[1], r9[2], t14.spatialReference);
}
function F2(t14, e8, r9) {
  const n10 = r9 ? t14 : x2(t14);
  return e8 && t14 ? $(t14, n10, e8) ? n10 : null : n10;
}
function U4(t14, e8, r9, n10 = 0) {
  if (t14) {
    e8 || (e8 = i());
    const i7 = t14;
    let o8 = 0.5 * i7.width * (r9 - 1), s7 = 0.5 * i7.height * (r9 - 1);
    return i7.width < 1e-7 * i7.height ? o8 += s7 / 20 : i7.height < 1e-7 * i7.width && (s7 += o8 / 20), s2(e8, i7.xmin - o8 - n10, i7.ymin - s7 - n10, i7.xmax + o8 + n10, i7.ymax + s7 + n10), e8;
  }
  return null;
}
function A3(t14, e8, r9 = null) {
  const n10 = t2(s3);
  return null != t14 && (n10[0] = t14[0], n10[1] = t14[1], n10[2] = t14[2], t14.length > 3 && (n10[3] = t14[3])), null != e8 && (n10[3] = e8), r9 && m2(n10, n10, r9), n10;
}
function D(t14 = _, e8, r9, n10 = 1) {
  const i7 = new Array(3);
  if (null == e8 || null == r9) i7[0] = 1, i7[1] = 1, i7[2] = 1;
  else {
    let n11, o8 = 0;
    for (let s7 = 2; s7 >= 0; s7--) {
      const l3 = t14[s7], u6 = null != l3, a4 = 0 === s7 && !n11 && !u6, c5 = r9[s7];
      let m7;
      "symbol-value" === l3 || a4 ? m7 = 0 !== c5 ? e8[s7] / c5 : 1 : u6 && "proportional" !== l3 && isFinite(l3) && (m7 = 0 !== c5 ? l3 / c5 : 1), null != m7 && (i7[s7] = m7, n11 = m7, o8 = Math.max(o8, Math.abs(m7)));
    }
    for (let t15 = 2; t15 >= 0; t15--) null == i7[t15] ? i7[t15] = n11 : 0 === i7[t15] && (i7[t15] = 1e-3 * o8);
  }
  for (let o8 = 2; o8 >= 0; o8--) i7[o8] /= n10;
  return u(i7);
}
function I2(t14) {
  return null != t14.isPrimitive;
}
function Z(t14) {
  return k2(I2(t14) ? [t14.width, t14.depth, t14.height] : t14) ? null : "Symbol sizes may not be negative values";
}
function k2(t14) {
  const e8 = (t15) => null == t15 || t15 >= 0;
  return Array.isArray(t14) ? t14.every(e8) : e8(t14);
}
function E4(t14, o8, s7, l3 = e2()) {
  return t14 && x(l3, l3, -t14 / 180 * Math.PI), o8 && l(l3, l3, o8 / 180 * Math.PI), s7 && m(l3, l3, s7 / 180 * Math.PI), l3;
}
function G2(e8, r9, n10) {
  if (null != n10.minDemResolution) return n10.minDemResolution;
  const i7 = ae(r9), o8 = g(e8) * i7, s7 = y2(e8) * i7, l3 = E2(e8) * (r9.isGeographic ? 1 : i7);
  return 0 === o8 && 0 === s7 && 0 === l3 ? n10.minDemResolutionForPoints : 0.01 * Math.max(o8, s7, l3);
}

// node_modules/@arcgis/core/geometry/support/HalfFloatArray.js
function n7(n10, a4 = false) {
  return n10 <= y ? a4 ? new Array(n10).fill(0) : new Array(n10) : t3(n10);
}

// node_modules/@arcgis/core/views/3d/support/engineContent/line.js
function f(t14, e8, r9 = null) {
  const o8 = [], n10 = e8.mapPositions, i7 = m6(e8, o8), a4 = i7.data, u6 = i7.indices.length, s7 = U(u6);
  return h3(e8, o8, s7), y3(e8, o8, s7), g5(e8, o8, s7), b2(e8, o8, i7.indices, s7), w2(e8, o8, i7.indices, s7), D2(e8, o8), F3(e8, o8, i7.indices, s7), d3(e8, o8, a4), new m3(t14, o8, n10, 2, r9);
}
function m6(t14, e8) {
  const { attributeData: { position: r9 }, removeDuplicateStartEnd: o8 } = t14, n10 = j2(r9) && o8, i7 = r9.length / 3 - (n10 ? 1 : 0), a4 = new Array(2 * (i7 - 1)), u6 = n10 ? r9.slice(0, -3) : r9;
  let s7 = 0;
  for (let c5 = 0; c5 < i7 - 1; c5++) a4[s7++] = c5, a4[s7++] = c5 + 1;
  const l3 = new t7(u6, a4, 3, n10);
  return e8.push(["position", l3]), l3;
}
function h3(t14, e8, r9) {
  if (null != t14.attributeData.colorFeature) return;
  const n10 = t14.attributeData.color;
  e8.push(["color", new t7(n10 ?? s3, r9, 4)]);
}
function g5(t14, e8, r9) {
  t14.attributeData.normal && e8.push(["normal", new t7(t14.attributeData.normal, r9, 3)]);
}
function b2(t14, e8, r9, o8) {
  const n10 = t14.attributeData.colorFeature;
  null != n10 && ("number" == typeof n10 ? e8.push(["colorFeatureAttribute", new t7([n10], o8, 1, true)]) : e8.push(["colorFeatureAttribute", new t7(n10, r9, 1, true)]));
}
function y3(t14, e8, r9) {
  null == t14.attributeData.sizeFeature && e8.push(["size", new t7([t14.attributeData.size ?? 1], r9, 1, true)]);
}
function w2(t14, e8, r9, o8) {
  const n10 = t14.attributeData.sizeFeature;
  null != n10 && ("number" == typeof n10 ? e8.push(["sizeFeatureAttribute", new t7([n10], o8, 1, true)]) : e8.push(["sizeFeatureAttribute", new t7(n10, r9, 1, true)]));
}
function D2(t14, e8) {
  const { attributeData: { position: r9, timeStamps: o8 } } = t14;
  if (!o8) return;
  const n10 = r9.length / 3, i7 = new Array(2 * (n10 - 1));
  let a4 = 0;
  for (let u6 = 0; u6 < n10 - 1; u6++) i7[a4++] = u6, i7[a4++] = u6 + 1;
  e8.push(["timeStamps", new t7(o8, i7, z2, true)]);
}
function F3(t14, e8, r9, o8) {
  const n10 = t14.attributeData.opacityFeature;
  null != n10 && ("number" == typeof n10 ? e8.push(["opacityFeatureAttribute", new t7([n10], o8, 1, true)]) : e8.push(["opacityFeatureAttribute", new t7(n10, r9, 1, true)]));
}
function d3(r9, o8, s7) {
  if (null == r9.overlayInfo || 1 !== r9.overlayInfo.renderCoordsHelper.viewingMode || !r9.overlayInfo.spatialReference.isGeographic) return;
  const l3 = e3(s7.length), p3 = E(r9.overlayInfo.spatialReference);
  for (let t14 = 0; t14 < l3.length; t14 += 3) g2(s7, t14, l3, t14, p3);
  const f2 = s7.length / 3, m7 = n5(f2 + 1);
  let h5 = A4, g7 = v, b4 = 0, y4 = 0;
  o(h5, l3[y4++], l3[y4++]), y4++, m7[0] = 0;
  for (let n10 = 1; n10 < f2 + 1; ++n10) n10 === f2 && (y4 = 0), o(g7, l3[y4++], l3[y4++]), y4++, b4 += G(h5, g7), m7[n10] = b4, [h5, g7] = [g7, h5];
  o8.push(["distanceToStart", new t7(m7, o8[0][1].indices, 1, true)]);
}
function j2(t14) {
  const e8 = t14.length;
  return t14[0] === t14[e8 - 3] && t14[1] === t14[e8 - 2] && t14[2] === t14[e8 - 1];
}
var A4 = n4();
var v = n4();
var z2 = 4;
function x4(t14, e8) {
  const r9 = n7(t14.length * z2), o8 = t14[0], n10 = t14[t14.length - 1];
  for (let i7 = 0; i7 < t14.length; i7++) r9[i7 * z2] = t14[i7], r9[i7 * z2 + 1] = o8, r9[i7 * z2 + 2] = n10, r9[i7 * z2 + 3] = e8 + 0.5;
  return r9;
}

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/bufferVectorMath.js
function n8(n10, t14) {
  const o8 = n10[t14], c5 = n10[t14 + 1], u6 = n10[t14 + 2];
  return Math.sqrt(o8 * o8 + c5 * c5 + u6 * u6);
}
function t11(n10, t14) {
  const o8 = n10[t14], c5 = n10[t14 + 1], u6 = n10[t14 + 2], f2 = 1 / Math.sqrt(o8 * o8 + c5 * c5 + u6 * u6);
  n10[t14] *= f2, n10[t14 + 1] *= f2, n10[t14 + 2] *= f2;
}
function o6(n10, t14, o8) {
  n10[t14] *= o8, n10[t14 + 1] *= o8, n10[t14 + 2] *= o8;
}
function c4(n10, t14, o8, c5, u6, f2 = t14) {
  (u6 = u6 || n10)[f2] = n10[t14] + o8[c5], u6[f2 + 1] = n10[t14 + 1] + o8[c5 + 1], u6[f2 + 2] = n10[t14 + 2] + o8[c5 + 2];
}

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterialBaseInstance.js
function e7() {
  return o7 ??= r7(), o7;
}
function r7() {
  const e8 = 0, r9 = 255, o8 = new t7([e8, e8, e8, r9, r9, e8, r9, r9], [0, 1, 2, 3], 2, true);
  return new i2([["uv0", o8]]);
}
var o7 = null;

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js
var U5 = [[-0.5, -0.5, 0.5], [0.5, -0.5, 0.5], [0.5, 0.5, 0.5], [-0.5, 0.5, 0.5], [-0.5, -0.5, -0.5], [0.5, -0.5, -0.5], [0.5, 0.5, -0.5], [-0.5, 0.5, -0.5]];
var V = [0, 0, 1, -1, 0, 0, 1, 0, 0, 0, -1, 0, 0, 1, 0, 0, 0, -1];
var k3 = [0, 0, 1, 0, 1, 1, 0, 1];
var B2 = [0, 1, 2, 2, 3, 0, 4, 0, 3, 3, 7, 4, 1, 5, 6, 6, 2, 1, 1, 0, 4, 4, 5, 1, 3, 2, 6, 6, 7, 3, 5, 4, 7, 7, 6, 5];
var G3 = new Array(36);
for (let Pt = 0; Pt < 6; Pt++) for (let t14 = 0; t14 < 6; t14++) G3[6 * Pt + t14] = Pt;
var H2 = new Array(36);
for (let Pt = 0; Pt < 6; Pt++) H2[6 * Pt] = 0, H2[6 * Pt + 1] = 1, H2[6 * Pt + 2] = 2, H2[6 * Pt + 3] = 2, H2[6 * Pt + 4] = 3, H2[6 * Pt + 5] = 0;
function E5(t14, n10) {
  Array.isArray(n10) || (n10 = [n10, n10, n10]);
  const o8 = new Array(24);
  for (let e8 = 0; e8 < 8; e8++) o8[3 * e8] = U5[e8][0] * n10[0], o8[3 * e8 + 1] = U5[e8][1] * n10[1], o8[3 * e8 + 2] = U5[e8][2] * n10[2];
  return new m3(t14, [["position", new t7(o8, B2, 3, true)], ["normal", new t7(V, G3, 3)], ["uv0", new t7(k3, H2, 2)]]);
}
var J = [[-0.5, 0, -0.5], [0.5, 0, -0.5], [0.5, 0, 0.5], [-0.5, 0, 0.5], [0, -0.5, 0], [0, 0.5, 0]];
var K2 = [0, 1, -1, 1, 1, 0, 0, 1, 1, -1, 1, 0, 0, -1, -1, 1, -1, 0, 0, -1, 1, -1, -1, 0];
var L = [5, 1, 0, 5, 2, 1, 5, 3, 2, 5, 0, 3, 4, 0, 1, 4, 1, 2, 4, 2, 3, 4, 3, 0];
var N3 = [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7, 7];
function Q2(t14, n10) {
  Array.isArray(n10) || (n10 = [n10, n10, n10]);
  const o8 = new Array(18);
  for (let e8 = 0; e8 < 6; e8++) o8[3 * e8] = J[e8][0] * n10[0], o8[3 * e8 + 1] = J[e8][1] * n10[1], o8[3 * e8 + 2] = J[e8][2] * n10[2];
  return new m3(t14, [["position", new t7(o8, L, 3, true)], ["normal", new t7(K2, N3, 3)]]);
}
var R3 = r5(-0.5, 0, -0.5);
var T2 = r5(0.5, 0, -0.5);
var W = r5(0, 0, 0.5);
var X = r5(0, 0.5, 0);
var Y = n6();
var Z2 = n6();
var $2 = n6();
var _4 = n6();
var tt2 = n6();
c2(Y, R3, X), c2(Z2, R3, T2), _2($2, Y, Z2), A($2, $2), c2(Y, T2, X), c2(Z2, T2, W), _2(_4, Y, Z2), A(_4, _4), c2(Y, W, X), c2(Z2, W, R3), _2(tt2, Y, Z2), A(tt2, tt2);
var nt = [R3, T2, W, X];
var ot = [0, -1, 0, $2[0], $2[1], $2[2], _4[0], _4[1], _4[2], tt2[0], tt2[1], tt2[2]];
var et = [0, 1, 2, 3, 1, 0, 3, 2, 1, 3, 0, 2];
var st = [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3];
function rt(t14, n10) {
  Array.isArray(n10) || (n10 = [n10, n10, n10]);
  const o8 = new Array(12);
  for (let e8 = 0; e8 < 4; e8++) o8[3 * e8] = nt[e8][0] * n10[0], o8[3 * e8 + 1] = nt[e8][1] * n10[1], o8[3 * e8 + 2] = nt[e8][2] * n10[2];
  return new m3(t14, [["position", new t7(o8, et, 3, true)], ["normal", new t7(ot, st, 3)]]);
}
function lt(t14, n10, o8, e8, s7 = { uv: true }) {
  const r9 = -Math.PI, l3 = 2 * Math.PI, h5 = -Math.PI / 2, u6 = Math.PI, a4 = Math.max(3, Math.floor(o8)), i7 = Math.max(2, Math.floor(e8)), c5 = (a4 + 1) * (i7 + 1), p3 = n5(3 * c5), f2 = n5(3 * c5), w3 = n5(2 * c5), g7 = [];
  let M3 = 0;
  for (let m7 = 0; m7 <= i7; m7++) {
    const t15 = [], o9 = m7 / i7, e9 = h5 + o9 * u6, s8 = Math.cos(e9);
    for (let h6 = 0; h6 <= a4; h6++) {
      const u7 = h6 / a4, i8 = r9 + u7 * l3, c6 = Math.cos(i8) * s8, g8 = Math.sin(e9), m8 = -Math.sin(i8) * s8;
      p3[3 * M3] = c6 * n10, p3[3 * M3 + 1] = g8 * n10, p3[3 * M3 + 2] = m8 * n10, f2[3 * M3] = c6, f2[3 * M3 + 1] = g8, f2[3 * M3 + 2] = m8, w3[2 * M3] = u7, w3[2 * M3 + 1] = o9, t15.push(M3), ++M3;
    }
    g7.push(t15);
  }
  const A5 = new Array();
  for (let m7 = 0; m7 < i7; m7++) for (let t15 = 0; t15 < a4; t15++) {
    const n11 = g7[m7][t15], o9 = g7[m7][t15 + 1], e9 = g7[m7 + 1][t15 + 1], s8 = g7[m7 + 1][t15];
    0 === m7 ? (A5.push(n11), A5.push(e9), A5.push(s8)) : m7 === i7 - 1 ? (A5.push(n11), A5.push(o9), A5.push(e9)) : (A5.push(n11), A5.push(o9), A5.push(e9), A5.push(e9), A5.push(s8), A5.push(n11));
  }
  const b4 = [["position", new t7(p3, A5, 3, true)], ["normal", new t7(f2, A5, 3, true)]];
  return s7.uv && b4.push(["uv0", new t7(w3, A5, 2, true)]), s7.offset && (b4[0][0] = "offset", b4.push(["position", new t7(Float64Array.from(s7.offset), U(A5.length), 3, true)])), new m3(t14, b4);
}
function ht(t14, n10, o8, e8) {
  const s7 = ut(n10, o8, e8);
  return new m3(t14, s7);
}
function ut(t14, n10, o8) {
  const e8 = t14;
  let s7, r9;
  if (o8) s7 = [0, -1, 0, 1, 0, 0, 0, 0, 1, -1, 0, 0, 0, 0, -1, 0, 1, 0], r9 = [0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 1, 1, 5, 2, 2, 5, 3, 3, 5, 4, 4, 5, 1];
  else {
    const t15 = e8 * (1 + Math.sqrt(5)) / 2;
    s7 = [-e8, t15, 0, e8, t15, 0, -e8, -t15, 0, e8, -t15, 0, 0, -e8, t15, 0, e8, t15, 0, -e8, -t15, 0, e8, -t15, t15, 0, -e8, t15, 0, e8, -t15, 0, -e8, -t15, 0, e8], r9 = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
  }
  for (let a4 = 0; a4 < s7.length; a4 += 3) o6(s7, a4, t14 / n8(s7, a4));
  let l3 = {};
  function h5(n11, o9) {
    n11 > o9 && ([n11, o9] = [o9, n11]);
    const e9 = n11.toString() + "." + o9.toString();
    if (l3[e9]) return l3[e9];
    let r10 = s7.length;
    return s7.length += 3, c4(s7, 3 * n11, s7, 3 * o9, s7, r10), o6(s7, r10, t14 / n8(s7, r10)), r10 /= 3, l3[e9] = r10, r10;
  }
  for (let a4 = 0; a4 < n10; a4++) {
    const t15 = r9.length, n11 = new Array(4 * t15);
    for (let o9 = 0; o9 < t15; o9 += 3) {
      const t16 = r9[o9], e9 = r9[o9 + 1], s8 = r9[o9 + 2], l4 = h5(t16, e9), u7 = h5(e9, s8), a5 = h5(s8, t16), i7 = 4 * o9;
      n11[i7] = t16, n11[i7 + 1] = l4, n11[i7 + 2] = a5, n11[i7 + 3] = e9, n11[i7 + 4] = u7, n11[i7 + 5] = l4, n11[i7 + 6] = s8, n11[i7 + 7] = a5, n11[i7 + 8] = u7, n11[i7 + 9] = l4, n11[i7 + 10] = u7, n11[i7 + 11] = a5;
    }
    r9 = n11, l3 = {};
  }
  const u6 = a2(s7);
  for (let a4 = 0; a4 < u6.length; a4 += 3) t11(u6, a4);
  return [["position", new t7(a2(s7), r9, 3, true)], ["normal", new t7(u6, r9, 3, true)]];
}
function at(t14, { normal: n10, position: o8, color: e8, rotation: s7, size: r9, centerOffsetAndDistance: l3, uvi: h5, featureAttribute: u6, olidColor: a4 = null } = {}) {
  const i7 = o8 ? t(o8) : n(), c5 = n10 ? t(n10) : r2(0, 0, 1), g7 = e8 ? [e8[0], e8[1], e8[2], e8.length > 3 ? e8[3] : 255] : [255, 255, 255, 255], m7 = null != r9 && 2 === r9.length ? r9 : [1, 1], M3 = null != s7 ? [s7] : [0], A5 = U(1), b4 = [["position", new t7(i7, A5, 3, true)], ["normal", new t7(c5, A5, 3, true)], ["color", new t7(g7, A5, 4, true)], ["size", new t7(m7, A5, 2)], ["rotation", new t7(M3, A5, 1, true)]];
  if (h5 && b4.push(["uvi", new t7(h5, A5, h5.length)]), null != l3) {
    const t15 = [l3[0], l3[1], l3[2], l3[3]];
    b4.push(["centerOffsetAndDistance", new t7(t15, A5, 4)]);
  }
  if (u6) {
    const t15 = [u6[0], u6[1], u6[2], u6[3]];
    b4.push(["featureAttribute", new t7(t15, A5, 4)]);
  }
  return new m3(t14, b4, null, 1, a4, void 0, e7());
}
function pt(t14, n10, o8, e8, s7 = true, r9 = true) {
  let l3 = 0;
  const h5 = n10, u6 = t14;
  let i7 = r5(0, l3, 0), c5 = r5(0, l3 + u6, 0), p3 = r5(0, -1, 0), f2 = r5(0, 1, 0);
  e8 && (l3 = u6, c5 = r5(0, 0, 0), i7 = r5(0, l3, 0), p3 = r5(0, 1, 0), f2 = r5(0, -1, 0));
  const w3 = [c5, i7], g7 = [p3, f2], M3 = o8 + 2, A5 = Math.sqrt(u6 * u6 + h5 * h5);
  if (e8) for (let m7 = o8 - 1; m7 >= 0; m7--) {
    const t15 = m7 * (2 * Math.PI / o8), n11 = r5(Math.cos(t15) * h5, l3, Math.sin(t15) * h5);
    w3.push(n11);
    const e9 = r5(u6 * Math.cos(t15) / A5, -h5 / A5, u6 * Math.sin(t15) / A5);
    g7.push(e9);
  }
  else for (let m7 = 0; m7 < o8; m7++) {
    const t15 = m7 * (2 * Math.PI / o8), n11 = r5(Math.cos(t15) * h5, l3, Math.sin(t15) * h5);
    w3.push(n11);
    const e9 = r5(u6 * Math.cos(t15) / A5, h5 / A5, u6 * Math.sin(t15) / A5);
    g7.push(e9);
  }
  const y4 = new Array(), b4 = new Array();
  if (s7) {
    for (let t15 = 3; t15 < w3.length; t15++) y4.push(1), y4.push(t15 - 1), y4.push(t15), b4.push(0), b4.push(0), b4.push(0);
    y4.push(w3.length - 1), y4.push(2), y4.push(1), b4.push(0), b4.push(0), b4.push(0);
  }
  if (r9) {
    for (let t15 = 3; t15 < w3.length; t15++) y4.push(t15), y4.push(t15 - 1), y4.push(0), b4.push(t15), b4.push(t15 - 1), b4.push(1);
    y4.push(0), y4.push(2), y4.push(w3.length - 1), b4.push(1), b4.push(2), b4.push(g7.length - 1);
  }
  const j4 = n5(3 * M3);
  for (let a4 = 0; a4 < M3; a4++) j4[3 * a4] = w3[a4][0], j4[3 * a4 + 1] = w3[a4][1], j4[3 * a4 + 2] = w3[a4][2];
  const d5 = n5(3 * M3);
  for (let a4 = 0; a4 < M3; a4++) d5[3 * a4] = g7[a4][0], d5[3 * a4 + 1] = g7[a4][1], d5[3 * a4 + 2] = g7[a4][2];
  return [["position", new t7(j4, y4, 3, true)], ["normal", new t7(d5, b4, 3, true)]];
}
function ft(t14, n10, o8, e8, s7, r9 = true, l3 = true) {
  return new m3(t14, pt(n10, o8, e8, s7, r9, l3));
}
function wt(n10, e8, h5, p3, f2, w3, g7) {
  const M3 = f2 ? t6(f2) : r5(1, 0, 0), A5 = w3 ? t6(w3) : r5(0, 0, 0);
  g7 ??= true;
  const y4 = n6();
  A(y4, M3);
  const b4 = n6();
  g3(b4, y4, Math.abs(e8));
  const j4 = n6();
  g3(j4, b4, -0.5), u4(j4, j4, A5);
  const d5 = r5(0, 1, 0);
  Math.abs(1 - P(y4, d5)) < 0.2 && o2(d5, 0, 0, 1);
  const v3 = n6();
  _2(v3, y4, d5), A(v3, v3), _2(d5, v3, y4);
  const I3 = 2 * p3 + (g7 ? 2 : 0), P3 = p3 + (g7 ? 2 : 0), D3 = n5(3 * I3), z3 = n5(3 * P3), S2 = n5(2 * I3), q = new Array(3 * p3 * (g7 ? 4 : 2)), F4 = new Array(3 * p3 * (g7 ? 4 : 2));
  g7 && (D3[3 * (I3 - 2)] = j4[0], D3[3 * (I3 - 2) + 1] = j4[1], D3[3 * (I3 - 2) + 2] = j4[2], S2[2 * (I3 - 2)] = 0, S2[2 * (I3 - 2) + 1] = 0, D3[3 * (I3 - 1)] = D3[3 * (I3 - 2)] + b4[0], D3[3 * (I3 - 1) + 1] = D3[3 * (I3 - 2) + 1] + b4[1], D3[3 * (I3 - 1) + 2] = D3[3 * (I3 - 2) + 2] + b4[2], S2[2 * (I3 - 1)] = 1, S2[2 * (I3 - 1) + 1] = 1, z3[3 * (P3 - 2)] = -y4[0], z3[3 * (P3 - 2) + 1] = -y4[1], z3[3 * (P3 - 2) + 2] = -y4[2], z3[3 * (P3 - 1)] = y4[0], z3[3 * (P3 - 1) + 1] = y4[1], z3[3 * (P3 - 1) + 2] = y4[2]);
  const O = (t14, n11, o8) => {
    q[t14] = n11, F4[t14] = o8;
  };
  let U6 = 0;
  const V2 = n6(), k4 = n6();
  for (let t14 = 0; t14 < p3; t14++) {
    const n11 = t14 * (2 * Math.PI / p3);
    g3(V2, d5, Math.sin(n11)), g3(k4, v3, Math.cos(n11)), u4(V2, V2, k4), z3[3 * t14] = V2[0], z3[3 * t14 + 1] = V2[1], z3[3 * t14 + 2] = V2[2], g3(V2, V2, h5), u4(V2, V2, j4), D3[3 * t14] = V2[0], D3[3 * t14 + 1] = V2[1], D3[3 * t14 + 2] = V2[2], S2[2 * t14] = t14 / p3, S2[2 * t14 + 1] = 0, D3[3 * (t14 + p3)] = D3[3 * t14] + b4[0], D3[3 * (t14 + p3) + 1] = D3[3 * t14 + 1] + b4[1], D3[3 * (t14 + p3) + 2] = D3[3 * t14 + 2] + b4[2], S2[2 * (t14 + p3)] = t14 / p3, S2[2 * t14 + 1] = 1;
    const o8 = (t14 + 1) % p3;
    O(U6++, t14, t14), O(U6++, t14 + p3, t14), O(U6++, o8, o8), O(U6++, o8, o8), O(U6++, t14 + p3, t14), O(U6++, o8 + p3, o8);
  }
  if (g7) {
    for (let t14 = 0; t14 < p3; t14++) {
      const n11 = (t14 + 1) % p3;
      O(U6++, I3 - 2, P3 - 2), O(U6++, t14, P3 - 2), O(U6++, n11, P3 - 2);
    }
    for (let t14 = 0; t14 < p3; t14++) {
      const n11 = (t14 + 1) % p3;
      O(U6++, t14 + p3, P3 - 1), O(U6++, I3 - 1, P3 - 1), O(U6++, n11 + p3, P3 - 1);
    }
  }
  const B3 = [["position", new t7(D3, q, 3, true)], ["normal", new t7(z3, F4, 3, true)], ["uv0", new t7(S2, q, 2, true)]];
  return new m3(n10, B3);
}
function gt(t14, n10, o8, e8, s7, r9) {
  e8 = e8 || 10, s7 = null == s7 || s7, s5(n10.length > 1);
  const l3 = [[0, 0, 0]], h5 = [], u6 = [];
  for (let a4 = 0; a4 < e8; a4++) {
    h5.push([0, -a4 - 1, -(a4 + 1) % e8 - 1]);
    const t15 = a4 / e8 * 2 * Math.PI;
    u6.push([Math.cos(t15) * o8, Math.sin(t15) * o8]);
  }
  return mt(t14, u6, n10, l3, h5, s7, r9);
}
function mt(h5, u6, i7, c5, f2, w3, g7 = r5(0, 0, 0)) {
  const M3 = u6.length, A5 = n5(i7.length * M3 * 3 + (6 * c5.length || 0)), y4 = n5(i7.length * M3 * 3 + (c5 ? 6 : 0)), I3 = new Array(), P3 = new Array();
  let D3 = 0, z3 = 0;
  const S2 = n(), q = n(), F4 = n(), O = n(), U6 = n(), V2 = n(), k4 = n(), B3 = n(), G4 = n(), H3 = n(), E6 = n(), J2 = n(), K3 = n(), L2 = j();
  o2(G4, 0, 1, 0), c2(q, i7[1], i7[0]), A(q, q), w3 ? (u4(B3, i7[0], g7), A(F4, B3)) : o2(F4, 0, 0, 1), dt(q, F4, G4, G4, U6, F4, vt), s4(O, F4), s4(J2, U6);
  for (let t14 = 0; t14 < c5.length; t14++) g3(V2, U6, c5[t14][0]), g3(B3, F4, c5[t14][2]), u4(V2, V2, B3), u4(V2, V2, i7[0]), A5[D3++] = V2[0], A5[D3++] = V2[1], A5[D3++] = V2[2];
  y4[z3++] = -q[0], y4[z3++] = -q[1], y4[z3++] = -q[2];
  for (let t14 = 0; t14 < f2.length; t14++) I3.push(f2[t14][0] > 0 ? f2[t14][0] : -f2[t14][0] - 1 + c5.length), I3.push(f2[t14][1] > 0 ? f2[t14][1] : -f2[t14][1] - 1 + c5.length), I3.push(f2[t14][2] > 0 ? f2[t14][2] : -f2[t14][2] - 1 + c5.length), P3.push(0), P3.push(0), P3.push(0);
  let N4 = c5.length;
  const Q3 = c5.length - 1;
  for (let t14 = 0; t14 < i7.length; t14++) {
    let h6 = false;
    if (t14 > 0) {
      s4(S2, q), t14 < i7.length - 1 ? (c2(q, i7[t14 + 1], i7[t14]), A(q, q)) : h6 = true, u4(H3, S2, q), A(H3, H3), u4(E6, i7[t14 - 1], O), U2(i7[t14], H3, L2);
      K(L2, k(E6, S2), B3) ? (c2(B3, B3, i7[t14]), A(F4, B3), _2(U6, H3, F4), A(U6, U6)) : dt(H3, O, J2, G4, U6, F4, vt), s4(O, F4), s4(J2, U6);
    }
    w3 && (u4(B3, i7[t14], g7), A(K3, B3));
    for (let n10 = 0; n10 < M3; n10++) if (g3(V2, U6, u6[n10][0]), g3(B3, F4, u6[n10][1]), u4(V2, V2, B3), A(k4, V2), y4[z3++] = k4[0], y4[z3++] = k4[1], y4[z3++] = k4[2], u4(V2, V2, i7[t14]), A5[D3++] = V2[0], A5[D3++] = V2[1], A5[D3++] = V2[2], !h6) {
      const t15 = (n10 + 1) % M3;
      I3.push(N4 + n10), I3.push(N4 + M3 + n10), I3.push(N4 + t15), I3.push(N4 + t15), I3.push(N4 + M3 + n10), I3.push(N4 + M3 + t15);
      for (let n11 = 0; n11 < 6; n11++) {
        const t16 = I3.length - 6;
        P3.push(I3[t16 + n11] - Q3);
      }
    }
    N4 += M3;
  }
  const R4 = i7[i7.length - 1];
  for (let t14 = 0; t14 < c5.length; t14++) g3(V2, U6, c5[t14][0]), g3(B3, F4, c5[t14][1]), u4(V2, V2, B3), u4(V2, V2, R4), A5[D3++] = V2[0], A5[D3++] = V2[1], A5[D3++] = V2[2];
  const T3 = z3 / 3;
  y4[z3++] = q[0], y4[z3++] = q[1], y4[z3++] = q[2];
  const W2 = N4 - M3;
  for (let t14 = 0; t14 < f2.length; t14++) I3.push(f2[t14][0] >= 0 ? N4 + f2[t14][0] : -f2[t14][0] - 1 + W2), I3.push(f2[t14][2] >= 0 ? N4 + f2[t14][2] : -f2[t14][2] - 1 + W2), I3.push(f2[t14][1] >= 0 ? N4 + f2[t14][1] : -f2[t14][1] - 1 + W2), P3.push(T3), P3.push(T3), P3.push(T3);
  const X2 = [["position", new t7(A5, I3, 3, true)], ["normal", new t7(y4, P3, 3, true)]];
  return new m3(h5, X2);
}
function Mt(t14, n10, o8, e8, s7) {
  const r9 = e3(3 * n10.length), l3 = new Array(2 * (n10.length - 1));
  let h5 = 0, u6 = 0;
  for (let i7 = 0; i7 < n10.length; i7++) {
    for (let t15 = 0; t15 < 3; t15++) r9[h5++] = n10[i7][t15];
    i7 > 0 && (l3[u6++] = i7 - 1, l3[u6++] = i7);
  }
  const a4 = [["position", new t7(r9, l3, 3, true)]];
  if (o8 && o8.length === n10.length && 3 === o8[0].length) {
    const t15 = n5(3 * o8.length);
    let e9 = 0;
    for (let s8 = 0; s8 < n10.length; s8++) for (let n11 = 0; n11 < 3; n11++) t15[e9++] = o8[s8][n11];
    a4.push(["normal", new t7(t15, l3, 3, true)]);
  }
  if (e8 && a4.push(["color", new t7(e8, A2(e8.length / 4), 4)]), s7 && s7.length === n10.length) {
    const t15 = x4(s7, 1);
    a4.push(["timeStamps", new t7(t15, l3, z2, true)]);
  }
  return new m3(t14, a4, null, 2);
}
function At(t14, n10, o8, e8, s7, r9 = 0) {
  const l3 = new Array(18), h5 = [[-o8, r9, s7 / 2], [e8, r9, s7 / 2], [0, n10 + r9, s7 / 2], [-o8, r9, -s7 / 2], [e8, r9, -s7 / 2], [0, n10 + r9, -s7 / 2]], u6 = [0, 1, 2, 3, 0, 2, 2, 5, 3, 1, 4, 5, 5, 2, 1, 1, 0, 3, 3, 4, 1, 4, 3, 5];
  for (let a4 = 0; a4 < 6; a4++) l3[3 * a4] = h5[a4][0], l3[3 * a4 + 1] = h5[a4][1], l3[3 * a4 + 2] = h5[a4][2];
  return new m3(t14, [["position", new t7(l3, u6, 3, true)]]);
}
function yt(n10, o8) {
  const e8 = n10.getMutableAttribute("position").data;
  for (let s7 = 0; s7 < e8.length; s7 += 3) {
    const n11 = e8[s7], r9 = e8[s7 + 1], l3 = e8[s7 + 2];
    o2(It, n11, r9, l3), E3(It, It, o8), e8[s7] = It[0], e8[s7 + 1] = It[1], e8[s7 + 2] = It[2];
  }
}
function bt(t14, n10 = t14) {
  const o8 = t14.attributes, e8 = o8.get("position").data, s7 = o8.get("normal").data;
  if (s7) {
    const t15 = n10.getMutableAttribute("normal").data;
    for (let n11 = 0; n11 < s7.length; n11 += 3) {
      const o9 = s7[n11 + 1];
      t15[n11 + 1] = -s7[n11 + 2], t15[n11 + 2] = o9;
    }
  }
  if (e8) {
    const t15 = n10.getMutableAttribute("position").data;
    for (let n11 = 0; n11 < e8.length; n11 += 3) {
      const o9 = e8[n11 + 1];
      t15[n11 + 1] = -e8[n11 + 2], t15[n11 + 2] = o9;
    }
  }
}
function jt(t14, n10, e8, s7, r9) {
  return !(Math.abs(P(n10, t14)) > r9) && (_2(e8, t14, n10), A(e8, e8), _2(s7, e8, t14), A(s7, s7), true);
}
function dt(t14, n10, o8, e8, s7, r9, l3) {
  return jt(t14, n10, s7, r9, l3) || jt(t14, o8, s7, r9, l3) || jt(t14, e8, s7, r9, l3);
}
var vt = 0.99619469809;
var It = n();

// node_modules/@arcgis/core/core/libs/gl-matrix-2/types/mat4.js
function n9(n10) {
  return n10 instanceof Float32Array && n10.length >= 16;
}
function r8(n10) {
  return Array.isArray(n10) && n10.length >= 16;
}
function t12(t14) {
  return n9(t14) || r8(t14);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechnique.js
var d4 = class extends m5 {
  constructor(r9, t14) {
    super(r9, t14, new t10(H, () => import("./HUDMaterial.glsl-6EUVQWZH.js")), t5([v2, g6()].map(t4))), this.primitiveType = t14.occlusionPass ? _3.POINTS : _3.TRIANGLE_STRIP;
  }
  initializePipeline(e8) {
    const { oitPass: r9, hasPolygonOffset: o8, draped: s7, output: i7, depthTestEnabled: u6, occlusionPass: a4 } = e8, m7 = u6 && !s7 && !(1 === r9) && !a4 && !(9 === i7);
    return T({ blending: o4(i7) ? a3(r9, true) : null, depthTest: u6 && !s7 ? { func: 515 } : null, depthWrite: m7 ? c3 : null, drawBuffers: d2(r9, i7), colorWrite: d, polygonOffset: o8 ? h4 : null });
  }
};
var h4 = { factor: 0, units: -4 };
var v2 = Q().vec2u8("uv0", { glNormalized: true });
var b3 = Q().vec3f("position").vec3f("normal").vec4i16("uvi").vec4u8("color").vec2f("size").f32("rotation").vec4f("centerOffsetAndDistance").vec4f("featureAttribute");
var j3 = b3.clone().vec4u8("olidColor");
function g6() {
  return e6() ? j3 : b3;
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechniqueConfiguration.js
var i6 = class extends e5 {
  constructor(e8) {
    super(), this.spherical = e8, this.screenCenterOffsetUnitsEnabled = false, this.occlusionTestEnabled = true, this.signedDistanceFieldEnabled = false, this.sampleSignedDistanceFieldTexelCenter = false, this.hasVVSize = false, this.hasVVColor = false, this.hasVerticalOffset = false, this.hasScreenSizePerspective = false, this.hasRotation = false, this.debugDrawLabelBorder = false, this.hasPolygonOffset = false, this.depthTestEnabled = true, this.pixelSnappingEnabled = true, this.draped = false, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.occlusionPass = false, this.occludedFragmentFade = false, this.horizonCullingEnabled = true, this.isFocused = true, this.olidColorInstanced = false, this.textureCoordinateType = 0, this.emissionSource = 0, this.discardInvisibleFragments = true, this.hasVVInstancing = false, this.snowCover = false;
  }
};
__decorate([i3()], i6.prototype, "screenCenterOffsetUnitsEnabled", void 0), __decorate([i3()], i6.prototype, "occlusionTestEnabled", void 0), __decorate([i3()], i6.prototype, "signedDistanceFieldEnabled", void 0), __decorate([i3()], i6.prototype, "sampleSignedDistanceFieldTexelCenter", void 0), __decorate([i3()], i6.prototype, "hasVVSize", void 0), __decorate([i3()], i6.prototype, "hasVVColor", void 0), __decorate([i3()], i6.prototype, "hasVerticalOffset", void 0), __decorate([i3()], i6.prototype, "hasScreenSizePerspective", void 0), __decorate([i3()], i6.prototype, "hasRotation", void 0), __decorate([i3()], i6.prototype, "debugDrawLabelBorder", void 0), __decorate([i3()], i6.prototype, "hasPolygonOffset", void 0), __decorate([i3()], i6.prototype, "depthTestEnabled", void 0), __decorate([i3()], i6.prototype, "pixelSnappingEnabled", void 0), __decorate([i3()], i6.prototype, "draped", void 0), __decorate([i3()], i6.prototype, "terrainDepthTest", void 0), __decorate([i3()], i6.prototype, "cullAboveTerrain", void 0), __decorate([i3()], i6.prototype, "occlusionPass", void 0), __decorate([i3()], i6.prototype, "occludedFragmentFade", void 0), __decorate([i3()], i6.prototype, "horizonCullingEnabled", void 0), __decorate([i3()], i6.prototype, "isFocused", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js
var ie = class extends s6 {
  constructor(e8, t14) {
    super(e8, Ve), this.produces = /* @__PURE__ */ new Map([[13, (e9) => x3(e9) && !this.parameters.drawAsLabel], [14, (e9) => x3(e9) && this.parameters.drawAsLabel], [12, () => this.parameters.occlusionTest], [18, (e9) => this.parameters.draped && x3(e9)]]), this._visible = true, this._configuration = new i6(t14);
  }
  getConfiguration(e8, t14) {
    const i7 = this.parameters.draped;
    return super.getConfiguration(e8, t14, this._configuration), this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.hasVerticalOffset = !!this.parameters.verticalOffset, this._configuration.hasScreenSizePerspective = !!this.parameters.screenSizePerspective, this._configuration.screenCenterOffsetUnitsEnabled = "screen" === this.parameters.centerOffsetUnits, this._configuration.hasPolygonOffset = this.parameters.polygonOffset, this._configuration.draped = i7, this._configuration.occlusionTestEnabled = this.parameters.occlusionTest, this._configuration.pixelSnappingEnabled = this.parameters.pixelSnappingEnabled, this._configuration.signedDistanceFieldEnabled = this.parameters.textureIsSignedDistanceField, this._configuration.sampleSignedDistanceFieldTexelCenter = this.parameters.sampleSignedDistanceFieldTexelCenter, this._configuration.hasRotation = this.parameters.hasRotation, this._configuration.hasVVSize = !!this.parameters.vvSize, this._configuration.hasVVColor = !!this.parameters.vvColor, this._configuration.occlusionPass = 12 === t14.slot, this._configuration.occludedFragmentFade = !i7 && this.parameters.occludedFragmentFade, this._configuration.horizonCullingEnabled = this.parameters.horizonCullingEnabled, this._configuration.isFocused = this.parameters.isFocused, this._configuration.depthTestEnabled = this.parameters.depthEnabled || 12 === t14.slot, o4(e8) && (this._configuration.debugDrawLabelBorder = !!t9.LABELS_SHOW_BORDER), this._configuration.oitPass = t14.oitPass, this._configuration.terrainDepthTest = t14.terrainDepthTest, this._configuration.cullAboveTerrain = t14.cullAboveTerrain, this._configuration;
  }
  intersect(e8, t14, s7, a4, n10, o8) {
    const { options: { selectionMode: l3, hud: c5, excludeLabels: v3 }, point: x5, camera: S2 } = s7, { parameters: y4 } = this;
    if (!l3 || !c5 || v3 && y4.isLabel || !e8.visible || !x5 || !S2) return;
    const z3 = e8.attributes.get("featureAttribute"), P3 = null == z3 ? null : u3(z3.data, Oe), { scaleX: j4, scaleY: M3 } = Re(P3, y4, S2.pixelRatio);
    n2(ge, t14), e8.attributes.has("featureAttribute") && ne(ge);
    const V2 = e8.attributes.get("position"), D3 = e8.attributes.get("size"), R4 = e8.attributes.get("normal"), A5 = e8.attributes.get("rotation"), C = e8.attributes.get("centerOffsetAndDistance");
    s5(V2.size >= 3);
    const w3 = B(y4), F4 = "screen" === this.parameters.centerOffsetUnits;
    for (let i7 = 0; i7 < V2.data.length / V2.size; i7++) {
      const e9 = i7 * V2.size;
      o2(ce, V2.data[e9], V2.data[e9 + 1], V2.data[e9 + 2]), E3(ce, ce, t14), E3(ce, ce, S2.viewMatrix);
      const a5 = i7 * C.size;
      if (o2(Se, C.data[a5], C.data[a5 + 1], C.data[a5 + 2]), !F4 && (ce[0] += Se[0], ce[1] += Se[1], 0 !== Se[2])) {
        const e10 = Se[2];
        A(Se, ce), c2(ce, ce, g3(Se, Se, e10));
      }
      const n11 = i7 * R4.size;
      if (o2(ue, R4.data[n11], R4.data[n11 + 1], R4.data[n11 + 2]), ae2(ue, ge, S2, ze), Ae(this.parameters, ce, ze, S2, le), S2.applyProjection(ce, fe), fe[0] > -1) {
        F4 && (Se[0] || Se[1]) && (fe[0] += Se[0] * S2.pixelRatio, 0 !== Se[1] && (fe[1] += le.alignmentEvaluator.apply(Se[1]) * S2.pixelRatio), S2.unapplyProjection(fe, ce)), fe[0] += this.parameters.screenOffset[0] * S2.pixelRatio, fe[1] += this.parameters.screenOffset[1] * S2.pixelRatio, fe[0] = Math.floor(fe[0]), fe[1] = Math.floor(fe[1]);
        const e10 = i7 * D3.size;
        je[0] = D3.data[e10], je[1] = D3.data[e10 + 1], le.evaluator.applyVec2(je, je);
        const t15 = _e * S2.pixelRatio;
        let a6 = 0;
        if (y4.textureIsSignedDistanceField) {
          a6 = Math.min(y4.outlineSize, 0.5 * je[0]) * S2.pixelRatio / 2;
        }
        je[0] *= j4, je[1] *= M3;
        const n12 = i7 * A5.size, l4 = y4.rotation + A5.data[n12];
        if (oe(x5, fe[0], fe[1], je, t15, a6, l4, y4, w3)) {
          const e11 = s7.ray;
          if (E3(he, ce, h(ve, S2.viewMatrix)), fe[0] = x5[0], fe[1] = x5[1], S2.unprojectFromRenderScreen(fe, ce)) {
            const t16 = n();
            s4(t16, e11.direction);
            const i8 = 1 / r3(t16);
            g3(t16, t16, i8);
            o8(p(e11.origin, ce) * i8, t16, -1, he);
          }
        }
      }
    }
  }
  intersectDraped(e8, t14, i7, s7, r9) {
    const a4 = e8.attributes.get("position"), n10 = e8.attributes.get("size"), o8 = e8.attributes.get("rotation"), l3 = this.parameters, c5 = B(l3), u6 = e8.attributes.get("featureAttribute"), f2 = null == u6 ? null : u3(u6.data, Oe), { scaleX: p3, scaleY: h5 } = Re(f2, l3, e8.screenToWorldRatio), m7 = Pe * e8.screenToWorldRatio;
    for (let d5 = 0; d5 < a4.data.length / a4.size; d5++) {
      const t15 = d5 * a4.size, u7 = a4.data[t15], f3 = a4.data[t15 + 1], g7 = d5 * n10.size;
      je[0] = n10.data[g7], je[1] = n10.data[g7 + 1];
      let b4 = 0;
      if (l3.textureIsSignedDistanceField) {
        b4 = Math.min(l3.outlineSize, 0.5 * je[0]) * e8.screenToWorldRatio / 2;
      }
      je[0] *= p3, je[1] *= h5;
      const v3 = d5 * o8.size, x5 = l3.rotation + o8.data[v3];
      oe(i7, u7, f3, je, m7, b4, x5, l3, c5) && s7(r9.distance, r9.normal, -1);
    }
  }
  createBufferWriter() {
    return new De();
  }
  applyShaderOffsetsView(e8, t14, i7, s7, r9, a4, n10) {
    const o8 = ae2(t14, i7, r9, ze);
    return this._applyVerticalGroundOffsetView(e8, o8, r9, n10), Ae(this.parameters, n10, o8, r9, a4), this._applyPolygonOffsetView(n10, o8, s7[3], r9, n10), this._applyCenterOffsetView(n10, s7, n10), n10;
  }
  applyShaderOffsetsNDC(e8, t14, i7, s7, r9) {
    return this._applyCenterOffsetNDC(e8, t14, i7, s7), null != r9 && s4(r9, s7), this._applyPolygonOffsetNDC(s7, t14, i7, s7), s7;
  }
  _applyPolygonOffsetView(t14, i7, s7, r9, a4) {
    const n10 = r9.aboveGround ? 1 : -1;
    let o8 = Math.sign(s7);
    0 === o8 && (o8 = n10);
    const l3 = n10 * o8;
    if (this.parameters.shaderPolygonOffset <= 0) return s4(a4, t14);
    const c5 = r(Math.abs(i7.cosAngle), 0.01, 1), u6 = 1 - Math.sqrt(1 - c5 * c5) / c5 / r9.viewport[2];
    return g3(a4, t14, l3 > 0 ? u6 : 1 / u6), a4;
  }
  _applyVerticalGroundOffsetView(e8, t14, i7, s7) {
    const r9 = r3(e8), a4 = i7.aboveGround ? 1 : -1, n10 = i7.computeRenderPixelSizeAtDist(r9) * p2, o8 = g3(ce, t14.normal, a4 * n10);
    return u4(s7, e8, o8), s7;
  }
  _applyCenterOffsetView(e8, t14, i7) {
    const s7 = "screen" !== this.parameters.centerOffsetUnits;
    return i7 !== e8 && s4(i7, e8), s7 && (i7[0] += t14[0], i7[1] += t14[1], t14[2] && (A(ue, i7), R(i7, i7, g3(ue, ue, t14[2])))), i7;
  }
  _applyCenterOffsetNDC(e8, t14, i7, s7) {
    const r9 = "screen" !== this.parameters.centerOffsetUnits;
    return s7 !== e8 && s4(s7, e8), r9 || (s7[0] += t14[0] / i7.fullWidth * 2, s7[1] += t14[1] / i7.fullHeight * 2), s7;
  }
  _applyPolygonOffsetNDC(e8, t14, i7, s7) {
    const r9 = this.parameters.shaderPolygonOffset;
    if (e8 !== s7 && s4(s7, e8), r9) {
      const e9 = i7.aboveGround ? 1 : -1, a4 = e9 * Math.sign(t14[3]);
      s7[2] -= (a4 || e9) * r9;
    }
    return s7;
  }
  set visible(e8) {
    this._visible = e8;
  }
  get visible() {
    const { color: e8, outlineSize: t14, outlineColor: i7 } = this.parameters, s7 = e8[3] >= o5 || t14 >= o5 && i7[3] >= o5;
    return this._visible && s7;
  }
  createGLMaterial(e8) {
    return new se(e8);
  }
  calculateRelativeScreenBounds(e8, t14, i7 = i()) {
    return re(this.parameters, e8, t14, i7), i7[2] = i7[0] + e8[0], i7[3] = i7[1] + e8[1], i7;
  }
};
var se = class extends r6 {
  constructor(e8) {
    super({ ...e8, ...e8.material.parameters });
  }
  beginSlot(e8) {
    return this.updateTexture(this._material.parameters.textureId), this._material.setParameters(this.textureBindParameters), this.getTechnique(d4, e8);
  }
};
function re(e8, t14, i7, s7) {
  s7[0] = e8.anchorPosition[0] * -t14[0] + e8.screenOffset[0] * i7, s7[1] = e8.anchorPosition[1] * -t14[1] + e8.screenOffset[1] * i7;
}
function ae2(e8, t14, s7, r9) {
  return t12(t14) && (t14 = n2(be, t14)), N(r9.normal, e8, t14), E3(r9.normal, r9.normal, s7.viewInverseTransposeMatrix), r9.cosAngle = P(pe, Me), r9;
}
function ne(e8) {
  const t14 = e8[0], i7 = e8[1], s7 = e8[2], r9 = e8[3], a4 = e8[4], n10 = e8[5], o8 = e8[6], l3 = e8[7], c5 = e8[8], u6 = 1 / Math.sqrt(t14 * t14 + i7 * i7 + s7 * s7), f2 = 1 / Math.sqrt(r9 * r9 + a4 * a4 + n10 * n10), p3 = 1 / Math.sqrt(o8 * o8 + l3 * l3 + c5 * c5);
  return e8[0] = t14 * u6, e8[1] = i7 * u6, e8[2] = s7 * u6, e8[3] = r9 * f2, e8[4] = a4 * f2, e8[5] = n10 * f2, e8[6] = o8 * p3, e8[7] = l3 * p3, e8[8] = c5 * p3, e8;
}
function oe(e8, i7, s7, r9, a4, l3, c5, u6, f2) {
  let p3 = i7 - a4 - r9[0] * f2[0], h5 = p3 + r9[0] + 2 * a4, m7 = s7 - a4 - r9[1] * f2[1], d5 = m7 + r9[1] + 2 * a4;
  const g7 = u6.distanceFieldBoundingBox;
  return u6.textureIsSignedDistanceField && null != g7 && (p3 += r9[0] * g7[0], m7 += r9[1] * g7[1], h5 -= r9[0] * (1 - g7[2]), d5 -= r9[1] * (1 - g7[3]), p3 -= l3, h5 += l3, m7 -= l3, d5 += l3), o(de, i7, s7), I(me, e8, de, s(c5)), me[0] > p3 && me[0] < h5 && me[1] > m7 && me[1] < d5;
}
var le = new i4();
var ce = n();
var ue = n();
var fe = n3();
var pe = n();
var he = n();
var me = n4();
var de = n4();
var ge = e();
var be = e();
var ve = e2();
var xe = n3();
var Se = n();
var ye = n();
var Oe = n3();
var ze = { normal: pe, cosAngle: 0 };
var _e = 1;
var Pe = 2;
var je = r4(0, 0);
var Me = r2(0, 0, 1);
var Ve = class extends l2 {
  constructor() {
    super(...arguments), this.renderOccluded = 1, this.isDecoration = false, this.color = e4(1, 1, 1, 1), this.polygonOffset = false, this.anchorPosition = r4(0.5, 0.5), this.screenOffset = [0, 0], this.shaderPolygonOffset = 1e-5, this.textureIsSignedDistanceField = false, this.sampleSignedDistanceFieldTexelCenter = false, this.outlineColor = e4(1, 1, 1, 1), this.outlineSize = 0, this.distanceFieldBoundingBox = n3(), this.rotation = 0, this.hasRotation = false, this.vvSizeEnabled = false, this.vvSize = null, this.vvColor = null, this.vvOpacity = null, this.vvSymbolAnchor = null, this.vvSymbolRotationMatrix = null, this.hasSlicePlane = false, this.pixelSnappingEnabled = true, this.occlusionTest = true, this.occludedFragmentFade = false, this.horizonCullingEnabled = false, this.centerOffsetUnits = "world", this.drawAsLabel = false, this.depthEnabled = true, this.isFocused = true, this.focusStyle = "bright", this.draped = false, this.isLabel = false;
  }
  get hasVVSize() {
    return !!this.vvSize;
  }
  get hasVVColor() {
    return !!this.vvColor;
  }
  get hasVVOpacity() {
    return !!this.vvOpacity;
  }
};
var De = class {
  constructor() {
    this.layout = v2, this.instanceLayout = g6();
  }
  elementCount(e8) {
    return e8.get("position").indices.length;
  }
  elementCountBaseInstance(e8) {
    return e8.get("uv0").indices.length;
  }
  write(e8, t14, i7, s7, r9, a4) {
    const { position: n10, normal: o8, color: l3, size: c5, rotation: u6, centerOffsetAndDistance: f2, featureAttribute: p3, uvi: h5 } = r9;
    z(i7.get("position"), e8, n10, a4), S(i7.get("normal"), t14, o8, a4);
    const m7 = i7.get("position").indices.length;
    let d5 = 0, g7 = 0, b4 = U3, v3 = U3;
    const x5 = i7.get("uvi")?.data;
    x5 && x5.length >= 4 && (d5 = x5[0], g7 = x5[1], b4 = x5[2], v3 = x5[3]);
    for (let S2 = 0; S2 < m7; ++S2) {
      const e9 = a4 + S2;
      h5.setValues(e9, d5, g7, b4, v3);
    }
    if (N2(i7.get("color"), 4, l3, a4), m4(i7.get("size"), c5, a4), b(i7.get("rotation"), u6, a4), i7.get("centerOffsetAndDistance") ? h2(i7.get("centerOffsetAndDistance"), f2, a4) : F(f2, a4, m7), i7.get("featureAttribute") ? h2(i7.get("featureAttribute"), p3, a4) : F(p3, a4, m7), null != s7) {
      const e9 = i7.get("position")?.indices;
      if (e9) {
        const t15 = e9.length, i8 = r9.getField("olidColor", g4);
        M(s7, i8, t15, a4);
      }
    }
    return { numVerticesPerItem: 1, numItems: m7 };
  }
  writeBaseInstance(e8, t14) {
    const { uv0: i7 } = t14;
    m4(e8.get("uv0"), i7, 0);
  }
  intersect(e8, t14, i7, s7, a4, n10, o8) {
    const { options: { selectionMode: l3, hud: c5, excludeLabels: x5 }, point: S2, camera: y4 } = s7;
    if (!l3 || !c5 || x5 && t14.isLabel || !S2) return;
    const z3 = this.instanceLayout.createView(e8), { position: _5, normal: P3, rotation: j4, size: M3, featureAttribute: V2, centerOffsetAndDistance: D3 } = z3, R4 = "screen" === t14.centerOffsetUnits, A5 = B(t14);
    if (null == _5 || null == P3 || null == j4 || null == M3 || null == D3 || null == y4) return;
    const C = null == V2 ? null : V2.getVec(0, Oe), { scaleX: w3, scaleY: F4 } = Re(C, t14, y4.pixelRatio), T3 = _5.count;
    for (let L2 = 0; L2 < T3; L2++) {
      if (_5.getVec(L2, ce), null != i7 && u4(ce, ce, i7), E3(ce, ce, y4.viewMatrix), D3.getVec(L2, xe), o2(Se, xe[0], xe[1], xe[2]), !R4 && (ce[0] += Se[0], ce[1] += Se[1], 0 !== Se[2])) {
        const e9 = Se[2];
        A(Se, ce), c2(ce, ce, g3(Se, Se, e9));
      }
      if (P3.getVec(L2, ue), ae2(ue, ge, y4, ze), Ae(t14, ce, ze, y4, le), y4.applyProjection(ce, fe), fe[0] > -1) {
        R4 && (Se[0] || Se[1]) && (fe[0] += Se[0] * y4.pixelRatio, 0 !== Se[1] && (fe[1] += le.alignmentEvaluator.apply(Se[1]) * y4.pixelRatio), y4.unapplyProjection(fe, ce)), fe[0] += t14.screenOffset[0] * y4.pixelRatio, fe[1] += t14.screenOffset[1] * y4.pixelRatio, fe[0] = Math.floor(fe[0]), fe[1] = Math.floor(fe[1]), M3.getVec(L2, je), le.evaluator.applyVec2(je, je);
        const e9 = _e * y4.pixelRatio;
        let i8 = 0;
        if (t14.textureIsSignedDistanceField) {
          i8 = Math.min(t14.outlineSize, 0.5 * je[0]) * y4.pixelRatio / 2;
        }
        je[0] *= w3, je[1] *= F4;
        const a5 = j4.get(L2), n11 = t14.rotation + a5;
        if (oe(S2, fe[0], fe[1], je, e9, i8, n11, t14, A5)) {
          const e10 = s7.ray;
          if (E3(he, ce, h(ve, y4.viewMatrix)), fe[0] = S2[0], fe[1] = S2[1], y4.unprojectFromRenderScreen(fe, ce)) {
            const t15 = n();
            s4(t15, e10.direction);
            const i9 = 1 / r3(t15);
            g3(t15, t15, i9);
            o8(p(e10.origin, ce) * i9, t15, L2, he);
          }
        }
      }
    }
  }
};
function Re(e8, t14, i7) {
  return null == e8 || null == t14.vvSize ? { scaleX: i7, scaleY: i7 } : (tt(ye, t14, e8), { scaleX: ye[0] * i7, scaleY: ye[1] * i7 });
}
function Ae(e8, t14, i7, s7, r9) {
  if (!e8.verticalOffset?.screenLength) {
    const s8 = r3(t14);
    return r9.update(i7.cosAngle, s8, e8.screenSizePerspective, e8.screenSizePerspectiveMinPixelReferenceSize, e8.screenSizePerspectiveAlignment, null), t14;
  }
  const a4 = r3(t14), n10 = e8.screenSizePerspectiveAlignment ?? e8.screenSizePerspective, o8 = i5(s7, a4, e8.verticalOffset, i7.cosAngle, n10, e8.screenSizePerspectiveMinPixelReferenceSize);
  return r9.update(i7.cosAngle, a4, e8.screenSizePerspective, e8.screenSizePerspectiveMinPixelReferenceSize, e8.screenSizePerspectiveAlignment, null), g3(i7.normal, i7.normal, o8), u4(t14, t14, i7.normal);
}

// node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js
function t13(t14) {
  return "point" === t14.type;
}

export {
  w,
  U4 as U,
  A3 as A,
  D,
  Z,
  k2 as k,
  E4 as E,
  G2 as G,
  n7 as n,
  f,
  E5 as E2,
  Q2 as Q,
  rt,
  lt,
  ht,
  ut,
  at,
  pt,
  ft,
  wt,
  gt,
  mt,
  Mt,
  At,
  yt,
  bt,
  dt,
  ie,
  t13 as t
};
//# sourceMappingURL=chunk-KDOWKZ3H.js.map
