import {
  _ as _2
} from "./chunk-K5O7EA6J.js";
import "./chunk-NFPLS75J.js";
import "./chunk-WVAXXVEK.js";
import "./chunk-NJSGYS3K.js";
import "./chunk-A7O5R67Z.js";
import {
  o as o4
} from "./chunk-SL3GC7WV.js";
import {
  l as l3
} from "./chunk-CJZPTLIZ.js";
import {
  c as c3,
  u as u5
} from "./chunk-WQT2KLDB.js";
import {
  d
} from "./chunk-UVDECGZC.js";
import {
  o as o3,
  s as s4
} from "./chunk-VKFTCFFM.js";
import {
  s as s5
} from "./chunk-ZETARPSI.js";
import {
  b2,
  d as d2,
  y as y2
} from "./chunk-CZOYDK6P.js";
import {
  j
} from "./chunk-6TCXGIIN.js";
import {
  l
} from "./chunk-NP2TBOXH.js";
import "./chunk-HROH5C5D.js";
import "./chunk-H34D76ZQ.js";
import {
  b,
  x as x2
} from "./chunk-GVMCGYZ6.js";
import {
  e as e2
} from "./chunk-JHV6OBEB.js";
import "./chunk-LPUPM55U.js";
import "./chunk-CBCHZD3F.js";
import {
  Z
} from "./chunk-2HGIYEIL.js";
import "./chunk-Z6VKIQV2.js";
import "./chunk-ET5EDAFM.js";
import {
  A,
  Q,
  c as c2,
  e,
  i as i3,
  s as s3,
  u as u3
} from "./chunk-VYMBX5H5.js";
import {
  a as a4
} from "./chunk-5ONGWFJ3.js";
import {
  m as m2
} from "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import {
  t
} from "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import {
  n2 as n4,
  q
} from "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-C5OQVQZF.js";
import {
  j as j2
} from "./chunk-U3X2LY5C.js";
import "./chunk-JRCD3NNE.js";
import "./chunk-NPYFNHY2.js";
import "./chunk-JW6DU3OK.js";
import "./chunk-CNYNCKEV.js";
import "./chunk-XL5QPCXN.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-W75DBJD7.js";
import "./chunk-QF7FRVN6.js";
import {
  b as b3
} from "./chunk-P6IKJIMO.js";
import {
  m as m3
} from "./chunk-MHV23XAQ.js";
import {
  i as i2
} from "./chunk-LPZUGJNG.js";
import {
  n
} from "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import {
  l as l2
} from "./chunk-T7F6Q6JJ.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import {
  n as n3,
  r as r2,
  u
} from "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import {
  c,
  u as u2
} from "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import {
  u as u4
} from "./chunk-CCQFL76O.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import {
  o as o2,
  r
} from "./chunk-SMWUT52Z.js";
import {
  _
} from "./chunk-AXZMNHTN.js";
import {
  f as f3
} from "./chunk-5T3MJDSR.js";
import {
  T
} from "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import {
  f as f2,
  y2 as y
} from "./chunk-V2H77UEV.js";
import {
  s as s2
} from "./chunk-WRA2WBYC.js";
import {
  o
} from "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import {
  n as n2
} from "./chunk-XXLHAM2M.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a as a2,
  a2 as a3,
  x
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  f2 as f
} from "./chunk-GNMPGHLQ.js";
import {
  a,
  i3 as i,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/graphic/isVoxelGraphicOrigin.js
var i4 = Symbol("isVoxelGraphicOrigin");

// node_modules/@arcgis/core/graphic/VoxelGraphicOrigin.js
var s6;
var o5 = class extends s4 {
  get [(s6 = i4, n4)]() {
    return this.layer;
  }
  get [o3]() {
    return this.layer;
  }
  constructor(r4) {
    super(), this[s6] = true, this.type = "voxel", this.layer = r4;
  }
  get id() {
    return this.layer.id;
  }
};

// node_modules/@arcgis/core/layers/voxel/voxelPlaneUtils.js
var f4 = n3();
var l4 = e2();
var u6 = e2();
var p = e2();
var h = r2(0, 0, 1);
var j3 = r2(0, 1, 0);
var x3 = r2(1, 0, 0);
function b4(r4) {
  s3(f4, r4), A(f4, f4);
  const a7 = Math.atan2(f4[1], f4[0]), s11 = b(e2(), h, -a7);
  Q(f4, f4, s11);
  const i6 = -1 * Math.atan2(f4[2], f4[0]);
  return [c(a7) + 270, c(i6) + 90];
}
function g(o6, a7) {
  return b(u6, h, u2(o6 - 270)), b(p, j3, u2(a7 - 90)), x2(l4, u6, p), s3(f4, x3), Q(f4, f4, l4), A(f4, f4), [f4[0], f4[1], f4[2]];
}

// node_modules/@arcgis/core/layers/voxel/VoxelSlice.js
var m4 = class extends l2(n2) {
  constructor(o6) {
    super(o6), this.enabled = true, this.label = "", this.normal = null, this.point = null;
  }
  get orientation() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o6, r4] = b4(this.normal);
    return a4.normalize(a2(o6), 0, true);
  }
  set orientation(o6) {
    const r4 = g(o6, this.tilt);
    this._set("normal", r4), this._set("orientation", o6);
  }
  get tilt() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o6, r4] = b4(this.normal);
    return a4.normalize(a2(r4), 0, true);
  }
  set tilt(o6) {
    const r4 = g(this.orientation, o6);
    this._set("normal", r4), this._set("tilt", o6);
  }
};
__decorate([m({ type: Boolean, json: { write: true } })], m4.prototype, "enabled", void 0), __decorate([m({ type: String, json: { write: true } })], m4.prototype, "label", void 0), __decorate([m({ type: Number, json: { read: false }, clonable: false, range: { min: 0, max: 360 } }), s2((o6) => a4.normalize(a2(o6), 0, true))], m4.prototype, "orientation", null), __decorate([m({ type: Number, json: { read: false }, clonable: false, range: { min: 0, max: 360 } }), s2((o6) => a4.normalize(a2(o6), 0, true))], m4.prototype, "tilt", null), __decorate([m({ type: [Number], json: { write: { isRequired: true } } })], m4.prototype, "normal", void 0), __decorate([m({ type: [Number], json: { write: { isRequired: true } } })], m4.prototype, "point", void 0), m4 = __decorate([a3("esri.layers.voxel.VoxelSlice")], m4);

// node_modules/@arcgis/core/layers/voxel/VoxelSection.js
var d3 = class extends l2(n2) {
  constructor() {
    super(...arguments), this.enabled = true, this.href = null, this.id = null, this.label = "", this.normal = null, this.point = null, this.sizeInPixel = null, this.slices = null, this.timeId = 0, this.variableId = null;
  }
  get orientation() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [e3, r4] = b4(this.normal);
    return a4.normalize(a2(e3), 0, true);
  }
  get tilt() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [e3, r4] = b4(this.normal);
    return a4.normalize(a2(r4), 0, true);
  }
};
__decorate([m({ type: Boolean, json: { default: true, write: true } })], d3.prototype, "enabled", void 0), __decorate([m({ type: String, json: { origins: { service: { read: f2 }, "web-scene": { write: { isRequired: true } } }, write: true } }), j2({ origins: ["web-scene"], type: "resource", prefix: "sections", compress: true })], d3.prototype, "href", void 0), __decorate([m({ type: x, json: { write: { enabled: true, isRequired: true } } })], d3.prototype, "id", void 0), __decorate([m({ type: String, json: { write: true } })], d3.prototype, "label", void 0), __decorate([m({ type: Number, clonable: false, readOnly: true, range: { min: 0, max: 360 } })], d3.prototype, "orientation", null), __decorate([m({ type: Number, clonable: false, readOnly: true, range: { min: 0, max: 360 } })], d3.prototype, "tilt", null), __decorate([m({ type: [Number], json: { write: { enabled: true, isRequired: true } } })], d3.prototype, "normal", void 0), __decorate([m({ type: [Number], json: { write: { enabled: true, isRequired: true } } })], d3.prototype, "point", void 0), __decorate([m({ type: [x], json: { write: { enabled: true, isRequired: true } } })], d3.prototype, "sizeInPixel", void 0), __decorate([m({ type: [m4], json: { write: true } })], d3.prototype, "slices", void 0), __decorate([m({ type: x, json: { default: 0, write: true } })], d3.prototype, "timeId", void 0), __decorate([m({ type: x, json: { write: { enabled: true, isRequired: true } } })], d3.prototype, "variableId", void 0), d3 = __decorate([a3("esri.layers.voxel.VoxelSection")], d3);

// node_modules/@arcgis/core/layers/voxel/VoxelSimpleShading.js
var s7 = class extends n2 {
  constructor() {
    super(...arguments), this.diffuseFactor = 0.5, this.specularFactor = 0.5;
  }
};
__decorate([m({ type: Number, range: { min: 0, max: 1 }, json: { default: 0.5, write: true } })], s7.prototype, "diffuseFactor", void 0), __decorate([m({ type: Number, range: { min: 0, max: 1 }, json: { default: 0.5, write: true } })], s7.prototype, "specularFactor", void 0), s7 = __decorate([a3("esri.layers.voxel.VoxelSimpleShading")], s7);

// node_modules/@arcgis/core/layers/voxel/VoxelFormat.js
var s8 = class extends n2 {
  constructor() {
    super(...arguments), this.continuity = null, this.hasNoData = false, this.noData = 0, this.offset = 0, this.scale = 1, this.type = null;
  }
};
__decorate([m({ type: ["discrete", "continuous"], json: { write: true } })], s8.prototype, "continuity", void 0), __decorate([m({ type: Boolean, json: { write: true } })], s8.prototype, "hasNoData", void 0), __decorate([m({ type: Number, json: { write: true } })], s8.prototype, "noData", void 0), __decorate([m({ type: Number, json: { write: true } })], s8.prototype, "offset", void 0), __decorate([m({ type: Number, json: { write: true } })], s8.prototype, "scale", void 0), __decorate([m({ type: String, json: { write: { enabled: true, isRequired: true } } })], s8.prototype, "type", void 0), s8 = __decorate([a3("esri.layers.voxel.VoxelFormat")], s8);
var p2 = s8;

// node_modules/@arcgis/core/layers/voxel/VoxelVariable.js
var s9 = class extends n2 {
  constructor() {
    super(...arguments), this.id = null, this.description = "", this.name = null, this.originalFormat = null, this.renderingFormat = null, this.unit = "", this.volumeId = 0, this.type = null;
  }
};
__decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], s9.prototype, "id", void 0), __decorate([m({ type: String, json: { write: true } })], s9.prototype, "description", void 0), __decorate([m({ type: String, json: { write: { enabled: true, isRequired: true } } })], s9.prototype, "name", void 0), __decorate([m({ type: p2, json: { write: true } })], s9.prototype, "originalFormat", void 0), __decorate([m({ type: p2, json: { write: { enabled: true, isRequired: true } } })], s9.prototype, "renderingFormat", void 0), __decorate([m({ type: String, json: { write: true } })], s9.prototype, "unit", void 0), __decorate([m({ type: Number, json: { write: true } })], s9.prototype, "volumeId", void 0), __decorate([m({ type: ["stc-hot-spot-results", "stc-cluster-outlier-results", "stc-estimated-bin", "generic-nearest-interpolated"], json: { write: true } })], s9.prototype, "type", void 0), s9 = __decorate([a3("esri.layers.voxel.VoxelVariable")], s9);
var p3 = s9;

// node_modules/@arcgis/core/layers/voxel/VoxelIsosurface.js
var l5 = class extends l2(n2) {
  constructor() {
    super(...arguments), this.color = u4.fromArray([0, 0, 0, 0]), this.value = 0, this.enabled = true, this.label = "", this.colorLocked = false;
  }
};
__decorate([m({ type: u4, json: { type: [x], write: { enabled: true, isRequired: true } } })], l5.prototype, "color", void 0), __decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], l5.prototype, "value", void 0), __decorate([m({ type: Boolean, json: { default: true, write: true } })], l5.prototype, "enabled", void 0), __decorate([m({ type: String, json: { write: true } })], l5.prototype, "label", void 0), __decorate([m({ type: Boolean, json: { default: false, write: true } })], l5.prototype, "colorLocked", void 0), l5 = __decorate([a3("esri.layers.voxel.VoxelIsosurface")], l5);

// node_modules/@arcgis/core/layers/voxel/VoxelColorStop.js
var c4 = class extends l2(n2) {
  constructor() {
    super(...arguments), this.color = null, this.position = 0;
  }
};
__decorate([m({ type: u4, json: { type: [x], write: { enabled: true, isRequired: true } } })], c4.prototype, "color", void 0), __decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], c4.prototype, "position", void 0), c4 = __decorate([a3("esri.layers.voxel.VoxelColorStop")], c4);
var l6 = c4;

// node_modules/@arcgis/core/layers/voxel/VoxelOpacityStop.js
var p4 = class extends l2(n2) {
  constructor() {
    super(...arguments), this.opacity = 1, this.position = 0;
  }
};
__decorate([m({ type: Number, json: { name: "alpha", write: { enabled: true, isRequired: true } } })], p4.prototype, "opacity", void 0), __decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], p4.prototype, "position", void 0), p4 = __decorate([a3("esri.layers.voxel.VoxelOpacityStop")], p4);
var i5 = p4;

// node_modules/@arcgis/core/layers/voxel/VoxelRangeFilter.js
var p5 = class extends l2(n2) {
  constructor() {
    super(...arguments), this.enabled = false, this.range = null;
  }
};
__decorate([m({ type: Boolean, json: { default: false, write: true } })], p5.prototype, "enabled", void 0), __decorate([m({ type: [Number], json: { write: { isRequired: true } } })], p5.prototype, "range", void 0), p5 = __decorate([a3("esri.layers.voxel.VoxelRangeFilter")], p5);
var a5 = p5;

// node_modules/@arcgis/core/layers/voxel/VoxelTransferFunctionStyle.js
var u7 = class extends l2(n2) {
  constructor(o6) {
    super(o6), this.interpolation = null, this.stretchRange = null, this.rangeFilter = null, this._colorMapSize = 256, this.colorStops = new (O.ofType(l6))(), this.opacityStops = new (O.ofType(i5))();
  }
  set colorStops(o6) {
    this._set("colorStops", n(o6, this._get("colorStops"), O.ofType(l6)));
  }
  set opacityStops(o6) {
    this._set("opacityStops", n(o6, this._get("opacityStops"), O.ofType(i5)));
  }
  getPreviousNext(o6, t5, r4) {
    let e3 = o6;
    for (; --e3 > 0 && t5[e3].type !== r4 && 3 !== t5[e3].type; ) ;
    let s11 = o6;
    const i6 = t5.length;
    for (; ++s11 < i6 && t5[s11].type !== r4 && 3 !== t5[s11].type; ) ;
    return [e3, s11];
  }
  get rasterizedTransferFunction() {
    const o6 = [];
    if (this.colorStops.length < 2) return o6;
    const r4 = [], e3 = [], s11 = 1e-5;
    for (const t5 of this.colorStops) {
      if (!t5.color) return o6;
      e3.push({ color: { r: t5.color.r, g: t5.color.g, b: t5.color.b, a: Math.round(255 * (1 - t5.color.a)) }, position: t5.position, type: 1 });
    }
    if (0 === this.opacityStops.length) for (const t5 of e3) r4.push({ color: t5.color, position: t5.position });
    else {
      for (const t5 of this.opacityStops) {
        const o8 = r(t5.position, 0, 1), r5 = Math.round(255 * r(1 - t5.opacity, 0, 1));
        let i7 = false;
        for (const t6 of e3) if (1 === t6.type && Math.abs(t6.position - o8) < s11) {
          t6.color.a = r5, t6.type = 3, i7 = true;
          break;
        }
        i7 || e3.push({ color: { r: 0, g: 0, b: 0, a: r5 }, position: t5.position, type: 2 });
      }
      e3.sort((o8, t5) => o8.position < t5.position ? -1 : 1);
      const o7 = e3.length;
      for (let t5 = 0; t5 < o7; ++t5) {
        const r5 = e3[t5];
        if (3 !== r5.type) if (1 === r5.type) {
          const [s12, i7] = this.getPreviousNext(t5, e3, 2);
          if (-1 !== s12 && i7 !== o7) {
            const o8 = (r5.position - e3[s12].position) / (e3[i7].position - e3[s12].position);
            r5.color.a = Math.round(o2(e3[s12].color.a, e3[i7].color.a, o8));
          } else r5.color.a = -1 !== s12 ? e3[s12].color.a : e3[i7].color.a;
        } else {
          const [s12, i7] = this.getPreviousNext(t5, e3, 1);
          if (-1 !== s12 && i7 !== o7) {
            const o8 = (r5.position - e3[s12].position) / (e3[i7].position - e3[s12].position), t6 = e3[s12].color, p11 = e3[i7].color;
            g2.forEach((e4) => {
              r5.color[e4] = Math.round(o2(t6[e4], p11[e4], o8));
            });
          } else -1 !== s12 ? g2.forEach((o8) => {
            r5.color[o8] = e3[s12].color[o8];
          }) : g2.forEach((o8) => {
            r5.color[o8] = e3[i7].color[o8];
          });
        }
      }
      for (const t5 of e3) r4.push({ color: t5.color, position: t5.position });
    }
    r4[0].position = 0, r4[r4.length - 1].position = 1;
    let i6 = 0, l8 = 1;
    for (let c6 = 0; c6 < this._colorMapSize; ++c6) {
      const e4 = c6 / this._colorMapSize;
      for (; e4 > r4[l8].position; ) i6 = l8++;
      const s12 = (e4 - r4[i6].position) / (r4[l8].position - r4[i6].position), a7 = r4[i6].color, h2 = r4[l8].color, f6 = new u4();
      g2.forEach((o7) => {
        f6[o7] = Math.round(o2(a7[o7], h2[o7], s12));
      }), f6.a = r(1 - o2(a7.a, h2.a, s12) / 255, 0, 1), o6.push(f6);
    }
    return o6;
  }
  getColorForContinuousDataValue(o6, t5) {
    const r4 = this.rasterizedTransferFunction;
    if (this.colorStops.length < 2 || !Array.isArray(this.stretchRange) || this.stretchRange.length < 2 || r4.length < 256) return null;
    let e3 = this.stretchRange[0], s11 = this.stretchRange[1];
    if (e3 > s11) {
      const o7 = e3;
      e3 = s11, s11 = o7;
    }
    o6 = r(o6, e3, s11);
    const i6 = r4[Math.round((o6 - e3) / (s11 - e3) * (this._colorMapSize - 1))].clone();
    return t5 || (i6.a = 1), i6;
  }
};
__decorate([m({ type: ["linear", "nearest"], json: { write: true } })], u7.prototype, "interpolation", void 0), __decorate([m({ type: [Number], json: { write: { enabled: true, isRequired: true } } })], u7.prototype, "stretchRange", void 0), __decorate([m({ type: O.ofType(l6), json: { write: { enabled: true, overridePolicy() {
  return { enabled: !!this.colorStops && this.colorStops.length > 0 };
} } } })], u7.prototype, "colorStops", null), __decorate([m({ type: O.ofType(i5), json: { read: { source: "alphaStops" }, write: { enabled: true, target: "alphaStops", overridePolicy() {
  return { enabled: !!this.opacityStops && this.opacityStops.length > 0 };
} } } })], u7.prototype, "opacityStops", null), __decorate([m({ type: a5, json: { write: true } })], u7.prototype, "rangeFilter", void 0), __decorate([m({ type: [u4], clonable: false, json: { read: false } })], u7.prototype, "rasterizedTransferFunction", null), u7 = __decorate([a3("esri.layers.voxel.VoxelTransferFunctionStyle")], u7);
var y3 = u7;
var g2 = ["r", "g", "b"];

// node_modules/@arcgis/core/layers/voxel/VoxelUniqueValue.js
var l7 = class extends l2(n2) {
  constructor() {
    super(...arguments), this.color = u4.fromArray([0, 0, 0, 0]), this.value = 0, this.enabled = true, this.label = "";
  }
};
__decorate([m({ type: u4, json: { type: [x], write: { enabled: true, isRequired: true } } })], l7.prototype, "color", void 0), __decorate([m({ type: x, json: { write: { enabled: true, isRequired: true } } })], l7.prototype, "value", void 0), __decorate([m({ type: Boolean, json: { default: true, write: true } })], l7.prototype, "enabled", void 0), __decorate([m({ type: String, json: { write: true } })], l7.prototype, "label", void 0), l7 = __decorate([a3("esri.layers.voxel.VoxelUniqueValue")], l7);

// node_modules/@arcgis/core/layers/voxel/VoxelVariableStyle.js
var p6;
var c5 = p6 = class extends n2 {
  constructor(e3) {
    super(e3), this.variableId = 0, this.label = "", this.transferFunction = null, this.uniqueValues = null, this.isosurfaces = null, this.uniqueValues = new (O.ofType(l7))(), this.isosurfaces = new (O.ofType(l5))();
  }
  clone() {
    return new p6({ variableId: this.variableId, label: this.label, transferFunction: a(this.transferFunction), uniqueValues: a(this.uniqueValues), isosurfaces: a(this.isosurfaces) });
  }
};
__decorate([m({ type: x, json: { write: { enabled: true, isRequired: true } } })], c5.prototype, "variableId", void 0), __decorate([m({ type: String, json: { write: true } })], c5.prototype, "label", void 0), __decorate([m({ type: y3, json: { write: { enabled: true, overridePolicy() {
  return { enabled: !this.uniqueValues || this.uniqueValues.length < 1 };
} } } })], c5.prototype, "transferFunction", void 0), __decorate([m({ type: O.ofType(l7), json: { write: { enabled: true, overridePolicy() {
  return { enabled: !!this.uniqueValues && this.uniqueValues.length > 0 };
} } } })], c5.prototype, "uniqueValues", void 0), __decorate([m({ type: O.ofType(l5), json: { write: { enabled: true, overridePolicy() {
  const e3 = !this.uniqueValues || this.uniqueValues.length < 1, r4 = !!this.isosurfaces && this.isosurfaces.length > 0;
  return { enabled: e3 && r4 };
} } } })], c5.prototype, "isosurfaces", void 0), c5 = p6 = __decorate([a3("esri.layers.voxel.VoxelVariableStyle")], c5);

// node_modules/@arcgis/core/layers/voxel/NCTimeParser.js
function r3(r4) {
  const e3 = /^(days?|hours?|minutes?|seconds?|d|h|m|s) since (\d{1,4})-(\d{1,2})-(\d{1,2})[ |T](\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[\s|Z]?(([+|\-\s?])(\d{1,2}):(\d{1,2}))?$/i.exec(r4);
  if (null == e3) return { didParse: false };
  const [, t5, s11, a7, d5, n5, i6, u8, N, o6, c6, f6, p11] = e3;
  let $ = "seconds";
  const P = t5.charAt(0).toLowerCase();
  "d" === P ? $ = "days" : "h" === P ? $ = "hours" : "m" === P && ($ = "minutes");
  const m7 = parseInt(s11, 10);
  if (Number.isNaN(m7)) return { didParse: false };
  const b5 = parseInt(a7, 10);
  if (Number.isNaN(b5) || b5 < 1 || b5 > 12) return { didParse: false };
  const I = parseInt(d5, 10);
  if (Number.isNaN(I) || I < 1 || I > 31) return { didParse: false };
  if (2 === b5) {
    const r5 = m7 % 4 == 0 && (m7 % 100 != 0 || m7 % 400 == 0);
    if (r5 && I > 29 || !r5 && I > 28) return { didParse: false };
  } else if ((4 === b5 || 6 === b5 || 9 === b5 || 11 === b5) && I > 30) return { didParse: false };
  const S = parseInt(n5, 10);
  if (Number.isNaN(S) || S < 0 || S > 23) return { didParse: false };
  const l8 = parseInt(i6, 10);
  if (Number.isNaN(l8) || l8 < 0 || l8 > 59) return { didParse: false };
  const h2 = parseInt(u8, 10);
  if (Number.isNaN(h2) || h2 < 0 || h2 > 59) return { didParse: false };
  let w = 1, x4 = 0, y4 = 0;
  if (c6 && (w = "-" === c6 ? -1 : 1), f6) {
    if (x4 = parseInt(f6, 10), Number.isNaN(x4) || x4 < 0) return { didParse: false };
    if (0 !== x4) {
      const r5 = w * x4;
      if (r5 < -12 || r5 > 14) return { didParse: false };
    }
  }
  if (p11 && (y4 = parseInt(p11, 10), Number.isNaN(y4) || y4 < 0 || y4 > 59)) return { didParse: false };
  const T2 = `${m7}`.padStart(4, "0"), Z2 = `${b5}`.padStart(2, "0"), A2 = `${I}`.padStart(2, "0"), C = `${S}`.padStart(2, "0"), D = `${l8}`.padStart(2, "0"), L = `${h2}`.padStart(2, "0");
  let g3 = "Z";
  0 === x4 && 0 === y4 || (g3 = w > 0 ? "+" : "-", g3 += `${x4}`.padStart(2, "0"), g3 += ":", g3 += `${y4}`.padStart(2, "0"));
  return { didParse: true, unit: $, reference: /* @__PURE__ */ new Date(`${T2}-${Z2}-${A2}T${C}:${D}:${L}.000${g3}`) };
}

// node_modules/@arcgis/core/layers/voxel/VoxelIrregularSpacing.js
var t2 = class extends n2 {
  constructor() {
    super(...arguments), this.values = null;
  }
};
__decorate([m({ type: [Number], json: { write: true } })], t2.prototype, "values", void 0), t2 = __decorate([a3("esri.layers.voxel.VoxelIrregularSpacing")], t2);
var p7 = t2;

// node_modules/@arcgis/core/layers/voxel/VoxelRegularSpacing.js
var t3 = class extends n2 {
  constructor() {
    super(...arguments), this.scale = 1, this.offset = 0;
  }
};
__decorate([m({ type: Number, json: { write: true } })], t3.prototype, "scale", void 0), __decorate([m({ type: Number, json: { write: true } })], t3.prototype, "offset", void 0), t3 = __decorate([a3("esri.layers.voxel.VoxelRegularSpacing")], t3);
var p8 = t3;

// node_modules/@arcgis/core/layers/voxel/VoxelDimension.js
var p9 = class extends n2 {
  constructor() {
    super(...arguments), this.irregularSpacing = null, this.isPositiveUp = true, this.isWrappedDateLine = false, this.label = null, this.name = null, this.quantity = null, this.regularSpacing = null, this.size = 0, this.unit = null;
  }
  get isRegular() {
    return (null == this.irregularSpacing || void 0 === this.irregularSpacing) && null !== this.regularSpacing;
  }
  getRange() {
    return this.isRegular ? [this.regularSpacing.offset, this.regularSpacing.offset + this.regularSpacing.scale * (this.size - 1)] : Array.isArray(this.irregularSpacing?.values) && this.irregularSpacing.values.length > 1 ? [this.irregularSpacing.values[0], this.irregularSpacing.values[this.irregularSpacing.values.length - 1]] : [0, 0];
  }
};
__decorate([m({ type: p7, json: { write: true } })], p9.prototype, "irregularSpacing", void 0), __decorate([m({ type: Boolean, json: { write: true } })], p9.prototype, "isPositiveUp", void 0), __decorate([m({ type: Boolean, json: { write: true } })], p9.prototype, "isWrappedDateLine", void 0), __decorate([m({ type: String, json: { write: true } })], p9.prototype, "label", void 0), __decorate([m({ type: String, json: { write: true } })], p9.prototype, "name", void 0), __decorate([m({ type: String, json: { write: true } })], p9.prototype, "quantity", void 0), __decorate([m({ type: p8, json: { write: true } })], p9.prototype, "regularSpacing", void 0), __decorate([m({ type: Number, json: { write: true } })], p9.prototype, "size", void 0), __decorate([m({ type: String, json: { write: true } })], p9.prototype, "unit", void 0), __decorate([m({ type: Boolean, json: { read: false } })], p9.prototype, "isRegular", null), p9 = __decorate([a3("esri.layers.voxel.VoxelDimension")], p9);
var a6 = p9;

// node_modules/@arcgis/core/layers/voxel/VoxelVolume.js
var f5 = class extends n2 {
  constructor(e3) {
    super(e3), this.id = 0, this.dimensions = null, this.spatialReference = f3.WGS84;
  }
  get zDimension() {
    if (!this.dimensions) return -1;
    if (!Array.isArray(this.dimensions)) return -1;
    if (4 !== this.dimensions.length) return -1;
    for (let e3 = 2; e3 < 4; ++e3) if (this.dimensions[e3].size > 0) return e3;
    return -1;
  }
  get isValid() {
    return !!this.dimensions && (!!Array.isArray(this.dimensions) && (4 === this.dimensions.length && (!(this.dimensions[0].size < 1 || this.dimensions[1].size < 1) && !(-1 === this.zDimension || this.dimensions[this.zDimension].size < 1))));
  }
  get originInLayerSpace3D() {
    if (!this.isValid || "xyt" === this.volumeType) return [0, 0, 0];
    const e3 = this.dimensions[0].getRange(), i6 = this.dimensions[1].getRange(), s11 = this.dimensions[2], r4 = s11.isRegular ? s11.getRange() : [0, s11.size];
    return [e3[0], i6[0], r4[0]];
  }
  get voxelSizeInLayerSpaceSigned() {
    if (!this.isValid || "xyt" === this.volumeType) return [0, 0, 0];
    const e3 = this.dimensions[0].getRange(), i6 = this.dimensions[1].getRange(), s11 = this.dimensions[2], r4 = s11.isRegular ? s11.getRange() : [0, s11.size], t5 = [this.sizeInVoxels[0], this.sizeInVoxels[1], this.sizeInVoxels[2]];
    for (let n5 = 0; n5 < 3; ++n5) t5[n5] < 2 ? t5[n5] = 1 : t5[n5] -= 1;
    return s11.isRegular && !s11.isPositiveUp && (t5[2] *= -1), [(e3[1] - e3[0]) / t5[0], (i6[1] - i6[0]) / t5[1], (r4[1] - r4[0]) / t5[2]];
  }
  get volumeType() {
    if (this.isValid) {
      const e3 = this.dimensions[2].size > 0;
      let i6 = this.dimensions[3].size > 0;
      if (i6) {
        const e4 = this.dimensions[3];
        if (i6 = "time" === e4.quantity, i6 && null !== e4.unit) {
          i6 = r3(e4.unit).didParse;
        }
      }
      if (!e3 && i6) return "xyt";
      if (e3 && i6) return "xyzt";
    }
    return "xyz";
  }
  get sizeInVoxels() {
    if (!this.isValid) return [0, 0, 0];
    const e3 = this.zDimension;
    return [this.dimensions[0].size, this.dimensions[1].size, this.dimensions[e3].size];
  }
  get timeStops() {
    if ("xyzt" !== this.volumeType) return [];
    const e3 = this.dimensions[3], i6 = [], s11 = r3(e3.unit);
    if (s11.didParse) {
      if (e3.isRegular) {
        const t5 = e3.regularSpacing?.offset ?? 0, n5 = e3.regularSpacing?.scale || 1;
        for (let o6 = 0; o6 < e3.size; ++o6) {
          const e4 = t5 + n5 * o6;
          i6.push(i2(s11.reference, e4, s11.unit));
        }
      } else if (Array.isArray(e3.irregularSpacing?.values) && e3.irregularSpacing.values.length > 0) for (let t5 = 0; t5 < e3.irregularSpacing.values.length; ++t5) {
        const n5 = e3.irregularSpacing.values[t5];
        i6.push(i2(s11.reference, n5, s11.unit));
      }
    }
    return i6;
  }
  computeVoxelSpaceLocation(e3) {
    if (!this.isValid) return [0, 0, 0];
    if ("xyt" === this.volumeType) return i.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."), [0, 0, 0];
    if (!T(this.spatialReference, e3.spatialReference)) return i.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."), [0, 0, 0];
    const i6 = r2(e3.x, e3.y, e3.z ?? 0);
    c2(i6, i6, this.originInLayerSpace3D), i3(i6, i6, this.voxelSizeInLayerSpaceSigned);
    const r4 = this.dimensions[this.zDimension];
    if (!r4.isRegular && Array.isArray(r4.irregularSpacing?.values) && r4.irregularSpacing.values.length > 1) {
      const s11 = e3.z ?? 0, t5 = r4.irregularSpacing.values, n5 = r4.isPositiveUp ? 1 : -1, o6 = t5.reduce((e4, i7) => Math.abs(n5 * i7 - s11) < Math.abs(n5 * e4 - s11) ? i7 : e4);
      for (let e4 = 0; e4 < t5.length; ++e4) if (t5[e4] === o6) {
        i6[2] = e4;
        break;
      }
    }
    return [i6[0], i6[1], i6[2]];
  }
  computeLayerSpaceLocation(e3) {
    if (!this.isValid) return new _({ x: 0, y: 0, spatialReference: this.spatialReference });
    const i6 = u(e3);
    if (e(i6, i6, this.voxelSizeInLayerSpaceSigned), u3(i6, i6, this.originInLayerSpace3D), "xyt" === this.volumeType) return new _({ x: i6[0], y: i6[1], spatialReference: this.spatialReference });
    const s11 = this.dimensions[this.zDimension];
    return s11.isRegular || Array.isArray(s11.irregularSpacing?.values) && (e3[2] < 0 ? i6[2] = s11.irregularSpacing.values[0] : e3[2] < s11.irregularSpacing.values.length ? i6[2] = s11.irregularSpacing.values[e3[2]] : i6[2] = s11.irregularSpacing.values[s11.irregularSpacing.values.length - 1], s11.isPositiveUp || (i6[2] *= -1)), new _({ x: i6[0], y: i6[1], z: i6[2], spatialReference: this.spatialReference });
  }
};
__decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], f5.prototype, "id", void 0), __decorate([m({ type: [a6], json: { write: { enabled: true, isRequired: true } } })], f5.prototype, "dimensions", void 0), __decorate([m({ type: f3, json: { read: { enabled: false } } })], f5.prototype, "spatialReference", void 0), __decorate([m({ type: Number, json: { read: false } })], f5.prototype, "zDimension", null), __decorate([m({ type: [Boolean], json: { read: false } })], f5.prototype, "isValid", null), __decorate([m({ type: [Number], json: { read: false } })], f5.prototype, "originInLayerSpace3D", null), __decorate([m({ type: [Number], json: { read: false } })], f5.prototype, "voxelSizeInLayerSpaceSigned", null), __decorate([m({ type: ["xyz", "xyzt", "xyt"], json: { read: { enabled: false } } })], f5.prototype, "volumeType", null), __decorate([m({ type: [Number], json: { read: false } })], f5.prototype, "sizeInVoxels", null), __decorate([m({ type: [Date], json: { read: false, write: false } })], f5.prototype, "timeStops", null), f5 = __decorate([a3("esri.layers.voxel.VoxelVolume")], f5);

// node_modules/@arcgis/core/layers/voxel/VoxelVolumeIndex.js
var t4;
var s10 = t4 = class extends n2 {
  constructor() {
    super(...arguments), this.apronWidth = 1, this.brickSize = [32, 32, 32], this.maxLodLevel = 0, this.nodeSize = [4, 4, 4];
  }
  isValid() {
    const e3 = new t4();
    return e3.apronWidth === this.apronWidth && e3.maxLodLevel === this.maxLodLevel && (!!this.brickSize && (!!this.nodeSize && (!(!Array.isArray(this.brickSize) || !Array.isArray(this.nodeSize)) && (3 === this.brickSize.length && 3 === this.nodeSize.length && (32 === this.brickSize[0] && 32 === this.brickSize[1] && 32 === this.brickSize[2] && (4 === this.nodeSize[0] && 4 === this.nodeSize[1] && 4 === this.nodeSize[2]))))));
  }
};
__decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], s10.prototype, "apronWidth", void 0), __decorate([m({ type: [Number], json: { write: { enabled: true, isRequired: true } } })], s10.prototype, "brickSize", void 0), __decorate([m({ type: Number, json: { write: { enabled: true, isRequired: true } } })], s10.prototype, "maxLodLevel", void 0), __decorate([m({ type: [Number], json: { write: { enabled: true, isRequired: true } } })], s10.prototype, "nodeSize", void 0), s10 = t4 = __decorate([a3("esri.layers.voxel.VoxelVolumeIndex")], s10);
var d4 = s10;

// node_modules/@arcgis/core/layers/voxel/VoxelDynamicSection.js
var m5 = class extends l2(n2) {
  constructor(o6) {
    super(o6), this.enabled = true, this.label = "", this.normal = null, this.point = null;
  }
  get orientation() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o6, t5] = b4(this.normal);
    return a4.normalize(a2(o6), 0, true);
  }
  set orientation(o6) {
    const t5 = g(o6, this.tilt);
    this._set("normal", t5), this._set("orientation", o6);
  }
  get tilt() {
    if (!Array.isArray(this.normal) || 3 !== this.normal.length) return 0;
    const [o6, t5] = b4(this.normal);
    return a4.normalize(a2(t5), 0, true);
  }
  set tilt(o6) {
    const t5 = g(this.orientation, o6);
    this._set("normal", t5), this._set("tilt", o6);
  }
};
__decorate([m({ type: Boolean, json: { default: true, write: true } })], m5.prototype, "enabled", void 0), __decorate([m({ type: String, json: { write: true } })], m5.prototype, "label", void 0), __decorate([m({ type: Number, json: { read: false }, clonable: false, range: { min: 0, max: 360 } }), s2((o6) => a4.normalize(a2(o6), 0, true))], m5.prototype, "orientation", null), __decorate([m({ type: Number, json: { read: false }, clonable: false, range: { min: 0, max: 360 } }), s2((o6) => a4.normalize(a2(o6), 0, true))], m5.prototype, "tilt", null), __decorate([m({ type: [Number], json: { write: { isRequired: true } } })], m5.prototype, "normal", void 0), __decorate([m({ type: [Number], json: { write: { isRequired: true } } })], m5.prototype, "point", void 0), m5 = __decorate([a3("esri.layers.voxel.VoxelDynamicSection")], m5);

// node_modules/@arcgis/core/layers/voxel/VoxelVolumeStyle.js
var p10;
var m6 = p10 = class extends n2 {
  constructor(e3) {
    super(e3), this.volumeId = 0, this.verticalExaggeration = 1, this.exaggerationMode = "scale-height", this.verticalOffset = 0, this.slices = new (O.ofType(m4))(), this.dynamicSections = new (O.ofType(m5))();
  }
  set slices(e3) {
    this._set("slices", n(e3, this._get("slices"), O.ofType(m4)));
  }
  set dynamicSections(e3) {
    this._set("dynamicSections", n(e3, this._get("dynamicSections"), O.ofType(m5)));
  }
  clone() {
    return new p10({ volumeId: this.volumeId, verticalExaggeration: this.verticalExaggeration, exaggerationMode: this.exaggerationMode, verticalOffset: this.verticalOffset, slices: a(this.slices), dynamicSections: a(this.dynamicSections) });
  }
};
__decorate([m({ type: x, json: { write: { enabled: true, isRequired: true } } })], m6.prototype, "volumeId", void 0), __decorate([m({ type: Number, json: { default: 1, write: true } })], m6.prototype, "verticalExaggeration", void 0), __decorate([m({ type: ["scale-position", "scale-height"], json: { default: "scale-height", write: true } })], m6.prototype, "exaggerationMode", void 0), __decorate([m({ type: Number, json: { default: 0, write: true } })], m6.prototype, "verticalOffset", void 0), __decorate([m({ type: O.ofType(m4), json: { write: { enabled: true, overridePolicy() {
  return { enabled: !!this.slices && this.slices.length > 0 };
} } } })], m6.prototype, "slices", null), __decorate([m({ type: O.ofType(m5), json: { write: { enabled: true, overridePolicy() {
  return { enabled: !!this.dynamicSections && this.dynamicSections.length > 0 };
} } } })], m6.prototype, "dynamicSections", null), m6 = p10 = __decorate([a3("esri.layers.voxel.VoxelVolumeStyle")], m6);

// node_modules/@arcgis/core/layers/VoxelLayer.js
var _3 = class extends _2(l3(b2(j(t(l(s5(o4(b3)))))))) {
  constructor(e3) {
    super(e3), this.serviceRoot = "", this.operationalLayerType = "Voxel", this.legendEnabled = true, this.title = null, this.sections = null, this.currentVariableId = 0, this.volumeStyles = null, this.renderMode = "volume", this.variableStyles = null, this.enableSlices = true, this.enableSections = true, this.enableDynamicSections = true, this.enableIsosurfaces = true, this.graphicOrigin = new o5(this), this.shading = new s7(), this.opacity = 1, this.variables = new O(), this.volumes = new O(), this.index = null, this.minScale = 0, this.maxScale = 0, this.type = "voxel", this.version = { major: Number.NaN, minor: Number.NaN, versionString: "" }, this.fullExtent = null, this.popupEnabled = false, this.popupTemplate = null, this.test = null, this.timeExtent = null, this.timeOffset = null, this.useViewTime = true, this.volumeStyles = new (O.ofType(m6))(), this.variableStyles = new (O.ofType(c5))(), this.sections = new (O.ofType(d3))();
  }
  normalizeCtorArgs(e3) {
    return e3?.constantUpscaling && (this.test = { constantUpscaling: true }, delete e3.constantUpscaling), e3;
  }
  set url(e3) {
    this._set("url", y(e3, i.getLogger(this)));
  }
  load(e3) {
    const t5 = null != e3 ? e3.signal : null, i6 = this.loadFromPortal({ supportedTypes: ["Scene Service"] }, e3).catch(f).then(() => this._fetchService(t5)).then(() => this.serviceRoot = this.url);
    return this.addResolvingPromise(i6), Promise.resolve(this);
  }
  read(e3, t5) {
    super.read(e3, t5), "service" === t5?.origin && this.version.major <= 3 && this.version.minor <= 0 && !this.getAtOrigin("popupTemplate", "service") && this.setAtOrigin("popupTemplate", this.createPopupTemplate(), "service");
    for (const i6 of this.volumes) i6.spatialReference = this.spatialReference;
  }
  readVersion(e3, t5) {
    return super.parseVersionString(e3);
  }
  validateLayer(e3) {
    if (e3.layerType && e3.layerType !== this.operationalLayerType) throw new s("voxel-layer:layer-type-not-supported", "VoxelLayer does not support this layer type", { layerType: e3.layerType });
    if (isNaN(this.version.major) || isNaN(this.version.minor) || this.version.major < 3) throw new s("layer:service-version-not-supported", "Service version is not supported.", { serviceVersion: this.version.versionString, supportedVersions: "3.x" });
    if (this.version.major > 3) throw new s("layer:service-version-too-new", "Service version is too new.", { serviceVersion: this.version.versionString, supportedVersions: "3.x" });
  }
  readFullExtent(e3, t5, i6) {
    if (null != e3 && "object" == typeof e3) {
      const o6 = z.fromJSON(e3, i6);
      if (0 === o6.zmin && 0 === o6.zmax && Array.isArray(t5.volumes)) {
        const e4 = f5.fromJSON(t5.volumes[0]);
        if (e4.isValid && "xyt" !== e4.volumeType) {
          const t6 = e4.dimensions[2];
          if (t6.isRegular) {
            let e5 = t6.regularSpacing.offset, i7 = t6.regularSpacing.offset + t6.regularSpacing.scale * (t6.size - 1);
            if (e5 > i7) {
              const t7 = e5;
              e5 = i7, i7 = t7;
            }
            o6.zmin = e5, o6.zmax = i7;
          }
        }
      }
      return o6;
    }
    return null;
  }
  get fields() {
    const e3 = [new m2({ name: "Voxel.Position", alias: "Voxel Position", domain: null, editable: false, length: 128, type: "string" }), new m2({ name: "Voxel.CurrentVariable", alias: "Current Variable", domain: null, editable: false, length: 128, type: "string" })];
    for (const i6 of this.variables) {
      const t6 = new m2({ name: i6.name, alias: i6.description, domain: null, editable: false, length: 128, type: "discrete" === i6.renderingFormat.continuity ? "string" : "double" });
      e3.push(t6);
    }
    const t5 = this.getVolume(null);
    if (null != t5) {
      if ("xyzt" === t5.volumeType || "xyt" === t5.volumeType) {
        const t6 = new m2({ name: "Voxel.LocalTime", alias: "Local Time", domain: null, editable: false, length: 256, type: "date" });
        e3.push(t6);
        const i6 = new m2({ name: "Voxel.SourceTime", alias: "Source Time", domain: null, editable: false, length: 256, type: "string" });
        e3.push(i6);
      }
      if ("xyt" !== t5.volumeType) {
        const t6 = new m2({ name: "Voxel.Depth", alias: "Depth", domain: null, editable: false, length: 128, type: "double" });
        e3.push(t6);
      }
    }
    return e3;
  }
  get fieldsIndex() {
    return this.loaded ? new Z(this.fields) : null;
  }
  getField(e3) {
    return this.fieldsIndex?.get(e3);
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  createPopupTemplate(e3) {
    const t5 = this.fields;
    return d({ fields: t5, title: "{Voxel.Position}" }, e3);
  }
  getConfiguration() {
    const e3 = { layerType: this.operationalLayerType, version: this.version.versionString, name: this.title, spatialReference: this.spatialReference, fullExtent: this.fullExtent, volumes: this.volumes.toJSON(), variables: this.variables.toJSON(), index: this.index?.toJSON(), sections: this.getSections(), style: { volumeStyles: this.getVolumeStyles(), currentVariableId: this.currentVariableId, renderMode: this.renderMode, variableStyles: this.getVariableStyles(), enableSections: this.enableSections, enableDynamicSections: this.enableDynamicSections, enableIsosurfaces: this.enableIsosurfaces, enableSlices: this.enableSlices, shading: this.shading } };
    return e3.index && this.index?.isValid() ? JSON.stringify(e3) : "";
  }
  getVariableStyle(e3) {
    let t5 = -1;
    t5 = null != e3 ? e3 : this.currentVariableId;
    if (!this.variableStyles || -1 === t5) return null;
    const i6 = this.variableStyles.findIndex((e4) => e4.variableId === t5);
    return i6 < 0 ? null : this.variableStyles.at(i6);
  }
  getVariable(e3) {
    let t5 = -1;
    if (t5 = null != e3 ? e3 : this.currentVariableId, !this.variables || -1 === t5) return null;
    const i6 = this.variables.findIndex((e4) => e4.id === t5);
    return i6 < 0 ? null : this.variables.at(i6);
  }
  getVolume(e3) {
    const t5 = this.getVariable(e3);
    return null != t5 ? this.volumes.find(({ id: e4 }) => e4 === t5.volumeId) : null;
  }
  get timeInfo() {
    const e3 = this.getVolume(null);
    if ("xyzt" !== e3?.volumeType) return null;
    const t5 = e3.timeStops;
    if (!t5?.length) return null;
    const i6 = new m3({ start: t5[0], end: t5.at(-1) });
    return new u5({ fullTimeExtent: i6, stops: t5 });
  }
  getVolumeStyle(e3) {
    const t5 = this.getVariable(e3);
    return null != t5 ? this.volumeStyles.find(({ volumeId: e4 }) => e4 === t5.volumeId) : null;
  }
  getColorForContinuousDataValue(e3, t5, i6) {
    const o6 = this.getVariable(e3);
    if (null == o6 || "continuous" !== o6.renderingFormat?.continuity) return null;
    if (!this.variableStyles) return null;
    const r4 = this.variableStyles.findIndex((t6) => t6.variableId === e3);
    if (r4 < 0) return null;
    const n5 = this.variableStyles.at(r4);
    return n5?.transferFunction ? n5.transferFunction.getColorForContinuousDataValue(t5, i6) : null;
  }
  getSections() {
    const e3 = [];
    for (const t5 of this.sections) e3.push(new d3({ enabled: t5.enabled, href: t5.href, id: t5.id, label: t5.label, normal: t5.normal, point: t5.point, sizeInPixel: t5.sizeInPixel, slices: t5.slices, timeId: t5.timeId, variableId: t5.variableId }));
    return e3;
  }
  getVariableStyles() {
    const e3 = [];
    for (const t5 of this.variableStyles) {
      const i6 = this._getVariable(t5);
      if (null != i6) {
        const o6 = t5.clone();
        o6.isosurfaces.length > 4 && (o6.isosurfaces = o6.isosurfaces.slice(0, 3), i.getLogger(this).error("A maximum of 4 isosurfaces are supported for Voxel Layers."));
        for (const e4 of o6.isosurfaces) if (!e4.colorLocked) {
          const t6 = this.getColorForContinuousDataValue(o6.variableId, e4.value, false);
          null == t6 || t6.equals(e4.color) || (e4.color = t6);
        }
        if ("continuous" === i6.renderingFormat.continuity) (null === o6.transferFunction || o6.transferFunction.colorStops.length < 2) && i.getLogger(this).error(`VoxelVariableStyle for variable ${i6.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`), null !== o6.transferFunction && (Array.isArray(o6.transferFunction.stretchRange) && 2 === o6.transferFunction.stretchRange.length || (i.getLogger(this).error(`VoxelVariableStyle for variable ${i6.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`), o6.transferFunction.stretchRange = [0, 1], o6.transferFunction.colorStops.removeAll()));
        else if ("discrete" === i6.renderingFormat.continuity) if (0 === t5.uniqueValues.length) i.getLogger(this).error(`VoxelVariableStyle for variable ${i6.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);
        else for (const e4 of t5.uniqueValues) null !== e4.label && void 0 !== e4.label || null === e4.value || void 0 === e4.value || (e4.label = e4.value.toString());
        e3.push(o6);
      } else i.getLogger(this).error(`VoxelVariable ID=${t5.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`);
    }
    return e3;
  }
  getVolumeStyles() {
    const e3 = [];
    for (const t5 of this.volumeStyles) {
      const i6 = this._getVolumeFromVolumeId(t5.volumeId);
      if (null != i6) {
        const o6 = t5.clone();
        for (const e4 of o6.slices) this._isPlaneValid(e4, [0, 1, i6.zDimension], i6.dimensions) || (e4.enabled = false, e4.label = "invalid");
        for (const e4 of o6.dynamicSections) this._isPlaneValid(e4, [0, 1, i6.zDimension], i6.dimensions) || (e4.enabled = false, e4.label = "invalid");
        e3.push(o6);
      } else i.getLogger(this).error(`VoxelVolume ID=${t5.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`);
    }
    return e3;
  }
  _getVariable(e3) {
    const t5 = e3.variableId;
    for (const i6 of this.variables) if (i6.id === t5) return i6;
    return null;
  }
  _getVolumeFromVolumeId(e3) {
    for (const t5 of this.volumes) if (t5.id === e3) return t5;
    return null;
  }
  _isPlaneValid(e3, t5, i6) {
    if (!e3.point) return false;
    if (!Array.isArray(e3.point) || 3 !== e3.point.length) return false;
    if (!e3.normal) return false;
    if (!Array.isArray(e3.normal) || 3 !== e3.normal.length) return false;
    const o6 = r2(e3.normal[0], e3.normal[1], e3.normal[2]);
    A(o6, o6);
    const r4 = 1e-6;
    return !(Math.abs(o6[0]) + Math.abs(o6[1]) + Math.abs(o6[2]) < r4) && (e3.normal[0] = o6[0], e3.normal[1] = o6[1], e3.normal[2] = o6[2], true);
  }
};
__decorate([m({ type: ["Voxel"] })], _3.prototype, "operationalLayerType", void 0), __decorate([m(d2)], _3.prototype, "legendEnabled", void 0), __decorate([m({ json: { write: true } })], _3.prototype, "title", void 0), __decorate([m(y2)], _3.prototype, "url", null), __decorate([m({ type: O.ofType(d3), json: { origins: { "web-scene": { name: "layerDefinition.sections", write: true } } } })], _3.prototype, "sections", void 0), __decorate([m({ type: x, json: { origins: { "web-scene": { name: "layerDefinition.style.currentVariableId", write: { enabled: true, isRequired: true, ignoreOrigin: true } }, service: { name: "style.currentVariableId" } } } })], _3.prototype, "currentVariableId", void 0), __decorate([m({ type: O.ofType(m6), json: { origins: { "web-scene": { name: "layerDefinition.style.volumeStyles", write: true }, service: { name: "style.volumeStyles" } } } })], _3.prototype, "volumeStyles", void 0), __decorate([m({ type: ["volume", "surfaces"], json: { origins: { "web-scene": { name: "layerDefinition.style.renderMode", write: true }, service: { name: "style.renderMode" } } } })], _3.prototype, "renderMode", void 0), __decorate([m({ type: O.ofType(c5), json: { origins: { "web-scene": { name: "layerDefinition.style.variableStyles", write: true }, service: { name: "style.variableStyles" } } } })], _3.prototype, "variableStyles", void 0), __decorate([m({ type: Boolean, json: { origins: { "web-scene": { name: "layerDefinition.style.enableSlices", write: true }, service: { name: "style.enableSlices" } } } })], _3.prototype, "enableSlices", void 0), __decorate([m({ type: Boolean, json: { origins: { "web-scene": { name: "layerDefinition.style.enableSections", write: true }, service: { name: "style.enableSections" } } } })], _3.prototype, "enableSections", void 0), __decorate([m({ type: Boolean, json: { origins: { "web-scene": { name: "layerDefinition.style.enableDynamicSections", write: true }, service: { name: "style.enableDynamicSections" } } } })], _3.prototype, "enableDynamicSections", void 0), __decorate([m({ type: Boolean, json: { origins: { "web-scene": { name: "layerDefinition.style.enableIsosurfaces", write: true }, service: { name: "style.enableIsosurfaces" } } } })], _3.prototype, "enableIsosurfaces", void 0), __decorate([m({ readOnly: true })], _3.prototype, "graphicOrigin", void 0), __decorate([m({ type: s7, json: { origins: { "web-scene": { name: "layerDefinition.style.shading", write: true }, service: { name: "style.shading" } } } })], _3.prototype, "shading", void 0), __decorate([m({ type: ["show", "hide"] })], _3.prototype, "listMode", void 0), __decorate([m({ type: Number, range: { min: 0, max: 1 }, nonNullable: true, json: { read: false, write: false, origins: { "web-scene": { read: false, write: false }, "portal-item": { read: false, write: false } } } })], _3.prototype, "opacity", void 0), __decorate([m({ type: O.ofType(p3) })], _3.prototype, "variables", void 0), __decorate([m({ type: O.ofType(f5) })], _3.prototype, "volumes", void 0), __decorate([m({ type: d4 })], _3.prototype, "index", void 0), __decorate([m({ type: Number, json: { name: "layerDefinition.minScale", write: true, origins: { service: { read: false, write: false } } } })], _3.prototype, "minScale", void 0), __decorate([m({ type: Number, json: { name: "layerDefinition.maxScale", write: true, origins: { service: { read: false, write: false } } } })], _3.prototype, "maxScale", void 0), __decorate([m({ json: { read: false }, readOnly: true })], _3.prototype, "type", void 0), __decorate([m({ readOnly: true, json: { name: "serviceVersion" } })], _3.prototype, "version", void 0), __decorate([o("service", "version")], _3.prototype, "readVersion", null), __decorate([m({ type: z })], _3.prototype, "fullExtent", void 0), __decorate([o("service", "fullExtent", ["fullExtent"])], _3.prototype, "readFullExtent", null), __decorate([m({ readOnly: true, clonable: false, json: { read: false } })], _3.prototype, "fields", null), __decorate([m({ readOnly: true })], _3.prototype, "fieldsIndex", null), __decorate([m({ type: Boolean, json: { name: "disablePopup", read: { reader: (e3, t5) => !t5.disablePopup }, write: { enabled: true, ignoreOrigin: true, writer(e3, t5, i6) {
  t5[i6] = !e3;
} }, origins: { "portal-item": { default: true }, "web-scene": { default: true } } } })], _3.prototype, "popupEnabled", void 0), __decorate([m({ type: q, json: { name: "popupInfo", write: true } })], _3.prototype, "popupTemplate", void 0), __decorate([m({ readOnly: true, json: { read: false } })], _3.prototype, "defaultPopupTemplate", null), __decorate([m({ type: u5, readOnly: true, json: { read: false } })], _3.prototype, "timeInfo", null), __decorate([m({ type: m3, json: { read: false } })], _3.prototype, "timeExtent", void 0), __decorate([m({ type: c3, json: { read: false } })], _3.prototype, "timeOffset", void 0), __decorate([m({ type: Boolean, nonNullable: true, json: { origins: { "web-scene": { name: "timeAnimation", write: true }, service: { read: false } } } })], _3.prototype, "useViewTime", void 0), _3 = __decorate([a3("esri.layers.VoxelLayer")], _3);
var q2 = _3;
export {
  q2 as default
};
//# sourceMappingURL=VoxelLayer-WIWMJ3LY.js.map
