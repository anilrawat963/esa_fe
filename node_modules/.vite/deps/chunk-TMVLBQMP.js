import {
  c,
  d,
  e as e2,
  e2 as e3,
  f as f4,
  n as n4,
  o as o2,
  t,
  t2,
  v
} from "./chunk-6IHS6RYH.js";
import {
  setAssetPath
} from "./chunk-RKNCTZBL.js";
import {
  n as n3
} from "./chunk-QF7FRVN6.js";
import {
  f as f2
} from "./chunk-ENINOZUZ.js";
import {
  f as f3,
  l as l2,
  w
} from "./chunk-2OFHDVO5.js";
import {
  l
} from "./chunk-TFJXG32O.js";
import {
  m as m3
} from "./chunk-5UPBUJPC.js";
import {
  b
} from "./chunk-YY5PITIH.js";
import {
  n as n2
} from "./chunk-234CIOHE.js";
import {
  _
} from "./chunk-V2H77UEV.js";
import {
  s as s2
} from "./chunk-WRA2WBYC.js";
import {
  m,
  s4 as s
} from "./chunk-5EI5H4QX.js";
import {
  a2
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  f
} from "./chunk-6SSZNBOK.js";
import {
  L,
  e,
  m2,
  n2 as n,
  o4 as o,
  u2 as u
} from "./chunk-GNMPGHLQ.js";
import {
  a,
  i3 as i
} from "./chunk-QY7XKUIV.js";

// node_modules/@esri/calcite-components/dist/index.js
var assetPathChanged = false;
var setAssetPath2 = (path) => {
  assetPathChanged = true;
  setAssetPath(path);
};

// node_modules/@arcgis/core/widgets/support/componentsUtils.js
var n5;
function r() {
  assetPathChanged || setAssetPath2(_(n2(n5)));
}
function c2(t6) {
  const o5 = [];
  for (const s4 of Object.keys(t6)) customElements.get(`calcite-${s4}`) || o5.push(t6[s4]?.());
  return o5.length > 0 ? Promise.all(o5) : null;
}
n5 = "components/assets";

// node_modules/@arcgis/core/core/domUtils.js
function n6(n9) {
  return "string" == typeof n9 ? document.getElementById(n9) : n9 ?? null;
}
function t3(n9, t6) {
  for (; ; ) {
    const e7 = n9.firstChild;
    if (!e7) break;
    t6.appendChild(e7);
  }
}

// node_modules/@arcgis/core/libs/maquette-advanced-projector/advanced-projector-options.js
var e4 = { handleInterceptedEvent: (e7, p, t6, n9) => (e7.scheduleRender(), p.properties[`on${n9.type}`].apply(p.properties.bind || t6, [n9])) };

// node_modules/@arcgis/core/libs/maquette-advanced-projector/utils.js
var e5 = { namespace: void 0, performanceLogger: () => {
}, eventHandlerInterceptor: void 0, styleApplyer: (e7, t6, r2) => {
  t6.startsWith("-") ? e7.style.setProperty(t6, r2) : e7.style[t6] = r2;
} };
var t4 = (t6) => ({ ...e5, ...t6 });

// node_modules/@arcgis/core/libs/maquette-advanced-projector/projector.js
var o3 = (e7, r2) => {
  const t6 = [];
  for (; e7 && e7 !== r2; ) t6.push(e7), e7 = e7.parentNode;
  return t6;
};
var n7 = (e7, r2) => e7.find(r2);
var d2 = (e7, r2, t6 = false) => {
  let o5 = e7;
  return r2.forEach((e8, d3) => {
    const s4 = o5?.children ? n7(o5.children, (r3) => r3.domNode === e8) : void 0;
    t6 && !s4 && d3 !== r2.length - 1 || (o5 = s4);
  }), o5;
};
var s3 = (n9) => {
  let s4;
  const c3 = { ...e4, ...n9 }, i2 = t4(c3), a3 = i2.performanceLogger;
  let m4, p = true, l3 = false;
  const f5 = [], u2 = [], h = (e7, r2, t6) => {
    let n10;
    i2.eventHandlerInterceptor = (e8, r3, t7, i3) => function(e9) {
      let r4;
      a3("domEvent", e9);
      const t8 = o3(e9.currentTarget, n10.domNode), i4 = t8.some((e10) => customElements.get(e10?.tagName?.toLowerCase()));
      if (e9.eventPhase === Event.CAPTURING_PHASE || !i4) t8.reverse(), r4 = d2(n10.getLastRender(), t8);
      else {
        const t9 = e9.composedPath(), o5 = t9.slice(t9.indexOf(e9.currentTarget), t9.indexOf(n10.domNode)).reverse();
        r4 = d2(n10.getLastRender(), o5, true);
      }
      let m6;
      return r4 && (m6 = c3.handleInterceptedEvent(s4, r4, this, e9)), a3("domEventProcessed", e9), m6;
    }, c3.postProcessProjectionOptions?.(i2);
    const m5 = t6();
    n10 = e7(r2, m5, i2), i2.eventHandlerInterceptor = void 0, f5.push(n10), u2.push(t6), c3.afterFirstVNodeRendered && c3.afterFirstVNodeRendered(n10, m5);
  };
  let v2 = () => {
    if (m4 = void 0, p) {
      p = false, a3("renderStart", void 0);
      for (let r2 = 0; r2 < f5.length; r2++) {
        const t6 = u2[r2]();
        a3("rendered", void 0);
        try {
          f5[r2].update(t6);
        } catch (e7) {
          console.error(e7);
        }
        a3("patched", void 0);
      }
      a3("renderDone", void 0), p = true;
    }
  };
  return c3.modifyDoRenderImplementation && (v2 = c3.modifyDoRenderImplementation(v2, f5, u2)), s4 = { renderNow: v2, scheduleRender: () => {
    m4 || l3 || (m4 = requestAnimationFrame(v2));
  }, stop: () => {
    m4 && (cancelAnimationFrame(m4), m4 = void 0), l3 = true;
  }, resume: () => {
    l3 = false, p = true, s4.scheduleRender();
  }, append: (r2, t6) => {
    h(n4.append, r2, t6);
  }, insertBefore: (r2, t6) => {
    h(n4.insertBefore, r2, t6);
  }, merge: (r2, t6) => {
    h(n4.merge, r2, t6);
  }, replace: (r2, t6) => {
    h(n4.replace, r2, t6);
  }, detach: (e7) => {
    for (let r2 = 0; r2 < u2.length; r2++) if (u2[r2] === e7) return u2.splice(r2, 1), f5.splice(r2, 1)[0];
    throw new Error("renderFunction was not found");
  } }, s4;
};

// node_modules/@arcgis/core/widgets/support/tests.js
var t5 = /* @__PURE__ */ new Set();
function n8(e7) {
  t5.add(e7), e7.finally(() => t5.delete(e7));
}
function o4(t6) {
  return e();
}

// node_modules/@arcgis/core/widgets/Widget.js
var $;
var U = 0;
function z(e7, t6) {
  const r2 = Object.prototype.hasOwnProperty;
  for (const s4 in t6) r2.call(t6, s4) && r2.call(e7, s4) && (null != e7[s4] && null != t6[s4] && "object" == typeof e7[s4] && "object" == typeof t6[s4] ? z(e7[s4], t6[s4]) : e7[s4] = t6[s4]);
  return e7;
}
var x = s3({ postProcessProjectionOptions(e7) {
  const t6 = e7.eventHandlerInterceptor, r2 = /capture$/i;
  e7.eventHandlerInterceptor = (e8, s4, o5, i2) => {
    const n9 = t6?.(e8, s4, o5, i2), d3 = r2.test(e8);
    if (!((e8 = e8.replace(r2, "")).toLowerCase() in o5) || d3) {
      const t7 = e8[2].toLowerCase() + e8.slice(3), r3 = (e9) => n9?.call(o5, e9);
      o5.addEventListener(t7, r3, d3);
      const s5 = () => o5.removeEventListener(t7, r3, d3), a3 = i2.afterRemoved;
      i2.afterRemoved = (e9) => {
        a3?.(e9), s5();
      };
    }
    return n9;
  };
}, handleInterceptedEvent(e7, t6, r2, s4) {
  const { eventPhase: o5, type: i2 } = s4, n9 = o5 === Event.CAPTURING_PHASE;
  let d3 = `on${i2}${n9 ? "capture" : ""}`;
  const a3 = t6.properties;
  (a3 && d3 in a3 || (d3 = `on${i2[0].toUpperCase()}${i2.slice(1)}${n9 ? "Capture" : ""}`, a3 && d3 in a3)) && (t2(), e7.scheduleRender(), a3[d3].call(a3.bind || r2, s4));
} });
var O = false;
var _a;
var A = (_a = class extends m3(l) {
  constructor(e7, t6) {
    super(e7, t6), this._attached = false, this._projector = x, this._readyForTrueRender = false, this.key = this, this.autoRenderingEnabled = true, this._loadLocale = L(async () => {
      if (this._messageBundleProps?.length) {
        const e8 = await Promise.allSettled(this._messageBundleProps.map(async ({ bundlePath: e9, propertyName: t7 }) => {
          if (this.destroyed) return;
          let r3 = await f2(e9);
          this.destroyed || (this.uiStrings && Object.keys(this.uiStrings) && (r3 = z(a(r3), this.uiStrings)), this[t7] = r3);
        }));
        if (this.destroyed) return;
        for (const t7 of e8) "rejected" === t7.status && i.getLogger(this).error("widget-intl:locale-error", this.declaredClass, t7.reason);
      }
      await this.loadLocale();
    }), this.addHandles(o4()), r();
    const r2 = "esri-widget-uid-" + n3(), s4 = this.render.bind(this);
    this._trackingTarget = new s(() => {
      this.autoRenderingEnabled && this.scheduleRender();
    });
    const o5 = () => ({ vnodeSelector: "div", properties: { key: `${r2}-hidden`, class: "", styles: { display: "none" } }, domNode: null, children: void 0, text: void 0 }), d3 = () => {
      if (!this._readyForTrueRender || this.destroyed) return null;
      const e8 = s4() ?? o5(), t7 = e8.properties ??= {};
      if (t7.key ??= r2, f4(e8.vnodeSelector)) {
        if (!this.visible) return o5();
      } else this.visible ? t7.styles || (t7.styles = {}) : (t7.class = "", t7.styles = { display: "none" }), t7.styles.display ??= "";
      let i2 = 0;
      return e8.children?.forEach((e9) => {
        f4(e9.vnodeSelector) || (e9.properties ??= {}, e9.properties.key ??= `${this.id}--${i2++}`);
      }), d(this, e8);
    };
    this.render = () => {
      if (O) return d3();
      let e8 = e3(this) ?? null;
      if (e8) return e8;
      this._trackingTarget.clear(), O = true;
      try {
        e8 = f(this._trackingTarget, d3);
      } catch (t7) {
        throw i.getLogger(this).error(t7), t7;
      } finally {
        O = false;
      }
      return e8 && c(this, e8), e8;
    };
    const a3 = this.beforeFirstRender();
    a3 ? this._resourcesFetch = a3.then(() => {
      this.destroyed || (this._readyForTrueRender = true, this._postInitialize());
    }) : (this._resourcesFetch = Promise.resolve().then(() => {
      this.destroyed || this._postInitialize();
    }), this._readyForTrueRender = true), this.addResolvingPromise(this._resourcesFetch), n8(this._resourcesFetch);
  }
  normalizeCtorArgs(e7, t6) {
    const r2 = { ...e7 };
    return t6 && (r2.container = t6), r2;
  }
  postInitialize() {
  }
  beforeFirstRender() {
    const e7 = this.loadDependencies();
    return this._messageBundleProps?.length || e7 ? Promise.all([e7, this._loadLocale()]).then(() => {
    }).catch(m2) : null;
  }
  loadDependencies() {
    return null;
  }
  loadLocale() {
    return null;
  }
  destroy() {
    this.destroyed || (u(this._trackingTarget), u(this.viewModel), this._detach(this.container), this._set("container", null), this.render = () => null, this._projector = null, o2(this));
  }
  set container(e7) {
    this._get("container") || this._set("container", e7);
  }
  castContainer(e7) {
    return n6(e7);
  }
  get destroyed() {
    return super.destroyed;
  }
  get domNode() {
    return this.container;
  }
  set domNode(e7) {
    this.container = e7;
  }
  get icon() {
    return null;
  }
  set icon(e7) {
    this._overrideIfSome("icon", e7);
  }
  get id() {
    return this._get("id") || this.container?.id || Date.now().toString(16) + "-widget-" + U++;
  }
  set id(e7) {
    e7 && this._set("id", e7);
  }
  get label() {
    return this.declaredClass.split(".").pop();
  }
  set label(e7) {
    this._overrideIfSome("label", e7);
  }
  get renderable() {
    return this._resourcesFetch;
  }
  get visible() {
    return this._get("visible");
  }
  set visible(e7) {
    this._set("visible", e7);
  }
  get [($ = t, e2)]() {
    return { projector: this._projector };
  }
  render() {
    throw new Error("not implemented");
  }
  scheduleRender() {
    this.destroyed || (o2(this), this._projector.scheduleRender());
  }
  classes(...e7) {
    return v.apply(this, e7);
  }
  renderNow() {
    o2(this), this._projector.renderNow();
  }
  _postInitialize() {
    if (this.destroyed) return;
    this.scheduleRender(), this._delegatedEventNames?.length && this.addHandles(l2(() => this.viewModel, (e8, t6) => {
      t6 && this.removeHandles("delegated-events"), e8 && n(e8) && this.addHandles(this._delegatedEventNames.map((t7) => o(e8, t7, (e9) => {
        this.emit(t7, e9);
      })), "delegated-events");
    }, w)), this.postInitialize();
    const e7 = async () => {
      await this._loadLocale().catch(m2), this.scheduleRender();
    };
    this.addHandles([b(e7), l2(() => this.uiStrings, e7)]), this.addHandles(f3(() => this.container, (e8) => {
      this.destroyed || this._attach(e8);
    }, { initial: true, once: true }));
  }
  _attach(e7) {
    e7 && (this._projector.merge(e7, this.render), this._attached = true);
  }
  _detach(e7) {
    this._attached && (this._projector.detach(this.render), this._attached = false), e7?.parentNode?.removeChild(e7);
  }
}, _a[$] = true, _a.vnodeSelector = "div", _a);
__decorate([m()], A.prototype, "_readyForTrueRender", void 0), __decorate([m({ value: null })], A.prototype, "container", null), __decorate([s2("container")], A.prototype, "castContainer", null), __decorate([m()], A.prototype, "icon", null), __decorate([m()], A.prototype, "id", null), __decorate([m()], A.prototype, "label", null), __decorate([m()], A.prototype, "renderable", null), __decorate([m()], A.prototype, "uiStrings", void 0), __decorate([m()], A.prototype, "viewModel", void 0), __decorate([m({ value: true })], A.prototype, "visible", null), __decorate([m()], A.prototype, "key", void 0), __decorate([m()], A.prototype, "children", void 0), __decorate([m()], A.prototype, "afterCreate", void 0), __decorate([m()], A.prototype, "afterUpdate", void 0), __decorate([m()], A.prototype, "afterRemoved", void 0), A = __decorate([a2("esri.widgets.Widget")], A);
var B = A;

// node_modules/@arcgis/core/widgets/support/decorators/messageBundle.js
function e6(e7) {
  return (s4, r2) => {
    s4.hasOwnProperty("_messageBundleProps") || (s4._messageBundleProps = s4._messageBundleProps ? s4._messageBundleProps.slice() : []);
    s4._messageBundleProps.push({ bundlePath: e7, propertyName: r2 });
  };
}

export {
  n6 as n,
  t3 as t,
  c2 as c,
  B,
  e6 as e
};
//# sourceMappingURL=chunk-TMVLBQMP.js.map
