import {
  l
} from "./chunk-CIIRREHX.js";
import {
  e
} from "./chunk-U5J3MCMX.js";
import {
  i
} from "./chunk-AJG2ZYEA.js";
import {
  t
} from "./chunk-CFXCM2NO.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2BindUniform.js
var e2 = class extends i {
  constructor(r, e5) {
    super(r, "ivec2", 0, (o3, s) => o3.setUniform2iv(r, e5(s)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerBindUniform.js
var o = class extends i {
  constructor(r, o3) {
    super(r, "int", 0, (s, t3) => s.setUniform1i(r, o3(t3)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DUintBindUniform.js
var e3 = class extends i {
  constructor(r, e5) {
    super(r, "usampler2D", 0, (s, o3) => s.bindTexture(r, e5(o3)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js
function d(d2, o3) {
  const { fragment: u } = d2, { output: r, draped: c, hasHighlightMixTexture: n } = o3;
  9 === r ? (u.uniforms.add(new o("highlightLevel", (i2) => i2.highlightLevel ?? 0), new e2("highlightMixOrigin", (i2) => i2.highlightMixOrigin)), d2.outputs.add("fragHighlight", "uvec2", 0), d2.include(l), n ? u.uniforms.add(new e3("highlightMixTexture", (i2) => i2.highlightMixTexture)).code.add(t`uvec2 getAccumulatedHighlight() {
return texelFetch(highlightMixTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;
}
void outputHighlight(bool occluded) {
if (highlightLevel == 0) {
uint bits = occluded ? 3u : 1u;
fragHighlight = uvec2(bits, 0);
} else {
int ll = (highlightLevel & 3) << 1;
int li = (highlightLevel >> 2) & 3;
uint bits;
if (occluded) {
bits = 3u << ll;
} else {
bits = 1u << ll;
}
uvec2 combinedHighlight = getAccumulatedHighlight();
combinedHighlight[li] |= bits;
fragHighlight = combinedHighlight;
}
}`) : u.code.add(t`void outputHighlight(bool occluded) {
uint bits = occluded ? 3u : 1u;
fragHighlight = uvec2(bits, 0);
}`), c ? u.code.add(t`bool isHighlightOccluded() {
return false;
}`) : u.uniforms.add(new e("depthTexture", (i2) => i2.mainDepth)).code.add(t`bool isHighlightOccluded() {
float sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;
return gl_FragCoord.z > sceneDepth + 5e-7;
}`), u.code.add(t`void calculateOcclusionAndOutputHighlight() {
outputHighlight(isHighlightOccluded());
}`)) : u.code.add(t`void calculateOcclusionAndOutputHighlight() {}`);
}

// node_modules/@arcgis/core/webscene/support/AlphaCutoff.js
var o2 = 1 / 255.5;

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js
function e4(e5) {
  e5.code.add(t`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix3PassUniform.js
var t2 = class extends i {
  constructor(r, t3, o3) {
    super(r, "mat3", 1, (s, e5, m) => s.setUniformMatrix3fv(r, t3(e5, m), o3));
  }
};

export {
  t2 as t,
  o,
  d,
  o2,
  e4 as e
};
//# sourceMappingURL=chunk-BZBDEPRV.js.map
