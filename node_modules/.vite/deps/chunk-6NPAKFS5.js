import {
  l as l5
} from "./chunk-CUJ626VQ.js";
import {
  G
} from "./chunk-V4S4W4OB.js";
import {
  s as s7,
  v as v2
} from "./chunk-4UD25MCJ.js";
import {
  t as t2
} from "./chunk-4HUNJ2YS.js";
import {
  b as b3
} from "./chunk-BTFBYI67.js";
import {
  n as n3
} from "./chunk-S34IG7TQ.js";
import {
  n as n4
} from "./chunk-4274EV24.js";
import {
  s as s6
} from "./chunk-ZUQ2O3KU.js";
import {
  et
} from "./chunk-TF5RNCNY.js";
import {
  c as c7
} from "./chunk-RS755KXS.js";
import {
  p as p4
} from "./chunk-KY5OS6CK.js";
import {
  i as i3
} from "./chunk-CXUJAI27.js";
import {
  d as d3
} from "./chunk-NKFEI62F.js";
import {
  A,
  B as B2,
  Ce,
  M,
  O as O2,
  P,
  Q,
  R,
  U,
  Y,
  Ze,
  be,
  ce,
  de,
  ee,
  fe,
  he,
  k,
  me,
  oe,
  q,
  se,
  ue,
  ve,
  x,
  ye,
  z
} from "./chunk-VJ5FUG6T.js";
import {
  u as u2
} from "./chunk-76V6RN4F.js";
import {
  N as N3
} from "./chunk-ZGTANDVY.js";
import {
  o
} from "./chunk-HOJHSMLY.js";
import {
  e as e5
} from "./chunk-2O6SPRT2.js";
import {
  b as b2
} from "./chunk-647DAMHU.js";
import {
  p as p2
} from "./chunk-ZKNZTIAS.js";
import {
  c as c5
} from "./chunk-MUBG7EZN.js";
import {
  B,
  c as c4,
  e as e4
} from "./chunk-TMVLBQMP.js";
import {
  L as L2,
  h as h2,
  n2,
  v,
  y as y2
} from "./chunk-6IHS6RYH.js";
import {
  t
} from "./chunk-OJBEN6CV.js";
import {
  _ as _3
} from "./chunk-C3FRY5U4.js";
import {
  I as I2,
  a as a3,
  f as f3,
  i as i4,
  i3 as i5,
  i4 as i6,
  l as l4,
  p as p3
} from "./chunk-JNJX34GB.js";
import {
  ge
} from "./chunk-MC6NAKKX.js";
import {
  l as l3
} from "./chunk-TF6255HN.js";
import {
  c as c6
} from "./chunk-C5OQVQZF.js";
import {
  I
} from "./chunk-CNYNCKEV.js";
import {
  d as d2
} from "./chunk-XL5QPCXN.js";
import {
  s as s3
} from "./chunk-6KDQMJAI.js";
import {
  c as c3
} from "./chunk-UDHS2MGH.js";
import {
  s as s5
} from "./chunk-ONXWBTTM.js";
import {
  l as l2
} from "./chunk-T7F6Q6JJ.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import {
  a as a2,
  f,
  h,
  l
} from "./chunk-2OFHDVO5.js";
import {
  N as N2
} from "./chunk-DDOCCRD4.js";
import {
  e as e3
} from "./chunk-THQO67BJ.js";
import {
  r as r2
} from "./chunk-SMWUT52Z.js";
import {
  _ as _2
} from "./chunk-AXZMNHTN.js";
import {
  f as f2
} from "./chunk-5T3MJDSR.js";
import {
  n
} from "./chunk-234CIOHE.js";
import {
  H2 as H,
  _
} from "./chunk-V2H77UEV.js";
import {
  s as s4
} from "./chunk-WRA2WBYC.js";
import {
  b,
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __addDisposableResource,
  __decorate,
  __disposeResources
} from "./chunk-SS5CLIUY.js";
import {
  e
} from "./chunk-4DGC7CBY.js";
import {
  L,
  T,
  d,
  e2,
  j,
  p,
  s as s2,
  u2 as u,
  y
} from "./chunk-GNMPGHLQ.js";
import {
  c as c2,
  i2 as i,
  i3 as i2,
  r,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import {
  N,
  c
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/widgets/Attachments/AttachmentsViewModel.js
var u3 = { editing: false, operations: { add: true, update: true, delete: true } };
var f4 = O.ofType(d3);
var y3 = class extends b {
  constructor(t6) {
    super(t6), this._getAttachmentsPromise = null, this._attachmentLayer = null, this.attachmentKeywords = null, this.attachmentTypes = null, this.capabilities = { ...u3 }, this.activeAttachmentInfo = null, this.activeFileInfo = null, this.attachmentInfos = new f4(), this.fileInfos = new O(), this.graphic = null, this.mode = "view", this.orderByFields = null, this.filesEnabled = false, this.addHandles(l(() => this.graphic, () => this._graphicChanged(), h));
  }
  destroy() {
    this._attachmentLayer = null, this.graphic = null;
  }
  castCapabilities(t6) {
    return { ...u3, ...t6 };
  }
  get state() {
    return this._getAttachmentsPromise ? "loading" : this.graphic ? "ready" : "disabled";
  }
  get supportsResizeAttachments() {
    const { graphic: t6 } = this;
    if (!t6) return false;
    const e14 = t6.sourceLayer ?? t6.layer;
    return e14?.loaded && "capabilities" in e14 && e14.capabilities && "attachment" in e14.capabilities && e14.capabilities.attachment && "supportsResize" in e14.capabilities.attachment && e14.capabilities.attachment.supportsResize || false;
  }
  get supportsTypeWildcard() {
    const { graphic: t6 } = this;
    if (!t6) return false;
    const e14 = t6.sourceLayer ?? t6.layer;
    return e14?.loaded && "capabilities" in e14 && e14.capabilities && "attachment" in e14.capabilities && e14.capabilities.attachment && "supportsResize" in e14.capabilities.attachment && e14.capabilities.attachment.supportsTypeWildcard || false;
  }
  async getAttachments() {
    const { _attachmentLayer: t6, attachmentInfos: e14, orderByFields: a6, attachmentTypes: i10, attachmentKeywords: r5, supportsTypeWildcard: s13 } = this;
    if (!t6 || "function" != typeof t6.queryAttachments) throw new s("invalid-layer", "getAttachments(): A valid layer is required.");
    const o4 = this._getObjectId();
    if ("number" != typeof o4) throw new s("invalid-object-id", "getAttachments(): Numeric object id is required");
    const c14 = a6?.map((t7) => `${t7.field} ${"descending" === t7.order ? "DESC" : "ASC"}`), h7 = new p4({ objectIds: [o4], returnMetadata: true, orderByFields: c14, attachmentTypes: s13 ? i10?.filter(Boolean).map((t7) => `${t7}/*`) : void 0, keywords: r5 }), d9 = [], l9 = t6.queryAttachments(h7).then((t7) => t7[o4] || d9).catch(() => d9);
    this._getAttachmentsPromise = l9, this.notifyChange("state");
    const m8 = await l9;
    return e14.destroyAll(), m8.length && e14.addMany(m8), this._getAttachmentsPromise = null, this.notifyChange("state"), m8;
  }
  async addAttachment(t6, e14 = this.graphic) {
    const { _attachmentLayer: a6, attachmentInfos: i10, capabilities: r5 } = this;
    if (!e14) throw new s("invalid-graphic", "addAttachment(): A valid graphic is required.", { graphic: e14 });
    if (!t6) throw new s("invalid-attachment", "addAttachment(): An attachment is required.", { attachment: t6 });
    if (!r5.operations?.add) throw new s("invalid-capabilities", "addAttachment(): add capabilities are required.");
    if (!a6 || "function" != typeof a6.addAttachment) throw new s("invalid-layer", "addAttachment(): A valid layer is required.");
    const s13 = a6.addAttachment(e14, t6).then((t7) => this._queryAttachment(t7.objectId, e14)), o4 = await s13;
    return i10.add(o4), o4;
  }
  async deleteAttachment(t6) {
    const { _attachmentLayer: e14, attachmentInfos: a6, graphic: i10, capabilities: r5 } = this;
    if (!t6) throw new s("invalid-attachment-info", "deleteAttachment(): An attachmentInfo is required.", { attachmentInfo: t6 });
    if (!r5.operations?.delete) throw new s("invalid-capabilities", "deleteAttachment(): delete capabilities are required.");
    if (!e14 || "function" != typeof e14.deleteAttachments) throw new s("invalid-layer", "deleteAttachment(): A valid layer is required.");
    if (!i10) throw new s("invalid-graphic", "deleteAttachment(): A graphic is required.");
    const s13 = e14.deleteAttachments(i10, [t6.id]).then(() => t6), o4 = await s13;
    return a6.remove(o4), o4.destroy(), o4;
  }
  async updateAttachment(t6, e14 = this.activeAttachmentInfo) {
    const { _attachmentLayer: a6, attachmentInfos: i10, graphic: r5, capabilities: s13 } = this;
    if (!t6) throw new s("invalid-attachment", "updateAttachment(): An attachment is required.", { attachment: t6 });
    if (!e14) throw new s("invalid-attachment-info", "updateAttachment(): An attachmentInfo is required.", { attachmentInfo: e14 });
    if (!s13.operations?.update) throw new s("invalid-capabilities", "updateAttachment(): Update capabilities are required.");
    const o4 = i10.indexOf(e14);
    if (!a6 || "function" != typeof a6.updateAttachment) throw new s("invalid-layer", "updateAttachment(): A valid layer is required.");
    if (!r5) throw new s("invalid-graphic", "updateAttachment(): A graphic is required.");
    const c14 = a6.updateAttachment(r5, e14.id, t6).then((t7) => this._queryAttachment(t7.objectId)), h7 = await c14;
    return i10.splice(o4, 1, h7), h7;
  }
  async commitFiles() {
    return await Promise.all(this.fileInfos.items.map((t6) => this.addAttachment(t6.form))), this.fileInfos.removeAll(), this.getAttachments();
  }
  addFile(t6, e14) {
    if (!t6 || !e14) return null;
    const a6 = { file: t6, form: e14 };
    return this.fileInfos.add(a6), a6;
  }
  updateFile(t6, e14, a6 = this.activeFileInfo) {
    if (!t6 || !e14 || !a6) return null;
    const i10 = this.fileInfos.indexOf(a6);
    return i10 > -1 && this.fileInfos.splice(i10, 1, { file: t6, form: e14 }), this.fileInfos.items[i10];
  }
  deleteFile(t6) {
    const e14 = this.fileInfos.find((e15) => e15.file === t6);
    return e14 ? (this.fileInfos.remove(e14), e14) : null;
  }
  async _queryAttachment(t6, e14) {
    const { _attachmentLayer: a6 } = this;
    if (!t6 || !a6?.queryAttachments) throw new s("invalid-attachment-id", "Could not query attachment.");
    const i10 = this._getObjectId(e14);
    if ("number" != typeof i10) throw new s("invalid-object-id", "getAttachments(): Numeric object id is required");
    const r5 = new p4({ objectIds: [i10], attachmentsWhere: `AttachmentId=${t6}`, returnMetadata: true });
    return a6.queryAttachments(r5).then((t7) => t7[i10][0]);
  }
  _getObjectId(t6 = this.graphic) {
    return t6?.getObjectId() ?? null;
  }
  _graphicChanged() {
    this.graphic && (this._setAttachmentLayer(), this.getAttachments().catch(() => this.attachmentInfos.destroyAll()));
  }
  _setAttachmentLayer() {
    const { graphic: t6 } = this, e14 = x(t6);
    this._attachmentLayer = e14 ? "scene" === e14.type && null != e14.associatedLayer ? e14.associatedLayer : e14 : null;
  }
};
__decorate([m({ type: [String] })], y3.prototype, "attachmentKeywords", void 0), __decorate([m({ type: [["application", "audio", "image", "model", "text", "video"]] })], y3.prototype, "attachmentTypes", void 0), __decorate([m()], y3.prototype, "capabilities", void 0), __decorate([s4("capabilities")], y3.prototype, "castCapabilities", null), __decorate([m()], y3.prototype, "activeAttachmentInfo", void 0), __decorate([m()], y3.prototype, "activeFileInfo", void 0), __decorate([m({ readOnly: true, type: f4 })], y3.prototype, "attachmentInfos", void 0), __decorate([m()], y3.prototype, "fileInfos", void 0), __decorate([m({ type: _3 })], y3.prototype, "graphic", void 0), __decorate([m()], y3.prototype, "mode", void 0), __decorate([m({ type: [a3] })], y3.prototype, "orderByFields", void 0), __decorate([m({ readOnly: true })], y3.prototype, "state", null), __decorate([m()], y3.prototype, "filesEnabled", void 0), __decorate([m({ readOnly: true })], y3.prototype, "supportsResizeAttachments", null), __decorate([m({ readOnly: true })], y3.prototype, "supportsTypeWildcard", null), y3 = __decorate([a("esri.widgets.Attachments.AttachmentsViewModel")], y3);

// node_modules/@arcgis/core/widgets/Attachments/support/attachmentUtils.js
function e6(i10) {
  const e14 = i10.toLowerCase();
  return "image/bmp" === e14 || "image/emf" === e14 || "image/exif" === e14 || "image/gif" === e14 || "image/x-icon" === e14 || "image/jpeg" === e14 || "image/png" === e14 || "image/tiff" === e14 || "image/x-wmf" === e14;
}
function p5(e14) {
  const p12 = n("esri/themes/base/images/files/");
  return e14 ? "text/plain" === e14 ? `${p12}text-32.svg` : "application/pdf" === e14 ? `${p12}pdf-32.svg` : "text/csv" === e14 ? `${p12}csv-32.svg` : "application/gpx+xml" === e14 ? `${p12}gpx-32.svg` : "application/x-dwf" === e14 ? `${p12}cad-32.svg` : "application/postscript" === e14 || "application/json" === e14 || "text/xml" === e14 || "model/vrml" === e14 ? `${p12}code-32.svg` : "application/x-zip-compressed" === e14 || "application/x-7z-compressed" === e14 || "application/x-gzip" === e14 || "application/x-tar" === e14 || "application/x-gtar" === e14 || "application/x-bzip2" === e14 || "application/gzip" === e14 || "application/x-compress" === e14 || "application/x-apple-diskimage" === e14 || "application/x-rar-compressed" === e14 || "application/zip" === e14 ? `${p12}zip-32.svg` : e14.includes("image/") ? `${p12}image-32.svg` : e14.includes("audio/") ? `${p12}sound-32.svg` : e14.includes("video/") ? `${p12}video-32.svg` : e14.includes("msexcel") || e14.includes("ms-excel") || e14.includes("spreadsheetml") ? `${p12}excel-32.svg` : e14.includes("msword") || e14.includes("ms-word") || e14.includes("wordprocessingml") ? `${p12}word-32.svg` : e14.includes("powerpoint") || e14.includes("presentationml") ? `${p12}report-32.svg` : `${p12}generic-32.svg` : `${p12}generic-32.svg`;
}

// node_modules/@arcgis/core/widgets/support/legacyIcon.js
var i7 = { close: "esri-icon-close", collapse: "esri-icon-collapse", down: "esri-icon-down", downArrow: "esri-icon-down-arrow", dragHorizontal: "esri-icon-drag-horizontal", dragVertical: "esri-icon-drag-vertical", duplicate: "esri-icon-duplicate", expand: "esri-icon-expand", fontFallbackText: "esri-icon-font-fallback-text", forward: "esri-icon-forward", handleVertical: "esri-icon-handle-vertical", icon: "esri-icon", left: "esri-icon-left", locateCircled: "esri-icon-locate-circled", noticeTriangle: "esri-icon-notice-triangle", pause: "esri-icon-pause", play: "esri-icon-play", plus: "esri-icon-plus", radioChecked: "esri-icon-radio-checked", radioUnchecked: "esri-icon-radio-unchecked", refresh: "esri-icon-refresh", reverse: "esri-icon-reverse", right: "esri-icon-right", search: "esri-icon-search", swap: "esri-icon-swap", table: "esri-icon-table", trash: "esri-icon-trash", up: "esri-icon-up", upArrow: "esri-icon-up-arrow", upDownArrows: "esri-icon-up-down-arrows", urbanModel: "esri-icon-urban-model", zoomInMagnifyingGlass: "esri-icon-zoom-in-magnifying-glass", zoomToObject: "esri-icon-zoom-to-object" };

// node_modules/@arcgis/core/widgets/Attachments.js
var w = { addButton: true, addSubmitButton: true, cancelAddButton: true, cancelUpdateButton: true, deleteButton: true, errorMessage: true, progressBar: true, updateButton: true };
var A2 = "esri-attachments";
var M2 = { base: A2, loaderContainer: `${A2}__loader-container`, loader: `${A2}__loader`, container: `${A2}__container`, containerList: `${A2}__container--list`, containerPreview: `${A2}__container--preview`, actions: `${A2}__actions`, deleteButton: `${A2}__delete-button`, addAttachmentButton: `${A2}__add-attachment-button`, errorMessage: `${A2}__error-message`, items: `${A2}__items`, item: `${A2}__item`, itemButton: `${A2}__item-button`, itemMask: `${A2}__item-mask`, itemMaskIcon: `${A2}__item-mask--icon`, itemImage: `${A2}__image`, itemImageResizable: `${A2}__image--resizable`, itemLabel: `${A2}__label`, itemFilename: `${A2}__filename`, itemChevronIcon: `${A2}__item-chevron-icon`, itemLink: `${A2}__item-link`, itemLinkOverlay: `${A2}__item-link-overlay`, itemLinkOverlayIcon: `${A2}__item-link-overlay-icon`, itemAddIcon: `${A2}__item-add-icon`, formNode: `${A2}__form-node`, fileFieldset: `${A2}__file-fieldset`, fileLabel: `${A2}__file-label`, fileName: `${A2}__file-name`, fileInput: `${A2}__file-input`, metadata: `${A2}__metadata`, metadataFieldset: `${A2}__metadata-fieldset`, progressBar: `${A2}__progress-bar` };
var F = window.CSS;
var k2 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this.displayType = "auto", this.messages = null, this.messagesUnits = null, this.selectedFile = null, this.submitting = false, this.viewModel = null, this.visibleElements = { ...w }, this._supportsImageOrientation = F && F.supports && F.supports("image-orientation", "from-image"), this._addAttachmentForm = null, this._updateAttachmentForm = null;
  }
  normalizeCtorArgs(e14) {
    return e14?.viewModel || (e14 = { viewModel: new y3(), ...e14 }), e14;
  }
  initialize() {
    this.addHandles([a2(() => this.viewModel?.attachmentInfos, "change", () => this.scheduleRender()), a2(() => this.viewModel?.fileInfos, "change", () => this.scheduleRender()), l(() => this.viewModel?.mode, () => this._modeChanged(), h)]);
  }
  loadDependencies() {
    return c4({ icon: () => import("./calcite-icon-YAZUXSRW.js") });
  }
  get capabilities() {
    return this.viewModel.capabilities;
  }
  set capabilities(e14) {
    this.viewModel.capabilities = e14;
  }
  get effectiveDisplayType() {
    const { displayType: e14 } = this;
    return e14 && "auto" !== e14 ? e14 : this.viewModel.supportsResizeAttachments ? "preview" : "list";
  }
  get attachmentKeywords() {
    return this.viewModel.attachmentKeywords;
  }
  set attachmentKeywords(e14) {
    this.viewModel.attachmentKeywords = e14;
  }
  get attachmentTypes() {
    return this.viewModel.attachmentTypes;
  }
  set attachmentTypes(e14) {
    this.viewModel.attachmentTypes = e14;
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e14) {
    this.viewModel.graphic = e14;
  }
  get icon() {
    return "attachment";
  }
  set icon(e14) {
    this._overrideIfSome("icon", e14);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e14) {
    this._overrideIfSome("label", e14);
  }
  castVisibleElements(e14) {
    return { ...w, ...e14 };
  }
  addAttachment() {
    const { _addAttachmentForm: e14, viewModel: s13 } = this;
    return this._set("submitting", true), this._set("error", null), s13.addAttachment(e14).then((e15) => (this._set("submitting", false), this._set("error", null), s13.mode = "view", e15)).catch((e15) => {
      throw this._set("submitting", false), this._set("error", new s("attachments:add-attachment", this.messages.addErrorMessage, e15)), e15;
    });
  }
  deleteAttachment(e14) {
    const { viewModel: s13 } = this;
    return this._set("submitting", true), this._set("error", null), s13.deleteAttachment(e14).then((e15) => (this._set("submitting", false), this._set("error", null), s13.mode = "view", e15)).catch((e15) => {
      throw this._set("submitting", false), this._set("error", new s("attachments:delete-attachment", this.messages.deleteErrorMessage, e15)), e15;
    });
  }
  updateAttachment() {
    const { viewModel: e14 } = this, { _updateAttachmentForm: s13 } = this;
    return this._set("submitting", true), this._set("error", null), e14.updateAttachment(s13).then((t6) => (this._set("submitting", false), this._set("error", null), e14.mode = "view", t6)).catch((e15) => {
      throw this._set("submitting", false), this._set("error", new s("attachments:update-attachment", this.messages.updateErrorMessage, e15)), e15;
    });
  }
  addFile() {
    const e14 = this.viewModel.addFile(this.selectedFile, this._addAttachmentForm);
    return this.viewModel.mode = "view", e14;
  }
  updateFile() {
    const { viewModel: e14 } = this, t6 = e14.updateFile(this.selectedFile, this._updateAttachmentForm, e14.activeFileInfo);
    return e14.mode = "view", t6;
  }
  deleteFile(e14) {
    const t6 = this.viewModel.deleteFile(e14 || this.viewModel.activeFileInfo?.file);
    return this.viewModel.mode = "view", t6;
  }
  render() {
    const { submitting: e14, viewModel: t6 } = this, { state: s13 } = t6;
    return n2("div", { class: this.classes(M2.base, e5.widget) }, e14 ? this._renderProgressBar() : null, "loading" === s13 ? this._renderLoading() : this._renderAttachments(), this._renderErrorMessage());
  }
  _renderErrorMessage() {
    const { error: e14, visibleElements: t6 } = this;
    return e14 && t6.errorMessage ? n2("div", { class: M2.errorMessage, key: "error-message" }, e14.message) : null;
  }
  _renderAttachments() {
    const { activeFileInfo: e14, mode: t6, activeAttachmentInfo: s13 } = this.viewModel;
    return "add" === t6 ? this._renderAddForm() : "edit" === t6 ? this._renderDetailsForm(s13 || e14) : this._renderAttachmentContainer();
  }
  _renderLoading() {
    return n2("div", { class: M2.loaderContainer, key: "loader" }, n2("div", { class: M2.loader }));
  }
  _renderProgressBar() {
    return this.visibleElements.progressBar ? n2("div", { class: M2.progressBar, key: "progress-bar" }) : null;
  }
  _renderAddForm() {
    const { submitting: e14, selectedFile: t6 } = this, s13 = e14 || !t6, i10 = this.visibleElements.cancelAddButton ? n2("button", { bind: this, class: this.classes(e5.button, e5.buttonTertiary, e5.buttonSmall, e5.buttonHalf, e14 && e5.buttonDisabled), disabled: e14, onclick: this._cancelForm, type: "button" }, this.messages.cancel) : null, a6 = this.visibleElements.addSubmitButton ? n2("button", { class: this.classes(e5.button, e5.buttonSecondary, e5.buttonSmall, e5.buttonHalf, { [e5.buttonDisabled]: s13 }), disabled: s13, type: "submit" }, this.messages.add) : null, n11 = t6 ? n2("span", { class: M2.fileName, key: "file-name" }, t6.name) : null, r5 = n2("form", { afterCreate: y2, afterRemoved: h2, bind: this, "data-node-ref": "_addAttachmentForm", onsubmit: this._submitAddAttachment }, n2("fieldset", { class: M2.fileFieldset }, n11, n2("label", { class: this.classes(M2.fileLabel, e5.button, e5.buttonSecondary) }, t6 ? this.messages.changeFile : this.messages.selectFile, n2("input", { bind: this, class: M2.fileInput, name: "attachment", onchange: this._handleFileInputChange, type: "file" }))), a6, i10);
    return n2("div", { class: M2.formNode, key: "add-form-container" }, r5);
  }
  _renderDetailsForm(e14) {
    const { visibleElements: t6, viewModel: s13, selectedFile: i10, submitting: a6 } = this, { capabilities: r5 } = s13, l9 = a6 || !i10;
    let o4, d9, c14, m8;
    i10 ? (o4 = i10.type, d9 = i10.name, c14 = i10.size) : e14 && "file" in e14 ? (o4 = e14.file.type, d9 = e14.file.name, c14 = e14.file.size) : e14 && "contentType" in e14 && (o4 = e14.contentType, d9 = e14.name, c14 = e14.size, m8 = e14.url);
    const h7 = r5.editing && r5.operations?.delete && t6.deleteButton ? n2("button", { bind: this, class: this.classes(e5.button, e5.buttonSmall, e5.buttonTertiary, M2.deleteButton, { [e5.buttonDisabled]: a6 }), disabled: a6, key: "delete-button", onclick: (t7) => this._submitDeleteAttachment(t7, e14), type: "button" }, this.messages.delete) : void 0, u8 = r5.editing && r5.operations?.update && t6.updateButton ? n2("button", { class: this.classes(e5.button, e5.buttonSmall, e5.buttonThird, { [e5.buttonDisabled]: l9 }), disabled: l9, key: "update-button", type: "submit" }, this.messages.update) : void 0, b10 = this.visibleElements.cancelUpdateButton ? n2("button", { bind: this, class: this.classes(e5.button, e5.buttonSmall, e5.buttonTertiary, e5.buttonThird, { [e5.buttonDisabled]: a6 }), disabled: a6, key: "cancel-button", onclick: this._cancelForm, type: "button" }, this.messages.cancel) : void 0, v9 = r5.editing && r5.operations?.update ? n2("fieldset", { class: M2.fileFieldset, key: "file" }, n2("span", { class: M2.fileName, key: "file-name" }, d9), n2("label", { class: this.classes(M2.fileLabel, e5.button, e5.buttonSecondary) }, this.messages.changeFile, n2("input", { bind: this, class: M2.fileInput, name: "attachment", onchange: this._handleFileInputChange, type: "file" }))) : void 0, f9 = n2("fieldset", { class: M2.metadataFieldset, key: "size" }, n2("label", null, G(this.messagesUnits, c14 ?? 0))), w6 = n2("fieldset", { class: M2.metadataFieldset, key: "content-type" }, n2("label", null, o4)), A5 = null != m8 ? n2("a", { class: M2.itemLink, href: m8, rel: "noreferrer", target: "_blank" }, this._renderImageMask(e14, 400), n2("div", { class: M2.itemLinkOverlay }, n2("span", { class: M2.itemLinkOverlayIcon }, n2("calcite-icon", { icon: "launch" })))) : this._renderImageMask(e14, 400), F9 = n2("form", { afterCreate: y2, afterRemoved: h2, bind: this, "data-node-ref": "_updateAttachmentForm", onsubmit: (t7) => this._submitUpdateAttachment(t7, e14) }, n2("div", { class: M2.metadata }, f9, w6), v9, n2("div", { class: M2.actions }, h7, b10, u8));
    return n2("div", { class: M2.formNode, key: "edit-form-container" }, A5, F9);
  }
  _renderImageMask(e14, t6) {
    return e14 ? "file" in e14 ? this._renderGenericImageMask(e14.file.name, e14.file.type) : this._renderImageMaskForAttachment(e14, t6) : null;
  }
  _renderGenericImageMask(e14, t6) {
    const { supportsResizeAttachments: s13 } = this.viewModel, i10 = p5(t6), a6 = { [M2.itemImageResizable]: s13 };
    return n2("div", { class: this.classes(M2.itemMaskIcon, M2.itemMask), key: i10 }, n2("img", { alt: e14, class: this.classes(a6, M2.itemImage), src: i10, title: e14 }));
  }
  _renderImageMaskForAttachment(e14, t6) {
    const { supportsResizeAttachments: s13 } = this.viewModel;
    if (!e14) return null;
    const { contentType: i10, name: a6, size: n11, url: r5 } = e14;
    if (!s13 || !e6(i10)) return this._renderGenericImageMask(a6, i10);
    const l9 = this._getCSSTransform(e14), o4 = l9 ? { transform: l9, "image-orientation": "none" } : {}, d9 = `${r5}${r5?.includes("?") ? "&" : "?"}w=${t6}&s=${n11}`, c14 = { [M2.itemImageResizable]: s13 };
    return n2("div", { class: this.classes(M2.itemMask), key: d9 }, n2("img", { alt: a6, class: this.classes(c14, M2.itemImage), src: d9, styles: o4, title: a6 }));
  }
  _renderFile(e14) {
    const { file: t6 } = e14;
    return n2("li", { class: M2.item, key: t6 }, n2("button", { "aria-label": this.messages.attachmentDetails, bind: this, class: M2.itemButton, key: "details-button", onclick: () => this._startEditFile(e14), title: this.messages.attachmentDetails, type: "button" }, this._renderImageMask(e14), n2("label", { class: M2.itemLabel }, n2("span", { class: M2.itemFilename }, t6.name || this.messages.noTitle), n2("span", { "aria-hidden": "true", class: this.classes(M2.itemChevronIcon, L2(this.container) ? i7.left : i7.right) }))));
  }
  _renderAttachmentInfo({ attachmentInfo: e14, displayType: t6 }) {
    const { viewModel: s13, effectiveDisplayType: i10 } = this, { capabilities: a6, supportsResizeAttachments: n11 } = s13, { contentType: r5, name: l9, url: o4 } = e14, d9 = this._renderImageMask(e14, "list" === t6 ? 48 : 400), c14 = a6.editing ? n2("span", { "aria-hidden": "true", class: this.classes(M2.itemChevronIcon, L2(this.container) ? i7.left : i7.right) }) : null, m8 = [d9, "preview" === i10 && n11 && e6(r5) ? null : n2("label", { class: M2.itemLabel }, n2("span", { class: M2.itemFilename }, l9 || this.messages.noTitle), c14)], u8 = a6.editing ? n2("button", { "aria-label": this.messages.attachmentDetails, bind: this, class: M2.itemButton, "data-attachment-info-id": e14.id, key: "details-button", onclick: () => this._startEditAttachment(e14), title: this.messages.attachmentDetails, type: "button" }, m8) : n2("a", { class: M2.itemButton, href: o4 ?? void 0, key: "details-link", rel: "noreferrer", target: "_blank" }, m8);
    return n2("li", { class: M2.item, key: e14 }, u8);
  }
  _renderAttachmentContainer() {
    const { effectiveDisplayType: e14, viewModel: t6, visibleElements: s13 } = this, { attachmentInfos: i10, capabilities: a6, fileInfos: n11 } = t6, r5 = !!i10?.length, l9 = !!n11?.length, o4 = { [M2.containerList]: "preview" !== e14, [M2.containerPreview]: "preview" === e14 }, d9 = a6.editing && a6.operations?.add && s13.addButton ? n2("button", { bind: this, class: this.classes(e5.button, e5.buttonTertiary, M2.addAttachmentButton), onclick: () => this._startAddAttachment(), type: "button" }, n2("span", { "aria-hidden": "true", class: this.classes(M2.itemAddIcon, i7.plus) }), this.messages.add) : void 0, c14 = r5 ? n2("ul", { class: M2.items, key: "attachments-list" }, i10.toArray().map((t7) => this._renderAttachmentInfo({ attachmentInfo: t7, displayType: e14 }))) : void 0, m8 = l9 ? n2("ul", { class: M2.items, key: "file-list" }, n11.toArray().map((e15) => this._renderFile(e15))) : void 0, h7 = l9 || r5 ? void 0 : n2("div", { class: e5.empty }, this.messages.noAttachments);
    return n2("div", { class: this.classes(M2.container, o4), key: "attachments-container" }, c14, m8, h7, d9);
  }
  _modeChanged() {
    this._set("error", null), this._set("selectedFile", null);
  }
  _handleFileInputChange(e14) {
    const t6 = e14.target, s13 = t6.files?.item(0);
    this._set("selectedFile", s13);
  }
  _submitDeleteAttachment(e14, t6) {
    e14.preventDefault(), t6 && ("file" in t6 ? this.deleteFile(t6.file) : t6 && this.deleteAttachment(t6));
  }
  _submitAddAttachment(e14) {
    e14.preventDefault(), this.viewModel.filesEnabled ? this.addFile() : this.addAttachment();
  }
  _submitUpdateAttachment(e14, t6) {
    e14.preventDefault(), t6 && "file" in t6 ? this.updateFile() : this.updateAttachment();
  }
  _startEditAttachment(e14) {
    const { viewModel: t6 } = this;
    t6.activeFileInfo = null, t6.activeAttachmentInfo = e14, t6.mode = "edit";
  }
  _startEditFile(e14) {
    const { viewModel: t6 } = this;
    t6.activeAttachmentInfo = null, t6.activeFileInfo = e14, t6.mode = "edit";
  }
  _startAddAttachment() {
    this.viewModel.mode = "add";
  }
  _cancelForm(e14) {
    e14.preventDefault(), this.viewModel.mode = "view";
  }
  _getCSSTransform(e14) {
    const { orientationInfo: t6 } = e14;
    return !this._supportsImageOrientation && t6 ? [t6.rotation ? `rotate(${t6.rotation}deg)` : "", t6.mirrored ? "scaleX(-1)" : ""].join(" ") : "";
  }
};
__decorate([m()], k2.prototype, "capabilities", null), __decorate([m()], k2.prototype, "displayType", void 0), __decorate([m({ readOnly: true })], k2.prototype, "effectiveDisplayType", null), __decorate([m()], k2.prototype, "attachmentKeywords", null), __decorate([m()], k2.prototype, "attachmentTypes", null), __decorate([m()], k2.prototype, "graphic", null), __decorate([m()], k2.prototype, "icon", null), __decorate([m()], k2.prototype, "label", null), __decorate([m(), e4("esri/widgets/Attachments/t9n/Attachments")], k2.prototype, "messages", void 0), __decorate([m(), e4("esri/core/t9n/Units")], k2.prototype, "messagesUnits", void 0), __decorate([m({ readOnly: true })], k2.prototype, "selectedFile", void 0), __decorate([m({ readOnly: true })], k2.prototype, "submitting", void 0), __decorate([m({ readOnly: true })], k2.prototype, "error", void 0), __decorate([m({ type: y3 })], k2.prototype, "viewModel", void 0), __decorate([m()], k2.prototype, "visibleElements", void 0), __decorate([s4("visibleElements")], k2.prototype, "castVisibleElements", null), k2 = __decorate([a("esri.widgets.Attachments")], k2);

// node_modules/@arcgis/core/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel.js
var s8 = class extends y3 {
  constructor(t6) {
    super(t6), this.description = null, this.title = null;
  }
};
__decorate([m()], s8.prototype, "description", void 0), __decorate([m()], s8.prototype, "title", void 0), s8 = __decorate([a("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")], s8);

// node_modules/@arcgis/core/widgets/support/Heading.js
function s9({ level: r5, class: s13, ...l9 }, n11) {
  const a6 = e7(r5);
  return n2(`h${a6}`, { ...l9, "aria-level": String(a6), class: v(e5.heading, s13), role: "heading" }, n11);
}
function e7(t6) {
  return r2(Math.ceil(t6), 1, 6);
}

// node_modules/@arcgis/core/widgets/Feature/support/FeatureElementInfo.js
var p6 = "esri-feature-element-info";
var n5 = { base: p6, title: `${p6}__title`, description: `${p6}__description` };
var l6 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this.description = null, this.headingLevel = 2, this.title = null;
  }
  render() {
    return n2("div", { class: n5.base }, this._renderTitle(), this._renderDescription());
  }
  _renderTitle() {
    const { title: e14 } = this;
    return e14 ? n2(s9, { class: n5.title, innerHTML: e14, level: this.headingLevel }) : null;
  }
  _renderDescription() {
    const { description: e14 } = this;
    return e14 ? n2("div", { class: n5.description, innerHTML: e14, key: "description" }) : null;
  }
};
__decorate([m()], l6.prototype, "description", void 0), __decorate([m()], l6.prototype, "headingLevel", void 0), __decorate([m()], l6.prototype, "title", void 0), l6 = __decorate([a("esri.widgets.Feature.support.FeatureElementInfo")], l6);

// node_modules/@arcgis/core/widgets/Feature/FeatureAttachments.js
var d4 = { base: "esri-feature-attachments" };
var h3 = class extends B {
  constructor(t6, e14) {
    super(t6, e14), this._featureElementInfo = null, this.attachmentsWidget = new k2(), this.headingLevel = 2, this.viewModel = new s8();
  }
  initialize() {
    this._featureElementInfo = new l6(), this.addHandles([l(() => [this.viewModel?.description, this.viewModel?.title, this.headingLevel], () => this._setupFeatureElementInfo(), h), l(() => this.viewModel, (t6) => this.attachmentsWidget.viewModel = t6, h)]);
  }
  destroy() {
    this.attachmentsWidget.viewModel = null, this.attachmentsWidget.destroy(), this._featureElementInfo?.destroy();
  }
  get description() {
    return this.viewModel.description;
  }
  set description(t6) {
    this.viewModel.description = t6;
  }
  get displayType() {
    return this.attachmentsWidget.displayType;
  }
  set displayType(t6) {
    this.attachmentsWidget.displayType = t6;
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(t6) {
    this.viewModel.graphic = t6;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(t6) {
    this.viewModel.title = t6;
  }
  render() {
    const { attachmentsWidget: t6 } = this;
    return n2("div", { class: d4.base }, this._featureElementInfo?.render(), t6?.render());
  }
  _setupFeatureElementInfo() {
    const { description: t6, title: e14, headingLevel: i10 } = this;
    this._featureElementInfo?.set({ description: t6, title: e14, headingLevel: i10 });
  }
};
__decorate([m({ readOnly: true })], h3.prototype, "attachmentsWidget", void 0), __decorate([m()], h3.prototype, "description", null), __decorate([m()], h3.prototype, "displayType", null), __decorate([m()], h3.prototype, "graphic", null), __decorate([m()], h3.prototype, "headingLevel", void 0), __decorate([m()], h3.prototype, "title", null), __decorate([m({ type: s8 })], h3.prototype, "viewModel", void 0), h3 = __decorate([a("esri.widgets.Feature.FeatureAttachments")], h3);

// node_modules/@arcgis/core/widgets/Feature/FeatureContent/FeatureContentViewModel.js
var c8 = class extends b {
  constructor(t6) {
    super(t6), this._loadingPromise = null, this.created = null, this.creator = null, this.destroyer = null, this.graphic = null, this.addHandles(l(() => this.creator, (t7) => {
      this._destroyContent(), this._createContent(t7);
    }, h));
  }
  destroy() {
    this._destroyContent();
  }
  get state() {
    return this._loadingPromise ? "loading" : "ready";
  }
  _destroyContent() {
    const { created: t6, graphic: e14, destroyer: r5 } = this;
    t6 && e14 && (q({ type: "content", value: r5, event: { graphic: e14 } }), this._set("created", null));
  }
  async _createContent(t6) {
    const e14 = this.graphic;
    if (!e14 || !t6) return;
    const r5 = q({ type: "content", value: t6, event: { graphic: e14 } });
    this._loadingPromise = r5, this.notifyChange("state");
    const o4 = await r5;
    r5 === this._loadingPromise && (this._loadingPromise = null, this.notifyChange("state"), this._set("created", o4));
  }
};
__decorate([m({ readOnly: true })], c8.prototype, "created", void 0), __decorate([m()], c8.prototype, "creator", void 0), __decorate([m()], c8.prototype, "destroyer", void 0), __decorate([m({ type: _3 })], c8.prototype, "graphic", void 0), __decorate([m({ readOnly: true })], c8.prototype, "state", null), c8 = __decorate([a("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")], c8);

// node_modules/@arcgis/core/widgets/support/decorators/vmEvent.js
function e8(e14) {
  return (a6) => {
    a6.hasOwnProperty("_delegatedEventNames") || (a6._delegatedEventNames = a6._delegatedEventNames ? a6._delegatedEventNames.slice() : []);
    const n11 = a6._delegatedEventNames;
    e14 = Array.isArray(e14) ? e14 : t3(e14), n11.push(...e14);
  };
}
function t3(e14) {
  return e14.split(",").map((e15) => e15.trim());
}

// node_modules/@arcgis/core/widgets/support/widget.js
function e9(e14) {
  return e14 && "function" == typeof e14.render;
}
function o3(e14) {
  return e14 && "function" == typeof e14.postMixInProperties && "function" == typeof e14.buildRendering && "function" == typeof e14.postCreate && "function" == typeof e14.startup;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureContent.js
var n6 = "esri-feature-content";
var c9 = { base: n6, loaderContainer: `${n6}__loader-container`, loader: `${n6}__loader` };
var l7 = class extends B {
  constructor(e14, r5) {
    super(e14, r5), this.viewModel = null, this._addTargetToAnchors = (e15) => {
      Array.from(e15.querySelectorAll("a")).forEach((e16) => {
        A(e16.href) && !e16.hasAttribute("target") && e16.setAttribute("target", "_blank");
      });
    };
  }
  get creator() {
    return this.viewModel?.creator;
  }
  set creator(e14) {
    this.viewModel && (this.viewModel.creator = e14);
  }
  get graphic() {
    return this.viewModel?.graphic;
  }
  set graphic(e14) {
    this.viewModel && (this.viewModel.graphic = e14);
  }
  render() {
    const e14 = this.viewModel?.state;
    return n2("div", { class: c9.base }, "loading" === e14 ? this._renderLoading() : this._renderCreated());
  }
  _renderLoading() {
    return n2("div", { class: c9.loaderContainer, key: "loader" }, n2("div", { class: c9.loader }));
  }
  _renderCreated() {
    const e14 = this.viewModel?.created;
    return e14 ? e14 instanceof HTMLElement ? n2("div", { afterCreate: this._attachToNode, bind: e14, key: e14 }) : e9(e14) ? n2("div", { key: e14 }, !e14.destroyed && e14.render()) : n2("div", { afterCreate: this._addTargetToAnchors, innerHTML: e14, key: e14 }) : null;
  }
  _attachToNode(e14) {
    const r5 = this;
    e14.appendChild(r5);
  }
};
__decorate([m()], l7.prototype, "creator", null), __decorate([m()], l7.prototype, "graphic", null), __decorate([m({ type: c8 })], l7.prototype, "viewModel", void 0), l7 = __decorate([a("esri.widgets.Feature.FeatureContent")], l7);

// node_modules/@arcgis/core/widgets/Feature/FeatureFields/FeatureFieldsViewModel.js
var d5 = class extends b {
  constructor(o4) {
    super(o4), this.attributes = null, this.expressionInfos = null, this.description = null, this.fieldInfos = null, this.isContentFieldInfos = false, this.graphic = null, this.layer = null, this.title = null;
  }
  get formattedFieldInfos() {
    const { expressionInfos: o4, fieldInfos: e14, layer: t6, isContentFieldInfos: r5, graphic: i10 } = this, p12 = [];
    return e14?.forEach((e15) => {
      if (!(!e15.hasOwnProperty("visible") || e15.visible)) return;
      const d9 = e15.clone();
      d9.label = k({ fieldInfo: d9, expressionInfos: o4, layer: t6, graphic: i10, isContentFieldInfos: r5 });
      I(t6) && M({ fieldInfo: e15, graphic: i10 }) && (d9.fieldFormat = R({ fieldInfo: d9, isContentFieldInfos: r5, layer: t6 })), p12.push(d9);
    }), p12;
  }
};
__decorate([m()], d5.prototype, "attributes", void 0), __decorate([m({ type: [i6] })], d5.prototype, "expressionInfos", void 0), __decorate([m()], d5.prototype, "description", void 0), __decorate([m({ type: [f3] })], d5.prototype, "fieldInfos", void 0), __decorate([m({ readOnly: true })], d5.prototype, "formattedFieldInfos", null), __decorate([m()], d5.prototype, "isContentFieldInfos", void 0), __decorate([m()], d5.prototype, "graphic", void 0), __decorate([m()], d5.prototype, "layer", void 0), __decorate([m()], d5.prototype, "title", void 0), d5 = __decorate([a("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")], d5);

// node_modules/@arcgis/core/widgets/support/uriUtils.js
var p8 = [{ pattern: /^\s*(https?:\/\/([^\s]+))\s*$/i, target: "_blank", label: "{messages.view}" }, { pattern: /^\s*(tel:([^\s]+))\s*$/i, label: "{hierPart}" }, { pattern: /^\s*(mailto:([^\s]+))\s*$/i, label: "{hierPart}" }, { pattern: /^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "App Studio Player" }, { pattern: /^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Collector" }, { pattern: /^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Explorer" }, { pattern: /^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Navigator" }, { pattern: /^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Survey123" }, { pattern: /^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Trek2There" }, { pattern: /^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Workforce" }, { pattern: /^\s*(iform:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "iForm" }, { pattern: /^\s*(flow:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "FlowFinity" }, { pattern: /^\s*(lfmobile:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Laserfische" }, { pattern: /^\s*(mspbi:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Microsoft Power Bi" }];
function r3(r5, t6) {
  if ("string" != typeof t6 || !t6) return t6;
  const n11 = p8.find((e14) => e14.pattern.test(t6));
  if (!n11) return t6;
  const i10 = t6.match(n11.pattern), l9 = i10?.[2], o4 = r(r(n11.label, { messages: r5, hierPart: l9 }), { appName: n11.appName }), m8 = n11.target ? ` target="${n11.target}"` : "", g5 = "_blank" === n11.target ? ' rel="noreferrer"' : "";
  return t.sanitizeUrl(_(t6)).replace(n11.pattern, `<a${m8} href="$1"${g5}>${o4}</a>`);
}

// node_modules/@arcgis/core/widgets/Feature/FeatureFields.js
var u4 = "esri-feature-fields";
var m2 = { base: u4, fieldHeader: `${u4}__field-header`, fieldData: `${u4}__field-data`, fieldDataDate: `${u4}__field-data--date` };
var c10 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this._featureElementInfo = null, this.viewModel = new d5(), this.messages = null, this.messagesURIUtils = null;
  }
  initialize() {
    this._featureElementInfo = new l6(), this.addHandles(l(() => [this.viewModel?.description, this.viewModel?.title], () => this._setupFeatureElementInfo(), h));
  }
  destroy() {
    this._featureElementInfo?.destroy();
  }
  get attributes() {
    return this.viewModel.attributes;
  }
  set attributes(e14) {
    this.viewModel.attributes = e14;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get expressionInfos() {
    return this.viewModel.expressionInfos;
  }
  set expressionInfos(e14) {
    this.viewModel.expressionInfos = e14;
  }
  get fieldInfos() {
    return this.viewModel.fieldInfos;
  }
  set fieldInfos(e14) {
    this.viewModel.fieldInfos = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  render() {
    return n2("div", { class: m2.base }, this._featureElementInfo?.render(), this._renderFields());
  }
  _renderFieldInfo(e14, t6) {
    const { attributes: s13 } = this.viewModel, i10 = e14.fieldName || "", r5 = e14.label || i10, o4 = s13 ? null == s13[i10] ? "" : s13[i10] : "", l9 = !("date-time" !== e14?.fieldFormat?.type), n11 = "number" == typeof o4 && !l9 ? this._forceLTR(o4) : r3(this.messagesURIUtils, o4), d9 = { [m2.fieldDataDate]: l9 };
    return n2("tr", { key: `fields-element-info-row-${i10}-${t6}` }, n2("th", { class: m2.fieldHeader, innerHTML: r5, key: `fields-element-info-row-header-${i10}-${t6}` }), n2("td", { class: this.classes(m2.fieldData, d9), innerHTML: n11, key: `fields-element-info-row-data-${i10}-${t6}` }));
  }
  _renderFields() {
    const { formattedFieldInfos: e14 } = this.viewModel;
    return e14?.length ? n2("table", { class: e5.table, summary: this.messages.fieldsSummary }, n2("tbody", null, e14.map((e15, t6) => this._renderFieldInfo(e15, t6)))) : null;
  }
  _setupFeatureElementInfo() {
    const { description: e14, title: t6 } = this;
    this._featureElementInfo?.set({ description: e14, title: t6 });
  }
  _forceLTR(e14) {
    return `&lrm;${e14}`;
  }
};
__decorate([m()], c10.prototype, "attributes", null), __decorate([m()], c10.prototype, "description", null), __decorate([m()], c10.prototype, "expressionInfos", null), __decorate([m()], c10.prototype, "fieldInfos", null), __decorate([m()], c10.prototype, "title", null), __decorate([m({ type: d5, nonNullable: true })], c10.prototype, "viewModel", void 0), __decorate([m(), e4("esri/widgets/Feature/t9n/Feature")], c10.prototype, "messages", void 0), __decorate([m(), e4("esri/widgets/support/t9n/uriUtils")], c10.prototype, "messagesURIUtils", void 0), c10 = __decorate([a("esri.widgets.Feature.FeatureFields")], c10);

// node_modules/@arcgis/core/widgets/Legend/support/heatmapRampUtils.js
function r4(r5) {
  if (!r5.colorStops) return [];
  const e14 = [...r5.colorStops].filter((o4) => o4.color?.a > 0);
  let t6 = e14.length - 1;
  if (e14 && e14[0]) {
    const r6 = e14[t6];
    r6 && 1 !== r6.ratio && (e14.push(new c7({ ratio: 1, color: r6.color })), t6++);
  }
  return e14.map((o4, e15) => {
    let l9 = "";
    return 0 === e15 ? l9 = r5.legendOptions?.minLabel || "low" : e15 === t6 && (l9 = r5.legendOptions?.maxLabel || "high"), { color: o4.color, label: l9, ratio: o4.ratio };
  }).reverse();
}

// node_modules/@arcgis/core/renderers/support/utils.js
var v3 = N2("short-date");
async function w2(e14, l9, t6) {
  e(e14, l9, () => []).push(...t6);
}
async function x3(l9) {
  const t6 = /* @__PURE__ */ new Map();
  if (!l9) return t6;
  if ("visualVariables" in l9 && l9.visualVariables) {
    for (const e14 of l9.visualVariables) if (D(e14)) {
      const l10 = (await t2(e14) ?? []).map((e15) => e15.color);
      await w2(t6, e14.field || e14.valueExpression, l10);
    }
  }
  if ("heatmap" === l9.type) {
    const e14 = r4(l9).map((e15) => e15.color);
    await w2(t6, l9.field || l9.valueExpression, e14);
  } else if ("pie-chart" === l9.type) {
    for (const e14 of l9.attributes) await w2(t6, e14.field || e14.valueExpression, [e14.color]);
    await w2(t6, "default", [l9?.othersCategory?.color, b3(l9.backgroundFillSymbol, null)]);
  } else if ("dot-density" === l9.type) {
    for (const e14 of l9.attributes) await w2(t6, e14.field || e14.valueExpression, [e14.color]);
    await w2(t6, "default", [l9.backgroundColor]);
  } else if ("unique-value" === l9.type) if ("predominance" === l9.authoringInfo?.type) for (const e14 of l9.uniqueValueInfos ?? []) await w2(t6, e14.value.toString(), [b3(e14.symbol, null)]);
  else {
    const e14 = (l9.uniqueValueInfos ?? []).map((e15) => b3(e15.symbol, null)), { field: i10, field2: o4, field3: a6, valueExpression: n11 } = l9;
    (i10 || n11) && await w2(t6, i10 || n11, e14), o4 && await w2(t6, o4, e14), a6 && await w2(t6, a6, e14);
  }
  else if ("class-breaks" === l9.type) {
    const e14 = l9.classBreakInfos.map((e15) => b3(e15.symbol, null)), { field: i10, valueExpression: o4 } = l9;
    await w2(t6, i10 ?? o4, e14);
  } else "simple" === l9.type && await w2(t6, "default", [b3(l9.symbol, null)]);
  return "defaultSymbol" in l9 && l9.defaultSymbol && await w2(t6, "default", [b3(l9.defaultSymbol, null)]), t6.forEach((l10, i10) => {
    const o4 = c(l10.filter(Boolean), (e14, l11) => JSON.stringify(e14) === JSON.stringify(l11));
    t6.set(i10, o4);
  }), t6;
}
function D(e14) {
  return "color" === e14.type;
}

// node_modules/@arcgis/core/widgets/Feature/support/relatedFeatureUtils.js
var d6 = "esri.widgets.Feature.support.relatedFeatureUtils";
var p9 = () => i2.getLogger(d6);
var m3 = /* @__PURE__ */ new Map();
function h4(e14) {
  if (!he(e14)) return null;
  const [t6, r5] = e14.split("/").slice(1);
  return { layerId: t6, fieldName: r5 };
}
function y4(e14, t6) {
  if (!t6.relationships) return null;
  let r5 = null;
  const { relationships: i10 } = t6;
  return i10.some((t7) => t7.id === parseInt(e14, 10) && (r5 = t7, true)), r5;
}
function I3({ originRelationship: e14, relationships: t6, layerId: r5 }) {
  return t6.find(({ relatedTableId: t7, id: i10 }) => `${t7}` === r5 && i10 === e14?.id) ?? null;
}
function F2(e14, t6) {
  const r5 = t6.toLowerCase();
  for (const i10 in e14) if (i10.toLowerCase() === r5) return e14[i10];
  return null;
}
function b6(e14, t6) {
  const r5 = y4(e14, t6);
  if (!r5) return;
  return { url: `${t6.url}/${r5.relatedTableId}`, sourceSpatialReference: t6.spatialReference, relation: r5, relatedFields: [], outStatistics: [] };
}
function g(e14, t6) {
  if (!t6) return;
  if (!e14) return;
  const { features: r5, statsFeatures: i10 } = e14, o4 = r5?.value;
  t6.relatedFeatures = o4 ? o4.features : [];
  const s13 = i10?.value;
  t6.relatedStatsFeatures = s13 ? s13.features : [];
}
function S(e14, t6, r5, i10) {
  const o4 = new u2();
  return o4.outFields = ["*"], o4.relationshipId = "number" == typeof t6.id ? t6.id : parseInt(t6.id, 10), o4.objectIds = [e14.attributes[r5.objectIdField]], o4.gdbVersion = r5.gdbVersion ?? null, o4.historicMoment = r5.historicMoment ?? null, r5.queryRelatedFeatures?.(o4, i10) ?? Promise.resolve({});
}
function w3(e14, t6, r5) {
  let i10 = 0;
  const o4 = [];
  for (; i10 < t6.length; ) o4.push(`${e14} IN (${t6.slice(i10, r5 + i10)})`), i10 += r5;
  return o4.join(" OR ");
}
function j3(e14) {
  return e14 ? c(e14) : void 0;
}
function R2(e14) {
  return e14 ? c(e14, (e15, t6) => JSON.stringify(e15.toJSON()) === JSON.stringify(t6.toJSON())) : void 0;
}
async function $(e14, t6, r5, i10) {
  const o4 = r5.layerId.toString(), { layerInfo: u8, relation: c14, relatedFields: f9, outStatistics: d9, url: p12, sourceSpatialReference: m8 } = t6, h7 = j3(f9), y9 = R2(d9);
  if (!u8 || !c14) return null;
  const b10 = I3({ originRelationship: c14, relationships: u8.relationships, layerId: o4 });
  if (b10?.relationshipTableId && b10.keyFieldInRelationshipTable) {
    const t7 = (await S(e14, b10, r5, i10))[e14.attributes[r5.objectIdField]];
    if (!t7) return null;
    const o5 = t7.features.map((e15) => e15.attributes[u8.objectIdField]);
    if (y9?.length && u8.supportsStatistics) {
      const e15 = new b2();
      e15.where = w3(u8.objectIdField, o5, 1e3), e15.outFields = h7, e15.outStatistics = y9, e15.sourceSpatialReference = m8;
      const r6 = { features: Promise.resolve(t7), statsFeatures: s6(p12, e15) };
      return j(r6);
    }
  }
  const g5 = b10?.keyField;
  if (g5) {
    const t7 = ge(L3(u8.fields, g5)), o5 = F2(e14.attributes, c14.keyField), f10 = t7 ? `${g5}=${o5}` : `${g5}='${o5}'`, d10 = r5.historicMoment, I8 = r5.gdbVersion, b11 = s6(p12, new b2({ where: f10, outFields: h7, sourceSpatialReference: m8, historicMoment: d10, gdbVersion: I8 }), i10), S2 = !!y9?.length && u8.supportsStatistics ? s6(p12, new b2({ where: f10, outFields: h7, outStatistics: y9, sourceSpatialReference: m8 }), i10) : null, w6 = { features: b11 };
    return S2 && (w6.statsFeatures = S2), j(w6);
  }
  return null;
}
function N4(t6, r5) {
  return H(t6, { query: { f: "json" }, signal: r5?.signal });
}
function v4({ relatedInfos: e14, layer: t6 }, i10) {
  const n11 = {};
  return e14.forEach((e15, i11) => {
    const { relation: o4 } = e15;
    if (!o4) {
      const e16 = new s("editor:relation-required", "A relation is required on a layer to retrieve related records.");
      throw p9().error(e16), e16;
    }
    const { relatedTableId: s13 } = o4;
    if ("number" != typeof s13) {
      const e16 = new s("editor:related-table", "A related table ID is required on a layer to retrieve related records.");
      throw p9().error(e16), e16;
    }
    const l9 = `${t6.url}/${s13}`, a6 = m3.get(l9), u8 = a6 ?? N4(l9);
    a6 || m3.set(l9, u8), n11[i11] = u8;
  }), p(j(n11), i10);
}
function T2({ graphic: e14, relatedInfos: t6, layer: r5 }, i10) {
  const o4 = {};
  return t6.forEach((t7, s13) => {
    t7.layerInfo && (o4[s13] = $(e14, t7, r5, i10));
  }), j(o4);
}
function q2({ relatedInfo: e14, fieldName: t6, fieldInfo: r5 }) {
  if (e14.relatedFields?.push(t6), r5.statisticType) {
    const i10 = new p2({ statisticType: r5.statisticType, onStatisticField: t6, outStatisticFieldName: t6 });
    e14.outStatistics?.push(i10);
  }
}
function L3(e14, t6) {
  if (null != e14) {
    t6 = t6.toLowerCase();
    for (const r5 of e14) if (r5 && r5.name.toLowerCase() === t6) return r5;
  }
  return null;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureMedia/FeatureMediaViewModel.js
var I4 = { chartAnimation: true };
var v5 = class extends b {
  constructor(t6) {
    super(t6), this.abilities = { ...I4 }, this.activeMediaInfoIndex = 0, this.attributes = null, this.description = null, this.fieldInfoMap = null, this.formattedAttributes = null, this.expressionAttributes = null, this.layer = null, this.mediaInfos = null, this.popupTemplate = null, this.relatedInfos = null, this.title = null;
  }
  castAbilities(t6) {
    return { ...I4, ...t6 };
  }
  get activeMediaInfo() {
    return this.formattedMediaInfos[this.activeMediaInfoIndex] || null;
  }
  get formattedMediaInfos() {
    return this._formatMediaInfos() || [];
  }
  get formattedMediaInfoCount() {
    return this.formattedMediaInfos.length;
  }
  setActiveMedia(t6) {
    this._setContentElementMedia(t6);
  }
  next() {
    this._pageContentElementMedia(1);
  }
  previous() {
    this._pageContentElementMedia(-1);
  }
  _setContentElementMedia(t6) {
    const { formattedMediaInfoCount: e14 } = this, i10 = (t6 + e14) % e14;
    this.activeMediaInfoIndex = i10;
  }
  _pageContentElementMedia(t6) {
    const { activeMediaInfoIndex: e14 } = this, i10 = e14 + t6;
    this._setContentElementMedia(i10);
  }
  _formatMediaInfos() {
    const { mediaInfos: t6, layer: e14 } = this, o4 = this.attributes ?? {}, r5 = this.formattedAttributes ?? {}, a6 = this.expressionAttributes ?? {}, s13 = this.fieldInfoMap ?? /* @__PURE__ */ new Map();
    return t6?.map((t7) => {
      const i10 = t7?.clone();
      if (!i10) return null;
      if (i10.title = Q({ attributes: o4, fieldInfoMap: s13, globalAttributes: r5, expressionAttributes: a6, layer: e14, text: i10.title }), i10.caption = Q({ attributes: o4, fieldInfoMap: s13, globalAttributes: r5, expressionAttributes: a6, layer: e14, text: i10.caption }), i10.altText = Q({ attributes: o4, fieldInfoMap: s13, globalAttributes: r5, expressionAttributes: a6, layer: e14, text: i10.altText }), "image" === i10.type) {
        if (!i10.value) return;
        return this._setImageValue({ value: i10.value, formattedAttributes: r5, layer: e14 }), i10.value.sourceURL ? i10 : void 0;
      }
      if ("pie-chart" === i10.type || "line-chart" === i10.type || "column-chart" === i10.type || "bar-chart" === i10.type) {
        if (!i10.value) return;
        return this._setChartValue({ value: i10.value, chartType: i10.type, attributes: o4, formattedAttributes: r5, layer: e14, expressionAttributes: a6 }), i10;
      }
      return null;
    }).filter(N) ?? [];
  }
  _setImageValue(t6) {
    const e14 = this.fieldInfoMap ?? /* @__PURE__ */ new Map(), { value: i10, formattedAttributes: o4, layer: r5 } = t6, { linkURL: a6, sourceURL: s13 } = i10;
    if (s13) {
      const t7 = B2(s13, r5);
      i10.sourceURL = P({ formattedAttributes: o4, template: t7, fieldInfoMap: e14 });
    }
    if (a6) {
      const t7 = B2(a6, r5);
      i10.linkURL = P({ formattedAttributes: o4, template: t7, fieldInfoMap: e14 });
    }
  }
  _setChartValue(t6) {
    const { value: e14, attributes: i10, formattedAttributes: o4, chartType: r5, layer: a6, expressionAttributes: s13 } = t6, { popupTemplate: l9, relatedInfos: n11 } = this, { fields: p12, normalizeField: d9 } = e14, m8 = a6;
    e14.fields = O2(p12, m8), d9 && (e14.normalizeField = z(d9, m8));
    if (!p12.some((t7) => !!(null != o4[t7] || he(t7) && n11?.size))) return;
    const h7 = l9?.fieldInfos ?? [];
    p12.forEach((t7, a7) => {
      const l10 = e14.colors?.[a7];
      if (he(t7)) return void (e14.series = [...e14.series, ...this._getRelatedChartInfos({ fieldInfos: h7, fieldName: t7, formattedAttributes: o4, chartType: r5, value: e14, color: l10 })]);
      const n12 = this._getChartOption({ value: e14, attributes: i10, chartType: r5, formattedAttributes: o4, expressionAttributes: s13, fieldName: t7, fieldInfos: h7, color: l10 });
      e14.series.push(n12);
    });
  }
  _getRelatedChartInfos(t6) {
    const { fieldInfos: e14, fieldName: i10, formattedAttributes: o4, chartType: r5, value: a6, color: s13 } = t6, l9 = [], n11 = h4(i10), p12 = n11 && this.relatedInfos?.get(n11.layerId.toString());
    if (!p12) return l9;
    const { relatedFeatures: d9, relation: u8 } = p12;
    if (!u8 || !d9) return l9;
    const { cardinality: f9 } = u8;
    d9.forEach((t7) => {
      const { attributes: p13 } = t7;
      p13 && Object.keys(p13).forEach((t8) => {
        t8 === n11.fieldName && l9.push(this._getChartOption({ value: a6, attributes: p13, formattedAttributes: o4, fieldName: i10, chartType: r5, relatedFieldName: t8, hasMultipleRelatedFeatures: d9?.length > 1, fieldInfos: e14, color: s13 }));
      });
    });
    return "one-to-many" === f9 || "many-to-many" === f9 ? l9 : [l9[0]];
  }
  _getTooltip({ label: t6, value: e14, chartType: i10 }) {
    return "pie-chart" === i10 ? `${t6}` : `${t6}: ${e14}`;
  }
  _getChartOption(t6) {
    const { value: e14, attributes: i10, formattedAttributes: o4, expressionAttributes: r5, fieldName: a6, relatedFieldName: n11, fieldInfos: p12, chartType: d9, hasMultipleRelatedFeatures: u8, color: I8 } = t6, { layer: v9, graphic: M6 } = this, A5 = this.fieldInfoMap ?? /* @__PURE__ */ new Map(), { normalizeField: g5, tooltipField: x7 } = e14, _6 = g5 ? he(g5) ? i10[h4(g5).fieldName] : i10[g5] : null, C3 = U(a6) && r5 && void 0 !== r5[a6] ? r5[a6] : n11 && void 0 !== i10[n11] ? i10[n11] : void 0 !== i10[a6] ? i10[a6] : o4[a6], T6 = void 0 === C3 ? null : C3 && _6 ? C3 / _6 : C3, N5 = new p3({ fieldName: a6, color: I8, value: null != T6 ? "number" == typeof T6 ? T6 : Number(T6) : void 0 });
    if (he(a6)) {
      const t7 = A5.get(a6.toLowerCase()), e15 = x7 && A5.get(x7.toLowerCase()), r6 = t7?.fieldName ?? a6, s13 = u8 && x7 ? h4(x7).fieldName : e15?.fieldName ?? x7, l9 = u8 && s13 ? i10[s13] : o4[s13] ?? (t7 && k({ fieldInfo: t7, graphic: M6, layer: v9 })) ?? t7?.fieldName ?? n11, p13 = u8 && n11 ? i10[n11] : o4[r6];
      return N5.tooltip = this._getTooltip({ label: l9, value: p13, chartType: d9 }), N5;
    }
    const F9 = oe(p12, a6), j6 = z(a6, v9), w6 = x7 && void 0 !== o4[x7] ? o4[x7] : k({ fieldInfo: F9 || new f3({ fieldName: j6 }), expressionInfos: this.popupTemplate?.expressionInfos, graphic: M6, layer: v9 }), E3 = o4[j6];
    return N5.tooltip = this._getTooltip({ label: w6, value: E3, chartType: d9 }), N5;
  }
};
__decorate([m()], v5.prototype, "abilities", void 0), __decorate([s4("abilities")], v5.prototype, "castAbilities", null), __decorate([m()], v5.prototype, "activeMediaInfoIndex", void 0), __decorate([m({ readOnly: true })], v5.prototype, "activeMediaInfo", null), __decorate([m()], v5.prototype, "attributes", void 0), __decorate([m()], v5.prototype, "description", void 0), __decorate([m()], v5.prototype, "fieldInfoMap", void 0), __decorate([m()], v5.prototype, "formattedAttributes", void 0), __decorate([m()], v5.prototype, "expressionAttributes", void 0), __decorate([m({ readOnly: true })], v5.prototype, "formattedMediaInfos", null), __decorate([m()], v5.prototype, "graphic", void 0), __decorate([m()], v5.prototype, "layer", void 0), __decorate([m({ readOnly: true })], v5.prototype, "formattedMediaInfoCount", null), __decorate([m()], v5.prototype, "mediaInfos", void 0), __decorate([m()], v5.prototype, "popupTemplate", void 0), __decorate([m()], v5.prototype, "relatedInfos", void 0), __decorate([m()], v5.prototype, "title", void 0), v5 = __decorate([a("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")], v5);

// node_modules/@arcgis/core/widgets/Feature/FeatureMedia.js
var M3 = "esri-feature-media";
var _4 = { base: M3, mediaContainer: `${M3}__container`, mediaItemContainer: `${M3}__item-container`, mediaItem: `${M3}__item`, mediaItemText: `${M3}__item-text`, mediaItemTitle: `${M3}__item-title`, mediaItemCaption: `${M3}__item-caption`, mediaNavigation: `${M3}__item-navigation`, mediaPagination: `${M3}__pagination`, mediaPaginationText: `${M3}__pagination-text`, mediaChart: `${M3}__chart`, mediaPaginationButton: `${M3}__pagination-button`, mediaPaginationIcon: `${M3}__pagination-icon`, mediaChartRendered: `${M3}__chart--rendered` };
var v6 = 15;
var w4 = "category";
var A3 = "value";
var I5 = "rgba(50, 50, 50, 1)";
var C = 250;
var y5 = 500;
var x4 = 200;
var T3 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this._refreshTimer = null, this._refreshIntervalInfo = null, this._featureElementInfo = null, this._chartRootMap = /* @__PURE__ */ new WeakMap(), this.viewModel = new v5(), this.messages = null, this._disposeChart = (e15) => {
      this._chartRootMap.get(e15)?.dispose(), this._chartRootMap.delete(e15);
    }, this._createChart = async (e15) => {
      const { destroyed: t7, viewModel: i10 } = this;
      if (t7 || !i10 || !e15) return;
      const { createRoot: a6 } = await import("./chartUtilsAm5-YDQAR7I7.js"), r5 = await a6(e15);
      this._chartRootMap.set(e15, r5), await this._renderChart({ mediaInfo: i10.activeMediaInfo, root: r5 });
    };
  }
  initialize() {
    this._featureElementInfo = new l6(), this.addHandles([l(() => [this.viewModel?.activeMediaInfo, this.viewModel?.activeMediaInfoIndex], () => this._setupMediaRefreshTimer(), h), l(() => [this.viewModel?.description, this.viewModel?.title], () => this._setupFeatureElementInfo(), h)]);
  }
  loadDependencies() {
    return c4({ icon: () => import("./calcite-icon-YAZUXSRW.js") });
  }
  destroy() {
    this._clearMediaRefreshTimer(), this._featureElementInfo?.destroy();
  }
  get attributes() {
    return this.viewModel.attributes;
  }
  set attributes(e14) {
    this.viewModel.attributes = e14;
  }
  get activeMediaInfoIndex() {
    return this.viewModel.activeMediaInfoIndex;
  }
  set activeMediaInfoIndex(e14) {
    this.viewModel.activeMediaInfoIndex = e14;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get fieldInfoMap() {
    return this.viewModel.fieldInfoMap;
  }
  set fieldInfoMap(e14) {
    this.viewModel.fieldInfoMap = e14;
  }
  get layer() {
    return this.viewModel.layer;
  }
  set layer(e14) {
    this.viewModel.layer = e14;
  }
  get mediaInfos() {
    return this.viewModel.mediaInfos;
  }
  set mediaInfos(e14) {
    this.viewModel.mediaInfos = e14;
  }
  get popupTemplate() {
    return this.viewModel.popupTemplate;
  }
  set popupTemplate(e14) {
    this.viewModel.popupTemplate = e14;
  }
  get relatedInfos() {
    return this.viewModel.relatedInfos;
  }
  set relatedInfos(e14) {
    this.viewModel.relatedInfos = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  render() {
    return n2("div", { bind: this, class: _4.base, onkeyup: this._handleMediaKeyup }, this._featureElementInfo?.render(), this._renderMedia());
  }
  _renderMedia() {
    const { formattedMediaInfoCount: e14, activeMediaInfoIndex: t6 } = this.viewModel, i10 = this._renderMediaText();
    return e14 ? n2("div", { class: _4.mediaContainer, key: "media-element-container" }, this._renderMediaInfo(), n2("div", { class: _4.mediaNavigation }, i10, e14 > 1 ? n2("div", { class: _4.mediaPagination }, this._renderMediaPageButton("previous"), n2("span", { class: _4.mediaPaginationText }, s3(this.messages.pageText, { index: t6 + 1, total: e14 })), this._renderMediaPageButton("next")) : null)) : null;
  }
  _renderMediaText() {
    const { activeMediaInfo: e14 } = this.viewModel;
    if (!e14) return null;
    const t6 = e14 && e14.title ? n2("div", { class: _4.mediaItemTitle, innerHTML: e14.title, key: "media-title" }) : null, i10 = e14 && e14.caption ? n2("div", { class: _4.mediaItemCaption, innerHTML: e14.caption, key: "media-caption" }) : null;
    return t6 || i10 ? n2("div", { class: _4.mediaItemText, key: "media-text" }, t6, i10) : null;
  }
  _renderImageMediaInfo(e14) {
    if (!e14.value) return null;
    const { _refreshIntervalInfo: t6 } = this, { activeMediaInfoIndex: i10, formattedMediaInfoCount: a6 } = this.viewModel, { value: r5, refreshInterval: o4, altText: s13, title: n11, type: l9 } = e14, { sourceURL: d9, linkURL: c14 } = r5, h7 = A(c14 ?? void 0) ? "_blank" : "_self", p12 = "_blank" === h7 ? "noreferrer" : "", f9 = o4 ? t6 : null, g5 = f9 ? f9.timestamp : 0, M6 = f9 ? f9.sourceURL : d9, _6 = n2("img", { alt: s13 || n11, key: `media-${l9}-${i10}-${a6}-${g5}`, src: M6 ?? void 0 });
    return (c14 ? n2("a", { href: c14, rel: p12, target: h7, title: n11 }, _6) : null) ?? _6;
  }
  _renderChartMediaInfo(e14) {
    const { activeMediaInfoIndex: t6, formattedMediaInfoCount: i10 } = this.viewModel;
    return n2("div", { afterCreate: this._createChart, afterRemoved: this._disposeChart, bind: this, class: _4.mediaChart, key: `media-${e14.type}-${t6}-${i10}` });
  }
  _renderMediaInfoType() {
    const { activeMediaInfo: e14 } = this.viewModel;
    return e14 ? "image" === e14.type ? this._renderImageMediaInfo(e14) : e14.type.includes("chart") ? this._renderChartMediaInfo(e14) : null : null;
  }
  _renderMediaInfo() {
    const { activeMediaInfo: e14 } = this.viewModel;
    return e14 ? n2("div", { class: _4.mediaItemContainer, key: "media-container" }, n2("div", { class: _4.mediaItem, key: "media-item-container" }, this._renderMediaInfoType())) : null;
  }
  _renderMediaPageButton(e14) {
    if (this.viewModel.formattedMediaInfoCount < 2) return null;
    const t6 = "previous" === e14, i10 = t6 ? this.messages.previous : this.messages.next, a6 = t6 ? "chevron-left" : "chevron-right", r5 = t6 ? "media-previous" : "media-next", o4 = t6 ? this._previous : this._next;
    return n2("button", { "aria-label": i10, bind: this, class: _4.mediaPaginationButton, key: r5, onclick: o4, tabIndex: 0, title: i10, type: "button" }, n2("calcite-icon", { class: _4.mediaPaginationIcon, icon: a6, scale: "s" }));
  }
  _setupFeatureElementInfo() {
    const { description: e14, title: t6 } = this;
    this._featureElementInfo?.set({ description: e14, title: t6 });
  }
  _next() {
    this.viewModel.next();
  }
  _previous() {
    this.viewModel.previous();
  }
  _getRenderer() {
    if (!this.viewModel) return;
    const { graphic: e14, layer: t6 } = this.viewModel;
    return e14?.isAggregate && t6?.featureReduction && "renderer" in t6.featureReduction ? t6.featureReduction.renderer : t6?.renderer;
  }
  async _getSeriesColors(e14) {
    const { colorAm5: t6 } = await import("./chartCommon-XBQ6P3DX.js"), i10 = /* @__PURE__ */ new Map();
    return e14.forEach((e15) => {
      e15.color && i10.set(e15, t6(e15.color.toCss(true)));
    }), i10;
  }
  async _getRendererColors() {
    const { colorAm5: e14 } = await import("./chartCommon-XBQ6P3DX.js"), t6 = /* @__PURE__ */ new Map(), i10 = this._getRenderer(), a6 = "default";
    if (!i10) return t6;
    const r5 = await x3(i10);
    r5.delete(a6);
    return Array.from(r5.values()).every((e15) => 1 === e15?.length) ? (Array.from(r5.keys()).forEach((i11) => {
      const a7 = r5.get(i11)?.[0]?.toCss(true);
      a7 && t6.set(i11, e14(a7));
    }), t6) : t6;
  }
  _handleMediaKeyup(e14) {
    const { key: t6 } = e14;
    "ArrowLeft" === t6 && (e14.stopPropagation(), this.viewModel.previous()), "ArrowRight" === t6 && (e14.stopPropagation(), this.viewModel.next());
  }
  _canAnimateChart() {
    return !!this.viewModel && (!!this.viewModel.abilities.chartAnimation && !o());
  }
  _getChartAnimationMS() {
    return this._canAnimateChart() ? C : 0;
  }
  _getChartSeriesAnimationMS() {
    return this._canAnimateChart() ? y5 : 0;
  }
  async _renderChart(e14) {
    const { root: t6, mediaInfo: i10 } = e14, { value: a6, type: r5 } = i10, { ResponsiveThemeAm5: o4, DarkThemeAm5: s13, AnimatedThemeAm5: n11, ColorSetAm5: l9, ThemeAm5: d9, esriChartColorSet: m8 } = await import("./chartCommon-XBQ6P3DX.js"), c14 = d9.new(t6);
    c14.rule("ColorSet").set("colors", m8), c14.rule("ColorSet").set("reuse", true);
    const h7 = [o4.new(t6), c14];
    c5(this.container) && h7.push(s13.new(t6)), this._canAnimateChart() && h7.push(n11.new(t6)), t6.setThemes(h7);
    const p12 = await this._getRendererColors(), u8 = await this._getSeriesColors(a6.series), g5 = l9.new(t6, {}), M6 = u8.get(a6.series[0]), _6 = M6 ? { lineSettings: { stroke: M6 } } : void 0, v9 = a6.series.map((e15, t7) => {
      const i11 = u8.get(e15) || p12.get(e15.fieldName) || g5.getIndex(t7);
      return { [w4]: e15.tooltip, [A3]: e15.value, columnSettings: { fill: i11, stroke: i11 }, ..._6 };
    }).filter((e15) => "pie-chart" !== r5 || null != e15.value && e15.value > 0);
    await ("pie-chart" === r5 ? this._createPieChart(e14, v9) : this._createXYChart(e14, v9));
  }
  _getDirection() {
    return L2(this.container) ? "rtl" : "ltr";
  }
  async _customizeChartTooltip(e14, t6 = "horizontal") {
    const { colorAm5: i10 } = await import("./chartCommon-XBQ6P3DX.js");
    e14.setAll({ pointerOrientation: t6 }), e14.get("background")?.setAll({ stroke: i10(I5) }), e14.label.setAll({ direction: this._getDirection(), oversizedBehavior: "wrap", maxWidth: x4 });
  }
  async _createPieChart(e14, t6) {
    const { TooltipAm5: i10 } = await import("./chartCommon-XBQ6P3DX.js"), { PieChartAm5: a6, PieSeriesAm5: r5 } = await import("./pieChart-T7WE7CAU.js"), { mediaInfo: o4, root: s13 } = e14, { title: n11 } = o4, l9 = 5, d9 = o4?.altText || o4?.title || "", m8 = s13.container.children.push(a6.new(s13, { ariaLabel: d9, focusable: true, paddingBottom: l9, paddingTop: l9, paddingLeft: l9, paddingRight: l9 })), c14 = "{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})", h7 = i10.new(s13, { labelText: c14 }), p12 = m8.series.push(r5.new(s13, { name: n11, valueField: A3, categoryField: w4, tooltip: h7 }));
    p12.ticks.template.set("forceHidden", true), p12.labels.template.set("forceHidden", true), p12.slices.template.states.create("active", { shiftRadius: l9 }), await this._customizeChartTooltip(h7), p12.slices.template.setAll({ ariaLabel: c14, focusable: true, templateField: "columnSettings" }), p12.data.setAll(t6), await p12.appear(this._getChartSeriesAnimationMS()), await m8.appear(this._getChartAnimationMS()), m8.root.dom.classList.toggle(_4.mediaChartRendered, true);
  }
  _getMinSeriesValue(e14) {
    let t6 = 0;
    return e14.forEach((e15) => t6 = Math.min(e15.value, t6)), t6;
  }
  async _createColumnChart(e14, t6, i10) {
    const { TooltipAm5: a6, ScrollbarAm5: r5 } = await import("./chartCommon-XBQ6P3DX.js"), { CategoryAxisAm5: o4, AxisRendererXAm5: s13, ValueAxisAm5: n11, AxisRendererYAm5: l9, ColumnSeriesAm5: d9 } = await import("./xyChart-QFTL3U3Y.js"), { mediaInfo: m8, root: c14 } = t6, { value: p12, title: u8 } = m8;
    e14.setAll({ wheelX: "panX", wheelY: "zoomX" });
    const f9 = e14.xAxes.push(o4.new(c14, { renderer: s13.new(c14, { inversed: L2(this.container) }), categoryField: w4 }));
    f9.get("renderer").labels.template.setAll({ forceHidden: true });
    const g5 = e14.yAxes.push(n11.new(c14, { renderer: l9.new(c14, { inside: false }), min: this._getMinSeriesValue(p12.series) }));
    g5.get("renderer").labels.template.setAll({ direction: this._getDirection() });
    const M6 = "{categoryX}", _6 = a6.new(c14, { labelText: M6 }), I8 = e14.series.push(d9.new(c14, { name: u8, xAxis: f9, yAxis: g5, valueYField: A3, categoryXField: w4, tooltip: _6 }));
    await this._customizeChartTooltip(_6), I8.columns.template.setAll({ ariaLabel: M6, focusable: true, templateField: "columnSettings" }), p12.series.length > v6 && e14.set("scrollbarX", r5.new(c14, { orientation: "horizontal" })), f9.data.setAll(i10), I8.data.setAll(i10), await I8.appear(this._getChartSeriesAnimationMS()), await e14.appear(this._getChartAnimationMS());
  }
  async _createBarChart(e14, t6, i10) {
    const { TooltipAm5: a6, ScrollbarAm5: r5 } = await import("./chartCommon-XBQ6P3DX.js"), { CategoryAxisAm5: o4, AxisRendererXAm5: s13, ValueAxisAm5: n11, AxisRendererYAm5: l9, ColumnSeriesAm5: d9 } = await import("./xyChart-QFTL3U3Y.js"), { mediaInfo: m8, root: c14 } = t6, { value: p12, title: u8 } = m8;
    e14.setAll({ wheelX: "panY", wheelY: "zoomY" });
    const f9 = e14.yAxes.push(o4.new(c14, { renderer: l9.new(c14, { inversed: true }), categoryField: w4 }));
    f9.get("renderer").labels.template.setAll({ forceHidden: true });
    const g5 = e14.xAxes.push(n11.new(c14, { renderer: s13.new(c14, { inside: false, inversed: L2(this.container) }), min: this._getMinSeriesValue(p12.series) }));
    g5.get("renderer").labels.template.setAll({ direction: this._getDirection() });
    const M6 = "{categoryY}", _6 = a6.new(c14, { labelText: M6 }), I8 = e14.series.push(d9.new(c14, { name: u8, xAxis: g5, yAxis: f9, valueXField: A3, categoryYField: w4, tooltip: _6 }));
    await this._customizeChartTooltip(_6, "vertical"), I8.columns.template.setAll({ ariaLabel: M6, focusable: true, templateField: "columnSettings" }), p12.series.length > v6 && e14.set("scrollbarY", r5.new(c14, { orientation: "vertical" })), f9.data.setAll(i10), I8.data.setAll(i10), await I8.appear(this._getChartSeriesAnimationMS()), await e14.appear(this._getChartAnimationMS());
  }
  async _createLineChart(e14, t6, i10) {
    const { TooltipAm5: a6, ScrollbarAm5: r5 } = await import("./chartCommon-XBQ6P3DX.js"), { CategoryAxisAm5: o4, AxisRendererXAm5: s13, ValueAxisAm5: n11, AxisRendererYAm5: l9, LineSeriesAm5: d9 } = await import("./xyChart-QFTL3U3Y.js"), { root: m8, mediaInfo: c14 } = t6, { value: p12, title: u8 } = c14;
    e14.setAll({ wheelX: "panX", wheelY: "zoomX" });
    const f9 = e14.xAxes.push(o4.new(m8, { renderer: s13.new(m8, { inversed: L2(this.container) }), categoryField: w4 }));
    f9.get("renderer").labels.template.setAll({ forceHidden: true });
    const g5 = e14.yAxes.push(n11.new(m8, { renderer: l9.new(m8, { inside: false }), min: this._getMinSeriesValue(p12.series) }));
    g5.get("renderer").labels.template.setAll({ direction: this._getDirection() });
    const M6 = "{categoryX}", _6 = i10[0]?.lineSettings?.stroke, I8 = a6.new(m8, { getFillFromSprite: !_6, labelText: M6 });
    _6 && I8.get("background")?.setAll({ fill: _6 });
    const C3 = e14.series.push(d9.new(m8, { name: u8, xAxis: f9, yAxis: g5, valueYField: A3, categoryXField: w4, tooltip: I8 }));
    C3.strokes.template.setAll({ templateField: "lineSettings" }), await this._customizeChartTooltip(I8, "vertical"), p12.series.length > v6 && e14.set("scrollbarX", r5.new(m8, { orientation: "horizontal" })), f9.data.setAll(i10), C3.data.setAll(i10), await C3.appear(this._getChartSeriesAnimationMS()), await e14.appear(this._getChartAnimationMS());
  }
  async _createXYChart(e14, t6) {
    const { XYChartAm5: i10, XYCursorAm5: a6 } = await import("./xyChart-QFTL3U3Y.js"), { root: r5, mediaInfo: o4 } = e14, { type: s13 } = o4, n11 = o4?.altText || o4?.title || "", l9 = r5.container.children.push(i10.new(r5, { ariaLabel: n11, focusable: true, panX: true, panY: true }));
    l9.set("cursor", a6.new(r5, {})), "column-chart" === s13 && await this._createColumnChart(l9, e14, t6), "bar-chart" === s13 && await this._createBarChart(l9, e14, t6), "line-chart" === s13 && await this._createLineChart(l9, e14, t6), l9.root.dom.classList.toggle(_4.mediaChartRendered, true);
  }
  _clearMediaRefreshTimer() {
    const { _refreshTimer: e14 } = this;
    e14 && (clearTimeout(e14), this._refreshTimer = null);
  }
  _updateMediaInfoTimestamp(e14) {
    const t6 = Date.now();
    this._refreshIntervalInfo = { timestamp: t6, sourceURL: e14 && this._getImageSource(e14, t6) };
  }
  _setupMediaRefreshTimer() {
    this._clearMediaRefreshTimer();
    const { activeMediaInfo: e14 } = this.viewModel;
    "image" === e14?.type && e14?.refreshInterval > 0 && this._setRefreshTimeout(e14);
  }
  _setRefreshTimeout(e14) {
    const { refreshInterval: t6, value: i10 } = e14, a6 = 6e4 * t6;
    this._updateMediaInfoTimestamp(i10.sourceURL);
    const r5 = setInterval(() => {
      this._updateMediaInfoTimestamp(i10.sourceURL);
    }, a6);
    this._refreshTimer = r5;
  }
  _getImageSource(e14, t6) {
    const i10 = e14.includes("?") ? "&" : "?", [a6, r5 = ""] = e14.split("#");
    return `${a6}${i10}timestamp=${t6}${r5 ? "#" : ""}${r5}`;
  }
};
__decorate([m()], T3.prototype, "_refreshIntervalInfo", void 0), __decorate([m()], T3.prototype, "attributes", null), __decorate([m()], T3.prototype, "activeMediaInfoIndex", null), __decorate([m()], T3.prototype, "description", null), __decorate([m()], T3.prototype, "fieldInfoMap", null), __decorate([m()], T3.prototype, "layer", null), __decorate([m()], T3.prototype, "mediaInfos", null), __decorate([m()], T3.prototype, "popupTemplate", null), __decorate([m()], T3.prototype, "relatedInfos", null), __decorate([m()], T3.prototype, "title", null), __decorate([m({ type: v5 })], T3.prototype, "viewModel", void 0), __decorate([m(), e4("esri/widgets/Feature/t9n/Feature")], T3.prototype, "messages", void 0), T3 = __decorate([a("esri.widgets.Feature.FeatureMedia")], T3);

// node_modules/@arcgis/core/widgets/Feature/support/arcadeFeatureUtils.js
var d7 = "esri.widgets.Feature.support.arcadeFeatureUtils";
var f5 = () => i2.getLogger(d7);
function y6(e14) {
  return ce(de(e14));
}
function m4(e14) {
  return "createQuery" in e14 && "queryFeatures" in e14;
}
async function g2({ graphic: e14, view: r5, options: t6 }) {
  const { isAggregate: a6 } = e14, i10 = e14.layer ?? e14.sourceLayer;
  if (!a6 || !i10 || "2d" !== r5?.type) return [];
  const n11 = await r5.whenLayerView(i10);
  if (!m4(n11)) return [];
  const o4 = n11.createQuery(), s13 = e14.getObjectId();
  o4.aggregateIds = null != s13 ? [s13] : [];
  const { features: c14 } = await n11.queryFeatures(o4, t6);
  return c14;
}
function w5({ layer: e14, aggregatedFeatures: r5, interceptor: t6 }) {
  const { fields: a6, objectIdField: i10, geometryType: n11, spatialReference: o4 } = e14, c14 = "displayField" in e14 ? e14.displayField : void 0;
  return new et({ fields: a6, objectIdField: i10, geometryType: n11, spatialReference: o4, displayField: c14, interceptor: t6, ..."feature" === e14.type ? { templates: e14.templates, typeIdField: e14.typeIdField, types: e14.types } : null, source: r5 });
}
function h5(e14) {
  return e14.isAggregate ? "popup-feature-reduction" : "esri.views.3d.layers.VoxelGraphic" === e14.declaredClass ? "popup-voxel" : n3(e14.origin) || n4(e14.origin) ? "popup-imagery" : "popup";
}
function v7(e14) {
  return { scale: e14?.scale, timeProperties: { currentStart: e14?.timeExtent?.start, currentEnd: e14?.timeExtent?.end, startIncluded: true, endIncluded: true } };
}
function x5(e14) {
  return { $voxel: e14 };
}
function b7(e14) {
  let r5 = null;
  if (e14.origin.layer.fields?.length > 0) {
    r5 = e14.cloneShallow();
    const t6 = e14.origin.layer.fieldsIndex;
    r5.attributes = Object.fromEntries(Object.entries(r5.attributes ?? {}).filter(([e15]) => t6.has(e15)));
  }
  return { $pixel: e14, $imageCollectionItem: r5 };
}
async function F3(e14, r5, t6, a6, i10, n11, o4) {
  let s13 = null;
  if (n11.has("$aggregatedfeatures")) {
    const e15 = await g2({ graphic: r5, view: t6, options: a6 }), n12 = r5.sourceLayer || r5.layer;
    s13 = w5({ layer: n12, aggregatedFeatures: e15, interceptor: i10 });
  }
  return { vars: { $feature: r5, $aggregatedFeatures: s13, $view: v7(t6) }, track: o4 ? await $2(e14, r5, t6) : null, [Symbol.dispose]: () => s13?.[Symbol.dispose]() };
}
function I6(e14) {
  if (c6(e14)) return e14.getTime();
  if ("number" == typeof e14) return e14;
  if ("string" == typeof e14) return new Date(e14).getTime();
  throw new Error(`Unexpected time value: ${e14}`);
}
async function $2(e14, r5, t6) {
  const a6 = r5.sourceLayer || r5.layer;
  if (null == a6 || !("timeInfo" in a6)) return null;
  const n11 = a6.timeInfo?.trackIdField;
  if (null == n11) return null;
  const o4 = r5.getAttribute(n11);
  if (null == o4) return null;
  let s13, l9;
  if ("string" == typeof o4) s13 = `"${n11.replaceAll('"', '""')}" = '${o4.replaceAll("'", "''")}'`;
  else {
    if ("number" != typeof o4) return f5().warn("Expected track id to be a string or number"), null;
    s13 = `"${n11.replaceAll('"', '""')}" = ${o4}`;
  }
  if ("stream" === a6.type && null != t6) {
    const e15 = await t6.whenLayerView(a6), r6 = e15.createQuery();
    r6.returnGeometry = true, r6.where = l3(r6.where, s13), l9 = (await e15.queryFeatures(r6)).features;
  } else {
    if (!("queryFeatures" in a6)) return null;
    {
      const e15 = a6.createQuery();
      e15.returnGeometry = true, e15.where = l3(e15.where, s13), l9 = (await a6.queryFeatures(e15)).features;
    }
  }
  const u8 = a6.fieldsIndex.normalizeFieldName(a6.timeInfo.startField) ?? i3, p12 = a6.timeInfo.endField ? a6.fieldsIndex.normalizeFieldName(a6.timeInfo.endField) : null, d9 = l9.map((r6) => {
    const a7 = r6.getObjectId();
    if (null == a7) throw new Error("Cannot identify observation");
    const i10 = e14.ArcadeFeature.createFromGraphic(r6, t6?.timeZone), n12 = I6(r6.getAttribute(u8));
    return { id: a7, feature: i10, startTime: n12, endTime: null != p12 ? I6(r6.getAttribute(p12)) : n12, stats: { totalDistance: void 0, distance: void 0, speed: void 0, acceleration: void 0 } };
  }).sort((e15, r6) => e15.startTime - r6.startTime), y9 = "esri.TrackGraphic" === r5.declaredClass ? d9.length - 1 : d9.findIndex((e15) => r5.getObjectId() === e15.id);
  if (y9 < 0) throw new Error("Couldn't locate feature in observations");
  return { observations: d9, currentObservationIndex: y9 };
}
async function j4(e14, r5, a6, i10, n11, o4) {
  const s13 = (r5.sourceLayer || r5.layer) ?? void 0;
  return { vars: { $feature: r5, $layer: null != s13 && N3(s13) ? s13 : "scene" === s13?.type && null != s13.associatedLayer ? s13.associatedLayer : void 0, $map: a6, $datastore: s13 && "url" in s13 ? s13.url : void 0, $userInput: i10, $graph: "knowledge-graph-sublayer" === s13?.type ? s13.parentCompositeLayer?.knowledgeGraph : void 0, $view: v7(n11) }, track: o4 ? await $2(e14, r5, n11) : null };
}
async function T4(e14, { arcade: r5, graphic: t6, map: a6, location: i10, view: n11, options: o4, interceptor: s13, arcadeExecutor: c14, usesTrack: l9 }) {
  switch (e14) {
    case "popup":
      return { ...await j4(r5, t6, a6, i10, n11, l9), [Symbol.dispose]() {
      } };
    case "popup-feature-reduction": {
      const e15 = new Set(c14.variablesUsed);
      return await F3(r5, t6, n11, o4, s13, e15, l9);
    }
    case "popup-voxel":
      return { vars: x5(t6), track: null, [Symbol.dispose]() {
      } };
    case "popup-imagery":
      return { vars: b7(t6), track: null, [Symbol.dispose]() {
      } };
    default:
      throw new Error(`Unexpected profile name ${e14}`);
  }
}
async function k3() {
  const [e14, r5, { Feature: t6 }] = await Promise.all([import("./arcade-QXHB4VR7.js"), import("./arcade-KYYAUT5K.js"), import("./Feature-FFC3745A.js")]);
  return { executor: e14, syntaxUtils: r5, ArcadeFeature: t6 };
}
async function E2(t6, a6, i10) {
  const { executor: { createArcadeProfile: n11, createArcadeExecutor: o4 }, syntaxUtils: s13 } = i10, c14 = h5(a6), l9 = n11(c14);
  let u8;
  try {
    u8 = await o4(t6, l9);
  } catch (y9) {
    return f5().error("arcade-executor-error", { error: y9, expression: t6 }), null;
  }
  const p12 = /* @__PURE__ */ new Set();
  u8.variablesUsed.includes("$view") && (s13.scriptUsesViewProperties(u8.syntaxTree, ["scale"]) && p12.add("view-scale"), s13.scriptUsesViewProperties(u8.syntaxTree, ["timeProperties"]) && p12.add("view-time-extent"));
  const d9 = s13.scriptUsesTrack(u8.syntaxTree);
  return { dependencies: p12, async evaluate({ graphic: a7, interceptor: n12, location: o5, map: s14, options: l10, spatialReference: p13, view: m8 }) {
    const g5 = { stack: [], error: void 0, hasError: false };
    try {
      const r5 = __addDisposableResource(g5, await T4(c14, { arcade: i10, graphic: a7, map: s14, location: o5, view: m8, options: l10, interceptor: n12, arcadeExecutor: u8, usesTrack: d9 }), false), w6 = { abortSignal: l10?.signal ?? void 0, interceptor: n12 ?? void 0, rawOutput: true, spatialReference: p13 ?? void 0, timeZone: m8?.timeZone, track: r5.track, console(...e14) {
        f5().info(...e14);
      } };
      try {
        return await u8.executeAsync(r5.vars, w6);
      } catch (y9) {
        if (l10?.signal?.aborted) return;
        return void f5().error("arcade-execution-error", { error: y9, graphic: a7, expression: t6 });
      }
    } catch (w6) {
      g5.error = w6, g5.hasError = true;
    } finally {
      __disposeResources(g5);
    }
  } };
}
async function A4({ expression: e14, graphic: r5 }) {
  return e14 ? E2(e14, r5, await k3()) : null;
}
async function L4(e14, r5) {
  if (!e14?.length) return { dependencies: /* @__PURE__ */ new Set(), expressions: /* @__PURE__ */ new Map() };
  const t6 = await k3(), a6 = /* @__PURE__ */ new Set(), i10 = /* @__PURE__ */ new Map();
  for (const n11 of e14) {
    const e15 = await E2(n11.expression, r5, t6);
    i10.set(`expression/${n11.name}`, e15), e15?.dependencies.forEach((e16) => a6.add(e16));
  }
  return { dependencies: a6, expressions: i10 };
}

// node_modules/@arcgis/core/widgets/Feature/FeatureExpression/FeatureExpressionViewModel.js
var j5 = 1;
var k4 = class extends b {
  constructor(t6) {
    super(t6), this._compileTask = null, this._evaluateTask = null, this.expressionInfo = null, this.graphic = null, this.contentElementViewModel = null, this.interceptor = null, this.location = null, this.view = null, this._createVM = () => {
      const t7 = this.contentElement?.type;
      this.contentElementViewModel?.destroy();
      const e14 = "fields" === t7 ? new d5() : "media" === t7 ? new v5() : "text" === t7 ? new c8() : null;
      this._set("contentElementViewModel", e14);
    }, this._compileThrottled = l5(this._startCompile, () => this.notifyChange("state"), j5, this), this._evaluateThrottled = l5(this._startEvaluate, () => this.notifyChange("state"), j5, this), this.addHandles([l(() => [this.expressionInfo, this.graphic], () => this._compileThrottled(), h), l(() => [this.contentElement], () => this._createVM(), h), f(() => {
      if (!this._compileTask?.finished) return null;
      const t7 = this._compileTask.value, e14 = t7?.dependencies;
      return [t7, this.spatialReference, this.map, this.view, e14?.has("view-scale") ? this.view?.scale : null, e14?.has("view-time-extent") ? this.view?.timeExtent?.start : null, e14?.has("view-time-extent") ? this.view?.timeExtent?.end : null];
    }, ([t7]) => this._evaluateThrottled(t7))]);
  }
  initialize() {
    this.addHandles([this._compileThrottled, this._evaluateThrottled]);
  }
  destroy() {
    this._compileTask = e2(this._compileTask), this._evaluateTask = e2(this._evaluateTask), this.contentElementViewModel?.destroy(), this._set("contentElementViewModel", null);
  }
  get contentElement() {
    return this._evaluateTask?.value;
  }
  get spatialReference() {
    return this.view?.spatialReference ?? null;
  }
  set spatialReference(t6) {
    this._override("spatialReference", t6);
  }
  get state() {
    const { contentElement: t6, contentElementViewModel: e14 } = this;
    return this._compileThrottled.hasPendingUpdates() || this._evaluateThrottled.hasPendingUpdates() || !this._compileTask?.finished || !this._evaluateTask?.finished ? "loading" : t6 || e14 ? "ready" : "disabled";
  }
  get map() {
    return this.view?.map ?? null;
  }
  set map(t6) {
    this._override("map", t6);
  }
  _startCompile() {
    this._evaluateTask = e2(this._evaluateTask), this._compileTask = e2(this._compileTask), this._compileTask = d2(async (t6) => {
      const { expressionInfo: e14, graphic: o4 } = this, i10 = e14?.expression;
      if (!i10 || !o4) return null;
      const s13 = await A4({ expression: i10, graphic: o4 });
      return s2(t6), s13;
    });
  }
  _startEvaluate(t6) {
    this._evaluateTask = e2(this._evaluateTask), this._evaluateTask = d2(async (e14) => {
      const { graphic: o4 } = this;
      if (!t6 || !o4) return null;
      const { interceptor: i10, spatialReference: s13, map: r5, location: a6, view: l9 } = this, p12 = await t6.evaluate({ graphic: o4, interceptor: i10, location: a6, map: r5, options: { signal: e14 }, spatialReference: s13, view: l9 });
      s2(e14);
      const c14 = p12;
      if (!c14 || "esri.arcade.Dictionary" !== c14.declaredClass) return null;
      const m8 = await c14.castAsJsonAsync(e14);
      s2(e14);
      const h7 = m8?.type, v9 = "media" === h7 ? I2.fromJSON(m8) : "text" === h7 ? i5.fromJSON(m8) : "fields" === h7 ? l4.fromJSON(m8) : null;
      return "media" === v9.type && !v9.mediaInfos || "fields" === v9.type && !v9.fieldInfos || "text" === v9.type && !v9.text ? null : v9;
    });
  }
};
__decorate([m()], k4.prototype, "_compileTask", void 0), __decorate([m()], k4.prototype, "_evaluateTask", void 0), __decorate([m({ type: i4 })], k4.prototype, "expressionInfo", void 0), __decorate([m({ type: _3 })], k4.prototype, "graphic", void 0), __decorate([m({ readOnly: true })], k4.prototype, "contentElement", null), __decorate([m({ readOnly: true })], k4.prototype, "contentElementViewModel", void 0), __decorate([m()], k4.prototype, "interceptor", void 0), __decorate([m({ type: _2 })], k4.prototype, "location", void 0), __decorate([m()], k4.prototype, "spatialReference", null), __decorate([m({ readOnly: true })], k4.prototype, "state", null), __decorate([m()], k4.prototype, "map", null), __decorate([m()], k4.prototype, "view", void 0), k4 = __decorate([a("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")], k4);

// node_modules/@arcgis/core/widgets/Feature/FeatureExpression.js
var m5 = "esri-feature";
var u6 = { base: `${m5}-expression`, loadingSpinnerContainer: `${m5}__loading-container` };
var g3 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this._contentWidget = null, this.viewModel = new k4();
  }
  initialize() {
    this.addHandles(l(() => this.viewModel?.contentElementViewModel, () => this._setupExpressionWidget(), h));
  }
  loadDependencies() {
    return c4({ loader: () => import("./calcite-loader-WDQKP4UK.js") });
  }
  destroy() {
    this._destroyContentWidget();
  }
  render() {
    const { state: e14 } = this.viewModel;
    return n2("div", { class: u6.base }, "loading" === e14 ? this._renderLoading() : "disabled" === e14 ? null : this._contentWidget?.render());
  }
  _renderLoading() {
    return n2("div", { class: u6.loadingSpinnerContainer, key: "loading-container" }, n2("calcite-loader", { inline: true, label: "" }));
  }
  _destroyContentWidget() {
    const { _contentWidget: e14 } = this;
    e14 && (e14.viewModel = null, e14.destroy()), this._contentWidget = null;
  }
  _setupExpressionWidget() {
    const { contentElementViewModel: e14, contentElement: t6 } = this.viewModel, o4 = t6?.type;
    this._destroyContentWidget();
    const i10 = e14 ? "fields" === o4 ? new c10({ viewModel: e14 }) : "media" === o4 ? new T3({ viewModel: e14 }) : "text" === o4 ? new l7({ viewModel: e14 }) : null : null;
    this._contentWidget = i10, this.scheduleRender();
  }
};
__decorate([m({ type: k4 })], g3.prototype, "viewModel", void 0), g3 = __decorate([a("esri.widgets.Feature.FeatureExpression")], g3);

// node_modules/@arcgis/core/widgets/FeatureForm/featureFormUtils.js
var R4 = (e14) => {
  const t6 = [];
  if (e14.formTemplate) {
    const { description: r5, title: n11 } = e14.formTemplate;
    e14.fields?.forEach((e15) => {
      const i10 = n11 && i(n11, e15.name), l9 = r5 && i(r5, e15.name);
      (i10 || l9) && t6.push(e15.name);
    });
  }
  return t6;
};

// node_modules/@arcgis/core/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel.js
var F6 = 100;
var _5 = class extends l2(s5(b)) {
  constructor(e14) {
    super(e14), this._loaded = false, this._queryAbortController = null, this._queryPageAbortController = null, this._queryFeatureCountAbortController = null, this.featuresPerPage = 10, this.activeCategory = null, this.allCategories = null, this.description = null, this.graphic = null, this.layer = null, this.map = null, this.orderByFields = null, this.featureCount = 0, this.relationshipId = null, this.showAllEnabled = false, this.title = null, this._cancelQuery = () => {
      const { _queryAbortController: e15 } = this;
      e15 && e15.abort(), this._queryAbortController = null;
    }, this._cancelQueryFeatureCount = () => {
      const { _queryFeatureCountAbortController: e15 } = this;
      e15 && e15.abort(), this._queryFeatureCountAbortController = null;
    }, this._cancelQueryPage = () => {
      const { _queryPageAbortController: e15 } = this;
      e15 && e15.abort(), this._queryPageAbortController = null;
    }, this._queryController = async () => {
      this._cancelQuery();
      const e15 = new AbortController();
      this._queryAbortController = e15, await y(this._query()), this._queryAbortController === e15 && (this._queryAbortController = null);
    }, this._queryFeatureCountController = async () => {
      this._loaded = false, this._cancelQueryFeatureCount();
      const e15 = new AbortController();
      this._queryFeatureCountAbortController = e15, await y(this._queryFeatureCount()), this._queryFeatureCountAbortController === e15 && (this._queryFeatureCountAbortController = null), this._loaded = true;
    }, this._queryPageController = async () => {
      const e15 = new AbortController();
      this._queryPageAbortController = e15, await y(this._queryPage()), this._queryPageAbortController === e15 && (this._queryPageAbortController = null);
    }, this._queryDebounced = L(this._queryController, F6), this._queryFeatureCountDebounced = L(this._queryFeatureCountController, F6), this._queryPageDebounced = L(this._queryPageController, F6), this._query = async () => {
      const { _queryAbortController: e15, relatedFeatures: t6 } = this;
      this.featureCount && ("subtype-group" !== this.relatedLayer?.type || this.activeCategory) && (this._destroyRelatedFeatureViewModels(), this.featurePage = 1, t6.destroyAll(), this.destroyed || t6.addMany(this._sliceFeatures(await this._queryRelatedFeatures({ signal: e15?.signal }))));
    }, this.addHandles([l(() => [this.displayCount, this.graphic, this.layer, this.layer?.loaded, this.map, this.orderByFields, this.relationshipId, this.featuresPerPage, this.showAllEnabled, this.canQuery, this.featureCount, this.activeCategory], () => this._queryDebounced(), h), l(() => [this.featurePage, this.showAllEnabled], () => this._queryPageDebounced()), l(() => [this.layer, this.relationshipId, this.objectId, this.canQuery, this.activeCategory], () => this._queryFeatureCountDebounced())]);
  }
  destroy() {
    this._destroyRelatedFeatureViewModels(), this.relatedFeatures.destroyAll(), this._cancelQuery(), this._cancelQueryFeatureCount(), this._cancelQueryPage();
  }
  set featurePage(e14) {
    const { featuresPerPage: t6, featureCount: r5 } = this, o4 = 1, l9 = Math.ceil(r5 / t6) || 1;
    this._set("featurePage", Math.min(Math.max(e14, o4), l9));
  }
  get featurePage() {
    return this._get("featurePage");
  }
  get orderByFieldsFixedCasing() {
    const { orderByFields: e14, relatedLayer: t6 } = this;
    return e14 && t6?.loaded ? e14.map((e15) => {
      const r5 = e15.clone();
      return r5.field = z(e15.field, t6), r5;
    }) : e14 ?? [];
  }
  get supportsCacheHint() {
    return !!this.layer?.capabilities?.queryRelated?.supportsCacheHint;
  }
  get canLoad() {
    return !!this.map && null != this.relationshipId && "number" == typeof this.objectId;
  }
  get canQuery() {
    const e14 = this.layer?.capabilities?.queryRelated;
    return !!(this.relatedLayer && this.relationship && null != this.relationshipId && null != this.objectId && e14?.supportsCount && e14?.supportsPagination);
  }
  get allCategoriesCount() {
    return this.allCategories?.length ?? 0;
  }
  get categories() {
    const { allCategories: e14 } = this;
    return this.showAllEnabled ? e14 : e14?.slice(0, this.displayCount) ?? null;
  }
  set displayCount(e14) {
    const t6 = 0, r5 = 10, o4 = 3;
    this._set("displayCount", Math.min(Math.max(e14 ?? o4, t6), r5));
  }
  get displayCount() {
    return this._get("displayCount");
  }
  get itemDescriptionFieldName() {
    return this.orderByFieldsFixedCasing[0]?.field || null;
  }
  get objectId() {
    return (this.objectIdField && this.graphic?.attributes?.[this.objectIdField]) ?? null;
  }
  get objectIdField() {
    return this.layer?.objectIdField || null;
  }
  get relatedFeatures() {
    return this._get("relatedFeatures") || new O();
  }
  get relatedLayer() {
    const { layer: e14, map: t6, relationship: r5 } = this;
    if (!e14?.loaded || !t6 || !r5) return null;
    const o4 = "subtype-sublayer" === e14.type && e14.parent && Y(e14.parent) ? e14.parent : e14;
    return ve(t6, o4, r5) ?? null;
  }
  get relatedLayerKeyField() {
    const { relatedLayer: e14, relationshipId: t6 } = this;
    return e14?.loaded && null != t6 ? e14.relationships?.find((e15) => e15.id === t6)?.keyField : null;
  }
  get relatedLayerKeyFields() {
    const { relatedLayer: e14 } = this;
    return e14?.loaded ? e14.relationships?.map((e15) => e15.keyField).filter(N) ?? [] : [];
  }
  get relationship() {
    const { relationshipId: e14, layer: t6 } = this;
    return null != e14 && t6?.loaded ? t6.relationships?.find(({ id: t7 }) => t7 === e14) ?? null : null;
  }
  get relationshipKey() {
    const { relationshipKeyField: e14 } = this;
    return (e14 && this.graphic?.attributes?.[e14]) ?? null;
  }
  get relationshipKeyField() {
    return this.relationship?.keyField || null;
  }
  get relatedFeatureViewModels() {
    return this._get("relatedFeatureViewModels") || new O();
  }
  get state() {
    const { _queryAbortController: e14, _queryFeatureCountAbortController: t6, _queryPageAbortController: r5, canQuery: o4, _loaded: l9, canLoad: a6 } = this;
    return t6 || a6 && !l9 ? "loading" : e14 || r5 ? "querying" : o4 ? "ready" : "disabled";
  }
  getRelatedFeatureByObjectId(e14) {
    return this.relatedFeatures.find((t6) => t6.getObjectId() === e14);
  }
  refresh() {
    this._queryFeatureCountDebounced();
  }
  _destroyRelatedFeatureViewModels() {
    this.relatedFeatureViewModels?.destroyAll();
  }
  async _queryFeatureCount() {
    const { layer: e14, relatedLayer: t6 } = this;
    await e14?.load(), await t6?.load();
    const { _queryFeatureCountAbortController: r5, activeCategory: l9, canQuery: a6, objectId: i10, relatedLayerKeyField: s13, relationshipId: n11, relationshipKey: u8, supportsCacheHint: d9 } = this;
    if (!a6 || !e14 || !t6 || null == i10) return this._set("featureCount", 0), void this._set("allCategories", null);
    if ("subtype-group" === t6?.type && !l9) {
      if (this._set("featureCount", 0), this._destroyRelatedFeatureViewModels(), this.featurePage = 1, this.relatedFeatures.destroyAll(), s13 && null != u8) {
        const { default: e15 } = await import("./uniqueValues-H2RDORR7.js"), { uniqueValueInfos: l10 } = await e15({ layer: t6, sqlWhere: `${s13} = '${u8}'`, field: t6.subtypeField, signal: r5?.signal }), a7 = l10.map(({ count: e16, value: r6 }) => {
          const o4 = t6.subtypes?.find((e17) => e17.code === r6)?.name;
          return null != r6 && o4 ? { count: e16, value: r6, name: o4 } : void 0;
        }).filter(N);
        this._set("allCategories", a7);
      }
      return;
    }
    const { historicMoment: y9, gdbVersion: h7 } = e14, c14 = new u2({ cacheHint: d9, gdbVersion: h7, historicMoment: y9, relationshipId: n11, returnGeometry: false, objectIds: [i10], where: this._getRelationshipWhereClause(t6) }), g5 = await e14.queryRelatedFeaturesCount(c14, { signal: r5?.signal });
    this._set("allCategories", null), this._set("featureCount", g5[i10] || 0);
  }
  _getRelationshipWhereClause(e14) {
    const { activeCategory: t6 } = this, r5 = e14.createQuery(), o4 = "subtypeField" in e14 ? e14.subtypeField : void 0, l9 = t6 && o4 ? `${o4} = ${t6.value}` : void 0, a6 = r5.where;
    return a6 && l9 ? `(${a6}) AND (${l9})` : a6 ?? l9;
  }
  _sliceFeatures(e14) {
    const { showAllEnabled: t6, displayCount: r5 } = this;
    return t6 ? e14 : r5 ? e14.slice(0, r5) : [];
  }
  async _queryPage() {
    const { relatedFeatures: e14, featurePage: t6, showAllEnabled: r5, _queryPageAbortController: o4, featureCount: l9 } = this;
    !r5 || t6 < 2 || !l9 || "subtype-group" === this.relatedLayer?.type && !this.activeCategory || e14.addMany(await this._queryRelatedFeatures({ signal: o4?.signal }));
  }
  async _queryRelatedFeatures(e14) {
    const { displayCount: t6, featureCount: r5, featurePage: o4, featuresPerPage: l9, layer: a6, orderByFieldsFixedCasing: i10, relatedLayer: s13, relatedLayerKeyFields: n11, relationshipId: u8, showAllEnabled: d9, supportsCacheHint: y9 } = this, { canQuery: h7, objectId: c14 } = this;
    if (!h7 || !a6 || !s13 || null == c14) return [];
    const g5 = d9 ? ((o4 - 1) * l9 + r5) % r5 : 0, C3 = d9 ? l9 : t6, F9 = s13.objectIdField, _6 = "subtypeField" in s13 ? s13.subtypeField : void 0, m8 = [...i10.map((e15) => e15.field), ...R4(s13), ...n11, F9, _6].filter(f7), q3 = i10.map((e15) => `${e15.field} ${e15.order}`), { historicMoment: A5, gdbVersion: w6 } = a6, P3 = new u2({ orderByFields: q3, start: g5, num: C3, outFields: m8, cacheHint: y9, historicMoment: A5, gdbVersion: w6, relationshipId: u8, returnGeometry: false, objectIds: [c14], where: this._getRelationshipWhereClause(s13) }), v9 = await a6.queryRelatedFeatures(P3, { signal: e14?.signal }), j6 = v9[c14]?.features || [];
    return "subtype-group" === s13.type && _6 ? j6.forEach((e15) => {
      const t7 = e15.attributes[_6], r6 = s13.findSublayerForSubtypeCode?.(t7);
      e15.sourceLayer = r6, e15.layer = r6;
    }) : j6.forEach((e15) => {
      e15.sourceLayer = s13, e15.layer = s13;
    }), j6;
  }
};
function f7(e14) {
  return null != e14 && "" !== e14;
}
__decorate([m()], _5.prototype, "_loaded", void 0), __decorate([m()], _5.prototype, "_queryAbortController", void 0), __decorate([m()], _5.prototype, "_queryPageAbortController", void 0), __decorate([m()], _5.prototype, "_queryFeatureCountAbortController", void 0), __decorate([m({ value: 1 })], _5.prototype, "featurePage", null), __decorate([m()], _5.prototype, "featuresPerPage", void 0), __decorate([m({ readOnly: true })], _5.prototype, "orderByFieldsFixedCasing", null), __decorate([m({ readOnly: true })], _5.prototype, "supportsCacheHint", null), __decorate([m({ readOnly: true })], _5.prototype, "canLoad", null), __decorate([m({ readOnly: true })], _5.prototype, "canQuery", null), __decorate([m()], _5.prototype, "activeCategory", void 0), __decorate([m({ readOnly: true })], _5.prototype, "allCategories", void 0), __decorate([m({ readOnly: true })], _5.prototype, "allCategoriesCount", null), __decorate([m({ readOnly: true })], _5.prototype, "categories", null), __decorate([m()], _5.prototype, "description", void 0), __decorate([m({ value: 3 })], _5.prototype, "displayCount", null), __decorate([m({ type: _3 })], _5.prototype, "graphic", void 0), __decorate([m({ readOnly: true })], _5.prototype, "itemDescriptionFieldName", null), __decorate([m()], _5.prototype, "layer", void 0), __decorate([m()], _5.prototype, "map", void 0), __decorate([m({ readOnly: true })], _5.prototype, "objectId", null), __decorate([m({ readOnly: true })], _5.prototype, "objectIdField", null), __decorate([m()], _5.prototype, "orderByFields", void 0), __decorate([m({ readOnly: true })], _5.prototype, "relatedFeatures", null), __decorate([m({ readOnly: true })], _5.prototype, "relatedLayer", null), __decorate([m({ readOnly: true })], _5.prototype, "relatedLayerKeyField", null), __decorate([m({ readOnly: true })], _5.prototype, "relatedLayerKeyFields", null), __decorate([m({ readOnly: true })], _5.prototype, "relationship", null), __decorate([m({ readOnly: true })], _5.prototype, "relationshipKey", null), __decorate([m({ readOnly: true })], _5.prototype, "relationshipKeyField", null), __decorate([m({ readOnly: true })], _5.prototype, "featureCount", void 0), __decorate([m({ readOnly: true })], _5.prototype, "relatedFeatureViewModels", null), __decorate([m()], _5.prototype, "relationshipId", void 0), __decorate([m()], _5.prototype, "showAllEnabled", void 0), __decorate([m()], _5.prototype, "state", null), __decorate([m()], _5.prototype, "title", void 0), _5 = __decorate([a("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")], _5);

// node_modules/@arcgis/core/widgets/Feature/FeatureRelationship.js
var b8;
var y7 = "esri-feature";
var I7 = `${y7}-relationship`;
var F7 = { base: I7, listContainer: `${I7}__list`, listItem: `${I7}__list-item`, listItemHidden: `${I7}__list-item--hidden`, listContainerQuerying: `${I7}__list--querying`, featureObserver: `${y7}__feature-observer`, stickySpinnerContainer: `${y7}__sticky-loading-container`, loadingSpinnerContainer: `${y7}__loading-container` };
var C2 = { title: true, description: true };
var M5 = b8 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this._featureElementInfo = null, this._relatedFeatureIntersectionObserverNode = null, this._relatedFeatureIntersectionObserver = new IntersectionObserver(([e15]) => {
      e15?.isIntersecting && this._increaseFeaturePage();
    }, { root: window.document }), this.flowItems = null, this.flowType = "feature-relationship", this.headingLevel = 2, this.viewModel = new _5(), this.messages = null, this.messagesCommon = null, this.visibleElements = { ...C2 }, this._increaseFeaturePage = () => {
      const { state: e15, showAllEnabled: t7, relatedFeatures: s13, featuresPerPage: i10, featurePage: r5 } = this.viewModel;
      "ready" === e15 && t7 && s13.length >= i10 * r5 && this.viewModel.featurePage++;
    };
  }
  initialize() {
    this._featureElementInfo = new l6(), this.addHandles([l(() => [this.viewModel.description, this.viewModel.title, this.headingLevel], () => this._setupFeatureElementInfo(), h), l(() => [this.viewModel.state, this.viewModel.showAllEnabled, this._relatedFeatureIntersectionObserverNode], () => this._handleRelatedFeatureObserverChange()), a2(() => this.viewModel.relatedFeatureViewModels, "change", () => this._setupRelatedFeatureViewModels())]);
  }
  loadDependencies() {
    return c4({ chip: () => import("./calcite-chip-665D3ZV7.js"), icon: () => import("./calcite-icon-YAZUXSRW.js"), list: () => import("./calcite-list-Z3O7DTQI.js"), "list-item": () => import("./calcite-list-item-C7623NT4.js"), loader: () => import("./calcite-loader-WDQKP4UK.js"), notice: () => import("./calcite-notice-NKUYWCPL.js") });
  }
  destroy() {
    this._unobserveRelatedFeatureObserver(), this._featureElementInfo = u(this._featureElementInfo);
  }
  get displayShowAllButton() {
    const { showAllEnabled: e14, featureCount: t6, displayCount: s13, state: i10, allCategoriesCount: r5 } = this.viewModel;
    return !e14 && "ready" === i10 && (!!r5 && (r5 > s13 || 0 === s13) || !!t6 && (t6 > s13 || 0 === s13));
  }
  get displayListItems() {
    const { relatedFeatureViewModels: e14, allCategoriesCount: t6 } = this.viewModel;
    return this.displayShowAllButton || !!e14.length || !!t6;
  }
  get allItemsDescription() {
    const { messages: e14 } = this, { featureCount: t6, allCategories: s13, allCategoriesCount: i10 } = this.viewModel;
    return s3(e14?.numberRecords, { number: c3(s13 ? i10 : t6) });
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get title() {
    const { activeCategory: e14, title: t6 } = this.viewModel;
    return e14?.name ?? t6;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  castVisibleElements(e14) {
    return { ...C2, ...e14 };
  }
  render() {
    const { state: e14 } = this.viewModel;
    return n2("div", { class: this.classes(F7.base, e5.widget) }, this._featureElementInfo?.render(), "loading" === e14 ? this._renderLoading() : "disabled" === e14 ? this._renderRelationshipNotFound() : this._renderRelatedFeatures());
  }
  _selectCategory(e14) {
    const { flowItems: t6, featureVisibleElements: s13, viewModel: i10 } = this;
    t6 && (i10.activeCategory = e14, i10.showAllEnabled = true, t6.push(new b8({ flowItems: t6, featureVisibleElements: s13, visibleElements: { title: false, description: false }, viewModel: i10 })));
  }
  async _selectRecord(e14) {
    const { flowItems: t6, featureVisibleElements: s13 } = this;
    if (!t6) return;
    e14.abilities = { relationshipContent: true };
    const { default: i10 } = await import("./Feature-7YZTA6BM.js");
    t6.push(new i10({ flowItems: t6, flowType: this.flowType, viewModel: e14, visibleElements: s13 }));
  }
  _showAllRecords() {
    const { flowItems: e14 } = this;
    if (!e14) return;
    const { viewModel: t6, featureVisibleElements: s13 } = this;
    t6.showAllEnabled = true;
    const i10 = new b8({ flowItems: e14, featureVisibleElements: s13, visibleElements: { title: false, description: false }, viewModel: t6 });
    e14.push(i10);
  }
  _renderStickyLoading() {
    return "querying" === this.viewModel.state ? n2("div", { class: F7.stickySpinnerContainer, key: "sticky-loader" }, this._renderLoadingIcon()) : null;
  }
  _renderLoadingIcon() {
    return n2("calcite-loader", { inline: true, label: "" });
  }
  _renderLoading() {
    return n2("div", { class: F7.loadingSpinnerContainer, key: "loading-container" }, this._renderLoadingIcon());
  }
  _renderShowAllIconNode() {
    return n2("calcite-icon", { icon: "list", scale: "s", slot: "content-end" });
  }
  _renderChevronIconNode() {
    const e14 = L2(this.container) ? "chevron-left" : "chevron-right";
    return n2("calcite-icon", { icon: e14, scale: "s", slot: "content-end" });
  }
  _renderCategory(e14) {
    const { count: t6, name: s13, value: i10 } = e14, r5 = c3(t6);
    return n2("calcite-list-item", { class: F7.listItem, disabled: !t6, key: i10, label: s13, onCalciteListItemSelect: () => this._selectCategory(e14) }, n2("calcite-chip", { label: r5, scale: "s", slot: "content-end" }, r5), this._renderChevronIconNode());
  }
  _renderRelatedFeature(e14) {
    const { itemDescriptionFieldName: t6 } = this.viewModel, s13 = e14.title;
    e14.description = t6 && e14.formattedAttributes?.global[t6];
    const i10 = "loading" === e14.state;
    return n2("calcite-list-item", { class: this.classes(F7.listItem, { [F7.listItemHidden]: i10 }), description: c2(e14.description ?? ""), key: e14.uid, label: c2(s13), onCalciteListItemSelect: () => this._selectRecord(e14) }, this._renderChevronIconNode());
  }
  _renderShowAllListItem() {
    return this.displayShowAllButton ? n2("calcite-list-item", { description: this.allItemsDescription, key: "show-all-item", label: this.messages?.showAll, onCalciteListItemSelect: () => this._showAllRecords() }, this._renderShowAllIconNode()) : null;
  }
  _renderNoRelatedFeaturesMessage() {
    return n2("calcite-notice", { icon: "information", key: "no-related-features-message", kind: "brand", open: true, scale: "s", width: "full" }, n2("div", { slot: "message" }, this.messages?.noRelatedFeatures));
  }
  _renderFeatureObserver() {
    return n2("div", { afterCreate: this._relatedFeatureIntersectionObserverCreated, bind: this, class: F7.featureObserver, key: "feature-observer" });
  }
  _renderList() {
    const { relatedFeatureViewModels: e14, categories: t6 } = this.viewModel;
    return n2("calcite-list", { displayMode: "flat", label: this.messages?.relatedFeaturesList }, t6?.map((e15) => this._renderCategory(e15)) ?? e14.toArray().map((e15) => this._renderRelatedFeature(e15)), this._renderShowAllListItem());
  }
  _renderRelatedFeatures() {
    const { displayListItems: e14 } = this, { state: t6 } = this.viewModel;
    return n2("div", { class: this.classes(F7.listContainer, { [F7.listContainerQuerying]: "querying" === t6 }), key: "list-container" }, e14 ? this._renderList() : "ready" === t6 ? this._renderNoRelatedFeaturesMessage() : null, this._renderStickyLoading(), this._renderFeatureObserver());
  }
  _renderRelationshipNotFound() {
    return n2("calcite-notice", { icon: "exclamation-mark-triangle", key: "relationship-not-found", kind: "danger", open: true, scale: "s", width: "full" }, n2("div", { slot: "message" }, this.messages?.relationshipNotFound));
  }
  _setupRelatedFeatureViewModels() {
    const { relatedFeatureViewModels: e14 } = this.viewModel, t6 = "related-feature-viewmodels";
    this.removeHandles(t6), e14?.forEach((e15) => {
      this.addHandles(l(() => [e15.title, e15.state], () => this.scheduleRender(), h), t6);
    }), this.scheduleRender();
  }
  _setupFeatureElementInfo() {
    const { headingLevel: e14, visibleElements: t6 } = this, s13 = t6.description && this.description, i10 = t6.title && this.title;
    this._featureElementInfo?.set({ description: s13, title: i10, headingLevel: e14 });
  }
  async _handleRelatedFeatureObserverChange() {
    this._unobserveRelatedFeatureObserver();
    const { state: e14, showAllEnabled: t6 } = this.viewModel;
    await T(0), this._relatedFeatureIntersectionObserverNode && "ready" === e14 && t6 && this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode);
  }
  _relatedFeatureIntersectionObserverCreated(e14) {
    this._relatedFeatureIntersectionObserverNode = e14;
  }
  _unobserveRelatedFeatureObserver() {
    this._relatedFeatureIntersectionObserverNode && this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode);
  }
};
__decorate([m()], M5.prototype, "_relatedFeatureIntersectionObserverNode", void 0), __decorate([m({ readOnly: true })], M5.prototype, "displayShowAllButton", null), __decorate([m({ readOnly: true })], M5.prototype, "displayListItems", null), __decorate([m({ readOnly: true })], M5.prototype, "allItemsDescription", null), __decorate([m()], M5.prototype, "description", null), __decorate([m()], M5.prototype, "featureVisibleElements", void 0), __decorate([m()], M5.prototype, "flowItems", void 0), __decorate([m()], M5.prototype, "flowType", void 0), __decorate([m()], M5.prototype, "headingLevel", void 0), __decorate([m()], M5.prototype, "title", null), __decorate([m({ type: _5 })], M5.prototype, "viewModel", void 0), __decorate([m(), e4("esri/widgets/Feature/t9n/Feature")], M5.prototype, "messages", void 0), __decorate([m(), e4("esri/t9n/common")], M5.prototype, "messagesCommon", void 0), __decorate([m()], M5.prototype, "visibleElements", void 0), __decorate([s4("visibleElements")], M5.prototype, "castVisibleElements", null), M5 = b8 = __decorate([a("esri.widgets.Feature.FeatureRelationship")], M5);

// node_modules/@arcgis/core/widgets/Feature/FeatureUtilityNetworkAssociations.js
var y8 = "esri-feature-utility-network-associations";
var g4 = `${y8}__loading-container`;
var f8 = { base: y8, listContainer: `${y8}__list`, loadingContainer: g4, loadingContainerSticky: `${g4}--sticky` };
var v8 = class extends B {
  constructor(e14, t6) {
    super(e14, t6), this._featureElementInfo = null, this.onSelectAssociationType = () => {
    }, this.flowType = "feature-utility-network-associations", this.flowItems = null, this.parentFeatureViewModel = null, this.headingLevel = 5, this.viewModel = new v2(), this.messages = null, this.messagesCommon = null, this.visibleElements = new s7();
  }
  initialize() {
    this._featureElementInfo = new l6(), this.addHandles([l(() => [this.viewModel.description, this.viewModel.title, this.headingLevel], () => this._setupFeatureElementInfo(), h)]);
  }
  loadDependencies() {
    return c4({ icon: () => import("./calcite-icon-YAZUXSRW.js"), list: () => import("./calcite-list-Z3O7DTQI.js"), "list-item": () => import("./calcite-list-item-C7623NT4.js"), loader: () => import("./calcite-loader-WDQKP4UK.js"), notice: () => import("./calcite-notice-NKUYWCPL.js") });
  }
  destroy() {
    this._featureElementInfo = u(this._featureElementInfo);
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  render() {
    const { state: e14 } = this.viewModel;
    return n2("div", { class: this.classes(f8.base, e5.widget) }, this._featureElementInfo?.render(), "loading" === e14 ? this._renderLoading() : "disabled" === e14 ? this._renderAssociationNotFound() : this._renderContent());
  }
  _renderStickyLoading() {
    return "querying" === this.viewModel.state ? n2("div", { class: f8.loadingContainerSticky, key: "sticky-loader" }, this._renderLoadingIcon()) : null;
  }
  _renderLoadingIcon() {
    return n2("calcite-loader", { inline: true, label: this.messagesCommon.loading });
  }
  _renderLoading() {
    return n2("div", { class: f8.loadingContainer, key: "loading-container" }, this._renderLoadingIcon());
  }
  _renderAssociationNotFound() {
    return n2("calcite-notice", { icon: "information", key: "association-not-found", kind: "info", open: true, scale: "s", width: "full" }, n2("div", { slot: "message" }, this.messages?.noAssociations));
  }
  _renderAssociationType(e14) {
    const { viewModel: t6 } = this, i10 = this._getAssociationTypeTitle(e14);
    return n2("calcite-list-item", { description: c2(e14.description), key: `association-type-${e14.type}`, label: c2(i10), value: e14.type, onCalciteListItemSelect: () => this.onSelectAssociationType({ viewModel: t6, listType: e14, title: i10 }) }, n2("calcite-icon", { flipRtl: true, icon: "chevron-right", scale: "s", slot: "content-end" }));
  }
  _renderAssociations(e14) {
    const { viewModel: t6 } = this;
    return "featureForm" === t6.source || t6.getFeatureCountForAssociationType(e14.type) > 0 ? this._renderAssociationType(e14) : void 0;
  }
  _renderContent() {
    const { messages: e14, viewModel: t6 } = this, { state: i10, associationTypes: o4 } = t6;
    return n2("div", { class: f8.listContainer, key: "list-container" }, "ready" === i10 ? n2("div", null, n2("calcite-list", { displayMode: "flat", label: e14?.associationsList }, o4.map((e15) => this._renderAssociations(e15)))) : null, this._renderStickyLoading());
  }
  _getAssociationTypeTitle(e14) {
    const { messages: t6 } = this;
    if (e14.title) return e14.title;
    switch (e14.type) {
      case "attachment":
        return t6.associationsAttachments;
      case "connectivity":
        return t6.associationsConnectivity;
      case "structure":
        return t6.associationsStructure;
      case "content":
        return t6.associationsContents;
      case "container":
        return t6.associationsContainer;
    }
  }
  _setupFeatureElementInfo() {
    const { headingLevel: e14, visibleElements: t6 } = this, i10 = t6.description && this.description, o4 = t6.title && this.title;
    this._featureElementInfo?.set({ description: i10, title: o4, headingLevel: e14 });
  }
};
__decorate([m({ constructOnly: true })], v8.prototype, "onSelectAssociationType", void 0), __decorate([m()], v8.prototype, "flowType", void 0), __decorate([m()], v8.prototype, "flowItems", void 0), __decorate([m()], v8.prototype, "parentFeatureViewModel", void 0), __decorate([m()], v8.prototype, "featureVisibleElements", void 0), __decorate([m()], v8.prototype, "description", null), __decorate([m()], v8.prototype, "headingLevel", void 0), __decorate([m()], v8.prototype, "title", null), __decorate([m({ type: v2 })], v8.prototype, "viewModel", void 0), __decorate([m(), e4("esri/widgets/Feature/t9n/Feature")], v8.prototype, "messages", void 0), __decorate([m(), e4("esri/t9n/common")], v8.prototype, "messagesCommon", void 0), __decorate([m({ type: s7, nonNullable: true })], v8.prototype, "visibleElements", void 0), v8 = __decorate([a("esri.widgets.Feature.FeatureUtilityNetworkAssociations")], v8);

// node_modules/@arcgis/core/arcade/featureset/support/FeatureSetQueryInterceptor.js
var e12 = class {
  constructor(e14, a6) {
    this.preLayerQueryCallback = e14, this.preRequestCallback = a6, this.preLayerQueryCallback || (this.preLayerQueryCallback = (e15) => {
    }), this.preRequestCallback || (this.preLayerQueryCallback = (e15) => {
    });
  }
};

// node_modules/@arcgis/core/widgets/Feature/FeatureViewModel.js
var te;
var ie = 1;
var se2 = "content-view-models";
var oe2 = "relationship-view-models";
var re = "association-view-models";
var ae = { attachmentsContent: true, chartAnimation: true, customContent: true, expressionContent: true, fieldsContent: true, mediaContent: true, textContent: true, relationshipContent: true, utilityNetworkAssociationsContent: true };
var _a;
var ne = (_a = class extends s5(b) {
  constructor(e14) {
    super(e14), this._error = null, this._graphicChangedTask = null, this._evaluateExpressionAttributesTask = null, this._associationVMAbortController = null, this._expressionAttributes = null, this._graphicExpressionAttributes = null, this.abilities = { ...ae }, this.content = null, this.contentViewModels = [], this.description = null, this.defaultPopupTemplateEnabled = false, this.formattedAttributes = null, this.graphic = null, this.lastEditInfo = null, this.location = null, this.relatedInfos = /* @__PURE__ */ new Map(), this.title = "", this.view = null, this._graphicChangedThrottled = l5(this._graphicChanged, () => this.notifyChange("waitingForContent"), ie, this), this._isAllowedContentType = (e15) => {
      const { abilities: t6 } = this;
      return "attachments" === e15.type && !!t6.attachmentsContent || "custom" === e15.type && !!t6.customContent || "fields" === e15.type && !!t6.fieldsContent || "media" === e15.type && !!t6.mediaContent || "text" === e15.type && !!t6.textContent || "expression" === e15.type && !!t6.expressionContent || "relationship" === e15.type && !!t6.relationshipContent || "utility-network-associations" === e15.type && !!t6.utilityNetworkAssociationsContent;
    }, this._evaluateExpressionAttributesThrottled = l5(this._evaluateExpressionAttributes, () => this.notifyChange("waitingForContent"), ie, this), this.addHandles([l(() => [this.graphic, this._effectivePopupTemplate, this.abilities, this.timeZone], () => this._graphicChangedThrottled(), h), f(() => {
      if (!this._graphicChangedTask?.finished || null == this._graphicChangedTask.value) return null;
      const e15 = this._graphicChangedTask.value, t6 = e15?.expressionInfos?.dependencies;
      return [e15, t6?.has("view-scale") ? this.view?.scale : null, t6?.has("view-time-extent") ? this.view?.timeExtent?.start : null, t6?.has("view-time-extent") ? this.view?.timeExtent?.end : null];
    }, ([e15]) => this._evaluateExpressionAttributesThrottled(e15))]);
  }
  initialize() {
    this.addHandles([this._graphicChangedThrottled, this._evaluateExpressionAttributesThrottled]);
  }
  destroy() {
    this._clear(), this._graphicChangedTask = e2(this._graphicChangedTask), this._evaluateExpressionAttributesTask = e2(this._evaluateExpressionAttributesTask), this._error = null, this.graphic = null, this._destroyContentViewModels(), this.relatedInfos.clear();
  }
  get _effectivePopupTemplate() {
    return null != this.graphic ? this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled) : null;
  }
  get _fieldInfoMap() {
    return se(fe(this._effectivePopupTemplate), this._sourceLayer);
  }
  get _sourceLayer() {
    return x(this.graphic);
  }
  castAbilities(e14) {
    return { ...ae, ...e14 };
  }
  get isFeatureFromTable() {
    return this._sourceLayer?.isTable || false;
  }
  get state() {
    return this.graphic ? this._error ? "error" : this.waitingForContent ? "loading" : "ready" : "disabled";
  }
  get spatialReference() {
    return this.view?.spatialReference ?? null;
  }
  set spatialReference(e14) {
    this._override("spatialReference", e14);
  }
  get timeZone() {
    return this.view?.timeZone ?? e3;
  }
  set timeZone(e14) {
    this._overrideIfSome("timeZone", e14);
  }
  get map() {
    return this.view?.map || null;
  }
  set map(e14) {
    this._override("map", e14);
  }
  get waitingForContent() {
    const { _graphicChangedThrottled: e14, _evaluateExpressionAttributesThrottled: t6, _graphicChangedTask: i10, _evaluateExpressionAttributesTask: s13, _associationVMAbortController: o4 } = this;
    return e14.hasPendingUpdates() || t6.hasPendingUpdates() || null != i10 && !i10.finished || null != s13 && !s13.finished || !!o4;
  }
  setActiveMedia(e14, t6) {
    const i10 = this.contentViewModels[e14];
    i10 instanceof v5 && i10.setActiveMedia(t6);
  }
  nextMedia(e14) {
    const t6 = this.contentViewModels[e14];
    t6 instanceof v5 && t6.next();
  }
  previousMedia(e14) {
    const t6 = this.contentViewModels[e14];
    t6 instanceof v5 && t6.previous();
  }
  async updateGeometry() {
    const { graphic: e14, spatialReference: t6, _sourceLayer: i10 } = this;
    await i10?.load();
    const s13 = i10?.objectIdField;
    if (!s13 || !e14 || !i10) return;
    const o4 = e14?.attributes?.[s13];
    if (null == o4) return;
    const r5 = [o4];
    if (!e14.geometry) {
      const s14 = await me({ layer: i10, graphic: e14, outFields: [], objectIds: r5, returnGeometry: true, spatialReference: t6 }), o5 = s14?.geometry;
      o5 && (e14.geometry = o5);
    }
  }
  _clear() {
    this._set("title", ""), this._set("content", null), this._set("formattedAttributes", null);
  }
  _graphicChanged() {
    this._evaluateExpressionAttributesTask = e2(this._evaluateExpressionAttributesTask), this._graphicChangedTask = e2(this._graphicChangedTask), this._graphicChangedTask = d2(async (e14) => {
      this._error = null, this._clear();
      const { graphic: t6 } = this;
      try {
        if (!t6) return null;
        const { _sourceLayer: i10, _effectivePopupTemplate: s13 } = this, o4 = this.spatialReference;
        await be({ graphic: t6, popupTemplate: s13, layer: i10, spatialReference: o4 }, { signal: e14 });
        const [{ value: r5 }, { value: a6 }] = await j([this._getContent(), this._getTitle()]), [, { value: n11 }] = await j([this._checkForRelatedFeatures({ signal: e14 }), L4(s13?.expressionInfos, t6)]);
        return { expressionInfos: n11, content: r5, title: a6 };
      } catch (i10) {
        throw d(i10) || (this._error = i10, i2.getLogger(this).error("error", "The popupTemplate could not be displayed for this feature.", { error: i10, graphic: t6, popupTemplate: this._effectivePopupTemplate })), i10;
      }
    });
  }
  _compileContentElement(e14, t6) {
    return "attachments" === e14.type ? this._compileAttachments(e14, t6) : "custom" === e14.type ? this._compileCustom(e14, t6) : "fields" === e14.type ? this._compileFields(e14, t6) : "media" === e14.type ? this._compileMedia(e14, t6) : "text" === e14.type ? this._compileText(e14, t6) : "expression" === e14.type ? this._compileExpression(e14, t6) : "relationship" === e14.type ? this._compileRelationship(e14, t6) : "utility-network-associations" === e14.type ? this._compileUtilityNetworkAssociation(e14, t6) : void 0;
  }
  _compileContent(e14) {
    if (this._destroyContentViewModels(), this.graphic) return Array.isArray(e14) ? e14.filter(this._isAllowedContentType).map((e15, t6) => this._compileContentElement(e15, t6)).filter(N) : "string" == typeof e14 ? this._compileText(new i5({ text: e14 }), 0).text : e14;
  }
  _destroyContentViewModels() {
    this.removeHandles(oe2), this.removeHandles(se2), this.contentViewModels.forEach((e14) => e14 && !e14.destroyed && e14.destroy()), this._set("contentViewModels", []);
  }
  _matchesFeature(e14, t6) {
    const i10 = e14?.graphic?.getObjectId(), s13 = t6?.getObjectId();
    return null != i10 && null != s13 && i10 === s13;
  }
  _setRelatedFeaturesViewModels({ relatedFeatureViewModels: e14, relatedFeatures: t6, map: i10 }) {
    const { view: s13, spatialReference: o4, timeZone: r5 } = this;
    t6?.filter(Boolean).forEach((t7) => {
      e14.some((e15) => this._matchesFeature(e15, t7)) || e14.add(new te({ abilities: { relationshipContent: false }, map: i10, view: s13, spatialReference: o4, timeZone: r5, graphic: t7 }));
    }), e14.forEach((i11) => {
      const s14 = t6?.find((e15) => this._matchesFeature(i11, e15));
      s14 || e14.remove(i11);
    });
  }
  _setExpressionContentVM(e14, t6) {
    const i10 = this.formattedAttributes, { contentElement: s13, contentElementViewModel: o4 } = e14, r5 = s13?.type;
    o4 && r5 && ("fields" === r5 && (this._createFieldsFormattedAttributes({ contentElement: s13, contentElementIndex: t6, formattedAttributes: i10 }), o4.set(this._createFieldsVMParams(s13, t6))), "media" === r5 && (this._createMediaFormattedAttributes({ contentElement: s13, contentElementIndex: t6, formattedAttributes: i10 }), o4.set(this._createMediaVMParams(s13, t6))), "text" === r5 && o4.set(this._createTextVMParams(s13)));
  }
  _compileRelationship(e14, t6) {
    const { displayCount: i10, orderByFields: s13, relationshipId: o4, title: r5, description: a6 } = e14, { _sourceLayer: n11, graphic: l9, map: p12 } = this;
    if (!Y(n11)) return;
    const c14 = new _5({ displayCount: i10, graphic: l9, orderByFields: s13, relationshipId: o4, layer: n11, map: p12, ...this._compileTitleAndDesc({ title: r5, description: a6 }) });
    return this.contentViewModels[t6] = c14, this.addHandles(a2(() => c14.relatedFeatures, "change", () => this._setRelatedFeaturesViewModels(c14)), oe2), e14;
  }
  _matchesGlobalFeature(e14, t6) {
    return e14.association.equals(t6.association);
  }
  _setUpUtilityNetworkAssociationsViewModels(e14, t6, i10) {
    const { view: s13, spatialReference: o4, timeZone: r5 } = this;
    e14.forEach((i11, s14) => {
      const o5 = t6.get(s14);
      o5 ? i11.forEach((t7) => {
        o5.find((e15) => this._matchesGlobalFeature(t7, e15)) || (i11.remove(t7), 0 === i11.length && e14.delete(s14));
      }) : (i11.removeAll(), e14.delete(s14));
    }), t6.forEach((t7, n11) => {
      const l9 = e14.get(n11) || new O();
      t7?.filter(Boolean).forEach((e15, t8) => {
        if (!l9.some((t9) => this._matchesGlobalFeature(t9, e15))) {
          const { association: a6, feature: n12, terminalName: p12, title: c14 } = e15;
          l9.add({ title: c14, association: a6, featureViewModel: new te({ abilities: { utilityNetworkAssociationsContent: false }, map: i10, view: s13, spatialReference: o4, timeZone: r5, graphic: n12 }), terminalName: p12 }, t8);
        }
      }), e14.set(n11, l9);
    });
  }
  _compileUtilityNetworkAssociation(e14, t6) {
    const { displayCount: i10, title: s13, description: o4, associationTypes: r5 } = e14, { _sourceLayer: a6, graphic: n11, map: l9 } = this;
    if (!ee(a6)) return;
    const p12 = new v2({ graphic: n11, displayCount: i10, associationTypes: r5, layer: a6, map: l9, ...this._compileTitleAndDesc({ title: s13, description: o4 }) });
    return this.contentViewModels[t6] = p12, this.addHandles([l(() => p12.associationFeatures.values(), () => this._setUpUtilityNetworkAssociationsViewModels(p12.associationViewModels, p12.associationFeatures, p12.map))], re), e14;
  }
  _compileExpression(e14, t6) {
    const { expressionInfo: i10 } = e14, { graphic: s13, map: o4, spatialReference: r5, view: a6, location: n11 } = this, l9 = new k4({ expressionInfo: i10, graphic: s13, interceptor: te.interceptor, map: o4, spatialReference: r5, view: a6, location: n11 });
    return this.contentViewModels[t6] = l9, this.addHandles(l(() => l9.contentElementViewModel, () => this._setExpressionContentVM(l9, t6), h), se2), e14;
  }
  _compileAttachments(e14, t6) {
    const { graphic: i10 } = this, { description: s13, title: o4, orderByFields: r5, attachmentKeywords: a6, attachmentTypes: n11 } = e14;
    return this.contentViewModels[t6] = new s8({ attachmentKeywords: a6, attachmentTypes: n11, graphic: i10, orderByFields: r5, ...this._compileTitleAndDesc({ title: o4, description: s13 }) }), e14;
  }
  _compileCustom(e14, t6) {
    const { graphic: i10 } = this, { creator: s13, destroyer: o4 } = e14;
    return this.contentViewModels[t6] = new c8({ graphic: i10, creator: s13, destroyer: o4 }), e14;
  }
  _compileTitleAndDesc({ title: e14, description: t6 }) {
    const { _fieldInfoMap: i10, _sourceLayer: s13, graphic: o4, formattedAttributes: r5 } = this, a6 = o4?.attributes, n11 = this._expressionAttributes, l9 = r5.global;
    return { title: Q({ attributes: a6, fieldInfoMap: i10, globalAttributes: l9, expressionAttributes: n11, layer: s13, text: e14 }), description: Q({ attributes: a6, fieldInfoMap: i10, globalAttributes: l9, expressionAttributes: n11, layer: s13, text: t6 }) };
  }
  _createFieldsVMParams(e14, t6) {
    const i10 = this._effectivePopupTemplate, s13 = this.formattedAttributes, o4 = { ...s13?.global, ...s13?.content[t6] }, r5 = !!e14?.fieldInfos, a6 = e14?.fieldInfos || i10?.fieldInfos, n11 = a6?.filter(({ fieldName: e15 }) => !!e15 && (U(e15) || he(e15) || o4.hasOwnProperty(e15))), l9 = i10?.expressionInfos, { description: p12, title: c14 } = e14;
    return { attributes: o4, expressionInfos: l9, fieldInfos: n11, isContentFieldInfos: r5, graphic: this.graphic, layer: this._sourceLayer, ...this._compileTitleAndDesc({ title: c14, description: p12 }) };
  }
  _compileFields(e14, t6) {
    const i10 = e14.clone(), s13 = new d5(this._createFieldsVMParams(e14, t6));
    return this.contentViewModels[t6] = s13, i10.fieldInfos = s13.formattedFieldInfos.slice(), i10;
  }
  _createMediaVMParams(e14, t6) {
    const { abilities: i10, graphic: s13, _fieldInfoMap: o4, _effectivePopupTemplate: r5, relatedInfos: a6, _sourceLayer: n11, _expressionAttributes: l9 } = this, p12 = this.formattedAttributes, c14 = s13?.attributes ?? {}, { description: d9, mediaInfos: h7, title: u8 } = e14;
    return { abilities: { chartAnimation: i10.chartAnimation }, activeMediaInfoIndex: e14.activeMediaInfoIndex || 0, attributes: c14, graphic: s13, layer: n11, fieldInfoMap: o4, formattedAttributes: { ...p12?.global, ...p12?.content[t6] }, expressionAttributes: l9, mediaInfos: h7, popupTemplate: r5, relatedInfos: a6, ...this._compileTitleAndDesc({ title: u8, description: d9 }) };
  }
  _compileMedia(e14, t6) {
    const i10 = e14.clone(), s13 = new v5(this._createMediaVMParams(e14, t6));
    return i10.mediaInfos = s13.formattedMediaInfos.slice(), this.contentViewModels[t6] = s13, i10;
  }
  _createTextVMParams(e14) {
    const { graphic: t6, _fieldInfoMap: i10, _sourceLayer: s13, _expressionAttributes: o4 } = this;
    if (e14 && e14.text) {
      const r5 = t6?.attributes ?? {}, a6 = this.formattedAttributes?.global ?? {};
      e14.text = Q({ attributes: r5, fieldInfoMap: i10, globalAttributes: a6, expressionAttributes: o4, layer: s13, text: e14.text });
    }
    return { graphic: t6, creator: e14.text };
  }
  _compileText(e14, t6) {
    const i10 = e14.clone();
    return this.contentViewModels[t6] = new c8(this._createTextVMParams(i10)), i10;
  }
  _compileLastEditInfo() {
    const { _effectivePopupTemplate: e14, _sourceLayer: t6, graphic: i10, timeZone: s13 } = this;
    if (!e14) return;
    const { lastEditInfoEnabled: o4 } = e14, r5 = t6?.editFieldsInfo;
    return o4 && r5 ? ue(r5, i10?.attributes, s13, t6) : void 0;
  }
  _compileTitle(e14) {
    const { _fieldInfoMap: t6, _sourceLayer: i10, graphic: s13, _expressionAttributes: o4 } = this, r5 = s13?.attributes ?? {}, a6 = this.formattedAttributes?.global ?? {};
    return Q({ attributes: r5, fieldInfoMap: t6, globalAttributes: a6, expressionAttributes: o4, layer: i10, text: e14 });
  }
  async _getTitle() {
    const { _effectivePopupTemplate: e14, graphic: t6 } = this;
    return t6 ? q({ type: "title", value: e14?.title, event: { graphic: t6 } }) : null;
  }
  async _getContent() {
    const { _effectivePopupTemplate: e14, graphic: t6 } = this;
    return t6 ? q({ type: "content", value: e14?.content, event: { graphic: t6 } }) : null;
  }
  _evaluateExpressionAttributes({ title: e14, content: t6, expressionInfos: i10 }) {
    this._evaluateExpressionAttributesTask = e2(this._evaluateExpressionAttributesTask), this._evaluateExpressionAttributesTask = d2(async (s13) => {
      const { graphic: o4, map: r5, view: a6, spatialReference: n11, location: p12 } = this;
      try {
        if (!o4) return;
        let l9;
        if (null != i10) {
          const e15 = [];
          for (const [t7, l10] of i10.expressions.entries()) null != l10 ? e15.push(l10.evaluate({ graphic: o4, interceptor: te.interceptor, location: p12, map: r5, options: { signal: s13 }, spatialReference: n11, view: a6 }).then((e16) => [t7, "string" == typeof e16 ? y6(e16) : e16]).catch(() => [t7, void 0])) : e15.push(Promise.resolve([t7, void 0]));
          l9 = Object.fromEntries(await Promise.all(e15)), s2(s13);
        }
        this._expressionAttributes = l9, this._graphicExpressionAttributes = { ...o4.attributes, ...l9 }, this._set("formattedAttributes", this._createFormattedAttributes(t6)), this._set("title", this._compileTitle(e14)), this._set("lastEditInfo", this._compileLastEditInfo() || null), this._set("content", this._compileContent(t6) || null);
      } catch (c14) {
        d(c14) || (this._error = c14, i2.getLogger(this).error("error", "The popupTemplate could not be displayed for this feature.", { error: c14, graphic: o4, popupTemplate: this._effectivePopupTemplate }));
      }
    });
  }
  _createMediaFormattedAttributes({ contentElement: e14, contentElementIndex: t6, formattedAttributes: i10 }) {
    const { _effectivePopupTemplate: s13, graphic: o4, relatedInfos: r5, _sourceLayer: a6, _fieldInfoMap: n11, _graphicExpressionAttributes: l9, timeZone: p12 } = this;
    i10.content[t6] = ye({ attributes: { ...l9, ...e14.attributes }, fieldInfoMap: n11, fieldInfos: s13?.fieldInfos, graphic: o4, layer: a6, relatedInfos: r5, timeZone: p12 });
  }
  _createFieldsFormattedAttributes({ contentElement: e14, contentElementIndex: t6, formattedAttributes: i10 }) {
    if (e14.fieldInfos) {
      const { graphic: s13, relatedInfos: o4, _sourceLayer: r5, _fieldInfoMap: a6, _graphicExpressionAttributes: n11, timeZone: l9 } = this;
      i10.content[t6] = ye({ attributes: { ...n11, ...e14.attributes }, fieldInfoMap: a6, fieldInfos: e14.fieldInfos, graphic: s13, isContentFieldInfos: true, layer: r5, relatedInfos: o4, timeZone: l9 });
    }
  }
  _createFormattedAttributes(e14) {
    const { _effectivePopupTemplate: t6, graphic: i10, relatedInfos: s13, _sourceLayer: o4, _fieldInfoMap: r5, _graphicExpressionAttributes: a6, timeZone: n11 } = this, l9 = t6?.fieldInfos, p12 = { global: ye({ attributes: a6, fieldInfoMap: r5, fieldInfos: l9, graphic: i10, layer: o4, relatedInfos: s13, timeZone: n11 }), content: [] };
    return Array.isArray(e14) && e14.forEach((e15, t7) => {
      "fields" === e15.type && this._createFieldsFormattedAttributes({ contentElement: e15, contentElementIndex: t7, formattedAttributes: p12 }), "media" === e15.type && this._createMediaFormattedAttributes({ contentElement: e15, contentElementIndex: t7, formattedAttributes: p12 });
    }), p12;
  }
  _checkForRelatedFeatures(e14) {
    const { graphic: t6, _effectivePopupTemplate: i10 } = this;
    return this._queryRelatedInfos(t6, fe(i10), e14);
  }
  async _queryRelatedInfos(e14, t6, i10) {
    const { relatedInfos: s13, _sourceLayer: o4 } = this;
    s13.clear();
    const r5 = null != o4?.associatedLayer ? await o4?.associatedLayer.load(i10) : o4;
    if (!r5 || !e14) return;
    const a6 = t6.filter((e15) => !!e15.fieldName && he(e15.fieldName));
    if (!a6?.length) return;
    t6.forEach((e15) => this._configureRelatedInfo(e15, r5));
    const n11 = await v4({ relatedInfos: s13, layer: r5 }, i10);
    Object.keys(n11).forEach((e15) => {
      const t7 = s13.get(e15.toString()), i11 = n11[e15]?.value;
      t7 && i11 && (t7.layerInfo = i11.data);
    });
    const l9 = await T2({ graphic: e14, relatedInfos: s13, layer: r5 }, i10);
    Object.keys(l9).forEach((e15) => {
      g(l9[e15]?.value, s13.get(e15.toString()));
    });
  }
  _configureRelatedInfo(e14, t6) {
    const { relatedInfos: i10 } = this, s13 = h4(e14.fieldName || "");
    if (!s13) return;
    const { layerId: o4, fieldName: r5 } = s13;
    if (!o4) return;
    const a6 = i10.get(o4.toString()) || b6(o4, t6);
    a6 && (q2({ relatedInfo: a6, fieldName: r5, fieldInfo: e14 }), this.relatedInfos.set(o4, a6));
  }
}, te = _a, _a.interceptor = new e12(Ce, Ze), _a);
__decorate([m()], ne.prototype, "_error", void 0), __decorate([m()], ne.prototype, "_graphicChangedTask", void 0), __decorate([m()], ne.prototype, "_evaluateExpressionAttributesTask", void 0), __decorate([m()], ne.prototype, "_associationVMAbortController", void 0), __decorate([m({ readOnly: true })], ne.prototype, "_effectivePopupTemplate", null), __decorate([m({ readOnly: true })], ne.prototype, "_fieldInfoMap", null), __decorate([m({ readOnly: true })], ne.prototype, "_sourceLayer", null), __decorate([m()], ne.prototype, "abilities", void 0), __decorate([s4("abilities")], ne.prototype, "castAbilities", null), __decorate([m({ readOnly: true })], ne.prototype, "content", void 0), __decorate([m({ readOnly: true })], ne.prototype, "contentViewModels", void 0), __decorate([m()], ne.prototype, "description", void 0), __decorate([m({ type: Boolean })], ne.prototype, "defaultPopupTemplateEnabled", void 0), __decorate([m({ readOnly: true })], ne.prototype, "isFeatureFromTable", null), __decorate([m({ readOnly: true })], ne.prototype, "state", null), __decorate([m({ readOnly: true })], ne.prototype, "formattedAttributes", void 0), __decorate([m({ type: _3 })], ne.prototype, "graphic", void 0), __decorate([m({ readOnly: true })], ne.prototype, "lastEditInfo", void 0), __decorate([m({ type: _2 })], ne.prototype, "location", void 0), __decorate([m({ readOnly: true })], ne.prototype, "relatedInfos", void 0), __decorate([m({ type: f2 })], ne.prototype, "spatialReference", null), __decorate([m()], ne.prototype, "timeZone", null), __decorate([m({ readOnly: true })], ne.prototype, "title", void 0), __decorate([m()], ne.prototype, "map", null), __decorate([m({ readOnly: true })], ne.prototype, "waitingForContent", null), __decorate([m()], ne.prototype, "view", void 0), ne = te = __decorate([a("esri.widgets.Feature.FeatureViewModel")], ne);

// node_modules/@arcgis/core/widgets/Feature/resources.js
var e13 = "esri-feature";
var t5 = { base: e13, container: `${e13}__size-container`, title: `${e13}__title`, main: `${e13}__main-container`, btn: `${e13}__button`, icon: `${e13}__icon`, content: `${e13}__content`, contentNode: `${e13}__content-node`, contentNodeText: `${e13}__content-node--text`, contentElement: `${e13}__content-element`, text: `${e13}__text`, lastEditedInfo: `${e13}__last-edited-info`, fields: `${e13}__fields`, fieldHeader: `${e13}__field-header`, fieldData: `${e13}__field-data`, fieldDataDate: `${e13}__field-data--date`, loadingSpinnerContainer: `${e13}__loading-container` };

// node_modules/@arcgis/core/widgets/Feature/support/FeatureContentMixin.js
var n10 = (n11) => {
  const i10 = n11;
  let d9 = class extends i10 {
    constructor() {
      super(...arguments), this.renderNodeContent = (o4) => e9(o4) && !o4.destroyed ? n2("div", { class: t5.contentNode, key: o4 }, o4.render()) : o4 instanceof HTMLElement ? n2("div", { afterCreate: this._attachToNode, bind: o4, class: t5.contentNode, key: o4 }) : o3(o4) ? n2("div", { afterCreate: this._attachToNode, bind: o4.domNode, class: t5.contentNode, key: o4 }) : null;
    }
    _attachToNode(o4) {
      const t6 = this;
      o4.appendChild(t6);
    }
  };
  return d9 = __decorate([a("esri.widgets.Feature.support.FeatureContentMixin")], d9), d9;
};

// node_modules/@arcgis/core/widgets/Feature.js
var b9 = { title: true, content: true, lastEditedInfo: true };
var F8 = class extends n10(B) {
  constructor(e14, t6) {
    super(e14, t6), this._contentWidgets = [], this.flowType = "feature", this.flowItems = null, this.headingLevel = 2, this.messages = null, this.messagesCommon = null, this.visibleElements = { ...b9 }, this.viewModel = new ne();
  }
  initialize() {
    this.addHandles(l(() => this.viewModel?.contentViewModels, () => this._setupContentWidgets(), h));
  }
  loadDependencies() {
    return c4({ notice: () => import("./calcite-notice-NKUYWCPL.js"), loader: () => import("./calcite-loader-WDQKP4UK.js") });
  }
  destroy() {
    this._destroyContentWidgets();
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e14) {
    this.viewModel.graphic = e14;
  }
  get defaultPopupTemplateEnabled() {
    return this.viewModel.defaultPopupTemplateEnabled;
  }
  set defaultPopupTemplateEnabled(e14) {
    this.viewModel.defaultPopupTemplateEnabled = e14;
  }
  get isTable() {
    return this.viewModel.isFeatureFromTable;
  }
  get icon() {
    return "polygon";
  }
  set icon(e14) {
    this._overrideIfSome("icon", e14);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e14) {
    this._overrideIfSome("label", e14);
  }
  get location() {
    return this.viewModel.location;
  }
  set location(e14) {
    this.viewModel.location = e14;
  }
  get spatialReference() {
    return this.viewModel.spatialReference;
  }
  set spatialReference(e14) {
    this.viewModel.spatialReference = e14;
  }
  get timeZone() {
    return this.viewModel.timeZone;
  }
  set timeZone(e14) {
    this.viewModel.timeZone = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  castVisibleElements(e14) {
    return { ...b9, ...e14 };
  }
  get map() {
    return this.viewModel.map;
  }
  set map(e14) {
    this.viewModel.map = e14;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e14) {
    this.viewModel.view = e14;
  }
  setActiveMedia(e14, t6) {
    return this.viewModel.setActiveMedia(e14, t6);
  }
  nextMedia(e14) {
    return this.viewModel.nextMedia(e14);
  }
  previousMedia(e14) {
    return this.viewModel.previousMedia(e14);
  }
  render() {
    const { state: e14 } = this.viewModel, t6 = n2("div", { class: t5.container, key: "container" }, this._renderTitle(), "error" === e14 ? this._renderError() : "loading" === e14 ? this._renderLoading() : this._renderContentContainer());
    return n2("div", { class: this.classes(t5.base, e5.widget) }, t6);
  }
  _renderError() {
    const { messagesCommon: e14, messages: t6, visibleElements: s13 } = this;
    return n2("calcite-notice", { icon: "exclamation-mark-circle", kind: "danger", open: true, scale: "s" }, s13.title ? n2("div", { key: "error-title", slot: "title" }, e14.errorMessage) : null, n2("div", { key: "error-message", slot: "message" }, t6.loadingError));
  }
  _renderLoading() {
    return n2("div", { class: t5.loadingSpinnerContainer, key: "loading-container" }, n2("calcite-loader", { inline: true, label: "" }));
  }
  _renderContentContainer() {
    const { visibleElements: e14 } = this;
    return e14.content ? n2("div", { class: t5.main }, [this._renderContent(), this._renderLastEditInfo()]) : null;
  }
  _renderTitle() {
    const { visibleElements: e14, title: t6 } = this;
    return e14.title ? n2(s9, { class: t5.title, innerHTML: t6, level: this.headingLevel }) : null;
  }
  _renderContent() {
    const e14 = this.viewModel.content, t6 = "content";
    if (!e14) return null;
    if (Array.isArray(e14)) return e14.length ? n2("div", { class: t5.contentNode, key: `${t6}-content-elements` }, e14.map(this._renderContentElement, this)) : null;
    if ("string" == typeof e14) {
      const e15 = this._contentWidgets[0];
      return !e15 || e15.destroyed ? null : n2("div", { class: this.classes(t5.contentNode, t5.contentNodeText), key: `${t6}-content` }, e15.render());
    }
    return this.renderNodeContent(e14);
  }
  _renderContentElement(e14, t6) {
    const { visibleElements: s13 } = this;
    if ("boolean" != typeof s13.content && !s13.content?.[e14.type]) return null;
    switch (e14.type) {
      case "attachments":
        return this._renderAttachments(t6);
      case "custom":
        return this._renderCustom(e14, t6);
      case "fields":
        return this._renderFields(t6);
      case "media":
        return this._renderMedia(t6);
      case "text":
        return this._renderText(e14, t6);
      case "expression":
        return this._renderExpression(t6);
      case "relationship":
        return this._renderRelationship(t6);
      case "utility-network-associations":
        return this._renderAssociation(t6);
      default:
        return null;
    }
  }
  _renderAttachments(e14) {
    const t6 = this._contentWidgets[e14];
    if (!t6 || t6.destroyed) return null;
    const { state: s13, attachmentInfos: i10 } = t6.viewModel;
    return "loading" === s13 || i10.length > 0 ? n2("div", { class: this.classes(t5.contentElement), key: this._buildKey("attachments-element", e14) }, t6.render()) : null;
  }
  _renderRelationship(e14) {
    const t6 = this._contentWidgets[e14];
    return t6 && !t6.destroyed && this.flowItems ? n2("div", { class: t5.contentElement, key: this._buildKey("relationship-element", e14) }, t6.render()) : null;
  }
  _renderAssociation(e14) {
    const t6 = this._contentWidgets[e14];
    return t6 && !t6.destroyed && this.flowItems ? n2("div", { class: t5.contentElement, key: this._buildKey("utility-network-association-element", e14) }, t6.render()) : null;
  }
  _renderExpression(e14) {
    const t6 = this._contentWidgets[e14];
    return t6 && !t6.destroyed && t6.viewModel.contentElement ? n2("div", { class: t5.contentElement, key: this._buildKey("expression-element", e14) }, t6.render()) : null;
  }
  _renderCustom(e14, t6) {
    const { creator: s13 } = e14, i10 = this._contentWidgets[t6];
    return !i10 || i10.destroyed ? null : s13 ? n2("div", { class: t5.contentElement, key: this._buildKey("custom-element", t6) }, i10.render()) : null;
  }
  _renderFields(e14) {
    const t6 = this._contentWidgets[e14];
    return !t6 || t6.destroyed ? null : n2("div", { class: t5.contentElement, key: this._buildKey("fields-element", e14) }, t6.render());
  }
  _renderMedia(e14) {
    const t6 = this._contentWidgets[e14];
    return !t6 || t6.destroyed ? null : n2("div", { class: t5.contentElement, key: this._buildKey("media-element", e14) }, t6.render());
  }
  _renderLastEditInfo() {
    const { visibleElements: e14, messages: t6 } = this, { lastEditInfo: s13 } = this.viewModel;
    if (!s13 || !e14.lastEditedInfo) return null;
    const { date: i10, user: n11 } = s13, o4 = "edit" === s13.type ? n11 ? t6.lastEditedByUser : t6.lastEdited : n11 ? t6.lastCreatedByUser : t6.lastCreated, r5 = s3(o4, { date: i10, user: n11 });
    return n2("div", { class: this.classes(t5.lastEditedInfo, t5.contentElement), key: "edit-info-element" }, r5);
  }
  _renderText(e14, t6) {
    const s13 = e14.text, i10 = this._contentWidgets[t6];
    return !i10 || i10.destroyed ? null : s13 ? n2("div", { class: this.classes(t5.contentElement, t5.text), key: this._buildKey("text-element", t6) }, i10.render()) : null;
  }
  _buildKey(e14, ...t6) {
    return `${e14}__${this.viewModel?.graphic?.uid || "0"}-${t6.join("-")}`;
  }
  _destroyContentWidget(e14) {
    e14 && (e14.viewModel = null, !e14.destroyed && e14.destroy());
  }
  _destroyContentWidgets() {
    this._contentWidgets.forEach((e14) => this._destroyContentWidget(e14)), this._contentWidgets = [];
  }
  _setupContentWidgets() {
    this._destroyContentWidgets();
    const { headingLevel: e14, visibleElements: t6, flowItems: s13, viewModel: i10 } = this, n11 = i10?.content, { contentViewModels: o4 } = i10;
    if (Array.isArray(n11)) n11.forEach((n12, r5) => {
      if ("attachments" === n12.type && (this._contentWidgets[r5] = new h3({ displayType: n12.displayType, headingLevel: t6.title && e14 < 6 ? e14 + 1 : e14, viewModel: o4[r5] })), "fields" === n12.type && (this._contentWidgets[r5] = new c10({ viewModel: o4[r5] })), "media" === n12.type && (this._contentWidgets[r5] = new T3({ viewModel: o4[r5] })), "text" === n12.type && (this._contentWidgets[r5] = new l7({ viewModel: o4[r5] })), "custom" === n12.type && (this._contentWidgets[r5] = new l7({ viewModel: o4[r5] })), "expression" === n12.type && (this._contentWidgets[r5] = new g3({ viewModel: o4[r5] })), "relationship" === n12.type) {
        const e15 = new M5({ flowItems: s13, featureVisibleElements: t6, viewModel: o4[r5] });
        this._contentWidgets[r5] = e15;
      }
      if ("utility-network-associations" === n12.type) {
        const e15 = async (e16) => {
          const { viewModel: n14, listType: o5, title: r6 } = e16;
          if (!s13) return;
          n14.activeAssociationType = o5;
          const { default: l9 } = await import("./FeatureUtilityNetworkAssociationList-HTGGISNB.js"), d9 = new l9({ viewModel: n14, parentFeatureViewModel: i10, listType: o5, title: r6, featureVisibleElements: t6, description: i10.title, flowItems: s13 });
          s13.push(d9);
        }, n13 = new v8({ flowItems: s13, onSelectAssociationType: e15, parentFeatureViewModel: i10, featureVisibleElements: t6, viewModel: o4[r5] });
        this._contentWidgets[r5] = n13;
      }
    }, this);
    else {
      const e15 = o4[0];
      e15 && !e15.destroyed && (this._contentWidgets[0] = new l7({ viewModel: e15 }));
    }
    this.scheduleRender();
  }
};
__decorate([m()], F8.prototype, "flowType", void 0), __decorate([m()], F8.prototype, "graphic", null), __decorate([m()], F8.prototype, "defaultPopupTemplateEnabled", null), __decorate([m()], F8.prototype, "flowItems", void 0), __decorate([m()], F8.prototype, "headingLevel", void 0), __decorate([m({ readOnly: true })], F8.prototype, "isTable", null), __decorate([m()], F8.prototype, "icon", null), __decorate([m()], F8.prototype, "label", null), __decorate([m()], F8.prototype, "location", null), __decorate([m(), e4("esri/widgets/Feature/t9n/Feature")], F8.prototype, "messages", void 0), __decorate([m(), e4("esri/t9n/common")], F8.prototype, "messagesCommon", void 0), __decorate([m()], F8.prototype, "spatialReference", null), __decorate([m()], F8.prototype, "timeZone", null), __decorate([m({ readOnly: true })], F8.prototype, "title", null), __decorate([m()], F8.prototype, "visibleElements", void 0), __decorate([s4("visibleElements")], F8.prototype, "castVisibleElements", null), __decorate([m()], F8.prototype, "map", null), __decorate([m()], F8.prototype, "view", null), __decorate([m({ type: ne })], F8.prototype, "viewModel", void 0), F8 = __decorate([a("esri.widgets.Feature")], F8);

export {
  i7 as i,
  s9 as s,
  e8 as e,
  ne,
  t5 as t,
  n10 as n,
  F8 as F
};
//# sourceMappingURL=chunk-6NPAKFS5.js.map
