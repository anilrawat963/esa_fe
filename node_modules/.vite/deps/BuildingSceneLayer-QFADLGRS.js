import {
  $
} from "./chunk-CC4SOILQ.js";
import "./chunk-D6KKUGCT.js";
import "./chunk-GUZURMV5.js";
import {
  n as n6,
  p as p3
} from "./chunk-RRK2YVM5.js";
import "./chunk-VIDAPS4J.js";
import {
  t as t3
} from "./chunk-STXFDKJW.js";
import {
  a as a4,
  m as m5,
  p as p2,
  y as y2
} from "./chunk-7XHCDINS.js";
import {
  _ as _2,
  r as r2
} from "./chunk-K5O7EA6J.js";
import {
  R,
  j as j3,
  w
} from "./chunk-GD72EK2J.js";
import "./chunk-NFPLS75J.js";
import "./chunk-I4DSU5MJ.js";
import "./chunk-MCWHCMX6.js";
import "./chunk-D7KJNSAT.js";
import "./chunk-BZV32YR7.js";
import "./chunk-IT62DCG6.js";
import "./chunk-YOYO2XMY.js";
import "./chunk-SZTZNZQW.js";
import "./chunk-AJG2ZYEA.js";
import "./chunk-CFXCM2NO.js";
import "./chunk-B3BLJNSM.js";
import "./chunk-ALKEERWI.js";
import "./chunk-34M4K5HY.js";
import "./chunk-ME5HHRVQ.js";
import "./chunk-U6CJFTOF.js";
import "./chunk-WVAXXVEK.js";
import "./chunk-NJSGYS3K.js";
import {
  et
} from "./chunk-TF5RNCNY.js";
import "./chunk-WQW6HIRX.js";
import "./chunk-U2MAPSMR.js";
import "./chunk-QPBITBUR.js";
import "./chunk-PJJUVY7C.js";
import "./chunk-7VJQTJLO.js";
import "./chunk-PUWBFCEG.js";
import "./chunk-VVMIB6RA.js";
import "./chunk-A7O5R67Z.js";
import "./chunk-SQ4OSZIG.js";
import "./chunk-MA6OR5A6.js";
import "./chunk-RCHRSC54.js";
import "./chunk-ZEI5DZXH.js";
import {
  s as s6
} from "./chunk-RGWH5UES.js";
import "./chunk-4KVWUPLK.js";
import "./chunk-NOLINR6O.js";
import "./chunk-HIGI45S6.js";
import "./chunk-2KBTJPSU.js";
import "./chunk-JVMNF6GR.js";
import {
  o as o4
} from "./chunk-SL3GC7WV.js";
import {
  l as l3
} from "./chunk-CJZPTLIZ.js";
import "./chunk-2U5X5TIX.js";
import "./chunk-5D65KWSM.js";
import "./chunk-ABHLEPDK.js";
import "./chunk-4FQUAV7M.js";
import "./chunk-EVZ7KLPS.js";
import "./chunk-JSH3APTG.js";
import "./chunk-WQT2KLDB.js";
import {
  d
} from "./chunk-UVDECGZC.js";
import {
  o as o3,
  s as s4
} from "./chunk-VKFTCFFM.js";
import {
  s as s5
} from "./chunk-ZETARPSI.js";
import "./chunk-TCDV4P3G.js";
import {
  b2,
  c2,
  d as d2,
  g,
  l as l5,
  m as m4
} from "./chunk-CZOYDK6P.js";
import {
  u
} from "./chunk-RS755KXS.js";
import "./chunk-TMUM75KQ.js";
import "./chunk-OC3OQ2CI.js";
import {
  N
} from "./chunk-KY5OS6CK.js";
import "./chunk-3U5UUY3S.js";
import "./chunk-UOYGMZIS.js";
import "./chunk-RXH2WNPA.js";
import "./chunk-TWU3GKHX.js";
import "./chunk-BGIBV6LL.js";
import "./chunk-UQXJMFRI.js";
import "./chunk-DY7N5RAZ.js";
import {
  j as j2
} from "./chunk-6TCXGIIN.js";
import {
  l as l2,
  m as m3
} from "./chunk-NP2TBOXH.js";
import "./chunk-WBYRWTBX.js";
import "./chunk-WFCLXKCE.js";
import "./chunk-WX3525ER.js";
import "./chunk-FHCV4NTV.js";
import "./chunk-2JMKFI2D.js";
import "./chunk-QYAMBIRP.js";
import "./chunk-HCTBVF3W.js";
import "./chunk-NH6FXYCM.js";
import "./chunk-YE4E5JCT.js";
import "./chunk-SXZO7ULH.js";
import {
  s as s7
} from "./chunk-63RKYW5K.js";
import "./chunk-HROH5C5D.js";
import "./chunk-5BAQPFKY.js";
import "./chunk-H34D76ZQ.js";
import "./chunk-GVMCGYZ6.js";
import "./chunk-JHV6OBEB.js";
import "./chunk-QTRET3PG.js";
import "./chunk-FMOL5XMB.js";
import "./chunk-VNSHGTPN.js";
import "./chunk-OEBAFVQK.js";
import "./chunk-76V6RN4F.js";
import "./chunk-Y3FKYMXQ.js";
import "./chunk-S5K4XWUR.js";
import "./chunk-WHHIH5YU.js";
import "./chunk-MEDXVTKR.js";
import "./chunk-5LMH6D7V.js";
import "./chunk-QNDHLVDC.js";
import "./chunk-EK7HOTRR.js";
import "./chunk-GCTH5LET.js";
import "./chunk-TTLSEJNG.js";
import "./chunk-ZVTEFYZX.js";
import "./chunk-LPUPM55U.js";
import "./chunk-CBCHZD3F.js";
import "./chunk-EKZRA6TO.js";
import "./chunk-M5SP6ZBM.js";
import {
  Z
} from "./chunk-2HGIYEIL.js";
import "./chunk-MDJNYPVI.js";
import "./chunk-Z6VKIQV2.js";
import "./chunk-4PXNA4MD.js";
import "./chunk-ZCI5A4FF.js";
import "./chunk-ET5EDAFM.js";
import "./chunk-2D47RURG.js";
import "./chunk-7HTU7ZUX.js";
import "./chunk-WDTGOP77.js";
import "./chunk-VYMBX5H5.js";
import {
  b
} from "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import "./chunk-BBYMM7CM.js";
import "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import "./chunk-OJBEN6CV.js";
import "./chunk-PEL3D3ZN.js";
import "./chunk-Q5KWD3VQ.js";
import "./chunk-BUQC3CLV.js";
import {
  t
} from "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import {
  c
} from "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import {
  _,
  n as n4
} from "./chunk-C3FRY5U4.js";
import {
  n2 as n5,
  q
} from "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import {
  t as t2
} from "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import {
  T
} from "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import {
  n as n3
} from "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import {
  a as a3,
  l
} from "./chunk-RO646JIV.js";
import {
  l as l4
} from "./chunk-XXBJY7RN.js";
import "./chunk-NPYFNHY2.js";
import "./chunk-JW6DU3OK.js";
import "./chunk-CNYNCKEV.js";
import "./chunk-XL5QPCXN.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-W75DBJD7.js";
import "./chunk-6KDQMJAI.js";
import "./chunk-UDHS2MGH.js";
import {
  n
} from "./chunk-QF7FRVN6.js";
import "./chunk-ENINOZUZ.js";
import {
  b as b3
} from "./chunk-P6IKJIMO.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import {
  s as s3
} from "./chunk-ONXWBTTM.js";
import "./chunk-T7F6Q6JJ.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import {
  p
} from "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  j
} from "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import {
  m as m2
} from "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import {
  r
} from "./chunk-7H3U4IJR.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import {
  f as f2
} from "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import {
  H2 as H,
  V
} from "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import {
  o as o2
} from "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import {
  n as n2
} from "./chunk-XXLHAM2M.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2,
  s2,
  x
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import {
  o
} from "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  f2 as f,
  i as i2,
  y
} from "./chunk-GNMPGHLQ.js";
import {
  a,
  i3 as i,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/graphic/isBuildingGraphicOrigin.js
var i3 = Symbol("isBuildingGraphicOrigin");

// node_modules/@arcgis/core/graphic/BuildingGraphicOrigin.js
var a5;
var o5 = class extends s4 {
  get [(a5 = i3, n5)]() {
    return this.sublayer;
  }
  get [n4]() {
    return this.sublayer;
  }
  get [o3]() {
    return this.sublayer;
  }
  constructor(r3) {
    super(), this[a5] = true, this.type = "building", this.sublayer = r3;
  }
  get layer() {
    return this.sublayer.layer;
  }
  get id() {
    return `${this.layer.id}:__${this.sublayer.id}__`;
  }
};

// node_modules/@arcgis/core/layers/buildingSublayers/BuildingSublayer.js
var a6 = class extends s3(m3) {
  constructor(e2) {
    super(e2), this.title = "", this.id = -1, this.modelName = null, this.isEmpty = null, this.legendEnabled = true, this.visible = true, this.opacity = 1;
  }
  readTitle(e2, o7) {
    return "string" == typeof o7.alias ? o7.alias : "string" == typeof o7.name ? o7.name : "";
  }
  readIdOnlyOnce(e2) {
    return -1 !== this.id ? this.id : "number" == typeof e2 ? e2 : -1;
  }
};
__decorate([m({ type: String, json: { origins: { "web-scene": { write: true }, "portal-item": { write: true } } } })], a6.prototype, "title", void 0), __decorate([o2("service", "title", ["alias", "name"])], a6.prototype, "readTitle", null), __decorate([m()], a6.prototype, "layer", void 0), __decorate([m({ type: x, readOnly: true, json: { read: false, write: { ignoreOrigin: true, isRequired: true } } })], a6.prototype, "id", void 0), __decorate([o2("service", "id")], a6.prototype, "readIdOnlyOnce", null), __decorate([m(c2(String))], a6.prototype, "modelName", void 0), __decorate([m(c2(Boolean))], a6.prototype, "isEmpty", void 0), __decorate([m({ type: Boolean, nonNullable: true })], a6.prototype, "legendEnabled", void 0), __decorate([m({ type: Boolean, json: { name: "visibility", write: true } })], a6.prototype, "visible", void 0), __decorate([m({ type: Number, json: { write: true } })], a6.prototype, "opacity", void 0), a6 = __decorate([a2("esri.layers.buildingSublayers.BuildingSublayer")], a6);

// node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js
var _3 = s6();
var C = class extends p(m2(a6)) {
  constructor(e2) {
    super(e2), this.type = "building-component", this.nodePages = null, this.materialDefinitions = [], this.textureSetDefinitions = [], this.geometryDefinitions = [], this.indexInfo = null, this.serviceUpdateTimeStamp = null, this.store = null, this.attributeStorageInfo = [], this.fields = [], this.associatedLayer = null, this.outFields = null, this.listMode = "show", this.renderer = null, this.definitionExpression = null, this.popupEnabled = true, this.popupTemplate = null, this.layerType = "3d-object";
  }
  initialize() {
    this._set("graphicOrigin", new o5(this));
  }
  get parsedUrl() {
    return this.layer ? { path: `${this.layer.parsedUrl?.path}/sublayers/${this.id}`, query: this.layer.parsedUrl?.query } : { path: "" };
  }
  get fieldsIndex() {
    return new Z(this.fields);
  }
  readAssociatedLayer(e2, t6) {
    const r3 = this.layer.associatedFeatureServiceItem, o7 = t6.associatedLayerID;
    return null != r3 && "number" == typeof o7 ? new et({ portalItem: r3, customParameters: this.customParameters, layerId: o7 }) : null;
  }
  get objectIdField() {
    if (null != this.fields) {
      for (const e2 of this.fields) if ("oid" === e2.type) return e2.name;
    }
    return "";
  }
  get globalIdField() {
    if (null != this.fields) {
      for (const e2 of this.fields) if ("global-id" === e2.type) return e2.name;
    }
    return "";
  }
  get displayField() {
    return null != this.associatedLayer ? this.associatedLayer.displayField : void 0;
  }
  get apiKey() {
    return this.layer.apiKey;
  }
  get customParameters() {
    return this.layer.customParameters;
  }
  get fullExtent() {
    return this.layer.fullExtent;
  }
  get spatialReference() {
    return this.layer.spatialReference;
  }
  get version() {
    return this.layer.version;
  }
  get elevationInfo() {
    return this.layer.elevationInfo;
  }
  get minScale() {
    return this.layer.minScale;
  }
  get maxScale() {
    return this.layer.maxScale;
  }
  get effectiveScaleRange() {
    return this.layer.effectiveScaleRange;
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  load(e2) {
    const t6 = null != e2 ? e2.signal : null, r3 = this._fetchService(t6).then(() => {
      this.indexInfo = r2(this.parsedUrl.path, this.rootNode, this.nodePages, this.customParameters, this.apiKey, i.getLogger(this), t6);
    });
    return this.addResolvingPromise(r3), Promise.resolve(this);
  }
  createPopupTemplate(e2) {
    return d(this, e2);
  }
  async _fetchService(e2) {
    const t6 = (await H(this.parsedUrl.path, { query: { f: "json", ...this.customParameters, token: this.apiKey }, responseType: "json", signal: e2 })).data;
    this.read(t6, { origin: "service", url: this.parsedUrl });
  }
  getField(e2) {
    return this.fieldsIndex.get(e2);
  }
  getFieldDomain(e2, t6) {
    const r3 = this.getField(e2)?.domain ?? null;
    return this.associatedLayer ? N(this.associatedLayer, e2, t6, r3) : r3;
  }
  getFeatureType(e2) {
    return e2 && null != this.associatedLayer ? this.associatedLayer.getFeatureType(e2) : null;
  }
  get types() {
    return null != this.associatedLayer ? this.associatedLayer.types ?? [] : [];
  }
  get typeIdField() {
    return null != this.associatedLayer ? this.associatedLayer.typeIdField : null;
  }
  get geometryType() {
    return "3d-object" === this.layerType ? "mesh" : "point";
  }
  get profile() {
    return "3d-object" === this.layerType ? "mesh-pyramids" : "points";
  }
  get capabilities() {
    const e2 = null != this.associatedLayer && this.associatedLayer.capabilities ? this.associatedLayer.capabilities : t3, { query: t6, operations: { supportsQuery: r3 }, data: { supportsZ: o7, supportsM: s10, isVersioned: i7 } } = e2;
    return { query: t6, operations: { supportsQuery: r3 }, data: { supportsZ: o7, supportsM: s10, isVersioned: i7 } };
  }
  createQuery() {
    const e2 = new b();
    return "mesh" !== this.geometryType && (e2.returnGeometry = true, e2.returnZ = true), e2.where = this.definitionExpression || "1=1", e2.sqlFormat = "standard", e2;
  }
  queryExtent(e2, t6) {
    return this._getAssociatedLayerForQuery().then((r3) => r3.queryExtent(e2 || this.createQuery(), t6));
  }
  queryFeatureCount(e2, t6) {
    return this._getAssociatedLayerForQuery().then((r3) => r3.queryFeatureCount(e2 || this.createQuery(), t6));
  }
  queryFeatures(e2, t6) {
    return this._getAssociatedLayerForQuery().then((r3) => r3.queryFeatures(e2 || this.createQuery(), t6)).then((e3) => {
      if (e3?.features) for (const t7 of e3.features) t7.layer = this.layer, t7.sourceLayer = this, t7.origin = this.graphicOrigin;
      return e3;
    });
  }
  async queryObjectIds(e2, t6) {
    const r3 = await this._getAssociatedLayerForQuery();
    return (await r3.queryObjectIds(e2 || this.createQuery(), t6)).filter(n3);
  }
  async queryCachedAttributes(e2, t6) {
    const r3 = T(this.fieldsIndex, await p3(this, n6(this)));
    return $(this.parsedUrl.path, this.attributeStorageInfo, e2, t6, r3, this.apiKey, this.customParameters);
  }
  async queryCachedFeature(e2, r3) {
    const o7 = await this.queryCachedAttributes(e2, [r3]);
    if (!o7 || 0 === o7.length) throw new s("scenelayer:feature-not-in-cached-data", "Feature not found in cached data");
    return new _({ attributes: o7[0], layer: this, sourceLayer: this });
  }
  getFieldUsageInfo(e2) {
    return this.fieldsIndex.has(e2) ? { supportsLabelingInfo: false, supportsRenderer: false, supportsPopupTemplate: false, supportsLayerQuery: false } : { supportsLabelingInfo: false, supportsRenderer: true, supportsPopupTemplate: true, supportsLayerQuery: null != this.associatedLayer };
  }
  _getAssociatedLayerForQuery() {
    const e2 = this.associatedLayer;
    return null != e2 && e2.loaded ? Promise.resolve(e2) : this._loadAssociatedLayerForQuery();
  }
  async _loadAssociatedLayerForQuery() {
    if (await this.load(), null == this.associatedLayer) throw new s("buildingscenelayer:query-not-available", "BuildingSceneLayer component layer queries are not available without an associated feature layer", { layer: this });
    try {
      await this.associatedLayer.load();
    } catch (e2) {
      throw new s("buildingscenelayer:query-not-available", "BuildingSceneLayer associated feature layer could not be loaded", { layer: this, error: e2 });
    }
    return this.associatedLayer;
  }
};
__decorate([m({ readOnly: true })], C.prototype, "parsedUrl", null), __decorate([m({ type: p2, readOnly: true })], C.prototype, "nodePages", void 0), __decorate([m({ type: [a4], readOnly: true })], C.prototype, "materialDefinitions", void 0), __decorate([m({ type: [y2], readOnly: true })], C.prototype, "textureSetDefinitions", void 0), __decorate([m({ type: [m5], readOnly: true })], C.prototype, "geometryDefinitions", void 0), __decorate([m({ readOnly: true })], C.prototype, "serviceUpdateTimeStamp", void 0), __decorate([m({ readOnly: true })], C.prototype, "store", void 0), __decorate([m({ type: String, readOnly: true, json: { read: { source: "store.rootNode" } } })], C.prototype, "rootNode", void 0), __decorate([m({ readOnly: true })], C.prototype, "attributeStorageInfo", void 0), __decorate([m(_3.fields)], C.prototype, "fields", void 0), __decorate([m({ readOnly: true })], C.prototype, "fieldsIndex", null), __decorate([m({ readOnly: true, type: et })], C.prototype, "associatedLayer", void 0), __decorate([o2("service", "associatedLayer", ["associatedLayerID"])], C.prototype, "readAssociatedLayer", null), __decorate([m(_3.outFields)], C.prototype, "outFields", void 0), __decorate([m({ type: String, readOnly: true })], C.prototype, "objectIdField", null), __decorate([m({ type: String, readOnly: true })], C.prototype, "globalIdField", null), __decorate([m({ readOnly: true, type: String, json: { read: false } })], C.prototype, "displayField", null), __decorate([m({ readOnly: true, type: String })], C.prototype, "apiKey", null), __decorate([m({ readOnly: true, type: String })], C.prototype, "customParameters", null), __decorate([m({ readOnly: true, type: z })], C.prototype, "fullExtent", null), __decorate([m({ readOnly: true, type: f2 })], C.prototype, "spatialReference", null), __decorate([m({ readOnly: true })], C.prototype, "version", null), __decorate([m({ readOnly: true, type: c })], C.prototype, "elevationInfo", null), __decorate([m({ readOnly: true, type: Number })], C.prototype, "minScale", null), __decorate([m({ readOnly: true, type: Number })], C.prototype, "maxScale", null), __decorate([m({ readOnly: true, type: Number })], C.prototype, "effectiveScaleRange", null), __decorate([m({ type: ["hide", "show"], json: { write: true } })], C.prototype, "listMode", void 0), __decorate([m({ types: u, json: { origins: { service: { read: { source: "drawingInfo.renderer" } } }, name: "layerDefinition.drawingInfo.renderer", write: true }, value: null })], C.prototype, "renderer", void 0), __decorate([m({ type: String, json: { origins: { service: { read: false, write: false } }, name: "layerDefinition.definitionExpression", write: { enabled: true, allowNull: true } } })], C.prototype, "definitionExpression", void 0), __decorate([m(l5)], C.prototype, "popupEnabled", void 0), __decorate([m({ type: q, json: { read: { source: "popupInfo" }, write: { target: "popupInfo" } } })], C.prototype, "popupTemplate", void 0), __decorate([m({ readOnly: true, type: String, json: { origins: { service: { read: { source: "store.normalReferenceFrame" } } }, read: false } })], C.prototype, "normalReferenceFrame", void 0), __decorate([m({ readOnly: true, json: { read: false } })], C.prototype, "defaultPopupTemplate", null), __decorate([m({ readOnly: true })], C.prototype, "graphicOrigin", void 0), __decorate([m()], C.prototype, "types", null), __decorate([m()], C.prototype, "typeIdField", null), __decorate([m({ json: { write: false } }), r(new o({ "3DObject": "3d-object", Point: "point" }))], C.prototype, "layerType", void 0), __decorate([m()], C.prototype, "geometryType", null), __decorate([m()], C.prototype, "profile", null), __decorate([m({ readOnly: true, json: { read: false } })], C.prototype, "capabilities", null), __decorate([m({ readOnly: true })], C.prototype, "statisticsInfo", void 0), C = __decorate([a2("esri.layers.buildingSublayers.BuildingComponentSublayer")], C);

// node_modules/@arcgis/core/layers/buildingSublayers/utils.js
function o6(r3, u3) {
  r3.forEach((r4) => {
    u3(r4), "building-group" === r4.type && o6(r4.sublayers, u3);
  });
}

// node_modules/@arcgis/core/layers/buildingSublayers/BuildingGroupSublayer.js
var p4 = { type: O, readOnly: true, json: { origins: { service: { read: { source: "sublayers", reader: a7 } } }, read: false } };
function a7(r3, o7, t6) {
  if (r3 && Array.isArray(r3)) return new O(r3.map((r4) => {
    const e2 = c3(r4);
    if (e2) {
      const o8 = new e2();
      return o8.read(r4, t6), o8;
    }
    return t6?.messages && r4 && t6.messages.push(new s2("building-scene-layer:unsupported-sublayer-type", "Building scene sublayer of type '" + (r4.type || "unknown") + "' are not supported", { definition: r4, context: t6 })), null;
  }));
}
function c3(r3) {
  return "group" === r3.layerType ? d3 : C;
}
var _a;
var d3 = (_a = class extends a6 {
  constructor(r3) {
    super(r3), this.type = "building-group", this.listMode = "show", this.sublayers = null;
  }
  loadAll() {
    return a3(this, (r3) => o6(this.sublayers, (e2) => {
      "building-group" !== e2.type && r3(e2);
    }));
  }
}, _a.sublayersProperty = p4, _a.readSublayers = a7, _a);
__decorate([m({ type: ["hide", "show", "hide-children"], json: { write: true } })], d3.prototype, "listMode", void 0), __decorate([m(p4)], d3.prototype, "sublayers", void 0), d3 = __decorate([a2("esri.layers.buildingSublayers.BuildingGroupSublayer")], d3);

// node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfo.js
var e = class extends n2 {
  constructor() {
    super(...arguments), this.type = null;
  }
};
__decorate([m({ type: String, readOnly: true, json: { write: { isRequired: true } } })], e.prototype, "type", void 0), e = __decorate([a2("esri.layers.support.BuildingFilterAuthoringInfo")], e);
var p5 = e;

// node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoType.js
var i4;
var p6 = i4 = class extends n2 {
  constructor() {
    super(...arguments), this.filterType = null, this.filterValues = null;
  }
  clone() {
    return new i4({ filterType: this.filterType, filterValues: a(this.filterValues) });
  }
};
__decorate([m({ type: String, json: { write: { isRequired: true } } })], p6.prototype, "filterType", void 0), __decorate([m({ type: [String], json: { write: { isRequired: true } } })], p6.prototype, "filterValues", void 0), p6 = i4 = __decorate([a2("esri.layers.support.BuildingFilterAuthoringInfoType")], p6);
var l6 = p6;

// node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoBlock.js
var c4;
var l7 = O.ofType(l6);
var m6 = c4 = class extends n2 {
  clone() {
    return new c4({ filterTypes: a(this.filterTypes) });
  }
};
__decorate([m({ type: l7, json: { write: { isRequired: true } } })], m6.prototype, "filterTypes", void 0), m6 = c4 = __decorate([a2("esri.layers.support.BuildingFilterAuthoringInfoBlock")], m6);
var n7 = m6;

// node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoCheckbox.js
var p7;
var l8 = O.ofType(n7);
var n8 = p7 = class extends p5 {
  constructor() {
    super(...arguments), this.type = "checkbox";
  }
  clone() {
    return new p7({ filterBlocks: a(this.filterBlocks) });
  }
};
__decorate([m({ type: ["checkbox"] })], n8.prototype, "type", void 0), __decorate([m({ type: l8, json: { write: { isRequired: true } } })], n8.prototype, "filterBlocks", void 0), n8 = p7 = __decorate([a2("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")], n8);
var m7 = n8;

// node_modules/@arcgis/core/layers/support/BuildingFilterMode.js
var t4 = class extends n2 {
};
__decorate([m({ readOnly: true, json: { read: false, write: { isRequired: true } } })], t4.prototype, "type", void 0), t4 = __decorate([a2("esri.layers.support.BuildingFilterMode")], t4);
var p8 = t4;

// node_modules/@arcgis/core/layers/support/BuildingFilterModeSolid.js
var t5;
var i5 = t5 = class extends p8 {
  constructor() {
    super(...arguments), this.type = "solid";
  }
  clone() {
    return new t5();
  }
};
__decorate([m({ type: ["solid"], readOnly: true, json: { write: { isRequired: true } } })], i5.prototype, "type", void 0), i5 = t5 = __decorate([a2("esri.layers.support.BuildingFilterModeSolid")], i5);
var p9 = i5;

// node_modules/@arcgis/core/layers/support/BuildingFilterModeWireFrame.js
var m8;
var c5 = m8 = class extends p8 {
  constructor() {
    super(...arguments), this.type = "wire-frame", this.edges = null;
  }
  clone() {
    return new m8({ edges: a(this.edges) });
  }
};
__decorate([r({ wireFrame: "wire-frame" })], c5.prototype, "type", void 0), __decorate([m(t2)], c5.prototype, "edges", void 0), c5 = m8 = __decorate([a2("esri.layers.support.BuildingFilterModeWireFrame")], c5);
var a8 = c5;

// node_modules/@arcgis/core/layers/support/BuildingFilterModeXRay.js
var s8;
var p10 = s8 = class extends p8 {
  constructor() {
    super(...arguments), this.type = "x-ray";
  }
  clone() {
    return new s8();
  }
};
__decorate([m({ type: ["x-ray"], readOnly: true, json: { write: { isRequired: true } } })], p10.prototype, "type", void 0), p10 = s8 = __decorate([a2("esri.layers.support.BuildingFilterModeXRay")], p10);
var i6 = p10;

// node_modules/@arcgis/core/layers/support/BuildingFilterBlock.js
var d4;
var a9 = { nonNullable: true, types: { key: "type", base: p8, typeMap: { solid: p9, "wire-frame": a8, "x-ray": i6 } }, json: { read: (r3) => {
  switch (r3?.type) {
    case "solid":
      return p9.fromJSON(r3);
    case "wireFrame":
      return a8.fromJSON(r3);
    case "x-ray":
      return i6.fromJSON(r3);
    default:
      return;
  }
}, write: { enabled: true, isRequired: true } } };
var m9 = d4 = class extends n2 {
  constructor() {
    super(...arguments), this.filterExpression = null, this.filterMode = new p9(), this.title = "";
  }
  clone() {
    return new d4({ filterExpression: this.filterExpression, filterMode: a(this.filterMode), title: this.title });
  }
};
__decorate([m({ type: String, json: { write: { enabled: true, isRequired: true } } })], m9.prototype, "filterExpression", void 0), __decorate([m(a9)], m9.prototype, "filterMode", void 0), __decorate([m({ type: String, json: { write: { enabled: true, isRequired: true } } })], m9.prototype, "title", void 0), m9 = d4 = __decorate([a2("esri.layers.support.BuildingFilterBlock")], m9);
var c6 = m9;

// node_modules/@arcgis/core/layers/support/BuildingFilter.js
var d5;
var u2 = O.ofType(c6);
var m10 = d5 = class extends n2 {
  constructor(o7) {
    super(o7), this.description = null, this.filterBlocks = null, this.id = n(), this.name = null;
  }
  clone() {
    return new d5({ description: this.description, filterBlocks: a(this.filterBlocks), id: this.id, name: this.name, filterAuthoringInfo: a(this.filterAuthoringInfo) });
  }
};
__decorate([m({ type: String, json: { write: true } })], m10.prototype, "description", void 0), __decorate([m({ type: u2, json: { write: { enabled: true, isRequired: true } } })], m10.prototype, "filterBlocks", void 0), __decorate([m({ types: { key: "type", base: p5, typeMap: { checkbox: m7 } }, json: { read: (o7) => "checkbox" === o7?.type ? m7.fromJSON(o7) : null, write: true } })], m10.prototype, "filterAuthoringInfo", void 0), __decorate([m({ type: String, constructOnly: true, json: { write: { enabled: true, isRequired: true } } })], m10.prototype, "id", void 0), __decorate([m({ type: String, json: { write: { enabled: true, isRequired: true } } })], m10.prototype, "name", void 0), m10 = d5 = __decorate([a2("esri.layers.support.BuildingFilter")], m10);

// node_modules/@arcgis/core/layers/support/BuildingFieldStatistics.js
var s9 = class extends n2 {
  constructor() {
    super(...arguments), this.fieldName = null, this.modelName = null, this.label = null, this.min = null, this.max = null, this.mostFrequentValues = null, this.subLayerIds = null;
  }
};
__decorate([m({ type: String })], s9.prototype, "fieldName", void 0), __decorate([m({ type: String })], s9.prototype, "modelName", void 0), __decorate([m({ type: String })], s9.prototype, "label", void 0), __decorate([m({ type: Number })], s9.prototype, "min", void 0), __decorate([m({ type: Number })], s9.prototype, "max", void 0), __decorate([m({ json: { read: (e2) => Array.isArray(e2) && (e2.every((e3) => "string" == typeof e3) || e2.every((e3) => "number" == typeof e3)) ? e2.slice() : null } })], s9.prototype, "mostFrequentValues", void 0), __decorate([m({ type: [Number] })], s9.prototype, "subLayerIds", void 0), s9 = __decorate([a2("esri.layers.support.BuildingFieldStatistics")], s9);
var p11 = s9;

// node_modules/@arcgis/core/layers/support/BuildingSummaryStatistics.js
var p12 = class extends p(m2(n2)) {
  constructor(r3) {
    super(r3), this.url = null, this.customParameters = null;
  }
  get fields() {
    return this.loaded || "loading" === this.loadStatus ? this._get("fields") : (i.getLogger(this).error("building summary statistics are not loaded"), null);
  }
  load(r3) {
    const t6 = null != r3 ? r3.signal : null;
    return this.addResolvingPromise(this._fetchService(t6)), Promise.resolve(this);
  }
  async _fetchService(r3) {
    const o7 = (await H(this.url, { query: { f: "json", ...this.customParameters, token: this.apiKey }, responseType: "json", signal: r3 })).data;
    this.read(o7, { origin: "service" });
  }
};
__decorate([m({ constructOnly: true, type: String })], p12.prototype, "url", void 0), __decorate([m({ constructOnly: true })], p12.prototype, "customParameters", void 0), __decorate([m({ constructOnly: true })], p12.prototype, "apiKey", void 0), __decorate([m({ readOnly: true, type: [p11], json: { read: { source: "summary" } } })], p12.prototype, "fields", null), p12 = __decorate([a2("esri.layers.support.BuildingSummaryStatistics")], p12);

// node_modules/@arcgis/core/layers/BuildingSceneLayer.js
var R2 = O.ofType(m10);
var M = a(d3.sublayersProperty);
var H2 = M.json?.origins;
H2 && (H2["web-scene"] = { type: [C], write: { enabled: true, overridePolicy: () => ({ enabled: false }) } }, H2["portal-item"] = { type: [C], write: { enabled: true, overridePolicy: () => ({ enabled: false }) } });
var k = class extends _2(l3(b2(j2(t(l2(s5(o4(b3)))))))) {
  constructor(e2) {
    super(e2), this.operationalLayerType = "BuildingSceneLayer", this.allSublayers = new l4({ getCollections: () => [this.sublayers], getChildrenFunction: (e3) => "building-group" === e3.type ? e3.sublayers : null }), this.sublayers = null, this._allSublayerOverrides = null, this.filters = new R2(), this.activeFilterId = null, this.summaryStatistics = null, this.outFields = null, this.legendEnabled = true, this.type = "building-scene";
  }
  normalizeCtorArgs(e2) {
    return "string" == typeof e2 ? { url: e2 } : e2 ?? {};
  }
  destroy() {
    this.allSublayers.destroy();
  }
  readSublayers(e2, t6, r3) {
    const i7 = d3.readSublayers(e2, t6, r3);
    return o6(i7, (e3) => e3.layer = this), this._allSublayerOverrides && (N2(i7, this._allSublayerOverrides), this._allSublayerOverrides = null), i7;
  }
  write(e2, t6) {
    return e2 = super.write(e2, t6), !t6 || "web-scene" !== t6.origin && "portal-item" !== t6.origin || (this.sublayers ? z2(this.sublayers, e2, t6) : this._allSublayerOverrides && J(this._allSublayerOverrides, e2, t6)), e2;
  }
  read(e2, t6) {
    if (super.read(e2, t6), ("web-scene" === t6?.origin || "portal-item" === t6?.origin) && Array.isArray(e2?.sublayers)) {
      const r3 = W(e2.sublayers, t6);
      this.sublayers ? G(this.sublayers, r3) : (this._allSublayerOverrides ??= /* @__PURE__ */ new Map(), this._allSublayerOverrides.set(t6.origin, r3));
    }
  }
  readSummaryStatistics(e2, t6) {
    if ("string" == typeof t6.statisticsHRef && this.parsedUrl) {
      const e3 = V(this.parsedUrl.path, t6.statisticsHRef);
      return new p12({ url: e3, apiKey: this.apiKey, customParameters: this.customParameters });
    }
    return null;
  }
  set elevationInfo(e2) {
    null != e2 && "absolute-height" !== e2.mode || this._set("elevationInfo", e2), this._validateElevationInfo(e2);
  }
  load(e2) {
    const t6 = null != e2 ? e2.signal : null, r3 = this.loadFromPortal({ supportedTypes: ["Scene Service"] }, e2).catch(f).then(() => this._fetchService(t6)).then(() => this._fetchAssociatedFeatureService(t6));
    return this.addResolvingPromise(r3), Promise.resolve(this);
  }
  loadAll() {
    return l(this, (e2) => {
      o6(this.sublayers, (t6) => {
        "building-group" !== t6.type && e2(t6);
      }), this.summaryStatistics && e2(this.summaryStatistics);
    });
  }
  async saveAs(e2, t6) {
    return this._debouncedSaveOperations(1, { ...t6, getTypeKeywords: () => this._getTypeKeywords(), portalItemLayerType: "building-scene" }, e2);
  }
  async save() {
    const e2 = { getTypeKeywords: () => this._getTypeKeywords(), portalItemLayerType: "building-scene" };
    return this._debouncedSaveOperations(0, e2);
  }
  validateLayer(e2) {
    if (!e2.layerType || "Building" !== e2.layerType) throw new s("buildingscenelayer:layer-type-not-supported", "BuildingSceneLayer does not support this layer type", { layerType: e2.layerType });
  }
  _getTypeKeywords() {
    return ["Building"];
  }
  async _fetchAssociatedFeatureService(e2) {
    try {
      const { portalItem: t6 } = await s7(`${this.url}/layers/${this.layerId}`, { sceneLayerItem: this.portalItem, customParameters: this.customParameters, apiKey: this.apiKey, signal: e2 });
      this.associatedFeatureServiceItem = t6;
    } catch (t6) {
      y(this._logWarningOnPopupEnabled());
    }
  }
  async _logWarningOnPopupEnabled() {
    const e2 = new AbortController();
    this.addHandles(i2(e2)), await j(() => this.allSublayers.filter((e3) => "building-component" === e3.type).some((e3) => e3.popupEnabled && null != e3.popupTemplate), e2.signal);
    const t6 = this.allSublayers.filter((e3) => "building-component" === e3.type).filter((e3) => e3.popupEnabled && null != e3.popupTemplate), r3 = [], i7 = [];
    for (const s10 of t6) {
      const e3 = s10.title ?? `untitled ${s10.id}`;
      s10.attributeStorageInfo ? r3.push(e3) : i7.push(e3);
    }
    const o7 = "\n  ", l9 = r3.length > 0 ? `
The following sublayers will fall back to binary attributes for Popups:${o7}${r3.join(o7)}` : "", n9 = i7.length > 0 ? `
The following sublayers have no binary attributes and will not work with Popups:${o7}${i7.join(o7)}` : "";
    i.getLogger(this).warn(`Associated FeatureLayer could not be loaded for this BuildingSceneLayer: ${this.title}.`, l9, n9);
  }
  _validateElevationInfo(e2) {
    const t6 = "Building scene layers";
    j3(i.getLogger(this), w(t6, "absolute-height", e2)), j3(i.getLogger(this), R(t6, e2));
  }
};
function N2(e2, t6) {
  t6.forEach((t7) => G(e2, t7));
}
function G(e2, t6) {
  const { overrides: r3, context: i7 } = t6;
  o6(e2, (e3) => e3.read(r3.get(e3.id), i7));
}
function W(e2, t6) {
  const r3 = /* @__PURE__ */ new Map();
  for (const s10 of e2) null != s10 && "object" == typeof s10 && "number" == typeof s10.id ? r3.set(s10.id, s10) : t6.messages?.push(new s("building-scene-layer:invalid-sublayer-override", "Invalid value for sublayer override. Not an object or no id specified.", { value: s10 }));
  return { overrides: r3, context: t6 };
}
function z2(e2, t6, r3) {
  const i7 = [];
  o6(e2, (e3) => {
    const t7 = e3.write({}, r3);
    Object.keys(t7).length > 1 && i7.push(t7);
  }), i7.length > 0 && (t6.sublayers = i7);
}
function J(e2, t6, r3) {
  const i7 = r3?.origin && e2.get(r3.origin);
  i7 && (t6.sublayers = [], i7.overrides.forEach((e3) => {
    t6.sublayers.push(a(e3));
  }));
}
__decorate([m({ type: ["BuildingSceneLayer"] })], k.prototype, "operationalLayerType", void 0), __decorate([m({ readOnly: true })], k.prototype, "allSublayers", void 0), __decorate([m(M)], k.prototype, "sublayers", void 0), __decorate([o2("service", "sublayers")], k.prototype, "readSublayers", null), __decorate([m({ type: R2, nonNullable: true, json: { write: true } })], k.prototype, "filters", void 0), __decorate([m({ type: String, json: { write: true } })], k.prototype, "activeFilterId", void 0), __decorate([m({ readOnly: true, type: p12 })], k.prototype, "summaryStatistics", void 0), __decorate([o2("summaryStatistics", ["statisticsHRef"])], k.prototype, "readSummaryStatistics", null), __decorate([m({ type: [String], json: { read: false } })], k.prototype, "outFields", void 0), __decorate([m(g)], k.prototype, "fullExtent", void 0), __decorate([m(d2)], k.prototype, "legendEnabled", void 0), __decorate([m({ type: ["show", "hide", "hide-children"] })], k.prototype, "listMode", void 0), __decorate([m(c2(f2))], k.prototype, "spatialReference", void 0), __decorate([m(m4)], k.prototype, "elevationInfo", null), __decorate([m({ json: { read: false }, readOnly: true })], k.prototype, "type", void 0), __decorate([m()], k.prototype, "associatedFeatureServiceItem", void 0), k = __decorate([a2("esri.layers.BuildingSceneLayer")], k);
var q2 = k;
export {
  q2 as default
};
//# sourceMappingURL=BuildingSceneLayer-QFADLGRS.js.map
