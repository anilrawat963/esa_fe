import {
  e
} from "./chunk-2BTHAF26.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import "./chunk-4DGC7CBY.js";
import "./chunk-GNMPGHLQ.js";
import "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/views/3d/layers/Lyr3DWorker.js
var t;
var e2;
async function n(s) {
  await o();
  const t2 = { status: 1, error: "", jobDescJson: "", data: new Uint8Array(0), missingInputUrls: [] };
  if (s.inputs.length < 1) return { result: t2, transferList: [] };
  const n2 = { ptrs: [], sizes: [] };
  for (const o2 of s.inputs) {
    const s2 = e2._malloc(o2.byteLength);
    new Uint8Array(e2.HEAPU8.buffer, s2, o2.byteLength).set(new Uint8Array(o2)), n2.ptrs.push(s2), n2.sizes.push(o2.byteLength);
  }
  const r2 = e2.process(s.jobDescJson, s.id, n2, s.isMissingResourceCase);
  t2.status = r2.status, t2.missingInputUrls = r2.missingInputUrls.slice();
  const i2 = 0 === r2.status && r2.data, a = 2 === t2.status && t2.missingInputUrls.length > 0;
  t2.jobDescJson = r2.jobDescJson.slice(), t2.error = r2.error.slice(), i2 ? t2.data = r2.data.slice() : a && (t2.originalInputs = s.inputs.slice());
  for (let o2 = 0; o2 < n2.ptrs.length; ++o2) e2._free(n2.ptrs[o2]);
  const u = [];
  if (i2) u.push(t2.data.buffer);
  else if (a) for (const e3 of s.inputs) u.push(e3);
  return { result: t2, transferList: u };
}
async function r(s) {
  await o(), e2.add_spatial_reference_info(s.sr, s.isGCS, s.toMetersXY, s.toMetersZ);
}
function i() {
  e2 && (e2.uninitialize_lyr3d_worker_wasm(), e2 = null);
}
function o() {
  return e2 ? Promise.resolve() : (t || (t = e().then((s) => {
    e2 = s, e2.initialize_lyr3d_worker_wasm(), t = null;
  })), t);
}
export {
  r as addSpatialReferenceInfo,
  i as destroyWasm,
  o as initialize,
  n as process
};
//# sourceMappingURL=Lyr3DWorker-SAEO57EK.js.map
