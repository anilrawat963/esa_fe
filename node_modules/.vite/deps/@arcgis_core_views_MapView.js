import {
  i as i10,
  n as n13,
  o as o11
} from "./chunk-JCA5ZKDG.js";
import "./chunk-GQGQDZ2T.js";
import {
  c as c6,
  g as g2,
  s as s10
} from "./chunk-AUJIAAW5.js";
import {
  i as i11,
  n as n14,
  o as o12,
  r as r11
} from "./chunk-E7PJOFGP.js";
import "./chunk-4VQDBNTM.js";
import {
  c as c8,
  e as e14
} from "./chunk-KFU6TDGW.js";
import {
  e as e15
} from "./chunk-6AFWHXSG.js";
import {
  r as r13
} from "./chunk-73FJYU43.js";
import {
  f as f5,
  t2 as t8,
  u as u6
} from "./chunk-3BNOOWTA.js";
import "./chunk-AIJLLSRB.js";
import {
  r as r14
} from "./chunk-VX2NEBRT.js";
import {
  m as m11
} from "./chunk-IXRRTVLJ.js";
import {
  g as g3,
  t as t10
} from "./chunk-EKM7KERW.js";
import {
  a2 as a6,
  e as e13,
  u as u7
} from "./chunk-WKTI47FV.js";
import {
  c as c5,
  m as m10,
  p as p3
} from "./chunk-T3SYSTKO.js";
import {
  i as i9
} from "./chunk-TITL4X6H.js";
import {
  a as a5,
  c as c7,
  r as r12,
  s as s11
} from "./chunk-CMI44VAT.js";
import {
  t as t9
} from "./chunk-2BP3TIB4.js";
import {
  o as o10
} from "./chunk-HOJHSMLY.js";
import {
  e as e11
} from "./chunk-2O6SPRT2.js";
import {
  Gt,
  H,
  Y,
  Z,
  _ as _4,
  at,
  ft,
  gt,
  ht,
  jt,
  kt,
  lt,
  m as m9,
  mt,
  ot,
  pt,
  tt,
  ut,
  wt,
  xt,
  yt
} from "./chunk-6RE6OSTE.js";
import {
  e as e12
} from "./chunk-QSGJ3ECU.js";
import {
  t as t7
} from "./chunk-LQPKVYW2.js";
import "./chunk-U55FA2EK.js";
import "./chunk-GBN36VHC.js";
import {
  t as t6
} from "./chunk-SHPBZTDJ.js";
import {
  m as m8
} from "./chunk-ZCI5A4FF.js";
import {
  m as m7
} from "./chunk-ET5EDAFM.js";
import {
  r as r10
} from "./chunk-FI2PYYCT.js";
import "./chunk-ZSZK67ZL.js";
import "./chunk-IPWH4LK2.js";
import {
  h as h4,
  s as s8
} from "./chunk-7CDU3B2L.js";
import {
  n as n11
} from "./chunk-B5A4L35M.js";
import {
  f as f4,
  i as i6,
  s as s9,
  u as u5
} from "./chunk-52SEOH5H.js";
import {
  e as e10
} from "./chunk-JUZ3H47H.js";
import {
  r as r9
} from "./chunk-UYMV6HXW.js";
import "./chunk-E2RVV63B.js";
import {
  i as i7
} from "./chunk-AJGINJLG.js";
import "./chunk-JE2NJSBU.js";
import "./chunk-2D47RURG.js";
import "./chunk-WCWUUHUV.js";
import "./chunk-7HTU7ZUX.js";
import "./chunk-QNVJVDYZ.js";
import {
  n as n10
} from "./chunk-WDTGOP77.js";
import {
  g
} from "./chunk-VYMBX5H5.js";
import {
  h as h3
} from "./chunk-BPTFV5VM.js";
import {
  l as l8,
  z as z2
} from "./chunk-YP3WVJP3.js";
import "./chunk-M24KZOVI.js";
import {
  b as b4
} from "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import {
  I
} from "./chunk-XDLV73DB.js";
import "./chunk-ARTU4L55.js";
import {
  L as L2
} from "./chunk-6VL5D5UP.js";
import "./chunk-6QHY54HZ.js";
import "./chunk-GXJJY3ND.js";
import "./chunk-5ONGWFJ3.js";
import "./chunk-PLNHHGHL.js";
import "./chunk-DFK6QMLO.js";
import {
  s as s6
} from "./chunk-4WTOIJXV.js";
import "./chunk-BBYMM7CM.js";
import "./chunk-EM7Y2JZC.js";
import "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import {
  s as s5
} from "./chunk-MUBG7EZN.js";
import {
  B,
  c as c3,
  e as e6,
  n as n6,
  t as t4
} from "./chunk-TMVLBQMP.js";
import {
  L,
  i as i2,
  j as j2,
  n2 as n8
} from "./chunk-6IHS6RYH.js";
import "./chunk-OJBEN6CV.js";
import "./chunk-TU5E6NPS.js";
import "./chunk-RKNCTZBL.js";
import {
  i as i8,
  l as l3,
  n as n5
} from "./chunk-TJTOV6JD.js";
import {
  _ as _3
} from "./chunk-C3FRY5U4.js";
import "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import {
  L as L3
} from "./chunk-BODQJTP6.js";
import "./chunk-GEGX35PE.js";
import "./chunk-6Z5KSPPF.js";
import "./chunk-LRXVZGY2.js";
import "./chunk-6NEMIXIJ.js";
import "./chunk-U3X2LY5C.js";
import "./chunk-JRCD3NNE.js";
import {
  n as n12
} from "./chunk-LRCBJR5A.js";
import "./chunk-KZCOWPYM.js";
import "./chunk-RO646JIV.js";
import {
  l as l10
} from "./chunk-XXBJY7RN.js";
import "./chunk-NPYFNHY2.js";
import "./chunk-JW6DU3OK.js";
import {
  c as c4,
  d as d4,
  l as l6,
  m as m4
} from "./chunk-CNYNCKEV.js";
import {
  _ as _2,
  d as d3
} from "./chunk-XL5QPCXN.js";
import {
  W,
  b as b3
} from "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-C5M24ACM.js";
import "./chunk-L4A2QJG4.js";
import "./chunk-W75DBJD7.js";
import "./chunk-6KDQMJAI.js";
import "./chunk-UDHS2MGH.js";
import "./chunk-QF7FRVN6.js";
import "./chunk-ENINOZUZ.js";
import {
  b as b5
} from "./chunk-P6IKJIMO.js";
import {
  m as m6
} from "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import {
  n as n4
} from "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import {
  o as o5
} from "./chunk-ONXWBTTM.js";
import {
  l as l9
} from "./chunk-T7F6Q6JJ.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import {
  m as m3
} from "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import {
  P
} from "./chunk-PZ5RULLK.js";
import {
  o as o9
} from "./chunk-OPJX4KXH.js";
import {
  M as M2,
  h as h2,
  i as i5,
  o as o8,
  r as r8
} from "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import {
  i as i3,
  l as l7,
  y as y3
} from "./chunk-FPMLKIDB.js";
import {
  S as S2,
  e as e9,
  m as m5,
  o as o7,
  r as r7
} from "./chunk-AZXJIEZ6.js";
import {
  e as e8,
  u as u3
} from "./chunk-Q75WYS7K.js";
import {
  f as f3,
  t as t5,
  z
} from "./chunk-H74Q4SYB.js";
import {
  U,
  a as a4,
  f,
  h,
  j,
  l as l5,
  w as w2
} from "./chunk-2OFHDVO5.js";
import {
  l as l2,
  n as n3,
  r as r4
} from "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import {
  n as n7
} from "./chunk-5UPBUJPC.js";
import {
  e as e5,
  p as p2
} from "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import {
  b as b2,
  l as l4
} from "./chunk-YY5PITIH.js";
import {
  u as u4
} from "./chunk-CCQFL76O.js";
import {
  i as i4
} from "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import {
  M,
  o as o6,
  r as r6,
  s as s7
} from "./chunk-SMWUT52Z.js";
import {
  _,
  e as e7,
  j as j3,
  y as y2
} from "./chunk-AXZMNHTN.js";
import {
  f as f2
} from "./chunk-5T3MJDSR.js";
import {
  G,
  T as T2
} from "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import {
  r as r5
} from "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import {
  s as s4
} from "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import {
  n as n9
} from "./chunk-XXLHAM2M.js";
import {
  b,
  c,
  c2,
  e as e3,
  m as m2,
  o,
  o2,
  r,
  r2,
  t,
  t2
} from "./chunk-5EI5H4QX.js";
import {
  a2,
  m,
  s2
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  A as A2,
  F
} from "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import {
  n as n2,
  r as r3,
  t as t3
} from "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import {
  e,
  n
} from "./chunk-4DGC7CBY.js";
import {
  $,
  A,
  C,
  S,
  T,
  a as a3,
  d as d2,
  e as e2,
  e2 as e4,
  l2 as l,
  o3,
  o4,
  p,
  s as s3,
  u2 as u,
  u3 as u2,
  w,
  y
} from "./chunk-GNMPGHLQ.js";
import {
  a,
  i3 as i,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import {
  N,
  d,
  has
} from "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/support/AnalysesCollection.js
var s12 = class extends n5 {
  constructor(e30) {
    super(e30), this.addHandles(this.on("before-add", (e31) => {
      null != e31.item && e31.item.parent === this.owner && (i.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."), e31.preventDefault());
    }));
  }
  _own(e30) {
    e30.parent = this.owner;
  }
  _release(e30) {
    e30.parent = null;
  }
};
s12 = __decorate([a2("esri.support.AnalysesCollection")], s12);

// node_modules/@arcgis/core/views/BreakpointsOwner.js
var l11 = { widthBreakpoint: { getValue(e30) {
  const i30 = e30.viewSize[0], s35 = e30.breakpoints, a31 = this.values;
  return i30 <= s35.xsmall ? a31.xsmall : i30 <= s35.small ? a31.small : i30 <= s35.medium ? a31.medium : i30 <= s35.large ? a31.large : a31.xlarge;
}, values: { xsmall: "xsmall", small: "small", medium: "medium", large: "large", xlarge: "xlarge" }, valueToClassName: { xsmall: "esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge", small: "esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge", medium: "esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge", large: "esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge", xlarge: "esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large" } }, heightBreakpoint: { getValue(e30) {
  const i30 = e30.viewSize[1], s35 = e30.breakpoints, a31 = this.values;
  return i30 <= s35.xsmall ? a31.xsmall : i30 <= s35.small ? a31.small : i30 <= s35.medium ? a31.medium : i30 <= s35.large ? a31.large : a31.xlarge;
}, values: { xsmall: "xsmall", small: "small", medium: "medium", large: "large", xlarge: "xlarge" }, valueToClassName: { xsmall: "esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge", small: "esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge", medium: "esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge", large: "esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge", xlarge: "esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large" } }, orientation: { getValue(e30) {
  const i30 = e30.viewSize, s35 = i30[0], a31 = i30[1], t27 = this.values;
  return a31 >= s35 ? t27.portrait : t27.landscape;
}, values: { portrait: "portrait", landscape: "landscape" }, valueToClassName: { portrait: "esri-view-orientation-portrait", landscape: "esri-view-orientation-landscape" } } };
var h5 = { xsmall: 544, small: 768, medium: 992, large: 1200 };
function n15(e30) {
  const i30 = e30;
  return i30 && i30.xsmall < i30.small && i30.small < i30.medium && i30.medium < i30.large;
}
function m12(e30, i30) {
  return i30 ? l11[e30].valueToClassName[i30].split(" ") : [];
}
var o13 = (o30) => {
  const g15 = o30;
  let w8 = class extends g15 {
    constructor(...e30) {
      super(...e30), this.orientation = null, this.widthBreakpoint = null, this.heightBreakpoint = null, this.breakpoints = h5;
    }
    initialize() {
      this.addHandles(l5(() => [this.breakpoints, this.size], () => this._updateClassNames(), h));
    }
    destroy() {
      this.destroyed || this._removeActiveClassNames();
    }
    set breakpoints(e30) {
      if (e30 === this._get("breakpoints")) return;
      if (!n15(e30)) {
        const i30 = JSON.stringify(h5, null, 2);
        console.warn("provided breakpoints are not valid, using defaults:" + i30), e30 = h5;
      }
      this._set("breakpoints", { ...e30 });
    }
    _updateClassNames() {
      if (!this.container) return;
      const e30 = t.acquire(), s35 = t.acquire();
      let a31, t27 = false;
      for (a31 in l11) {
        const i30 = this[a31], r29 = l11[a31].getValue({ viewSize: this.size, breakpoints: this.breakpoints });
        i30 !== r29 && (t27 = true, this[a31] = r29, m12(a31, i30).forEach((e31) => s35.push(e31)), m12(a31, r29).forEach((i31) => e30.push(i31)));
      }
      t27 && (this._applyClassNameChanges(e30, s35), t.release(e30), t.release(s35));
    }
    _applyClassNameChanges(e30, i30) {
      const s35 = this.container;
      s35 && (i30.forEach((e31) => s35.classList.remove(e31)), e30.forEach((e31) => s35.classList.add(e31)));
    }
    _removeActiveClassNames() {
      const e30 = this.container;
      if (!e30) return;
      let i30;
      for (i30 in l11) m12(i30, this[i30]).forEach((i31) => e30.classList.remove(i31));
    }
  };
  return __decorate([m2()], w8.prototype, "breakpoints", null), __decorate([m2()], w8.prototype, "orientation", void 0), __decorate([m2()], w8.prototype, "widthBreakpoint", void 0), __decorate([m2()], w8.prototype, "heightBreakpoint", void 0), w8 = __decorate([a2("esri.views.BreakpointsOwner")], w8), w8;
};

// node_modules/@arcgis/core/views/overlay/ViewOverlay.js
var a7 = class extends b {
  constructor() {
    super(...arguments), this.items = new O(), this._watchUpdatingTracking = new h3(), this._callbacks = /* @__PURE__ */ new Map(), this._projector = i2(), this._hiddenProjector = i2();
  }
  get needsRender() {
    return this.items.length > 0;
  }
  get updating() {
    return this._watchUpdatingTracking?.updating ?? false;
  }
  initialize() {
    const t27 = document.createElement("div");
    t27.className = "esri-overlay-surface", this._set("surface", t27), this._hiddenSurface = document.createElement("div"), this._hiddenSurface.setAttribute("style", "visibility: hidden;"), t27.appendChild(this._hiddenSurface), this._watchUpdatingTracking.addOnCollectionChange(() => this.items, (t28) => {
      for (const e30 of t28.added) {
        const t29 = () => e30.render();
        this._callbacks.set(e30, t29), this._projector.append(this.surface, t29);
      }
      for (const e30 of t28.removed) {
        const t29 = this._projector.detach(this._callbacks.get(e30));
        this.surface.removeChild(t29.domNode), this._callbacks.delete(e30);
      }
    });
  }
  addItem(t27) {
    this.items.add(t27);
  }
  removeItem(t27) {
    this.items.remove(t27);
  }
  destroy() {
    this.items.removeAll(), this._callbacks.forEach((t27) => this._projector.detach(t27)), this._callbacks = null, this._projector = null, this._watchUpdatingTracking.destroy();
  }
  render() {
    this._projector.renderNow();
  }
  computeBoundingRect(t27) {
    const e30 = this._hiddenSurface, o30 = this._hiddenProjector;
    let r29;
    const i30 = () => (r29 = t27.render(), r29);
    o30.append(e30, i30), o30.renderNow();
    const s35 = { left: 0, top: 0, right: 0, bottom: 0 };
    if (r29?.domNode) {
      const t28 = r29.domNode.getBoundingClientRect();
      s35.left = t28.left, s35.top = t28.top, s35.right = t28.right, s35.bottom = t28.bottom;
    }
    for (o30.detach(i30); e30.firstChild; ) e30.removeChild(e30.firstChild);
    return s35;
  }
  overlaps(t27, e30) {
    const o30 = this.computeBoundingRect(t27), r29 = this.computeBoundingRect(e30);
    return Math.max(o30.left, r29.left) <= Math.min(o30.right, r29.right) && Math.max(o30.top, r29.top) <= Math.min(o30.bottom, r29.bottom);
  }
  get hasVisibleItems() {
    return this.items.some((t27) => t27.visible);
  }
  async prepare() {
    await document.fonts.load(this._fontString()).catch(() => {
    });
  }
  renderCanvas(t27, e30) {
    const o30 = !!e30?.disableDecorations;
    if (!this.items.some((t28) => t28.visible && !(o30 && t28.isDecoration))) return;
    const r29 = t27.getContext("2d");
    r29.save(), r29.font = this._fontString(), this.items.forEach((t28) => {
      o30 && t28.isDecoration || (r29.save(), t28.renderCanvas(r29), r29.restore());
    }), r29.restore();
  }
  _fontString() {
    return `10px ${getComputedStyle(this.surface).fontFamily}`;
  }
};
__decorate([m2({ readOnly: true })], a7.prototype, "surface", void 0), __decorate([m2({ readOnly: true })], a7.prototype, "items", void 0), __decorate([m2({ readOnly: true })], a7.prototype, "needsRender", null), __decorate([m2({ readOnly: true })], a7.prototype, "_watchUpdatingTracking", void 0), __decorate([m2({ readOnly: true })], a7.prototype, "updating", null), a7 = __decorate([a2("esri.views.overlay.ViewOverlay")], a7);
var c9 = a7;

// node_modules/@arcgis/core/views/DOMContainer.js
var p4 = [0, 0];
function m13(e30) {
  const t27 = (e30.ownerDocument || window.document).defaultView, s35 = e30.getBoundingClientRect();
  return p4[0] = s35.left + (t27?.pageXOffset ?? 0), p4[1] = s35.top + (t27?.pageYOffset ?? 0), p4;
}
function f6(e30) {
  e30 && (e30.textContent = "", e30.parentNode && e30.parentNode.removeChild(e30));
}
function y4(e30) {
  const t27 = document.createElement("div");
  return e30.appendChild(t27), t27;
}
var g4 = 16;
var _5 = 750;
var v = 512;
var w3 = 2;
var C2 = (p27) => {
  const C7 = p27;
  let b12 = class extends C7 {
    constructor(...e30) {
      super(...e30), this._freqInfo = { freq: g4, time: _5 }, this._overlayRenderTaskHandle = null, this.aria = {}, this.height = 0, this.messagesCommon = null, this.overlay = null, this.position = null, this.resizing = false, this.root = null, this.surface = null, this.suspended = true, this.userContent = null, this.width = 0, this.widthBreakpoint = null, this.addHandles([l5(() => this.cursor, (e31) => {
        const { surface: t27 } = this;
        t27 && t27.setAttribute("data-cursor", e31);
      }), l5(() => this.navigating, (e31) => {
        const { surface: t27 } = this;
        t27 && t27.setAttribute("data-navigating", e31.toString());
      }), l5(() => [this.aria, this.surface], () => this._updateAria(), { initial: true })]);
    }
    initialize() {
      const e30 = this;
      this.addHandles([l5(() => this.ui, (e31, t27) => this._handleUIChange(e31, t27), h), e30.on("focus", () => this.notifyChange("focused")), e30.on("blur", () => this.notifyChange("focused"))]);
    }
    destroy() {
      this.destroyed || (this.ui?.destroy(), this.container = null);
    }
    get container() {
      return this._get("container") ?? null;
    }
    set container(e30) {
      const i30 = this._get("container"), r29 = n6(e30);
      if (r29 || "string" != typeof e30 || i.getLogger(this).error("#container", `element with id '${e30}' not found`), i30 === r29) return;
      if (this._stopMeasuring(), i30 && (i30.classList.remove("esri-view"), this._overlayRenderTaskHandle && (this._overlayRenderTaskHandle.remove(), this._overlayRenderTaskHandle = null), this.overlay && (this.overlay.destroy(), this._set("overlay", null)), this.root && (f6(this.root), this._set("root", null)), this.userContent && (t4(this.userContent, i30), f6(this.userContent), this._set("userContent", null))), !r29) return this._set("width", 0), this._set("height", 0), this._set("position", null), this._set("suspended", true), this._set("surface", null), void this._set("container", null);
      r29.classList.add("esri-view");
      const l24 = document.createElement("div");
      l24.className = "esri-view-user-storage", t4(r29, l24), r29.appendChild(l24), this._set("userContent", l24);
      const d21 = document.createElement("div");
      d21.className = "esri-view-root", r29.insertBefore(d21, r29.firstChild), this._set("root", d21);
      const u19 = document.createElement("div");
      u19.className = "esri-view-surface", u19.setAttribute("role", "application"), u19.tabIndex = 0, d21.appendChild(u19), this._set("surface", u19);
      const p28 = new c9();
      d21.appendChild(p28.surface), this._set("overlay", p28), this.addHandles(l5(() => p28.needsRender, (e31) => {
        e31 && !this._overlayRenderTaskHandle ? this._overlayRenderTaskHandle = F({ render: () => this.overlay?.render() }) : this._overlayRenderTaskHandle = l(this._overlayRenderTaskHandle);
      })), this.forceDOMReadyCycle(), this._set("container", r29), this._startMeasuring();
    }
    get focused() {
      const e30 = document.activeElement === this.surface;
      return document.hasFocus() && e30;
    }
    get size() {
      return [this.width, this.height];
    }
    set ui(e30) {
      const t27 = this._get("ui");
      t27 !== e30 && t27?.destroy(), this._set("ui", e30);
    }
    blur() {
      this.surface?.blur();
    }
    focus() {
      this.surface?.focus();
    }
    pageToContainer(e30, t27, s35) {
      const i30 = this.position;
      return e30 -= i30 ? i30[0] : 0, t27 -= i30 ? i30[1] : 0, s35 ? (s35[0] = e30, s35[1] = t27) : s35 = [e30, t27], s35;
    }
    containerToPage(e30, t27, s35) {
      const i30 = this.position;
      return e30 += i30 ? i30[0] : 0, t27 += i30 ? i30[1] : 0, s35 ? (s35[0] = e30, s35[1] = t27) : s35 = [e30, t27], s35;
    }
    _updateAria() {
      const { surface: e30, aria: t27 } = this;
      e30 && (e30.ariaLabelledByElements = t27?.labelledByElements ?? null, e30.ariaDescribedByElements = t27?.describedByElements ?? null, e30.ariaLabel = t27?.label ?? null, e30.ariaDescription = t27?.description ?? null);
    }
    _handleUIChange(e30, t27) {
      this.removeHandles("ui"), t27 && t27 !== e30 && t27.destroy(), e30 && (e30.view = this, this.addHandles(l5(() => this.root, (t28) => {
        e30.container = t28 ? y4(t28) : null;
      }, h), "ui")), this._set("ui", e30);
    }
    _stopMeasuring() {
      this.removeHandles("measuring"), this._get("resizing") && this._set("resizing", false);
    }
    _startMeasuring() {
      const e30 = this._freqInfo;
      e30.freq = g4, e30.time = _5;
      const t27 = F({ prepare: (e31) => {
        const s36 = this._measure(), i30 = this._freqInfo;
        if (i30.time += e31.deltaTime, s36 && (i30.freq = g4, this._get("resizing") || this._set("resizing", true)), i30.time < i30.freq) return;
        i30.time = 0;
        const r29 = this._position();
        i30.freq = r29 || s36 ? g4 : Math.min(_5, i30.freq * w3), !s36 && i30.freq >= v && (t27.pause(), this._get("resizing") && this._set("resizing", false));
      } }), s35 = new ResizeObserver((s36) => {
        e30.freq = g4, e30.time = _5, t27.resume();
      });
      null != this.container && s35.observe(this.container);
      const o30 = e2(() => s35.disconnect());
      this.addHandles([o4(window, "resize", () => {
        e30.freq = g4, e30.time = _5, t27.resume();
      }), o30, t27], "measuring"), this._measure(), this._position();
    }
    _measure() {
      const e30 = this.container, t27 = e30 ? e30.clientWidth : 0, s35 = e30 ? e30.clientHeight : 0;
      if (0 === t27 || 0 === s35) return this.suspended || this._set("suspended", true), false;
      const i30 = this.width, r29 = this.height;
      if (t27 === i30 && s35 === r29) return this.suspended && this._set("suspended", false), false;
      this._set("width", t27), this._set("height", s35), this.suspended && this._set("suspended", false);
      return this.emit("resize", { oldWidth: i30, oldHeight: r29, width: t27, height: s35 }), true;
    }
    _position() {
      const e30 = this.container, t27 = this.position, s35 = e30 && m13(e30);
      return !!s35 && ((!t27 || s35[0] !== t27[0] || s35[1] !== t27[1]) && (this._set("position", [s35[0], s35[1]]), true));
    }
    forceDOMReadyCycle() {
    }
  };
  return __decorate([m2()], b12.prototype, "aria", void 0), __decorate([m2()], b12.prototype, "container", null), __decorate([m2({ readOnly: true })], b12.prototype, "focused", null), __decorate([m2({ readOnly: true })], b12.prototype, "height", void 0), __decorate([m2()], b12.prototype, "messagesCommon", void 0), __decorate([m2({ type: c9 })], b12.prototype, "overlay", void 0), __decorate([m2({ readOnly: true })], b12.prototype, "position", void 0), __decorate([m2({ readOnly: true })], b12.prototype, "resizing", void 0), __decorate([m2({ readOnly: true })], b12.prototype, "root", void 0), __decorate([m2({ value: null, readOnly: true })], b12.prototype, "size", null), __decorate([m2({ readOnly: true })], b12.prototype, "surface", void 0), __decorate([m2({ readOnly: true })], b12.prototype, "suspended", void 0), __decorate([m2({ nonNullable: true })], b12.prototype, "ui", null), __decorate([m2({ readOnly: true })], b12.prototype, "userContent", void 0), __decorate([m2({ readOnly: true })], b12.prototype, "width", void 0), __decorate([m2()], b12.prototype, "widthBreakpoint", void 0), b12 = __decorate([a2("esri.views.DOMContainer")], b12), b12;
};

// node_modules/@arcgis/core/views/popupAdapter.js
var n16 = "popup";
var e16 = "manual";
function i12(n34) {
  return null != n34 && "open" in n34 && "declaredClass" in n34;
}
function p5(n34) {
  return !!n34 && "arcgis-popup" === n34.tagName.toLowerCase() && "open" in n34;
}
function t11(o30, t27, l24) {
  const [u19, a31, s35] = t27;
  if (l24) {
    const [e30, o31, t28] = l24;
    e30 && i12(o31) && (o31.view = null, e30.remove(o31, n16), o31 !== a31 && a31 && o31.destroy()), e30 && t28 && p5(t28) && (t28.view = null, e30.remove(t28, n16), t28 !== s35 && s35 && t28.remove());
  }
  u19 && i12(a31) && (a31.view = o30, u19.add(a31, { key: n16, position: e16, internal: true })), u19 && s35 && p5(s35) && (s35.view = o30, u19.add(s35, { key: n16, position: e16, internal: true }));
}
async function l12(n34, e30) {
  const { popup: o30, popupElement: t27 } = n34;
  i12(o30) ? await s13(o30, null, e30) : t27 && p5(t27) ? await s13(null, t27, e30) : e30?.defer(async () => {
    await n34.setupPopup();
    const { popup: o31, popupElement: t28 } = n34;
    i12(o31) && !n34.destroyed && n34.ready && n34.popupEnabled ? await s13(o31, null, e30) : t28 && p5(t28) && await s13(null, t28, e30);
  });
}
function u8(n34, e30) {
  const { popup: o30, popupElement: t27 } = n34;
  if (i12(o30)) return o30.open(e30);
  t27 && p5(t27) && t27.open(e30);
}
function a8(n34, e30) {
  i12(n34) && n34.close(), e30 && p5(e30) && (e30.visible = false);
}
async function s13(n34, e30, o30) {
  if (i12(n34)) {
    const e31 = await n34.viewModel.handleViewClick(o30);
    return void (e31?.promises?.length ? n34.open(e31) : n34.visible && n34.close());
  }
  if (e30 && p5(e30)) {
    const n35 = await e30.handleViewClick(o30);
    n35?.promises?.length ? e30.open(n35) : e30.visible && (e30.visible = false);
  }
}

// node_modules/@arcgis/core/views/PopupView.js
var V = (u19) => {
  const V5 = u19;
  let _12 = class extends V5 {
    constructor() {
      super(...arguments), this._popupSetupTask = null, this.popup = {}, this.popupEnabled = true;
    }
    initialize() {
      this.addHandles([l5(() => [this.ui, this.popup, this.popupElement], ([p27, e30, t27], o30) => {
        const [i30, s35, r29] = o30 ?? [];
        t11(this, [p27, e30, t27], [i30, s35, r29]);
      }, w2), this.on("click", (p27) => {
        this.popup && this.popupEnabled && ("mouse" !== p27.pointerType || 0 === p27.button) && l12(this, p27);
      }, f5.WIDGET)]), j(() => this.ready && this.popupEnabled && !this.updating).then(() => import("./Popup-C5QZUUYP.js"));
    }
    destroy() {
      this.destroyed || this.closePopup();
    }
    async openPopup(p27) {
      if (i12(this.popup)) return this.popup.open(p27);
      if (this.popupElement && p5(this.popupElement)) this.popupElement.open(p27).catch(() => {
      });
      else try {
        if (await this.setupPopup(), !this.popup) return void i.getLogger(this).error(new s("view:null-popup", "Popup is null and can't be opened"));
        u8(this, p27);
      } catch {
      }
    }
    closePopup() {
      this._popupSetupTask?.abort(), a8(this.popup, this.popupElement);
    }
    async fetchPopupFeatures(p27, e30) {
      return await this.when(), this._popupHitsToFeatures(await this._getPopupHits(p27, e30), e30);
    }
    async setupPopup() {
      if (this._popupSetupTask?.abort(), this.popup && !i12(this.popup)) return this._popupSetupTask = d3(async (p27) => {
        if (!this.popupEnabled || !p5(this.popupElement)) if (this.dependencies.popup && "function" == typeof this.dependencies.popup) await this.dependencies.popup(), s3(p27), customElements.get("arcgis-popup") || i.getLogger(this).error(new s("view:undefined-popup-element", "`arcgis-popup` custom element is undefined and can't be opened")), this.popupElement = document.createElement("arcgis-popup");
        else {
          const { default: e30 } = await import("./Popup-C5QZUUYP.js");
          if (s3(p27), !this.popup || i12(this.popup)) return;
          const t27 = this.popup;
          if ("open" in t27 || "close" in t27) {
            const { open: p28, close: o30, ...i30 } = t27;
            this.popup = new e30({ ...i30 });
          } else this.popup = new e30(t27);
        }
      }), this._popupSetupTask.promise;
    }
    async _popupHitsToFeatures({ location: p27, hits: e30 }, t27) {
      const o30 = [], i30 = [];
      let u20 = false;
      const n34 = S(t27, has("popup-view-fetch-timeout") ?? v2), a31 = (p28) => {
        const e31 = new E(p28);
        return i30.push(e31), o30.push(e31.promise), e31;
      }, c27 = (p28) => {
        const e31 = i30.at(-1);
        return e31 && e31.layerView === p28 && !u20 ? e31 : a31(p28);
      };
      for (const s35 of e30) if ("graphic" in s35) {
        c27(s35.layerView).graphics.push(s35.graphic), u20 = false;
      } else o30.push(s35.layerView.fetchPopupFeaturesAtLocation(s35.mapPoint, n34)), u20 = true;
      i30.forEach((p28) => p28.resolve(n34));
      const h17 = A(o30).then((p28) => p28.filter((p29) => !!p29).flat());
      return { pendingFeatures: o30, allGraphicsPromise: h17, location: p27 };
    }
    async _getPopupHits(p27, e30) {
      const { hits: t27, location: o30 } = await this.popupHitTest(p27);
      s3(e30);
      const s35 = [];
      for (const i30 of t27) if ("graphic" in i30) {
        if (this._isValidPopupGraphic(i30.graphic, e30)) {
          const p28 = this._isValidPopupGraphicsLayerView(i30.layerView) ? i30.layerView : void 0;
          s35.push({ graphic: i30.graphic, layerView: p28 });
        }
      } else this._isValidPopupLocationLayerView(i30.layerView) && s35.push({ mapPoint: i30.mapPoint, layerView: i30.layerView });
      return { hits: s35, location: o30 };
    }
    _isValidPopupGraphic(p27, e30) {
      return p27 && !!p27.getEffectivePopupTemplate(e30?.defaultPopupTemplateEnabled);
    }
    _isValidPopupGraphicsLayerView(p27) {
      return !p27 || (!("layer" in p27) || !p27.suspended) && "fetchPopupFeaturesFromGraphics" in p27;
    }
    _isValidPopupLocationLayerView(p27) {
      return (!("layer" in p27) || !p27.suspended) && "fetchPopupFeaturesAtLocation" in p27;
    }
  };
  return __decorate([m2()], _12.prototype, "popup", void 0), __decorate([m2()], _12.prototype, "popupElement", void 0), __decorate([m2()], _12.prototype, "popupEnabled", void 0), _12 = __decorate([a2("esri.views.PopupView")], _12), _12;
};
var E = class {
  constructor(p27) {
    this.layerView = p27, this._resolver = $(), this.graphics = [];
  }
  get promise() {
    return this._resolver.promise;
  }
  resolve(p27) {
    const { layerView: e30, graphics: t27, _resolver: o30 } = this;
    if (!e30) return o30.resolve(t27), o30.promise;
    let i30;
    return e30.fetchPopupFeaturesFromGraphics(t27, p27).catch((p28) => (i30 = p28, null)).then((p28) => {
      p28 ? o30.resolve(p28) : o30.reject(i30);
    }), o30.promise;
  }
};
var v2 = 5e3;

// node_modules/@arcgis/core/views/BasemapView.js
var p6 = class extends b {
  constructor(e30) {
    super(e30), this.view = null, this.baseLayerViews = new O(), this.groundLayerViews = new O(), this.referenceLayerViews = new O(), this._loadingHandle = l5(() => this.view?.map?.basemap, (e31) => {
      e31 && e31.load().catch(() => {
      });
    }, h);
  }
  destroy() {
    this._set("view", null), this._loadingHandle = l(this._loadingHandle), this.baseLayerViews.destroyAll(), this.groundLayerViews.destroyAll(), this.referenceLayerViews.destroyAll();
  }
  get suspended() {
    return this.view?.suspended ?? true;
  }
  get updating() {
    if (this.view?.suspended) return false;
    const e30 = this.view?.map?.basemap;
    return !!e30?.loaded && (this.baseLayerViews.some((e31) => e31.updating) || this.groundLayerViews.some((e31) => e31.updating) || this.referenceLayerViews.some((e31) => e31.updating));
  }
};
__decorate([m2({ constructOnly: true })], p6.prototype, "view", void 0), __decorate([m2({ readOnly: true })], p6.prototype, "baseLayerViews", void 0), __decorate([m2({ readOnly: true })], p6.prototype, "groundLayerViews", void 0), __decorate([m2({ readOnly: true })], p6.prototype, "referenceLayerViews", void 0), __decorate([m2({ readOnly: true })], p6.prototype, "suspended", null), __decorate([m2({ type: Boolean, readOnly: true })], p6.prototype, "updating", null), p6 = __decorate([a2("esri.views.BasemapView")], p6);
var d5 = p6;

// node_modules/@arcgis/core/views/Magnifier.js
var i13 = class extends b {
  constructor(o30) {
    super(o30), this.factor = 1.5, this.offset = i4(0, 0), this.position = null, this.size = 120, this.maskUrl = null, this.maskEnabled = true, this.overlayUrl = null, this.overlayEnabled = true, this.visible = true;
  }
  get version() {
    return this.commitProperty("factor"), this.commitProperty("offset"), this.commitProperty("position"), this.commitProperty("visible"), this.commitProperty("size"), this.commitProperty("maskUrl"), this.commitProperty("maskEnabled"), this.commitProperty("overlayUrl"), this.commitProperty("overlayEnabled"), (this._get("version") || 0) + 1;
  }
};
__decorate([m2({ type: Number })], i13.prototype, "factor", void 0), __decorate([m2({ nonNullable: true })], i13.prototype, "offset", void 0), __decorate([m2()], i13.prototype, "position", void 0), __decorate([m2({ type: Number, range: { min: 0 } })], i13.prototype, "size", void 0), __decorate([m2()], i13.prototype, "maskUrl", void 0), __decorate([m2()], i13.prototype, "maskEnabled", void 0), __decorate([m2()], i13.prototype, "overlayUrl", void 0), __decorate([m2()], i13.prototype, "overlayEnabled", void 0), __decorate([m2({ readOnly: true })], i13.prototype, "version", null), __decorate([m2({ type: Boolean })], i13.prototype, "visible", void 0), i13 = __decorate([a2("esri.views.Magnifier")], i13);
var p7 = i13;

// node_modules/@arcgis/core/views/support/selectionUtils.js
function e17(e30) {
  return !(null == e30 || "object" != typeof e30 || !("createQuery" in e30) || !e30.createQuery);
}

// node_modules/@arcgis/core/views/SelectionManager.js
var b6 = class extends l2 {
  constructor(e30) {
    super(e30), this._selectionMap = new s6(), this._sources = new O(), this._trashCan = [], this._layerEditHandles = new O(), this._vizTaskId = 0, this.view = null, this.showHighlight = true, this.highlightName = "default";
  }
  initialize() {
    this.addHandles([l5(() => [this.view, this.showHighlight], () => this._refreshVisualization()), l5(() => this.view, (e30) => {
      e30?.when().then(() => this.syncSources());
    }, h), a4(() => this.sources, "change", (e30) => {
      const t27 = this._selectionMap, s35 = [];
      for (const o30 of e30.removed) {
        const e31 = t27.get(o30);
        e31 && (t27.delete(o30), e31.highlightHandle?.remove(), s35.push({ layer: o30, selection: [], added: [], removed: [...e31.selection] }));
      }
      this._refreshListeners(), s35.length && this._onSelectionChange(s35);
    }, { onListenerAdd: () => this._refreshListeners() })]);
  }
  destroy() {
    this.clear(), this._layerEditHandles.drain(l);
  }
  get selections() {
    return Array.from(this._selectionMap.entries()).map((e30) => {
      const [t27, s35] = e30;
      return { layer: t27, selection: [...s35.selection] };
    });
  }
  get count() {
    let e30 = 0;
    for (const t27 of this._selectionMap.values()) e30 += t27.selection.length;
    return e30;
  }
  get hasSelection() {
    return this.count > 0;
  }
  get sources() {
    return this._sources;
  }
  set sources(e30) {
    n4(e30, this._sources);
  }
  syncSources() {
    const e30 = /* @__PURE__ */ new Set(), t27 = this.view?.map;
    if (!t27) return;
    const s35 = (t28) => {
      l6(t28) ? (t28.layers?.forEach(s35), t28.tables?.forEach(s35)) : c4(t28) ? (t28.sublayers?.forEach(s35), t28.subtables?.forEach(s35)) : d4(t28) ? t28.sublayers?.forEach(s35) : e17(t28) && e30.add(t28);
    };
    t27.allLayers.forEach(s35), t27.allTables.forEach(s35), this.sources = [...e30];
  }
  async getSelectedFeatures(e30, s35 = {}, o30 = "layerView") {
    const { view: i30, selections: n34 } = this;
    if (!i30 && "layerView" === o30) return i.getLogger(this).warn("Cannot query layer views without a view."), [];
    const l24 = (e30?.length ? n34.filter((t27) => e30.includes(t27.layer)) : n34).map(async (e31) => {
      const { layer: t27, selection: n35 } = e31;
      if (!n35.length) return;
      const r29 = m4(t27) ? t27.parent : t27;
      if (null != r29) {
        if (i30 && "layerView" === o30 && !j4(r29) && E2(r29)) {
          const e32 = await i30.whenLayerView(r29).catch(() => null);
          if (e32) return L4(e32, n35, s35);
        }
        return L4(r29, n35, s35);
      }
    }).filter(N);
    return (await Promise.all(l24)).filter(N);
  }
  updateSelection(e30) {
    const t27 = /* @__PURE__ */ new Map();
    for (const [s35, n34] of this._selectionMap) t27.set(s35, [...n34.selection]);
    let o30 = false;
    const i30 = e30.current.concat(e30.added);
    for (const s35 of i30) {
      const e31 = s35.sourceLayer, i31 = s35.getObjectId();
      if (this.sources.includes(e31) && (e17(e31) || m4(e31)) && null !== i31) {
        const s36 = e(t27, e31, () => []);
        s36.includes(i31) || (s36.push(i31), o30 = true);
      }
    }
    for (const s35 of e30.removed) {
      const e31 = s35.sourceLayer, i31 = s35.getObjectId();
      if (this.sources.includes(e31) && (e17(e31) || m4(e31)) && null !== i31) {
        const s36 = t27.get(e31), n34 = s36?.indexOf(i31);
        void 0 !== n34 && n34 >= 0 && (s36?.splice(n34, 1), o30 = true);
      }
    }
    if (o30) {
      const { _selectionMap: e31, _trashCan: o31 } = this, i31 = [];
      for (const [n34, r29] of t27) {
        const t28 = e31.get(n34);
        void 0 !== t28 && o31.push(t28), e31.set(n34, { selection: r29 }), i31.push({ layer: n34, selection: r29, ...d(void 0 !== t28 ? t28.selection : [], r29) });
      }
      this._onSelectionChange(i31);
    }
  }
  setSelection(e30, t27) {
    this._setSelection(e30, t27);
  }
  getSelection(e30) {
    const t27 = this._selectionMap.get(e30);
    return t27?.selection;
  }
  appendToSelection(e30, t27) {
    const s35 = this._selectionMap.get(e30), o30 = void 0 !== s35 ? [...s35.selection] : [];
    for (const i30 of t27) o30.includes(i30) || o30.push(i30);
    this._setSelection(e30, o30);
  }
  removeFromSelection(e30, t27) {
    const s35 = this._selectionMap.get(e30);
    if (!s35) return;
    const o30 = [];
    for (const i30 of s35.selection) t27.includes(i30) || o30.push(i30);
    this._setSelection(e30, o30);
  }
  toggleInSelection(e30, t27) {
    const s35 = this._selectionMap.get(e30);
    if (!s35 || 0 === s35.selection.length) return void this._setSelection(e30, t27);
    const o30 = new Set(s35.selection), i30 = new Set(t27), n34 = c2(o30, i30);
    this._setSelection(e30, Array.from(n34));
  }
  clear() {
    const e30 = this._selectionMap.values();
    this._trashCan.push(...e30);
    const t27 = [];
    for (const [s35, o30] of this._selectionMap.entries()) t27.push({ layer: s35, added: [], removed: [...o30.selection], selection: [] });
    this._selectionMap.clear(), this._onSelectionChange(t27);
  }
  _onSelectionChange(e30) {
    this._refreshVisualization(), this.emit("selection-change", { view: this.view, changes: e30 });
  }
  _refreshVisualization() {
    for (this._vizTaskId++; this._trashCan.length > 0; ) {
      const e31 = this._trashCan.pop();
      e31?.highlightHandle?.remove();
    }
    if (null == this.view) return;
    const { sources: e30, view: t27, _selectionMap: s35, showHighlight: o30 } = this, i30 = this._vizTaskId;
    for (const n34 of e30) {
      const e31 = s35.get(n34), r29 = m4(n34) ? n34.parent : n34;
      if (null != r29 && E2(r29)) {
        if (j4(r29)) continue;
        t27.whenLayerView(r29).then((t28) => {
          e31?.highlightHandle?.remove(), null != e31 && o30 && i30 === this._vizTaskId && "highlight" in t28 && "function" == typeof t28.highlight && e31.selection.length > 0 && (e31.highlightHandle = t28.highlight(e31.selection, this.highlightName));
        }).catch(() => {
          e31?.highlightHandle?.remove();
        });
      }
    }
  }
  _refreshListeners() {
    this._layerEditHandles.drain(l);
    const e30 = new Set(this.sources.map((e31) => m4(e31) ? e31.parent : e31));
    for (const t27 of e30) e17(t27) && "on" in t27 && t27.on && this._layerEditHandles.push(t27.on("edits", (e31) => this._onLayerEdit(e31, t27)));
  }
  _onLayerEdit(e30, t27) {
    if (d4(t27)) this._onParentLayerEdit(e30, t27);
    else if (e30.deletedFeatures.length && this._selectionMap.has(t27)) {
      const s35 = [];
      e30.deletedFeatures.forEach(({ error: e31, objectId: t28 }) => {
        null != t28 && null == e31 && s35.push(t28);
      }), this.removeFromSelection(t27, s35);
    }
  }
  _onParentLayerEdit(e30, t27) {
    const { deletedFeatures: s35, edits: o30, updatedFeatures: i30 } = e30;
    if (o30?.updateFeatures?.forEach((e31) => {
      const s36 = e31.getObjectId() ?? e31.attributes[t27.objectIdField];
      if (null == s36) return;
      if (i30.find((e32) => e32.objectId === s36)?.error) return;
      const o31 = t27.findSublayerForFeature(e31);
      if (!e17(o31)) return;
      const n34 = t27.sublayers.find((e32) => !(!e17(e32) || !this.getSelection(e32)?.includes(s36)));
      e17(n34) && n34 !== o31 && (this.removeFromSelection(n34, [s36]), this.appendToSelection(o31, [s36]));
    }), s35.length) {
      const e31 = [];
      s35.forEach(({ error: t28, objectId: s36 }) => {
        null != s36 && null == t28 && e31.push(s36);
      }), t27.sublayers.forEach((t28) => {
        e17(t28) && this._selectionMap.has(t28) && this.removeFromSelection(t28, e31);
      });
    }
  }
  _setSelection(e30, t27) {
    if (!this.sources.includes(e30)) throw new Error(`Cannot set selection on layer ${e30.title} because it is not in 'sources'`);
    const o30 = this._selectionMap.get(e30);
    if (void 0 === o30 || !F2(o30, { selection: t27 })) {
      void 0 !== o30 && this._trashCan.push(o30), this._selectionMap.set(e30, { selection: [...t27] });
      const i30 = { layer: e30, selection: [...t27], ...d(void 0 !== o30 ? o30.selection : [], t27) };
      this._onSelectionChange([i30]);
    }
  }
};
__decorate([m2()], b6.prototype, "_selectionMap", void 0), __decorate([m2()], b6.prototype, "_sources", void 0), __decorate([m2({ readOnly: true, nonNullable: true })], b6.prototype, "selections", null), __decorate([m2({ readOnly: true, nonNullable: true })], b6.prototype, "count", null), __decorate([m2()], b6.prototype, "view", void 0), __decorate([m2({ readOnly: true, nonNullable: true })], b6.prototype, "hasSelection", null), __decorate([m2()], b6.prototype, "showHighlight", void 0), __decorate([m2()], b6.prototype, "sources", null), __decorate([m2()], b6.prototype, "highlightName", void 0), b6 = __decorate([a2("esri.views.SelectionManager")], b6);
var j4 = (e30) => m4(e30) ? true === e30.parent?.isTable : e30.isTable;
var M3 = (e30) => void 0 !== e30.layer;
var E2 = (e30) => void 0 !== e30?.when;
var F2 = (e30, t27) => {
  if (null == e30 && null == t27) return true;
  if (null != e30 && null == t27 || null == e30 && null != t27) return false;
  if (null != e30 && null != t27 && null != e30.selection && null != t27.selection) {
    const s35 = [...e30.selection], o30 = [...t27.selection];
    if (s35.length !== o30.length) return false;
    s35.sort(), o30.sort();
    for (let e31 = 0; e31 < s35.length; e31++) if (s35[e31] !== o30[e31]) return false;
  }
  return true;
};
var L4 = async (e30, t27, s35 = {}) => {
  let o30;
  if (M3(e30)) {
    const i30 = e30;
    o30 = void 0 === i30 ? null : await i30.queryFeatures(new b4({ ...s35, objectIds: t27 })).then((t28) => ({ data: t28, layer: e30.layer }));
  } else {
    const i30 = e30;
    o30 = void 0 === i30 ? null : await i30.queryFeatures(new b4({ ...s35, objectIds: t27 })).then((e31) => ({ data: e31, layer: i30 }));
  }
  return o30;
};
var C3 = b6;

// node_modules/@arcgis/core/views/Theme.js
var p8 = class extends l9(b) {
  constructor(o30) {
    super(o30), this.accentColor = new u4([255, 127, 0]), this.textColor = new u4([255, 255, 255]);
  }
};
__decorate([m2({ type: u4, nonNullable: true })], p8.prototype, "accentColor", void 0), __decorate([m2({ type: u4, nonNullable: true })], p8.prototype, "textColor", void 0), p8 = __decorate([a2("esri.views.Theme")], p8);
var l13 = p8;

// node_modules/@arcgis/core/views/input/ViewEvents.js
var i14 = ["click", "double-click", "immediate-click", "immediate-double-click", "hold", "drag", "key-down", "key-up", "pointer-down", "pointer-move", "pointer-up", "pointer-drag", "mouse-wheel", "pointer-enter", "pointer-leave", "gamepad", "focus", "blur"];
var o14 = {};
function s14(e30) {
  return !!o14[e30];
}
function p9(e30) {
  for (const t27 of e30) if (!s14(t27)) return false;
  return true;
}
i14.forEach((e30) => {
  o14[e30] = true;
});
var c10 = class {
  constructor(e30) {
    this._handlers = /* @__PURE__ */ new Map(), this._counter = 0, this._handlerCounts = /* @__PURE__ */ new Map(), this.view = e30, this.inputManager = null;
  }
  connect(e30) {
    e30 && this.disconnect(), this.inputManager = e30, this._handlers.forEach(({ handler: e31, priority: t27 }, n34) => this.inputManager?.installHandlers(n34, [e31], t27));
  }
  disconnect() {
    this.inputManager && this._handlers.forEach((e30, t27) => this.inputManager?.uninstallHandlers(t27)), this.inputManager = null;
  }
  destroy() {
    this.disconnect(), this._handlers.clear(), this.view = null;
  }
  on(t27, n34, a31, i30) {
    const o30 = Array.isArray(t27) ? t27 : t27.split(",");
    if (!p9(o30)) return o30.some(s14) && console.error("Error: registering input events and other events on the view at the same time is not supported."), null;
    let c27, u19;
    Array.isArray(n34) ? u19 = n34 : (c27 = n34, u19 = []), "function" == typeof a31 ? c27 = a31 : i30 = a31, i30 = null != i30 ? i30 : f5.DEFAULT;
    const d21 = this._createUniqueGroupName(), m27 = new l14(this.view, o30, u19, c27);
    this._handlers.set(d21, { handler: m27, priority: i30 });
    for (const e30 of o30) {
      const t28 = this._handlerCounts.get(e30) || 0;
      this._handlerCounts.set(e30, t28 + 1);
    }
    return this.inputManager && this.inputManager.installHandlers(d21, [m27], i30), e2(() => this._removeHandler(d21, o30));
  }
  hasHandler(e30) {
    return !!this._handlerCounts.get(e30);
  }
  _removeHandler(e30, t27) {
    if (this._handlers.has(e30)) {
      this._handlers.delete(e30);
      for (const e31 of t27) {
        const t28 = this._handlerCounts.get(e31);
        void 0 === t28 || (1 === t28 ? this._handlerCounts.delete(e31) : this._handlerCounts.set(e31, t28 - 1));
      }
    }
    this.inputManager && this.inputManager.uninstallHandlers(e30);
  }
  _createUniqueGroupName() {
    return this._counter += 1, `viewEvents_${this._counter}`;
  }
};
var l14 = class extends t8 {
  constructor(e30, t27, n34, a31) {
    super(true), this._latestDragStart = void 0, this.view = e30;
    for (const r29 of t27) switch (r29) {
      case "click":
        this.registerIncoming("click", n34, (t28) => a31(m14(e30, t28)));
        break;
      case "double-click":
        this.registerIncoming("double-click", n34, (t28) => a31(g5(e30, t28)));
        break;
      case "immediate-click":
        this.registerIncoming("immediate-click", n34, (t28) => a31(f7(e30, t28)));
        break;
      case "immediate-double-click":
        this.registerIncoming("immediate-double-click", n34, (t28) => a31(v3(e30, t28)));
        break;
      case "hold":
        this.registerIncoming("hold", n34, (t28) => a31(h6(e30, t28)));
        break;
      case "drag":
        this.registerIncoming("drag", n34, (e31) => {
          const t28 = this._wrapDrag(e31);
          t28 && a31(t28);
        });
        break;
      case "key-down":
        this.registerIncoming("key-down", n34, (e31) => a31(y5(e31)));
        break;
      case "key-up":
        this.registerIncoming("key-up", n34, (e31) => a31(k(e31)));
        break;
      case "pointer-down":
        this.registerIncoming("pointer-down", n34, (e31) => a31(I2(e31, "pointer-down")));
        break;
      case "pointer-move":
        this.registerIncoming("pointer-move", n34, (e31) => a31(I2(e31, "pointer-move")));
        break;
      case "pointer-up":
        this.registerIncoming("pointer-up", n34, (e31) => a31(I2(e31, "pointer-up")));
        break;
      case "pointer-drag":
        this.registerIncoming("pointer-drag", n34, (e31) => a31(D(e31)));
        break;
      case "mouse-wheel":
        this.registerIncoming("mouse-wheel", n34, (e31) => a31(P2(e31)));
        break;
      case "pointer-enter":
        this.registerIncoming("pointer-enter", n34, (e31) => a31(I2(e31, "pointer-enter")));
        break;
      case "pointer-leave":
        this.registerIncoming("pointer-leave", n34, (e31) => a31(I2(e31, "pointer-leave")));
        break;
      case "gamepad":
        this.registerIncoming("gamepad", n34, (e31) => {
          a31(_6(e31));
        });
        break;
      case "focus":
        this.registerIncoming("focus", n34, (e31) => {
          a31(u9(e31));
        });
        break;
      case "blur":
        this.registerIncoming("blur", n34, (e31) => {
          a31(d6(e31));
        });
    }
  }
  _wrapDrag(e30) {
    const n34 = e30.data, { x: a31, y: r29 } = n34.center, { action: i30, pointerType: o30, button: s35 } = n34;
    if ("start" === i30 && (this._latestDragStart = n34), !this._latestDragStart) return;
    const p27 = n34.pointer.native, c27 = n34.buttons, { cancelable: l24, timestamp: u19 } = e30, d21 = { x: this._latestDragStart.center.x, y: this._latestDragStart.center.y };
    return "end" === i30 && (this._latestDragStart = void 0), { type: "drag", action: i30, x: a31, y: r29, origin: d21, pointerType: o30, button: s35, buttons: c27, radius: n34.radius, angle: M(n34.angle), native: p27, timestamp: u19, cancelable: l24, stopPropagation: () => e30.stopPropagation(), defer: (t27) => e30.defer(t27), preventDefault: () => e30.preventDefault() };
  }
};
function u9(e30) {
  return { type: "focus", timestamp: e30.timestamp, native: e30.data.native, cancelable: e30.cancelable, stopPropagation: () => e30.stopPropagation(), defer: (t27) => e30.defer(t27), preventDefault: () => e30.preventDefault() };
}
function d6(e30) {
  return { type: "blur", timestamp: e30.timestamp, native: e30.data.native, cancelable: e30.cancelable, stopPropagation: () => e30.stopPropagation(), defer: (t27) => e30.defer(t27), preventDefault: () => e30.preventDefault() };
}
function m14(e30, t27) {
  const { pointerType: a31, button: r29, buttons: i30, x: o30, y: s35, native: p27, eventId: c27 } = t27.data, { cancelable: l24, timestamp: u19 } = t27;
  return { type: "click", pointerType: a31, button: r29, buttons: i30, x: o30, y: s35, native: p27, timestamp: u19, screenPoint: i4(o30, s35), mapPoint: b7(e30, o30, s35), eventId: c27, cancelable: l24, stopPropagation: () => t27.stopPropagation(), defer: (e31) => t27.defer(e31), preventDefault: () => t27.preventDefault() };
}
function g5(e30, t27) {
  const { pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, eventId: p27 } = t27.data, { cancelable: c27, timestamp: l24 } = t27;
  return { type: "double-click", pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, timestamp: l24, mapPoint: b7(e30, i30, o30), eventId: p27, cancelable: c27, stopPropagation: () => t27.stopPropagation(), defer: (e31) => t27.defer(e31), preventDefault: () => t27.preventDefault() };
}
function f7(e30, t27) {
  const { pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, eventId: p27 } = t27.data, c27 = s35.pointerId, { cancelable: l24, timestamp: u19 } = t27;
  return { type: "immediate-click", pointerId: c27, pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, timestamp: u19, mapPoint: b7(e30, i30, o30), eventId: p27, cancelable: l24, stopPropagation: () => t27.stopPropagation(), defer: (e31) => t27.defer(e31), preventDefault: () => t27.preventDefault() };
}
function v3(e30, t27) {
  const { pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, eventId: p27 } = t27.data, c27 = s35.pointerId, { cancelable: l24, timestamp: u19 } = t27;
  return { type: "immediate-double-click", pointerId: c27, pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, timestamp: u19, mapPoint: b7(e30, i30, o30), eventId: p27, cancelable: l24, stopPropagation: () => t27.stopPropagation(), defer: (e31) => t27.defer(e31), preventDefault: () => t27.preventDefault() };
}
function h6(e30, t27) {
  const { pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35 } = t27.data, { cancelable: p27, timestamp: c27 } = t27;
  return { type: "hold", pointerType: n34, button: a31, buttons: r29, x: i30, y: o30, native: s35, timestamp: c27, mapPoint: b7(e30, i30, o30), cancelable: p27, stopPropagation: () => t27.stopPropagation(), defer: (e31) => t27.defer(e31), preventDefault: () => t27.preventDefault() };
}
function b7(e30, t27, a31) {
  return e30.toMap(i4(t27, a31), { exclude: [] });
}
function y5(e30) {
  const { key: t27, repeat: n34, native: a31 } = e30.data, { cancelable: r29, timestamp: i30 } = e30;
  return { type: "key-down", key: t27, repeat: n34, native: a31, timestamp: i30, cancelable: r29, stopPropagation: () => e30.stopPropagation(), defer: (t28) => e30.defer(t28), preventDefault: () => e30.preventDefault() };
}
function k(e30) {
  const { key: t27, native: n34 } = e30.data, { cancelable: a31, timestamp: r29 } = e30;
  return { type: "key-up", key: t27, native: n34, timestamp: r29, cancelable: a31, stopPropagation: () => e30.stopPropagation(), defer: (t28) => e30.defer(t28), preventDefault: () => e30.preventDefault() };
}
function I2(e30, t27) {
  const { x: n34, y: a31, button: r29, buttons: i30, native: o30, eventId: s35 } = e30.data, p27 = o30.pointerId, c27 = o30.pointerType, { cancelable: l24, timestamp: u19 } = e30;
  return { type: t27, x: n34, y: a31, pointerId: p27, pointerType: c27, button: r29, buttons: i30, native: o30, timestamp: u19, eventId: s35, cancelable: l24, stopPropagation: () => e30.stopPropagation(), defer: (t28) => e30.defer(t28), preventDefault: () => e30.preventDefault() };
}
function D(e30) {
  const { x: t27, y: n34, buttons: a31, native: r29, eventId: i30 } = e30.data.currentEvent, { button: o30 } = e30.data.startEvent, s35 = e30.data.startEvent.native.pointerId, p27 = e30.data.startEvent.native.pointerType, c27 = e30.data.action, l24 = { x: e30.data.startEvent.x, y: e30.data.startEvent.y }, { cancelable: u19, timestamp: d21 } = e30;
  return { type: "pointer-drag", x: t27, y: n34, pointerId: s35, pointerType: p27, button: o30, buttons: a31, action: c27, origin: l24, native: r29, timestamp: d21, eventId: i30, cancelable: u19, stopPropagation: () => e30.stopPropagation(), defer: (t28) => e30.defer(t28), preventDefault: () => e30.preventDefault() };
}
function P2(e30) {
  const { cancelable: t27, data: n34, timestamp: a31 } = e30, { x: r29, y: i30, deltaY: o30, native: s35 } = n34;
  return { type: "mouse-wheel", x: r29, y: i30, deltaY: o30, native: s35, timestamp: a31, cancelable: t27, stopPropagation: () => e30.stopPropagation(), defer: (t28) => e30.defer(t28), preventDefault: () => e30.preventDefault() };
}
function _6(e30) {
  const { action: t27, state: n34, device: a31 } = e30.data, { cancelable: r29, timestamp: i30 } = e30, { buttons: o30, axes: s35 } = n34;
  return { type: "gamepad", device: a31, timestamp: i30, action: t27, buttons: o30, axes: s35, cancelable: r29, stopPropagation: () => e30.stopPropagation(), defer: (t28) => e30.defer(t28), preventDefault: () => e30.preventDefault() };
}

// node_modules/@arcgis/core/views/interactive/ToolViewManagerManipulatorState.js
var u10 = class extends b {
  constructor() {
    super(...arguments), this._pointerLocations = /* @__PURE__ */ new Map(), this._hoveredManipulators = new s6(), this._grabbedManipulators = new s6(), this._draggedManipulators = /* @__PURE__ */ new Map(), this._stopDrag = false, this._externallyDragging = false, this._revertToNullActiveTool = false;
  }
  get cursor() {
    return this._cursorFromMap(this._grabbedManipulators, "grabbing") ?? this._cursorFromMap(this._hoveredManipulators, "pointer");
  }
  get hasFocusedManipulators() {
    return this._grabbedManipulators.size > 0 || this._draggedManipulators.size > 0;
  }
  handleInputEvent(t27, e30) {
    const o30 = () => t27.stopPropagation();
    switch (t27.type) {
      case "pointer-move":
        d7(t27.pointerType) && this._pointerLocations.set(t27.pointerId, { x: t27.x, y: t27.y, pointerType: t27.pointerType });
        break;
      case "drag":
        this._grabbedManipulators.size > 0 ? this._stopDrag = true : "start" === t27.action ? this._externallyDragging = true : "end" === t27.action && (this._externallyDragging = false), this._stopDrag && (o30(), "end" === t27.action && (this._stopDrag = false));
        break;
      case "pointer-down": {
        if (!g6(t27)) break;
        const r29 = n14(t27), a31 = c11(r29, t27.pointerType, e30.tools);
        if (null == a31) break;
        const i30 = a31.manipulator, n34 = a31.tool;
        null == i30 || null == n34 || !i30.interactive || i30.grabbable && i30.grabbableForEvent(t27) || !i30.grabbing || i30.dragging || this._releaseManipulatorBeforeDragging(i30, t27, e30), null != i30 && null != n34 && i30.interactive && i30.grabbable && i30.grabbableForEvent(t27) && !i30.grabbing && (this._grabbedManipulators.set(t27.pointerId, { manipulator: i30, tool: n34, start: r29, pointerType: t27.pointerType }), 1 === this._grabbedManipulators.size && null == e30.activeTool && (this._revertToNullActiveTool = true, e30.setActiveTool(a31.tool)), i30.grabbing = true, i30.events.emit("grab-changed", { action: "start", pointerType: t27.pointerType, screenPoint: r29 }), o30());
        break;
      }
      case "pointer-up":
        this._draggedManipulators.has(t27.pointerId) || this._handlePointerEnd(t27, e30);
        break;
      case "pointer-drag": {
        if (!g6(t27)) break;
        const a31 = this._grabbedManipulators.get(t27.pointerId), i30 = a31?.manipulator, n34 = a31?.tool;
        if (null == i30 || null == n34) break;
        const s35 = n14(t27);
        s35.x = r6(s35.x, 0, e30.view.width), s35.y = r6(s35.y, 0, e30.view.height);
        const l24 = a31.start, u19 = this._draggedManipulators.get(t27.pointerId);
        switch (t27.action) {
          case "start":
          case "update":
            "update" !== t27.action && 1 !== this._grabbedManipulators.size || (i30.dragging = true, u19 ? i30.events.emit("drag", { action: "update", start: l24, screenPoint: s35 }) : i30.events.emit("drag", { action: "start", start: l24, screenPoint: s35, pointerType: t27.pointerType }), this._draggedManipulators.set(t27.pointerId, { tool: n34, manipulator: i30, start: l24 }));
            break;
          case "end":
            i30.dragging = false, u19 && i30.events.emit("drag", { action: "end", start: l24, screenPoint: s35 }), this._draggedManipulators.delete(t27.pointerId), this._handlePointerEnd(t27, e30);
        }
        o30();
        break;
      }
      case "immediate-click": {
        const r29 = n14(t27), a31 = c11(r29, t27.pointerType, e30.tools);
        if (!h7(t27)) {
          for (const t28 of e30.tools) if ((null == a31 || a31.tool !== t28 || t28.automaticManipulatorSelection) && t28.manipulators) {
            let e31 = false;
            t28.manipulators.forEach(({ manipulator: t29 }) => {
              t29.selected && (t29.selected = false, e31 = true);
            }), e31 && t28.onManipulatorSelectionChanged && t28.onManipulatorSelectionChanged();
          }
        }
        if (null == a31) break;
        const { manipulator: i30, tool: n34 } = a31;
        if (!i30.interactive) break;
        i30.selectable && n34.automaticManipulatorSelection && (i30.selected = !i30.selected, n34.onManipulatorSelectionChanged && n34.onManipulatorSelectionChanged());
        const s35 = t27.native.shiftKey;
        i30.events.emit("immediate-click", { screenPoint: r29, button: t27.button, pointerType: t27.pointerType, shiftKey: s35, stopPropagation: o30 }), b8(i30, o30);
        break;
      }
      case "click": {
        const r29 = n14(t27), a31 = c11(r29, t27.pointerType, e30.tools), i30 = a31?.manipulator;
        if (null == i30 || !i30.interactive) break;
        const n34 = t27.native.shiftKey;
        i30.events.emit(t27.type, { screenPoint: r29, button: t27.button, pointerType: t27.pointerType, shiftKey: n34 }), o30();
        break;
      }
      case "double-click": {
        const r29 = n14(t27), a31 = c11(r29, t27.pointerType, e30.tools), i30 = null != a31 ? a31.manipulator : null;
        if (null == i30 || !i30.interactive) break;
        const n34 = t27.native.shiftKey;
        i30.events.emit("double-click", { screenPoint: r29, button: t27.button, pointerType: t27.pointerType, shiftKey: n34, stopPropagation: o30 }), b8(i30, o30);
        break;
      }
      case "immediate-double-click": {
        const r29 = n14(t27), a31 = c11(r29, t27.pointerType, e30.tools), i30 = null != a31 ? a31.manipulator : null;
        if (null == i30 || !i30.interactive) break;
        const n34 = t27.native.shiftKey;
        i30.events.emit("immediate-double-click", { screenPoint: r29, button: t27.button, pointerType: t27.pointerType, shiftKey: n34, stopPropagation: o30 }), "mouse" === t27.pointerType && b8(i30, o30);
        break;
      }
    }
    this._onFocusChange(e30.tools);
  }
  _releaseManipulatorBeforeDragging(t27, e30, o30) {
    t27.grabbing = false, t27.events.emit("grab-changed", { action: "end", pointerType: e30.pointerType, screenPoint: n14(e30) }), this._grabbedManipulators.forEach(({ manipulator: e31 }, o31) => {
      e31 === t27 && this._grabbedManipulators.delete(o31);
    }), this._afterManipulatorRelease(o30.setActiveTool);
  }
  _handlePointerEnd(t27, e30) {
    const o30 = this._grabbedManipulators.get(t27.pointerId)?.manipulator;
    null != o30 && o30.grabbing && (o30.grabbing = false, o30.events.emit("grab-changed", { action: "end", pointerType: t27.pointerType, screenPoint: n14(t27) }), this._grabbedManipulators.delete(t27.pointerId), this._afterManipulatorRelease(e30.setActiveTool));
  }
  _onFocusChange(t27) {
    this._updateFocusedManipulatorTools(t27);
  }
  _updateFocusedManipulatorTools(t27) {
    const e30 = /* @__PURE__ */ new Set(), r29 = /* @__PURE__ */ new Set();
    this._grabbedManipulators.forEach(({ tool: t28 }) => e30.add(t28)), this._hoveredManipulators.forEach(({ tool: t28 }) => r29.add(t28));
    for (const a31 of t27) {
      a31.hasGrabbedManipulators = e30.has(a31), a31.hasHoveredManipulators = r29.has(a31);
      const t28 = this._grabbedManipulators.values(), i30 = t2(t28, ({ tool: t29 }) => t29 === a31);
      a31.firstGrabbedManipulator = null != i30 ? i30.manipulator : null;
    }
  }
  clearPointers(t27, { tools: e30, setActiveTool: o30 }, r29 = true, a31) {
    const i30 = (e31, o31) => e31 === t27 && (null == a31 || a31 === o31);
    this._grabbedManipulators.forEach(({ tool: t28, manipulator: e31, pointerType: o31 }, r30) => {
      i30(t28, e31) && (this._grabbedManipulators.delete(r30), e31.grabbing = false, e31.events.emit("grab-changed", { action: "end", screenPoint: null, pointerType: o31 }));
    }), this._draggedManipulators.forEach(({ tool: t28, manipulator: e31 }, o31) => {
      i30(t28, e31) && (this._draggedManipulators.delete(o31), e31.dragging = false, e31.events.emit("drag", { action: "cancel" }));
    }), r29 && this._hoveredManipulators.forEach(({ tool: t28, manipulator: e31 }, o31) => {
      i30(t28, e31) && (this._hoveredManipulators.delete(o31), e31.hovering = false);
    }), this._afterManipulatorRelease(o30), this._onFocusChange(e30);
  }
  updateHoveredStateFromKnownPointers(t27) {
    this._pointerLocations.forEach((e30, o30) => {
      this._updateHoveredStateForPointerAtScreenPosition(i4(e30.x, e30.y), o30, e30.pointerType, t27);
    });
  }
  handleHoverEvent(t27, e30) {
    const o30 = t27.type;
    "pointer-up" !== o30 && "immediate-click" !== o30 && "pointer-move" !== o30 || !d7(t27.pointerType) || ("pointer-up" !== o30 && this._externallyDragging ? this._clearHoveredManipulatorStates(t27.pointerId) : this._updateHoveredStateForPointerAtScreenPosition(n14(t27), t27.pointerId, t27.pointerType, e30));
  }
  _updateHoveredStateForPointerAtScreenPosition(t27, e30, o30, r29) {
    let a31 = c11(t27, o30, r29);
    const i30 = this._hoveredManipulators.get(e30)?.manipulator;
    null == a31 || a31.manipulator.interactive || (a31 = null), null != a31 && i30 === a31.manipulator || (null != i30 && (i30.hovering = false), null != a31 ? (a31.manipulator.hovering = true, this._hoveredManipulators.set(e30, a31)) : this._hoveredManipulators.delete(e30), this._onFocusChange(r29));
  }
  _afterManipulatorRelease(t27) {
    0 === this._grabbedManipulators.size && this._revertToNullActiveTool && (t27(null), this._revertToNullActiveTool = false);
  }
  _clearHoveredManipulatorStates(t27) {
    this._hoveredManipulators.forEach(({ manipulator: e30 }, o30) => {
      t27 === o30 && (this._hoveredManipulators.delete(t27), e30.hovering = false);
    });
  }
  _cursorFromMap(t27, e30) {
    if (!t27?.size) return null;
    for (const { manipulator: o30 } of t27.values()) if (o30?.interactive) {
      if (o30.grabbing && o30.grabCursor) return o30.grabCursor;
      if (o30.cursor) return o30.cursor;
    }
    return e30;
  }
};
function c11(t27, e30, o30) {
  for (const r29 of o30) {
    if (null == r29.manipulators || !i10(r29)) continue;
    const o31 = r29.manipulators.intersect(t27, e30);
    if (null != o31) return { tool: r29, manipulator: o31 };
  }
  return null;
}
function d7(t27) {
  return "mouse" === t27;
}
function g6(t27) {
  return "mouse" !== t27.pointerType || 0 === t27.button;
}
function h7(t27) {
  return !!t27.native.shiftKey;
}
function b8(t27, e30) {
  t27?.consumesClicks && e30();
}
__decorate([m2()], u10.prototype, "cursor", null), u10 = __decorate([a2("esri.views.interactive.ToolViewManagerManipulatorState")], u10);

// node_modules/@arcgis/core/views/ToolViewManager.js
var g7 = "attached";
var _7 = "tools";
var T3 = 1e3;
var f8 = class extends b {
  constructor(t27) {
    super(t27), this._updatingHandles = new h3(), this._clock = o3, this._manipulatorState = new u10(), this.tools = new O(), this._interacting = false, this._interactingTimeout = T3, this._interactingTimeoutHandle = null;
  }
  initialize() {
    this.addHandles([this.view.on(i14, (t27) => {
      this._handleInputEvent(t27);
    }, f5.TOOL), ...o11(this.tools), this.tools.on("before-add", ({ item: t27 }) => {
      this._updateToolEditableFlag(t27);
    }), this.tools.on("before-remove", ({ item: t27 }) => {
      this._manipulatorState.clearPointers(t27, this._manipulatorStateEventArgs);
    }), this.tools.on("change", () => {
      this._refreshToolWatchers();
    })]);
  }
  destroy() {
    this.activeTool = null, this.tools.drain((t27) => t27.destroy()), this._clearInteractingTimeout(), this._interacting = false, this._updatingHandles.destroy(), this._manipulatorState.destroy();
  }
  get _manipulatorStateEventArgs() {
    return { tools: this.tools, activeTool: this.activeTool, setActiveTool: (t27) => {
      this.activeTool = t27;
    }, view: this.view };
  }
  set activeTool(t27) {
    if (null != t27 && !this.view.ready) return void i.getLogger(this).error("Cannot set active tool while view is not ready.");
    if (t27 === this.activeTool) return;
    const o30 = this.activeTool;
    this._set("activeTool", t27), null != o30 && o30.deactivate(), null != t27 && t27.activate(), this._removeIncompleteTools(t27);
    for (const e30 of this.tools) {
      this._updateToolEditableFlag(e30);
      const t28 = i10(e30);
      null != this.activeTool && t28 || this._manipulatorState.clearPointers(e30, this._manipulatorStateEventArgs, !t28);
    }
  }
  get cursor() {
    const t27 = this._manipulatorState.cursor;
    if (null != t27) return t27;
    for (const o30 of this.tools) if (o30.visible && null != o30.cursor) return o30.cursor;
    return null;
  }
  get updating() {
    return this._updatingHandles.updating || this.tools.some((t27) => t27.updating);
  }
  get interacting() {
    return this._interacting;
  }
  _clearInteractingTimeout() {
    this._interactingTimeoutHandle = l(this._interactingTimeoutHandle);
  }
  _startInteractingTimeout() {
    this._clearInteractingTimeout(), this._interactingTimeoutHandle = this._clock.setTimeout(() => this._interacting = false, this._interactingTimeout);
  }
  attach() {
    "3d" === this.view.type ? this.addHandles([l5(() => {
      const { state: t27 } = this.view;
      return "camera" in t27 && t27.camera;
    }, () => this._forEachManipulator((t27) => t27.onViewChange())), this.view.elevationProvider.on("elevation-change", (t27) => this._forEachManipulator((o30) => o30.onElevationChange(t27)))], g7) : this.addHandles(l5(() => this.view.extent, () => this._forEachManipulator((t27) => t27.onViewChange())));
  }
  detach() {
    this.activeTool = null, this.tools.removeAll(), this.removeHandles(g7), this._clearInteractingTimeout(), this._interacting = false;
  }
  _forEachManipulator(t27) {
    for (const o30 of this.tools) o30.manipulators && o30.manipulators.forEach(({ manipulator: e30 }) => t27(e30, o30));
  }
  _handleInputEvent(t27) {
    let o30 = false;
    const e30 = { ...t27, stopPropagation: () => {
      o30 = true, t27.stopPropagation();
    } };
    if (null != this.activeTool) this.activeTool.handleInputEvent && this.activeTool.handleInputEvent(e30);
    else for (const i30 of this.tools) !o30 && i30.visible && i30.handleInputEvent(e30);
    !o30 && n13(t27) && this.activeTool && (t27.stopPropagation(), t27.preventDefault(), this.activeTool.cancel(), this.activeTool = null), this._manipulatorState.handleInputEvent(e30, this._manipulatorStateEventArgs), o30 || null == this.activeTool || this.activeTool.handleInputEventAfter(e30), this._manipulatorState.handleHoverEvent(e30, this.tools), "pointer-move" === t27.type && (this._manipulatorState.hasFocusedManipulators || this.activeTool) && (this._interacting = true, this._startInteractingTimeout());
  }
  _refreshToolWatchers() {
    this.removeHandles(_7);
    for (const t27 of this.tools) {
      if (t27 instanceof b) {
        const o30 = l5(() => [t27.cursor, t27.visible, t27.editable], () => {
          i10(t27) || this._manipulatorState.clearPointers(t27, this._manipulatorStateEventArgs);
        });
        this.addHandles(o30, _7);
      }
      t27.manipulators && this.addHandles([t27.manipulators.on("after-remove", (o30) => {
        this._manipulatorState.clearPointers(t27, this._manipulatorStateEventArgs, true, o30.item.manipulator);
      }), t27.manipulators.on("change", () => {
        this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools);
      })], _7);
    }
    this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools);
  }
  _updateToolEditableFlag(t27) {
    t27.setEditableFlag?.(1, null == this.activeTool || t27 === this.activeTool);
  }
  _removeIncompleteTools(t27) {
    this.tools.filter((o30) => (null == t27 || o30 !== t27) && !o30.created && o30.removeIncompleteOnCancel).forEach((t28) => {
      this.tools.remove(t28);
    });
  }
  get test() {
  }
};
__decorate([m2({ constructOnly: true, nonNullable: true })], f8.prototype, "view", void 0), __decorate([m2({ value: null })], f8.prototype, "activeTool", null), __decorate([m2({ readOnly: true, type: O })], f8.prototype, "tools", void 0), __decorate([m2()], f8.prototype, "cursor", null), __decorate([m2({ readOnly: true })], f8.prototype, "updating", null), __decorate([m2()], f8.prototype, "_interacting", void 0), __decorate([m2({ readOnly: true })], f8.prototype, "interacting", null), f8 = __decorate([a2("esri.views.ToolViewManager")], f8);

// node_modules/@arcgis/core/views/3d/support/DefaultHighlights.js
function n17() {
  return new (O.ofType(u7))([new u7({ name: c5 }), new u7({ name: m10, color: p3 })]);
}

// node_modules/@arcgis/core/views/input/gamepad/GamepadInputDevice.js
var n18 = class extends b {
  constructor(e30) {
    super(), this.nativeIndex = null, this._detectedDeviceType = "unknown", "standard" === e30.mapping ? this._detectedDeviceType = "standard" : i15.test(e30.id) ? this._detectedDeviceType = "spacemouse" : this._detectedDeviceType = "unknown", this.nativeIndex = e30.index;
  }
  get native() {
    const e30 = navigator.getGamepads ? navigator.getGamepads() : [];
    return null != this.nativeIndex && this.nativeIndex < e30.length ? e30[this.nativeIndex] : null;
  }
  get deviceType() {
    return this._detectedDeviceType;
  }
  get axisThreshold() {
    return a9[this.deviceType];
  }
};
__decorate([m2({ nonNullable: true, readOnly: true })], n18.prototype, "nativeIndex", void 0), __decorate([m2({ type: String, readOnly: true })], n18.prototype, "deviceType", null), __decorate([m2({ type: Number, readOnly: true })], n18.prototype, "axisThreshold", null), n18 = __decorate([a2("esri.views.input.gamepad.GamepadInputDevice")], n18);
var s15 = n18;
var i15 = new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))", "i");
var a9 = { standard: 0.15, spacemouse: 0.025, unknown: 0 };

// node_modules/@arcgis/core/views/input/gamepad/GamepadSettings.js
var c12 = class extends b {
  constructor(o30) {
    super(o30), this.devices = new O(), this.enabledFocusMode = "document";
  }
};
__decorate([m2({ type: O.ofType(s15), readOnly: true })], c12.prototype, "devices", void 0), __decorate([m2({ type: ["document", "view", "none"] })], c12.prototype, "enabledFocusMode", void 0), c12 = __decorate([a2("esri.views.input.gamepad.GamepadSettings")], c12);
var i16 = c12;

// node_modules/@arcgis/core/views/input/Input.js
var p10 = class extends b {
  constructor() {
    super(...arguments), this.gamepad = new i16();
  }
};
__decorate([m2({ readOnly: true })], p10.prototype, "gamepad", void 0), p10 = __decorate([a2("esri.views.input.Input")], p10);
var a10 = p10;

// node_modules/@arcgis/core/views/navigation/NavigationActionMap.js
var s16 = () => m2({ type: ["pan", "rotate", "zoom", "none"], nonNullable: true });
var a11 = class extends b {
  constructor(o30) {
    super(o30), this.dragPrimary = "pan", this.dragSecondary = "rotate", this.dragTertiary = "zoom", this.mouseWheel = "zoom";
  }
};
__decorate([s16()], a11.prototype, "dragPrimary", void 0), __decorate([s16()], a11.prototype, "dragSecondary", void 0), __decorate([s16()], a11.prototype, "dragTertiary", void 0), __decorate([m2({ type: ["zoom", "none"], nonNullable: true })], a11.prototype, "mouseWheel", void 0), a11 = __decorate([a2("esri.views.navigation.NavigationActionMap")], a11);
var p11 = a11;

// node_modules/@arcgis/core/views/navigation/gamepad/GamepadSettings.js
var i17 = class extends b {
  constructor(o30) {
    super(o30), this.enabled = true, this.device = null, this.mode = "pan", this.tiltDirection = "forward-down", this.velocityFactor = 1;
  }
};
__decorate([m2({ type: Boolean, nonNullable: true })], i17.prototype, "enabled", void 0), __decorate([m2({ type: s15 })], i17.prototype, "device", void 0), __decorate([m2({ type: ["pan", "zoom"], nonNullable: true })], i17.prototype, "mode", void 0), __decorate([m2({ type: ["forward-down", "forward-up"], nonNullable: true })], i17.prototype, "tiltDirection", void 0), __decorate([m2({ type: Number, nonNullable: true })], i17.prototype, "velocityFactor", void 0), i17 = __decorate([a2("esri.views.navigation.gamepad.GamepadSettings")], i17);
var s17 = i17;

// node_modules/@arcgis/core/views/navigation/Navigation.js
var m15 = class extends b {
  constructor(o30) {
    super(o30), this.actionMap = new p11(), this.browserTouchPanEnabled = true, this.gamepad = new s17(), this.momentumEnabled = true;
  }
  get mouseWheelZoomEnabled() {
    return "zoom" === this.actionMap.mouseWheel;
  }
  set mouseWheelZoomEnabled(o30) {
    c(i.getLogger(this), "mouseWheelZoomEnabled", { replacement: "actionMap.mouseWheel", version: "4.32", warnOnce: true }), this.actionMap.mouseWheel = o30 ? "zoom" : "none";
  }
};
__decorate([m2({ type: p11, nonNullable: true })], m15.prototype, "actionMap", void 0), __decorate([m2({ type: Boolean })], m15.prototype, "browserTouchPanEnabled", void 0), __decorate([m2({ type: s17, nonNullable: true })], m15.prototype, "gamepad", void 0), __decorate([m2({ type: Boolean })], m15.prototype, "momentumEnabled", void 0), __decorate([m2({ type: Boolean })], m15.prototype, "mouseWheelZoomEnabled", null), m15 = __decorate([a2("esri.views.navigation.Navigation")], m15);
var i18 = m15;

// node_modules/@arcgis/core/views/support/DefaultsFromMap.js
var c13 = class extends b {
  constructor(e30) {
    super(e30), this.required = { extent: false, heightModelInfo: false, tileInfo: false }, this.defaultSpatialReference = null, this.userSpatialReference = null, this.sourcePreloadCount = 10, this.priorityCollection = null, this.requiresExtentInSpatialReference = true, this.suspended = false, this._projectExtentTask = { task: null, input: null, output: null, spatialReference: null };
  }
  destroy() {
    this._projectExtentTask.task && (this._projectExtentTask.task = e4(this._projectExtentTask.task)), this._set("map", null);
  }
  get ready() {
    return !this._spatialReferenceTask.updating && !this._tileInfoTask.updating && !this._extentTask.updating;
  }
  get heightModelInfoReady() {
    return !this._heightModelInfoTask.updating;
  }
  get spatialReference() {
    return this.userSpatialReference ?? this._spatialReferenceTask.spatialReference;
  }
  get extent() {
    return this._extentTask.extent;
  }
  get heightModelInfo() {
    return this._heightModelInfoTask.heightModelInfo;
  }
  get vcsWkid() {
    return this._heightModelInfoTask.vcsWkid;
  }
  get latestVcsWkid() {
    return this._heightModelInfoTask.latestVcsWkid;
  }
  get viewingMode() {
    return null == this.userSpatialReference || this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference) ? this._spatialReferenceTask.viewingMode : null;
  }
  get tileInfo() {
    return this._tileInfoTask.tileInfo;
  }
  get mapCollections() {
    const e30 = this.map?.(), t27 = [];
    return null != this.priorityCollection && t27.push(this.priorityCollection), t27.push({ parent: e30?.basemap, layers: e30?.basemap?.baseLayers }, { parent: e30?.basemap, layers: e30?.basemap?.groundLayers }, { layers: e30?.layers }, { parent: e30?.ground, layers: e30?.ground?.layers }, { parent: e30?.basemap, layers: e30?.basemap?.referenceLayers }), t27;
  }
  get _spatialReferenceTask() {
    if (this.suspended) return this._get("_spatialReferenceTask") ?? { updating: false };
    let e30;
    if (this._collectLayers(this.mapCollections, (t28) => {
      const n34 = this._getSupportedSpatialReferences(t28);
      if (n34.length > 0) {
        const t29 = this._narrowDownSpatialReferenceCandidates(e30, n34);
        null != t29 && (e30 = t29);
      }
      return 1 === e30?.length;
    }) && 1 !== e30?.length) return { updating: true };
    const t27 = this._pickSpatialReferenceCandidate(e30);
    return { spatialReference: t27?.spatialReference ?? null, viewingMode: t27?.viewingMode ?? null, updating: false };
  }
  get _tileInfoTask() {
    if (!this.required.tileInfo) return this._get("_tileInfoTask") ?? { updating: false };
    const e30 = this.map?.(), t27 = this.spatialReference;
    if (!t27) return { updating: this._spatialReferenceTask.updating };
    let n34;
    const a31 = this._collectLayers([{ parent: e30?.basemap, layers: e30?.basemap?.baseLayers }, { parent: e30?.basemap, layers: e30?.basemap?.groundLayers }, { layers: e30?.layers }], (e31) => !(!("tileInfo" in e31) || !e31.tileInfo?.spatialReference.equals(t27)) && (n34 = e31, true), (e31) => "tileInfo" in e31);
    if (n34) {
      return { tileInfo: n34.tileInfo, updating: false };
    }
    return { updating: a31 };
  }
  get _heightModelInfoTask() {
    if (!this.required.heightModelInfo || this.suspended && this._get("_heightModelInfoTask")?.heightModelInfo) return this._get("_heightModelInfoTask") ?? { updating: false };
    let e30 = {};
    const t27 = this._collectLayers(this.mapCollections, (t28) => {
      const n34 = c6(t28);
      return !!n34 && (e30 = { heightModelInfo: n34, vcsWkid: t28.spatialReference?.vcsWkid, latestVcsWkid: t28.spatialReference?.latestVcsWkid }, true);
    }, (e31) => g2(e31));
    return { ...e30, updating: t27 };
  }
  get _extentCandidatesTask() {
    if (this.suspended || !this.required.extent) return this._get("_extentCandidatesTask") ?? { updating: false };
    if (!this.spatialReference) return { updating: this._spatialReferenceTask.updating };
    const e30 = [], t27 = this._collectLayers(this.mapCollections, (t28) => {
      const n34 = "fullExtents" in t28 && t28.fullExtents || (null != t28.fullExtent ? [t28.fullExtent] : []), a31 = this.requiresExtentInSpatialReference ? null : n34[0], s35 = n34.find((e31) => e31.spatialReference.equals(this.spatialReference)) ?? a31;
      if (s35) return e30.push({ extent: s35, layer: t28 }), true;
      if (this._getSupportedSpatialReferences(t28).length > 0) for (const i30 of n34) e30.push({ extent: i30, layer: t28 });
      return false;
    });
    return { candidates: e30, updating: t27 };
  }
  get _extentTask() {
    const { candidates: e30, updating: t27 } = this._extentCandidatesTask;
    if (t27) return { updating: t27 };
    if (null == e30 || 0 === e30.length) return { updating: false };
    if (!this.spatialReference) return { updating: this._spatialReferenceTask.updating };
    const i30 = this._pickExtentCandidate(e30), r29 = this.spatialReference;
    return i30.extent.equals(this._projectExtentTask.input) && r29.equals(this._projectExtentTask.spatialReference) ? { extent: this._projectExtentTask.output, updating: null != this._projectExtentTask.task && !this._projectExtentTask.task.finished } : (null != this._projectExtentTask.task && (this._projectExtentTask.task = e4(this._projectExtentTask.task)), this._projectExtentTask = { input: i30.extent.clone(), output: null, spatialReference: r29.clone(), task: d3(async (e31) => {
      try {
        const t28 = await s10(i30.extent, r29, "portalItem" in i30.layer ? i30.layer.portalItem : void 0, e31);
        this._projectExtentTask = { ...this._projectExtentTask, task: null, output: t28 };
      } catch (t28) {
        if (a3(e31)) return;
        this._projectExtentTask = { ...this._projectExtentTask, task: null };
      }
    }) }, { updating: true });
  }
  _narrowDownSpatialReferenceCandidates(e30, t27) {
    if (null == e30) return t27;
    const n34 = new Array();
    for (const a31 of e30) for (const e31 of t27) {
      if (!a31.spatialReference.equals(e31.spatialReference)) continue;
      const t28 = f9(a31.viewingMode, e31.viewingMode);
      if (false !== t28) {
        n34.push({ spatialReference: a31.spatialReference, viewingMode: t28 });
        break;
      }
    }
    return n34.length > 0 ? n34 : null;
  }
  _pickSpatialReferenceCandidate(e30) {
    const t27 = this.defaultSpatialReference;
    return null == e30 || e30.length < 1 ? t27 ? { spatialReference: t27, viewingMode: null } : null : (null != t27 && e30.length > 1 && e30.some(({ spatialReference: e31 }) => e31.equals(t27)) && (e30 = e30.filter(({ spatialReference: e31 }) => e31.equals(t27))), e30.length > 1 && e30.some(({ viewingMode: e31 }) => 2 !== e31) && (e30 = e30.filter(({ viewingMode: e31 }) => 2 !== e31)), e30[0]);
  }
  _getSupportedSpatialReferences(e30) {
    const t27 = "supportedSpatialReferences" in e30 && e30.supportedSpatialReferences || (e30.spatialReference ? [e30.spatialReference] : []);
    if (0 === t27.length) return [];
    const n34 = [];
    for (const a31 of t27) {
      const t28 = this.getSpatialReferenceSupport(a31, e30);
      if (null != t28) {
        const e31 = t28.constraints ?? [{ spatialReference: a31, viewingMode: null }];
        for (const { spatialReference: t29, viewingMode: a32 } of e31) this.requiresExtentInSpatialReference && null != this.userSpatialReference && !t29.equals(this.userSpatialReference) || n34.push({ spatialReference: t29, viewingMode: a32 });
      }
    }
    return n34;
  }
  _pickExtentCandidate(e30) {
    const t27 = this.spatialReference;
    return e30.find(({ extent: e31 }) => t27.equals(e31.spatialReference)) || e30[0];
  }
  _collectLayers(e30, t27, n34 = () => true) {
    switch (this._loadMaybe(this.map?.())) {
      case "loading":
        return true;
      case "failed":
        return false;
    }
    const a31 = new d8(n34, t27);
    for (const s35 of e30) if (this._collectCollection(s35, a31), a31.done || a31.preloading === this.sourcePreloadCount) break;
    return a31.updating;
  }
  _collectCollection(e30, t27) {
    if (e30.layers) {
      switch (this._loadMaybe(e30.parent)) {
        case "loading":
          return t27.updating = true, void ++t27.preloading;
        case "failed":
          return;
      }
      for (const n34 of e30.layers) if (("graphics" !== n34.type || !n34.internal) && t27.layerFilter(n34)) {
        switch (this._loadMaybe(n34)) {
          case "failed":
            continue;
          case "loading":
            t27.updating = true, ++t27.preloading;
            break;
          case "loaded":
            if (t27.updating || (t27.done = t27.pushLayer(n34)), t27.done || t27.preloading === this.sourcePreloadCount) break;
            "layers" in n34 && this._collectCollection({ layers: n34.layers }, t27);
        }
        if (t27.done || t27.preloading === this.sourcePreloadCount) break;
      }
    }
  }
  _loadMaybe(e30) {
    return e30 && "loadStatus" in e30 && null != e30.loadStatus ? "not-loaded" === e30.loadStatus ? (e30.load().catch((e31) => {
      d2(e31);
    }), "loading") : e30.loadStatus : "loaded";
  }
};
__decorate([m2()], c13.prototype, "required", void 0), __decorate([m2({ constructOnly: true })], c13.prototype, "map", void 0), __decorate([m2({ constructOnly: true })], c13.prototype, "getSpatialReferenceSupport", void 0), __decorate([m2()], c13.prototype, "defaultSpatialReference", void 0), __decorate([m2()], c13.prototype, "userSpatialReference", void 0), __decorate([m2()], c13.prototype, "sourcePreloadCount", void 0), __decorate([m2()], c13.prototype, "priorityCollection", void 0), __decorate([m2()], c13.prototype, "requiresExtentInSpatialReference", void 0), __decorate([m2()], c13.prototype, "suspended", void 0), __decorate([m2({ readOnly: true })], c13.prototype, "ready", null), __decorate([m2({ readOnly: true })], c13.prototype, "heightModelInfoReady", null), __decorate([m2({ readOnly: true })], c13.prototype, "spatialReference", null), __decorate([m2({ readOnly: true })], c13.prototype, "extent", null), __decorate([m2({ readOnly: true })], c13.prototype, "heightModelInfo", null), __decorate([m2({ readOnly: true })], c13.prototype, "vcsWkid", null), __decorate([m2({ readOnly: true })], c13.prototype, "latestVcsWkid", null), __decorate([m2({ readOnly: true })], c13.prototype, "viewingMode", null), __decorate([m2({ readOnly: true })], c13.prototype, "tileInfo", null), __decorate([m2({ readOnly: true })], c13.prototype, "mapCollections", null), __decorate([m2({ readOnly: true })], c13.prototype, "_spatialReferenceTask", null), __decorate([m2({ readOnly: true })], c13.prototype, "_tileInfoTask", null), __decorate([m2({ readOnly: true })], c13.prototype, "_heightModelInfoTask", null), __decorate([m2({ readOnly: true })], c13.prototype, "_extentCandidatesTask", null), __decorate([m2()], c13.prototype, "_extentTask", null), __decorate([m2()], c13.prototype, "_projectExtentTask", void 0), c13 = __decorate([a2("esri.views.support.DefaultsFromMap")], c13);
var d8 = class {
  constructor(e30, t27) {
    this.layerFilter = e30, this.pushLayer = t27, this.preloading = -1, this.updating = false, this.done = false;
  }
};
function f9(e30, t27) {
  return null != e30 ? null != t27 ? e30 === t27 && e30 : e30 : t27;
}

// node_modules/@arcgis/core/views/support/LayerLayerViewInfo.js
function s18(e30) {
  return "tryRecycleWith" in e30;
}
var o15 = class {
  constructor(r29, l24, a31) {
    this.layer = r29, this.view = l24, this.layerViewImporter = a31, this._controller = new AbortController(), this._started = false, this.done = false, this._deferred = $(), this.promise = this._deferred.promise, w(this._controller.signal, () => {
      this._recycleController?.abort();
      const t27 = new s("cancelled:layerview-create", "layerview creation cancelled", { layer: r29 });
      this._deferred?.reject(t27);
    });
  }
  tryRecycle(e30) {
    if (!this.done || !this.layerView || !s18(this.layerView)) return null;
    this._recycleController?.abort(), this._recycleController = new AbortController();
    const r29 = this.layer.type, t27 = this._recycleController.signal;
    for (let i30 = 0; i30 < e30.length; i30++) {
      const a31 = e30[i30];
      if (a31.type !== r29) continue;
      const s35 = this.layerView.tryRecycleWith(a31, { signal: t27 });
      if (s35) {
        e30.splice(i30, 1), this.layer = a31;
        const r30 = this.layerView, o30 = r30.view;
        return this.promise = s35.then(() => (s3(t27), a31.emit("layerview-destroy", { view: o30, layerView: r30 }), o30.emit("layerview-destroy", { view: o30, layerView: r30 }), a31.emit("layerview-create", { view: o30, layerView: r30 }), o30.emit("layerview-create", { view: o30, layerView: r30 }), r30)), this.promise;
      }
    }
    return null;
  }
  destroy() {
    this._controller.abort();
    const { layerView: e30 } = this;
    if (e30) {
      const { layer: r29, view: t27 } = this;
      r29.emit("layerview-destroy", { view: t27, layerView: e30 }), t27.emit("layerview-destroy", { layer: r29, layerView: e30 });
    }
    this.done = true, this.layer = null, this.layerView = null, this.view = null, this.layerViewImporter = null, this._map = null, this.promise = null, this._deferred = null;
  }
  async start() {
    const { view: t27 } = this;
    if (this._started || !t27.map) return;
    this._started = true;
    const { _controller: { signal: a31 }, layer: s35 } = this;
    this._map = t27.map;
    try {
      let n34, w8;
      if (await s35.load({ signal: a31 }), s35.prefetchResources && await s35.prefetchResources({ signal: a31 }), y6(s35)) n34 = await s35.createLayerView(t27, { signal: a31 });
      else {
        if (!this.layerViewImporter.hasLayerViewModule(s35)) throw new s("layer:view-not-supported", "No layerview implementation was found");
        const r29 = await this.layerViewImporter.importLayerView(s35);
        s3(a31), n34 = "default" in r29 ? new r29.default({ layer: s35, view: t27 }) : new r29({ layer: s35, view: t27 });
      }
      const c27 = () => {
        w8 = l(w8), n34.destroyed || n34.destroy(), this.done = true;
      };
      w8 = w(a31, c27), s3(a31);
      try {
        await n34.when();
      } catch (o30) {
        throw c27(), o30;
      }
      const h17 = this._map?.allLayers?.includes(s35);
      if (!h17) return c27(), void this._deferred?.reject(new s("view:no-layerview-for-layer", "The layer has been removed from the map", { layer: s35 }));
      this.layerView = n34, s35.emit("layerview-create", { view: t27, layerView: n34 }), t27.emit("layerview-create", { layer: s35, layerView: n34 }), this.done = true, this._deferred?.resolve(n34);
    } catch (o30) {
      s35.emit("layerview-create-error", { view: t27, error: o30 }), t27.emit("layerview-create-error", { layer: s35, error: o30 }), this.done = true, this._deferred?.reject(new s("layerview:create-error", "layerview creation failed", { layer: s35, error: o30 }));
    }
  }
};
function y6(e30) {
  return e30.createLayerView !== b5.prototype.createLayerView;
}

// node_modules/@arcgis/core/views/support/LayerViewManager.js
function g8(e30) {
  return null != e30 && "object" == typeof e30 && "layerViews" in e30;
}
var _8 = class extends b {
  constructor(e30) {
    super(e30), this._layerLayerViewInfoMap = /* @__PURE__ */ new Map(), this._recyclingInfoMap = /* @__PURE__ */ new Map(), this._watchUpdatingTracking = new h3(), this.supportsGround = true, this._preloadLayerViewModules = () => {
      const e31 = this.view.map?.allLayers;
      if (e31) for (const r29 of e31) false !== this.layerViewFilter?.(r29) && this.layerViewImporter.hasLayerViewModule(r29) && this.layerViewImporter.importLayerView(r29);
    }, this._reschedule = () => this.destroyed ? Promise.reject() : (null == this._workPromise && (this._workPromise = $(), this._workPromise.promise.catch(() => {
    })), this.removeHandles("reschedule"), this.addHandles(A2(this._doWork), "reschedule"), this._workPromise.promise), this._doWork = () => {
      if (this.destroyed) return;
      const { map: e31 } = this.view;
      if (!e31) return void this.clear();
      if (this._map !== e31 && (this.clear(), this._map = e31), null == this._workPromise) return void this.notifyChange("updating");
      this.removeHandles("reschedule"), this.removeHandles("collection-change");
      const r29 = /* @__PURE__ */ new Set(), t27 = [], i30 = this.view.ready, o30 = (e32) => {
        if (null != e32) {
          for (const s36 of e32) if (s36) {
            if (false === this.layerViewFilter?.(s36)) continue;
            r29.add(s36);
            const e33 = this._layerLayerViewInfoMap.get(s36);
            e33 && i30 ? e33.start() : e33 || this._recyclingInfoMap.has(s36) || t27.push(s36), "layers" in s36 && s36.layers && o30(s36.layers);
          }
        }
      };
      for (const n34 of this._rootCollectionNames) o30(o(this, n34));
      const s35 = new Array(), a31 = (e32) => {
        const r30 = e32.tryRecycle(t27);
        r30 ? (this._recyclingInfoMap.set(e32.layer, e32), this.notifyChange("updating"), r30.then(() => {
          this._recyclingInfoMap.delete(e32.layer), this._layerLayerViewInfoMap.set(e32.layer, e32), this._reschedule(), this.notifyChange("updating");
        }).catch((r31) => {
          d2(r31) || (this._recyclingInfoMap.delete(e32.layer), e32.destroy(), this._reschedule(), this.notifyChange("updating"));
        })) : s35.push(e32);
      };
      for (const n34 of this._layerLayerViewInfoMap.values()) r29.has(n34.layer) || (this._layerLayerViewInfoMap.delete(n34.layer), a31(n34));
      for (const n34 of this._recyclingInfoMap.values()) r29.has(n34.layer) || (this._recyclingInfoMap.delete(n34.layer), a31(n34));
      for (const n34 of t27) this._createLayerView(n34);
      this._refreshCollections(), s35.forEach((e32) => e32.destroy());
      const l24 = [e31?.ground?.layers, e31?.basemap?.baseLayers, e31?.basemap?.groundLayers, e31?.basemap?.referenceLayers, e31?.layers].filter((e32) => !!e32);
      r29.forEach((e32) => "layers" in e32 && l24.push(e32.layers)), this.addHandles(l24.map((e32) => this._watchUpdatingTracking.addOnCollectionChange(() => e32, this._reschedule)), "collection-change"), this._workPromise.resolve(), this._workPromise = null;
    }, this._layersToLayerViews = new Map(e30.layerviewMapping);
  }
  initialize() {
    this.addHandles([a4(() => this.view?.map?.allLayers, "change", this._preloadLayerViewModules, { onListenerAdd: this._preloadLayerViewModules }), l5(() => {
      const e30 = this.view, r29 = e30?.map;
      return [r29?.basemap, r29?.ground, r29?.layers, e30?.ready];
    }, () => this._reschedule(), w2)]), this._preloadLayerViewModules(), this._reschedule();
  }
  clearHandles() {
    this._watchUpdatingTracking.removeAll();
  }
  destroy() {
    this.clear(), n12(this._recyclingInfoMap), n12(this._layerLayerViewInfoMap), this._watchUpdatingTracking.destroy(), this._map = null, null != this._workPromise && (this._workPromise.reject(u2()), this._workPromise = null);
  }
  get _rootCollectionNames() {
    return Array.from(this._layersToLayerViews.keys());
  }
  get updating() {
    return null != this._workPromise || this._watchUpdatingTracking.updating || n(this._layerLayerViewInfoMap, (e30) => !e30.done) || this._recyclingInfoMap.size > 0;
  }
  get updatingRemaining() {
    let e30 = 0;
    for (const r29 of this._layerLayerViewInfoMap.values()) r29.done || ++e30;
    return e30;
  }
  clear() {
    this.destroyed || (this._clearCollections(), n12(this._layerLayerViewInfoMap), n12(this._recyclingInfoMap));
  }
  async whenLayerView(e30) {
    await this._reschedule();
    const r29 = this._layerLayerViewInfoMap.get(e30)?.promise;
    if (!r29) {
      const r30 = this._recyclingInfoMap.get(e30)?.promise;
      if (!r30) throw new s("view:no-layerview-for-layer", "No layerview has been found for the layer", { layer: e30 });
      return r30;
    }
    return r29;
  }
  isCreatingLayerViewsForLayer(e30, r29) {
    this.commitProperty("updatingRemaining");
    const t27 = this._layerLayerViewInfoMap.get(e30);
    if (!t27?.done) return true;
    const i30 = t27.layerView;
    return !(!i30 || !r29 || i30.parent === r29) || !!(t27.done && i30 && "layers" in e30 && e30.layers?.length) && e30.layers.some((e31) => this.isCreatingLayerViewsForLayer(e31, i30));
  }
  _refreshCollections() {
    for (const [e30, r29] of this._layersToLayerViews) this._populateLayerViewsOwners(o(this, e30), o(this, r29), this.view);
    this.notifyChange("updating"), this.notifyChange("updatingRemaining");
  }
  _clearCollections() {
    for (const e30 of this._layersToLayerViews.values()) o(this, e30)?.removeAll();
  }
  _populateLayerViewsOwners(e30, r29, t27) {
    if (!e30 || !r29) return void r29?.removeAll();
    let i30 = 0;
    for (const o30 of e30) {
      const e31 = this._layerLayerViewInfoMap.get(o30);
      if (!e31?.layerView) continue;
      const { layerView: s35 } = e31;
      s35.layer = o30, s35.parent = t27, r29.at(i30) !== s35 && r29.splice(i30, 0, s35), "layers" in o30 && g8(s35) && this._populateLayerViewsOwners(o30.layers, s35.layerViews, s35), ++i30;
    }
    i30 < r29.length && r29.splice(i30);
  }
  _createLayerView(e30) {
    e30.load().catch(() => {
    }), this.layerViewImporter.hasLayerViewModule(e30) && this.layerViewImporter.importLayerView(e30);
    const r29 = new o15(e30, this.view, this.layerViewImporter);
    r29.promise?.then(() => this._refreshCollections(), (r30) => {
      r30 && (d2(r30) || "cancelled:layerview-create" === r30.name) || i.getLogger(this).error(`Failed to create layerview for layer title:'${e30.title ?? "no title"}', id:'${e30.id ?? "no id"}' of type '${e30.type}'.`, { layer: e30, error: r30 }), this.destroyed || this._refreshCollections();
    }), this._layerLayerViewInfoMap.set(e30, r29), this.view.ready && r29.start(), this.notifyChange("updating"), this.notifyChange("updatingRemaining");
  }
};
__decorate([m2()], _8.prototype, "_workPromise", void 0), __decorate([m2({ readOnly: true })], _8.prototype, "_watchUpdatingTracking", void 0), __decorate([m2({ readOnly: true })], _8.prototype, "_layersToLayerViews", void 0), __decorate([m2({ constructOnly: true })], _8.prototype, "layerviewMapping", void 0), __decorate([m2({ readOnly: true })], _8.prototype, "_rootCollectionNames", null), __decorate([m2({ constructOnly: true })], _8.prototype, "layerViewFilter", void 0), __decorate([m2()], _8.prototype, "layerViewImporter", void 0), __decorate([m2()], _8.prototype, "supportsGround", void 0), __decorate([m2({ readOnly: true })], _8.prototype, "updating", null), __decorate([m2({ readOnly: true })], _8.prototype, "updatingRemaining", null), __decorate([m2({ constructOnly: true })], _8.prototype, "view", void 0), _8 = __decorate([a2("esri.views.support.LayerViewManager")], _8);
var V2 = _8;

// node_modules/@arcgis/core/views/support/RequiredFieldsOptions.js
var s19 = class extends b {
  constructor(o30) {
    super(o30), this.featureTitleFields = false, this.utilityNetworkFields = false, this.globalIdField = false;
  }
};
__decorate([m2()], s19.prototype, "featureTitleFields", void 0), __decorate([m2()], s19.prototype, "utilityNetworkFields", void 0), __decorate([m2()], s19.prototype, "globalIdField", void 0), s19 = __decorate([a2("esri.views.support.RequiredFieldsOptions")], s19);
var i19 = s19;

// node_modules/@arcgis/core/views/View.js
var $2;
var _a;
var B2 = (_a = class extends n3(n7) {
  constructor(e30) {
    super(e30), this._userSpatialReference = null, this.handles = new r2(), this.updatingHandles = new h3(), this.allLayerViews = new l10({ getCollections: () => this.layerviewCollections, getChildrenFunction: Q }), this.analyses = new s12(), this.basemapView = null, this.dependencies = { popup: void 0 }, this.displayFilterEnabled = true, this.fatalError = null, this.graphics = new i8(), this.typeSpecificPreconditionsReady = true, this.layerViews = new O(), this.magnifier = new p7(), this.padding = { left: 0, top: 0, right: 0, bottom: 0 }, this.ready = false, this._readyStateWaitingTask = null, this.type = null, this.scale = null, this.updating = false, this.initialExtentRequired = true, this._lowPriorityCursorHandles = new O(), this._highPriorityCursorHandles = new O(), this.input = new a10(), this.navigation = new i18(), this.layerViewManager = null, this.analysisViewManager = null, this.isHeightModelInfoRequired = false, this.width = null, this.height = null, this.resizing = false, this.suspended = false, this.viewEvents = new c10(this), this.persistableViewModels = new O(), this.requiredFieldsOptions = new i19(), this._isValid = false, this._readyCycleForced = false, this._lockedSpatialReference = null, this._userTimeZone = null, this._lockedTimeZone = null, this._userTimeExtent = null, this._lockedTimeExtent = null, this.theme = null, this.handles.add(l5(() => this.preconditionsReady, (e31) => {
      const t27 = this.ready;
      if (e31 ? (this._lockedSpatialReference = this.spatialReference, this._lockedTimeZone = this.timeZone, this._lockedTimeExtent = this.timeExtent, $2.views.add(this)) : (this._lockedSpatialReference = null, $2.views.remove(this)), this.notifyChange("spatialReference"), !e31 && t27) this.toolViewManager?.detach(), this.analysisViewManager?.detach(), this.layerViewManager?.clear(), this._teardown();
      else if (e31 && !t27) {
        try {
          this._startup();
        } catch (i30) {
          return void queueMicrotask(() => {
            this.fatalError = new s("view:startup-error", "View._startup failed", i30);
          });
        }
        this.analysisViewManager?.attach(), this.toolViewManager.attach();
      }
    }, U));
  }
  initialize() {
    this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(), this._validateWithErrorDisplay()]).then(() => (this._isValid = true, j(() => this.ready)))), this.basemapView = new d5({ view: this }), this.layerViewManager = new V2({ view: this, layerViewFilter: (e30) => this.layerViewFilter?.(e30) ?? true, layerViewImporter: { importLayerView: (e30) => this.importLayerView(e30), hasLayerViewModule: (e30) => this.hasLayerViewModule(e30) }, layerviewMapping: this._layerToLayerviewMapping }), this.toolViewManager = new f8({ view: this }), this.selectionManager = new C3({ view: this }), this.addHandles([f(() => "map-content-error" === this.readyState && !this.spatialReference, () => {
      i.getLogger(this).warn("#spatialReference", "no spatial reference could be derived from the currently added map layers");
    }), l5(() => this.initialExtentRequired, (e30) => this.defaultsFromMap.required = { ...this.defaultsFromMap.required, extent: e30 }, w2), l5(() => this.ready, (e30) => {
      this.defaultsFromMap && (this.defaultsFromMap.suspended = e30, this.defaultsFromMap.userSpatialReference = e30 ? this.spatialReference : this._userSpatialReference);
    }, U), l5(() => this._userSpatialReference, (e30) => {
      this.defaultsFromMap && (this.defaultsFromMap.userSpatialReference = e30);
    }, w2)]);
  }
  get _layerToLayerviewMapping() {
    return $2._layerToLayerview;
  }
  destroy() {
    this.destroyed || ($2.views.remove(this), this.viewEvents.destroy(), this.allLayerViews.destroy(), this.navigation && (this.navigation.destroy(), this._set("navigation", null)), this.graphics = u(this.graphics), this.analyses = u(this.analyses), this.defaultsFromMap.destroy(), this._set("defaultsFromMap", null), this.analysisViewManager = u(this.analysisViewManager), this.toolViewManager = u(this.toolViewManager), this.layerViewManager = u(this.layerViewManager), this.selectionManager = u(this.selectionManager), this.basemapView = u(this.basemapView), this.layerViews?.forEach((e30) => e30.destroy()), this.layerViews.length = 0, this.invalidate(), this.handles.destroy(), this.map = u(this.map), this.updatingHandles.destroy());
  }
  _startup() {
    this._set("ready", true);
  }
  _teardown() {
    this._set("ready", false);
  }
  whenReady() {
    return Promise.resolve(this);
  }
  toMap() {
    return i.getLogger(this).error("#toMap()", "Not implemented on this instance of View"), null;
  }
  get activeTool() {
    return this.toolViewManager?.activeTool;
  }
  set activeTool(e30) {
    this.toolViewManager && (this.toolViewManager.activeTool = e30);
  }
  get layerviewCollections() {
    return [this.basemapView?.baseLayerViews, this.basemapView?.groundLayerViews, this.layerViews, this.basemapView?.referenceLayerViews];
  }
  get animation() {
    return this._get("animation");
  }
  set animation(e30) {
    this._set("animation", e30);
  }
  get center() {
    return null;
  }
  get defaultsFromMapSettings() {
    return {};
  }
  get defaultsFromMap() {
    return new c13({ required: { tileInfo: false, heightModelInfo: false, extent: false }, map: () => this.map, getSpatialReferenceSupport: (e30, t27) => this.getSpatialReferenceSupport(e30, t27), ...this.defaultsFromMapSettings });
  }
  get extent() {
    return this._get("extent");
  }
  set extent(e30) {
    this._set("extent", e30);
  }
  get heightModelInfo() {
    return this.getDefaultHeightModelInfo();
  }
  get highlights() {
    return this._get("highlights") ?? n17();
  }
  set highlights(e30) {
    this._set("highlights", n4(e30, this._get("highlights"), O.ofType(u7)));
  }
  get interacting() {
    return this.navigating;
  }
  get navigating() {
    return false;
  }
  get preconditionsReady() {
    return !this.destroying && !this.destroyed && !(this.fatalError || !this._isValid || this._readyCycleForced || !this.map || m3(this.map) && !this.map.loaded || 0 === this.width || 0 === this.height || !this.spatialReference || !this._validateSpatialReference(this.spatialReference) || !this._lockedSpatialReference && !this.defaultsFromMap?.ready || !this.typeSpecificPreconditionsReady);
  }
  get resolution() {
    return 0;
  }
  set map(e30) {
    e30 !== this._get("map") && (e30?.destroyed && (i.getLogger(this).warn("#map", "The provided map is already destroyed", { map: e30 }), e30 = null), m3(e30) && e30.load().catch(() => {
    }), this.constructed && !this.destroyed && (this.forceReadyCycle(), this._lockedSpatialReference = null), this._set("map", e30));
  }
  get readyState() {
    if (this.destroyed) return this._get("readyState");
    if (!this.map) return "missing-map";
    if ("container" in this && !this.container) return "missing-container";
    if (this.fatalError) return "rendering-error";
    if ((this.defaultsFromMap?.ready ?? false) && !this.spatialReference) {
      const e30 = !("loaded" in this.map) || this.map.loaded, t27 = this.map.ground.loaded, r29 = this.map.basemap?.loaded ?? true;
      return e30 && r29 && t27 && !this.map?.allLayers.length ? "empty-map" : (this._readyStateWaitingTask || (this._readyStateWaitingTask = d3((e31) => T(has("view-readyState-waiting-delay"), null, e31)), this.addHandles(this._readyStateWaitingTask), this.addHandles(this._readyStateWaitingTask, "ready-state-task")), this._readyStateWaitingTask?.finished ? "map-content-error" : "loading");
    }
    return this._readyStateWaitingTask = e4(this._readyStateWaitingTask), this.removeHandles("ready-state-task"), this.ready ? "ready" : "loading";
  }
  get spatialReference() {
    const e30 = this._userSpatialReference || this._lockedSpatialReference || this.getDefaultSpatialReference() || null;
    if (e30 && this.defaultsFromMap?.required?.heightModelInfo) {
      const t27 = e30.clone();
      return t27.vcsWkid = this.defaultsFromMap.vcsWkid, t27.latestVcsWkid = this.defaultsFromMap.latestVcsWkid, t27;
    }
    return e30;
  }
  set spatialReference(e30) {
    const t27 = !T2(e30, this._get("spatialReference"));
    this._set("_userSpatialReference", e30), t27 && (this._set("spatialReference", e30), this._spatialReferenceChanged(e30));
  }
  _spatialReferenceChanged(e30) {
  }
  get stationary() {
    return !this.animation && !this.navigating && !this.resizing;
  }
  get timeExtent() {
    return this._userTimeExtent ?? this._lockedTimeExtent ?? this.getDefaultTimeExtent() ?? null;
  }
  set timeExtent(e30) {
    this._userTimeExtent = e30;
  }
  get timeZone() {
    return this._userTimeZone ?? this._lockedTimeZone ?? this.getDefaultTimeZone() ?? e5;
  }
  set timeZone(e30) {
    this._userTimeZone = e30, p2(e30) || i.getLogger(this).warn("#timeZone", `the parsed value '${e30}' may not be a valid IANA time zone`);
  }
  get tools() {
    return this.toolViewManager?.tools;
  }
  get initialExtent() {
    return this.defaultsFromMap?.extent;
  }
  get cursor() {
    return this.toolViewManager?.cursor ?? this._highPriorityCursorHandles.at(-1)?.cursor ?? this._lowPriorityCursorHandles.at(-1)?.cursor ?? "default";
  }
  acquireCursor(e30, t27 = "low") {
    const i30 = "high" === t27 ? this._highPriorityCursorHandles : this._lowPriorityCursorHandles, r29 = { cursor: e30 }, a31 = e2(() => i30.remove(r29));
    return i30.add(r29), this.addHandles(a31), a31;
  }
  get size() {
    return [this.width, this.height];
  }
  get effectiveTheme() {
    return this.theme ?? new l13();
  }
  whenLayerView(e30) {
    return this.layerViewManager?.whenLayerView(e30) ?? Promise.reject();
  }
  getDefaultSpatialReference() {
    return this.defaultsFromMap?.spatialReference;
  }
  getDefaultHeightModelInfo() {
    return (this.map && "heightModelInfo" in this.map ? this.map.heightModelInfo : void 0) ?? this.defaultsFromMap?.heightModelInfo ?? null;
  }
  getDefaultTimeZone() {
    return null;
  }
  getDefaultTimeExtent() {
    return null;
  }
  getSurface() {
    return null;
  }
  importLayerView(e30) {
    throw new s("view:importLayerView-missing", "importLayerView() not implemented");
  }
  hasLayerViewModule(e30) {
    return false;
  }
  async validate() {
  }
  async loadAsyncDependencies() {
  }
  invalidate() {
    this._isValid = false;
  }
  getSpatialReferenceSupport() {
    return { constraints: null };
  }
  _validateSpatialReference(e30) {
    return null != this.getSpatialReferenceSupport(e30);
  }
  when(e30, t27) {
    return this.isResolved() && !this.ready && i.getLogger(this).warn("#when()", "Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."), super.when(e30, t27);
  }
  forceReadyCycle() {
    this.ready && (f(() => this.destroyed || false === this.preconditionsReady, () => this._readyCycleForced = false, { once: true }), this._readyCycleForced = true);
  }
  on(e30, t27) {
    return super.on(e30, t27);
  }
  addAndActivateTool(e30) {
    this.toolViewManager.tools.add(e30), this.activeTool = e30;
  }
  tryFatalErrorRecovery() {
    this.fatalError = null;
  }
  async _validateWithErrorDisplay() {
    try {
      await this.validate();
    } catch (e30) {
      const t27 = document.createElement("div");
      t27.setAttribute("style", "display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");
      const i30 = document.createElement("div");
      i30.innerHTML = "Unable to display map. WebGL2 support is required.", i30.setAttribute("style", "font-size: 24px; font-weight: bold;");
      const r29 = document.createElement("div");
      r29.innerHTML = "Ensure that your browser and hardware meet the minimum requirements.", r29.setAttribute("style", "font-size: 18px;");
      const a31 = document.createElement("a");
      a31.innerHTML = "https://esriurl.com/webgl-faq", a31.target = "_blank", a31.setAttribute("style", "font-size: 18px;"), a31.href = "https://esriurl.com/webgl-faq", t27.appendChild(i30), t27.appendChild(r29), t27.appendChild(a31);
      const s35 = this.getSurface();
      throw s35 && s35.appendChild(t27), e30;
    }
  }
}, $2 = _a, _a._layerToLayerview = [["view.map.basemap.baseLayers", "view.basemapView.baseLayerViews"], ["view.map.basemap.groundLayers", "view.basemapView.groundLayerViews"], ["view.map.basemap.referenceLayers", "view.basemapView.referenceLayerViews"], ["view.map.layers", "view.layerViews"]], _a.views = new O(), _a);
__decorate([m2()], B2.prototype, "_userSpatialReference", void 0), __decorate([m2()], B2.prototype, "activeTool", null), __decorate([m2({ readOnly: true })], B2.prototype, "allLayerViews", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "layerviewCollections", null), __decorate([m2(l3(s12, "analyses"))], B2.prototype, "analyses", void 0), __decorate([m2()], B2.prototype, "animation", null), __decorate([m2()], B2.prototype, "basemapView", void 0), __decorate([m2()], B2.prototype, "center", null), __decorate([m2()], B2.prototype, "defaultsFromMapSettings", null), __decorate([m2()], B2.prototype, "defaultsFromMap", null), __decorate([m2()], B2.prototype, "dependencies", void 0), __decorate([m2()], B2.prototype, "displayFilterEnabled", void 0), __decorate([m2({ type: z })], B2.prototype, "extent", null), __decorate([m2()], B2.prototype, "fatalError", void 0), __decorate([m2(l3(i8, "graphics"))], B2.prototype, "graphics", void 0), __decorate([m2({ readOnly: true, type: m7 })], B2.prototype, "heightModelInfo", null), __decorate([m2({ type: O.ofType(u7) })], B2.prototype, "highlights", null), __decorate([m2({ readOnly: true })], B2.prototype, "interacting", null), __decorate([m2({ constructOnly: true })], B2.prototype, "layerViewFilter", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "navigating", null), __decorate([m2({ readOnly: true, dependsOn: ["fatalError", "_isValid", "_readyCycleForced", "map", "map.loaded?", "width", "height", "spatialReference", "_lockedSpatialReference", "defaultsFromMap.ready", "typeSpecificPreconditionsReady"] })], B2.prototype, "preconditionsReady", null), __decorate([m2({ readOnly: true })], B2.prototype, "typeSpecificPreconditionsReady", void 0), __decorate([m2({ type: O, readOnly: true })], B2.prototype, "layerViews", void 0), __decorate([m2()], B2.prototype, "resolution", null), __decorate([m2({ type: p7 })], B2.prototype, "magnifier", void 0), __decorate([m2({ value: null, type: L3 })], B2.prototype, "map", null), __decorate([m2()], B2.prototype, "padding", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "ready", void 0), __decorate([m2()], B2.prototype, "_readyStateWaitingTask", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "readyState", null), __decorate([m2({ type: f2 })], B2.prototype, "spatialReference", null), __decorate([m2()], B2.prototype, "stationary", null), __decorate([m2({ type: m6 })], B2.prototype, "timeExtent", null), __decorate([m2({ type: String, nonNullable: true })], B2.prototype, "timeZone", null), __decorate([m2()], B2.prototype, "tools", null), __decorate([m2()], B2.prototype, "toolViewManager", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "type", void 0), __decorate([m2({ type: Number })], B2.prototype, "scale", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "updating", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "initialExtentRequired", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "initialExtent", null), __decorate([m2()], B2.prototype, "cursor", null), __decorate([m2({ readOnly: true })], B2.prototype, "input", void 0), __decorate([m2({ type: i18, nonNullable: true })], B2.prototype, "navigation", void 0), __decorate([m2()], B2.prototype, "layerViewManager", void 0), __decorate([m2()], B2.prototype, "analysisViewManager", void 0), __decorate([m2()], B2.prototype, "selectionManager", void 0), __decorate([m2()], B2.prototype, "width", void 0), __decorate([m2()], B2.prototype, "height", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "resizing", void 0), __decorate([m2({ value: null, readOnly: true })], B2.prototype, "size", null), __decorate([m2({ readOnly: true })], B2.prototype, "suspended", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "viewEvents", void 0), __decorate([m2({ readOnly: true })], B2.prototype, "persistableViewModels", void 0), __decorate([m2()], B2.prototype, "_isValid", void 0), __decorate([m2()], B2.prototype, "_readyCycleForced", void 0), __decorate([m2()], B2.prototype, "_lockedSpatialReference", void 0), __decorate([m2()], B2.prototype, "_userTimeZone", void 0), __decorate([m2()], B2.prototype, "_lockedTimeZone", void 0), __decorate([m2()], B2.prototype, "_userTimeExtent", void 0), __decorate([m2()], B2.prototype, "_lockedTimeExtent", void 0), __decorate([m2({ type: l13 })], B2.prototype, "theme", void 0), __decorate([m2({ readOnly: true, type: l13 })], B2.prototype, "effectiveTheme", null), B2 = $2 = __decorate([a2("esri.views.View")], B2);
var J = globalThis.$arcgis;
J && !J.views && Object.defineProperty(J, "views", { configurable: false, enumerable: true, writable: false, value: B2.views });
var K = B2;
function Q(e30) {
  return e30.layerViews;
}

// node_modules/@arcgis/core/core/libs/gl-matrix-2/types/vec2.js
function n19(n34) {
  return n34 instanceof Float32Array && n34.length >= 2;
}
function r15(n34) {
  return Array.isArray(n34) && n34.length >= 2;
}
function t12(t27) {
  return n19(t27) || r15(t27);
}

// node_modules/@arcgis/core/views/2d/ViewState.js
var G2;
var O2 = [0, 0];
var W2 = G2 = class extends n9 {
  constructor(t27) {
    super(t27), this._viewpoint2D = { center: n10(), rotation: 0, scale: 0, spatialReference: void 0 }, this.center = [0, 0], this.extent = new z(), this.id = 0, this.inverseTransform = e12(), this.resolution = 0, this.rotation = 0, this.scale = 0, this.transform = e12(), this.transformNoRotation = e12(), this.displayMat3 = e13(), this.displayViewMat3 = e13(), this.viewMat3 = e13(), this.viewMat2d = n11(), this.worldScreenWidth = 0, this.size = [0, 0];
  }
  set pixelRatio(t27) {
    this._set("pixelRatio", t27), this._update();
  }
  set size(t27) {
    this._set("size", t27), this._update();
  }
  set viewpoint(t27) {
    if (t27) {
      const i30 = this._viewpoint2D, e30 = t27.targetGeometry;
      i30.center[0] = e30.x, i30.center[1] = e30.y, i30.rotation = t27.rotation, i30.scale = t27.scale, i30.spatialReference = e30.spatialReference;
    }
    this._update();
  }
  get visibleArea() {
    const [t27, i30] = this.size;
    return [this.toMap([0, 0], 0, 0), this.toMap([0, 0], 0, i30), this.toMap([0, 0], t27, i30), this.toMap([0, 0], t27, 0)];
  }
  copy(t27) {
    const i30 = this.size, e30 = this.viewpoint;
    return e30 && i30 ? (this.viewpoint = Z(e30, t27.viewpoint), this._set("size", r7(i30, t27.size))) : (this.viewpoint = t27.viewpoint.clone(), this._set("size", [t27.size[0], t27.size[1]])), this._set("pixelRatio", t27.pixelRatio), this;
  }
  clone() {
    return new G2({ size: this.size, viewpoint: this.viewpoint.clone(), pixelRatio: this.pixelRatio });
  }
  toMap(t27, i30, e30) {
    return t12(i30) ? S2(t27, i30, this.inverseTransform) : (O2[0] = i30, O2[1] = e30, S2(t27, O2, this.inverseTransform));
  }
  toScreen(t27, i30, e30) {
    return t12(i30) ? S2(t27, i30, this.transform) : (O2[0] = i30, O2[1] = e30, S2(t27, O2, this.transform));
  }
  toScreenNoRotation(t27, i30, e30) {
    return t12(i30) ? S2(t27, i30, this.transformNoRotation) : (O2[0] = i30, O2[1] = e30, S2(t27, O2, this.transformNoRotation));
  }
  wrapMapCoordinate(t27, i30) {
    r7(t27, i30);
    const [e30] = i30, [s35] = this.center, { extent: o30, spatialReference: r29 } = this;
    let { xmin: a31, xmax: n34 } = o30;
    if (r29.isWrappable) {
      const t28 = mt(r29) / 2;
      a31 = Math.max(a31, s35 - t28), n34 = Math.min(n34, s35 + t28);
    }
    return (e30 < a31 || e30 > n34) && (t27[0] = L2(e30, s35, r29)), t27;
  }
  getScreenTransform(t27, i30) {
    const { center: e30 } = this._viewpoint2D, s35 = this._get("pixelRatio") || 1, o30 = this._get("size");
    return ut(t27, e30, o30, i30, 0, s35), t27;
  }
  _update() {
    const { center: t27, spatialReference: e30, scale: s35, rotation: o30 } = this._viewpoint2D, h17 = this._get("pixelRatio") || 1, c27 = this._get("size"), u19 = new m9({ targetGeometry: new _(t27[0], t27[1], e30), scale: s35, rotation: o30 });
    if (this._set("viewpoint", u19), !c27 || !e30 || !s35) return;
    this.resolution = ot(u19), this.rotation = o30, this.scale = s35, this.spatialReference = e30, r7(this.center, t27);
    const y12 = 0 !== c27[0] ? 2 / c27[0] : 0, j7 = 0 !== c27[1] ? -2 / c27[1] : 0;
    r8(this.displayMat3, y12, 0, 0, 0, j7, 0, -1, 1, 1);
    const R = o8(this.viewMat3), _12 = r9(c27[0] / 2, c27[1] / 2), b12 = r9(-c27[0] / 2, -c27[1] / 2), z5 = u3(o30);
    M2(R, R, _12), h2(R, R, z5), M2(R, R, b12), i5(this.displayViewMat3, this.displayMat3, R);
    const S3 = f4(this.viewMat2d, _12);
    return s9(S3, S3, z5), i6(S3, S3, b12), _4(this.extent, u19, c27), lt(this.transform, u19, c27, h17), u5(this.inverseTransform, this.transform), ft(this.transformNoRotation, u19, c27, h17), this.worldScreenWidth = yt(this.spatialReference, this.resolution), this._set("id", this.id + 1), this.notifyChange("visibleArea"), this;
  }
};
__decorate([m2({ readOnly: true })], W2.prototype, "id", void 0), __decorate([m2({ value: 1, json: { write: true } })], W2.prototype, "pixelRatio", null), __decorate([m2({ json: { write: true } })], W2.prototype, "size", null), __decorate([m2()], W2.prototype, "spatialReference", void 0), __decorate([m2({ type: m9, json: { write: true } })], W2.prototype, "viewpoint", null), __decorate([m2({ readOnly: true })], W2.prototype, "visibleArea", null), W2 = G2 = __decorate([a2("esri.views.2d.ViewState")], W2);
var L5 = W2;

// node_modules/@arcgis/core/views/2d/PaddedViewState.js
var l15;
var m16;
var g9 = l15 = class extends b {
  constructor() {
    super(...arguments), this.left = 0, this.top = 0, this.right = 0, this.bottom = 0;
  }
  clone() {
    return new l15({ left: this.left, top: this.top, right: this.right, bottom: this.bottom });
  }
};
__decorate([m2()], g9.prototype, "left", void 0), __decorate([m2()], g9.prototype, "top", void 0), __decorate([m2()], g9.prototype, "right", void 0), __decorate([m2()], g9.prototype, "bottom", void 0), g9 = l15 = __decorate([a2("esri.views.2d.PaddedViewState.Padding")], g9);
var w4 = m16 = class extends L5 {
  constructor(...t27) {
    super(...t27), this.paddedViewState = new L5(), this._updateContent = (() => {
      const t28 = n10();
      return () => {
        const e30 = this._get("size"), i30 = this._get("padding");
        if (!e30 || !i30) return;
        const o30 = this.paddedViewState;
        o7(t28, i30.left + i30.right, i30.top + i30.bottom), e9(t28, e30, t28), r7(o30.size, t28);
        const s35 = o30.viewpoint;
        s35 && (this.viewpoint = s35);
      };
    })(), this.addHandles(l5(() => [this.size, this.padding], () => this._updateContent(), U)), this.padding = new g9(), this.size = [0, 0];
  }
  set padding(t27) {
    this._set("padding", t27 || new g9());
  }
  set viewpoint(t27) {
    if (t27) {
      this.paddedViewState.viewpoint = t27;
      let e30 = t27;
      const i30 = this._get("padding");
      i30 && (e30 = gt(t27.clone(), t27, this._get("size"), i30));
      const { targetGeometry: o30, rotation: s35, scale: r29 } = e30, { x: p27, y: d21, spatialReference: a31 } = o30, n34 = this._viewpoint2D;
      n34.center[0] = p27, n34.center[1] = d21, n34.rotation = s35, n34.scale = r29, n34.spatialReference = a31, this._update();
    }
  }
  clone() {
    return new m16({ padding: this.padding.clone(), size: this.size.slice(), viewpoint: this.paddedViewState.viewpoint.clone(), pixelRatio: this.pixelRatio });
  }
};
__decorate([m2()], w4.prototype, "paddedViewState", void 0), __decorate([m2({ type: g9 })], w4.prototype, "padding", null), __decorate([m2()], w4.prototype, "viewpoint", null), w4 = m16 = __decorate([a2("esri.views.2d.PaddedViewState")], w4);
var f10 = w4;

// node_modules/@arcgis/core/views/2d/FrameTask.js
var d9 = class {
  constructor(a31) {
    this.view = a31, this._stationaryHandle = null, this._frameTaskHandle = null, this._updateParameters = null, this._updateRequested = false, this._scheduler = I(), this._schedulerHandle = f(() => this._scheduler.updating, () => this.requestFrame()), this.stationary = true, this.prepare = () => {
      this._updateParameters && (this._updateParameters.state = this.view.state, this._updateParameters.stationary = this.view.stationary, this._updateParameters.pixelRatio = window.devicePixelRatio, this._updateParameters.renderingOptions = this.view.renderingOptions, this._updateParameters.targetState.copy(this.view.state), null == this.view.animation?.target || C(this.view.animation.target) || (this._updateParameters.targetState.viewpoint = this.view.animation.target));
    }, this.update = (e30) => {
      if (this._updateRequested = false, this.view?.destroyed) return;
      const { allLayerViews: t27, graphicsView: a32, labelManager: s35, state: { id: i30 } } = this.view;
      t27?.forEach(this._updateLayerView, this), null != s35 && (s35.lastUpdateId !== i30 && (s35.viewChange(), s35.lastUpdateId = i30), s35.updateRequested && s35.processUpdate(this._updateParameters)), null != a32 && (a32.lastUpdateId !== i30 && (a32.viewChange(), a32.lastUpdateId = i30), a32.updateRequested && a32.processUpdate(this._updateParameters)), this.view.graphicsTileStore?.setViewState(this._updateParameters.state), this.view.animation ? this._scheduler.state = 0 : this.view.interacting ? this._scheduler.state = 1 : this._scheduler.state = 2;
      this._scheduler.frame(e30) || this._updateRequested || 2 !== this._scheduler.state || this._frameTaskHandle?.pause();
    };
  }
  destroy() {
    this.stop(), this._schedulerHandle.remove(), this._scheduler.destroy();
  }
  get scheduler() {
    return this._scheduler;
  }
  start() {
    if (this._frameTaskHandle) return;
    const e30 = this.view;
    this.stationary = e30.stationary, this._updateParameters = { state: e30.state, targetState: new f10(), pixelRatio: window.devicePixelRatio, stationary: this.stationary, renderingOptions: e30.renderingOptions }, this._stationaryHandle = l5(() => e30.stationary, (e31) => {
      this.stationary = e31, this.requestFrame();
    }), this._frameTaskHandle = F(this), this.requestUpdate();
  }
  stop() {
    this._frameTaskHandle && (this._updateRequested = false, this._stationaryHandle?.remove(), this._frameTaskHandle.remove(), this._updateParameters = this._stationaryHandle = this._frameTaskHandle = null, this.stationary = true);
  }
  requestUpdate() {
    this._updateRequested || (this._updateRequested = true, this.requestFrame());
  }
  requestFrame() {
    this._frameTaskHandle && this._frameTaskHandle.resume();
  }
  _updateLayerView(e30) {
    if (!e30.attached) return void this.requestUpdate();
    const t27 = this.view.state, a31 = e30.lastUpdateId;
    null != a31 && (this.stationary || e30.moving) || (e30.moving = true), a31 !== t27.id && e30.viewChange(), this.stationary && e30.moving && (e30.moving = false, e30.moveEnd()), e30.lastUpdateId = t27.id, e30.updateRequested && e30.processUpdate(this._updateParameters), "layerViews" in e30 && e30.layerViews?.forEach(this._updateLayerView, this);
  }
};

// node_modules/@arcgis/core/geometry/support/near.js
function r16(r29, l24) {
  const { spatialReference: s35 } = l24, a31 = [l24.x, l24.y];
  let c27, m27, x3, f18;
  const p27 = [0, 0], u19 = i20(r29);
  for (let e30 = 0; e30 < u19.length; e30++) {
    const t27 = u19[e30];
    for (let r30 = 0; r30 < t27.length - 1; r30++) {
      o9(p27, a31, t27, r30);
      const i30 = m5(a31, p27);
      (null == c27 || i30 < c27) && (c27 = i30, m27 = [...p27], x3 = e30, f18 = r30);
    }
  }
  if (null == c27 || !m27 || null == x3 || null == f18) throw new s("nearest-coordinate:failed", "Failed to find the nearest coordinate");
  const [y12, d21] = m27;
  return { coordinate: new _({ x: y12, y: d21, spatialReference: s35 }), distance: c27 };
}
function i20(e30) {
  switch (e30.type) {
    case "extent":
      return [[[e30.xmin, e30.ymin], [e30.xmin, e30.ymax], [e30.xmax, e30.ymax], [e30.xmax, e30.ymin], [e30.xmin, e30.ymin]]];
    case "polygon":
      return e30.rings;
    case "polyline":
      return e30.paths;
  }
}

// node_modules/@arcgis/core/views/2d/constraints/GeometryConstraint.js
var l16;
var p12 = l16 = class extends o5(b) {
  constructor(e30) {
    super(e30), this.geometry = null, this.spatialReference = null;
  }
  get normalizedGeometry() {
    if (null == this.geometry || !this.spatialReference) return null;
    if (!this.spatialReference.equals(this.geometry.spatialReference)) try {
      return W(this.geometry, this.spatialReference);
    } catch (e30) {
      return i.getLogger(this).error("#constraints.geometry", "could not project the geometry to the view's spatial reference", { geometry: this.geometry, spatialReference: this.spatialReference, error: e30 }), null;
    }
    return this.geometry;
  }
  constrain(e30, r29) {
    if (null == this.normalizedGeometry) return e30;
    const t27 = e30.targetGeometry;
    if ("extent" === this.normalizedGeometry.type ? t5(this.normalizedGeometry, t27) : f3(this.normalizedGeometry, t27)) return e30;
    const { coordinate: o30 } = r16(this.normalizedGeometry, t27);
    return o30 ? (e30.targetGeometry = o30, e30) : e30;
  }
  clone() {
    return new l16({ geometry: this.geometry?.clone(), spatialReference: this.spatialReference?.clone() });
  }
};
__decorate([m2({ constructOnly: true })], p12.prototype, "geometry", void 0), __decorate([m2({ readOnly: true })], p12.prototype, "normalizedGeometry", null), __decorate([m2({ constructOnly: true })], p12.prototype, "spatialReference", void 0), p12 = l16 = __decorate([a2("esri.views.2d.constraints.GeometryConstraint")], p12);

// node_modules/@arcgis/core/views/2d/constraints/RotationConstraint.js
var a12;
var n20 = a12 = class extends o5(b) {
  constructor() {
    super(...arguments), this.enabled = true, this.rotationEnabled = true;
  }
  constrain(o30, t27) {
    return this.enabled && t27 ? (this.rotationEnabled || (o30.rotation = t27.rotation), o30) : o30;
  }
  clone() {
    return new a12({ enabled: this.enabled, rotationEnabled: this.rotationEnabled });
  }
};
__decorate([m2()], n20.prototype, "enabled", void 0), __decorate([m2()], n20.prototype, "rotationEnabled", void 0), n20 = a12 = __decorate([a2("esri.views.2d.constraints.RotationConstraint")], n20);
var i21 = n20;

// node_modules/@arcgis/core/views/2d/constraints/ZoomConstraint.js
var a13;
var c14 = a13 = class extends o5(b) {
  constructor(e30) {
    super(e30), this._lodByScale = {}, this._scales = [], this.effectiveLODs = null, this.effectiveMinZoom = -1, this.effectiveMaxZoom = -1, this.effectiveMinScale = 0, this.effectiveMaxScale = 0, this.lods = null, this.minZoom = -1, this.maxZoom = -1, this.minScale = 0, this.maxScale = 0, this.snapToZoom = true;
  }
  initialize() {
    let e30, { lods: t27, minScale: o30, maxScale: s35, minZoom: i30, maxZoom: a31 } = this, c27 = -1, r29 = -1, l24 = false, n34 = false;
    if (0 !== o30 && 0 !== s35 && o30 < s35 && ([o30, s35] = [s35, o30]), !t27?.length) return this._set("effectiveMinScale", o30), void this._set("effectiveMaxScale", s35);
    t27 = t27.map((e31) => e31.clone()), t27.sort((e31, t28) => t28.scale - e31.scale), t27.forEach((e31, t28) => e31.level = t28);
    for (const f18 of t27) !l24 && o30 > 0 && o30 >= f18.scale && (c27 = f18.level, l24 = true), !n34 && s35 > 0 && s35 >= f18.scale && (r29 = e30 ? e30.level : -1, n34 = true), e30 = f18;
    -1 === i30 && (i30 = 0 === o30 ? 0 : c27), -1 === a31 && (a31 = 0 === s35 ? t27.length - 1 : r29), i30 = Math.max(i30, 0), i30 = Math.min(i30, t27.length - 1), a31 = Math.max(a31, 0), a31 = Math.min(a31, t27.length - 1), i30 > a31 && ([i30, a31] = [a31, i30]), o30 = t27[i30].scale, s35 = t27[a31].scale, t27.splice(0, i30), t27.splice(a31 - i30 + 1), t27.forEach((e31, t28) => {
      this._lodByScale[e31.scale] = e31, this._scales[t28] = e31.scale;
    }), this._set("effectiveLODs", t27), this._set("effectiveMinZoom", i30), this._set("effectiveMaxZoom", a31), this._set("effectiveMinScale", o30), this._set("effectiveMaxScale", s35);
  }
  constrain(e30, t27) {
    if (t27 && e30.scale === t27.scale) return e30;
    const o30 = this.effectiveMinScale, s35 = this.effectiveMaxScale, i30 = e30.targetGeometry, a31 = t27 && t27.targetGeometry, c27 = 0 !== s35 && e30.scale < s35, r29 = 0 !== o30 && e30.scale > o30;
    if (c27 || r29) {
      const c28 = r29 ? o30 : s35;
      if (t27 && a31) {
        const o31 = (c28 - t27.scale) / (e30.scale - t27.scale);
        i30.x = a31.x + (i30.x - a31.x) * o31, i30.y = a31.y + (i30.y - a31.y) * o31;
      }
      e30.scale = c28;
    }
    return this.snapToZoom && this.effectiveLODs && (e30.scale = this._getClosestScale(e30.scale)), e30;
  }
  fit(e30) {
    if (!this.effectiveLODs || !this.snapToZoom) return this.constrain(e30, null);
    const t27 = this.scaleToZoom(e30.scale), o30 = Math.abs(t27 - Math.floor(t27));
    return e30.scale = this.zoomToScale(o30 > 0.99 ? Math.round(t27) : Math.floor(t27)), e30;
  }
  zoomToScale(e30) {
    if (!this.effectiveLODs) return 0;
    e30 -= this.effectiveMinZoom, e30 = Math.max(0, e30);
    const t27 = this._scales;
    if (e30 <= 0) return t27[0];
    if (e30 >= t27.length) return t27[t27.length - 1];
    const o30 = Math.floor(e30), s35 = Math.ceil(e30);
    return t27[o30] + (e30 - o30) * (t27[s35] - t27[o30]);
  }
  scaleToZoom(e30) {
    if (!this.effectiveLODs) return -1;
    const t27 = this._scales;
    let o30, s35;
    if (e30 >= t27[0]) return this.effectiveMinZoom;
    if (e30 <= t27[t27.length - 1]) return this.effectiveMaxZoom;
    for (let i30 = 0; i30 < t27.length - 1; i30++) {
      if (o30 = t27[i30], s35 = t27[i30 + 1], s35 === e30) {
        return i30 + this.effectiveMinZoom + 1;
      }
      if (o30 > e30 && s35 < e30) {
        return i30 + this.effectiveMinZoom + 1 - (e30 - s35) / (o30 - s35);
      }
    }
    return -1;
  }
  snapToClosestScale(e30) {
    if (!this.effectiveLODs) return e30;
    const t27 = this.scaleToZoom(e30);
    return this.zoomToScale(Math.round(t27));
  }
  snapToNextScale(e30, t27 = 0.5) {
    if (!this.effectiveLODs) return e30 * t27;
    const o30 = Math.round(this.scaleToZoom(e30));
    return this.zoomToScale(o30 + 1);
  }
  snapToPreviousScale(e30, t27 = 2) {
    if (!this.effectiveLODs) return e30 * t27;
    const o30 = Math.round(this.scaleToZoom(e30));
    return this.zoomToScale(o30 - 1);
  }
  clone() {
    return new a13({ lods: this.lods, minZoom: this.minZoom, maxZoom: this.maxZoom, minScale: this.minScale, maxScale: this.maxScale });
  }
  _getClosestScale(e30) {
    return this._lodByScale[e30] || (e30 = this._scales.reduce((t27, o30) => Math.abs(o30 - e30) <= Math.abs(t27 - e30) ? o30 : t27, this._scales[0])), this._lodByScale[e30].scale;
  }
};
__decorate([m2({ readOnly: true })], c14.prototype, "effectiveLODs", void 0), __decorate([m2({ readOnly: true })], c14.prototype, "effectiveMinZoom", void 0), __decorate([m2({ readOnly: true })], c14.prototype, "effectiveMaxZoom", void 0), __decorate([m2({ readOnly: true })], c14.prototype, "effectiveMinScale", void 0), __decorate([m2({ readOnly: true })], c14.prototype, "effectiveMaxScale", void 0), __decorate([m2()], c14.prototype, "lods", void 0), __decorate([m2()], c14.prototype, "minZoom", void 0), __decorate([m2()], c14.prototype, "maxZoom", void 0), __decorate([m2()], c14.prototype, "minScale", void 0), __decorate([m2()], c14.prototype, "maxScale", void 0), __decorate([m2()], c14.prototype, "snapToZoom", void 0), c14 = a13 = __decorate([a2("esri.views.2d.constraints.ZoomConstraint")], c14);
var r17 = c14;

// node_modules/@arcgis/core/views/2d/MapViewConstraints.js
var p13 = { base: null, key: "type", typeMap: { extent: z, polygon: P } };
var y7 = class extends b {
  constructor(o30) {
    super(o30), this.lods = null, this.minScale = 0, this.maxScale = 0, this.minZoom = -1, this.maxZoom = -1, this.rotationEnabled = true, this.snapToZoom = true, this.customConstraints = new O();
  }
  destroy() {
    this.view = null;
  }
  get effectiveLODs() {
    return this._zoom.effectiveLODs;
  }
  get effectiveMinScale() {
    return this._zoom.effectiveMinScale;
  }
  get effectiveMaxScale() {
    return this._zoom.effectiveMaxScale;
  }
  get effectiveMinZoom() {
    return this._zoom.effectiveMinZoom;
  }
  get effectiveMaxZoom() {
    return this._zoom.effectiveMaxZoom;
  }
  set geometry(o30) {
    o30 ? this._set("geometry", o30) : this._set("geometry", null);
  }
  get version() {
    return `${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`;
  }
  get _geometry() {
    const o30 = this._get("_geometry");
    return o30 && this.geometry === o30.geometry && this.view?.constraintsInfo.spatialReference === o30.spatialReference ? o30 : new p12({ geometry: this.geometry, spatialReference: this.view?.constraintsInfo.spatialReference });
  }
  get _rotation() {
    return new i21({ rotationEnabled: this.rotationEnabled });
  }
  get _zoom() {
    const o30 = this._get("_zoom"), t27 = this.lods || this.view?.constraintsInfo.lods, e30 = this.minZoom, r29 = this.maxZoom, s35 = this.minScale, i30 = this.maxScale, n34 = this.snapToZoom;
    return o30 && o30.lods === t27 && o30.minZoom === e30 && o30.maxZoom === r29 && o30.minScale === s35 && o30.maxScale === i30 && o30.snapToZoom === n34 ? o30 : new r17({ lods: t27, minZoom: e30, maxZoom: r29, minScale: s35, maxScale: i30, snapToZoom: n34 });
  }
  canZoomInTo(o30) {
    const t27 = this.effectiveMaxScale;
    return 0 === t27 || o30 >= t27;
  }
  canZoomOutTo(o30) {
    const t27 = this.effectiveMinScale;
    return 0 === t27 || o30 <= t27;
  }
  constrain(o30, t27) {
    return this._zoom.constrain(o30, t27), this._rotation.constrain(o30, t27), this._geometry.constrain(o30, t27), this.customConstraints.forEach((e30) => e30.constrain(o30, t27)), o30;
  }
  constrainByGeometry(o30) {
    return this._geometry.constrain(o30), this.customConstraints.forEach((t27) => t27.applyPanConstraint?.(o30)), o30;
  }
  fit(o30) {
    return this._zoom.fit(o30);
  }
  zoomToScale(o30) {
    return this._zoom.zoomToScale(o30);
  }
  scaleToZoom(o30) {
    return this._zoom.scaleToZoom(o30);
  }
  snapScale(o30) {
    return this._zoom.snapToClosestScale(o30);
  }
  snapToNextScale(o30) {
    return this._zoom.snapToNextScale(o30);
  }
  snapToPreviousScale(o30) {
    return this._zoom.snapToPreviousScale(o30);
  }
};
__decorate([m2({ readOnly: true })], y7.prototype, "effectiveLODs", null), __decorate([m2({ readOnly: true })], y7.prototype, "effectiveMinScale", null), __decorate([m2({ readOnly: true })], y7.prototype, "effectiveMaxScale", null), __decorate([m2({ readOnly: true })], y7.prototype, "effectiveMinZoom", null), __decorate([m2({ readOnly: true })], y7.prototype, "effectiveMaxZoom", null), __decorate([m2({ types: p13, value: null })], y7.prototype, "geometry", null), __decorate([m2({ type: [l8] })], y7.prototype, "lods", void 0), __decorate([m2()], y7.prototype, "minScale", void 0), __decorate([m2()], y7.prototype, "maxScale", void 0), __decorate([m2()], y7.prototype, "minZoom", void 0), __decorate([m2()], y7.prototype, "maxZoom", void 0), __decorate([m2()], y7.prototype, "rotationEnabled", void 0), __decorate([m2()], y7.prototype, "snapToZoom", void 0), __decorate([m2({ type: O })], y7.prototype, "customConstraints", void 0), __decorate([m2()], y7.prototype, "view", void 0), __decorate([m2({ readOnly: true })], y7.prototype, "version", null), __decorate([m2({ type: p12, readOnly: true })], y7.prototype, "_geometry", null), __decorate([m2({ type: i21 })], y7.prototype, "_rotation", null), __decorate([m2({ readOnly: true, type: r17 })], y7.prototype, "_zoom", null), y7 = __decorate([a2("esri.views.2d.MapViewConstraints")], y7);
var f11 = y7;

// node_modules/@arcgis/core/views/2d/ViewStateManager.js
var z3 = class extends b {
  constructor(t27) {
    super(t27), this.constraints = null, this.ready = false, this.resizeAlign = "center", this.addHandles([l5(() => this.constraints?.version, (t28) => {
      this.constraints && t28 && this.ready && (this.state.viewpoint = this.constraints.fit(this.state.paddedViewState.viewpoint));
    }, U)]);
  }
  get center() {
    if (!this.ready) return this._get("center");
    const { center: t27, spatialReference: e30 } = this.state.paddedViewState;
    return this.state.commitProperty("id"), new _({ x: t27[0], y: t27[1], spatialReference: e30 });
  }
  set center(t27) {
    if (null == t27) return;
    if (!this.ready) return void this._set("center", t27);
    let e30;
    try {
      e30 = this._project(t27, this.state.spatialReference);
    } catch (o30) {
      return void i.getLogger(this).error(new s("mapview:invalid-center", "could not project the value in the view's spatial reference", { input: t27, error: o30 }));
    }
    const i30 = this.viewpoint;
    xt(i30, i30, e30), this.viewpoint = i30;
  }
  get extent() {
    return this.ready ? (this.state.commitProperty("id"), this.state.paddedViewState.extent.clone()) : this._get("extent");
  }
  set extent(t27) {
    if (null == t27) return;
    if (!t27.width || !t27.height) return void i.getLogger(this).error(new s("mapview:invalid-extent", "invalid extent size"));
    if (!this.ready) return this._set("extent", t27), this._set("center", void 0), this._set("viewpoint", void 0), this._set("scale", void 0), void this._set("zoom", void 0);
    let e30;
    try {
      e30 = this._project(t27, this.state.spatialReference);
    } catch (o30) {
      return void i.getLogger(this).error(new s("mapview:invalid-extent", "could not project the value in the view's spatial reference", { error: o30 }));
    }
    const i30 = this.viewpoint;
    tt(i30, i30, e30, this.state.size, { constraints: this.constraints }), this.viewpoint = i30;
  }
  get padding() {
    return this.ready ? this.state.padding : this._get("padding");
  }
  set padding(t27) {
    this.ready ? (this.state.padding = t27, this._set("padding", this.state.padding)) : this._set("padding", t27);
  }
  get resolution() {
    return this.ready ? (this.state.commitProperty("id"), this.state.resolution) : 0;
  }
  get rotation() {
    return this.ready ? (this.state.commitProperty("id"), this.state.rotation) : this._get("rotation");
  }
  set rotation(t27) {
    if (isNaN(t27)) return;
    if (!this.ready) return void this._set("rotation", t27);
    const e30 = this.viewpoint;
    wt(e30, e30, t27), this.viewpoint = e30;
  }
  get scale() {
    return this.ready ? (this.state.commitProperty("id"), this.state.scale) : this._get("scale");
  }
  set scale(t27) {
    if (!t27 || isNaN(t27)) return;
    if (!this.ready) {
      this._set("scale", t27), this._set("zoom", void 0);
      const e31 = this._get("extent");
      return void (e31 && (this._set("extent", void 0), this._set("center", e31.center)));
    }
    const e30 = this.viewpoint;
    jt(e30, e30, t27), this.viewpoint = e30;
  }
  get viewpoint() {
    if (!this.ready) return this._get("viewpoint");
    return this.state.paddedViewState.viewpoint.clone();
  }
  set viewpoint(t27) {
    if (null == t27) return;
    if (!this.ready) return this._set("viewpoint", t27), this._set("extent", void 0), this._set("center", void 0), this._set("zoom", void 0), void this._set("scale", void 0);
    let i30, o30;
    try {
      i30 = this._project(t27, this.state.spatialReference), !t27.scale || isNaN(t27.scale) ? o30 = new s("mapview:invalid-viewpoint", `invalid scale value of ${t27.scale}`) : null == t27.targetGeometry && (o30 = new s("mapview:invalid-viewpoint", "geometry not defined"));
    } catch (a31) {
      o30 = new s("mapview:invalid-viewpoint", "could not project the value in the view's spatial reference", { error: a31 });
    }
    if (o30) return void i.getLogger(this).error(o30);
    this._scaleBeforeChangingSpatialReference = null;
    const n34 = new m9({ targetGeometry: new _(), scale: 0, rotation: 0 });
    Z(n34, i30), this.constraints?.constrain(n34, this.state.paddedViewState.viewpoint), this.state.viewpoint = n34, this._set("viewpoint", n34);
  }
  get visibleArea() {
    return this.ready ? this.state.visibleArea : null;
  }
  get zoom() {
    return this.ready ? this.constraints?.scaleToZoom(this.scale) ?? -1 : this._get("zoom");
  }
  set zoom(t27) {
    if (!(t27 >= 0)) return;
    if (!this.ready) {
      this._set("zoom", t27), this._set("scale", void 0);
      const e31 = this._get("extent");
      return void (e31 && (this._set("extent", void 0), this._set("center", e31.center)));
    }
    const e30 = this.constraints?.zoomToScale(t27) ?? 0;
    if (!e30) return void this._set("zoom", -1);
    const i30 = this.viewpoint;
    jt(i30, i30, e30), this.viewpoint = i30, this._set("zoom", this.constraints?.scaleToZoom(this.scale) ?? -1);
  }
  getUserStartupOptions(t27) {
    if (!t27[0] && !t27[1]) return { center: void 0, rotation: void 0, scale: void 0 };
    const { padding: e30, constraints: i30 } = this, s35 = this._get("center"), r29 = this._get("extent"), o30 = this._get("scale"), n34 = this._get("rotation"), a31 = this._get("viewpoint"), c27 = this._get("zoom"), p27 = null != c27 && null != i30 && i30.zoomToScale(c27) || void 0;
    let h17, l24, d21;
    const v8 = a31?.rotation, m27 = a31?.targetGeometry;
    "extent" === m27?.type ? h17 = m27 : "point" === m27?.type && (l24 = m27, d21 = a31?.scale);
    const u19 = r29 ?? h17;
    return { center: s35 ?? l24 ?? u19?.center, rotation: n34 ?? v8, scale: (o30 ?? p27 ?? d21 ?? (u19 && H(u19, [t27[0] - e30.left - e30.right, t27[1] - e30.top - e30.bottom]))) || void 0 };
  }
  startup(t27, e30, i30, s35) {
    const o30 = t27.targetGeometry;
    try {
      this._project(t27, i30);
    } catch (n34) {
      i.getLogger(this).warn(new s2("mapview:startup-projection-error", "projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.", { center: o30.toJSON(), spatialReference: i30, error: n34 })), t27.targetGeometry = s35 || new _({ x: 0, y: 0, spatialReference: i30 });
    }
    this.constraints?.fit(t27), this._set("state", new f10({ padding: this.padding, size: e30, viewpoint: t27 })), this._set("ready", true);
  }
  teardown() {
    this._set("ready", false);
    const { center: [t27, e30], spatialReference: i30, rotation: s35, scale: r29 } = this.state.paddedViewState, o30 = new _({ x: t27, y: e30, spatialReference: i30 });
    this._set("viewpoint", null), this._set("extent", null), this._set("center", o30), this._set("zoom", -1), this._set("rotation", s35), this._set("scale", r29), this._set("state", null);
  }
  changeSpatialReference(t27) {
    const i30 = this.state.paddedViewState.clone();
    if (null == this._scaleBeforeChangingSpatialReference) this._scaleBeforeChangingSpatialReference = i30.scale;
    else {
      const t28 = i30.viewpoint.clone();
      t28.scale = this._scaleBeforeChangingSpatialReference, i30.viewpoint = t28;
    }
    const s35 = i30.clone(), [o30, n34] = i30.center;
    let a31 = null;
    try {
      a31 = this._project(new _({ x: o30, y: n34, spatialReference: i30.spatialReference }), t27);
    } catch (h17) {
      r5() || i.getLogger(this).warn(new s2("mapview:spatial-reference-change", "could not project the view's center to the new spatial reference", { center: a31?.toJSON(), spatialReference: t27, error: h17 }));
    }
    a31 || (a31 = new _({ x: 0, y: 0, spatialReference: t27 }));
    const p27 = xt(new m9({ targetGeometry: new _(), scale: 0, rotation: 0 }), i30.viewpoint, a31);
    s35.viewpoint = p27;
    try {
      const e30 = 20, r29 = [i30.size[0] / 2, i30.size[1] / 2], o31 = [r29[0] + e30, r29[1]], n35 = i30.toMap([0, 0], o31), { x: a32, y: c27 } = this._project(new _({ x: n35[0], y: n35[1], spatialReference: i30.spatialReference }), t27);
      n35[0] = a32, n35[1] = c27, s35.toScreen(n35, n35);
      const h17 = pt(r29, n35, o31), l24 = Math.hypot(n35[0] - r29[0], n35[1] - r29[1]) / e30;
      !Number.isFinite(l24) || Math.abs(l24) > 4 ? (p27.rotation = 0, p27.targetGeometry = new _({ x: 0, y: 0, spatialReference: t27 })) : (p27.scale *= l24, p27.scale > has("mapview-srswitch-adjust-rotation-scale-threshold") ? p27.rotation = 0 : p27.rotation += Number.isFinite(h17) ? h17 : 0);
    } catch {
    }
    this._get("constraints")?.constrain(p27, void 0), this._get("state").viewpoint = p27;
  }
  resize(t27, e30) {
    if (!this.ready) return;
    const i30 = this.state;
    let s35 = this.state.paddedViewState.viewpoint;
    const r29 = this.state.paddedViewState.size.slice();
    i30.size = [t27, e30], ht(s35, s35, r29, this.state.paddedViewState.size, this.resizeAlign), s35 = this.constraints?.constrain(s35, void 0) ?? s35, this.state.viewpoint = s35;
  }
  toMap(t27) {
    if (!this.ready) return null;
    const e30 = [0, 0], [i30, s35] = this.state.toMap(e30, [t27.x, t27.y]), r29 = this.state.spatialReference;
    return new _({ x: i30, y: s35, spatialReference: r29 });
  }
  toScreen(t27, e30) {
    if (!this.ready) return null;
    const i30 = this._project(t27, this.state.spatialReference), s35 = [i30.x, i30.y];
    return false === e30?.pickClosestTarget || this.state.paddedViewState.wrapMapCoordinate(s35, s35), this.state.toScreen(s35, s35), i4(s35[0], s35[1]);
  }
  _project(t27, e30) {
    const i30 = t27?.targetGeometry || t27;
    if (!e30) return t27;
    if (!i30) return null;
    if (e30.imageCoordinateSystem || i30.spatialReference?.imageCoordinateSystem) return t27;
    if (T2(e30, i30.spatialReference)) return t27;
    const r29 = W(i30, e30);
    if (!r29) throw new s("mapview:projection-not-possible", "projecting input geometry to target spatial reference returned a null value", { geometry: i30, spatialReference: e30 });
    return V3(t27) ? (t27.targetGeometry = r29, t27) : r29;
  }
};
function V3(t27) {
  return "esri.Viewpoint" === t27?.declaredClass;
}
__decorate([m2({ type: _ })], z3.prototype, "center", null), __decorate([m2()], z3.prototype, "constraints", void 0), __decorate([m2({ type: z })], z3.prototype, "extent", null), __decorate([m2({ value: { top: 0, right: 0, bottom: 0, left: 0 }, cast: (t27) => ({ top: 0, right: 0, bottom: 0, left: 0, ...t27 }) })], z3.prototype, "padding", null), __decorate([m2()], z3.prototype, "ready", void 0), __decorate([m2()], z3.prototype, "resizeAlign", void 0), __decorate([m2({ readOnly: true })], z3.prototype, "resolution", null), __decorate([m2({ type: Number })], z3.prototype, "rotation", null), __decorate([m2({ type: Number })], z3.prototype, "scale", null), __decorate([m2({ readOnly: true })], z3.prototype, "state", void 0), __decorate([m2({ type: m9 })], z3.prototype, "viewpoint", null), __decorate([m2({ readOnly: true })], z3.prototype, "visibleArea", null), __decorate([m2()], z3.prototype, "zoom", null), z3 = __decorate([a2("esri.views.2d.ViewStateManager")], z3);

// node_modules/@arcgis/core/views/2d/support/StationaryManager.js
var s20 = 160;
var i22 = class extends b {
  constructor() {
    super(...arguments), this._timer = void 0;
  }
  get stationary() {
    return !this._timer;
  }
  flip() {
    this._timestamp = performance.now(), null == this._timer && (this._timer = setInterval(() => {
      performance.now() - this._timestamp >= s20 && this.clear();
    }, s20));
  }
  clear() {
    this._timer && (clearInterval(this._timer), this._timer = void 0);
  }
};
__decorate([m2()], i22.prototype, "_timer", void 0), __decorate([m2()], i22.prototype, "stationary", null), i22 = __decorate([a2("esri.views.2d.support.StationaryManager")], i22);

// node_modules/@arcgis/core/views/Viewport2DBaseMixin.js
var d10 = (d21) => {
  const m27 = d21;
  let h17 = class extends m27 {
    constructor(...t27) {
      super(...t27), this.fullOpacity = 1, this.stateManager = new z3({ constraints: new f11({ view: this }) }), this.stationaryManager = new i22(), this.mapViewNavigation = null, this.renderingOptions = { samplingMode: "dynamic", edgeLabelsVisible: false, labelsAnimationTime: 0, labelCollisionsEnabled: false }, this.frameTask = new d9(this), this.viewEvents = new c10(this), this.padding = { top: 0, right: 0, bottom: 0, left: 0 }, this.addHandles([l5(() => this.viewpoint, () => this.stationaryManager.flip(), U)]);
    }
    get constraintsInfo() {
      return { lods: null, spatialReference: null };
    }
    get extent() {
      return this.stateManager?.extent ?? null;
    }
    set extent(t27) {
      this.stateManager.extent = t27;
    }
    get state() {
      return this.stateManager.state;
    }
    get interacting() {
      return false;
    }
    get stationary() {
      return !this.animation && this.stationaryManager.stationary;
    }
    set animation(t27) {
      const e30 = this._get("animation");
      if (t27 === e30) return;
      if (e30 && e30.stop(), t27 !== this.animationManager.animation && this.animationManager.stop(), !t27 || t27.isFulfilled()) return void this._set("animation", null);
      this._set("animation", t27);
      const i30 = () => {
        this.destroyed || t27 === this._get("animation") && (this._set("animation", null), this.frameTask?.requestFrame());
      };
      t27.when(i30, i30);
    }
    get constraints() {
      return this.stateManager?.constraints;
    }
    set constraints(t27) {
      t27.view = this;
      const e30 = this.stateManager.constraints;
      this.stateManager.constraints = t27, e30?.destroy();
    }
    get padding() {
      return this.stateManager?.padding;
    }
    set padding(t27) {
      this.stateManager && (this.stateManager.padding = t27);
    }
    get resizeAlign() {
      return this.stateManager.resizeAlign;
    }
    set resizeAlign(t27) {
      this.stateManager.resizeAlign = t27;
    }
    get rotation() {
      return this.stateManager.rotation ?? 0;
    }
    set rotation(t27) {
      const { rotationEnabled: e30 } = this.constraints;
      this.constraints.rotationEnabled = true, this.stateManager.rotation = t27, this.constraints.rotationEnabled = e30;
    }
    get viewpoint() {
      return this.stateManager.viewpoint ?? null;
    }
    set viewpoint(t27) {
      this.stateManager.viewpoint = t27, this.frameTask.requestFrame();
    }
  };
  return __decorate([m2({ readOnly: true })], h17.prototype, "animationManager", void 0), __decorate([m2({ readOnly: true })], h17.prototype, "fullOpacity", void 0), __decorate([m2()], h17.prototype, "stateManager", void 0), __decorate([m2()], h17.prototype, "constraintsInfo", null), __decorate([m2()], h17.prototype, "extent", null), __decorate([m2({ readOnly: true })], h17.prototype, "state", null), __decorate([m2({ readOnly: true })], h17.prototype, "mapViewNavigation", void 0), __decorate([m2()], h17.prototype, "renderingOptions", void 0), __decorate([m2({ readOnly: true })], h17.prototype, "interacting", null), __decorate([m2()], h17.prototype, "stationary", null), __decorate([m2()], h17.prototype, "animation", null), __decorate([m2({ type: f11 })], h17.prototype, "constraints", null), __decorate([m2()], h17.prototype, "padding", null), __decorate([m2()], h17.prototype, "resizeAlign", null), __decorate([m2()], h17.prototype, "rotation", null), __decorate([m2({ readOnly: true })], h17.prototype, "viewEvents", void 0), __decorate([m2({ type: m9 })], h17.prototype, "viewpoint", null), h17 = __decorate([a2("esri.views.Viewport2DBaseMixin")], h17), h17;
};

// node_modules/@arcgis/core/views/ViewAnimation.js
var _a2;
var a14 = (_a2 = class extends n7 {
  constructor(t27) {
    super(t27), this.state = "running", this.target = null, this._resolver = null;
  }
  initialize() {
    this._resolver = $(), this.addResolvingPromise(this._resolver.promise);
  }
  get done() {
    return "finished" === this.state || "stopped" === this.state;
  }
  stop() {
    "stopped" !== this.state && "finished" !== this.state && (this._set("state", "stopped"), this._resolver?.reject(new s("view:animation-stopped", "ViewAnimation stopped")));
  }
  finish() {
    "stopped" !== this.state && "finished" !== this.state && (this._set("state", "finished"), this._resolver?.resolve());
  }
  update(t27, e30) {
    e30 || (e30 = C(t27) ? "waiting-for-target" : "running"), this._set("target", t27), this._set("state", e30);
  }
}, _a2.state = { RUNNING: "running", STOPPED: "stopped", FINISHED: "finished", WAITING_FOR_TARGET: "waiting-for-target" }, _a2);
__decorate([m2({ readOnly: true })], a14.prototype, "done", null), __decorate([m2({ readOnly: true, type: String })], a14.prototype, "state", void 0), __decorate([m2()], a14.prototype, "target", void 0), a14 = __decorate([a2("esri.views.ViewAnimation")], a14);
var n21 = a14;

// node_modules/@arcgis/core/views/2d/GoToManager.js
var h8 = class extends b {
  constructor(t27) {
    super(t27), this._gotoTask = null;
  }
  destroy() {
    this._gotoTask = null;
  }
  async goTo(t27, e30) {
    if (!t27) return void i.getLogger(this).error("#goTo()", "target cannot be null or undefined");
    const i30 = new n21();
    this.view.animation = i30, await j(() => this.view.ready, e30);
    const s35 = { ...e30, animate: e30?.animate ?? (!o10() && this.view.animationsEnabled), animationMode: e30?.animationMode ?? "auto" }, { extent: a31, spatialReference: c27, size: m27, viewpoint: h17, constraints: w8, padding: d21, allLayerViews: g15 } = this.view, u19 = Y(t27, { extent: a31, spatialReference: c27, size: m27, viewpoint: h17, constraints: w8, padding: d21, allLayerViews: g15, pickClosestTarget: e30?.pickClosestTarget ?? true });
    return i30?.update(u19), this._gotoTask = {}, s35.animate ? this._gotoAnimated(u19, s35) : this._gotoImmediate(u19, s35);
  }
  _gotoImmediate(t27, o30) {
    const e30 = this._gotoTask, r29 = this.view.animation, a31 = t27.then((t28) => {
      if (s3(o30), e30 !== this._gotoTask) throw new s("view:goto-interrupted", "Goto was interrupted");
      this.view.viewpoint = r29.target = t28, r29.finish();
    });
    return this._cancellableGoTo(e30, r29, a31, o30);
  }
  _gotoAnimated(t27, o30) {
    const e30 = this._gotoTask, r29 = this.view.animation;
    if (!r29) return Promise.resolve();
    const a31 = t27.then((t28) => {
      if (s3(o30), e30 !== this._gotoTask) throw new s("view:goto-interrupted", "Goto was interrupted");
      return r29.update(t28), this.view.animationManager.animate(r29, this.view.viewpoint, o30), r29.when().then(() => {
      }, () => {
      });
    });
    return this._cancellableGoTo(e30, r29, a31, o30);
  }
  _cancellableGoTo(t27, o30, e30, i30) {
    const r29 = () => t27 === this._gotoTask;
    return p(e30, i30).finally(() => {
      r29() && (o30.done || o30.stop());
    });
  }
};
__decorate([m2({ constructOnly: true })], h8.prototype, "view", void 0), h8 = __decorate([a2("esri.views.2d.GoToManager")], h8);

// node_modules/@arcgis/core/views/input/handlers/support.js
function r18(r29, e30) {
  switch (e30) {
    case "primary":
      return "touch" === r29.pointerType || 0 === r29.button;
    case "secondary":
      return "touch" !== r29.pointerType && 2 === r29.button;
    case "tertiary":
      return "touch" !== r29.pointerType && 1 === r29.button;
  }
}
function e18(e30, t27) {
  return t27.some((t28) => r18(e30, t28));
}
function n22(r29, { dragPrimary: e30, dragSecondary: t27, dragTertiary: n34 }) {
  return [{ key: "primary", value: e30 }, { key: "secondary", value: t27 }, { key: "tertiary", value: n34 }].filter((e31) => e31.value === r29).map((r30) => r30.key);
}

// node_modules/@arcgis/core/views/2d/input/handlers/DoubleClickZoom.js
var a15 = class extends t8 {
  constructor(t27, i30) {
    super(true), this._view = t27, this.registerIncoming("double-click", i30, (t28) => this._handleDoubleClick(t28, i30));
  }
  _handleDoubleClick(t27, a31) {
    r18(t27.data, "primary") && (t27.stopPropagation(), a31 ? this._view.mapViewNavigation.zoomOut([t27.data.x, t27.data.y]) : this._view.mapViewNavigation.zoomIn([t27.data.x, t27.data.y]));
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/DoubleTapDragZoom.js
var e19 = class extends t8 {
  constructor(t27, e30, a31) {
    super(true), this.view = t27, this.pointerType = e30, this.registerIncoming("double-tap-drag", a31, (t28) => this._handleDoubleTapDrag(t28));
  }
  _handleDoubleTapDrag(t27) {
    const { data: e30 } = t27, { pointerType: a31 } = e30;
    if (a31 !== this.pointerType) return;
    t27.stopPropagation();
    const { action: s35, delta: i30 } = e30, { view: r29 } = this, { mapViewNavigation: n34 } = r29;
    switch (s35) {
      case "begin": {
        const { scale: t28 } = r29;
        this._startScale = t28, this._currentScale = t28, this._previousDelta = i30, n34.begin();
        break;
      }
      case "update": {
        if (this._previousDelta.y === i30.y) return;
        this._previousDelta = i30;
        const t28 = 1.015 ** i30.y, e31 = this._startScale * t28, a32 = e31 / this._currentScale;
        n34.setViewpointImmediate(a32), this._currentScale = e31;
        break;
      }
      case "end": {
        const { constraints: t28 } = r29, { effectiveLODs: e31, snapToZoom: a32 } = t28;
        if (!a32 || !e31) return void n34.end();
        const s36 = t28.snapScale(this._currentScale), o30 = (i30.y > 0 ? Math.max(s36, t28.snapToPreviousScale(this._startScale)) : Math.min(s36, t28.snapToNextScale(this._startScale))) / this._currentScale;
        n34.zoom(o30).then(() => {
          n34.end();
        });
        break;
      }
    }
  }
};

// node_modules/@arcgis/core/views/input/DragEventSeparator.js
var t13 = class {
  constructor(t27) {
    this._callbacks = t27, this._currentCount = 0, this._callbacks.condition || (this._callbacks.condition = () => true);
  }
  handle(t27) {
    const s35 = t27.data, i30 = s35.pointers.size;
    switch (s35.action) {
      case "start":
        this._currentCount = i30, this._emitStart(t27);
        break;
      case "added":
        this._emitEnd(this._previousEvent), this._currentCount = i30, this._emitStart(t27);
        break;
      case "update":
        this._emitUpdate(t27);
        break;
      case "removed":
        this._startEvent && this._emitEnd(this._previousEvent), this._currentCount = i30, this._emitStart(t27);
        break;
      case "end":
        this._emitEnd(t27), this._currentCount = 0;
    }
    this._previousEvent = t27;
  }
  _emitStart(t27) {
    this._startEvent = t27, this._callbacks.condition?.(this._currentCount, t27) && this._callbacks.start(this._currentCount, t27, this._startEvent);
  }
  _emitUpdate(t27) {
    this._callbacks.condition?.(this._currentCount, t27) && this._callbacks.update(this._currentCount, t27, this._startEvent);
  }
  _emitEnd(t27) {
    this._callbacks.condition?.(this._currentCount, t27) && this._callbacks.end(this._currentCount, t27, this._startEvent), this._startEvent = null;
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/DragPan.js
var n23 = class extends t8 {
  constructor(t27, i30, a31) {
    super(true), this.view = t27, this.pointerActions = i30, this.registerIncoming("drag", a31, (t28) => this._handleDrag(t28)), this.registerIncoming("pointer-down", () => this.stopMomentumNavigation());
  }
  onInstall(i30) {
    super.onInstall(i30), this._dragEventSeparator = new t13({ start: (t27, i31) => {
      this.view.mapViewNavigation.pan.begin(this.view, i31.data), i31.stopPropagation();
    }, update: (t27, i31) => {
      this.view.mapViewNavigation.pan.update(this.view, i31.data), i31.stopPropagation();
    }, end: (t27, i31) => {
      this.view.mapViewNavigation.pan.end(this.view, i31.data), i31.stopPropagation();
    }, condition: (t27, i31) => 1 === t27 && e18(i31.data, this.pointerActions) });
  }
  _handleDrag(t27) {
    const i30 = this.view.mapViewNavigation;
    i30.pinch.zoomMomentum || i30.pinch.rotateMomentum ? this.stopMomentumNavigation() : this._dragEventSeparator.handle(t27);
  }
  stopMomentumNavigation() {
    this.view.mapViewNavigation.pan.stopMomentumNavigation();
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/DragRotate.js
var o16 = class extends t8 {
  constructor(a31, o30, r29) {
    super(true), this._view = a31, this.pointerActions = o30;
    const e30 = this._view.mapViewNavigation;
    this._dragEventSeparator = new t13({ start: (t27, a32) => {
      e30.rotate.begin(this._view, a32.data), a32.stopPropagation();
    }, update: (t27, a32) => {
      e30.rotate.update(this._view, a32.data), a32.stopPropagation();
    }, end: (t27, a32) => {
      e30.rotate.end(), a32.stopPropagation();
    }, condition: (t27, a32) => 1 === t27 && e18(a32.data, this.pointerActions) }), this.registerIncoming("drag", r29, (t27) => this._dragEventSeparator.handle(t27));
  }
};

// node_modules/@arcgis/core/views/navigation/gamepadAndKeyboardUtils.js
function n24(t27) {
  let n34 = t27 * t27;
  return t27 < 0 && (n34 *= -1), n34;
}
function a16(t27) {
  return t27.translation[0] = 0, t27.translation[1] = 0, t27.translation[2] = 0, t27.heading = 0, t27.tilt = 0, t27;
}
function i23(a31, i30, o30) {
  const s35 = o30, e30 = a31.state, r29 = a31.device, l24 = "forward-down" === i30.tiltDirection ? 1 : -1, c27 = 1;
  return "standard" === r29.deviceType ? (s35.translation[0] = n24(e30.axes[0]), s35.translation[1] = n24(e30.axes[1]), s35.translation[2] = n24(e30.buttons[7]) - n24(e30.buttons[6]), s35.heading = n24(e30.axes[2]), s35.tilt = n24(e30.axes[3])) : "spacemouse" === r29.deviceType && (s35.translation[0] = 1.2 * n24(e30.axes[0]), s35.translation[1] = 1.2 * n24(e30.axes[1]), s35.translation[2] = 2 * -n24(e30.axes[2]), s35.heading = 1.2 * n24(e30.axes[5]), s35.tilt = 1.2 * n24(e30.axes[3])), s35.tilt *= l24, g(s35.translation, s35.translation, c27), s35;
}
function s21(t27) {
  return 0 === t27.translation[0] && 0 === t27.translation[1] && 0 === t27.translation[2] && 0 === t27.heading && 0 === t27.tilt && 0 === t27.zoom;
}

// node_modules/@arcgis/core/views/2d/input/handlers/GamepadNavigation.js
var m17 = class extends t8 {
  constructor(e30) {
    super(true), this._view = e30, this._frameTask = null, this._watchHandles = new r2(), this._currentDevice = null, this._transformation = { translation: [0, 0, 0], heading: 0, tilt: 0, zoom: 0 }, this._handle = this.registerIncoming("gamepad", (t27) => this._handleGamePadEvent(t27)), this._handle.pause();
  }
  onInstall(t27) {
    super.onInstall(t27), this._watchHandles.add([l5(() => this._view.navigation.gamepad?.enabled, (t28) => {
      t28 ? (this._handle.resume(), this._frameTask || (this._frameTask = F({ update: (t29) => this._frameUpdate(t29.deltaTime) }))) : (this._handle.pause(), this._frameTask && (this._frameTask.remove(), this._frameTask = null));
    }, h)]);
  }
  onUninstall() {
    this._watchHandles.removeAll(), this._frameTask && (this._frameTask.remove(), this._frameTask = null), super.onUninstall();
  }
  _handleGamePadEvent(t27) {
    const e30 = this._view.navigation.gamepad.device;
    e30 && t27.data.device !== e30 || this._currentDevice && this._currentDevice !== t27.data.device || ("end" === t27.data.action ? (this._currentDevice = null, a16(this._transformation)) : (this._currentDevice = t27.data.device, i23(t27.data, this._view.navigation.gamepad, this._transformation)), this._frameTask?.resume());
  }
  _frameUpdate(t27) {
    const e30 = this._transformation;
    if (s21(e30)) return void this._frameTask?.pause();
    const i30 = this._view.viewpoint.clone(), a31 = this._view.navigation.gamepad.velocityFactor, r29 = _9 * a31 * t27;
    kt(i30, i30, [e30.translation[0] * r29, -e30.translation[1] * r29]);
    const o30 = 1 + e30.translation[2] * c15 * t27, h17 = this._view.constraints.rotationEnabled ? -e30.heading * d11 * t27 : 0, m27 = this._view.size, v8 = [m27[0] / 2, m27[1]];
    Gt(i30, i30, o30, h17, v8, m27);
    const p27 = this._view.constraints.constrain(i30, this._view.viewpoint);
    this._view.viewpoint = p27;
  }
};
var d11 = 0.06;
var _9 = 0.7;
var c15 = 6e-4;

// node_modules/@arcgis/core/views/input/VisibilityChange.js
function i24(i30) {
  const t27 = () => i30("visible" === document.visibilityState);
  return document.addEventListener("visibilitychange", t27), e2(() => document.removeEventListener("visibilitychange", t27));
}

// node_modules/@arcgis/core/views/2d/input/handlers/KeyPan.js
var e20 = class extends t8 {
  constructor(i30, e30, s35) {
    super(true), this.view = i30, this.keys = e30, this._isSticky = false, this._pressedKeys = /* @__PURE__ */ new Set(), this._timeout = void 0, this._currentDirection = void 0, this._stickyKeyDuration = 200, this._handleKey = (i31) => {
      const t27 = this._keyMap[i31.data.key];
      if (i31.modifiers.has("Meta") || i31.modifiers.has("Control")) return void this._stopMovement();
      if (null == t27) return;
      i31.stopPropagation(), i31.preventDefault();
      const e31 = "key-down" === i31.type;
      if (this._pressedKeys[e31 ? "add" : "delete"](t27), e31) {
        if (this._direction === t27) return;
        this._direction = t27, this._isSticky = false, this._setTimeout(() => {
          this._isSticky && this._handlePopKey();
        });
      } else {
        const i32 = void 0 === this._timeout, t28 = this._pressedKeys.size > 0;
        i32 || t28 ? this._handlePopKey() : this._isSticky = true;
      }
    }, this._handlePopKey = () => {
      this._direction = Array.from(this._pressedKeys).pop(), null == this._direction && this._stopMovement();
    }, this._stopMovement = () => {
      this._isSticky = false, this._direction = void 0, this._pressedKeys.clear(), this._setTimeout(void 0);
    }, this._keyMap = { [e30.left]: "left", [e30.right]: "right", [e30.up]: "up", [e30.down]: "down" }, this.registerIncoming("key-down", s35, this._handleKey), this.registerIncoming("key-up", s35, this._handleKey), this.registerIncoming("blur", s35, this._stopMovement), this._visibilityHandle = i24((i31) => i31 ? null : this._stopMovement());
  }
  onUninstall() {
    this._stopMovement(), this._visibilityHandle?.remove();
  }
  get _direction() {
    return this._currentDirection;
  }
  set _direction(i30) {
    const t27 = null != this._currentDirection;
    if (null != i30) {
      if (t27 || this.view.mapViewNavigation.begin(), this._currentDirection !== i30) switch (i30) {
        case "left":
          this.view.mapViewNavigation.continuousPanLeft();
          break;
        case "right":
          this.view.mapViewNavigation.continuousPanRight();
          break;
        case "up":
          this.view.mapViewNavigation.continuousPanUp();
          break;
        case "down":
          this.view.mapViewNavigation.continuousPanDown();
      }
    } else t27 && this.view.mapViewNavigation.stop();
    this._currentDirection = i30;
  }
  _setTimeout(i30) {
    clearTimeout(this._timeout), this._timeout = void 0 === i30 ? void 0 : setTimeout(() => {
      this._timeout = void 0, i30();
    }, this._stickyKeyDuration);
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/KeyRotate.js
var t14 = class extends t8 {
  constructor(e30, t27, s35) {
    super(true), this.view = e30, this.keys = t27, this._keyToDirection = /* @__PURE__ */ new Map(), this._pressed = false, this._addKeysMapping(t27), this.registerIncoming("key-down", s35, (e31) => this._handleKeyDown(e31)), this.registerIncoming("key-up", s35, (e31) => this._handleKeyUp(e31)), this.registerIncoming("blur", s35, () => this._handleStop()), this._visibilityHandle = i24((e31) => e31 ? null : this._handleStop());
  }
  onUninstall() {
    this._visibilityHandle?.remove(), this._handleStop();
  }
  _addKeysMapping(e30) {
    this._addKeyMapping(e30.clockwise, "clockwise"), this._addKeyMapping(e30.counterClockwise, "counterClockwise"), this._addKeyMapping(e30.reset, "reset");
  }
  _addKeyMapping(e30, i30) {
    for (const t27 of e30) this._keyToDirection.set(t27, i30);
  }
  _handleKeyDown(e30) {
    e30.data.repeat || this._handleKey(e30, true);
  }
  _handleKeyUp(e30) {
    this._handleKey(e30, false);
  }
  _handleStop() {
    this._pressed && (this._pressed = false, this.view.mapViewNavigation.stop());
  }
  _handleKey(e30, i30) {
    const t27 = e30.modifiers;
    if (t27.size > 0 && !t27.has("Shift") || !this.view.constraints.rotationEnabled) return;
    const s35 = this._keyToDirection.get(e30.data.key);
    if (this._pressed = null != s35, this._pressed) {
      if (e30.preventDefault(), i30) switch (this.view.mapViewNavigation.begin(), s35) {
        case "clockwise":
          this.view.mapViewNavigation.continuousRotateClockwise();
          break;
        case "counterClockwise":
          this.view.mapViewNavigation.continuousRotateCounterclockwise();
          break;
        case "reset":
          this.view.mapViewNavigation.resetRotation();
      }
      else this._pressed = false, this.view.mapViewNavigation.stop();
      e30.stopPropagation();
    }
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/KeyZoom.js
var t15 = class extends t8 {
  constructor(o30, t27, e30) {
    super(true), this.view = o30, this.keys = t27, this._keysToZoomAction = {}, this.registerIncoming("key-down", e30, (o31) => this._handleKeyDown(o31)), t27.zoomIn.forEach((o31) => this._keysToZoomAction[o31] = 0), t27.zoomOut.forEach((o31) => this._keysToZoomAction[o31] = 1);
  }
  _handleKeyDown(o30) {
    this._handleKey(o30);
  }
  _handleKey(o30) {
    const t27 = o30.modifiers;
    if (t27.size > 0 && !t27.has("Shift")) return;
    const { key: e30 } = o30.data;
    if (!(e30 in this._keysToZoomAction)) return;
    const i30 = this._keysToZoomAction[e30], { mapViewNavigation: s35 } = this.view;
    let n34 = null;
    switch (i30) {
      case 0:
        n34 = s35.zoomIn();
        break;
      case 1:
        n34 = s35.zoomOut();
        break;
      default:
        return;
    }
    s35.begin(), n34.then(() => s35.end()), o30.stopPropagation();
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/MouseWheelZoom.js
var t16 = 0.6;
var o17 = class extends t8 {
  constructor(e30, t27) {
    super(true), this._view = e30, this._canZoom = true, this.registerIncoming("mouse-wheel", t27, (e31) => this._handleMouseWheel(e31));
  }
  _handleMouseWheel(e30) {
    if ("zoom" !== this._view.navigation.actionMap.mouseWheel) return;
    if (e30.preventDefault(), e30.stopPropagation(), !this._canZoom) return;
    const o30 = this._view.mapViewNavigation, { x: i30, y: n34, deltaY: s35 } = e30.data, a31 = 1 / t16 ** (1 / 60 * s35), h17 = o30.zoom(a31, [i30, n34]);
    this._canZoom = false, h17.catch(() => {
    }).then(() => {
      this._canZoom = true, o30.end();
    });
  }
};

// node_modules/@arcgis/core/views/2d/input/handlers/PinchAction.js
var a17 = class extends t8 {
  constructor(i30) {
    super(true), this.view = i30, this.registerIncoming("drag", (t27) => this._handleDrag(t27)), this.registerIncoming("pointer-down", () => this._stopMomentumNavigation());
    const a31 = this.view.mapViewNavigation;
    this._dragEventSeparator = new t13({ start: (t27, i31) => {
      a31.pinch.begin(this.view, i31.data), i31.stopPropagation();
    }, update: (t27, i31) => {
      a31.pinch.update(this.view, i31.data), i31.stopPropagation();
    }, end: (t27, i31) => {
      a31.pinch.end(this.view), i31.stopPropagation();
    }, condition: (t27) => t27 >= 2 });
  }
  _handleDrag(t27) {
    this._dragEventSeparator.handle(t27);
  }
  _stopMomentumNavigation() {
    this.view.mapViewNavigation.pinch.stopMomentumNavigation();
  }
};

// node_modules/@arcgis/core/views/input/gamepad/GamepadState.js
function t17(t27) {
  const n34 = t27.native;
  return n34 ? { buttons: n34.buttons.map((t28) => t28.pressed ? t28.value || 1 : 0), axes: n34.axes.map((n35) => s22(n35, t27.axisThreshold)) } : { buttons: [], axes: [] };
}
function n25(t27, n34) {
  if (t27.axes.length !== n34.axes.length) return false;
  if (t27.buttons.length !== n34.buttons.length) return false;
  for (let e30 = 0; e30 < t27.axes.length; e30++) if (t27.axes[e30] !== n34.axes[e30]) return false;
  for (let e30 = 0; e30 < t27.buttons.length; e30++) if (t27.buttons[e30] !== n34.buttons[e30]) return false;
  return true;
}
function e21(t27) {
  for (let n34 = 0; n34 < t27.axes.length; n34++) if (0 !== t27.axes[n34]) return false;
  for (let n34 = 0; n34 < t27.buttons.length; n34++) if (0 !== t27.buttons[n34]) return false;
  return true;
}
function s22(t27, n34) {
  const e30 = Math.abs(t27);
  return e30 < n34 ? 0 : Math.sign(t27) * (e30 - n34) / (1 - n34);
}

// node_modules/@arcgis/core/views/input/gamepad/GamepadSource.js
var a18 = class {
  constructor(e30, t27) {
    this._element = e30, this._input = t27, this._hasEventListeners = false, this._onConnectGamepad = (e31) => {
      this._connectGamepad(e31.gamepad);
    }, this._onDisconnectGamepad = (e31) => {
      const t28 = e31.gamepad, n35 = t28.index, i31 = this._inputDevices[n35];
      i31 && (this._emitGamepadEvent(t28, t17(i31), false), this._inputDevices.splice(n35, 1), this._latestUpdate.splice(n35, 1), this._input.gamepad.devices.remove(i31), this.ensurePollingState());
    }, this._frameTask = null, this._latestUpdate = new Array(), this._inputDevices = new Array(), this._callback = null;
    const n34 = "getGamepads" in window.navigator, i30 = window.isSecureContext;
    this.supported = n34 && i30, this.supported && (d12((e31) => this._connectGamepad(e31)), window.addEventListener("gamepadconnected", this._onConnectGamepad), window.addEventListener("gamepaddisconnected", this._onDisconnectGamepad), this.ensurePollingState());
  }
  destroy() {
    this.hasEventListeners = false, this.supported && (window.removeEventListener("gamepadconnected", this._onConnectGamepad), window.removeEventListener("gamepaddisconnected", this._onDisconnectGamepad));
  }
  set hasEventListeners(e30) {
    this._hasEventListeners !== e30 && (this._hasEventListeners = e30, this.ensurePollingState());
  }
  get _eventsEnabled() {
    return this.supported && this._inputDevices.length > 0 && this._hasEventListeners;
  }
  set onEvent(e30) {
    this._callback = e30;
  }
  _connectGamepad(e30) {
    const s35 = new s15(e30);
    "unknown" !== s35.deviceType && (this._inputDevices[e30.index] = s35, this._input.gamepad.devices.add(s35)), this.ensurePollingState();
  }
  ensurePollingState() {
    this._eventsEnabled ? this._startPolling() : this._stopPolling();
  }
  _startPolling() {
    null == this._frameTask && (this._frameTask = F({ update: () => this._readGamepadState() }));
  }
  _stopPolling() {
    null != this._frameTask && (this._frameTask.remove(), this._frameTask = null, this._latestUpdate = new Array());
  }
  _readGamepadState() {
    const e30 = document.hasFocus(), t27 = this._element.contains(document.activeElement), a31 = "document" === this._input.gamepad.enabledFocusMode && !e30 || "view" === this._input.gamepad.enabledFocusMode && !t27;
    d12((e31) => {
      const t28 = this._inputDevices[e31.index];
      if (!t28) return;
      const o30 = this._latestUpdate[e31.index], d21 = t17(t28), c27 = a31 || e21(d21);
      if (o30) {
        if (o30.timestamp === e31.timestamp) return;
        if (!o30.active && c27) return;
        if (n25(o30.state, d21)) return;
      }
      this._emitGamepadEvent(e31, d21, !c27);
    });
  }
  _emitGamepadEvent(e30, t27, s35) {
    const n34 = this._latestUpdate[e30.index], i30 = n34 && n34.active;
    if (!i30 && !s35) return;
    const a31 = !i30 && s35 ? "start" : i30 && s35 ? "update" : "end";
    this._latestUpdate[e30.index] = { timestamp: e30.timestamp, state: t27, active: s35 }, this._callback && this._callback({ device: this._inputDevices[e30.index], state: t27, action: a31 });
  }
};
function o18(e30) {
  if (!e30) return false;
  if (!e30.connected) return false;
  for (let t27 = 0; t27 < e30.axes.length; t27++) if (isNaN(e30.axes[t27])) return false;
  return true;
}
function d12(e30) {
  for (const t27 of navigator.getGamepads()) o18(t27) && e30(t27);
}

// node_modules/@arcgis/core/views/input/BrowserEventSource.js
var i25 = has("edge");
var a19 = has("chrome");
var o19 = has("ff");
var s23 = has("safari");
var r19 = "esri-view-surface";
var h9 = { touchNone: `${r19}--touch-none`, touchPan: `${r19}--touch-pan` };
var _l = class _l {
  constructor(e30, n34) {
    this._active = {}, this._callback = () => {
    }, this._activePointerCaptures = /* @__PURE__ */ new Set(), this._keyDownState = /* @__PURE__ */ new Set(), this._eventId = 1, this._browserTouchPanningEnabled = false, this._element = e30, e30.getAttribute("tabindex") || e30.setAttribute("tabindex", "0"), this._eventHandlers = { "key-down": this._handleKey, "key-up": this._handleKey, "pointer-down": this._handlePointer, "pointer-move": this._handlePointerPreventDefault, "pointer-up": this._handlePointerPreventDefault, "pointer-enter": this._handlePointer, "pointer-leave": this._handlePointer, "pointer-cancel": this._handlePointer, "mouse-wheel": this._handleMouseWheel, "pointer-capture-lost": this._handlePointerCaptureLost }, this._updateTouchAction(), this._element.addEventListener("keydown", this._preventAltKeyDefault), this._gamepadSource = new a18(e30, n34), this._gamepadSource.onEvent = (e31) => this._callback("gamepad", e31);
  }
  destroy() {
    this._callback = () => {
    }, this.activeEvents = null, this._activePointerCaptures.forEach((e30) => this._releasePointerCaptureSafe(e30)), this._activePointerCaptures.clear(), this._gamepadSource = u(this._gamepadSource), this._removeTouchAction(), this._element.removeEventListener("keydown", this._preventAltKeyDefault);
  }
  get browserTouchPanningEnabled() {
    return this._browserTouchPanningEnabled;
  }
  set browserTouchPanningEnabled(e30) {
    this._browserTouchPanningEnabled = e30, this._updateTouchAction(), this._updateTouchEventHandling();
  }
  set onEventReceived(e30) {
    this._callback = e30;
  }
  set activeEvents(e30) {
    for (const t27 in this._active) if (!e30 || !e30.has(t27)) {
      const e31 = this._active[t27];
      this._element.removeEventListener(c16[t27], e31), delete this._active[t27];
    }
    e30 && e30.forEach((e31) => {
      if (!this._active[e31] && c16[e31]) {
        const t27 = (this._eventHandlers[e31] || this._handleDefault).bind(this, e31);
        this._element.addEventListener(c16[e31], t27), this._active[e31] = t27;
      }
    }), this._gamepadSource && (this._gamepadSource.hasEventListeners = e30?.has("gamepad") ?? false);
  }
  setPointerCapture(e30, t27) {
    t27 ? this._setPointerCaptureSafe(e30.pointerId) : (this._releasePointerCaptureSafe(e30.pointerId), this._activePointerCaptures.delete(e30.pointerId));
  }
  _updateTouchAction() {
    this._element.classList.remove(this._browserTouchPanningEnabled ? h9.touchNone : h9.touchPan), this._element.classList.add(this._browserTouchPanningEnabled ? h9.touchPan : h9.touchNone);
  }
  _updateTouchEventHandling() {
    this._browserTouchPanningEnabled ? this._element.addEventListener("touchmove", this._preventMultiTouchPanning) : this._element.removeEventListener("touchmove", this._preventMultiTouchPanning);
  }
  _removeTouchAction() {
    this._element.classList.remove(h9.touchNone), this._element.classList.remove(h9.touchPan), this._element.removeEventListener("touchmove", this._preventMultiTouchPanning);
  }
  _setPointerCaptureSafe(e30) {
    try {
      this._element.setPointerCapture(e30), this._activePointerCaptures.add(e30);
    } catch {
    }
  }
  _releasePointerCaptureSafe(e30) {
    try {
      if (this._element.hasPointerCapture && !this._element.hasPointerCapture(e30)) return;
      this._element.releasePointerCapture(e30);
    } catch (t27) {
    }
  }
  _updateNormalizedPointerLikeEvent(e30, t27) {
    const i30 = i11(this._element, e30);
    return _l.test.disableSubpixelCoordinates && (i30.x = Math.round(i30.x), i30.y = Math.round(i30.y)), t27.x = i30.x, t27.y = i30.y, t27;
  }
  _handleKey(e30, t27) {
    const { key: n34 } = t27;
    n34 && "key-up" === e30 && this._keyDownState.delete(n34);
    const i30 = { native: t27, key: n34, repeat: !!n34 && this._keyDownState.has(n34) };
    n34 && "key-down" === e30 && this._keyDownState.add(i30.key), this._callback(e30, i30);
  }
  _handlePointer(e30, t27) {
    const n34 = this._updateNormalizedPointerLikeEvent(t27, { native: t27, x: 0, y: 0, pointerType: t27.pointerType, button: t27.button, buttons: t27.buttons, eventId: this._eventId++ });
    this._callback(e30, n34);
  }
  _handlePointerPreventDefault(e30, t27) {
    const n34 = this._updateNormalizedPointerLikeEvent(t27, { native: t27, x: 0, y: 0, pointerType: t27.pointerType, button: t27.button, buttons: t27.buttons, eventId: this._eventId++ });
    t27.preventDefault(), this._callback(e30, n34);
  }
  _getDeltaFromTrackpadOrMouseWheel(e30) {
    return e30.shiftKey && has("mac") && 0 === e30.deltaY ? e30.deltaX : e30.deltaY;
  }
  _handleMouseWheel(e30, t27) {
    let n34 = this._getDeltaFromTrackpadOrMouseWheel(t27);
    switch (t27.deltaMode) {
      case 0:
        i25 && (n34 = n34 / document.documentElement.clientHeight * 600);
        break;
      case 1:
        n34 *= 30;
        break;
      case 2:
        n34 *= 900;
    }
    i25 ? n34 *= 0.7 : a19 || s23 ? n34 *= 0.6 : o19 && (n34 *= 1.375);
    const r29 = 100, h17 = Math.abs(n34);
    if (h17 > r29) {
      n34 = n34 / h17 * 200 / (1 + Math.exp(-0.02 * (h17 - r29)));
    }
    const l24 = this._updateNormalizedPointerLikeEvent(t27, { native: t27, x: 0, y: 0, deltaY: n34 });
    this._callback(e30, l24);
  }
  _handlePointerCaptureLost(e30, t27) {
    this._activePointerCaptures.delete(t27.pointerId), this._handleDefault(e30, t27);
  }
  _handleDefault(e30, t27) {
    const n34 = { native: t27 };
    t27.preventDefault(), this._callback(e30, n34);
  }
  _preventAltKeyDefault(e30) {
    "Alt" === e30.key && e30.preventDefault();
  }
  _preventMultiTouchPanning(e30) {
    e30.touches.length > 1 && e30.preventDefault();
  }
};
_l.test = { disableSubpixelCoordinates: false };
var l17 = _l;
var c16 = { "key-down": "keydown", "key-up": "keyup", "pointer-down": "pointerdown", "pointer-up": "pointerup", "pointer-move": "pointermove", "mouse-wheel": "wheel", "pointer-capture-got": "gotpointercapture", "pointer-capture-lost": "lostpointercapture", "context-menu": "contextmenu", "pointer-enter": "pointerenter", "pointer-leave": "pointerleave", "pointer-cancel": "pointercancel", focus: "focus", blur: "blur" };

// node_modules/@arcgis/core/views/input/handlers/PreventContextMenu.js
var e22 = class extends t8 {
  constructor() {
    super(true), this.registerIncoming("context-menu", (t27) => t27.data.native.preventDefault());
  }
};

// node_modules/@arcgis/core/views/input/recognizers/support.js
var t18 = () => ({ maximumClickDelay: 300 });
var n26 = (e30 = {}) => ({ ...t18(), movementUntilMouseDrag: 1.5, movementUntilPenDrag: 6, movementUntilTouchDrag: 6, holdDelay: 500, ...e30 });
var r20 = (e30 = {}) => ({ ...t18(), maximumDoubleClickDistance: 10, maximumDoubleTouchDistance: 35, maximumDoubleClickDelay: 250, maximumDoubleTouchDelay: 350, ...e30 });
function o20(e30, t27) {
  return Math.abs(t27.x - e30.x) + Math.abs(t27.y - e30.y);
}
function c17(e30, t27) {
  const n34 = t27.x - e30.x, r29 = t27.y - e30.y;
  return Math.sqrt(n34 * n34 + r29 * r29);
}
function i26(t27, n34) {
  if (n34 ? (n34.radius = 0, n34.center.x = 0, n34.center.y = 0) : n34 = { radius: 0, center: i4() }, 0 === t27.length) return n34;
  if (1 === t27.length) return n34.center.x = t27[0].x, n34.center.y = t27[0].y, n34;
  if (2 === t27.length) {
    const [e30, r30] = t27, [o31, c28] = [r30.x - e30.x, r30.y - e30.y];
    return n34.radius = Math.sqrt(o31 * o31 + c28 * c28) / 2, n34.center.x = (e30.x + r30.x) / 2, n34.center.y = (e30.y + r30.y) / 2, n34;
  }
  let r29 = 0, o30 = 0;
  for (let e30 = 0; e30 < t27.length; e30++) r29 += t27[e30].x, o30 += t27[e30].y;
  r29 /= t27.length, o30 /= t27.length;
  const c27 = t27.map((e30) => e30.x - r29), i30 = t27.map((e30) => e30.y - o30);
  let u19 = 0, a31 = 0, l24 = 0, m27 = 0, s35 = 0, x3 = 0, y12 = 0;
  for (let e30 = 0; e30 < c27.length; e30++) {
    const t28 = c27[e30], n35 = i30[e30], r30 = t28 * t28, o31 = n35 * n35;
    u19 += r30, a31 += o31, l24 += t28 * n35, m27 += r30 * t28, s35 += o31 * n35, x3 += t28 * o31, y12 += n35 * r30;
  }
  const h17 = 0.5 * (m27 + x3), D4 = 0.5 * (s35 + y12), g15 = u19 * a31 - l24 * l24, f18 = (h17 * a31 - D4 * l24) / g15, p27 = (u19 * D4 - l24 * h17) / g15, b12 = i4(f18 + r29, p27 + o30);
  return { radius: Math.sqrt(f18 * f18 + p27 * p27 + (u19 + a31) / t27.length), center: b12 };
}
function u11(e30) {
  const { native: t27 } = e30, { pointerId: n34, button: r29, pointerType: o30 } = t27;
  return "mouse" === o30 ? `${n34}:${r29}` : `${o30}`;
}

// node_modules/@arcgis/core/views/input/recognizers/DoubleTapDrag.js
var p14 = class extends t8 {
  constructor(e30 = {}, a31 = o3) {
    super(false), this._clock = a31, this._doubleTapDragReady = false, this._doubleTapDragActive = false, this._dragStartCenter = i4(0, 0), this._pointerState = /* @__PURE__ */ new Map(), this._parameters = r20(e30), this._doubleTapDrag = this.registerOutgoing("double-tap-drag"), this._dragEventSeparator = new t13({ start: (t27, e31) => this._dragStart(t27, e31), update: (t27, e31) => this._dragUpdate(e31), end: (t27, e31) => this._dragEnd(e31) }), this.registerIncoming("drag", (t27) => this._dragEventSeparator.handle(t27)), this.registerIncoming("pointer-down", (t27) => this._handlePointerDown(t27)), this.registerIncoming("pointer-up", () => this._handlePointerUp());
  }
  onUninstall() {
    this._pointerState.forEach((t27) => {
      t27.doubleTapTimeout = l(t27.doubleTapTimeout);
    });
  }
  get hasPendingInputs() {
    for (const t27 of this._pointerState.values()) if (null != t27.doubleTapTimeout) return true;
    return false;
  }
  _clearPointerDown(t27) {
    const r29 = this._pointerState.get(t27);
    r29 && (r29.doubleTapTimeout = l(r29.doubleTapTimeout), this._pointerState.delete(t27), this.refreshHasPendingInputs());
  }
  _dragStart(t27, e30) {
    if (!this._doubleTapDragReady || 1 !== t27) return;
    this._doubleTapDragReady = false, this._doubleTapDragActive = true;
    const { data: i30, modifiers: a31 } = e30, { center: o30 } = i30;
    this._dragStartCenter = o30;
    const n34 = d13("begin", i4(0, 0), i30);
    this._doubleTapDrag.emit(n34, void 0, a31), e30.stopPropagation();
  }
  _dragUpdate(t27) {
    if (!this._doubleTapDragActive) return;
    const { data: e30, modifiers: i30 } = t27, { center: a31 } = e30, o30 = d13("update", i4(a31.x - this._dragStartCenter.x, a31.y - this._dragStartCenter.y), e30);
    this._doubleTapDrag.emit(o30, void 0, i30), t27.stopPropagation();
  }
  _dragEnd(t27) {
    if (!this._doubleTapDragActive) return;
    const { data: e30, modifiers: i30 } = t27, { center: a31 } = e30, o30 = d13("end", i4(a31.x - this._dragStartCenter.x, a31.y - this._dragStartCenter.y), e30);
    this._doubleTapDrag.emit(o30, void 0, i30), this._doubleTapDragActive = false, t27.stopPropagation();
  }
  _handlePointerDown(t27) {
    const { data: e30 } = t27, r29 = u11(e30), i30 = this._pointerState.get(r29), { pointerType: a31 } = e30.native;
    if (i30) {
      const o30 = "touch" === a31 ? this._parameters.maximumDoubleTouchDistance : this._parameters.maximumDoubleClickDistance;
      this._clearPointerDown(r29), o20(i30.event.data, e30) > o30 ? this._storePointerDown(t27) : this._doubleTapDragReady = true;
    } else this._storePointerDown(t27);
  }
  _handlePointerUp() {
    this._doubleTapDragReady = false;
  }
  _storePointerDown(t27) {
    const { data: e30 } = t27, { pointerType: r29 } = e30.native, i30 = u11(e30), a31 = "touch" === r29 ? this._parameters.maximumDoubleTouchDelay : this._parameters.maximumDoubleClickDelay, o30 = this._clock.setTimeout(() => this._clearPointerDown(i30), a31);
    this._pointerState.set(i30, { event: t27, doubleTapTimeout: o30 }), this.refreshHasPendingInputs();
  }
};
function d13(t27, e30, r29) {
  const { button: i30, buttons: a31, pointer: o30, pointers: n34, pointerType: s35, timestamp: p27 } = r29;
  return { action: t27, delta: e30, button: i30, buttons: a31, pointer: o30, pointers: n34, pointerType: s35, timestamp: p27 };
}

// node_modules/@arcgis/core/views/input/recognizers/Drag.js
var s24 = class extends t8 {
  constructor(t27) {
    super(false), this._navigationTouch = t27, this._startStateModifiers = /* @__PURE__ */ new Set(), this._activePointerMap = /* @__PURE__ */ new Map(), this._isDragging = false, this._isCurrentDragSuppressed = false, this._drag = this.registerOutgoing("drag"), this.registerIncoming("pointer-drag", this._handlePointerDrag.bind(this)), this.registerIncoming("pointer-up", this._handlePointerUpAndPointerLost.bind(this)), this.registerIncoming("pointer-capture-lost", this._handlePointerUpAndPointerLost.bind(this)), this.registerIncoming("pointer-cancel", this._handlePointerUpAndPointerLost.bind(this));
  }
  _createPayload(t27, e30, i30, n34) {
    return { action: t27, pointerType: this._pointerType, button: this._mouseButton, buttons: e30.buttons, timestamp: n34, pointers: o21(this._activePointerMap), pointer: e30, angle: i30.angle, radius: i30.radius, center: i30.center };
  }
  _addPointer(t27) {
    const e30 = t27.native.pointerId, i30 = a20(this._activePointerMap).angle, n34 = { event: t27, initialAngle: 0, lastAngle: 0 };
    this._activePointerMap.set(e30, n34);
    const s35 = h10(n34, r21(this._activePointerMap));
    n34.initialAngle = s35, n34.lastAngle = s35, this._updatePointerAngles(i30);
  }
  _updatePointer(t27) {
    if (t27 && null == t27.x && null == t27.y) return;
    const e30 = t27.native.pointerId, i30 = this._activePointerMap.get(e30);
    i30 ? i30.event = t27 : this._addPointer(t27);
  }
  _removePointer(t27) {
    const e30 = a20(this._activePointerMap).angle;
    this._activePointerMap.delete(t27), this._updatePointerAngles(e30);
  }
  _updatePointerAngles(t27) {
    const e30 = a20(this._activePointerMap);
    this._activePointerMap.forEach((i30) => {
      i30.initialAngle = h10(i30, e30) - t27, i30.lastAngle = h10(i30, e30) - t27;
    });
  }
  _emitEvent(t27, e30, i30) {
    const n34 = a20(this._activePointerMap);
    this._drag.emit(this._createPayload(t27, e30, n34, i30), void 0, this._startStateModifiers);
  }
  _handlePointerUpAndPointerLost(t27) {
    const i30 = t27.data.native.pointerId, n34 = n2(t27.timestamp);
    this._activePointerMap.get(i30) && (1 === this._activePointerMap.size ? (this._updatePointer(t27.data), !this._isCurrentDragSuppressed && this._emitEvent("end", t27.data, n34), this._isDragging = false, this._isCurrentDragSuppressed = false, this._removePointer(i30)) : (this._removePointer(i30), this._emitEvent("removed", t27.data, n2(t27.timestamp))));
  }
  _handlePointerDrag(t27) {
    const i30 = t27.data, n34 = i30.currentEvent, s35 = n2(t27.timestamp);
    switch (i30.action) {
      case "start":
      case "update":
        this._isDragging ? this._activePointerMap.has(n34.native.pointerId) ? (this._updatePointer(n34), !this._isCurrentDragSuppressed && this._emitEvent("update", n34, s35)) : (this._addPointer(n34), this._emitEvent("added", n34, s35), this._isCurrentDragSuppressed = this._isSuppressed) : (this._updatePointer(n34), this._pointerType = t27.data.startEvent.pointerType, this._mouseButton = t27.data.startEvent.button, this._startStateModifiers = t27.modifiers, this._isDragging = true, this._isCurrentDragSuppressed = this._isSuppressed, !this._isCurrentDragSuppressed && this._emitEvent("start", n34, s35));
    }
  }
  get _isSuppressed() {
    return !!this._navigationTouch && !this._navigationTouch.browserTouchPanEnabled && "touch" === this._pointerType && 1 === this._activePointerMap.size;
  }
};
function r21(e30) {
  const i30 = [];
  return e30.forEach((e31) => {
    i30.push(i4(e31.event.x, e31.event.y));
  }), i26(i30);
}
function a20(t27) {
  const e30 = r21(t27);
  let i30 = 0;
  return t27.forEach((t28) => {
    let n34 = h10(t28, e30), s35 = n34 - t28.lastAngle;
    for (; s35 > Math.PI; ) s35 -= 2 * Math.PI;
    for (; s35 < -Math.PI; ) s35 += 2 * Math.PI;
    n34 = t28.lastAngle + s35, t28.lastAngle = n34;
    const r29 = n34 - t28.initialAngle;
    i30 += r29;
  }), i30 /= t27.size || 1, { angle: i30, radius: e30.radius, center: e30.center };
}
function o21(t27) {
  const e30 = /* @__PURE__ */ new Map();
  return t27.forEach((t28, i30) => e30.set(i30, t28.event)), e30;
}
function h10(t27, e30) {
  const i30 = t27.event, n34 = i30.x - e30.center.x, s35 = i30.y - e30.center.y;
  return Math.atan2(s35, n34);
}

// node_modules/@arcgis/core/views/input/recognizers/ImmediateDoubleClick.js
var s25 = class extends t8 {
  constructor(e30 = {}, a31 = o3) {
    super(false), this._clock = a31, this._pointerState = /* @__PURE__ */ new Map(), this._parameters = r20(e30), this._immediateDoubleClick = this.registerOutgoing("immediate-double-click"), this.registerIncoming("pointer-down", this._handlePointerDown.bind(this)), this.registerIncoming("pointer-up", this._handlePointerUp.bind(this));
  }
  onUninstall() {
    this._pointerState.forEach((t27) => {
      t27.immediateDoubleClick && t27.immediateDoubleClick.timeoutHandle.remove();
    }), super.onUninstall();
  }
  _handlePointerDown(t27) {
    const e30 = t27.data, i30 = u11(e30);
    if (!this._pointerState.has(i30)) {
      const t28 = { downButton: e30.native.button, x: e30.x, y: e30.y, immediateDoubleClick: null };
      this._pointerState.set(i30, t28), this.startCapturingPointer(e30.native);
    }
  }
  _handlePointerUp(t27) {
    const e30 = t27.data, i30 = u11(e30), s35 = this._pointerState.get(i30);
    if (s35 && s35.downButton === e30.native.button) {
      const i31 = s35.immediateDoubleClick, a31 = "touch" === t27.data.native.pointerType ? this._parameters.maximumDoubleTouchDistance : this._parameters.maximumDoubleClickDistance;
      i31 ? (i31.timeoutHandle.remove(), o20(i31, t27.data) > a31 ? this._startImmediateDoubleClick(t27, s35) : (this._immediateDoubleClick.emit(t27.data, void 0, i31.modifiers), this._removeState(e30))) : o20(s35, t27.data) > a31 ? this._removeState(e30) : this._startImmediateDoubleClick(t27, s35);
    }
  }
  _startImmediateDoubleClick(t27, e30) {
    const i30 = "touch" === t27.data.native.pointerType ? this._parameters.maximumDoubleTouchDelay : this._parameters.maximumDoubleClickDelay;
    e30.immediateDoubleClick = { x: t27.data.x, y: t27.data.y, modifiers: t27.modifiers, timeoutHandle: this._clock.setTimeout(() => this._removeState(t27.data), i30) };
  }
  _removeState(t27) {
    const e30 = u11(t27);
    this._pointerState.delete(e30), this.stopCapturingPointer(t27.native), this.refreshHasPendingInputs();
  }
};

// node_modules/@arcgis/core/views/input/recognizers/PointerClickHoldAndDrag.js
var r22 = class extends t8 {
  constructor(e30 = {}, i30 = o3) {
    super(false), this._clock = i30, this._pointerState = /* @__PURE__ */ new Map(), this._parameters = n26(e30), this._pointerDrag = this.registerOutgoing("pointer-drag"), this._immediateClick = this.registerOutgoing("immediate-click"), this._pointerHold = this.registerOutgoing("hold"), this.registerIncoming("pointer-down", (t27) => this._handlePointerDown(t27)), this.registerIncoming("pointer-up", (t27) => this._handlePointerLoss(t27, "pointer-up")), this.registerIncoming("pointer-capture-lost", (t27) => this._handlePointerLoss(t27, "pointer-capture-lost")), this.registerIncoming("pointer-cancel", (t27) => this._handlePointerLoss(t27, "pointer-cancel")), this._moveHandle = this.registerIncoming("pointer-move", (t27) => this._handlePointerMove(t27)), this._moveHandle.pause();
  }
  onUninstall() {
    this._pointerState.forEach((t27) => {
      t27.holdTimeout = l(t27.holdTimeout);
    }), super.onUninstall();
  }
  _handlePointerDown(t27) {
    const e30 = t27.data, i30 = e30.native.pointerId;
    let o30 = null;
    0 === this._pointerState.size && (o30 = this._clock.setTimeout(() => {
      const e31 = this._pointerState.get(i30);
      if (e31) {
        if (!e31.isDragging) {
          const i31 = e31.previousEvent;
          this._pointerHold.emit(i31, void 0, t27.modifiers), e31.holdEmitted = true;
        }
        e31.holdTimeout = null;
      }
    }, this._parameters.holdDelay));
    const n34 = { startEvent: e30, previousEvent: e30, startTimestamp: t27.timestamp, isDragging: false, downButton: e30.native.button, holdTimeout: o30, modifiers: /* @__PURE__ */ new Set() };
    this._pointerState.set(i30, n34), this.startCapturingPointer(e30.native), this._moveHandle.resume(), this._pointerState.size > 1 && this._startDragging(t27);
  }
  _handlePointerMove(t27) {
    const e30 = t27.data, i30 = e30.native.pointerId, o30 = this._pointerState.get(i30);
    if (o30) {
      if (o30.isDragging) this._pointerDrag.emit(s26("update", o30, e30), void 0, o30.modifiers);
      else {
        c17(e30, o30.startEvent) > this._getDragThreshold(e30.native.pointerType) && this._startDragging(t27);
      }
      o30.previousEvent = e30;
    }
  }
  _getDragThreshold(t27) {
    switch (t27) {
      case "touch":
        return this._parameters.movementUntilTouchDrag;
      case "pen":
        return this._parameters.movementUntilPenDrag;
      default:
        return this._parameters.movementUntilMouseDrag;
    }
  }
  _startDragging(t27) {
    const e30 = t27.data, i30 = e30.native.pointerId;
    this._pointerState.forEach((o30) => {
      null != o30.holdTimeout && (o30.holdTimeout.remove(), o30.holdTimeout = null), o30.isDragging || (o30.modifiers = t27.modifiers, o30.isDragging = true, i30 === o30.startEvent.native.pointerId ? this._pointerDrag.emit(s26("start", o30, e30)) : this._pointerDrag.emit(s26("start", o30, o30.previousEvent), t27.timestamp));
    });
  }
  _handlePointerLoss(t27, e30) {
    const i30 = t27.data, o30 = i30.native.pointerId, n34 = this._pointerState.get(o30);
    if (n34) {
      if (null != n34.holdTimeout && (n34.holdTimeout.remove(), n34.holdTimeout = null), n34.isDragging) this._pointerDrag.emit(s26("end", n34, "pointer-up" === e30 ? i30 : n34.previousEvent), void 0, n34.modifiers);
      else if ("pointer-up" === e30 && n34.downButton === i30.native.button) {
        t27.timestamp - n34.startTimestamp <= this._parameters.maximumClickDelay && !n34.holdEmitted && this._immediateClick.emit(i30);
      }
      this._pointerState.delete(o30), this.stopCapturingPointer(i30.native), 0 === this._pointerState.size && this._moveHandle.pause();
    }
  }
};
function s26(t27, e30, i30) {
  return { action: t27, startEvent: e30.startEvent, previousEvent: e30.previousEvent, currentEvent: i30 };
}

// node_modules/@arcgis/core/views/input/recognizers/SingleAndDoubleClick.js
var s27 = class extends t8 {
  constructor(e30 = {}, i30 = o3) {
    super(false), this._clock = i30, this._pointerState = /* @__PURE__ */ new Map(), this._parameters = r20(e30), this._click = this.registerOutgoing("click"), this._doubleClick = this.registerOutgoing("double-click"), this.registerIncoming("immediate-click", (t27) => this._handleImmediateClick(t27)), this.registerIncoming("pointer-down", (t27) => this._handlePointerDown(t27));
  }
  onUninstall() {
    this._pointerState.forEach((t27) => t27.doubleClickTimer = l(t27.doubleClickTimer));
  }
  get hasPendingInputs() {
    for (const t27 of this._pointerState.values()) if (null != t27.doubleClickTimer) return true;
    return false;
  }
  _clearDoubleClickTimer(t27, i30) {
    const o30 = this._pointerState.get(t27);
    o30 && (o30.doubleClickTimer = l(o30.doubleClickTimer), i30 && this._click.emit(o30.event.data, void 0, o30.event.modifiers), this._pointerState.delete(t27), this.refreshHasPendingInputs());
  }
  _doubleClickTimeoutExceeded(t27) {
    const e30 = this._pointerState.get(t27);
    1 === e30.pointerDownCount && this._click.emit(e30.event.data, void 0, e30.event.modifiers), e30.doubleClickTimer = null, this._pointerState.delete(t27), this.refreshHasPendingInputs();
  }
  _handleImmediateClick(t27) {
    const e30 = t27.data, { pointerType: i30 } = e30.native, o30 = a21(e30);
    if (!this._pointerState.has(o30)) return void this._startClick(t27);
    const r29 = this._pointerState.get(o30), { data: s35, modifiers: l24 } = r29.event, c27 = "touch" === i30 ? this._parameters.maximumDoubleTouchDistance : this._parameters.maximumDoubleClickDistance;
    o20(s35, e30) > c27 ? (this._clearDoubleClickTimer(o30, true), this._startClick(t27)) : (this._clearDoubleClickTimer(o30, false), 2 === r29.pointerDownCount && this._doubleClick.emit(s35, void 0, l24));
  }
  _handlePointerDown(t27) {
    const e30 = u11(t27.data), i30 = this._pointerState.get(e30);
    i30 && (i30.pointerDownCount += 1);
  }
  _startClick(t27) {
    const { data: e30 } = t27, { native: { pointerType: i30 } } = e30, o30 = u11(e30), n34 = "touch" === i30 ? this._parameters.maximumDoubleTouchDelay : this._parameters.maximumDoubleClickDelay, s35 = this._clock.setTimeout(() => this._doubleClickTimeoutExceeded(o30), n34), a31 = 1;
    this._pointerState.set(o30, { event: t27, doubleClickTimer: s35, pointerDownCount: a31 }), this.refreshHasPendingInputs();
  }
};
function a21(t27) {
  const { pointerId: e30, pointerType: i30, button: o30 } = t27.native;
  return "mouse" === i30 ? `${e30}:${o30}` : `${i30}`;
}

// node_modules/@arcgis/core/views/2d/input/MapViewInputManager.js
var T4 = { counter: "Control", pan: { left: "ArrowLeft", right: "ArrowRight", up: "ArrowUp", down: "ArrowDown" }, zoom: { zoomIn: ["=", "+"], zoomOut: ["-", "_"] }, rotate: { clockwise: ["a", "A"], counterClockwise: ["d", "D"], reset: ["n", "N"] } };
var C4 = Symbol("handles");
var E3 = class extends b {
  initialize() {
    const e30 = () => this.view?.ready;
    this.addHandles([f(() => !e30(), () => this._disconnect()), f(e30, () => this._connect())]);
  }
  destroy() {
    this._disconnect();
  }
  get latestPointerInfo() {
    return this._inputManager?.latestPointerInfo;
  }
  get multiTouchActive() {
    return this._inputManager?.multiTouchActive ?? false;
  }
  isModifierKeyDown(e30) {
    return this._inputManager?.isModifierKeyDown(e30) ?? false;
  }
  _disconnect() {
    this.view.viewEvents.disconnect(), this.removeHandles(C4), this._inputManager = u(this._inputManager);
  }
  _connect() {
    const e30 = this.view.surface, t27 = new l17(e30, this.view.input), o30 = [new s25(), new r22(), new s27(), new s24(this.view.navigation), new p14()], r29 = new u6({ eventSource: t27, recognizers: o30 }), a31 = new n23(this.view, ["primary"]), c27 = new o16(this.view, ["secondary"]);
    r29.installHandlers("prevent-context-menu", [new e22()], f5.INTERNAL), r29.installHandlers("navigation", [new a17(this.view), new m17(this.view), new o17(this.view), new a15(this.view), new a15(this.view, [T4.counter]), a31, new e20(this.view, T4.pan), new t15(this.view, T4.zoom), new t14(this.view, T4.rotate), c27, new e19(this.view, "touch")], f5.INTERNAL), this.view.viewEvents.connect(r29), this._source = t27, this._inputManager = r29, this.addHandles([l5(() => this.view?.navigation?.browserTouchPanEnabled, (e31) => {
      this._source && (this._source.browserTouchPanningEnabled = !e31);
    }, h), l5(() => {
      const { actionMap: e31 } = this.view.navigation;
      return { panActions: n22("pan", e31), rotateActions: n22("rotate", e31) };
    }, ({ panActions: e31, rotateActions: t28 }) => {
      a31.pointerActions = e31, c27.pointerActions = t28;
    }, w2)], C4);
  }
  get test() {
  }
};
__decorate([m2()], E3.prototype, "view", void 0), __decorate([m2()], E3.prototype, "latestPointerInfo", null), __decorate([m2()], E3.prototype, "multiTouchActive", null), E3 = __decorate([a2("esri.views.2d.input.MapViewInputManager")], E3);
var k2 = E3;

// node_modules/@arcgis/core/views/Viewport2DMixin.js
var a22 = (a31) => {
  const p27 = a31;
  let g15 = class extends p27 {
    constructor(...t27) {
      super(...t27), this.goToManager = new h8({ view: this }), this.animationsEnabled = true, this.inputManager = new k2({ view: this }), this.addHandles([this.on("resize", (t28) => this.stateManager.resize(t28.width, t28.height))]);
    }
    get interacting() {
      return this.navigating;
    }
    get stationary() {
      return !this.animation && !this.navigating && !this.resizing && this.stationaryManager.stationary;
    }
    on(t27, r29, e30, o30) {
      const i30 = this.viewEvents.on(t27, r29, e30, o30);
      return i30 || super.on(t27, r29);
    }
    hasEventListener(t27) {
      return super.hasEventListener(t27) || this.viewEvents.hasHandler(t27);
    }
    goTo(t27, r29) {
      return this.goToManager.goTo(t27, r29);
    }
    toMap(t27) {
      if (!this.ready) return null;
      const r29 = o12(t27) ? r11(this, t27) : t27;
      return this.stateManager.toMap(r29);
    }
  };
  return __decorate([m2()], g15.prototype, "goToManager", void 0), __decorate([m2({ readOnly: true })], g15.prototype, "interacting", null), __decorate([m2()], g15.prototype, "stationary", null), __decorate([m2()], g15.prototype, "animationsEnabled", void 0), __decorate([m2({ readOnly: true })], g15.prototype, "inputManager", void 0), g15 = __decorate([a2("esri.views.Viewport2DMixin")], g15), g15;
};

// node_modules/@arcgis/core/views/2d/pointToPoint/Camera.js
var a23 = class {
  constructor(e30) {
    this._view = e30, this.viewpoint = new m9({ targetGeometry: new _(), scale: 0, rotation: 0 });
  }
  get view() {
    return this._view;
  }
  get size() {
    const [t27, e30] = this._view.size;
    return Math.sqrt(t27 * t27 + e30 * e30);
  }
  get scale() {
    return this.viewpoint.scale;
  }
  get rotation() {
    return this.viewpoint.rotation;
  }
  get center() {
    return this.viewpoint.targetGeometry;
  }
  get scaleToResolutionFactor() {
    return at(this.center.spatialReference);
  }
  pixelsPerPanAtZoom(t27) {
    return 1 / (t27 * this.scaleToResolutionFactor);
  }
  zoomAtPixelsPerPan(t27) {
    return 1 / (t27 * this.scaleToResolutionFactor);
  }
  pixelsPerRotate() {
    return this.size / 2;
  }
  compareTo(t27, o30) {
    o30.pan = e7(this.center, t27.center);
    let i30 = Math.abs(t27.rotation - this.rotation);
    i30 = i30 >= 180 ? 360 - i30 : i30, o30.rotate = s7(i30), o30.sourceZoom = this.scale, o30.targetZoom = t27.scale;
  }
  interpolate(t27, e30, i30) {
    const { pan: r29, rotate: s35, zoom: n34, zoomOffset: a31 } = i30, { center: c27 } = this;
    c27.spatialReference = t27.center.spatialReference, c27.x = o6(t27.center.x, e30.center.x, r29), c27.y = o6(t27.center.y, e30.center.y, r29), this.viewpoint.scale = o6(t27.scale, e30.scale + a31, n34);
    let p27 = t27.rotation;
    const l24 = e30.rotation;
    Math.abs(l24 - p27) >= 180 && (p27 += 360 * (p27 < l24 ? 1 : -1)), this.viewpoint.rotation = o6(p27, l24, s35);
  }
  copyFrom(t27) {
    Z(this.viewpoint, t27.viewpoint), this._view = t27.view;
  }
};

// node_modules/@arcgis/core/views/animation/easing.js
var u12 = (t27) => t27;
var i27 = (t27) => t27 * t27;
var o22 = (t27) => 1 - i27(1 - t27);
var n27 = (t27) => t27 < 0.5 ? i27(2 * t27) / 2 : (o22(2 * (t27 - 0.5)) + 1) / 2;
var c18 = (t27) => t27 * t27 * t27;
var a24 = (t27) => 1 - c18(1 - t27);
var s28 = (t27) => t27 < 0.5 ? c18(2 * t27) / 2 : (a24(2 * (t27 - 0.5)) + 1) / 2;
var q = (t27) => t27 * t27 * t27 * t27;
var e23 = (t27) => 1 - q(1 - t27);
var r23 = (t27) => t27 < 0.5 ? q(2 * t27) / 2 : (e23(2 * (t27 - 0.5)) + 1) / 2;
var d14 = (t27) => t27 * t27 * t27 * t27 * t27;
var b9 = (t27) => 1 - d14(1 - t27);
var p15 = (t27) => t27 < 0.5 ? d14(2 * t27) / 2 : (b9(2 * (t27 - 0.5)) + 1) / 2;
var x = (t27) => 1 - Math.cos(t27 * Math.PI / 2);
var h11 = (t27) => 1 - x(1 - t27);
var M4 = (t27) => t27 < 0.5 ? x(2 * t27) / 2 : (h11(2 * (t27 - 0.5)) + 1) / 2;
var f12 = (t27) => 2 ** (10 * (t27 - 1));
var I3 = (t27) => 1 - f12(1 - t27);
var m18 = (t27) => t27 < 0.5 ? f12(2 * t27) / 2 : (I3(2 * (t27 - 0.5)) + 1) / 2;
var O3 = (t27) => -(Math.sqrt(1 - t27 * t27) - 1);
var j5 = (t27) => 1 - O3(1 - t27);
var l18 = (t27) => t27 < 0.5 ? O3(2 * t27) / 2 : (j5(2 * (t27 - 0.5)) + 1) / 2;
function z4(t27) {
  const u19 = 2 * (t27 - Math.sqrt((t27 - 1) * t27)), i30 = u19 / 2 / t27;
  return (o30) => o30 < i30 ? t27 * o30 * o30 : u19 * o30 - u19 + 1;
}
function B3(t27, u19) {
  return (i30, o30) => i30 < u19 ? u19 * t27(i30 / u19, o30) : 1 - t27((1 - i30) / (1 - u19), o30) * (1 - u19);
}
var P3 = B3(z4(1), 1);
var g10 = B3(z4(1), 0);
var k3 = B3(z4(1), 0.5);
var v4 = B3(z4(2), 1);
var w5 = B3(z4(2), 0);
var y8 = B3(z4(2), 0.5);
var A3 = B3(z4(3), 1);
var C5 = B3(z4(3), 0);
var D2 = B3(z4(3), 0.5);
var E4 = B3(z4(4), 1);
var F3 = B3(z4(4), 0);
var G3 = B3(z4(4), 0.5);
var H2 = { linear: u12, "in-quad": i27, "out-quad": o22, "in-out-quad": n27, "in-coast-quad": P3, "out-coast-quad": g10, "in-out-coast-quad": k3, "in-cubic": c18, "out-cubic": a24, "in-out-cubic": s28, "in-coast-cubic": v4, "out-coast-cubic": w5, "in-out-coast-cubic": y8, "in-quart": q, "out-quart": e23, "in-out-quart": r23, "in-coast-quart": A3, "out-coast-quart": C5, "in-out-coast-quart": D2, "in-quint": d14, "out-quint": b9, "in-out-quint": p15, "in-coast-quint": E4, "out-coast-quint": F3, "in-out-coast-quint": G3, "in-sine": x, "out-sine": h11, "in-out-sine": M4, "in-expo": f12, "out-expo": I3, "in-out-expo": m18, "in-circ": O3, "out-circ": j5, "in-out-circ": l18, "quad-in": i27, "quad-out": o22, "quad-in-out": n27, "quad-in-coast": P3, "quad-out-coast": g10, "quad-in-out-coast": k3, "cubic-in": c18, "cubic-out": a24, "cubic-in-out": s28, "cubic-in-coast": v4, "cubic-out-coast": w5, "cubic-in-out-coast": y8, "quart-in": q, "quart-out": e23, "quart-in-out": r23, "quart-in-coast": A3, "quart-out-coast": C5, "quart-in-out-coast": D2, "quint-in": d14, "quint-out": b9, "quint-in-out": p15, "quint-in-coast": E4, "quint-out-coast": F3, "quint-in-out-coast": G3, "sine-in": x, "sine-out": h11, "sine-in-out": M4, "expo-in": f12, "expo-out": I3, "expo-in-out": m18, "circ-in": O3, "circ-out": j5, "circ-in-out": l18, ease: (u19) => t6.ease(u19), "ease-in": (u19) => t6.easeIn(u19), "ease-out": (u19) => t6.easeOut(u19), "ease-in-out": (u19) => t6.easeInOut(u19) };

// node_modules/@arcgis/core/views/animation/pointToPoint/Camera.js
var t19 = class {
  constructor() {
    this.pan = 0, this.rotate = 0, this.fov = 0, this.sourceZoom = 0, this.targetZoom = 0;
  }
};

// node_modules/@arcgis/core/views/animation/pointToPoint/Settings.js
var o23 = { desiredScreenFlow: 2, minDuration: n2(500), maxDuration: n2(8e3) };
var r24 = { ...o23, maxDuration: n2(4e3) };

// node_modules/@arcgis/core/views/animation/pointToPoint/Definition.js
var r25 = class _r {
  constructor(t27) {
    this._createCamera = t27, this.compared = new t19(), this.segmentStart = 0, this.segmentEnd = 1, this.settings = { desiredScreenFlow: o23.desiredScreenFlow }, this.source = t27(), this.target = t27();
  }
  clone() {
    const t27 = new _r(this._createCamera);
    return t27.copyFrom(this), t27;
  }
  copyFrom(t27) {
    this.update(t27.source, t27.target, t27.settings);
  }
  update(t27, e30, r29) {
    this.source !== t27 && this.source.copyFrom(t27), this.target !== e30 && this.target.copyFrom(e30), this.source.compareTo(this.target, this.compared), this.settings.desiredScreenFlow = r29.desiredScreenFlow ?? o23.desiredScreenFlow, this.desiredPixelFlow = this.settings.desiredScreenFlow * this.target.size, this.halfWindowSize = this.target.size / 2;
  }
  halfWindowPanAtZoom(t27) {
    const e30 = this.target.pixelsPerPanAtZoom(t27);
    return this.halfWindowSize / e30;
  }
  get hasZoom() {
    return Math.abs(this.compared.sourceZoom - this.compared.targetZoom) > 1e-5;
  }
  get hasPan() {
    return this.compared.pan > e8();
  }
  get hasFov() {
    return Math.abs(this.compared.fov) > e8();
  }
  get hasRotate() {
    return this.compared.rotate > e8();
  }
};

// node_modules/@arcgis/core/views/animation/pointToPoint/InterpolateComponents.js
var t20 = class {
  constructor() {
    this.pan = 0, this.rotate = 0, this.zoom = 0, this.fov = 0, this.zoomOffset = 0;
  }
};

// node_modules/@arcgis/core/views/animation/pointToPoint/Path.js
var e24 = class {
  constructor() {
    this.segments = new Array();
  }
  get time() {
    return this.segments.reduce((e30, o30) => t3(e30 + o30.time), t3(0));
  }
  interpolateComponentsAt(t27, e30) {
    t27 = Math.min(Math.max(t27, 0), 1), t27 *= this.time;
    let o30 = 0, s35 = 0;
    const n34 = this.definition, a31 = this.segments.reduce((t28, e31) => t28 || e31.definition.hasZoom, false);
    for (let i30 = 0; i30 < this.segments.length; i30++) {
      const m27 = this.segments[i30], r29 = m27.definition;
      if (t27 <= m27.time || i30 === this.segments.length - 1) {
        if (this.segmentInterpolateComponentsAt(m27, 0 === m27.time ? 0 : t27 / m27.time, e30), n34.hasPan && !isNaN(e30.pan) && isFinite(n34.compared.pan) ? e30.pan = (o30 + r29.compared.pan * e30.pan) / n34.compared.pan : e30.pan = 1, n34.hasRotate && !isNaN(e30.rotate) && isFinite(n34.compared.rotate) ? e30.rotate = (s35 + r29.compared.rotate * e30.rotate) / n34.compared.rotate : e30.rotate = 1, a31 && !isNaN(e30.zoom) && isFinite(r29.compared.targetZoom)) {
          const { sourceZoom: t28, targetZoom: o31 } = r29.compared, s36 = e30.zoom * (o31 - t28) + t28, n35 = this.segments[0].definition.compared.sourceZoom, a32 = this.segments[this.segments.length - 1].definition.compared.targetZoom, i31 = Math.abs(o31 - n35) > Math.abs(t28 - n35) ? o31 : t28;
          e30.zoomOffset = i31 - a32, e30.zoom = (s36 - n35) / (i31 - n35);
        } else e30.zoom = 1;
        return e30;
      }
      t27 -= m27.time, o30 += r29.compared.pan, s35 += r29.compared.rotate;
    }
  }
  segmentInterpolateComponentsAt(t27, e30, o30) {
    t27.interpolateComponentsAt(e30, o30);
  }
};

// node_modules/@arcgis/core/views/animation/pointToPoint/Segment.js
var o24 = class {
  get time() {
    return this._time;
  }
  constructor(t27) {
    t27 && this.update(t27);
  }
  update(t27) {
    t27 && (this.definition ? this.definition.copyFrom(t27) : this.definition = t27.clone()), this._updatePrecomputedVariables(), this._updatePixelFlow();
  }
  _updatePrecomputedVariables() {
    const t27 = this.definition, i30 = t27.compared, o30 = i30.sourceZoom, e30 = i30.targetZoom;
    this._zoomSign = o30 > e30 ? 1 : -1, this._panPixelsAtSource = i30.pan * t27.source.pixelsPerPanAtZoom(o30);
    const n34 = (t27.source.pixelsPerRotate() + t27.target.pixelsPerRotate()) / 2;
    this._rotatePixels = i30.rotate * n34;
  }
  _updatePixelFlow() {
    const t27 = this.definition.compared.sourceZoom, o30 = this.definition.compared.targetZoom, { hasZoom: e30, hasPan: n34, hasRotate: s35 } = this.definition;
    let h17 = 0, a31 = 0;
    e30 && (n34 && (h17 = (o30 / t27 - 1) / (-1 / (this._zoomSign * this.definition.halfWindowSize) * Math.LN2 * this._panPixelsAtSource)), s35 && (a31 = this._zoomSign * (Math.log(t27 / o30) / Math.LN2) * this.definition.halfWindowSize / this._rotatePixels)), this._zoomPixelFlow = 0, this._panPixelFlow = 0, this._rotatePixelFlow = 0;
    const r29 = this.definition.desiredPixelFlow;
    if (e30 && n34 && s35) {
      const t28 = h17 + a31 + h17 * a31;
      this._zoomPixelFlow = h17 * a31 / t28 * r29, this._panPixelFlow = a31 / t28 * r29, this._rotatePixelFlow = h17 / t28 * r29;
    } else if (e30 && n34) {
      const t28 = 1 + h17;
      this._zoomPixelFlow = h17 / t28 * r29, this._panPixelFlow = 1 / t28 * r29;
    } else if (e30 && s35) {
      const t28 = 1 + a31;
      this._zoomPixelFlow = a31 / t28 * r29, this._rotatePixelFlow = 1 / t28 * r29;
    } else if (n34 && s35) {
      const t28 = this._panPixelsAtSource / this._rotatePixels, i30 = 1 + t28;
      this._panPixelFlow = t28 / i30 * r29, this._rotatePixelFlow = 1 / i30 * r29;
    } else n34 ? this._panPixelFlow = r29 : e30 ? this._zoomPixelFlow = r29 : s35 && (this._rotatePixelFlow = r29);
    if (this._time = t3(Math.max(this.rotateTime, this.zoomTime, this.panTime)), this.fovTime > this._time) {
      const t28 = this.fovTime / this._time;
      this._time = this.fovTime, this._zoomPixelFlow /= t28, this._panPixelFlow /= t28, this._rotatePixelFlow /= t28;
    }
  }
  get rotateTime() {
    return this.definition.hasRotate ? t3(this._rotatePixels / this._rotatePixelFlow) : t3(0);
  }
  get zoomTime() {
    return this.definition.hasZoom ? t3(this._zoomSign * (Math.log(this.definition.compared.sourceZoom / this.definition.compared.targetZoom) / Math.LN2) * this.definition.halfWindowSize / this._zoomPixelFlow) : t3(0);
  }
  get fovTime() {
    return this.definition.hasFov ? t3(Math.abs(this.definition.compared.fov) / e25) : t3(0);
  }
  get panTime() {
    if (!this.definition.hasPan) return t3(0);
    if (this.definition.hasZoom) {
      const t27 = -1 / (this._zoomSign * this.definition.halfWindowSize) * Math.LN2, o30 = t27 * this._panPixelsAtSource;
      return t3(Math.log(o30 * (this._zoomPixelFlow / this._panPixelFlow) + 1) / (t27 * this._zoomPixelFlow));
    }
    return t3(this._panPixelsAtSource / this._panPixelFlow);
  }
  _interpolateComponentsZoom(t27) {
    if (0 === t27 || 1 === t27) return t27;
    if (this.definition.hasZoom) {
      const i30 = this.definition.compared.sourceZoom, o30 = this.definition.compared.targetZoom;
      return (i30 * (i30 / o30) ** -t27 - i30) / (o30 - i30);
    }
    return t27;
  }
  _interpolateComponentsFov(t27) {
    if (0 === t27) return this.definition.segmentStart;
    if (1 === t27) return this.definition.segmentEnd;
    if (this.definition.hasFov) {
      const { segmentStart: i30, segmentEnd: o30 } = this.definition;
      return i30 + t27 * (o30 - i30);
    }
    return this.definition.segmentStart;
  }
  _interpolateComponentsPan(t27) {
    if (0 === t27 || 1 === t27) return t27;
    if (this.definition.hasPan && this.definition.hasZoom) {
      const i30 = -1 / (this._zoomSign * this.definition.halfWindowSize) * this._zoomPixelFlow;
      return 1 / this._panPixelsAtSource * (this._panPixelFlow * (2 ** (i30 * t27 * this._time) - 1)) / (i30 * Math.LN2);
    }
    return t27;
  }
  _interpolateComponentsRotate(t27) {
    return t27;
  }
  interpolateComponentsAt(t27, i30) {
    t27 = Math.min(Math.max(t27, 0), 1), i30.zoom = this._interpolateComponentsZoom(t27), i30.pan = this._interpolateComponentsPan(t27), i30.rotate = this._interpolateComponentsRotate(t27), i30.zoomOffset = 0, i30.fov = this._interpolateComponentsFov(t27);
  }
};
var e25 = s7(45);

// node_modules/@arcgis/core/views/animation/pointToPoint/apex/functions.js
function o25(o30, e30, a31) {
  const n34 = e30 - o30.compared.sourceZoom, t27 = o30.halfWindowPanAtZoom(n34);
  return -o30.halfWindowSize * (a31.ascensionFactor * Math.LN2 * o30.compared.pan + t27) * Math.log(o30.compared.sourceZoom / e30) / (o30.desiredPixelFlow * Math.LN2 * t27);
}
function e26(o30, e30, a31) {
  const n34 = 1 / e30, t27 = Math.log(o30.compared.sourceZoom * n34), i30 = 1 / o30.desiredPixelFlow, r29 = 1 / Math.LN2, d21 = e30 - o30.compared.sourceZoom, c27 = 1 / d21, l24 = (a31.ascensionFactor * Math.LN2 * o30.compared.pan + o30.halfWindowPanAtZoom(d21)) / o30.halfWindowPanAtZoom(1);
  return o30.halfWindowSize * n34 * i30 * r29 * c27 * l24 - o30.halfWindowSize * t27 * i30 * r29 * c27 + o30.halfWindowSize * t27 * i30 * r29 * l24 / (d21 * d21);
}
function a25(o30, e30, a31) {
  const n34 = e30 - o30.compared.sourceZoom, t27 = 1 / n34, i30 = 1 / e30, r29 = Math.log(o30.compared.sourceZoom * i30), d21 = (a31.ascensionFactor * Math.LN2 * o30.compared.pan + o30.halfWindowPanAtZoom(n34)) / o30.halfWindowPanAtZoom(1);
  return o30.halfWindowSize * t27 * (-2 * t27 * i30 * d21 + 2 * t27 * r29 + 2 * i30 - 2 * r29 * d21 / (n34 * n34) - d21 / (e30 * e30)) / (o30.desiredPixelFlow * Math.LN2);
}
function n28(o30, e30) {
  return -o30.halfWindowSize * Math.log(o30.compared.sourceZoom / e30) / (o30.desiredPixelFlow * Math.LN2);
}
function t21(o30, e30) {
  return o30.halfWindowSize / (e30 * o30.desiredPixelFlow * Math.LN2);
}
function i28(o30, e30) {
  return -o30.halfWindowSize / (e30 * e30 * o30.desiredPixelFlow * Math.LN2);
}
function r26(o30, e30, a31) {
  return -o30.compared.pan * o30.halfWindowSize * (a31.ascensionFactor + a31.descensionFactor - 1) / (o30.desiredPixelFlow * o30.halfWindowPanAtZoom(e30));
}
function d15(o30, e30, a31) {
  return o30.compared.pan * o30.halfWindowSize * (a31.ascensionFactor + a31.descensionFactor - 1) / (o30.desiredPixelFlow * o30.halfWindowPanAtZoom(e30 * e30));
}
function c19(o30, e30, a31) {
  return -2 * o30.compared.pan * o30.halfWindowSize * (a31.ascensionFactor + a31.descensionFactor - 1) / (o30.desiredPixelFlow * o30.halfWindowPanAtZoom(e30 * e30 * e30));
}
function l19(o30, e30, a31) {
  return o30.halfWindowSize * (-o30.halfWindowPanAtZoom(e30) - a31.descensionFactor * Math.LN2 * o30.compared.pan + o30.halfWindowPanAtZoom(o30.compared.targetZoom)) * Math.log(e30 / o30.compared.targetZoom) / (o30.desiredPixelFlow * Math.LN2 * o30.halfWindowPanAtZoom(-e30 + o30.compared.targetZoom));
}
function m19(o30, e30, a31) {
  const n34 = Math.log(e30 / o30.compared.targetZoom), t27 = 1 / o30.desiredPixelFlow, i30 = 1 / Math.LN2, r29 = -e30 + o30.compared.targetZoom, d21 = 1 / r29, c27 = (-o30.halfWindowPanAtZoom(e30) - a31.descensionFactor * Math.LN2 * o30.compared.pan + o30.halfWindowPanAtZoom(o30.compared.targetZoom)) / o30.halfWindowPanAtZoom(1);
  return -o30.halfWindowSize * n34 * t27 * i30 * d21 + o30.halfWindowSize * n34 * t27 * i30 * c27 / (r29 * r29) + o30.halfWindowSize * t27 * i30 * d21 * c27 / e30;
}
function h12(o30, e30, a31) {
  const n34 = e30 - o30.compared.targetZoom, t27 = 1 / n34, i30 = 1 / e30, r29 = Math.log(e30 / o30.compared.targetZoom), d21 = (o30.halfWindowPanAtZoom(e30) + a31.descensionFactor * Math.LN2 * o30.compared.pan - o30.halfWindowPanAtZoom(o30.compared.targetZoom)) / o30.halfWindowPanAtZoom(1);
  return o30.halfWindowSize * t27 * (-2 * t27 * i30 * d21 - 2 * t27 * r29 + 2 * i30 + 2 * r29 * d21 / (n34 * n34) - d21 / (e30 * e30)) / (o30.desiredPixelFlow * Math.LN2);
}
function s29(o30, e30) {
  return o30.halfWindowSize * Math.log(e30 / o30.compared.targetZoom) / (o30.desiredPixelFlow * Math.LN2);
}
function f13(o30, e30) {
  return o30.halfWindowSize / (e30 * o30.desiredPixelFlow * Math.LN2);
}
function w6(o30, e30) {
  return -o30.halfWindowSize / (e30 * e30 * o30.desiredPixelFlow * Math.LN2);
}
function p16(o30) {
  const e30 = o30.compared.sourceZoom - o30.compared.targetZoom;
  if (0 === e30) return o30.compared.pan * o30.halfWindowSize / (o30.desiredPixelFlow * o30.halfWindowPanAtZoom(o30.compared.sourceZoom));
  const a31 = Math.LN2 * o30.compared.pan, n34 = e30, t27 = o30.halfWindowPanAtZoom(n34), i30 = o30.halfWindowSize * Math.log(o30.compared.sourceZoom / o30.compared.targetZoom) / (o30.desiredPixelFlow * Math.LN2 * t27);
  return o30.compared.sourceZoom <= o30.compared.targetZoom ? i30 * (a31 - t27) : i30 * (a31 + t27);
}

// node_modules/@arcgis/core/views/animation/pointToPoint/apex/planning.js
function f14(f18, Z2) {
  let b12 = D3(f18, Z2);
  const h17 = { ascensionFactor: null != Z2.ascensionFactor ? Z2.ascensionFactor : 0.5, descensionFactor: null != Z2.descensionFactor ? Z2.descensionFactor : 0.5 }, M5 = 0 === h17.ascensionFactor, N3 = 0 === h17.descensionFactor, P4 = M5 ? n28 : o25, g15 = M5 ? t21 : e26, k4 = M5 ? i28 : a25, j7 = N3 ? s29 : l19, w8 = N3 ? f13 : m19, z5 = N3 ? w6 : h12, A6 = (o30) => P4(f18, o30, h17) + r26(f18, o30, h17) + j7(f18, o30, h17), I4 = (o30) => g15(f18, o30, h17) + d15(f18, o30, h17) + w8(f18, o30, h17), S3 = (o30) => k4(f18, o30, h17) + c19(f18, o30, h17) + z5(f18, o30, h17);
  let q2 = A6(b12);
  const v8 = p16(f18);
  let y12;
  const B4 = Z2.maximumIterations || 20, C7 = null != Z2.maximumDistance ? Z2.maximumDistance : 1 / 0;
  for (y12 = 0; y12 < B4; y12++) {
    const o30 = Z2.desiredSlope ?? 1e-6;
    let e30 = I4(b12);
    Math.abs(e30) > o30 && (e30 += o30);
    const n34 = e30 / S3(b12);
    if (isNaN(n34) || b12 >= C7 && n34 < 0) {
      if (!isFinite(C7)) return null;
      b12 = C7, q2 = A6(b12);
      break;
    }
    if (b12 -= n34, b12 <= f18.compared.sourceZoom || b12 <= f18.compared.targetZoom) return null;
    const a31 = A6(b12);
    if (Math.abs(a31 - q2) / q2 <= 5e-3) break;
    q2 = a31;
  }
  const E5 = 0.3;
  return isNaN(q2) || q2 > v8 * (1 - E5) || b12 <= f18.compared.sourceZoom || b12 <= f18.compared.targetZoom ? null : b12;
}
function D3(o30, e30) {
  const n34 = Math.max(o30.compared.sourceZoom, o30.compared.targetZoom), a31 = o30.source.zoomAtPixelsPerPan(o30.desiredPixelFlow / o30.compared.pan) / 2;
  return a31 < n34 ? null != e30.maximumDistance ? n34 + (e30.maximumDistance - n34) / 2 : 1.5 * n34 : e30.maximumDistance ? Math.min(e30.maximumDistance, a31) : a31;
}

// node_modules/@arcgis/core/views/animation/pointToPoint/apex/Path.js
var s30 = class extends e24 {
  constructor(i30, n34) {
    super(), this._preallocSegments = [new o24(), new o24(), new o24()], this._ascensionSegment = null, this._descensionSegment = null, this.update(i30, n34);
  }
  update(i30, n34) {
    if (!i30) return;
    this.definition ? this.definition.copyFrom(i30) : this.definition = i30.clone();
    const e30 = n34?.apex ? f14(i30, n34.apex) : null;
    this.segments.length = 0, this._ascensionSegment = null, this._descensionSegment = null, e30 ? this._updateWithApex(e30, n34?.apex) : this._updateWithoutApex();
  }
  segmentInterpolateComponentsAt(e30, t27, o30) {
    e30.interpolateComponentsAt(t27, o30), e30 === this._ascensionSegment ? o30.zoom = o22(o30.zoom) : e30 === this._descensionSegment && (o30.zoom = i27(o30.zoom));
  }
  _updateWithApex(i30, n34) {
    const [e30, t27, o30] = this._preallocSegments, s35 = n34?.ascensionFactor ?? 0.5, d21 = Math.min(1 - s35, null != n34?.ascensionFactor && null != n34.descensionFactor ? n34.descensionFactor : 0.5), a31 = 1 - s35 - d21;
    e30.definition ? e30.definition.copyFrom(this.definition) : e30.definition = this.definition.clone(), e30.definition.compared.targetZoom = i30, e30.definition.compared.pan = this.definition.compared.pan * s35, e30.definition.compared.rotate = this.definition.compared.rotate * s35, e30.definition.segmentEnd = s35, e30.update(), this._ascensionSegment = e30, this.segments.push(e30), a31 > 0 && (t27.definition ? t27.definition.copyFrom(this.definition) : t27.definition = this.definition.clone(), t27.definition.copyFrom(this.definition), t27.definition.compared.sourceZoom = i30, t27.definition.compared.targetZoom = i30, t27.definition.compared.pan = this.definition.compared.pan * a31, t27.definition.compared.rotate = this.definition.compared.rotate * a31, t27.definition.segmentStart = e30.definition.segmentEnd, t27.definition.segmentEnd = e30.definition.segmentEnd + a31, t27.update(), this.segments.push(t27)), o30.definition ? o30.definition.copyFrom(this.definition) : o30.definition = this.definition.clone(), o30.definition.compared.sourceZoom = i30, o30.definition.compared.pan = this.definition.compared.pan * d21, o30.definition.compared.rotate = this.definition.compared.rotate * d21, o30.definition.segmentStart = s35 + a31, o30.update(), this._descensionSegment = o30, this.segments.push(o30);
  }
  _updateWithoutApex() {
    const [i30] = this._preallocSegments;
    i30.update(this.definition), this.segments.push(i30);
  }
};

// node_modules/@arcgis/core/views/animation/pointToPoint/Animation.js
var h13 = new t20();
var p17 = class {
  get time() {
    return this._time;
  }
  get isLinear() {
    return 1 === this.path.segments.length;
  }
  constructor(i30) {
    this._time = n2(0), this._easing = k3, this.definition = new r25(i30), this.path = new s30();
  }
  update(t27, a31, o30) {
    this.definition.update(t27, a31, o30), this.path.update(this.definition, o30), this._time = this._applyTimeSettings(r3(isFinite(this.path.time) ? this.path.time : t3(0)), o30), this._easing = o30.easing ?? (this._time >= 1e3 ? k3 : I3);
  }
  cameraAt(t27, i30) {
    t27 = Math.min(Math.max(0, t27), 1), t27 = this._normalizedEasing(t27);
    const e30 = this.path.interpolateComponentsAt(t27, h13);
    i30.interpolate(this.definition.source, this.definition.target, e30);
  }
  _normalizedEasing(t27) {
    const i30 = this._easing(0, this._time), e30 = this._easing(1, this._time);
    return (this._easing(t27, this._time) - i30) / (e30 - i30);
  }
  _applyTimeSettings(i30, e30) {
    const n34 = null != e30.speedFactor ? e30.speedFactor : 1, s35 = e30.minDuration ?? o23.minDuration / n34, a31 = e30.maxDuration ?? o23.maxDuration / n34;
    return i30 = null != e30.duration ? n2(e30.duration) : n2(Math.min(Math.max(i30 / n34, s35), a31));
  }
};

// node_modules/@arcgis/core/views/2d/AnimationManager.js
var f15 = 2e3;
var g11 = 64;
var j6 = class {
  constructor(t27) {
    this._view = t27, this._animation = new p17(() => new a23(this._view)), this._current = new a23(this._view);
  }
  get _source() {
    return this._animation.definition.source;
  }
  get _target() {
    return this._animation.definition.target;
  }
  get duration() {
    return this._animation.time;
  }
  get animation() {
    return this._animation;
  }
  update(t27, i30, e30 = {}) {
    Z(this._current.viewpoint, t27), Z(this._source.viewpoint, t27), Z(this._target.viewpoint, i30), this._animation.update(this._source, this._target, e30);
  }
  applyRatio(t27, i30) {
    this._animation.cameraAt(i30, this._current), Z(t27, this._current.viewpoint);
  }
};
var y9 = class extends b {
  constructor(t27) {
    super(t27), this._animation = null, this._destinationViewState = new f10(), this.updateFunction = null, this.easing = H2.ease, this.viewpoint = new m9({ targetGeometry: new _(), scale: 0, rotation: 0 }), this._updateTask = F({ postRender: this._postRender.bind(this) }), this._updateTask.pause(), this._transition = new j6(t27.view);
  }
  destroy() {
    this._updateTask = l(this._updateTask);
  }
  get animation() {
    return this._animation;
  }
  set animation(t27) {
    this._animation = t27, this.view.animation = t27;
  }
  animate(t27, i30, e30) {
    this.stop();
    const n34 = this.viewpoint;
    Z(n34, i30);
    const s35 = t27.target;
    this._transition.update(this.viewpoint, s35, { apex: { maximumDistance: Math.min(Math.min(i30.scale, s35.scale) * g11, this.view.constraints.effectiveMinScale), desiredSlope: 5e-8 }, duration: e30?.duration, maxDuration: "auto" === e30?.animationMode ? n2(1 / 0) : e30?.maxDuration ?? r24.maxDuration, speedFactor: e30?.speedFactor, easing: ("string" == typeof e30?.easing ? H2[e30.easing] : e30?.easing) || this.easing }), "auto" === e30?.animationMode && (this._destinationViewState.copy(this.view.state), this._destinationViewState.viewpoint = s35, T5(this._transition.animation, e30, this.view.state, this._destinationViewState) || this._transition.update(this.viewpoint, s35, { duration: n2(0) }));
    const o30 = () => {
      this.animation === t27 && this._updateTask && ("finished" === t27.state && (this._transition.applyRatio(this.viewpoint, 1), this.view.state && (this.view.state.viewpoint = this.viewpoint.clone())), this.animation = null, this.updateFunction = null);
    };
    return t27.when(o30, o30), this._startTime = performance.now(), this._updateTask.resume(), this.animation = t27, t27;
  }
  animateContinuous(t27, i30) {
    this.stop(), this.updateFunction = i30, this.viewpoint = t27;
    const e30 = new n21({ target: t27.clone() }), n34 = () => {
      this.animation === e30 && this._updateTask && (this.animation = null, this.updateFunction = null);
    };
    return e30.when(n34, n34), this._startTime = performance.now(), this._updateTask.resume(), this.animation = e30, e30;
  }
  stop() {
    this.animation && (this.animation.stop(), this.animation = null, this.updateFunction = null);
  }
  _postRender(t27) {
    const i30 = this.animation;
    if (i30 && i30.state !== n21.state.STOPPED) {
      if (this.updateFunction) this.updateFunction(this.viewpoint, t27.deltaTime), this.animation?.update(this.viewpoint);
      else {
        const t28 = performance.now() - this._startTime, i31 = this._transition.duration, e30 = i31 > 0 ? t28 / i31 : 1, n34 = e30 >= 1;
        this._transition.applyRatio(this.viewpoint, e30), n34 && this.animation?.finish();
      }
      this.view.state && (this.view.state.viewpoint = this.viewpoint.clone());
    } else this._updateTask.pause();
  }
};
function T5(t27, i30, e30, n34) {
  if (null != i30?.duration) return true;
  const { time: s35, isLinear: a31 } = t27, r29 = i30?.speedFactor || 1;
  if (s35 > (i30?.maxDuration ?? r24.maxDuration / r29)) return false;
  if (a31) {
    const t28 = 1.5, i31 = n10(), a32 = i4(...n34.toScreen(i31, ...e30.center)), m27 = i4(...e30.toScreen(i31, ...n34.center)), h17 = null != m27 && m27.x > -1 * e30.size[0] && m27.x < (t28 + 0.5) * e30.size[0] && m27.y > -1 * e30.size[1] && m27.y < (t28 + 0.5) * e30.size[1], u19 = null != a32 && a32.x > -1 * n34.size[0] && a32.x < (t28 + 0.5) * n34.size[0] && a32.y > -1 * n34.size[1] && a32.y < (t28 + 0.5) * n34.size[1];
    if (s35 > f15 / r29 && !h17 && !u19) return false;
  }
  return true;
}
__decorate([m2()], y9.prototype, "easing", void 0), __decorate([m2()], y9.prototype, "view", void 0), __decorate([m2()], y9.prototype, "viewpoint", void 0), y9 = __decorate([a2("esri.views.2d.AnimationManager")], y9);
var x2 = y9;

// node_modules/@arcgis/core/views/2d/layerViewModuleImportUtils.js
function r27() {
  return Promise.all([import("./webglDeps-URCZLHGB.js"), import("./mapViewDeps-4XLRGU2Z.js")]);
}
var a26 = () => r27().then(() => import("./TileLayerView2D-VJEFORLO.js"));
var t22 = () => r27().then(() => import("./FeatureLayerView2D-4COTZLAG.js"));
var i29 = { "base-dynamic": () => r27().then(() => import("./BaseDynamicLayerView2D-KKOPMXXM.js")), "base-tile": a26, "bing-maps": a26, catalog: () => r27().then(() => import("./CatalogLayerView2D-H675ZXPI.js")), "catalog-dynamic-group": () => r27().then(() => import("./CatalogDynamicGroupLayerView2D-V4X4S536.js")), "catalog-footprint": () => r27().then(() => import("./CatalogFootprintLayerView2D-6GAKY6BC.js")), csv: t22, "geo-rss": () => r27().then(() => import("./GeoRSSLayerView2D-4N7XO5EB.js")), feature: t22, geojson: t22, parquet: t22, graphics: () => r27().then(() => import("./GraphicsLayerView2D-JNAVWSTJ.js")), group: () => r27().then(() => import("./GroupLayerView2D-MNXJSFB7.js")), imagery: () => r27().then(() => import("./ImageryLayerView2D-JKQQ6RVQ.js")), "imagery-tile": () => r27().then(() => import("./ImageryTileLayerView2D-RAMJXEBA.js")), kml: () => r27().then(() => import("./KMLLayerView2D-WCAGKJ6W.js")), "knowledge-graph": () => r27().then(() => import("./KnowledgeGraphLayerView2D-O6RGTNEF.js")), "link-chart": () => r27().then(() => import("./KnowledgeGraphLayerView2D-O6RGTNEF.js")), "knowledge-graph-sublayer": t22, "map-image": () => r27().then(() => import("./MapImageLayerView2D-TIVR5OLH.js")), "map-notes": () => r27().then(() => import("./MapNotesLayerView2D-MFBHC4AL.js")), media: () => r27().then(() => import("./MediaLayerView2D-3OF3ONI7.js")), "ogc-feature": () => r27().then(() => import("./OGCFeatureLayerView2D-MX7DMK7O.js")), "open-street-map": a26, "oriented-imagery": t22, route: () => r27().then(() => import("./RouteLayerView2D-KC4ZM3EN.js")), stream: () => r27().then(() => import("./StreamLayerView2D-PVAP34DC.js")), "subtype-group": () => r27().then(() => import("./SubtypeGroupLayerView2D-YYIET6Y4.js")), tile: a26, "vector-tile": () => r27().then(() => import("./VectorTileLayerView2D-DAUMUXKS.js")), video: () => r27().then(() => import("./VideoLayerView2D-KXKD4YAZ.js")), wcs: () => r27().then(() => import("./ImageryTileLayerView2D-RAMJXEBA.js")), "web-tile": a26, wfs: t22, wms: () => r27().then(() => import("./WMSLayerView2D-IIW4BNYW.js")), wmts: () => r27().then(() => import("./WMTSLayerView2D-BHVAWLBZ.js")), "base-elevation": null, "building-scene": null, dimension: null, elevation: null, "gaussian-splat": null, "integrated-mesh-3dtiles": null, "integrated-mesh": null, "line-of-sight": null, "point-cloud": null, scene: null, unknown: null, unsupported: null, viewshed: null, voxel: null };
function s31(r29) {
  const a31 = r29.declaredClass ? r29.declaredClass.slice(r29.declaredClass.lastIndexOf(".") + 1) : "Unknown", t27 = a31.replaceAll(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
  return new s(`${t27}:view-not-supported`, `${a31} is not supported in 2D`);
}
var l20 = { hasLayerViewModule: (e30) => null != i29[e30.type], importLayerView: (e30) => {
  const r29 = i29[e30.type];
  if (null == r29) throw s31(e30);
  return r29(e30);
} };

// node_modules/@arcgis/core/views/2d/analysis/analysisViewModuleImportUtils.js
var l21 = { "area-measurement": null, dimension: null, "direct-line-measurement": null, "elevation-profile": () => import("./ElevationProfileAnalysisView2D-XP2R3342.js"), "line-of-sight": null, slice: null, viewshed: null, "volume-measurement": null };
function n29(n34) {
  const i30 = l21[n34.type];
  if (!i30) throw new s("analysis-view-module-import-utils:analysis-not-supported", `Analysis "${n34.type}" is not supported`);
  return i30();
}

// node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js
var d16 = { added: [], removed: [] };
var a27 = /* @__PURE__ */ new Set();
var c20 = new e10(0, 0, 0, 0);
function m20(e30, t27) {
  const s35 = G(t27);
  if (!s35) return null;
  const [i30, r29] = s35.valid;
  return e30[2] > r29 ? [i3([e30[0], e30[1], r29, e30[3]]), i3([i30, e30[1], i30 + e30[2] - r29, e30[3]])] : e30[0] < i30 ? [i3([i30, e30[1], e30[2], e30[3]]), i3([r29 - (i30 - e30[0]), e30[1], r29, e30[3]])] : null;
}
var u13 = class extends r4 {
  constructor(e30) {
    super(), this._tiles = /* @__PURE__ */ new Map(), this._index = i7(9, has("esri-csp-restrictions") ? (e31) => ({ minX: e31.bounds[0], minY: e31.bounds[1], maxX: e31.bounds[2], maxY: e31.bounds[3] }) : [".bounds[0]", ".bounds[1]", ".bounds[2]", ".bounds[3]"]), this.tiles = [], this.tileScheme = e30;
  }
  destroy() {
    super.destroy(), this.clear();
  }
  clear() {
    this.tiles.length = 0, this._tiles.clear(), this._index.clear();
  }
  has(e30) {
    return this._tiles.has(e30);
  }
  get(e30) {
    return this._tiles.get(e30);
  }
  getIntersectingTiles(e30) {
    if (!e30 || 0 === l7(e30) || 0 === y3(e30)) return [];
    const t27 = m20(e30, this.tileScheme.spatialReference);
    return null != t27 ? [.../* @__PURE__ */ new Set([...this.boundsIntersections(t27[0]), ...this.boundsIntersections(t27[1])])] : this.boundsIntersections(e30);
  }
  boundsIntersections(e30) {
    return this._index.search({ minX: e30[0], minY: e30[1], maxX: e30[2], maxY: e30[3] });
  }
  updateTiles(e30) {
    const t27 = { added: [], removed: [] };
    for (const s35 of e30.added) if (!this.has(s35)) {
      const e31 = new r10(this.tileScheme, s35);
      this._tiles.set(s35, e31), this._index.insert(e31), t27.added.push(e31);
    }
    for (const s35 of e30.removed) if (this.has(s35)) {
      const e31 = this.get(s35);
      this._tiles.delete(s35), this._index.remove(e31), t27.removed.push(e31);
    }
    this.tiles.length = 0, this._tiles.forEach((e31) => this.tiles.push(e31)), (t27.added.length || t27.removed.length) && this.emit("update", t27);
  }
  setViewState(e30) {
    const t27 = this.tileScheme.getTileCoverage(e30, 0);
    if (!t27) return;
    const { spans: s35, lodInfo: i30 } = t27, { level: o30 } = i30;
    if (s35.length > 0) for (const { row: n34, colFrom: l24, colTo: h17 } of s35) for (let e31 = l24; e31 <= h17; e31++) {
      const t28 = c20.set(o30, n34, i30.normalizeCol(e31), i30.getWorldForColumn(e31)).id;
      if (a27.add(t28), !this.has(t28)) {
        const e32 = new r10(this.tileScheme, t28);
        this._tiles.set(t28, e32), this._index.insert(e32), this.tiles.push(e32), d16.added.push(e32);
      }
    }
    for (let n34 = this.tiles.length - 1; n34 >= 0; n34--) {
      const e31 = this.tiles[n34];
      a27.has(e31.id) || (this._tiles.delete(e31.id), this.tiles.splice(n34, 1), this._index.remove(e31), d16.removed.push(e31));
    }
    (d16.added.length || d16.removed.length) && this.emit("update", d16), s8.pool.release(t27), a27.clear(), d16.added.length = 0, d16.removed.length = 0;
  }
};

// node_modules/@arcgis/core/views/2d/support/hitTestUtils.js
async function s32(e30, t27, s35) {
  const f18 = o12(t27) ? r11(e30, t27) : t27;
  if (!e30.ready || isNaN(f18.x) || isNaN(f18.y)) return { screenPoint: f18, results: [] };
  let d21 = /* @__PURE__ */ new Set();
  const y12 = /* @__PURE__ */ new Set();
  let u19 = false, h17 = null, g15 = null;
  s35?.include ? o26(s35.include, n30(e30, (e31) => {
    d21.add(e31), p18(e31, (e32) => y12.add(e32));
  }, (e31, r29) => {
    y12.add(e31), d21.add(r29);
  }, (e31) => {
    h17 || (h17 = /* @__PURE__ */ new Set()), h17.add(e31);
  }, (e31) => d21.add(e31), () => u19 = true)) : (u19 = true, d21 = new Set(e30.allLayerViews), d21.forEach((e31) => {
    p18(e31, (e32) => y12.add(e32));
  })), s35?.exclude && o26(s35.exclude, n30(e30, (e31) => {
    d21.delete(e31), p18(e31, (e32) => y12.delete(e32));
  }, (e31) => y12.delete(e31), (e31) => {
    g15 || (g15 = /* @__PURE__ */ new Set()), g15.add(e31);
  }));
  const m27 = e30.toMap(f18), w8 = e30.allLayerViews.filter((r29) => !r29.suspended && d21.has(r29) && r29.clips.every((r30) => m11(e30, r30, f18, m27))).reverse();
  let V5 = [...u19 ? e30.graphicsView.hitTest(m27).map((e31) => ({ type: "graphic", graphic: e31, layer: null, mapPoint: m27 })) : [], ...await Promise.all(w8.map((e31) => e31.hitTest(m27, f18)).toArray())].filter(N).flat().filter(N);
  return V5 = V5.filter((e31) => "graphic" !== e31.type || "subtype-group" !== e31.layer?.type || y12.has(e31.graphic.layer)), h17 && (V5 = V5.filter((e31) => !("graphic" in e31) || !e31.graphic || h17?.has(c21(e31.graphic)))), g15 && (V5 = V5.filter((e31) => !("graphic" in e31) || !e31.graphic || !g15?.has(c21(e31.graphic)))), { screenPoint: f18, results: V5 };
}
function n30(r29, t27, i30, a31, l24, s35) {
  return (n34) => {
    if (n34 instanceof _3) {
      if (n34.layer === r29) s35?.();
      else {
        const e30 = r29.allLayerViews.find((e31) => e31.layer === n34.layer);
        e30 && l24?.(e30);
      }
      a31(c21(n34));
    } else if ("layer" in n34 && "element" in n34) ;
    else if ("subtype-sublayer" === n34.type) {
      const e30 = r29.allLayerViews.find((e31) => e31.layer === n34.parent);
      e30 && i30(n34, e30);
    } else {
      const e30 = r29.allLayerViews.find((e31) => e31.layer === n34);
      e30 && t27(e30);
    }
  };
}
function o26(e30, r29) {
  if (e30) if (e3(e30)) for (const i30 of e30) if (e3(i30)) for (const e31 of i30) r29(e31);
  else r29(i30);
  else r29(e30);
}
function c21(e30) {
  const r29 = e30.getObjectId();
  return r29 ? `${e30.layer?.uid ?? e30.sourceLayer?.uid ?? "MapView"}/${r29}` : `"MapView/${e30.uid}`;
}
function p18(e30, r29) {
  const t27 = e30.layer;
  "subtype-group" === t27?.type && t27.sublayers.forEach((e31) => {
    r29(e31);
  });
}

// node_modules/@arcgis/core/views/2d/support/screenshotUtils.js
var e27 = { flipY: true, premultipliedAlpha: true };
async function o27(t27, n34) {
  const o30 = await a28(t27, n34), { format: r29, quality: l24 } = c7(n34?.format, n34?.quality);
  return a5(o30, { format: r29, quality: l24 }, e27);
}
async function r28(i30, h17) {
  const n34 = await a28(i30, h17);
  return r12(n34, e27);
}
function a28(t27, i30) {
  const h17 = d17(i30 || {}, u14(t27.stage, t27.size), t27.size, t27.padding), n34 = l22(i30, t27.allLayerViews);
  return t27.stage.takeScreenshot(h17, n34, t27.backgroundColor, i30?.rotation);
}
function l22(t27 = {}, i30) {
  if (!t27.layers) return;
  const h17 = [];
  return t27.layers.forEach((t28) => {
    const n34 = i30.find((i31) => i31.layer.id === t28.id);
    n34?.container && h17.push(n34.container);
  }), h17;
}
function u14(t27, i30) {
  return Math.min(4, s11(i30, Math.min(4096, t27.context.parameters.maxTextureSize)));
}
function d17(t27, i30, h17, n34) {
  t27.ignorePadding && (n34 = { left: 0, right: 0, top: 0, bottom: 0 });
  let e30 = null;
  null != t27.width && null != t27.height ? e30 = [t27.width, t27.height] : null == t27.width && null != t27.height ? e30 = [t27.height, t27.height] : null != t27.width && null == t27.height ? e30 = [t27.width, t27.width] : null == t27.width && null == t27.height && (e30 = null);
  const o30 = h17[0] - (n34.left + n34.right), r29 = h17[1] - (n34.top + n34.bottom);
  let a31, l24, u19 = t27.area || { x: 0, y: 0, width: o30, height: r29 };
  if (e30) {
    const t28 = o30 / r29, i31 = e30[0] / e30[1];
    if (i31 > t28) {
      const t29 = u19.width / i31;
      u19 = { x: u19.x, y: Math.round(u19.y + (u19.height - t29) / 2), width: u19.width, height: Math.round(t29) };
    } else {
      const t29 = u19.height * i31;
      u19 = { x: Math.round(u19.x + (u19.width - t29) / 2), y: u19.y, width: Math.round(t29), height: u19.height };
    }
  } else e30 = [u19.width, u19.height];
  return e30[0] > u19.width ? (a31 = Math.min(e30[0] / u19.width, i30), l24 = e30[0] / u19.width / a31) : (a31 = 1, l24 = e30[0] / u19.width), { cropArea: { x: Math.round((u19.x + n34.left) * a31), y: Math.round((u19.y + n34.top) * a31), width: Math.round(u19.width * a31), height: Math.round(u19.height * a31) }, outputScale: l24, resolutionScale: a31 };
}

// node_modules/@arcgis/core/views/support/AnalysisViewManager.js
var u15 = Symbol("analyses-owner-handles");
var V4 = class extends b {
  constructor(e30) {
    super(e30), this._allAnalysisViews = new O(), this._creatingViewCount = 0, this._attachedToViewResolver = A4(), this._items = /* @__PURE__ */ new Map(), this._moduleMap = /* @__PURE__ */ new Map(), this._scheduledUpdateHandle = null, this._emitOnView = (e31, s35) => this.view.emit(e31, s35);
  }
  destroy() {
    this._disconnectOwners(), this._attachedToViewResolver.reject(u2("AnalysisViewManager was destroyed")), this._set("view", null);
  }
  attach() {
    this._connectOwners(), this._attachedToViewResolver.resolve();
  }
  detach() {
    this._disconnectOwners(), this._attachedToViewResolver.reject(u2()), this._attachedToViewResolver = A4();
  }
  get updating() {
    return !this.view.ready || 0 !== this._creatingViewCount || this._allAnalysisViews.some((e30) => e30.updating);
  }
  get testInfo() {
  }
  async whenAnalysisView(e30) {
    await this._attachedToViewResolver.promise;
    const s35 = this._items.get(e30);
    if (null == s35 || 1 === s35.state.list) {
      throw new s("AnalysisViewManager:no-analysis-view-for-analysis", "The analysis does not exist in view.analyses", { analysis: e30 });
    }
    return s35.createAnalysisViewTask.promise;
  }
  _connectOwners() {
    this.addHandles(this._connectAnalysesCollection(this.view.analyses), u15);
  }
  _disconnectOwners() {
    this.removeHandles(u15), this._update(), this._creatingViewCount = 0;
  }
  _connectAnalysesCollection(e30) {
    for (const i30 of e30) this._addAnalysis(i30);
    const s35 = e30.on("after-add", (e31) => this._addAnalysis(e31.item)), t27 = e30.on("after-remove", (e31) => this._removeAnalysis(e31.item));
    return e2(() => {
      s35.remove(), t27.remove();
      for (const s36 of e30) this._removeAnalysis(s36);
    });
  }
  _addAnalysis(e30) {
    const s35 = this._items.get(e30);
    if (null == s35) {
      const s36 = { state: { view: 0, list: 0 }, analysis: e30, view: null, createAnalysisViewTask: null };
      this._items.set(e30, s36), s36.createAnalysisViewTask = d3((t27) => this._createAnalysisViewPromise(s36, t27).then((s37) => (this._emitOnView("analysis-view-create", { analysis: e30, analysisView: s37 }), s37), (s37) => {
        throw this._emitOnView("analysis-view-create-error", { analysis: e30, error: s37 }), s37;
      }));
    } else s35.state.list = 0;
  }
  _removeAnalysis(e30) {
    const s35 = this._items.get(e30);
    null != s35 ? (s35.state.list = 1, this._scheduleUpdate()) : i.getLogger(this).error("Trying to remove analysis which was not added");
  }
  _scheduleUpdate() {
    null == this._scheduledUpdateHandle && (this._scheduledUpdateHandle = A2(() => this._update()));
  }
  _update() {
    this._scheduledUpdateHandle = l(this._scheduledUpdateHandle), this._items.forEach((e30) => {
      if (1 !== e30.state.list) return;
      const { analysis: s35, view: t27 } = e30;
      switch (this._items.delete(s35), e30.state.view) {
        case 0:
          e30.createAnalysisViewTask = e4(e30.createAnalysisViewTask);
          break;
        case 1:
          null != t27 && (this._allAnalysisViews.remove(t27), e30.view = u(t27), e30.createAnalysisViewTask = null, this._emitOnView("analysis-view-destroy", { analysis: s35, analysisView: t27 }));
      }
    });
  }
  async _createAnalysisViewPromise(e30, s35) {
    const { analysis: t27 } = e30;
    if (this._creatingViewCount += 1, !this._moduleMap.has(t27.type)) try {
      this._moduleMap.set(t27.type, await this.importAnalysisViewModule(t27));
    } catch (n34) {
      throw this._creatingViewCount -= 1, new s("AnalysisViewManager:no-analysis-view-for-analysis", `Analysis of type "${t27.type}" is not supported`);
    }
    if (a3(s35)) throw this._creatingViewCount -= 1, u2("AnalysisView creation aborted");
    const i30 = new (this._moduleMap.get(t27.type)).default({ analysis: t27, view: this.view });
    let o30 = true;
    w(s35, () => {
      o30 && this._destroyAnalysisView(t27, i30);
    });
    try {
      await i30.when();
    } catch (n34) {
      throw o30 = false, this._destroyAnalysisView(t27, i30), n34;
    }
    if (a3(s35)) throw u2();
    return o30 = false, e30.view = i30, e30.state.view = 1, this._allAnalysisViews.add(i30), this._creatingViewCount -= 1, i30;
  }
  _destroyAnalysisView(e30, s35) {
    s35.destroyed || (this._creatingViewCount -= 1, s35.destroy(), this._emitOnView("analysis-view-destroy", { analysis: e30, analysisView: s35 }));
  }
};
__decorate([m2()], V4.prototype, "updating", null), __decorate([m2({ constructOnly: true })], V4.prototype, "importAnalysisViewModule", void 0), __decorate([m2({ constructOnly: true })], V4.prototype, "view", void 0), __decorate([m2()], V4.prototype, "_allAnalysisViews", void 0), __decorate([m2()], V4.prototype, "_creatingViewCount", void 0), V4 = __decorate([a2("esri.views.support.AnalysisViewManager")], V4);
var v5 = V4;
function A4() {
  const e30 = $();
  return e30.promise.catch(() => {
  }), e30;
}

// node_modules/@arcgis/core/views/support/WebGLRequirements.js
function t23(t27) {
  const o30 = t7();
  return o30.available ? "3d" === t27 && o30.majorPerformanceCaveat ? new s("webgl:major-performance-caveat-detected", `Your WebGL implementation (${o30.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`) : o30.supportsHighPrecisionFragment ? o30.supportsVertexShaderSamplers ? null : new s("webgl:vertex-shader-samplers-required", "WebGL support for vertex shader samplers is required but not supported.") : new s("webgl:high-precision-fragment-required", "WebGL support for high precision fragment shaders is required but not supported.") : new s("webgl:required", "WebGL2 is required but not supported.", new Error().stack);
}

// node_modules/@arcgis/core/views/ui/Component.js
function d18(t27) {
  return t27 && "nodeType" in t27;
}
function n31(t27) {
  return t27 && "function" == typeof t27.render;
}
var c22 = { component: "esri-component" };
var p19 = class extends b {
  constructor() {
    super(...arguments), this.widget = null;
  }
  destroy() {
    this.node = null, this.widget?.destroy();
  }
  get id() {
    return this._get("id") ?? this.widget?.id ?? this.node?.id;
  }
  set id(t27) {
    this._set("id", t27);
  }
  set node(t27) {
    const o30 = this._get("node");
    t27 !== o30 && (t27 && t27.classList.add(c22.component), o30 && o30.classList.remove(c22.component), this._set("node", t27));
  }
  castNode(t27) {
    return this.widget?.destroy(), t27 ? "string" == typeof t27 || d18(t27) ? (this._set("widget", null), n6(t27)) : (n31(t27) && !t27.domNode && (t27.domNode = document.createElement("div")), this._set("widget", t27), t27.domNode) : (this._set("widget", null), null);
  }
};
__decorate([m2()], p19.prototype, "id", null), __decorate([m2()], p19.prototype, "node", null), __decorate([s4("node")], p19.prototype, "castNode", null), __decorate([m2({ readOnly: true })], p19.prototype, "widget", void 0), p19 = __decorate([a2("esri.views.ui.Component")], p19);
var m21 = p19;

// node_modules/@arcgis/core/views/ui/UI.js
var f16 = { left: 0, top: 0, bottom: 0, right: 0 };
var _10 = { bottom: 30, top: 15, right: 15, left: 15 };
var g12 = "esri-ui";
var y10 = { ui: g12, corner: `${g12}-corner`, innerContainer: `${g12}-inner-container`, manualContainer: `${g12}-manual-container`, cornerContainer: `${g12}-corner-container`, topLeft: `${g12}-top-left`, topRight: `${g12}-top-right`, bottomLeft: `${g12}-bottom-left`, bottomRight: `${g12}-bottom-right` };
function C6(t27) {
  return t27 && !t27._started && "function" == typeof t27.postMixInProperties && "function" == typeof t27.buildRendering && "function" == typeof t27.postCreate && "function" == typeof t27.startup;
}
function v6(t27) {
  return 0 === t27 ? "0" : `${t27}px`;
}
function b10(t27) {
  const o30 = "object" == typeof t27 && null !== t27 && Object.getPrototypeOf(t27);
  return (null === o30 || o30 === Object.prototype) && ("component" in t27 || "index" in t27 || "position" in t27) ? t27 : null;
}
function w7(t27, { top: o30, bottom: n34, left: e30, right: i30 }) {
  t27.style.top = o30, t27.style.bottom = n34, t27.style.left = e30, t27.style.right = i30;
}
var L6 = class extends l2 {
  constructor(t27) {
    super(t27), this._cornerNameToContainerLookup = {}, this._positionNameToContainerLookup = {}, this._components = new Array(), this._componentMap = /* @__PURE__ */ new Map(), this._removeWidgetHandleKey = Symbol("componentOnRemoveSymbol"), this._locale = l4(), this.view = null, this._applyViewPadding = () => {
      const t28 = this.container;
      t28 && w7(t28, this._toPixelPosition(this._getViewPadding()));
    }, this._applyUIPadding = () => {
      const t28 = this._innerContainer;
      t28 && w7(t28, this._toPixelPosition(this.padding));
    }, this._initContainers();
  }
  initialize() {
    this.addHandles([l5(() => [this.view?.padding, this.container], this._applyViewPadding, h), l5(() => this.padding, this._applyUIPadding, h), l5(() => [this.container, this._locale], ([t27, o30]) => {
      t27 && t27.setAttribute("lang", o30);
    }, h), b2((t27) => {
      this._locale = t27;
    })]);
  }
  destroy() {
    this.removeAllHandles(), this.container = null;
    for (const t27 of this._components) t27.destroy();
    this._components.length = 0, this._componentMap.clear(), this.view = null, this._set("view", null);
  }
  set container(t27) {
    const o30 = this._get("container");
    t27 !== o30 && (t27 && (t27.classList.add(y10.ui), s5(t27), this._attachContainers(t27)), o30 && (o30.classList.remove(y10.ui), w7(o30, { top: "", bottom: "", left: "", right: "" }), o30.textContent = ""), this._set("container", t27));
  }
  get height() {
    const t27 = this.view?.height ?? 0;
    if (0 === t27) return t27;
    const o30 = this._getViewPadding(), { top: n34, bottom: e30 } = o30;
    return Math.max(t27 - n34 - e30, 0);
  }
  get padding() {
    return this._get("padding");
  }
  set padding(t27) {
    this._overrideIfSome("padding", t27);
  }
  castPadding(t27) {
    return "number" == typeof t27 ? { bottom: t27, top: t27, right: t27, left: t27 } : { ..._10, ...t27 };
  }
  get width() {
    const t27 = this.view?.width ?? 0;
    if (0 === t27) return t27;
    const o30 = this._getViewPadding(), { left: n34, right: e30 } = o30;
    return Math.max(t27 - n34 - e30, 0);
  }
  add(t27, o30) {
    let n34, e30, i30;
    if (Array.isArray(t27)) return void t27.forEach((t28) => this.add(t28, o30));
    const r29 = b10(t27);
    r29 && ({ index: n34, position: o30, component: t27, key: e30 } = r29), o30 && "object" == typeof o30 && ({ index: n34, key: e30, position: o30, internal: i30 } = o30), !t27 || o30 && !this._isValidPosition(o30) || this._add(t27, o30, n34 ?? this._getNumComponentsAtPosition(o30), e30, i30);
  }
  remove(t27, o30) {
    if (!t27) return;
    if (Array.isArray(t27)) return t27.map((t28) => this.remove(t28, o30));
    const n34 = this._find(t27);
    if (n34) {
      const t28 = this._componentMap.get(n34);
      if (!t28 || t28.key !== o30) return;
      const e30 = this._components.indexOf(n34), i30 = n34.node.parentNode;
      return i30?.removeChild(n34.node), this._componentMap.delete(n34), n34.widget?.removeHandlesReference(this._removeWidgetHandleKey), this._components.forEach((o31) => {
        const n35 = this._componentMap.get(o31);
        n35 && n35.position === t28.position && n35.index > t28.index && n35.index--;
      }), this._components.splice(e30, 1)[0];
    }
  }
  empty(t27, o30 = { removeInternal: false }) {
    if (Array.isArray(t27)) {
      for (const n35 of t27) this.empty(n35, o30);
      return;
    }
    const n34 = this._positionNameToContainerLookup[t27 ?? "manual"], e30 = Array.prototype.slice.call(n34.children).map((t28) => this._findByNode(t28)).filter((t28) => {
      if (null == t28) return false;
      return !(this._componentMap.get(t28)?.internal ?? false) || o30.removeInternal;
    });
    for (const i30 of e30) this.remove(i30);
  }
  move(t27, o30) {
    if (Array.isArray(t27) && t27.forEach((t28) => this.move(t28, o30)), !t27) return;
    let n34;
    const e30 = b10(t27) || b10(o30);
    if (e30 && (n34 = e30.index, o30 = e30.position, t27 = e30.component || t27), o30 && !this._isValidPosition(o30)) return;
    const i30 = this.remove(t27);
    i30 && this.add(i30, { position: o30, index: n34 });
  }
  find(t27) {
    if (!t27) return null;
    const o30 = this._findById(t27);
    return o30 && (o30.widget || o30.node);
  }
  getComponents(t27, o30 = { includeInternal: false }) {
    return t27 ? Array.isArray(t27) ? t27.flatMap((t28) => this._getComponentsAtPosition(t28, o30)) : this._getComponentsAtPosition(t27, o30) : this._components.filter((t28) => o30.includeInternal || !this._componentMap.get(t28)?.internal).map(({ widget: t28, node: o31 }) => t28 ?? o31);
  }
  getPosition(t27) {
    for (const o30 in this._positionNameToContainerLookup) {
      if (this._positionNameToContainerLookup[o30].contains(t27)) return o30;
    }
    return null;
  }
  _add(t27, n34, e30, r29, s35) {
    t27 instanceof m21 || (t27 = new m21({ node: t27 }));
    const { widget: a31 } = t27;
    null != a31 && a31 instanceof b && a31.addHandles(e2(() => {
      queueMicrotask(() => this.remove(t27));
    }), this._removeWidgetHandleKey);
    const p27 = this._positionNameToContainerLookup[n34];
    this._components.some((t28) => {
      const o30 = this._componentMap.get(t28)?.position, n35 = o30 ? this._positionNameToContainerLookup[o30] : null;
      return p27 === n35 && this._componentMap.get(t28)?.index === e30;
    }) && this._components.forEach((t28) => {
      const o30 = this._componentMap.get(t28), n35 = o30?.position, i30 = n35 ? this._positionNameToContainerLookup[n35] : null;
      o30 && i30 === p27 && o30.index >= e30 && o30.index++;
    }), this._place({ component: t27, position: n34, index: e30 }), this._components.push(t27), this._componentMap.set(t27, { key: r29, position: n34, internal: s35, index: e30 });
  }
  _find(t27) {
    return t27 ? t27 instanceof m21 ? this._findByComponent(t27) : "string" == typeof t27 ? this._findById(t27) : "domNode" in t27 ? this._findByNode(t27.domNode) : this._findByNode(t27) : null;
  }
  _getViewPadding() {
    return this.view?.padding ?? f16;
  }
  _attachContainers(t27) {
    t27.appendChild(this._innerContainer), t27.appendChild(this._manualContainer);
  }
  _initContainers() {
    const t27 = document.createElement("div");
    t27.classList.add(y10.innerContainer, y10.cornerContainer);
    const o30 = document.createElement("div");
    o30.classList.add(y10.innerContainer, y10.manualContainer);
    const n34 = document.createElement("div");
    n34.classList.add(y10.topLeft, y10.corner), t27.appendChild(n34);
    const e30 = document.createElement("div");
    e30.classList.add(y10.topRight, y10.corner), t27.appendChild(e30);
    const i30 = document.createElement("div");
    i30.classList.add(y10.bottomLeft, y10.corner), t27.appendChild(i30);
    const r29 = document.createElement("div");
    r29.classList.add(y10.bottomRight, y10.corner), t27.appendChild(r29), this._innerContainer = t27, this._manualContainer = o30;
    const s35 = L();
    this._cornerNameToContainerLookup = { "top-left": n34, "top-right": e30, "bottom-left": i30, "bottom-right": r29, "top-leading": s35 ? e30 : n34, "top-trailing": s35 ? n34 : e30, "bottom-leading": s35 ? r29 : i30, "bottom-trailing": s35 ? i30 : r29 }, this._positionNameToContainerLookup = { manual: o30, ...this._cornerNameToContainerLookup };
  }
  _isValidPosition(t27) {
    return !!this._positionNameToContainerLookup[t27];
  }
  _place(t27) {
    const o30 = t27.position ?? "manual", { component: n34, index: e30 } = t27, i30 = this._positionNameToContainerLookup[o30], r29 = null != e30 && e30 > -1;
    if (C6(n34.widget) && n34.widget.startup(), !r29) return void i30.appendChild(n34.node);
    const s35 = Array.from(i30.children);
    if (0 !== s35.length) {
      for (const t28 of s35) {
        const o31 = this._findByNode(t28);
        if (o31 && e30 < (this._componentMap.get(o31)?.index ?? 0)) return void t28.parentNode?.insertBefore(n34.node, t28);
      }
      i30.appendChild(n34.node);
    } else i30.appendChild(n34.node);
  }
  _toPixelPosition(t27) {
    return { top: v6(t27.top), left: v6(t27.left), right: v6(t27.right), bottom: v6(t27.bottom) };
  }
  _findByComponent(t27) {
    return this._components.find((o30) => o30 === t27) ?? null;
  }
  _findById(t27) {
    return this._components.find(({ id: o30 }) => o30 === t27) ?? null;
  }
  _findByNode(t27) {
    return t27 ? this._components.find(({ node: o30 }) => o30 === t27) : null;
  }
  _getComponentsAtPosition(t27, o30) {
    const e30 = this._positionNameToContainerLookup[t27];
    return Array.prototype.slice.call(e30.children).map((t28) => this._findByNode(t28)).filter(N).filter((t28) => o30.includeInternal || !this._componentMap.get(t28)?.internal).map(({ widget: t28, node: o31 }) => t28 ?? o31);
  }
  _getNumComponentsAtPosition(t27) {
    const o30 = this._positionNameToContainerLookup[t27];
    return o30?.children.length ?? 0;
  }
};
__decorate([m2()], L6.prototype, "_locale", void 0), __decorate([m2()], L6.prototype, "container", null), __decorate([m2()], L6.prototype, "height", null), __decorate([m2({ value: _10 })], L6.prototype, "padding", null), __decorate([s4("padding")], L6.prototype, "castPadding", null), __decorate([m2()], L6.prototype, "view", void 0), __decorate([m2()], L6.prototype, "width", null), L6 = __decorate([a2("esri.views.ui.UI")], L6);
var N2 = L6;

// node_modules/@arcgis/core/views/3d/layers/Lyr3DWasm.js
var a29 = /* @__PURE__ */ new Map();
function l23(e30) {
  return a29.get(e30);
}

// node_modules/@arcgis/core/widgets/Attribution/AttributionViewModel.js
function f17(t27, e30) {
  return t27 && "copyright" in t27 && (!e30 || "function" == typeof t27.originOf && "user" === t27.originOf("copyright"));
}
function y11(t27, e30) {
  return t27.length !== e30.length || t27.some((t28, i30) => t28.text !== e30[i30].text);
}
function b11(t27, e30, i30) {
  if (!i30 || !e30) return;
  t27.find((t28) => t28.layerView === e30 && t28.text === i30) || t27.push({ text: i30, layerView: e30 });
}
function g13(t27) {
  return "bing-maps" === t27.type;
}
var A5 = [];
var _11 = class extends b {
  constructor(t27) {
    super(t27), this._clear = () => {
      this._fetchedAttributionData.clear(), this._pendingAttributions.clear(), this.removeHandles("suspension"), this.notifyChange("state");
    }, this._pendingAttributions = /* @__PURE__ */ new Set(), this._fetchedAttributionData = /* @__PURE__ */ new Map(), this.items = new O(), this.view = null, this._allLayerViewsChange = (t28) => {
      this.removeHandles("suspension"), this.removeHandles("visible-geometry-changed");
      const e30 = this.view?.allLayerViews;
      e30 && (this.addHandles(e30.map((t29) => l5(() => [t29.suspended, t29.layer?.attributionVisible], () => this._updateAttributionItems())).toArray(), "suspension"), e30.forEach((t29) => {
        "esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D" === t29.declaredClass && this.addHandles(t29.on("visible-geometry-changed", () => this._updateAttributionItems()), "visible-geometry-changed");
      })), t28?.removed && t28.removed.forEach((t29) => {
        this._pendingAttributions.delete(t29), this._fetchedAttributionData.delete(t29);
      }), this._updateAttributionItems();
    }, this.addHandles([a4(() => this.view?.allLayerViews, "change", (t28) => this._allLayerViewsChange(t28), { onListenerAdd: () => this._allLayerViewsChange(), onListenerRemove: this._clear }), f(() => true === this.view?.stationary, () => this._updateAttributionItems())]);
  }
  destroy() {
    this.view = null, this._fetchedAttributionData.clear(), this._pendingAttributions.clear(), this.items.removeAll();
  }
  get state() {
    return this.view?.ready ? this._pendingAttributions.size > 0 ? "loading" : "ready" : "disabled";
  }
  _updateAttributionItems() {
    const t27 = this.view, e30 = t27?.allLayerViews;
    A5.length = 0;
    let i30 = false, r29 = null;
    if (!t27 || !e30) return void this._clear();
    e30.forEach((e31) => {
      if (e31.suspended || !e31.layer?.attributionVisible) return;
      const s36 = e31.layer;
      if (f17(s36, "user")) return void b11(A5, e31, s36.copyright);
      if ("integrated-mesh-3dtiles" === s36.type && s36.hasGoogleUrl && (i30 = true, r29 = e31), s36.hasAttributionData) {
        if (this._fetchedAttributionData.has(e31)) {
          const i31 = this._fetchedAttributionData.get(e31);
          return void (i31 ? b11(A5, e31, this._getDynamicAttribution(i31, t27, s36)) : f17(s36) && b11(A5, e31, s36.copyright));
        }
        return void this._fetchAttributionData(e31);
      }
      const o30 = "portalItem" in s36 ? s36.portalItem?.accessInformation : void 0;
      b11(A5, e31, o30 || s36.copyright);
    });
    const s35 = e30.find((t28) => "integrated-mesh-3dtiles" === t28.layer?.type);
    if (this.view && s35) {
      const t28 = l23(this.view);
      if (t28) {
        const e31 = t28.getAttributionText();
        for (let t29 = e31.length - 1; t29 > -1; --t29) A5.unshift({ text: e31[t29], layerView: s35 });
      }
    }
    i30 && r29 && A5.unshift({ text: "Google Maps", layerView: r29 }), y11(this.items, A5) && (this.items.removeAll(), this.items.addMany(A5)), A5.length = 0, this.notifyChange("state");
  }
  async _fetchAttributionData(t27) {
    if (this._pendingAttributions.has(t27)) return;
    this._pendingAttributions.add(t27);
    const e30 = await _2(t27.layer.fetchAttributionData());
    if (this._pendingAttributions.has(t27)) {
      const i30 = e30.ok ? this._createContributionIndex(e30.value, g13(t27.layer)) : null;
      this._pendingAttributions.delete(t27), this._fetchedAttributionData.set(t27, i30);
    }
    this._updateAttributionItems();
  }
  _createContributionIndex(t27, e30) {
    const i30 = t27.contributors, r29 = {};
    if (!i30) return r29;
    for (let s35 = 0; s35 < i30.length; s35++) {
      const t28 = i30[s35], o30 = t28.coverageAreas;
      if (!o30) return;
      for (const i31 of o30) {
        const o31 = i31.bbox, n34 = i31.zoomMin - (e30 && i31.zoomMin ? 1 : 0), a31 = i31.zoomMax - (e30 && i31.zoomMax ? 1 : 0), l24 = new z({ xmin: o31[1], ymin: o31[0], xmax: o31[3], ymax: o31[2], spatialReference: f2.WGS84 }), u19 = { extent: j3(l24), attribution: t28.attribution || "", score: null != i31.score ? i31.score : 100, id: s35 };
        for (let t29 = n34; t29 <= a31; t29++) r29[t29] ??= [], r29[t29].push(u19);
      }
    }
    return r29.maxKey = Math.max.apply(null, Object.keys(r29)), r29;
  }
  _getDynamicAttribution(t27, e30, i30) {
    const { extent: r29, scale: s35 } = e30;
    let o30 = i30.tileInfo?.scaleToZoom(s35) ?? 0;
    if (o30 = Math.min(t27.maxKey ?? 0, Math.round(o30)), !r29 || null == o30 || o30 <= -1) return "";
    const n34 = t27[o30], a31 = y2(r29.center.clone().normalize(), f2.WebMercator), l24 = /* @__PURE__ */ new Set();
    return n34 ? n34.filter((t28) => {
      const e31 = t28.id, i31 = !l24.has(e31) && a31 && t28.extent && t5(t28.extent, a31);
      return i31 && l24.add(e31), i31;
    }).sort((t28, e31) => e31.score - t28.score || t28.objectId - e31.objectId).map((t28) => t28.attribution).join(", ") : "";
  }
};
__decorate([m2({ readOnly: true, type: O })], _11.prototype, "items", void 0), __decorate([m2({ readOnly: true })], _11.prototype, "state", null), __decorate([m2()], _11.prototype, "view", void 0), _11 = __decorate([a2("esri.widgets.Attribution.AttributionViewModel")], _11);
var v7 = _11;

// node_modules/@arcgis/core/widgets/Attribution.js
var d19 = "esri-attribution";
var h14 = { base: d19, poweredBy: `${d19}__powered-by`, sources: `${d19}__sources`, open: `${d19}--open`, sourcesOpen: `${d19}__sources--open`, link: `${d19}__link` };
var u16 = class extends B {
  constructor(e30, t27) {
    super(e30, t27), this._isOpen = false, this._attributionTextOverflowed = false, this._prevSourceNodeHeight = 0, this._sourcesNode = null, this._overflowRequestAnimationFrame = null, this._resizeObserver = new ResizeObserver((e31) => {
      e31.forEach(({ target: e32 }) => {
        this._scheduleOverflowCheck(e32);
      });
    }), this._mutationObserver = new MutationObserver((e31) => {
      let t28 = false;
      for (const i30 of e31) if ("childList" === i30.type || "characterData" === i30.type || "attributes" === i30.type) {
        t28 = true;
        break;
      }
      t28 && this._sourcesNode && this._scheduleOverflowCheck(this._sourcesNode);
    }), this.itemDelimiter = " | ", this.messages = null, this.viewModel = new v7();
  }
  initialize() {
    this.addHandles(a4(() => this.viewModel?.items, "change", () => this.scheduleRender()));
  }
  destroy() {
    this._resizeObserver?.disconnect(), this._mutationObserver?.disconnect(), null != this._overflowRequestAnimationFrame && (cancelAnimationFrame(this._overflowRequestAnimationFrame), this._overflowRequestAnimationFrame = null);
  }
  get _isInteractive() {
    return this._isOpen || this._attributionTextOverflowed;
  }
  _scheduleOverflowCheck(e30) {
    null == this._overflowRequestAnimationFrame && (this._overflowRequestAnimationFrame = requestAnimationFrame(() => {
      this._overflowRequestAnimationFrame = null, this._checkSourceTextOverflow(e30);
    }));
  }
  get attributionText() {
    return this.viewModel.items.reduce((e30, t27) => (e30.includes(t27.text) || e30.push(t27.text), e30), []).join(this.itemDelimiter);
  }
  get icon() {
    return "description";
  }
  set icon(e30) {
    this._overrideIfSome("icon", e30);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e30) {
    this._overrideIfSome("label", e30);
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e30) {
    this.viewModel.view = e30;
  }
  render() {
    const e30 = { [h14.open]: this._isOpen };
    return n8("div", { bind: this, class: this.classes(h14.base, e11.widget, e30), dir: "ltr", onclick: this._toggleState, onkeydown: this._toggleState }, this._renderSourcesNode(), this._renderPoweredBy());
  }
  _renderPoweredBy() {
    return n8("div", { class: h14.poweredBy }, "Powered by", " ", n8("a", { class: h14.link, href: "https://www.esri.com/", rel: "noreferrer", target: "_blank" }, "Esri"));
  }
  _renderSourcesNode() {
    const e30 = this._isOpen, t27 = this._isInteractive, i30 = t27 ? 0 : void 0, { attributionText: r29 } = this, s35 = { [h14.sourcesOpen]: e30, [e11.interactive]: t27 };
    return n8("div", { afterCreate: this._afterSourcesNodeCreate, bind: this, class: this.classes(h14.sources, s35), innerHTML: r29, tabIndex: i30 });
  }
  _afterSourcesNodeCreate(e30) {
    this._prevSourceNodeHeight = e30.clientWidth, this._sourcesNode = e30, this._resizeObserver.observe(e30), this._mutationObserver.observe(e30, { subtree: true, childList: true, characterData: true, attributes: true }), this._scheduleOverflowCheck(e30);
  }
  _checkSourceTextOverflow(e30) {
    let t27 = false;
    const { clientHeight: i30, clientWidth: r29, scrollWidth: s35 } = e30, o30 = s35 > r29, n34 = this._attributionTextOverflowed !== o30;
    if (this._attributionTextOverflowed = o30, n34 && (t27 = true), this._isOpen) {
      const e31 = i30 < this._prevSourceNodeHeight;
      this._prevSourceNodeHeight = i30, e31 && (this._isOpen = false, t27 = true);
    }
    t27 && this.scheduleRender();
  }
  _toggleState() {
    this._isInteractive && (this._isOpen = !this._isOpen);
  }
};
__decorate([m2()], u16.prototype, "_isOpen", void 0), __decorate([m2()], u16.prototype, "_isInteractive", null), __decorate([m2()], u16.prototype, "_attributionTextOverflowed", void 0), __decorate([m2()], u16.prototype, "_prevSourceNodeHeight", void 0), __decorate([m2({ readOnly: true, dependsOn: ["viewModel.items.length", "itemDelimiter"] })], u16.prototype, "attributionText", null), __decorate([m2()], u16.prototype, "icon", null), __decorate([m2()], u16.prototype, "itemDelimiter", void 0), __decorate([m2()], u16.prototype, "label", null), __decorate([m2(), e6("esri/widgets/Attribution/t9n/Attribution")], u16.prototype, "messages", void 0), __decorate([m2()], u16.prototype, "view", null), __decorate([m2({ type: v7 })], u16.prototype, "viewModel", void 0), __decorate([t9()], u16.prototype, "_toggleState", null), u16 = __decorate([a2("esri.widgets.Attribution")], u16);
var p20 = u16;

// node_modules/@arcgis/core/widgets/Compass/utils.js
function e28(e30) {
  return e30?.spatialReference?.isWebMercator || e30?.spatialReference?.isGeographic || false;
}

// node_modules/@arcgis/core/widgets/Compass/CompassViewModel.js
var h15 = class extends i9(b) {
  constructor(t27) {
    super(t27), this.orientation = { x: 0, y: 0, z: 0 }, this.view = null, this._updateForCamera = this._updateForCamera.bind(this), this._updateForRotation = this._updateForRotation.bind(this), this._updateRotationWatcher = this._updateRotationWatcher.bind(this);
  }
  initialize() {
    this._watchForView(h);
  }
  destroy() {
    this.view = null;
  }
  get canShowNorth() {
    return e28(this.view);
  }
  get state() {
    return !this.view?.ready || "2d" === this.view.type && !this.view.constraints.rotationEnabled ? "disabled" : this.canShowNorth ? "compass" : "rotation";
  }
  reset() {
    this.view?.ready && ("2d" === this.view?.type ? this.callGoTo({ target: { rotation: 0 }, options: { animationMode: "always", duration: r13() } }) : this.callGoTo({ target: { heading: 0 } }));
  }
  _updateForRotation(t27) {
    null != t27 && this._set("orientation", { z: t27 });
  }
  _updateForCamera(t27) {
    if (!t27) return;
    const o30 = -t27.heading;
    this._set("orientation", { x: 0, y: 0, z: o30 });
  }
  _updateRotationWatcher(t27) {
    this.removeAllHandles(), this._watchForView(), t27 && this.addHandles("2d" === t27.type ? l5(() => t27?.rotation, this._updateForRotation, h) : l5(() => t27?.camera, this._updateForCamera, h));
  }
  _watchForView(t27) {
    this.addHandles(l5(() => this.view, this._updateRotationWatcher, t27));
  }
};
__decorate([m2({ readOnly: true })], h15.prototype, "canShowNorth", null), __decorate([m2({ readOnly: true })], h15.prototype, "orientation", void 0), __decorate([m2({ readOnly: true })], h15.prototype, "state", null), __decorate([m2()], h15.prototype, "view", void 0), h15 = __decorate([a2("esri.widgets.Compass.CompassViewModel")], h15);
var p21 = h15;

// node_modules/@arcgis/core/widgets/Compass/css.js
var n32 = "esri-compass";
var o28 = { base: n32, iconContainer: `${n32}__icon-container` };

// node_modules/@arcgis/core/widgets/Compass.js
var c23 = class extends B {
  constructor(e30, t27) {
    super(e30, t27), this.messages = null, this.viewModel = new p21(), this._reset = () => {
      this.viewModel.reset();
    }, this._toRotationTransform = (e31) => ({ transform: `rotateZ(${e31.z}deg)` });
  }
  loadDependencies() {
    return c3({ button: () => import("./calcite-button-MKDUFM5F.js"), icon: () => import("./calcite-icon-YAZUXSRW.js") });
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e30) {
    this.viewModel.goToOverride = e30;
  }
  get icon() {
    return "rotation" === this.viewModel.state ? "arrow-up" : "compass-needle";
  }
  set icon(e30) {
    this._overrideIfSome("icon", e30);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(e30) {
    this._overrideIfSome("label", e30);
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e30) {
    this.viewModel.view = e30;
  }
  reset() {
    return this.viewModel.reset();
  }
  render() {
    const { orientation: e30, state: t27 } = this.viewModel, { messages: o30 } = this;
    return n8("div", { class: this.classes(o28.base, e11.widget) }, n8("calcite-button", { class: e11.widgetButton, disabled: "disabled" === t27, kind: "neutral", label: o30.reset, onclick: this._reset, round: true, scale: "s", title: o30.reset }, n8("div", { "aria-hidden": "true", class: o28.iconContainer, title: o30.reset }, n8("calcite-icon", { icon: this.icon, styles: this._toRotationTransform(e30) }))));
  }
};
__decorate([m2()], c23.prototype, "goToOverride", null), __decorate([m2()], c23.prototype, "icon", null), __decorate([m2()], c23.prototype, "label", null), __decorate([m2(), e6("esri/widgets/Compass/t9n/Compass")], c23.prototype, "messages", void 0), __decorate([m2()], c23.prototype, "view", null), __decorate([m2({ type: p21 })], c23.prototype, "viewModel", void 0), c23 = __decorate([a2("esri.widgets.Compass")], c23);
var d20 = c23;

// node_modules/@arcgis/core/widgets/NavigationToggle/css.js
var o29 = "esri-navigation-toggle";
var t25 = { base: o29, isLayoutHorizontal: `${o29}--horizontal` };

// node_modules/@arcgis/core/widgets/NavigationToggle/NavigationToggleViewModel.js
var n33 = class extends b {
  constructor(t27) {
    super(t27), this._navigationMode = "pan", this.view = null, t27?.isDefaultViewModel || o2(i.getLogger(this), "Navigation Toggle", "arcgis-navigation-toggle", { version: "4.33" });
  }
  normalizeCtorArgs(t27 = {}) {
    const { isDefaultViewModel: o30, ...i30 } = t27;
    return i30;
  }
  initialize() {
    this.addHandles(f(() => this.view?.navigation?.actionMap, () => this._updateNavigationActionMap()));
  }
  destroy() {
    this.view = null;
  }
  get state() {
    return this.view?.ready && "3d" === this.view?.type ? "ready" : "disabled";
  }
  get navigationMode() {
    return this._navigationMode;
  }
  set navigationMode(t27) {
    this._navigationMode = t27, this._updateNavigationActionMap();
  }
  toggle() {
    "disabled" !== this.state && (this.navigationMode = "pan" !== this.navigationMode ? "pan" : "rotate");
  }
  _updateNavigationActionMap() {
    const t27 = this.view?.navigation?.actionMap;
    if (!t27) return;
    const o30 = "pan" === this._navigationMode;
    t27.dragPrimary = o30 ? "pan" : "rotate", t27.dragSecondary = o30 ? "rotate" : "pan";
  }
};
__decorate([m2({ readOnly: true })], n33.prototype, "state", null), __decorate([m2()], n33.prototype, "_navigationMode", void 0), __decorate([m2()], n33.prototype, "view", void 0), n33 = __decorate([a2("esri.widgets.NavigationToggle.NavigationToggleViewModel")], n33);
var g14 = n33;

// node_modules/@arcgis/core/widgets/NavigationToggle.js
var u17 = class extends B {
  constructor(t27, i30) {
    super(t27, i30), this.messages = null, this.viewModel = new g14({ isDefaultViewModel: true }), this.toggle = () => this.viewModel.toggle(), this._panButton = null, this._rotateButton = null, this._toggle = () => {
      const t28 = "pan" === this.viewModel?.navigationMode ? this._rotateButton : this._panButton;
      j2(t28), this.toggle();
    }, t27?.isDefaultUI || r(i.getLogger(this), "Navigation Toggle", "arcgis-navigation-toggle", { version: "4.32" });
  }
  normalizeCtorArgs(t27 = {}) {
    const { isDefaultUI: o30, ...e30 } = t27;
    return e30;
  }
  loadDependencies() {
    return c3({ button: () => import("./calcite-button-MKDUFM5F.js") });
  }
  get icon() {
    return "move";
  }
  set icon(t27) {
    this._overrideIfSome("icon", t27);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(t27) {
    this._overrideIfSome("label", t27);
  }
  set layout(t27) {
    "horizontal" !== t27 && (t27 = "vertical"), this._set("layout", t27);
  }
  get view() {
    return this.viewModel.view;
  }
  set view(t27) {
    this.viewModel.view = t27;
  }
  render() {
    const t27 = "disabled" === this.viewModel?.state, o30 = "pan" === this.viewModel?.navigationMode, e30 = this.messages.toggle;
    return n8("div", { class: this.classes(t25.base, e11.widget, { [t25.isLayoutHorizontal]: "horizontal" === this.layout }) }, n8("calcite-button", { afterCreate: (t28) => {
      this._panButton = t28;
    }, appearance: o30 ? "outline-fill" : "solid", class: e11.widgetButton, disabled: t27, iconStart: "move", kind: "neutral", label: e30, onclick: this._toggle, tabIndex: o30 ? void 0 : -1, title: e30 }), n8("calcite-button", { afterCreate: (t28) => {
      this._rotateButton = t28;
    }, appearance: o30 ? "solid" : "outline-fill", class: e11.widgetButton, disabled: t27, iconStart: "rotate", kind: "neutral", label: e30, onclick: this._toggle, tabIndex: o30 ? -1 : void 0, title: e30 }));
  }
};
__decorate([m2()], u17.prototype, "icon", null), __decorate([m2()], u17.prototype, "label", null), __decorate([m2({ value: "vertical" })], u17.prototype, "layout", null), __decorate([m2(), e6("esri/widgets/NavigationToggle/t9n/NavigationToggle")], u17.prototype, "messages", void 0), __decorate([m2()], u17.prototype, "view", null), __decorate([m2({ type: g14 })], u17.prototype, "viewModel", void 0), u17 = __decorate([a2("esri.widgets.NavigationToggle")], u17);
var m22 = u17;

// node_modules/@arcgis/core/widgets/Zoom/ZoomConditions2D.js
var s33 = class extends b {
  get canZoomIn() {
    const o30 = this.view?.ready;
    if (!o30) return false;
    const t27 = this.view?.constraints?.effectiveMaxScale;
    return 0 === t27 || this._scale > t27;
  }
  get canZoomOut() {
    const { view: o30 } = this, t27 = o30?.ready;
    if (!t27) return false;
    const e30 = o30.constraints?.effectiveMinScale;
    return 0 === e30 || this._scale < e30;
  }
  get _scale() {
    const o30 = this.view?.animation?.target;
    return (o30 && "then" in o30 ? void 0 : o30?.scale) ?? this.view?.scale ?? 0;
  }
};
__decorate([m2({ readOnly: true })], s33.prototype, "canZoomIn", null), __decorate([m2({ readOnly: true })], s33.prototype, "canZoomOut", null), __decorate([m2()], s33.prototype, "view", void 0), __decorate([m2()], s33.prototype, "_scale", null), s33 = __decorate([a2("esri.widgets.Zoom.ZoomConditions2D")], s33);
var c24 = s33;

// node_modules/@arcgis/core/widgets/Zoom/ZoomConditions3D.js
var s34 = class extends b {
  get canZoomIn() {
    return !!this.view.ready;
  }
  get canZoomOut() {
    return !!this.view.ready;
  }
};
__decorate([m2({ readOnly: true })], s34.prototype, "canZoomIn", null), __decorate([m2({ readOnly: true })], s34.prototype, "canZoomOut", null), __decorate([m2()], s34.prototype, "view", void 0), s34 = __decorate([a2("esri.widgets.Zoom.ZoomConditions3D")], s34);
var c25 = s34;

// node_modules/@arcgis/core/widgets/Zoom/ZoomViewModel.js
var m23 = class extends b {
  constructor(o30) {
    super(o30);
  }
  destroy() {
    this.view = null;
  }
  get canZoomIn() {
    return null != this._zoomConditions && this._zoomConditions.canZoomIn;
  }
  get canZoomOut() {
    return null != this._zoomConditions && this._zoomConditions?.canZoomOut;
  }
  get state() {
    return this.view?.ready ? "ready" : "disabled";
  }
  set view(o30) {
    o30 ? "2d" === o30.type ? this._zoomConditions = new c24({ view: o30 }) : "3d" === o30.type && (this._zoomConditions = new c25({ view: o30 })) : this._zoomConditions = null, this._set("view", o30);
  }
  zoomIn() {
    const o30 = this.view;
    this.canZoomIn && o30 && ("2d" === o30.type ? o30.mapViewNavigation.zoomIn() : y(o30.goTo({ zoomFactor: 2 })));
  }
  zoomOut() {
    const o30 = this.view;
    this.canZoomOut && o30 && ("2d" === o30.type ? o30.mapViewNavigation.zoomOut() : y(o30.goTo({ zoomFactor: 0.5 })));
  }
};
__decorate([m2()], m23.prototype, "_zoomConditions", void 0), __decorate([m2()], m23.prototype, "canZoomIn", null), __decorate([m2()], m23.prototype, "canZoomOut", null), __decorate([m2({ readOnly: true })], m23.prototype, "state", null), __decorate([m2()], m23.prototype, "view", null), m23 = __decorate([a2("esri.widgets.Zoom.ZoomViewModel")], m23);
var p22 = m23;

// node_modules/@arcgis/core/widgets/Zoom.js
var m24 = { base: "esri-zoom", horizontalLayout: "esri-zoom--horizontal" };
var p23 = class extends B {
  constructor(o30, t27) {
    super(o30, t27), this.messages = null, this.viewModel = new p22(), this.zoomIn = () => this.viewModel.zoomIn(), this.zoomOut = () => this.viewModel.zoomOut();
  }
  loadDependencies() {
    return c3({ button: () => import("./calcite-button-MKDUFM5F.js") });
  }
  get icon() {
    return "magnifying-glass-plus";
  }
  set icon(o30) {
    this._overrideIfSome("icon", o30);
  }
  get label() {
    return this.messages?.widgetLabel ?? "";
  }
  set label(o30) {
    this._overrideIfSome("label", o30);
  }
  set layout(o30) {
    "horizontal" !== o30 && (o30 = "vertical"), this._set("layout", o30);
  }
  set view(o30) {
    this.viewModel.view = o30;
  }
  get view() {
    return this.viewModel.view;
  }
  render() {
    const o30 = { [m24.horizontalLayout]: "horizontal" === this.layout }, { canZoomIn: t27, canZoomOut: e30 } = this.viewModel, { zoomIn: s35, zoomOut: i30 } = this.messages;
    return n8("div", { class: this.classes(m24.base, e11.widget, o30) }, n8("calcite-button", { class: e11.widgetButton, disabled: !t27, iconStart: "plus", kind: "neutral", label: s35, onclick: this.zoomIn, title: s35 }), n8("calcite-button", { class: e11.widgetButton, disabled: !e30, iconStart: "minus", kind: "neutral", label: i30, onclick: this.zoomOut, title: i30 }));
  }
};
__decorate([m2()], p23.prototype, "icon", null), __decorate([m2()], p23.prototype, "label", null), __decorate([m2({ value: "vertical" })], p23.prototype, "layout", null), __decorate([m2(), e6("esri/widgets/Zoom/t9n/Zoom")], p23.prototype, "messages", void 0), __decorate([m2()], p23.prototype, "view", null), __decorate([m2({ type: p22 })], p23.prototype, "viewModel", void 0), p23 = __decorate([a2("esri.widgets.Zoom")], p23);
var c26 = p23;

// node_modules/@arcgis/core/views/ui/DefaultUI.js
function m25(t27) {
  return void 0 !== t27?.view;
}
var h16 = class extends N2 {
  constructor(t27) {
    super(t27), this._defaultPositionLookup = { attribution: "manual", compass: "top-left", "navigation-toggle": "top-left", zoom: "top-left" }, this.components = [], this._updateViewAwareWidgets = (t28) => {
      this.components.forEach((o30) => {
        const e30 = this._find(o30), i30 = e30?.widget;
        m25(i30) && (i30.view = t28);
      });
    }, this._componentsWatcher = (t28, o30) => {
      this._removeComponents(o30), this._addComponents(t28), this._adjustPadding(t28);
    };
  }
  initialize() {
    this.addHandles([l5(() => this.components, this._componentsWatcher, h), l5(() => this.view, this._updateViewAwareWidgets, h)]);
  }
  _add(t27, o30, e30, i30, s35) {
    let r29 = t27;
    if ("string" == typeof t27 && this._defaultPositionLookup[t27]) {
      if (this._find(t27)) return;
      r29 = this._createComponent(t27);
    }
    super._add(r29, o30, e30, i30, s35);
  }
  _removeComponents(t27) {
    t27.forEach((t28) => {
      const o30 = this._find(t28);
      o30 && (this.remove(o30), o30.destroy());
    });
  }
  _adjustPadding(t27) {
    if (!t27.includes("attribution") && !this._isOverridden("padding")) {
      const { top: t28 } = this.padding;
      this.padding = t28;
    }
  }
  _addComponents(t27) {
    this.constructed && t27.forEach((t28) => this.add(this._createComponent(t28), this._defaultPositionLookup[t28]));
  }
  _createComponent(t27) {
    const o30 = this._createWidget(t27);
    return new m21({ id: t27, node: o30 });
  }
  _createWidget(t27) {
    const o30 = this.view;
    switch (t27) {
      case "attribution":
        return new p20({ view: o30 });
      case "compass":
        return new d20({ view: o30 });
      case "navigation-toggle":
        return new m22({ view: o30, isDefaultUI: true });
      case "zoom":
        return new c26({ view: o30 });
    }
  }
};
__decorate([m2()], h16.prototype, "components", void 0), h16 = __decorate([a2("esri.views.ui.DefaultUI")], h16);
var u18 = h16;

// node_modules/@arcgis/core/views/ui/2d/DefaultUI2D.js
var e29 = class extends u18 {
  constructor(o30) {
    super(o30), this.components = ["attribution", "zoom"];
  }
};
__decorate([m2()], e29.prototype, "components", void 0), e29 = __decorate([a2("esri.views.ui.2d.DefaultUI2D")], e29);
var p24 = e29;

// node_modules/@arcgis/core/webmap/background/ColorBackground.js
var p25;
var m26 = p25 = class extends n9 {
  constructor(o30) {
    super(o30), this.color = new u4([0, 0, 0, 1]);
  }
  clone() {
    return new p25(a({ color: this.color }));
  }
};
__decorate([m2({ type: u4, json: { write: true } })], m26.prototype, "color", void 0), m26 = p25 = __decorate([a2("esri.webmap.background.ColorBackground")], m26);
var a30 = m26;

// node_modules/@arcgis/core/views/View2D.js
var K2;
var Q2;
var X;
var Y2;
var ee;
var te;
var ie;
async function re() {
  const [, { GraphicsView2D: e30, GraphicContainer: t27, LabelManager: i30, MapViewNavigation: r29, MagnifierView2D: s35, GridView2D: a31, Stage: n34 }] = await Promise.all([import("./webglDeps-URCZLHGB.js"), import("./mapViewDeps-4XLRGU2Z.js")]);
  Q2 = e30, X = t27, Y2 = i30, ee = r29, te = s35, ie = a31, K2 = n34;
}
var _a3;
var se = (_a3 = class extends a22(d10(o13(V(C2(K))))) {
  get timeZone() {
    return super.timeZone;
  }
  set timeZone(e30) {
    super.timeZone = e30;
  }
  constructor(e30) {
    super(e30), this._magnifierView = null, this._gridView = null, this.stage = null, this._resolveWhenReady = [], this.rootLayerViews = new l10({ getCollections: () => [this.basemapView?.baseLayerViews, this.layerViews, this.basemapView?.referenceLayerViews], getChildrenFunction: () => null }), this.featuresTilingScheme = null, this.graphicsView = null, this.labelManager = null, this.navigation = new i18({ actionMap: new p11({ dragTertiary: "none" }) }), this.renderingOptions = { samplingMode: "dynamic", edgeLabelsVisible: true, labelsAnimationTime: 125, labelCollisionsEnabled: true }, this.supersampleScreenshotsEnabled = true, this.analyses = new s12(), this.analysisViewManager = new v5({ importAnalysisViewModule: (e31) => n29(e31), view: this }), this.floors = new O(), this.grid = null, this.map = null, this.timeline = new e14(), this.type = "2d", this.view2dType = null, this.ui = new p24(), this.animationsEnabled = true, this.test = { takeScreenshot: async (e31) => r28(this._getScreenshotView(e31), e31) }, this.padding = { top: 0, right: 0, bottom: 0, left: 0 }, m8();
  }
  destroy() {
    this.layerViewManager.clear(), this._set("preconditionsReady", false), this.frameTask = u(this.frameTask), this.goToManager.destroy(), this.rootLayerViews.destroy(), this.inputManager.destroy(), this._set("inputManager", null);
  }
  get graphicsTileStore() {
    return new u13(this.featuresTilingScheme);
  }
  get constraintsInfo() {
    const e30 = this.defaultsFromMap?.tileInfo, t27 = this.spatialReference;
    return { lods: e30?.spatialReference?.equals(t27) ? e30.lods : null, spatialReference: t27 };
  }
  get initialExtentRequired() {
    if (!this.stateManager) return false;
    const { scale: e30, constraints: t27, center: i30, viewpoint: r29, extent: s35 } = this;
    let a31 = this.zoom;
    return !(this.map && "initialViewProperties" in this.map && this.map.initialViewProperties?.viewpoint) && (!s35 && (t27?.effectiveLODs || (a31 = -1), (!i30 || 0 === e30 && -1 === a31) && (null == r29?.targetGeometry || "extent" !== r29.targetGeometry.type && !r29.scale)));
  }
  get defaultsFromMapSettings() {
    return { required: { extent: false, heightModelInfo: false, tileInfo: true }, requiresExtentInSpatialReference: this.spatialReferenceLocked };
  }
  get scheduler() {
    return this.frameTask.scheduler;
  }
  get typeSpecificPreconditionsReady() {
    const e30 = this._getDefaultViewpoint();
    if (!e30) return false;
    const t27 = e30.targetGeometry, i30 = this.spatialReference;
    return b3(t27.spatialReference, i30);
  }
  get background() {
    return r14(this.map) ? this.map.initialViewProperties.background : null;
  }
  set background(e30) {
    this._override("background", e30);
  }
  get center() {
    return this.stateManager?.center ?? null;
  }
  set center(e30) {
    this.stateManager.center = e30;
  }
  get constraints() {
    return super.constraints;
  }
  set constraints(e30) {
    super.constraints = e30;
  }
  get highlightOptions() {
    return t10(this);
  }
  set highlightOptions(e30) {
    g3(this, e30);
  }
  get padding() {
    return this.stateManager?.padding;
  }
  set padding(e30) {
    this.stateManager && (this.stateManager.padding = e30);
  }
  get rendering() {
    return this.stage?.renderRequested ?? false;
  }
  get resizeAlign() {
    return super.resizeAlign;
  }
  set resizeAlign(e30) {
    super.resizeAlign = e30;
  }
  get resolution() {
    return this.stateManager.resolution ?? 0;
  }
  get rotation() {
    return super.rotation;
  }
  set rotation(e30) {
    super.rotation = e30;
  }
  get scale() {
    return this.stateManager?.scale ?? 0;
  }
  set scale(e30) {
    this.stateManager && (this.stateManager.scale = e30);
  }
  get spatialReference() {
    return super.spatialReference;
  }
  set spatialReference(e30) {
    super.spatialReference = e30;
  }
  get spatialReferenceLocked() {
    return this._get("spatialReferenceLocked");
  }
  set spatialReferenceLocked(e30) {
    this.stage && i.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"), this._set("spatialReferenceLocked", e30);
  }
  get tileInfo() {
    return this.featuresTilingScheme?.tileInfo;
  }
  get updating() {
    const e30 = !(!this.magnifier.visible || null === this.magnifier.position || !this._magnifierView?.updatingHandles.updating), t27 = !this.destroyed && (!this.analysisViewManager || !this.layerViewManager || !this.labelManager || !this.graphicsView || true === this.analysisViewManager.updating || true === this.layerViewManager.updating || true === this.labelManager.updating || true === this.graphicsView.updating || this.allLayerViews.some((e31) => !e31.destroyed && !("layerViews" in e31) && true === e31.updating) || e30);
    if (has("esri-2d-log-updating")) {
      const i30 = this.allLayerViews.reduce((e31, t28) => ({ ...e31, [`${t28.layer.id}(${t28.layer.type})`]: !t28.destroyed && !("layerViews" in t28) && t28.updating }), {});
      console.log(`Updating MapView: ${t27}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(i30)}
-> updatingMagnifier: ${e30}
`);
    }
    return t27;
  }
  get viewpoint() {
    return super.viewpoint;
  }
  set viewpoint(e30) {
    super.viewpoint = e30;
  }
  get visibleArea() {
    const e30 = this.stateManager.visibleArea;
    return e30 ? new P({ rings: [e30.map((e31) => [e31[0], e31[1]])], spatialReference: this.spatialReference }) : e30;
  }
  get zoom() {
    return this.stateManager.zoom ?? -1;
  }
  set zoom(e30) {
    this.stateManager.zoom = e30;
  }
  get navigating() {
    return this.mapViewNavigation?.interacting ?? false;
  }
  async hitTest(e30, t27) {
    return s32(this, e30, t27);
  }
  async takeScreenshot(e30) {
    return o27(this._getScreenshotView(e30), e30);
  }
  toScreen(e30, t27) {
    return this.stateManager.toScreen(e30, t27);
  }
  async whenAnalysisView(e30) {
    if (null == e30.parent) throw new s("view:no-analysisview-for-analysis", "The analysis does not exist in view.analyses", { analysis: e30 });
    return this.analysisViewManager.whenAnalysisView(e30);
  }
  whenLayerView(e30) {
    return super.whenLayerView(e30);
  }
  graphicChanged(e30) {
    if (this.graphicsView) {
      this.graphicsView.graphicUpdateHandler(e30);
    }
  }
  whenReady() {
    return new Promise((e30) => {
      this.ready ? e30(this) : this._resolveWhenReady.push(e30);
    });
  }
  forceDOMReadyCycle() {
    this.forceReadyCycle();
  }
  getDefaultSpatialReference() {
    return this.map && "initialViewProperties" in this.map && this.map.initialViewProperties.spatialReference || this.defaultsFromMap?.spatialReference || null;
  }
  getDefaultTimeZone() {
    return r14(this.map) ? this.map.initialViewProperties.timeZone : null;
  }
  getDefaultTimeExtent() {
    return r14(this.map) ? this.map.initialViewProperties.timeExtent : null;
  }
  getSurface() {
    return this.surface;
  }
  hasLayerViewModule(e30) {
    return l20.hasLayerViewModule(e30);
  }
  importLayerView(e30) {
    return l20.importLayerView(e30);
  }
  pixelSizeAt() {
    return this.ready ? this.resolution : (i.getLogger(this).error("#pixelSizeAt()", "Map view cannot be used before it is ready"), null);
  }
  async popupHitTest(e30) {
    const t27 = this.toMap(e30), i30 = await this.hitTest(e30), r29 = this.allLayerViews.toArray().filter((i31) => i31.clips.every((i32) => m11(this, i32, e30, t27))).reverse(), s35 = new globalThis.Map(r29.map((e31) => [e31.layer.uid, e31])), a31 = [];
    let n34 = 0, o30 = 0;
    for (; n34 < i30.results.length || o30 < r29.length; ) {
      const e31 = i30.results.at(n34);
      if (e31 && "graphic" !== e31.type) {
        ++n34;
        continue;
      }
      const l24 = s35.get((e31?.layer ?? e31?.graphic.layer)?.uid);
      if ((!e31 || l24) && o30 < r29.length && r29.at(o30) !== l24) {
        const e32 = r29.at(o30);
        "fetchPopupFeaturesAtLocation" in e32 && a31.push({ mapPoint: t27, layerView: e32 }), ++o30;
      } else e31 && (a31.push({ graphic: e31.graphic, layerView: l24 }), ++n34);
    }
    return { hits: a31, location: t27 };
  }
  requestUpdate() {
    this.ready && this.frameTask.requestUpdate();
  }
  async validate() {
    let e30 = t23(this.type);
    if (has("safari") && has("safari") < 9 && (e30 = new s("mapview:browser-not-supported", "This browser is not supported by MapView (Safari < 9)", { type: "safari", requiredVersion: 9, detectedVersion: has("safari") })), null != e30) throw i.getLogger(this).warn("#validate()", e30.message), e30;
  }
  loadAsyncDependencies() {
    return re();
  }
  _getDefaultViewpoint() {
    const { constraints: e30, initialExtent: i30, map: r29, padding: s35, size: a31 } = this;
    if (!e30) return null;
    const n34 = r29 && "initialViewProperties" in r29 ? r29.initialViewProperties : void 0, o30 = this.stateManager.getUserStartupOptions(this.size), l24 = n34?.viewpoint, p27 = l24?.targetGeometry?.extent ?? i30, h17 = p27?.center, g15 = l24?.rotation ?? 0, d21 = l24?.scale || p27 && H(p27, [a31[0] - s35.left - s35.right, a31[1] - s35.top - s35.bottom]), c27 = o30.center ?? h17, u19 = o30.rotation ?? g15, m27 = o30.scale ?? d21;
    return c27 && m27 ? new m9({ targetGeometry: c27, scale: m27, rotation: u19 }) : null;
  }
  _startup() {
    this.timeline.begin("MapView Startup");
    const e30 = this._getDefaultViewpoint();
    this.stateManager.startup(e30, this.size, this.spatialReference, this.defaultsFromMap.extent?.center), this.graphics.owner = this;
    const t27 = new c8(this.surface), i30 = new K2(this.surface, { canvas: this.renderCanvas, contextOptions: new e15(this.deactivatedWebGLExtensions, this.debugWebGLExtensions), renderingOptions: this.renderingOptions, timeline: this.timeline }, t27);
    this.stage = i30, this._magnifierView = new te(), this._magnifierView.magnifier = this.magnifier, this._gridView = new ie();
    const r29 = new Y2({ view: this });
    this._set("labelManager", r29);
    const s35 = new x2({ view: this });
    this._set("animationManager", s35);
    const a31 = new ee({ view: this, animationManager: s35 });
    this._set("mapViewNavigation", a31), this._setupSpatialReferenceDependentProperties(), this.addHandles([this.rootLayerViews.on("change", () => this._updateStageChildren()), i30.on("webgl-error", (e31) => this.fatalError = e31.error), l5(() => this.stationary, (e31) => i30.stationary = e31, w2), l5(() => this.background, (e31) => {
      i30.backgroundColor = e31?.color, this._magnifierView.backgroundColor = e31?.color;
    }, w2), l5(() => this.magnifier, (e31) => this._magnifierView.magnifier = e31, w2), l5(() => this.grid, (e31) => this._gridView.grid = e31, w2), l5(() => this.renderingOptions, (e31) => i30.renderingOptions = e31, w2), l5(() => this.highlights.items.map((e31) => ({ name: e31.name, options: { fillColor: e31.color, haloColor: e31.haloColor, fillOpacity: e31.fillOpacity, haloOpacity: e31.haloOpacity, haloWidth: e31.haloWidth, haloBlur: e31.haloBlur } })), () => {
      i30.highlightGradient = a6(i30.highlightGradient, this.highlights.items);
    }, w2), l5(() => this.state.id, () => i30.state = this.state, w2), l5(() => this.animationsEnabled, (e31) => {
      this.stage.animationsEnabled = e31;
    }, w2)], "map-view"), this._updateStageChildren();
    const n34 = this._resolveWhenReady;
    this._resolveWhenReady = [], n34.forEach((e31) => e31(this)), this.timeline.end("MapView Startup"), this.frameTask.start(), this._set("ready", true);
  }
  _teardown() {
    this._destroySpatialReferenceDependentProperties(), this.removeHandles("map-view"), this.mapViewNavigation.destroy(), this._set("mapViewNavigation", null), this.animation = null, this.animationManager.destroy(), this._set("animationManager", null), this.layerViewManager.clear(), this.labelManager.destroy(), this._magnifierView.destroy(), this._gridView.destroy(), this.stage.destroy(), this.stage = null, this._set("graphicsView", null), this._magnifierView = null, this._gridView = null, this._set("labelManager", null), this._set("mapViewNavigation", null), this.graphics.owner = null, this.frameTask.stop(), this.stationaryManager.clear(), this._set("ready", false), this.stateManager.teardown();
  }
  _updateStageChildren() {
    this.stage.removeAllChildren(), this.rootLayerViews.forEach((e31) => {
      this.stage.addChild(e31.container);
    });
    const e30 = this.graphicsView;
    this.stage.addChild(e30.container), this.stage.addChild(this._magnifierView), this.stage.addChild(this._gridView);
  }
  _setupSpatialReferenceDependentProperties() {
    const e30 = new h4(z2.create({ spatialReference: this.spatialReference, size: 512, numLODs: 36 }));
    this._set("featuresTilingScheme", e30);
    const t27 = new Q2({ view: this, graphics: this.graphics, requestUpdateCallback: () => this.requestUpdate(), container: new X(e30) });
    this._set("graphicsView", t27);
  }
  _destroySpatialReferenceDependentProperties() {
    const e30 = this.graphicsView;
    this._set("graphicsView", null), e30.destroy(), this._set("featuresTilingScheme", null);
  }
  _getScreenshotView(e30) {
    const { allLayerViews: t27, padding: i30, size: r29, stage: s35 } = this;
    return { allLayerViews: t27, backgroundColor: e30?.ignoreBackground ? null : this.background?.color, padding: i30, size: r29, stage: s35 };
  }
  _spatialReferenceChanged(e30) {
    if (this.ready) {
      this.frameTask.stop();
      for (const e31 of this.allLayerViews) e31.processDetach();
      this._destroySpatialReferenceDependentProperties(), this.stateManager.changeSpatialReference(e30), this.stage.state = this.state, this._setupSpatialReferenceDependentProperties();
      for (const e31 of this.allLayerViews) e31.processAttach();
      this.frameTask.requestFrame(), this.frameTask.start(), this._updateStageChildren();
    }
  }
}, _a3.type = "2d", _a3);
__decorate([m2({ constructOnly: true })], se.prototype, "deactivatedWebGLExtensions", void 0), __decorate([m2({ constructOnly: true })], se.prototype, "debugWebGLExtensions", void 0), __decorate([m2({ readOnly: true })], se.prototype, "featuresTilingScheme", void 0), __decorate([m2({ readOnly: true })], se.prototype, "graphicsTileStore", null), __decorate([m2()], se.prototype, "graphicsView", void 0), __decorate([m2()], se.prototype, "constraintsInfo", null), __decorate([m2()], se.prototype, "initialExtentRequired", null), __decorate([m2()], se.prototype, "labelManager", void 0), __decorate([m2({ type: i18, nonNullable: true })], se.prototype, "navigation", void 0), __decorate([m2({ constructOnly: true })], se.prototype, "renderCanvas", void 0), __decorate([m2()], se.prototype, "renderingOptions", void 0), __decorate([m2({ constructOnly: true })], se.prototype, "supersampleScreenshotsEnabled", void 0), __decorate([m2()], se.prototype, "defaultsFromMapSettings", null), __decorate([m2({ readOnly: true })], se.prototype, "typeSpecificPreconditionsReady", null), __decorate([m2(l3(s12, "analyses"))], se.prototype, "analyses", void 0), __decorate([m2()], se.prototype, "analysisViewManager", void 0), __decorate([m2({ type: a30 })], se.prototype, "background", null), __decorate([m2()], se.prototype, "center", null), __decorate([m2({ type: O })], se.prototype, "floors", void 0), __decorate([m2()], se.prototype, "grid", void 0), __decorate([m2({ type: u7 })], se.prototype, "highlightOptions", null), __decorate([m2()], se.prototype, "map", void 0), __decorate([m2()], se.prototype, "padding", null), __decorate([m2({ readOnly: true })], se.prototype, "rendering", null), __decorate([m2({ readOnly: true })], se.prototype, "resolution", null), __decorate([m2()], se.prototype, "scale", null), __decorate([m2({ type: Boolean, value: false })], se.prototype, "spatialReferenceLocked", null), __decorate([m2({ readOnly: true })], se.prototype, "tileInfo", null), __decorate([m2({ type: e14, readOnly: true })], se.prototype, "timeline", void 0), __decorate([m2({ readOnly: true })], se.prototype, "type", void 0), __decorate([m2({ readOnly: true })], se.prototype, "updating", null), __decorate([m2({ readOnly: true })], se.prototype, "view2dType", void 0), __decorate([m2({ readOnly: true })], se.prototype, "visibleArea", null), __decorate([m2()], se.prototype, "zoom", null), __decorate([m2({ readOnly: true })], se.prototype, "navigating", null), __decorate([m2(), s4((e30) => e30 instanceof u18 ? e30 : m(p24, e30))], se.prototype, "ui", void 0), __decorate([m2()], se.prototype, "animationsEnabled", void 0), se = __decorate([a2("esri.views.View2D")], se);
var ae = se;

// node_modules/@arcgis/core/views/MapView.js
var t26 = class extends ae {
  constructor(o30) {
    super(o30), this.view2dType = "map";
  }
};
__decorate([m2({ readOnly: true })], t26.prototype, "view2dType", void 0), t26 = __decorate([a2("esri.views.MapView")], t26);
var p26 = t26;
export {
  p26 as default
};
//# sourceMappingURL=@arcgis_core_views_MapView.js.map
