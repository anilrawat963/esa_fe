import {
  C as C2,
  E,
  P as P3,
  a,
  b,
  b2 as b3,
  d as d2,
  f as f4,
  g,
  g2,
  i as i4,
  j,
  l as l2,
  o as o3,
  p as p2,
  p2 as p3,
  s as s3,
  s2 as s4,
  s3 as s6,
  u
} from "./chunk-OVCUKFGI.js";
import {
  T
} from "./chunk-VDZWDLQQ.js";
import {
  r as r2,
  t as t2
} from "./chunk-XZMK6YI6.js";
import {
  d,
  f as f3,
  y as y2
} from "./chunk-2ZH6SNCD.js";
import {
  D,
  I as I3,
  O,
  P2 as P4,
  R as R2,
  b as b2,
  x,
  z2 as z3
} from "./chunk-EC6KNOF4.js";
import {
  I as I2
} from "./chunk-J4LH6NQT.js";
import {
  Ae,
  De,
  H as H2,
  I,
  Je,
  K,
  Ke,
  L,
  Le,
  P as P2,
  Pe,
  Q,
  R,
  Re,
  Se,
  U,
  _ as _2,
  de,
  e as e2,
  ge,
  ie,
  n as n5,
  ne,
  oe,
  p,
  q,
  r as r3,
  re,
  s as s2,
  s2 as s5,
  te,
  tt,
  v,
  ve,
  ye,
  z as z2
} from "./chunk-AH42IBBP.js";
import {
  o
} from "./chunk-MDJNYPVI.js";
import {
  M,
  d as d3,
  h as h2,
  o as o4,
  p as p4,
  q as q2,
  w
} from "./chunk-XCY6WRAI.js";
import {
  c as c2,
  i as i2,
  l,
  n as n3,
  s
} from "./chunk-4PXNA4MD.js";
import {
  f as f2
} from "./chunk-GD4FJL3C.js";
import {
  e,
  i as i3,
  n as n4,
  o as o2,
  t
} from "./chunk-C5OQVQZF.js";
import {
  M as M2
} from "./chunk-7P2ANHQ3.js";
import {
  m
} from "./chunk-3FUHCAX3.js";
import {
  P,
  y3 as y
} from "./chunk-PZ5RULLK.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  _,
  c
} from "./chunk-AXZMNHTN.js";
import {
  f
} from "./chunk-5T3MJDSR.js";
import {
  H2 as H
} from "./chunk-V2H77UEV.js";
import {
  r4 as r
} from "./chunk-5EI5H4QX.js";
import {
  C,
  n as n2
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i
} from "./chunk-QY7XKUIV.js";
import {
  h,
  has,
  n
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/arcade/functions/geomsync.js
var G;
async function H3() {
  null == G && (G = await import("./operators-EDPMUI3N.js"), await G.loadAll());
}
function F(H6, F4) {
  H6.disjoint = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null === a3[0] || null === a3[1] || G.disjoint.execute(a3[0], a3[1])));
  }, H6.intersects = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null !== a3[0] && null !== a3[1] && G.intersects.execute(a3[0], a3[1])));
  }, H6.touches = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null !== a3[0] && null !== a3[1] && G.touches.execute(a3[0], a3[1])));
  }, H6.crosses = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null !== a3[0] && null !== a3[1] && G.crosses.execute(a3[0], a3[1])));
  }, H6.within = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null !== a3[0] && null !== a3[1] && G.within.execute(a3[0], a3[1])));
  }, H6.contains = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null !== a3[0] && null !== a3[1] && G.contains.execute(a3[0], a3[1])));
  }, H6.overlaps = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null !== a3[0] && null !== a3[1] && G.overlaps.execute(a3[0], a3[1])));
  }, H6.equals = function(e5, n7) {
    return F4(e5, n7, (t5, r5, u3) => (oe(u3, 2, 2, e5, n7), u3[0] === u3[1] || (u3[0] instanceof c && u3[1] instanceof c ? G.equals.execute(u3[0], u3[1]) : (ne(u3[0]) && ne(u3[1]) || ie(u3[0]) && ie(u3[1]) || !(!re(u3[0]) || !re(u3[1]))) && u3[0].equals(u3[1]))));
  }, H6.relate = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 3, 3, e5, t5), o6[0] instanceof c && o6[1] instanceof c) return G.relate.execute(o6[0], o6[1], ge(o6[2]));
      if (o6[0] instanceof c && null === o6[1]) return false;
      if (o6[1] instanceof c && null === o6[0]) return false;
      if (null === o6[0] && null === o6[1]) return false;
      throw new n3(e5, "InvalidParameter", t5);
    });
  }, H6.intersection = function(e5, n7) {
    return F4(e5, n7, (t5, i7, a3) => (a3 = Je(a3), P4(a3, e5, n7), null === a3[0] || null === a3[1] ? null : G.intersection.execute(a3[0], a3[1])));
  }, H6.union = function(e5, i7) {
    return F4(e5, i7, (a3, l4, o6) => {
      if (0 === (o6 = Je(o6)).length) throw new n3(e5, "WrongNumberOfParameters", i7);
      const u3 = [];
      if (1 === o6.length) if (o2(o6[0])) {
        for (const t5 of Je(o6[0])) if (null !== t5) {
          if (!(t5 instanceof c)) throw new n3(e5, "InvalidParameter", i7);
          u3.push(t5);
        }
      } else {
        if (!te(o6[0])) {
          if (o6[0] instanceof c) return De(o(o6[0]), e5.spatialReference);
          if (null === o6[0]) return null;
          throw new n3(e5, "InvalidParameter", i7);
        }
        for (const t5 of Je(o6[0].toArray())) if (null !== t5) {
          if (!(t5 instanceof c)) throw new n3(e5, "InvalidParameter", i7);
          u3.push(t5);
        }
      }
      else for (const t5 of o6) if (null !== t5) {
        if (!(t5 instanceof c)) throw new n3(e5, "InvalidParameter", i7);
        u3.push(t5);
      }
      return 0 === u3.length ? null : G.union.executeMany(u3);
    });
  }, H6.difference = function(e5, n7) {
    return F4(e5, n7, (i7, a3, l4) => (l4 = Je(l4), P4(l4, e5, n7), null === l4[0] ? null : null === l4[1] ? o(l4[0]) : G.difference.execute(l4[0], l4[1])));
  }, H6.symmetricdifference = function(e5, n7) {
    return F4(e5, n7, (i7, a3, l4) => (l4 = Je(l4), P4(l4, e5, n7), null === l4[0] && null === l4[1] ? null : null === l4[0] ? o(l4[1]) : null === l4[1] ? o(l4[0]) : G.symmetricDifference.execute(l4[0], l4[1])));
  }, H6.clip = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 2, 2, e5, t5), !(o6[1] instanceof z) && null !== o6[1]) throw new n3(e5, "InvalidParameter", t5);
      if (null === o6[0]) return null;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return null === o6[1] ? null : G.clip.execute(o6[0], o6[1]);
    });
  }, H6.cut = function(e5, a3) {
    return F4(e5, a3, (l4, o6, u3) => {
      if (u3 = Je(u3), oe(u3, 2, 2, e5, a3), !(u3[1] instanceof y) && null !== u3[1]) throw new n3(e5, "InvalidParameter", a3);
      if (null === u3[0]) return [];
      if (!(u3[0] instanceof c)) throw new n3(e5, "InvalidParameter", a3);
      return null === u3[1] ? [o(u3[0])] : G.cut.execute(u3[0], u3[1]);
    });
  }, H6.area = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      oe(o6, 1, 2, e5, t5);
      let u3 = (o6 = Je(o6))[0];
      if ((o2(o6[0]) || te(o6[0])) && (u3 = Re(o6[0], e5.spatialReference)), null === u3) return 0;
      if (!(u3 instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return p4(u3.spatialReference, q2(o6[1]), G.area.execute(u3));
    });
  }, H6.areageodetic = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      oe(o6, 1, 3, e5, t5);
      let u3 = (o6 = Je(o6))[0];
      (o2(u3) || te(u3)) && (u3 = Re(u3, e5.spatialReference));
      const s9 = q2(o6[1]), d6 = D(o6[2]);
      if (null == u3) return 0;
      if (!U(u3)) throw new n3(e5, "InvalidParameter", t5);
      return h2(M, s9, G.geodeticArea.execute(u3, { curveType: d6 }));
    });
  }, H6.length = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      oe(o6, 1, 2, e5, t5);
      let u3 = (o6 = Je(o6))[0];
      if ((o2(o6[0]) || te(o6[0])) && (u3 = ve(o6[0], e5.spatialReference)), null === u3) return 0;
      if (!(u3 instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return p4(u3.spatialReference, d3(o6[1]), G.length.execute(u3));
    });
  }, H6.length3d = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      oe(o6, 1, 2, e5, t5);
      let u3 = (o6 = Je(o6))[0];
      if ((o2(o6[0]) || te(o6[0])) && (u3 = ve(o6[0], e5.spatialReference)), null === u3) return 0;
      if (!(u3 instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return true === u3.hasZ ? p4(u3.spatialReference, d3(o6[1]), x(u3)) : p4(u3.spatialReference, d3(o6[1]), G.length.execute(u3));
    });
  }, H6.lengthgeodetic = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      oe(o6, 1, 3, e5, t5);
      let u3 = (o6 = Je(o6))[0];
      (o2(o6[0]) || te(o6[0])) && (u3 = ve(o6[0], e5.spatialReference));
      const s9 = D(o6[2]);
      if (null == u3) return 0;
      if (null != u3 && !U(u3)) throw new n3(e5, "InvalidParameter", t5);
      const c4 = d3(o6[1]);
      return h2(o4, c4, G.geodeticLength.execute(u3, { curveType: s9 }));
    });
  }, H6.distance = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      o6 = Je(o6), oe(o6, 2, 3, e5, t5);
      let u3 = o6[0];
      if ((o2(o6[0]) || te(o6[0])) && (u3 = Pe(o6[0], e5.spatialReference)), !(u3 instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      let s9 = o6[1];
      if ((o2(o6[1]) || te(o6[1])) && (s9 = Pe(o6[1], e5.spatialReference)), !(s9 instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return p4(u3.spatialReference, d3(o6[2]), G.distance.execute(u3, s9));
    });
  }, H6.distancegeodetic = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      o6 = Je(o6), oe(o6, 2, 4, e5, t5);
      const u3 = o6[0];
      if (!(u3 instanceof _)) throw new n3(e5, "InvalidParameter", t5);
      const f6 = o6[1];
      if (!(f6 instanceof _)) throw new n3(e5, "InvalidParameter", t5);
      const s9 = d3(o6[2]), c4 = D(o6[3]), m2 = new y({ paths: [], spatialReference: u3.spatialReference });
      return m2.addPath([u3, f6]), h2(o4, s9, G.geodeticLength.execute(m2, { curveType: c4 }));
    });
  }, H6.densify = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 2, 3, e5, t5), null === o6[0]) return null;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      const u3 = Se(o6[1]);
      if (isNaN(u3)) throw new n3(e5, "InvalidParameter", t5);
      if (u3 <= 0) throw new n3(e5, "InvalidParameter", t5);
      const f6 = w(d3(o6[2]), o6[0].spatialReference, u3);
      switch (o6[0].type) {
        case "polygon":
        case "polyline":
        case "extent":
          return G.densify.execute(o6[0], f6);
        default:
          return o6[0];
      }
    });
  }, H6.densifygeodetic = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      o6 = Je(o6), oe(o6, 2, 4, e5, t5);
      const u3 = o6[0];
      if (null == u3) return null;
      if (!U(u3)) throw new n3(e5, "InvalidParameter", t5);
      const f6 = Se(o6[1]);
      if (isNaN(f6)) throw new n3(e5, "InvalidParameter", t5);
      if (f6 <= 0) throw new n3(e5, "InvalidParameter", t5);
      const s9 = d3(o6[2]), c4 = D(o6[3]), d6 = h2(s9, o4, f6);
      switch (u3.type) {
        case "polygon":
        case "polyline":
        case "extent":
          return G.geodeticDensify.execute(u3, d6, { curveType: c4 });
        default:
          return u3;
      }
    });
  }, H6.generalize = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 2, 4, e5, t5), null === o6[0]) return null;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      const u3 = Se(o6[1]);
      if (isNaN(u3)) throw new n3(e5, "InvalidParameter", t5);
      const f6 = w(d3(o6[3]), o6[0].spatialReference, u3);
      return G.generalize.execute(o6[0], f6, { removeDegenerateParts: Ae(z2(o6[2], true)) });
    });
  }, H6.buffer = function(e5, a3) {
    return F4(e5, a3, (l4, o6, u3) => {
      if (u3 = Je(u3), oe(u3, 2, 3, e5, a3), null === u3[0]) return null;
      if (!(u3[0] instanceof c)) throw new n3(e5, "InvalidParameter", a3);
      const f6 = Se(u3[1]);
      if (isNaN(f6)) throw new n3(e5, "InvalidParameter", a3);
      return 0 === f6 ? o(u3[0]) : G.buffer.execute(u3[0], w(d3(u3[2]), u3[0].spatialReference, f6));
    });
  }, H6.buffergeodetic = function(e5, a3) {
    return F4(e5, a3, (l4, o6, u3) => {
      u3 = Je(u3), oe(u3, 2, 4, e5, a3);
      const f6 = u3[0];
      if (null == f6) return null;
      if (!U(f6)) throw new n3(e5, "InvalidParameter", a3);
      const s9 = Se(u3[1]);
      if (isNaN(s9)) throw new n3(e5, "InvalidParameter", a3);
      if (0 === s9) return o(f6);
      const c4 = d3(u3[2]), d6 = D(u3[3]);
      return G.geodesicBuffer.execute(f6, h2(c4, o4, s9), { curveType: d6 });
    });
  }, H6.offset = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      o6 = Je(o6), oe(o6, 2, 6, e5, t5);
      const u3 = o6[0];
      if (null === u3) return null;
      if (!(u3 instanceof P || u3 instanceof y)) throw new n3(e5, "InvalidParameter", t5);
      const f6 = Se(o6[1]);
      if (isNaN(f6)) throw new n3(e5, "InvalidParameter", t5);
      const s9 = o6[2], c4 = z3(o6[3]), m2 = Se(z2(o6[4], 10));
      if (isNaN(m2)) throw new n3(e5, "InvalidParameter", t5);
      const d6 = Se(z2(o6[5], 0));
      if (isNaN(d6)) throw new n3(e5, "InvalidParameter", t5);
      return G.executeOffset(u3, f6, s9, c4, m2, d6);
    });
  }, H6.rotate = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 2, 3, e5, t5), null === o6[0]) return null;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      const u3 = o6[0] instanceof z ? P.fromExtent(o6[0]) : o6[0], f6 = Se(o6[1]);
      if (isNaN(f6)) throw new n3(e5, "InvalidParameter", t5);
      const s9 = z2(o6[2], null);
      if (null === s9) {
        const e6 = "point" === u3.type ? u3 : u3.extent?.center;
        return G.rotate(u3, f6, e6?.x, e6?.y);
      }
      if (s9 instanceof _) return G.rotate(u3, f6, s9.x, s9.y);
      throw new n3(e5, "InvalidParameter", t5);
    });
  }, H6.centroid = function(e5, t5) {
    return F4(e5, t5, (e6, t6, a3) => {
      if (a3 = Je(a3), oe(a3, 1, 2, e6, t6), null === a3[0]) return null;
      const l4 = O(a3[1]);
      let o6 = a3[0];
      if ((o2(a3[0]) || te(a3[0])) && (o6 = "geometric" === l4 ? Pe(a3[0], e6.spatialReference) : Re(a3[0], e6.spatialReference), null === o6)) return null;
      if (!(o6 instanceof c)) throw new n3(e6, "InvalidParameter", t6);
      return "geometric" === l4 ? G.centroid.execute(o6) : G.labelPoint.execute(o6);
    });
  }, H6.measuretocoordinate = function(e5, n7) {
    return F4(e5, n7, I3);
  }, H6.pointtocoordinate = function(e5, n7) {
    return F4(e5, n7, R2);
  }, H6.distancetocoordinate = function(e5, n7) {
    return F4(e5, n7, b2);
  }, H6.multiparttosinglepart = function(e5, a3) {
    return F4(e5, a3, (l4, o6, u3) => {
      if (u3 = Je(u3), oe(u3, 1, 1, e5, a3), null === u3[0]) return null;
      if (!(u3[0] instanceof c)) throw new n3(e5, "InvalidParameter", a3);
      if (u3[0] instanceof _) return [De(o(u3[0]), e5.spatialReference)];
      if (u3[0] instanceof z) return [De(o(u3[0]), e5.spatialReference)];
      const f6 = G.simplify.execute(u3[0]);
      if (f6 instanceof P) {
        const e6 = [], n7 = [];
        for (let t5 = 0; t5 < f6.rings.length; t5++) if (f6.isClockwise(f6.rings[t5])) {
          const n8 = f2({ rings: [f6.rings[t5]], hasZ: true === f6.hasZ, hasM: true === f6.hasM, spatialReference: f6.spatialReference.toJSON() });
          e6.push(n8);
        } else n7.push({ ring: f6.rings[t5], pt: f6.getPoint(t5, 0) });
        for (let t5 = 0; t5 < n7.length; t5++) for (let r5 = 0; r5 < e6.length; r5++) if (e6[r5].contains(n7[t5].pt)) {
          e6[r5].addRing(n7[t5].ring);
          break;
        }
        return e6;
      }
      if (f6 instanceof y) {
        const e6 = [];
        for (let n7 = 0; n7 < f6.paths.length; n7++) {
          const t5 = f2({ paths: [f6.paths[n7]], hasZ: true === f6.hasZ, hasM: true === f6.hasM, spatialReference: f6.spatialReference.toJSON() });
          e6.push(t5);
        }
        return e6;
      }
      if (u3[0] instanceof m) {
        const n7 = [], r5 = De(o(u3[0]), e5.spatialReference);
        for (let e6 = 0; e6 < r5.points.length; e6++) n7.push(r5.getPoint(e6));
        return n7;
      }
      return null;
    });
  }, H6.isselfintersecting = function(e5, n7) {
    return F4(e5, n7, (e6, n8, t5) => {
      oe(t5, 1, 1, e6, n8);
      let a3 = (t5 = Je(t5))[0];
      if ((o2(t5[0]) || te(t5[0])) && (a3 = ve(t5[0], e6.spatialReference)), a3 instanceof m) {
        const e7 = a3.points;
        for (let n9 = 0; n9 < e7.length; n9++) for (let t6 = n9 + 1; t6 < e7.length; t6++) if (h(e7[n9], e7[t6])) return true;
        return false;
      }
      return (a3 instanceof y || a3 instanceof P) && G.isSelfIntersecting(a3);
    });
  }, H6.issimple = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 1, 1, e5, t5), null === o6[0]) return true;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return G.simplify.isSimple(o6[0]);
    });
  }, H6.simplify = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 1, 1, e5, t5), null === o6[0]) return null;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return G.simplify.execute(o6[0]);
    });
  }, H6.convexhull = function(e5, t5) {
    return F4(e5, t5, (a3, l4, o6) => {
      if (o6 = Je(o6), oe(o6, 1, 1, e5, t5), null === o6[0]) return null;
      if (!(o6[0] instanceof c)) throw new n3(e5, "InvalidParameter", t5);
      return G.convexHull.execute(o6[0]);
    });
  }, H6.nearestcoordinate = function(t5, a3) {
    return F4(t5, a3, (l4, o6, u3) => {
      if (u3 = Je(u3), oe(u3, 2, 2, t5, a3), !(u3[0] instanceof c || null === u3[0])) throw new n3(t5, "InvalidParameter", a3);
      if (!(u3[1] instanceof _ || null === u3[1])) throw new n3(t5, "InvalidParameter", a3);
      if (null === u3[0] || null === u3[1]) return null;
      const f6 = u3[0] instanceof z ? P.fromExtent(u3[0]) : u3[0], s9 = G.proximity.getNearestCoordinate(f6, u3[1], { calculateLeftRightSide: true });
      return null === s9 || s9.isEmpty ? null : p.convertObjectToArcadeDictionary({ coordinate: s9.coordinate, distance: s9.distance, sideOfLine: 0 === s9.distance ? "straddle" : s9.isRightSide ? "right" : "left" }, Ke(t5), false, true);
    });
  }, H6.nearestvertex = function(t5, a3) {
    return F4(t5, a3, (l4, o6, u3) => {
      if (u3 = Je(u3), oe(u3, 2, 2, t5, a3), !(u3[0] instanceof c || null === u3[0])) throw new n3(t5, "InvalidParameter", a3);
      if (!(u3[1] instanceof _ || null === u3[1])) throw new n3(t5, "InvalidParameter", a3);
      if (null === u3[0] || null === u3[1]) return null;
      const f6 = u3[0] instanceof z ? P.fromExtent(u3[0]) : u3[0], s9 = G.proximity.getNearestVertex(f6, u3[1]);
      return null === s9 || s9.isEmpty ? null : p.convertObjectToArcadeDictionary({ coordinate: s9.coordinate, distance: s9.distance, sideOfLine: 0 === s9.distance ? "straddle" : s9.isRightSide ? "right" : "left" }, Ke(t5), false, true);
    });
  };
}

// node_modules/@arcgis/core/arcade/arcadeCompiler.js
var ee = () => i.getLogger("esri.arcade.arcadeCompiler");
var ne2 = class {
  constructor() {
    this._symbolCounter = 0;
  }
  nextVarId() {
    return this._symbolCounter += 1, `_T${this._symbolCounter}`;
  }
  nextTempVarId() {
    return this._symbolCounter += 1, `_Tvar${this._symbolCounter}`;
  }
  nextLocalsSymbolMapId() {
    return this._symbolCounter += 1, `_Locals${this._symbolCounter}`;
  }
};
function te2(e5, n7) {
  const t5 = e5.localScope?.get(n7);
  if (null != t5) return { scope: "local", name: n7, var: t5 };
  const r5 = e5.globalScope.get(n7);
  return null != r5 ? { scope: "global", name: n7, var: r5 } : e5.standardGlobals.has(n7) ? { scope: "global", name: n7, var: n7 } : null;
}
function re2(n7, t5, r5 = "InvalidIdentifier") {
  const o6 = te2(n7, r2(t5));
  if (null != o6) return o6;
  throw new s(null, r5, t5);
}
function oe2(n7, t5, r5) {
  const o6 = te2(n7, r2(t5));
  if (null == o6) throw ee().error(`Internal error: Symbol "${t5.name}" not declared.`), new s(null, "NeverReach", t5);
  if (null != r5 && o6.scope !== r5) throw ee().error(`Internal error: Expected to resolve "${t5.name}" in the ${r5} scope but is in the ${o6.scope} scope.`), new s(null, "NeverReach", t5);
  return o6;
}
function le(n7, t5) {
  const r5 = r2(t5), o6 = n7.symbolMetadata;
  if (n7.localStack.length > 0) {
    const e5 = n7.localStack[n7.localStack.length - 1], t6 = o6.locals.get(e5._SymbolsMapId);
    if (null == t6) return void ee().error(`Internal error: no reflection metadata for ${e5._SymbolsMapId}`);
    const l5 = t6.get(r5);
    if (null != l5) return Qe.requireInitialized(e5[l5]);
  }
  const l4 = o6.globals.get(r5);
  if (null != l4) return Qe.requireInitialized(n7.globalScope[l4]);
  if (o6.standardGlobals.has(r5)) return Qe.requireInitialized(n7.globalScope[r5]);
  throw new n3(null, "InvalidIdentifier", null);
}
var ae = class extends r3 {
  constructor(e5, n7) {
    super(), this.paramCount = n7, this.fn = e5;
  }
  createFunction(e5) {
    return (...n7) => {
      if (n7.length !== this.paramCount) throw new n3(e5, "WrongNumberOfParameters", null);
      return this.fn(...n7);
    };
  }
  call(e5, n7) {
    return this.fn(...n7.arguments);
  }
  marshalledCall(e5, n7, t5, r5) {
    return r5(e5, n7, (n8, o6, l4) => {
      l4 = l4.map((n9) => !L(n9) || n9 instanceof s5 ? n9 : n5(n9, e5, r5));
      const a3 = this.call(t5, { arguments: l4 });
      return C(a3) ? a3.then((e6) => n5(e6, t5, r5)) : a3;
    });
  }
};
function se(e5, n7, t5) {
  try {
    return t5(e5, null, n7.arguments);
  } catch (r5) {
    throw r5;
  }
}
function ie2(e5, n7, t5, r5, l4, a3) {
  const { globals: s9, exports: i7 } = i4(e5);
  r(s9, t5);
  const u3 = new ne2(), c4 = [], m2 = /* @__PURE__ */ new Map();
  for (const o6 of s9) if (t5.has(o6) || n7.has(o6)) m2.set(o6, o6);
  else {
    const e6 = u3.nextVarId();
    m2.set(o6, e6), c4.push(`gscope[${JSON.stringify(e6)}] = ${Ye};`);
  }
  const f6 = /* @__PURE__ */ new Map(), p6 = /* @__PURE__ */ Object.create(null), d6 = { isAsync: r5, symbols: u3, standardGlobals: n7, globalScope: m2, exports: i7, localScope: null, allLocalSymbolMetadata: f6, moduleFactory: a3, moduleFactoryMap: p6, libraryResolver: l4 };
  return { body: [...c4, "var lastStatement = lc.voidOperation;", Fe(d6, e5), "return lastStatement;"].join("\n"), symbolMetadata: { standardGlobals: n7, exports: i7, globals: m2, locals: f6 }, moduleFactoryMap: p6 };
}
function ue(e5, n7) {
  switch (n7.type) {
    case "AssignmentExpression":
      return ve2(e5, n7);
    case "UpdateExpression":
      return we(e5, n7);
    case "TemplateLiteral":
      return Be(e5, n7);
    case "Identifier":
      return Re2(e5, n7);
    case "MemberExpression":
      return ke(e5, n7);
    case "Literal":
      return null === n7.value || void 0 === n7.value ? "null" : JSON.stringify(n7.value);
    case "CallExpression":
      return Le2(e5, n7);
    case "UnaryExpression":
      return Ne(e5, n7);
    case "BinaryExpression":
      return _e(e5, n7);
    case "LogicalExpression":
      return Ve(e5, n7);
    case "ArrayExpression":
      return Ee(e5, n7);
    case "ObjectExpression":
      return me(e5, n7);
    default:
      throw new s(null, "Unrecognized", n7);
  }
}
function ce(e5, n7) {
  switch (n7.type) {
    case "EmptyStatement":
      return "lc.voidOperation";
    case "VariableDeclaration":
      return je(e5, n7);
    case "BlockStatement":
      return Fe(e5, n7);
    case "FunctionDeclaration":
      return Ce(e5, n7);
    case "ImportDeclaration":
      return Ie(e5, n7);
    case "ExportNamedDeclaration":
      return ce(e5, n7.declaration);
    case "ReturnStatement":
      return Me(e5, n7);
    case "IfStatement":
      return xe(e5, n7);
    case "ExpressionStatement":
      return $e(e5, n7);
    case "BreakStatement":
      return "break";
    case "ContinueStatement":
      return "continue";
    case "ForStatement":
      return ye2(e5, n7);
    case "ForInStatement":
      return ge2(e5, n7);
    case "ForOfStatement":
      return he(e5, n7);
    case "WhileStatement":
      return be(e5, n7);
    default:
      throw new s(null, "Unrecognized", n7);
  }
}
function me(e5, n7) {
  let t5 = "lang.dictionary([";
  for (let r5 = 0; r5 < n7.properties.length; r5++) {
    const o6 = n7.properties[r5];
    let l4;
    l4 = "Identifier" === o6.key.type ? "'" + o6.key.name + "'" : ue(e5, o6.key);
    r5 > 0 && (t5 += ","), t5 += "lang.strCheck(" + l4 + ",'ObjectExpression'),lang.aCheck(" + ue(e5, o6.value) + ", 'ObjectExpression')";
  }
  return t5 += "])", t5;
}
function fe(e5, n7, t5, r5, o6 = (e6, n8) => `${e6} = ${n8}`) {
  const l4 = e5.symbols.nextTempVarId(), a3 = e5.symbols.nextTempVarId();
  return [`var ${l4} = ${t5};`, `for (var ${a3} = 0; ${a3} < ${l4}; ${a3}++) {`, `  ${o6(n7, a3)}`, `  ${ce(e5, r5)}`, "}", "lastStatement = lc.voidOperation;"].join("\n");
}
function pe(e5, n7, t5, r5, o6 = (e6) => e6) {
  const l4 = e5.symbols.nextTempVarId(), a3 = e5.symbols.nextTempVarId();
  return [`var ${l4} = ${t5};`, `for (var ${a3} of ${l4}) {`, `  ${n7} = ${o6(a3)};`, `  ${ce(e5, r5)}`, "}", "lastStatement = lc.voidOperation;"].join("\n");
}
function de2(e5, n7, t5, r5) {
  const o6 = e5.symbols.nextTempVarId();
  return [`var ${o6} = ${t5}.iterator(runtimeCtx.abortSignal);`, `while ((${n7} = lang.graphicToFeature(yield ${o6}.next(), ${t5}, runtimeCtx)) != null) {`, `  ${ce(e5, r5)}`, "}", "lastStatement = lc.voidOperation;"].join("\n");
}
function ge2(e5, n7) {
  const t5 = e5.symbols.nextTempVarId();
  let r5, o6, l4 = "var " + t5 + " = " + ue(e5, n7.right) + ";\n";
  switch ("VariableDeclaration" === n7.left.type ? (r5 = oe2(e5, n7.left.declarations[0].id), l4 += ce(e5, n7.left)) : r5 = re2(e5, n7.left), r5.scope) {
    case "local":
      o6 = `lscope['${r5.var}']`;
      break;
    case "global":
      o6 = `gscope['${r5.var}']`;
      break;
    default:
      throw n(r5.scope), new s(null, "NeverReach", n7.left);
  }
  return l4 += "if (" + t5 + "===null) {  lastStatement = lc.voidOperation; }\n ", l4 += "else if (lc.isArray(" + t5 + ") || lc.isString(" + t5 + ")) {\n", l4 += fe(e5, o6, `${t5}.length`, n7.body), l4 += "}\n", l4 += "else if (lc.isImmutableArray(" + t5 + ")) {\n", l4 += fe(e5, o6, `${t5}.length()`, n7.body), l4 += "}\n", l4 += "else if (( " + t5 + " instanceof lang.Dictionary) || lc.isDictionaryLike(" + t5 + ")) {\n", l4 += pe(e5, o6, `${t5}.keys()`, n7.body), l4 += "}\n", e5.isAsync && (l4 += "else if (lc.isFeatureSet(" + t5 + ")) {\n", l4 += de2(e5, o6, t5, n7.body), l4 += "}\n"), l4 += `else if (lc.isGeometry(${t5})) {
`, l4 += pe(e5, o6, `lang.getGeometryKeys(${t5})`, n7.body), l4 += "}\n", l4 += "else { lastStatement = lc.voidOperation; } \n", l4;
}
function he(e5, n7) {
  const t5 = e5.symbols.nextTempVarId();
  let r5, o6, l4 = "var " + t5 + " = " + ue(e5, n7.right) + ";\n";
  switch ("VariableDeclaration" === n7.left.type ? (r5 = oe2(e5, n7.left.declarations[0].id), l4 += ce(e5, n7.left)) : r5 = re2(e5, n7.left), r5.scope) {
    case "local":
      o6 = `lscope['${r5.var}']`;
      break;
    case "global":
      o6 = `gscope['${r5.var}']`;
      break;
    default:
      throw n(r5.scope), new s(null, "NeverReach", n7.left);
  }
  return l4 += "if (" + t5 + "===null) {  lastStatement = lc.voidOperation; }\n ", l4 += "else if (lc.isArray(" + t5 + ") || lc.isString(" + t5 + ")) {\n", l4 += fe(e5, o6, `${t5}.length`, n7.body, (e6, n8) => [`if (${n8} >= ${t5}.length) {`, "  lang.error('OutOfBounds');", "}", `${e6} = ${t5}[${n8}];`].join("\n")), l4 += "}\n", l4 += "else if (lc.isImmutableArray(" + t5 + ")) {\n", l4 += fe(e5, o6, `${t5}.length()`, n7.body, (e6, n8) => `${e6} = ${t5}.get(${n8});`), l4 += "}\n", l4 += "else if (( " + t5 + " instanceof lang.Dictionary) || lc.isDictionaryLike(" + t5 + ")) {\n", l4 += pe(e5, o6, `${t5}.keys()`, n7.body, (e6) => `lang.entry(${e6}, ${t5}.field(${e6}))`), l4 += "}\n", e5.isAsync && (l4 += "else if (lc.isFeatureSet(" + t5 + ")) {\n", l4 += de2(e5, o6, t5, n7.body), l4 += "}\n"), l4 += `else if (lc.isGeometry(${t5})) {
`, l4 += pe(e5, o6, `lang.getGeometryKeys(${t5})`, n7.body, (e6) => `lang.entry(${e6}, lang.geometryMember(${t5}, ${e6}, runtimeCtx, null, 1))`), l4 += "}\n", l4 += "else { lastStatement = lc.voidOperation; } \n", l4;
}
function ye2(e5, n7) {
  let t5 = "lastStatement = lc.voidOperation; \n";
  null !== n7.init && ("VariableDeclaration" === n7.init.type ? t5 += ce(e5, n7.init) : t5 += ue(e5, n7.init) + "; ");
  const r5 = e5.symbols.nextTempVarId(), o6 = e5.symbols.nextTempVarId();
  return t5 += "var " + r5 + " = true; ", t5 += "\n do { ", null !== n7.update && (t5 += " if (" + r5 + "===false) {\n " + ue(e5, n7.update) + "  \n}\n " + r5 + "=false; \n"), null !== n7.test && (t5 += "var " + o6 + " = " + ue(e5, n7.test) + "; ", t5 += "if (" + o6 + "===false) { break; } else if (" + o6 + "!==true) { lang.error('BooleanConditionRequired');   }\n"), t5 += ce(e5, n7.body), null !== n7.update && (t5 += "\n " + ue(e5, n7.update)), t5 += "\n" + r5 + " = true; \n} while(true);  lastStatement = lc.voidOperation; ", t5;
}
function we(e5, n7) {
  if ("CallExpression" === n7.argument.type) throw new s(null, "NeverReach", n7);
  let t5;
  if ("MemberExpression" === n7.argument.type) {
    const r6 = ue(e5, n7.argument.object);
    return t5 = true === n7.argument.computed ? ue(e5, n7.argument.property) : "'" + n7.argument.property.name + "'", "lang.memberupdate(" + r6 + "," + t5 + ",'" + n7.operator + "'," + n7.prefix + ")";
  }
  const r5 = re2(e5, n7.argument);
  switch (Oe(r5), r5.scope) {
    case "local":
      return `lang.update(lscope, '${r5.var}', '${n7.operator}', ${n7.prefix})`;
    case "global":
      return `lang.update(gscope, '${r5.var}', '${n7.operator}', ${n7.prefix})`;
    default:
      throw n(r5.scope), new s(null, "NeverReach", n7.argument);
  }
}
function be(e5, n7) {
  let t5 = "lastStatement = lc.voidOperation; \n";
  const r5 = e5.symbols.nextTempVarId();
  return t5 += `
  var ${r5} = true;
    do {
      ${r5} = ${ue(e5, n7.test)};
      if (${r5}==false) {
        break;
      }
      if (${r5}!==true) {
        lang.error('BooleanConditionRequired');
      }
      ${ce(e5, n7.body)}
    }
    while (${r5} !== false);
    lastStatement = lc.voidOperation;
  `, t5;
}
function ve2(e5, n7) {
  const t5 = ue(e5, n7.right);
  if ("MemberExpression" === n7.left.type) {
    let r6;
    const o6 = ue(e5, n7.left.object);
    return r6 = true === n7.left.computed ? ue(e5, n7.left.property) : "'" + n7.left.property.name + "'", "lang.assignmember(" + o6 + "," + r6 + ",'" + n7.operator + "'," + t5 + ")";
  }
  const r5 = re2(e5, n7.left);
  switch (Oe(r5), r5.scope) {
    case "local":
      return `lscope['${r5.var}']=lang.assign(${t5},'${n7.operator}', ${"=" === n7.operator ? "null" : He(`lscope['${r5.var}']`)})`;
    case "global":
      return `gscope['${r5.var}']=lang.assign(${t5},'${n7.operator}', ${"=" === n7.operator ? "null" : He(`gscope['${r5.var}']`)})`;
    default:
      throw n(r5.scope), new s(null, "NeverReach", n7.left);
  }
}
function $e(e5, n7) {
  return "AssignmentExpression" === n7.expression.type ? "lastStatement = lc.voidOperation; " + ue(e5, n7.expression) + "; \n " : "lastStatement = " + ue(e5, n7.expression) + "; ";
}
function Se2(e5, n7) {
  return "BlockStatement" === n7.type ? ce(e5, n7) : "ReturnStatement" === n7.type || "BreakStatement" === n7.type || "ContinueStatement" === n7.type ? ce(e5, n7) + "; " : "ExpressionStatement" === n7.type ? ce(e5, n7) : ce(e5, n7) + "; ";
}
function xe(e5, n7) {
  return `if (lang.mustBoolean(${ue(e5, n7.test)}, runtimeCtx) === true) {
    ${Se2(e5, n7.consequent)}
  } ` + (null !== n7.alternate ? "IfStatement" === n7.alternate.type ? " else " + xe(e5, n7.alternate) : ` else {
      ${Se2(e5, n7.alternate)}
    }
` : " else {\n      lastStatement = lc.voidOperation;\n    }\n");
}
function Fe(e5, n7) {
  let t5 = "";
  for (let r5 = 0; r5 < n7.body.length; r5++) "EmptyStatement" !== n7.body[r5].type && ("ReturnStatement" === n7.body[r5].type || "BreakStatement" === n7.body[r5].type || "ContinueStatement" === n7.body[r5].type ? t5 += ce(e5, n7.body[r5]) + "; \n" : t5 += ce(e5, n7.body[r5]) + " \n");
  return t5;
}
function Me(e5, n7) {
  if (null === n7.argument) return "return lc.voidOperation";
  return "return " + ue(e5, n7.argument);
}
function Ie(e5, n7) {
  const t5 = oe2(e5, n7.specifiers[0].local, "global"), r5 = e5.libraryResolver?.loadLibrary(t5.name), o6 = e5.symbols.nextVarId();
  void 0 === e5.moduleFactory[r5.uri] && (e5.moduleFactory[r5.uri] = rn(r5.syntax, e5.moduleFactory, e5.isAsync)), e5.moduleFactoryMap[o6] = r5.uri;
  let l4 = "";
  return l4 = e5.isAsync ? "(yield lang.loadModule('" + o6 + "', runtimeCtx) ); " : "lang.loadModule('" + o6 + "', runtimeCtx); ", Oe(t5), `gscope['${t5.var}']=${l4}`;
}
function Oe(e5) {
  if ("global" === e5.scope) switch (e5.name) {
    case "iif":
    case "when":
    case "defaultvalue":
    case "decode":
      throw new c2();
  }
}
function Ce(n7, t5) {
  const r5 = new Set(t5.params.map((n8) => r2(n8))), o6 = s4(t5);
  r(o6, r5);
  const a3 = n7.symbols, s9 = /* @__PURE__ */ new Map();
  for (const e5 of o6) s9.set(e5, a3.nextVarId());
  const i7 = a3.nextLocalsSymbolMapId();
  n7.allLocalSymbolMetadata.set(i7, s9);
  const u3 = { ...n7, localScope: s9 }, c4 = [`lscope._SymbolsMapId = ${JSON.stringify(i7)};`];
  for (let e5 = 0; e5 < t5.params.length; e5++) {
    const n8 = oe2(u3, t5.params[e5], "local");
    Oe(n8), c4.push(`lscope['${n8.var}'] = arguments[${e5}];`);
  }
  for (const [e5, l4] of s9) r5.has(e5) || c4.push(`lscope['${l4}'] = ${Ye};`);
  const m2 = Fe(u3, t5.body), f6 = true === n7.isAsync ? ["return lang.__awaiter(this, void 0, void 0, function* () {", `  ${m2}`, "  return lastStatement;", "});"] : [m2, "return lastStatement;"], p6 = ["new lang.UserDefinedCompiledFunction(", "  lang.functionDepthchecker(", "    function() {", "      var lastStatement = lc.voidOperation;", "      var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];", ...c4, ...f6, "    },", "    runtimeCtx,", "  ),", `  ${t5.params.length},`, ")"].join("\n"), d6 = oe2(n7, t5.id, "global");
  return Oe(d6), `gscope['${d6.var}']=${p6}; lastStatement = lc.voidOperation;`;
}
function je(e5, n7) {
  const t5 = [];
  for (let r5 = 0; r5 < n7.declarations.length; r5++) t5.push(Ae2(e5, n7.declarations[r5]));
  return t5.join("\n") + " \n lastStatement=  lc.voidOperation; \n";
}
function Ae2(e5, n7) {
  const t5 = null === n7.init ? "null" : ue(e5, n7.init), r5 = oe2(e5, n7.id);
  switch (Oe(r5), r5.scope) {
    case "local":
      return `lscope['${r5.var}']=${t5};`;
    case "global":
      return `gscope['${r5.var}']=${t5};`;
    default:
      throw n(r5.scope), new s(null, "NeverReach", n7.id);
  }
}
function ke(e5, n7) {
  try {
    let t5;
    return t5 = true === n7.computed ? ue(e5, n7.property) : "'" + n7.property.name + "'", "lang.member(" + ue(e5, n7.object) + "," + t5 + ")";
  } catch (t5) {
    throw t5;
  }
}
function Ne(e5, n7) {
  try {
    return "lang.unary(" + ue(e5, n7.argument) + ",'" + n7.operator + "')";
  } catch (t5) {
    throw t5;
  }
}
function Ee(e5, n7) {
  try {
    const t5 = [];
    for (let r5 = 0; r5 < n7.elements.length; r5++) "Literal" === n7.elements[r5].type ? t5.push(ue(e5, n7.elements[r5])) : t5.push("lang.aCheck(" + ue(e5, n7.elements[r5]) + ",'ArrayExpression')");
    return "[" + t5.join(",") + "]";
  } catch (t5) {
    throw t5;
  }
}
function Be(e5, n7) {
  try {
    const t5 = [];
    let r5 = 0;
    for (const o6 of n7.quasis) t5.push(o6.value ? JSON.stringify(o6.value.cooked) : JSON.stringify("")), false === o6.tail && (t5.push(n7.expressions[r5] ? "lang.castString(lang.aCheck(" + ue(e5, n7.expressions[r5]) + ", 'TemplateLiteral'))" : ""), r5++);
    return "([" + t5.join(",") + "]).join('')";
  } catch (t5) {
    throw t5;
  }
}
function _e(e5, n7) {
  try {
    return "lang.binary(" + ue(e5, n7.left) + "," + ue(e5, n7.right) + ",'" + n7.operator + "')";
  } catch (t5) {
    throw t5;
  }
}
function Ve(e5, n7) {
  try {
    if ("AssignmentExpression" === n7.left.type || "UpdateExpression" === n7.left.type) throw new s(null, "LogicalExpressionOnlyBoolean", n7);
    if ("AssignmentExpression" === n7.right.type || "UpdateExpression" === n7.right.type) throw new s(null, "LogicalExpressionOnlyBoolean", n7);
    if ("&&" === n7.operator || "||" === n7.operator) return "(lang.logicalCheck(" + ue(e5, n7.left) + ") " + n7.operator + " lang.logicalCheck(" + ue(e5, n7.right) + "))";
    throw new s(null, "LogicExpressionOrAnd", null);
  } catch (t5) {
    throw t5;
  }
}
function Re2(e5, n7) {
  const t5 = re2(e5, n7);
  switch (Oe(t5), t5.scope) {
    case "local":
      return He(`lscope['${t5.var}']`);
    case "global":
      return He(`gscope['${t5.var}']`);
    default:
      throw n(t5.scope), new s(null, "NeverReach", n7);
  }
}
function Le2(e5, n7) {
  try {
    if ("MemberExpression" === n7.callee.type) {
      let t6;
      t6 = true === n7.callee.computed ? ue(e5, n7.callee.property) : "'" + n7.callee.property.name + "'";
      let r6 = "[";
      for (let o7 = 0; o7 < n7.arguments.length; o7++) o7 > 0 && (r6 += ", "), r6 += ue(e5, n7.arguments[o7]);
      return r6 += "]", e5.isAsync ? "(yield lang.callModuleFunction(" + ue(e5, n7.callee.object) + "," + r6 + "," + t6 + ",runtimeCtx))" : "lang.callModuleFunction(" + ue(e5, n7.callee.object) + "," + r6 + "," + t6 + ",runtimeCtx)";
    }
    if ("Identifier" !== n7.callee.type) throw new s(null, "FunctionNotFound", n7);
    const t5 = re2(e5, n7.callee, "FunctionNotFound");
    if ("global" === t5.scope) switch (t5.name) {
      case "iif":
        return Te(e5, n7);
      case "when":
        return Ue(e5, n7);
      case "defaultvalue":
        return De2(e5, n7);
      case "decode":
        return Ge(e5, n7);
    }
    let r5;
    switch (t5.scope) {
      case "local":
        r5 = He(`lscope['${t5.var}']`);
        break;
      case "global":
        r5 = He(`gscope['${t5.var}']`);
        break;
      default:
        throw n(t5.scope), new s(null, "NeverReach", n7.callee);
    }
    let o6 = "[";
    for (let l4 = 0; l4 < n7.arguments.length; l4++) l4 > 0 && (o6 += ", "), o6 += ue(e5, n7.arguments[l4]);
    return o6 += "]", e5.isAsync ? "(yield lang.callfunc(" + r5 + "," + o6 + ",runtimeCtx) )" : "lang.callfunc(" + r5 + "," + o6 + ",runtimeCtx)";
  } catch (t5) {
    throw t5;
  }
}
function Te(e5, n7) {
  try {
    if (3 !== n7.arguments.length) throw new s(null, "WrongNumberOfParameters", n7);
    const t5 = e5.symbols.nextTempVarId();
    return `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        var ${t5} = ${ue(e5, n7.arguments[0])};

        if (${t5} === true) {
          return  ${ue(e5, n7.arguments[1])};
        }
        else if (${t5} === false) {
          return ${ue(e5, n7.arguments[2])};
        }
        else {
          lang.error('ExecutionErrorCodes.BooleanConditionRequired');
        }
      ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t5) {
    throw t5;
  }
}
function De2(e5, n7) {
  try {
    if (n7.arguments.length < 2 || n7.arguments.length > 3) throw new s(null, "WrongNumberOfParameters", n7);
    const t5 = e5.symbols.nextTempVarId(), r5 = e5.symbols.nextTempVarId();
    return 3 === n7.arguments.length ? `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
      var ${t5} = ${ue(e5, n7.arguments[0])};
      var ${r5} = ${ue(e5, n7.arguments[1])};
      ${t5} = lang.getNestedOptionalValue(${t5}, ${r5});
      return ${t5} != null && ${t5} !== "" ? ${t5} : ${ue(e5, n7.arguments[2])};
      ${e5.isAsync ? "})}()))" : "}()"}` : `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        var ${t5} = ${ue(e5, n7.arguments[0])};
        if (${t5} === null) {
          return  ${ue(e5, n7.arguments[1])};
        }
        if (${t5} === "") {
          return  ${ue(e5, n7.arguments[1])};
        }
        if (${t5} === undefined) {
          return  ${ue(e5, n7.arguments[1])};
        }
        return ${t5};
      ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t5) {
    throw t5;
  }
}
function Ue(e5, n7) {
  try {
    if (n7.arguments.length < 3) throw new s(null, "WrongNumberOfParameters", n7);
    if (n7.arguments.length % 2 == 0) throw new s(null, "WrongNumberOfParameters", n7);
    const t5 = e5.symbols.nextTempVarId();
    let r5 = "var ";
    for (let o6 = 0; o6 < n7.arguments.length - 1; o6 += 2) r5 += `${t5} = lang.mustBoolean(${ue(e5, n7.arguments[o6])}, runtimeCtx);
      if (${t5} === true ) {
        return ${ue(e5, n7.arguments[o6 + 1])}
      }
`;
    return `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        ${r5}
        return ${ue(e5, n7.arguments[n7.arguments.length - 1])}
        ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t5) {
    throw t5;
  }
}
function Ge(e5, n7) {
  try {
    if (n7.arguments.length < 2) throw new s(null, "WrongNumberOfParameters", n7);
    if (2 === n7.arguments.length) return `(${ue(e5, n7.arguments[1])})`;
    if ((n7.arguments.length - 1) % 2 == 0) throw new s(null, "WrongNumberOfParameters", n7);
    const t5 = e5.symbols.nextTempVarId(), r5 = e5.symbols.nextTempVarId();
    let o6 = "var ";
    for (let l4 = 1; l4 < n7.arguments.length - 1; l4 += 2) o6 += `${r5} = ${ue(e5, n7.arguments[l4])};
      if (lang.binary(${r5}, ${t5}, "==") === true ) {
        return ${ue(e5, n7.arguments[l4 + 1])}
      }
`;
    return `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        var ${t5} = ${ue(e5, n7.arguments[0])};
        ${o6}
        return ${ue(e5, n7.arguments[n7.arguments.length - 1])}
        ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t5) {
    throw t5;
  }
}
function Ke2(e5, n7) {
  try {
    return se(e5, n7, (e6, n8) => {
      throw new n3(e6, "Unrecognized", n8);
    });
  } catch (t5) {
    throw t5;
  }
}
function qe(e5) {
  const n7 = function() {
    this.textformatting = p.textFormatting();
  };
  n7.prototype = /* @__PURE__ */ Object.create(null), n7.provided = /* @__PURE__ */ new Set(["textformatting", "infinity", "pi"]), n7.prototype.infinity = Number.POSITIVE_INFINITY, n7.prototype.pi = Math.PI;
  for (const [t5, r5] of Object.entries(e5)) n7.prototype[t5] = new e2(r5), n7.provided.add(t5);
  return n7;
}
function Pe2() {
  const e5 = /* @__PURE__ */ Object.create(null);
  j(e5, se), E(e5, se), P3(e5, se, le), g2(e5, se), C2(e5, se), a(e5, se), b3(e5, se), e5.iif = Ke2, e5.decode = Ke2, e5.when = Ke2, e5.defaultvalue = Ke2;
  const n7 = qe(e5);
  F(e5, se);
  return { ScopeSync: qe(e5), ScopeAsync: n7 };
}
var { ScopeSync: ze, ScopeAsync: We } = Pe2();
function Ze(e5, n7) {
  const t5 = { mode: n7, compiled: true, functions: /* @__PURE__ */ Object.create(null), signatures: [], standardFunction: se, standardFunctionAsync: se, evaluateIdentifier: le };
  for (const r5 of e5) r5.registerFunctions(t5);
  if ("sync" === n7) for (const [r5, o6] of Object.entries(t5.functions)) ze.prototype[r5] = new e2(o6), ze.provided.add(r5);
  else for (const [r5, o6] of Object.entries(t5.functions)) We.prototype[r5] = new e2(o6), We.provided.add(r5);
  for (const r5 of t5.signatures) o3(r5, n7);
}
Ze([p3], "sync"), Ze([p3], "async"), Ze([T], "async");
var Je2 = Symbol("uninitialized");
var Ye = "lang.uninitialized";
function He(e5) {
  return `lang.requireInitialized(${e5})`;
}
var Qe = { uninitialized: Je2, requireInitialized(e5) {
  if (e5 === Je2) throw new n3(null, "InvalidIdentifier", null);
  return e5;
}, isNumber: (e5) => n4(e5), isArray: (e5) => o2(e5), isImmutableArray: (e5) => te(e5), isDictionaryLike: (e5) => Q(e5), isString: (e5) => e(e5), isDictionary: (e5) => K(e5), isGeometry: (e5) => U(e5), getGeometryKeys: (e5) => f3(e5), geometryMember: (e5, n7, t5, r5, o6 = 1) => d(e5, n7, t5, r5, o6), error(e5) {
  throw new n3(null, e5, null);
}, __awaiter(e5, n7, t5, r5) {
  const o6 = r5.apply(e5, n7 || []);
  let l4 = o6.next();
  for (; !l4.done && !C(l4.value); ) l4 = o6.next(l4.value);
  return l4.done ? l4.value : new Promise((e6, n8) => {
    function t6(r6) {
      for (; !r6.done; ) {
        if (C(r6.value)) return void Promise.resolve(r6.value).then((e7) => {
          try {
            t6(o6.next(e7));
          } catch (r7) {
            n8(r7);
          }
        }, (e7) => {
          try {
            t6(o6.throw(e7));
          } catch (r7) {
            n8(r7);
          }
        });
        try {
          r6 = o6.next(r6.value);
        } catch (l5) {
          return void n8(l5);
        }
      }
      e6(r6.value);
    }
    t6(l4);
  });
}, functionDepthchecker: (e5, n7) => function() {
  if (n7.depthCounter.depth++, n7.localStack.push({}), n7.depthCounter.depth > 64) throw new n3(null, "MaximumCallDepth", null);
  const t5 = e5.apply(this, arguments);
  return C(t5) ? t5.then((e6) => (n7.depthCounter.depth--, n7.localStack.length = n7.localStack.length - 1, e6)) : (n7.depthCounter.depth--, n7.localStack.length = n7.localStack.length - 1, t5);
}, mustBoolean(e5, n7) {
  if (true === e5 || false === e5) return e5;
  throw new n3(n7, "BooleanConditionRequired", null);
}, castString: (e5) => ge(e5), aCheck(e5, n7) {
  if (L(e5)) {
    if ("ArrayExpression" === n7) throw new n3(null, "NoFunctionInArray", null);
    if ("ObjectExpression" === n7) throw new n3(null, "NoFunctionInDictionary", null);
    throw new n3(null, "NoFunctionInTemplateLiteral", null);
  }
  return e5 === P2 ? null : e5;
}, Dictionary: p, Feature: I2, UserDefinedCompiledFunction: ae, dictionary(e5) {
  const n7 = /* @__PURE__ */ Object.create(null), t5 = /* @__PURE__ */ new Map();
  for (let o6 = 0; o6 < e5.length; o6 += 2) {
    if (L(e5[o6 + 1])) throw new n3(null, "NoFunctionInDictionary", null);
    if (false === e(e5[o6])) throw new n3(null, "KeyMustBeString", null);
    let r6 = e5[o6].toString();
    const l4 = r6.toLowerCase();
    t5.has(l4) ? r6 = t5.get(l4) : t5.set(l4, r6), e5[o6 + 1] === P2 ? n7[r6] = null : n7[r6] = e5[o6 + 1];
  }
  const r5 = new p(n7);
  return r5.immutable = false, r5;
}, entry: (e5, n7) => p.containerEntry(e5, n7), strCheck(e5) {
  if (false === e(e5)) throw new n3(null, "KeyMustBeString", null);
  return e5;
}, unary(e5, n7) {
  if (t(e5)) {
    if ("!" === n7) return !e5;
    if ("-" === n7) return -1 * Se(e5);
    if ("+" === n7) return 1 * Se(e5);
    if ("~" === n7) return ~Se(e5);
    throw new n3(null, "UnsupportUnaryOperator", null);
  }
  if ("-" === n7) return -1 * Se(e5);
  if ("+" === n7) return 1 * Se(e5);
  if ("~" === n7) return ~Se(e5);
  throw new n3(null, "UnsupportUnaryOperator", null);
}, logicalCheck(e5) {
  if (false === t(e5)) throw new n3(null, "LogicExpressionOrAnd", null);
  return e5;
}, logical(e5, n7, t5) {
  if (t(e5) && t(n7)) switch (t5) {
    case "||":
      return e5 || n7;
    case "&&":
      return e5 && n7;
    default:
      throw new n3(null, "LogicExpressionOrAnd", null);
  }
  throw new n3(null, "LogicExpressionOrAnd", null);
}, binary(e5, n7, t5) {
  switch (t5) {
    case "|":
    case "<<":
    case ">>":
    case ">>>":
    case "^":
    case "&":
      return Le(Se(e5), Se(n7), t5);
    case "==":
    case "=":
      return ye(e5, n7);
    case "!=":
      return !ye(e5, n7);
    case "<":
    case ">":
    case "<=":
    case ">=":
      return de(e5, n7, t5);
    case "+":
      return e(e5) || e(n7) ? ge(e5) + ge(n7) : Se(e5) + Se(n7);
    case "-":
      return Se(e5) - Se(n7);
    case "*":
      return Se(e5) * Se(n7);
    case "/":
      return Se(e5) / Se(n7);
    case "%":
      return Se(e5) % Se(n7);
    default:
      throw new n3(null, "UnsupportedOperator", null);
  }
}, assign(e5, n7, t5) {
  switch (n7) {
    case "=":
      return e5 === P2 ? null : e5;
    case "/=":
      return Se(t5) / Se(e5);
    case "*=":
      return Se(t5) * Se(e5);
    case "-=":
      return Se(t5) - Se(e5);
    case "+=":
      return e(t5) || e(e5) ? ge(t5) + ge(e5) : Se(t5) + Se(e5);
    case "%=":
      return Se(t5) % Se(e5);
    default:
      throw new n3(null, "UnsupportedOperator", null);
  }
}, update(e5, n7, t5, r5) {
  const o6 = Se(this.requireInitialized(e5[n7]));
  return e5[n7] = "++" === t5 ? o6 + 1 : o6 - 1, false === r5 ? o6 : "++" === t5 ? o6 + 1 : o6 - 1;
}, graphicToFeature: (e5, n7, t5) => null === e5 ? null : I2.createFromGraphicLikeObject(e5.geometry, e5.attributes, n7, t5.timeZone), memberupdate(e5, n7, t5, r5) {
  let o6;
  if (o2(e5)) {
    if (!n4(n7)) throw new n3(null, "ArrayAccessMustBeNumber", null);
    if (n7 < 0 && (n7 = e5.length + n7), n7 < 0 || n7 >= e5.length) throw new n3(null, "OutOfBounds", null);
    o6 = Se(e5[n7]), e5[n7] = "++" === t5 ? o6 + 1 : o6 - 1;
  } else if (e5 instanceof p) {
    if (false === e(n7)) throw new n3(null, "KeyAccessorMustBeString", null);
    if (true !== e5.hasField(n7)) throw new n3(null, "FieldNotFound", null, { key: n7 });
    o6 = Se(e5.field(n7)), e5.setField(n7, "++" === t5 ? o6 + 1 : o6 - 1);
  } else if (H2(e5)) {
    if (false === e(n7)) throw new n3(null, "KeyAccessorMustBeString", null);
    if (true !== e5.hasField(n7)) throw new n3(null, "FieldNotFound", null);
    o6 = Se(e5.field(n7)), e5.setField(n7, "++" === t5 ? o6 + 1 : o6 - 1);
  } else {
    if (te(e5)) throw new n3(null, "Immutable", null);
    if (!(e5 instanceof tn)) throw new n3(null, "InvalidIdentifier", null);
    if (false === e(n7)) throw new n3(null, "ModuleAccessorMustBeString", null);
    if (true !== e5.hasGlobal(n7)) throw new n3(null, "ModuleExportNotFound", null);
    o6 = Se(e5.global(n7)), e5.setGlobal(n7, "++" === t5 ? o6 + 1 : o6 - 1);
  }
  return false === r5 ? o6 : "++" === t5 ? o6 + 1 : o6 - 1;
}, assignmember(e5, n7, t5, r5) {
  if (o2(e5)) {
    if (!n4(n7)) throw new n3(null, "ArrayAccessMustBeNumber", null);
    if (n7 < 0 && (n7 = e5.length + n7), n7 < 0 || n7 > e5.length) throw new n3(null, "OutOfBounds", null);
    if (n7 === e5.length) {
      if ("=" !== t5) throw new n3(null, "OutOfBounds", null);
      e5[n7] = this.assign(r5, t5, e5[n7]);
    } else e5[n7] = this.assign(r5, t5, e5[n7]);
  } else if (e5 instanceof p) {
    if (false === e(n7)) throw new n3(null, "KeyAccessorMustBeString", null);
    if (true === e5.hasField(n7)) e5.setField(n7, this.assign(r5, t5, e5.field(n7)));
    else {
      if ("=" !== t5) throw new n3(null, "FieldNotFound", null);
      e5.setField(n7, this.assign(r5, t5, null));
    }
  } else if (H2(e5)) {
    if (false === e(n7)) throw new n3(null, "KeyAccessorMustBeString", null);
    if (true === e5.hasField(n7)) e5.setField(n7, this.assign(r5, t5, e5.field(n7)));
    else {
      if ("=" !== t5) throw new n3(null, "FieldNotFound", null);
      e5.setField(n7, this.assign(r5, t5, null));
    }
  } else {
    if (te(e5)) throw new n3(null, "Immutable", null);
    if (!(e5 instanceof tn)) throw new n3(null, "InvalidIdentifier", null);
    if (false === e(n7)) throw new n3(null, "ModuleAccessorMustBeString", null);
    if (!e5.hasGlobal(n7)) throw new n3(null, "ModuleExportNotFound", null);
    e5.setGlobal(n7, this.assign(r5, t5, e5.global(n7)));
  }
}, member(e5, n7) {
  if (null === e5) throw new n3(null, "MemberOfNull", null);
  if (e5 instanceof p || Q(e5)) {
    if (e(n7)) return e5.field(n7);
    throw new n3(null, "InvalidMemberAccessKey", null);
  }
  if (e5 instanceof c) {
    if (e(n7)) return d(e5, n7, null, null);
    throw new n3(null, "InvalidMemberAccessKey", null);
  }
  if (o2(e5)) {
    if (n4(n7) && isFinite(n7) && Math.floor(n7) === n7) {
      if (n7 < 0 && (n7 = e5.length + n7), n7 >= e5.length || n7 < 0) throw new n3(null, "OutOfBounds", null);
      return e5[n7];
    }
    throw new n3(null, "InvalidMemberAccessKey", null);
  }
  if (e(e5)) {
    if (n4(n7) && isFinite(n7) && Math.floor(n7) === n7) {
      if (n7 < 0 && (n7 = e5.length + n7), n7 >= e5.length || n7 < 0) throw new n3(null, "OutOfBounds", null);
      return e5[n7];
    }
    throw new n3(null, "InvalidMemberAccessKey", null);
  }
  if (te(e5)) {
    if (n4(n7) && isFinite(n7) && Math.floor(n7) === n7) {
      if (n7 < 0 && (n7 = e5.length() + n7), n7 >= e5.length() || n7 < 0) throw new n3(null, "OutOfBounds", null);
      return e5.get(n7);
    }
    throw new n3(null, "InvalidMemberAccessKey", null);
  }
  if (e5 instanceof tn) {
    if (e(n7)) return e5.global(n7);
    throw new n3(null, "InvalidMemberAccessKey", null);
  }
  throw new n3(null, "InvalidMemberAccessKey", null);
}, callfunc: (e5, n7, t5) => e5.call(t5, { arguments: n7, preparsed: true }), loadModule(e5, n7) {
  const t5 = n7.moduleFactoryMap[e5];
  if (n7.moduleSingletons[t5]) return n7.moduleSingletons[t5];
  const r5 = n7.moduleFactory[t5]({ moduleSingletons: n7.moduleSingletons, depthCounter: n7.depthCounter, lrucache: n7.lrucache, interceptor: n7.interceptor, services: n7.services, console: n7.console, abortSignal: n7.abortSignal, timeZone: n7.timeZone ?? null, spatialReference: n7.spatialReference });
  return n7.moduleSingletons[t5] = r5, r5;
}, callModuleFunction(e5, n7, t5, r5) {
  if (!(e5 instanceof tn)) throw new n3(null, "FunctionNotFound", null);
  const o6 = e5.global(t5);
  if (false === L(o6)) throw new n3(null, "CallNonFunction", null);
  return o6.call(r5, { preparsed: true, arguments: n7 });
}, getNestedOptionalValue: (e5, n7) => y2(e5, n7) };
function Xe(e5) {
  console.log(e5);
}
function en(t5, o6, l4 = false) {
  let a3 = null;
  t5.usesModules && (a3 = new s3(null, t5.loadedModules));
  const s9 = /* @__PURE__ */ Object.create(null), i7 = new Set(Object.keys(o6?.vars || {}).map((n7) => r2(n7))), u3 = new Set(Object.keys(o6?.customfunctions || {}).map((n7) => r2(n7))), m2 = ie2(t5, l4 ? We.provided : ze.provided, /* @__PURE__ */ new Set([...i7, ...u3]), l4, a3, s9);
  let f6;
  f6 = l4 ? ["var runtimeCtx = this.prepare(context, true);", "var lc = this.lc;", "var lang = this.lang;", "var gscope = runtimeCtx.globalScope;", "return lang.__awaiter(this, void 0, void 0, function* () {", "  function mainBody() {", "    return lang.__awaiter(this, void 0, void 0, function* () {", `      ${m2.body}`, "    });", "  }", "  return this.postProcess(yield mainBody());", "});"].join("\n") : ["var runtimeCtx = this.prepare(context, false);", "var lc = this.lc;", "var lang = this.lang;", "var gscope = runtimeCtx.globalScope;", "function mainBody() {", `  ${m2.body}`, "}", "return this.postProcess(mainBody());"].join("\n");
  const { symbolMetadata: d6, moduleFactoryMap: g5 } = m2, h5 = { lc: tt, lang: Qe, postProcess(e5) {
    if (q(e5)) return null;
    if (L(e5)) throw new n3(null, "IllegalResult", null);
    return e5;
  }, prepare(e5, t6) {
    const r5 = e5.spatialReference ?? f.WebMercator, o7 = t6 ? new We() : new ze();
    for (const n7 of u3) null != e5.customfunctions && n7 in e5.customfunctions ? o7[n7] = e5.customfunctions[n7] ?? null : o7[n7] = Je2;
    for (const n7 of i7) {
      if (null == e5.vars || !(n7 in e5.vars)) {
        n7 in o7 || (o7[n7] = Je2);
        continue;
      }
      const t7 = e5.vars[n7] ?? null;
      i3(t7) ? o7[n7] = I2.createFromGraphic(t7, e5.timeZone ?? null) : o7[n7] = t7;
    }
    return { lrucache: e5.lrucache, interceptor: e5.interceptor, services: e5.services, console: e5.console ?? Xe, abortSignal: e5.abortSignal ?? t2, timeZone: e5.timeZone ?? null, spatialReference: r5, track: e5.track, globalScope: o7, localStack: [], depthCounter: { depth: 1 }, symbolMetadata: d6, moduleFactory: s9, moduleFactoryMap: g5, moduleSingletons: /* @__PURE__ */ Object.create(null) };
  } };
  return new Function("context", f6).bind(h5);
}
async function nn() {
  return Ze([await import("./geomasync-FFEPGNMQ.js")], "async"), true;
}
var tn = class extends s2 {
  constructor(e5) {
    super(), this.moduleContext = e5;
  }
  hasGlobal(n7) {
    const t5 = this.moduleContext.symbolMetadata.exports;
    return t5.has(n7) || t5.has(r2(n7));
  }
  setGlobal(n7, t5) {
    if (L(t5)) throw new n3(null, "AssignModuleFunction", null);
    const r5 = this.moduleContext.symbolMetadata.globals.get(r2(n7));
    if (null == r5) throw new n3(null, "ModuleExportNotFound", null);
    this.moduleContext.globalScope[r5] = t5;
  }
  global(n7) {
    const t5 = this.moduleContext.symbolMetadata.globals.get(r2(n7));
    if (null == t5) throw new n3(null, "ModuleExportNotFound", null);
    const r5 = this.moduleContext.globalScope, o6 = Qe.requireInitialized(r5[t5]);
    if (L(o6) && !(o6 instanceof s5)) {
      const e5 = new s5();
      return e5.fn = o6, e5.parameterEvaluator = se, e5.context = this.moduleContext, r5[t5] = e5, e5;
    }
    return o6;
  }
};
function rn(e5, t5, o6) {
  const l4 = new s3(null, e5.loadedModules), a3 = ie2(e5, o6 ? We.provided : ze.provided, /* @__PURE__ */ new Set(), o6, l4, t5);
  let s9;
  s9 = o6 ? ["var runtimeCtx = this.prepare(context, true);", "var lc = this.lc;", "var lang = this.lang;", "var gscope = runtimeCtx.globalScope;", "return lang.__awaiter(this, void 0, void 0, function* () {", "  function mainBody() {", "    return lang.__awaiter(this, void 0, void 0, function* () {", `      ${a3.body}`, "    });", "  }", "  yield mainBody();", "  return this.prepareModule(runtimeCtx);", "});"].join("\n") : ["var runtimeCtx = this.prepare(context, false);", "var lc = this.lc;", "var lang = this.lang;", "var gscope = runtimeCtx.globalScope;", "function mainBody() {", `  ${a3.body}`, "}", "mainBody();", "return this.prepareModule(runtimeCtx);"].join("\n");
  const { symbolMetadata: i7, moduleFactoryMap: u3 } = a3, c4 = { lc: tt, lang: Qe, prepareModule: (e6) => new tn(e6), prepare(e6, r5) {
    const o7 = e6.spatialReference ?? f.WebMercator, l5 = r5 ? new We() : new ze();
    return { lrucache: e6.lrucache, interceptor: e6.interceptor, services: e6.services, console: e6.console ?? Xe, abortSignal: e6.abortSignal ?? t2, timeZone: e6.timeZone ?? null, spatialReference: o7, track: null, globalScope: l5, localStack: [], depthCounter: e6.depthCounter, symbolMetadata: i7, moduleFactory: t5, moduleFactoryMap: u3, moduleSingletons: e6.moduleSingletons };
  } };
  return new Function("context", s9).bind(c4);
}

// node_modules/@arcgis/core/chunks/index.js
var e3 = { False: "false", Null: "null", True: "true" };
var t3 = { Break: "break", Continue: "continue", Else: "else", For: "for", Function: "function", If: "if", Import: "import", Export: "export", In: "in", Return: "return", Var: "var", While: "while" };
var u2 = { From: "from", Of: "of" };
var i5 = { AssignmentExpression: "AssignmentExpression", ArrayExpression: "ArrayExpression", BlockComment: "BlockComment", BlockStatement: "BlockStatement", BinaryExpression: "BinaryExpression", BreakStatement: "BreakStatement", CallExpression: "CallExpression", ContinueStatement: "ContinueStatement", EmptyStatement: "EmptyStatement", ExpressionStatement: "ExpressionStatement", ExportNamedDeclaration: "ExportNamedDeclaration", ForStatement: "ForStatement", ForInStatement: "ForInStatement", ForOfStatement: "ForOfStatement", FunctionDeclaration: "FunctionDeclaration", Identifier: "Identifier", IfStatement: "IfStatement", ImportDeclaration: "ImportDeclaration", ImportDefaultSpecifier: "ImportDefaultSpecifier", LineComment: "LineComment", Literal: "Literal", LogicalExpression: "LogicalExpression", MemberExpression: "MemberExpression", ObjectExpression: "ObjectExpression", Program: "Program", Property: "Property", ReturnStatement: "ReturnStatement", TemplateElement: "TemplateElement", TemplateLiteral: "TemplateLiteral", UnaryExpression: "UnaryExpression", UpdateExpression: "UpdateExpression", VariableDeclaration: "VariableDeclaration", VariableDeclarator: "VariableDeclarator", WhileStatement: "WhileStatement" };
var n6 = ["++", "--"];
var r4 = ["-", "+", "!", "~"];
var s7 = ["=", "/=", "*=", "%=", "+=", "-="];
var a2 = ["||", "&&"];
var o5 = ["|", "&", ">>", "<<", ">>>", "^", "==", "!=", "<", "<=", ">", ">=", "+", "-", "*", "/", "%"];
var D2 = { "||": 1, "&&": 2, "|": 3, "^": 4, "&": 5, "==": 6, "!=": 6, "<": 7, ">": 7, "<=": 7, ">=": 7, "<<": 8, ">>": 8, ">>>": 8, "+": 9, "-": 9, "*": 10, "/": 10, "%": 10 };
var h3 = { BooleanLiteral: 1, EOF: 2, Identifier: 3, Keyword: 4, NullLiteral: 5, NumericLiteral: 6, Punctuator: 7, StringLiteral: 8, Template: 10 };
var c3 = ["Unknown", "Boolean", "<end>", "Identifier", "Keyword", "Null", "Numeric", "Punctuator", "String", "RegularExpression", "Template"];
var l3 = { InvalidModuleUri: "InvalidModuleUri", ForInOfLoopInitializer: "ForInOfLoopInitializer", IdentifierExpected: "IdentifierExpected", InvalidEscapedReservedWord: "InvalidEscapedReservedWord", InvalidExpression: "InvalidExpression", InvalidFunctionIdentifier: "InvalidFunctionIdentifier", InvalidHexEscapeSequence: "InvalidHexEscapeSequence", InvalidLeftHandSideInAssignment: "InvalidLeftHandSideInAssignment", InvalidLeftHandSideInForIn: "InvalidLeftHandSideInForIn", InvalidTemplateHead: "InvalidTemplateHead", InvalidVariableAssignment: "InvalidVariableAssignment", KeyMustBeString: "KeyMustBeString", NoFunctionInsideBlock: "NoFunctionInsideBlock", NoFunctionInsideFunction: "NoFunctionInsideFunction", ModuleExportRootOnly: "ModuleExportRootOnly", ModuleImportRootOnly: "ModuleImportRootOnly", PunctuatorExpected: "PunctuatorExpected", TemplateOctalLiteral: "TemplateOctalLiteral", UnexpectedBoolean: "UnexpectedBoolean", UnexpectedEndOfScript: "UnexpectedEndOfScript", UnexpectedIdentifier: "UnexpectedIdentifier", UnexpectedKeyword: "UnexpectedKeyword", UnexpectedNull: "UnexpectedNull", UnexpectedNumber: "UnexpectedNumber", UnexpectedPunctuator: "UnexpectedPunctuator", UnexpectedString: "UnexpectedString", UnexpectedTemplate: "UnexpectedTemplate", UnexpectedToken: "UnexpectedToken" };
var d4 = { [l3.InvalidModuleUri]: "Module uri must be a text literal.", [l3.ForInOfLoopInitializer]: "for-in loop variable declaration may not have an initializer.", [l3.IdentifierExpected]: "'${value}' is an invalid identifier.", [l3.InvalidEscapedReservedWord]: "Keyword cannot contain escaped characters.", [l3.InvalidExpression]: "Invalid expression.", [l3.InvalidFunctionIdentifier]: "'${value}' is an invalid function identifier.", [l3.InvalidHexEscapeSequence]: "Invalid hexadecimal escape sequence.", [l3.InvalidLeftHandSideInAssignment]: "Invalid left-hand side in assignment.", [l3.InvalidLeftHandSideInForIn]: "Invalid left-hand side in for-in.", [l3.InvalidTemplateHead]: "Invalid template structure.", [l3.InvalidVariableAssignment]: "Invalid variable assignment.", [l3.KeyMustBeString]: "Object property keys must be a word starting with a letter.", [l3.NoFunctionInsideBlock]: "Functions cannot be declared inside of code blocks.", [l3.NoFunctionInsideFunction]: "Functions cannot be declared inside another function.", [l3.ModuleExportRootOnly]: "Module exports cannot be declared inside of code blocks.", [l3.ModuleImportRootOnly]: "Module import cannot be declared inside of code blocks.", [l3.PunctuatorExpected]: "'${value}' expected.", [l3.TemplateOctalLiteral]: "Octal literals are not allowed in template literals.", [l3.UnexpectedBoolean]: "Unexpected boolean literal.", [l3.UnexpectedEndOfScript]: "Unexpected end of Arcade expression.", [l3.UnexpectedIdentifier]: "Unexpected identifier.", [l3.UnexpectedKeyword]: "Unexpected keyword.", [l3.UnexpectedNull]: "Unexpected null literal.", [l3.UnexpectedNumber]: "Unexpected number.", [l3.UnexpectedPunctuator]: "Unexpected punctuator.", [l3.UnexpectedString]: "Unexpected text literal.", [l3.UnexpectedTemplate]: "Unexpected quasi '${value}'.", [l3.UnexpectedToken]: "Unexpected token '${value}'." };
var C3 = class _C extends Error {
  constructor({ code: e5, index: t5, line: u3, column: i7, len: n7 = 0, description: r5, data: s9 }) {
    super(r5 ?? e5), this.declaredRootClass = "esri.arcade.lib.diagnostic", this.name = "ParsingError", this.code = e5, this.index = t5, this.line = u3, this.column = i7, this.len = n7, this.data = s9, this.description = r5, this.range = { start: { line: u3, column: i7 - 1 }, end: { line: u3, column: i7 + n7 } }, Error.captureStackTrace?.(this, _C);
  }
};
function F2(e5) {
  return !!e5 && "object" == typeof e5 && "type" in e5 && e5.type === i5.Program;
}
function p5(e5) {
  return !!e5 && "object" == typeof e5 && "type" in e5 && e5.type === i5.BlockStatement;
}
function E2(e5) {
  return !!e5 && "object" == typeof e5 && "type" in e5 && e5.type === i5.BlockComment;
}
function A(e5) {
  return !!e5 && "object" == typeof e5 && "type" in e5 && e5.type === i5.EmptyStatement;
}
function B(e5) {
  return !!e5 && "object" == typeof e5 && "type" in e5 && e5.type === i5.VariableDeclarator;
}
function f5(e5, t5) {
  return t5.loc.end.line === e5.loc.start.line && t5.loc.end.column <= e5.loc.start.column;
}
function k(e5, t5) {
  return e5.range[0] >= t5.range[0] && e5.range[1] <= t5.range[1];
}
var g3 = class {
  constructor() {
    this.comments = [], this._nodeStack = [], this._newComments = [];
  }
  insertInnerComments(e5) {
    if (!p5(e5) || 0 !== e5.body.length) return;
    const t5 = [];
    for (let u3 = this._newComments.length - 1; u3 >= 0; u3--) {
      const i7 = this._newComments[u3];
      e5.range[1] >= i7.range[0] && (t5.unshift(i7), this._newComments.splice(u3, 1));
    }
    t5.length && (e5.innerComments = t5);
  }
  attachTrailingComments(e5) {
    const t5 = this._nodeStack.at(-1);
    if (!t5) return;
    if (p5(e5) && k(t5, e5)) for (let i7 = this._newComments.length - 1; i7 >= 0; i7--) {
      const u4 = this._newComments[i7];
      k(u4, e5) && (t5.trailingComments = [...t5.trailingComments ?? [], u4], this._newComments.splice(i7, 1));
    }
    let u3 = [];
    if (this._newComments.length > 0) for (let i7 = this._newComments.length - 1; i7 >= 0; i7--) {
      const n7 = this._newComments[i7];
      f5(n7, t5) ? (t5.trailingComments = [...t5.trailingComments ?? [], n7], this._newComments.splice(i7, 1)) : f5(n7, e5) && (u3.unshift(n7), this._newComments.splice(i7, 1));
    }
    if (t5.trailingComments) {
      f5(t5.trailingComments[0], e5) && (u3 = [...u3, ...t5.trailingComments], delete t5.trailingComments);
    }
    u3.length > 0 && (e5.trailingComments = u3);
  }
  attachLeadingComments(e5) {
    let t5;
    for (; this._nodeStack.length > 0; ) {
      const u4 = this._nodeStack[this._nodeStack.length - 1];
      if (!(e5.range[0] <= u4.range[0])) break;
      t5 = u4, this._nodeStack.pop();
    }
    const u3 = [], i7 = [];
    if (null != t5) {
      if (!t5.leadingComments) return;
      for (let n7 = t5.leadingComments.length - 1; n7 >= 0; n7--) {
        const r5 = t5.leadingComments[n7];
        e5.range[0] >= r5.range[1] ? (u3.unshift(r5), t5.leadingComments.splice(n7, 1)) : B(e5) && !E2(r5) && (i7.unshift(r5), t5.leadingComments.splice(n7, 1));
      }
      return 0 === t5.leadingComments.length && delete t5.leadingComments, u3.length && (e5.leadingComments = u3), void (i7.length && (e5.trailingComments = [...i7, ...e5.trailingComments ?? []]));
    }
    for (let n7 = this._newComments.length - 1; n7 >= 0; n7--) {
      const t6 = this._newComments[n7];
      e5.range[0] >= t6.range[0] && (u3.unshift(t6), this._newComments.splice(n7, 1));
    }
    u3.length && (e5.leadingComments = u3);
  }
  attachComments(e5) {
    if (F2(e5) && e5.body.length > 0) {
      const t5 = this._nodeStack.at(-1);
      return t5 ? (t5.trailingComments = [...t5.trailingComments ?? [], ...this._newComments], this._newComments.length = 0, void this._nodeStack.pop()) : (e5.trailingComments = [...this._newComments], void (this._newComments.length = 0));
    }
    this.attachTrailingComments(e5), this.attachLeadingComments(e5), this.insertInnerComments(e5), this._nodeStack.push(e5);
  }
  collectComment(e5) {
    this.comments.push(e5), this._newComments.push(e5);
  }
};
var S = /\$\{(.*?)\}/gu;
function w2(e5, t5) {
  const u3 = d4[e5];
  return t5 ? u3.replace(S, (e6, u4) => t5[u4]?.toString() ?? "") : u3;
}
var y3 = class {
  constructor(e5 = false) {
    this.tolerant = e5, this.errors = [];
  }
  recordError(e5) {
    this.errors.push(e5);
  }
  tolerate(e5) {
    if (!this.tolerant) throw e5;
    this.recordError(e5);
  }
  throwError(e5) {
    throw e5.description ??= w2(e5.code, e5.data), new C3(e5);
  }
  tolerateError(e5) {
    e5.description ??= w2(e5.code, e5.data);
    const t5 = new C3(e5);
    if (!this.tolerant) throw t5;
    this.recordError(t5);
  }
};
function I4(e5, t5) {
  if (!e5) throw new Error(`ASSERT: ${t5}`);
}
var T2 = { NonAsciiIdentifierStart: /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/u, NonAsciiIdentifierPart: /[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/u };
var b4 = { fromCodePoint: (e5) => e5 < 65536 ? String.fromCharCode(e5) : String.fromCharCode(55296 + (e5 - 65536 >> 10)) + String.fromCharCode(56320 + (e5 - 65536 & 1023)), isWhiteSpace: (e5) => 32 === e5 || 9 === e5 || 11 === e5 || 12 === e5 || 160 === e5 || e5 >= 5760 && [5760, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8199, 8200, 8201, 8202, 8239, 8287, 12288, 65279].includes(e5), isLineTerminator: (e5) => 10 === e5 || 13 === e5 || 8232 === e5 || 8233 === e5, isIdentifierStart: (e5) => 36 === e5 || 95 === e5 || e5 >= 65 && e5 <= 90 || e5 >= 97 && e5 <= 122 || 92 === e5 || e5 >= 128 && T2.NonAsciiIdentifierStart.test(b4.fromCodePoint(e5)), isIdentifierPart: (e5) => 36 === e5 || 95 === e5 || e5 >= 65 && e5 <= 90 || e5 >= 97 && e5 <= 122 || e5 >= 48 && e5 <= 57 || 92 === e5 || e5 >= 128 && T2.NonAsciiIdentifierPart.test(b4.fromCodePoint(e5)), isDecimalDigit: (e5) => e5 >= 48 && e5 <= 57, isHexDigit: (e5) => e5 >= 48 && e5 <= 57 || e5 >= 65 && e5 <= 70 || e5 >= 97 && e5 <= 102, isOctalDigit: (e5) => e5 >= 48 && e5 <= 55 };
function L2(e5) {
  return "0123456789abcdef".indexOf(e5.toLowerCase());
}
function v2(e5) {
  return "01234567".indexOf(e5);
}
var N = [[], [], []];
n6.forEach((e5) => N[e5.length - 1]?.push(e5)), r4.forEach((e5) => N[e5.length - 1]?.push(e5)), a2.forEach((e5) => N[e5.length - 1]?.push(e5)), s7.forEach((e5) => N[e5.length - 1]?.push(e5)), o5.forEach((e5) => N[e5.length - 1]?.push(e5));
var U2 = class {
  constructor(e5, t5) {
    this.source = e5, this.errorHandler = t5, this._length = e5.length, this.index = 0, this.lineNumber = 1, this.lineStart = 0, this.curlyStack = [];
  }
  saveState() {
    return { index: this.index, lineNumber: this.lineNumber, lineStart: this.lineStart, curlyStack: this.curlyStack.slice() };
  }
  restoreState(e5) {
    this.index = e5.index, this.lineNumber = e5.lineNumber, this.lineStart = e5.lineStart, this.curlyStack = e5.curlyStack;
  }
  eof() {
    return this.index >= this._length;
  }
  throwUnexpectedToken(e5 = l3.UnexpectedToken) {
    this.errorHandler.throwError({ code: e5, index: this.index, line: this.lineNumber, column: this.index - this.lineStart + 1, data: { value: this.source.charAt(this.index) } });
  }
  tolerateUnexpectedToken(e5 = l3.UnexpectedToken) {
    this.errorHandler.tolerateError({ code: e5, index: this.index, line: this.lineNumber, column: this.index - this.lineStart + 1 });
  }
  skipSingleLineComment(e5) {
    const t5 = [], u3 = this.index - e5, i7 = { start: { line: this.lineNumber, column: this.index - this.lineStart - e5 }, end: { line: 0, column: 0 } };
    for (; !this.eof(); ) {
      const n8 = this.source.charCodeAt(this.index);
      if (this.index += 1, b4.isLineTerminator(n8)) {
        i7.end = { line: this.lineNumber, column: this.index - this.lineStart - 1 };
        const r5 = { multiLine: false, start: u3 + e5, end: this.index - 1, range: [u3, this.index - 1], loc: i7 };
        return t5.push(r5), 13 === n8 && 10 === this.source.charCodeAt(this.index) && (this.index += 1), this.lineNumber += 1, this.lineStart = this.index, t5;
      }
    }
    i7.end = { line: this.lineNumber, column: this.index - this.lineStart };
    const n7 = { multiLine: false, start: u3 + e5, end: this.index, range: [u3, this.index], loc: i7 };
    return t5.push(n7), t5;
  }
  skipMultiLineComment() {
    const e5 = [], t5 = this.index - 2, u3 = { start: { line: this.lineNumber, column: this.index - this.lineStart - 2 }, end: { line: 0, column: 0 } };
    for (; !this.eof(); ) {
      const i8 = this.source.charCodeAt(this.index);
      if (b4.isLineTerminator(i8)) 13 === i8 && 10 === this.source.charCodeAt(this.index + 1) && (this.index += 1), this.lineNumber += 1, this.index += 1, this.lineStart = this.index;
      else if (42 === i8) {
        if (47 === this.source.charCodeAt(this.index + 1)) {
          this.index += 2, u3.end = { line: this.lineNumber, column: this.index - this.lineStart };
          const i9 = { multiLine: true, start: t5 + 2, end: this.index - 2, range: [t5, this.index], loc: u3 };
          return e5.push(i9), e5;
        }
        this.index += 1;
      } else this.index += 1;
    }
    u3.end = { line: this.lineNumber, column: this.index - this.lineStart };
    const i7 = { multiLine: true, start: t5 + 2, end: this.index, range: [t5, this.index], loc: u3 };
    return e5.push(i7), this.tolerateUnexpectedToken(), e5;
  }
  scanComments() {
    let e5 = [];
    for (; !this.eof(); ) {
      let t5 = this.source.charCodeAt(this.index);
      if (b4.isWhiteSpace(t5)) this.index += 1;
      else if (b4.isLineTerminator(t5)) this.index += 1, 13 === t5 && 10 === this.source.charCodeAt(this.index) && (this.index += 1), this.lineNumber += 1, this.lineStart = this.index;
      else {
        if (47 !== t5) break;
        if (t5 = this.source.charCodeAt(this.index + 1), 47 === t5) {
          this.index += 2;
          const t6 = this.skipSingleLineComment(2);
          e5 = [...e5, ...t6];
        } else {
          if (42 !== t5) break;
          {
            this.index += 2;
            const t6 = this.skipMultiLineComment();
            e5 = [...e5, ...t6];
          }
        }
      }
    }
    return e5;
  }
  isKeyword(e5) {
    switch ((e5 = e5.toLowerCase()).length) {
      case 2:
        return e5 === t3.If || e5 === t3.In;
      case 3:
        return e5 === t3.Var || e5 === t3.For;
      case 4:
        return e5 === t3.Else;
      case 5:
        return e5 === t3.Break || e5 === t3.While;
      case 6:
        return e5 === t3.Return || e5 === t3.Import || e5 === t3.Export;
      case 8:
        return e5 === t3.Function || e5 === t3.Continue;
      default:
        return false;
    }
  }
  codePointAt(e5) {
    let t5 = this.source.charCodeAt(e5);
    if (t5 >= 55296 && t5 <= 56319) {
      const u3 = this.source.charCodeAt(e5 + 1);
      u3 >= 56320 && u3 <= 57343 && (t5 = 1024 * (t5 - 55296) + u3 - 56320 + 65536);
    }
    return t5;
  }
  scanHexEscape(e5) {
    const t5 = "u" === e5 ? 4 : 2;
    let u3 = 0;
    for (let i7 = 0; i7 < t5; i7++) {
      if (this.eof() || !b4.isHexDigit(this.source.charCodeAt(this.index))) return null;
      u3 = 16 * u3 + L2(this.source[this.index] ?? ""), this.index += 1;
    }
    return String.fromCharCode(u3);
  }
  scanUnicodeCodePointEscape() {
    let e5 = this.source[this.index], t5 = 0;
    for ("}" === e5 && this.throwUnexpectedToken(); !this.eof() && (e5 = this.source[this.index] ?? "", this.index += 1, b4.isHexDigit(e5.charCodeAt(0))); ) t5 = 16 * t5 + L2(e5);
    return (t5 > 1114111 || "}" !== e5) && this.throwUnexpectedToken(), b4.fromCodePoint(t5);
  }
  getIdentifier() {
    const e5 = this.index;
    for (this.index += 1; !this.eof(); ) {
      const t5 = this.source.charCodeAt(this.index);
      if (92 === t5) return this.index = e5, this.getComplexIdentifier();
      if (t5 >= 55296 && t5 < 57343) return this.index = e5, this.getComplexIdentifier();
      if (!b4.isIdentifierPart(t5)) break;
      this.index += 1;
    }
    return this.source.slice(e5, this.index);
  }
  getComplexIdentifier() {
    let e5, t5 = this.codePointAt(this.index), u3 = b4.fromCodePoint(t5);
    for (this.index += u3.length, 92 === t5 && (117 !== this.source.charCodeAt(this.index) && this.throwUnexpectedToken(), this.index += 1, "{" === this.source[this.index] ? (this.index += 1, e5 = this.scanUnicodeCodePointEscape()) : (e5 = this.scanHexEscape("u"), (null === e5 || "\\" === e5 || !b4.isIdentifierStart(e5.charCodeAt(0))) && this.throwUnexpectedToken()), u3 = e5); !this.eof() && (t5 = this.codePointAt(this.index), b4.isIdentifierPart(t5)); ) e5 = b4.fromCodePoint(t5), u3 += e5, this.index += e5.length, 92 === t5 && (u3 = u3.substring(0, u3.length - 1), 117 !== this.source.charCodeAt(this.index) && this.throwUnexpectedToken(), this.index += 1, "{" === this.source[this.index] ? (this.index += 1, e5 = this.scanUnicodeCodePointEscape()) : (e5 = this.scanHexEscape("u"), (null === e5 || "\\" === e5 || !b4.isIdentifierPart(e5.charCodeAt(0))) && this.throwUnexpectedToken()), u3 += e5);
    return u3;
  }
  octalToDecimal(e5) {
    let t5 = "0" !== e5, u3 = v2(e5);
    return !this.eof() && b4.isOctalDigit(this.source.charCodeAt(this.index)) && (t5 = true, u3 = 8 * u3 + v2(this.source[this.index] ?? ""), this.index += 1, "0123".includes(e5) && !this.eof() && b4.isOctalDigit(this.source.charCodeAt(this.index)) && (u3 = 8 * u3 + v2(this.source[this.index] ?? ""), this.index += 1)), { code: u3, octal: t5 };
  }
  scanIdentifier() {
    let t5;
    const u3 = this.index, i7 = 92 === this.source.charCodeAt(u3) ? this.getComplexIdentifier() : this.getIdentifier();
    if (t5 = 1 === i7.length ? h3.Identifier : this.isKeyword(i7) ? h3.Keyword : i7.toLowerCase() === e3.Null ? h3.NullLiteral : i7.toLowerCase() === e3.True || i7.toLowerCase() === e3.False ? h3.BooleanLiteral : h3.Identifier, t5 !== h3.Identifier && u3 + i7.length !== this.index) {
      const e5 = this.index;
      this.index = u3, this.tolerateUnexpectedToken(l3.InvalidEscapedReservedWord), this.index = e5;
    }
    return { type: t5, value: i7, lineNumber: this.lineNumber, lineStart: this.lineStart, start: u3, end: this.index };
  }
  scanPunctuator() {
    const e5 = this.index;
    let t5 = this.source[this.index] ?? "";
    switch (t5) {
      case "(":
      case "{":
        "{" === t5 && this.curlyStack.push("{"), this.index += 1;
        break;
      case ".":
      case ")":
      case ";":
      case ",":
      case "[":
      case "]":
      case ":":
      case "?":
      case "~":
        this.index += 1;
        break;
      case "}":
        this.index += 1, this.curlyStack.pop();
        break;
      default:
        for (let e6 = N.length; e6 > 0; e6--) if (t5 = this.source.substring(this.index, this.index + e6), N[e6 - 1]?.includes(t5)) {
          this.index += e6;
          break;
        }
    }
    return this.index === e5 && this.throwUnexpectedToken(), { type: h3.Punctuator, value: t5, lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanHexLiteral(e5) {
    let t5 = "";
    for (; !this.eof() && b4.isHexDigit(this.source.charCodeAt(this.index)); ) t5 += this.source[this.index], this.index += 1;
    return 0 === t5.length && this.throwUnexpectedToken(), b4.isIdentifierStart(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(), { type: h3.NumericLiteral, value: Number.parseInt(`0x${t5}`, 16), lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanBinaryLiteral(e5) {
    let t5 = "";
    for (; !this.eof(); ) {
      const e6 = this.source[this.index];
      if ("0" !== e6 && "1" !== e6) break;
      t5 += this.source[this.index], this.index += 1;
    }
    if (0 === t5.length && this.throwUnexpectedToken(), !this.eof()) {
      const e6 = this.source.charCodeAt(this.index);
      (b4.isIdentifierStart(e6) || b4.isDecimalDigit(e6)) && this.throwUnexpectedToken();
    }
    return { type: h3.NumericLiteral, value: Number.parseInt(t5, 2), lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanOctalLiteral(e5, t5) {
    let u3 = "", i7 = false;
    for (b4.isOctalDigit(e5.charCodeAt(0)) && (i7 = true, u3 = `0${this.source[this.index]}`), this.index += 1; !this.eof() && b4.isOctalDigit(this.source.charCodeAt(this.index)); ) u3 += this.source[this.index], this.index += 1;
    return !i7 && 0 === u3.length && this.throwUnexpectedToken(), (b4.isIdentifierStart(this.source.charCodeAt(this.index)) || b4.isDecimalDigit(this.source.charCodeAt(this.index))) && this.throwUnexpectedToken(), { type: h3.NumericLiteral, value: Number.parseInt(u3, 8), lineNumber: this.lineNumber, lineStart: this.lineStart, start: t5, end: this.index };
  }
  scanNumericLiteral() {
    const e5 = this.index;
    let t5 = this.source[e5] ?? "";
    I4(b4.isDecimalDigit(t5.charCodeAt(0)) || "." === t5, "Numeric literal must start with a decimal digit or a decimal point");
    let u3 = "";
    if ("." !== t5) {
      if (u3 = this.source[this.index] ?? "", this.index += 1, t5 = this.source[this.index] ?? "", "0" === u3) {
        if ("x" === t5 || "X" === t5) return this.index += 1, this.scanHexLiteral(e5);
        if ("b" === t5 || "B" === t5) return this.index += 1, this.scanBinaryLiteral(e5);
        if ("o" === t5 || "O" === t5) return this.scanOctalLiteral(t5, e5);
      }
      for (; b4.isDecimalDigit(this.source.charCodeAt(this.index)); ) u3 += this.source[this.index], this.index += 1;
      t5 = this.source[this.index] ?? "";
    }
    if ("." === t5) {
      for (u3 += this.source[this.index], this.index += 1; b4.isDecimalDigit(this.source.charCodeAt(this.index)); ) u3 += this.source[this.index], this.index += 1;
      t5 = this.source[this.index] ?? "";
    }
    if ("e" === t5 || "E" === t5) if (u3 += this.source[this.index], this.index += 1, t5 = this.source[this.index] ?? "", ("+" === t5 || "-" === t5) && (u3 += this.source[this.index], this.index += 1), b4.isDecimalDigit(this.source.charCodeAt(this.index))) for (; b4.isDecimalDigit(this.source.charCodeAt(this.index)); ) u3 += this.source[this.index], this.index += 1;
    else this.throwUnexpectedToken();
    return b4.isIdentifierStart(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(), { type: h3.NumericLiteral, value: Number.parseFloat(u3), lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanStringLiteral() {
    const e5 = this.index;
    let t5 = this.source[e5];
    I4("'" === t5 || '"' === t5, "String literal must starts with a quote"), this.index += 1;
    let u3 = false, i7 = "";
    for (; !this.eof(); ) {
      let e6 = this.source[this.index] ?? "";
      if (this.index += 1, e6 === t5) {
        t5 = "";
        break;
      }
      if ("\\" === e6) if (e6 = this.source[this.index] ?? "", this.index += 1, e6 && b4.isLineTerminator(e6.charCodeAt(0))) this.lineNumber += 1, "\r" === e6 && "\n" === this.source[this.index] && (this.index += 1), this.lineStart = this.index;
      else switch (e6) {
        case "u":
          if ("{" === this.source[this.index]) this.index += 1, i7 += this.scanUnicodeCodePointEscape();
          else {
            const t6 = this.scanHexEscape(e6);
            null === t6 && this.throwUnexpectedToken(), i7 += t6;
          }
          break;
        case "x": {
          const t6 = this.scanHexEscape(e6);
          null === t6 && this.throwUnexpectedToken(l3.InvalidHexEscapeSequence), i7 += t6;
          break;
        }
        case "n":
          i7 += "\n";
          break;
        case "r":
          i7 += "\r";
          break;
        case "t":
          i7 += "	";
          break;
        case "b":
          i7 += "\b";
          break;
        case "f":
          i7 += "\f";
          break;
        case "v":
          i7 += "\v";
          break;
        case "8":
        case "9":
          i7 += e6, this.tolerateUnexpectedToken();
          break;
        default:
          if (e6 && b4.isOctalDigit(e6.charCodeAt(0))) {
            const t6 = this.octalToDecimal(e6);
            u3 = t6.octal || u3, i7 += String.fromCharCode(t6.code);
          } else i7 += e6;
      }
      else {
        if (b4.isLineTerminator(e6.charCodeAt(0))) break;
        i7 += e6;
      }
    }
    return "" !== t5 && (this.index = e5, this.throwUnexpectedToken()), { type: h3.StringLiteral, value: i7, lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanTemplate() {
    let e5 = "", t5 = false;
    const u3 = this.index, i7 = "`" === this.source[u3];
    let n7 = false, r5 = 2;
    for (this.index += 1; !this.eof(); ) {
      let u4 = this.source[this.index] ?? "";
      if (this.index += 1, "`" === u4) {
        r5 = 1, n7 = true, t5 = true;
        break;
      }
      if ("$" !== u4) if ("\\" !== u4) b4.isLineTerminator(u4.charCodeAt(0)) ? (this.lineNumber += 1, "\r" === u4 && "\n" === this.source[this.index] && (this.index += 1), this.lineStart = this.index, e5 += "\n") : e5 += u4;
      else if (u4 = this.source[this.index] ?? "", this.index += 1, b4.isLineTerminator(u4.charCodeAt(0))) this.lineNumber += 1, "\r" === u4 && "\n" === this.source[this.index] && (this.index += 1), this.lineStart = this.index;
      else switch (u4) {
        case "n":
          e5 += "\n";
          break;
        case "r":
          e5 += "\r";
          break;
        case "t":
          e5 += "	";
          break;
        case "u":
          if ("{" === this.source[this.index]) this.index += 1, e5 += this.scanUnicodeCodePointEscape();
          else {
            const t6 = this.index, i8 = this.scanHexEscape(u4);
            null !== i8 ? e5 += i8 : (this.index = t6, e5 += u4);
          }
          break;
        case "x": {
          const t6 = this.scanHexEscape(u4);
          null === t6 && this.throwUnexpectedToken(l3.InvalidHexEscapeSequence), e5 += t6;
          break;
        }
        case "b":
          e5 += "\b";
          break;
        case "f":
          e5 += "\f";
          break;
        case "v":
          e5 += "\v";
          break;
        default:
          "0" === u4 ? (b4.isDecimalDigit(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(l3.TemplateOctalLiteral), e5 += "\0") : b4.isOctalDigit(u4.charCodeAt(0)) ? this.throwUnexpectedToken(l3.TemplateOctalLiteral) : e5 += u4;
      }
      else {
        if ("{" === this.source[this.index]) {
          this.curlyStack.push("${"), this.index += 1, t5 = true;
          break;
        }
        e5 += u4;
      }
    }
    return t5 || this.throwUnexpectedToken(), i7 || this.curlyStack.pop(), { type: h3.Template, value: this.source.slice(u3 + 1, this.index - r5), cooked: e5, head: i7, tail: n7, lineNumber: this.lineNumber, lineStart: this.lineStart, start: u3, end: this.index };
  }
  lex() {
    if (this.eof()) return { type: h3.EOF, value: "", lineNumber: this.lineNumber, lineStart: this.lineStart, start: this.index, end: this.index };
    const e5 = this.source.charCodeAt(this.index);
    return b4.isIdentifierStart(e5) ? this.scanIdentifier() : 40 === e5 || 41 === e5 || 59 === e5 ? this.scanPunctuator() : 39 === e5 || 34 === e5 ? this.scanStringLiteral() : 46 === e5 ? b4.isDecimalDigit(this.source.charCodeAt(this.index + 1)) ? this.scanNumericLiteral() : this.scanPunctuator() : b4.isDecimalDigit(e5) ? this.scanNumericLiteral() : 96 === e5 || 125 === e5 && "${" === this.curlyStack[this.curlyStack.length - 1] ? this.scanTemplate() : e5 >= 55296 && e5 < 57343 && b4.isIdentifierStart(this.codePointAt(this.index)) ? this.scanIdentifier() : this.scanPunctuator();
  }
};
var P5 = { None: 0, Function: 1, IfClause: 2, ForLoop: 4, ForOfLoop: 8, WhileLoop: 16 };
var M3 = { AsObject: 0, Automatic: 1 };
function O2(e5, t5 = 0) {
  let u3 = e5.start - e5.lineStart, i7 = e5.lineNumber;
  return u3 < 0 && (u3 += t5, i7 -= 1), { index: e5.start, line: i7, column: u3 };
}
function R3(e5) {
  return [{ index: e5.range[0], ...e5.loc.start }, { index: e5.range[1], ...e5.loc.end }];
}
function z4(e5) {
  return e5 in D2 ? D2[e5] : 0;
}
var K2 = class {
  constructor(e5, t5 = {}, u3) {
    this.delegate = u3, this.hasLineTerminator = false, this.options = { tokens: "boolean" == typeof t5.tokens && t5.tokens, comments: "boolean" == typeof t5.comments && t5.comments, tolerant: "boolean" == typeof t5.tolerant && t5.tolerant }, this.options.comments && (this.commentHandler = new g3()), this.errorHandler = new y3(this.options.tolerant), this.scanner = new U2(e5, this.errorHandler), this.context = { isAssignmentTarget: false, blockContext: P5.None, curlyParsingType: M3.AsObject }, this.rawToken = { type: h3.EOF, value: "", lineNumber: this.scanner.lineNumber, lineStart: 0, start: 0, end: 0 }, this.tokens = [], this.startMarker = { index: 0, line: this.scanner.lineNumber, column: 0 }, this.endMarker = { index: 0, line: this.scanner.lineNumber, column: 0 }, this.readNextRawToken(), this.endMarker = { index: this.scanner.index, line: this.scanner.lineNumber, column: this.scanner.index - this.scanner.lineStart };
  }
  throwIfInvalidType(e5, t5, { validTypes: u3, invalidTypes: i7 }) {
    u3?.some((t6) => e5.type === t6) || i7?.some((t6) => e5.type === t6) && this.throwError(l3.InvalidExpression, t5);
  }
  throwError(e5, t5, u3 = this.endMarker) {
    const { index: i7, line: n7, column: r5 } = t5, s9 = u3.index - i7 - 1;
    this.errorHandler.throwError({ code: e5, index: i7, line: n7, column: r5 + 1, len: s9 });
  }
  tolerateError(e5, t5) {
    throw new Error("######################################### !!!");
  }
  unexpectedTokenError(e5 = {}) {
    const { rawToken: t5 } = e5;
    let u3, { code: i7, data: n7 } = e5;
    if (t5) {
      if (!i7) switch (t5.type) {
        case h3.EOF:
          i7 = l3.UnexpectedEndOfScript;
          break;
        case h3.Identifier:
          i7 = l3.UnexpectedIdentifier;
          break;
        case h3.NumericLiteral:
          i7 = l3.UnexpectedNumber;
          break;
        case h3.StringLiteral:
          i7 = l3.UnexpectedString;
          break;
        case h3.Template:
          i7 = l3.UnexpectedTemplate;
      }
      u3 = t5.value.toString();
    } else u3 = "ILLEGAL";
    i7 ??= l3.UnexpectedToken, n7 ??= { value: u3 };
    const r5 = w2(i7, n7);
    if (t5) {
      const e6 = t5.start, u4 = t5.lineNumber, s10 = t5.start - t5.lineStart + 1;
      return new C3({ code: i7, index: e6, line: u4, column: s10, len: t5.end - t5.start - 1, data: n7, description: r5 });
    }
    const { index: s9, line: a3 } = this.endMarker;
    return new C3({ code: i7, index: s9, line: a3, column: this.endMarker.column + 1, data: n7, description: r5 });
  }
  throwUnexpectedToken(e5 = {}) {
    throw e5.rawToken ??= this.rawToken, this.unexpectedTokenError(e5);
  }
  collectComments(e5) {
    const { commentHandler: t5 } = this;
    !t5 || !e5.length || e5.forEach((e6) => {
      const u3 = { type: e6.multiLine ? i5.BlockComment : i5.LineComment, value: this.getSourceValue(e6), range: e6.range, loc: e6.loc };
      t5.collectComment(u3);
    });
  }
  peekAhead(e5) {
    const t5 = () => (this.scanner.scanComments(), this.scanner.lex()), u3 = this.scanner.saveState(), i7 = e5.call(this, t5);
    return this.scanner.restoreState(u3), i7;
  }
  getSourceValue(e5) {
    return this.scanner.source.slice(e5.start, e5.end);
  }
  convertToToken(e5) {
    return { type: c3[e5.type], value: this.getSourceValue(e5), range: [e5.start, e5.end], loc: { start: { line: this.startMarker.line, column: this.startMarker.column }, end: { line: this.scanner.lineNumber, column: this.scanner.index - this.scanner.lineStart } } };
  }
  readNextRawToken() {
    this.endMarker.index = this.scanner.index, this.endMarker.line = this.scanner.lineNumber, this.endMarker.column = this.scanner.index - this.scanner.lineStart;
    const e5 = this.rawToken;
    this.collectComments(this.scanner.scanComments()), this.scanner.index !== this.startMarker.index && (this.startMarker.index = this.scanner.index, this.startMarker.line = this.scanner.lineNumber, this.startMarker.column = this.scanner.index - this.scanner.lineStart), this.rawToken = this.scanner.lex(), this.hasLineTerminator = e5.lineNumber !== this.rawToken.lineNumber, this.options.tokens && this.rawToken.type !== h3.EOF && this.tokens.push(this.convertToToken(this.rawToken));
  }
  captureStartMarker() {
    return { index: this.startMarker.index, line: this.startMarker.line, column: this.startMarker.column };
  }
  getItemLocation(e5) {
    return { range: [e5.index, this.endMarker.index], loc: { start: { line: e5.line, column: e5.column }, end: { line: this.endMarker.line, column: this.endMarker.column } } };
  }
  finalize(e5) {
    return (this.delegate ?? this.commentHandler) && (this.commentHandler?.attachComments(e5), this.delegate?.(e5)), e5;
  }
  expectPunctuator(e5) {
    const t5 = this.rawToken;
    this.matchPunctuator(e5) ? this.readNextRawToken() : this.throwUnexpectedToken({ rawToken: t5, code: l3.PunctuatorExpected, data: { value: e5 } });
  }
  expectKeyword(e5) {
    this.rawToken.type !== h3.Keyword || this.rawToken.value.toLowerCase() !== e5.toString() ? this.throwUnexpectedToken({ rawToken: this.rawToken }) : this.readNextRawToken();
  }
  expectContextualKeyword(e5) {
    this.rawToken.type !== h3.Identifier || this.rawToken.value.toLowerCase() !== e5 ? this.throwUnexpectedToken({ rawToken: this.rawToken }) : this.readNextRawToken();
  }
  matchKeyword(e5) {
    return this.rawToken.type === h3.Keyword && this.rawToken.value.toLowerCase() === e5;
  }
  matchContextualKeyword(e5) {
    return this.rawToken.type === h3.Identifier && this.rawToken.value === e5;
  }
  matchPunctuator(e5) {
    return this.rawToken.type === h3.Punctuator && this.rawToken.value === e5;
  }
  getMatchingPunctuator(e5) {
    if ("string" == typeof e5 && (e5 = e5.split("")), this.rawToken.type === h3.Punctuator && e5.length) return e5.find(this.matchPunctuator.bind(this));
  }
  isolateCoverGrammar(e5) {
    const t5 = this.context.isAssignmentTarget;
    this.context.isAssignmentTarget = true;
    const u3 = e5.call(this);
    return this.context.isAssignmentTarget = t5, u3;
  }
  inheritCoverGrammar(e5) {
    const t5 = this.context.isAssignmentTarget;
    this.context.isAssignmentTarget = true;
    const u3 = e5.call(this);
    return this.context.isAssignmentTarget &&= t5, u3;
  }
  withBlockContext(e5, t5) {
    const u3 = this.context.blockContext;
    this.context.blockContext |= e5;
    const i7 = this.context.curlyParsingType;
    this.context.curlyParsingType = M3.Automatic;
    const n7 = t5.call(this);
    return this.context.blockContext = u3, this.context.curlyParsingType = i7, n7;
  }
  consumeSemicolon() {
    if (this.matchPunctuator(";")) this.readNextRawToken();
    else if (!this.hasLineTerminator) {
      if (this.rawToken.type === h3.EOF || this.matchPunctuator("}")) return this.endMarker.index = this.startMarker.index, this.endMarker.line = this.startMarker.line, void (this.endMarker.column = this.startMarker.column);
      this.throwUnexpectedToken({ rawToken: this.rawToken });
    }
  }
  parsePrimaryExpression() {
    const t5 = this.captureStartMarker(), u3 = this.rawToken;
    switch (u3.type) {
      case h3.Identifier:
        return this.readNextRawToken(), this.finalize({ type: i5.Identifier, name: u3.value, ...this.getItemLocation(t5) });
      case h3.NumericLiteral:
      case h3.StringLiteral:
        return this.context.isAssignmentTarget = false, this.readNextRawToken(), this.finalize({ type: i5.Literal, value: u3.value, raw: this.getSourceValue(u3), isString: "string" == typeof u3.value, ...this.getItemLocation(t5) });
      case h3.BooleanLiteral:
        return this.context.isAssignmentTarget = false, this.readNextRawToken(), this.finalize({ type: i5.Literal, value: u3.value.toLowerCase() === e3.True, raw: this.getSourceValue(u3), isString: false, ...this.getItemLocation(t5) });
      case h3.NullLiteral:
        return this.context.isAssignmentTarget = false, this.readNextRawToken(), this.finalize({ type: i5.Literal, value: null, raw: this.getSourceValue(u3), isString: false, ...this.getItemLocation(t5) });
      case h3.Template:
        return this.parseTemplateLiteral();
      case h3.Punctuator:
        switch (u3.value) {
          case "(":
            return this.inheritCoverGrammar(this.parseGroupExpression.bind(this));
          case "[":
            return this.inheritCoverGrammar(this.parseArrayInitializer.bind(this));
          case "{":
            return this.inheritCoverGrammar(this.parseObjectExpression.bind(this));
          default:
            return this.throwUnexpectedToken({ rawToken: this.rawToken });
        }
      case h3.Keyword:
        return this.context.isAssignmentTarget = false, this.throwUnexpectedToken({ rawToken: this.rawToken });
      default:
        return this.throwUnexpectedToken({ rawToken: this.rawToken });
    }
  }
  parseArrayInitializer() {
    const e5 = this.captureStartMarker();
    this.expectPunctuator("[");
    const t5 = [];
    for (; !this.matchPunctuator("]"); ) {
      const e6 = this.captureStartMarker();
      this.matchPunctuator(",") ? (this.readNextRawToken(), this.throwError(l3.InvalidExpression, e6)) : (t5.push(this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))), this.matchPunctuator("]") || this.expectPunctuator(","));
    }
    return this.expectPunctuator("]"), this.finalize({ type: i5.ArrayExpression, elements: t5, ...this.getItemLocation(e5) });
  }
  parseObjectPropertyKey() {
    const e5 = this.captureStartMarker(), t5 = this.rawToken;
    switch (t5.type) {
      case h3.StringLiteral:
        return this.readNextRawToken(), this.finalize({ type: i5.Literal, value: t5.value, raw: this.getSourceValue(t5), isString: true, ...this.getItemLocation(e5) });
      case h3.Identifier:
      case h3.BooleanLiteral:
      case h3.NullLiteral:
      case h3.Keyword:
        return this.readNextRawToken(), this.finalize({ type: i5.Identifier, name: t5.value, ...this.getItemLocation(e5) });
      default:
        this.throwError(l3.KeyMustBeString, e5);
    }
  }
  parseObjectProperty() {
    const e5 = this.rawToken, t5 = this.captureStartMarker(), u3 = this.parseObjectPropertyKey();
    let n7 = false, r5 = null;
    return this.matchPunctuator(":") ? (this.readNextRawToken(), r5 = this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))) : e5.type === h3.Identifier ? (n7 = true, r5 = this.finalize({ type: i5.Identifier, name: e5.value, ...this.getItemLocation(t5) })) : this.throwUnexpectedToken({ rawToken: this.rawToken }), this.finalize({ type: i5.Property, kind: "init", key: u3, value: r5, shorthand: n7, ...this.getItemLocation(t5) });
  }
  parseObjectExpression() {
    const e5 = this.captureStartMarker();
    this.expectPunctuator("{");
    const t5 = [];
    for (; !this.matchPunctuator("}"); ) t5.push(this.parseObjectProperty()), this.matchPunctuator("}") || this.expectPunctuator(",");
    return this.expectPunctuator("}"), this.finalize({ type: i5.ObjectExpression, properties: t5, ...this.getItemLocation(e5) });
  }
  parseTemplateElement(e5 = false) {
    const t5 = this.rawToken;
    t5.type !== h3.Template && this.throwUnexpectedToken({ rawToken: t5 }), e5 && !t5.head && this.throwUnexpectedToken({ code: l3.InvalidTemplateHead, rawToken: t5 });
    const u3 = this.captureStartMarker();
    this.readNextRawToken();
    const { value: n7, cooked: r5, tail: s9 } = t5, a3 = this.finalize({ type: i5.TemplateElement, value: { raw: n7, cooked: r5 }, tail: s9, ...this.getItemLocation(u3) });
    return a3.loc.start.column += 1, a3.loc.end.column -= s9 ? 1 : 2, a3;
  }
  parseTemplateLiteral() {
    const e5 = this.captureStartMarker(), t5 = [], u3 = [];
    let n7 = this.parseTemplateElement(true);
    for (u3.push(n7); !n7.tail; ) t5.push(this.parseExpression()), n7 = this.parseTemplateElement(), u3.push(n7);
    return this.finalize({ type: i5.TemplateLiteral, quasis: u3, expressions: t5, ...this.getItemLocation(e5) });
  }
  parseGroupExpression() {
    this.expectPunctuator("(");
    const e5 = this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));
    return this.expectPunctuator(")"), e5;
  }
  parseArguments() {
    this.expectPunctuator("(");
    const e5 = [];
    if (!this.matchPunctuator(")")) for (; ; ) {
      const t5 = this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));
      if (e5.push(t5), this.matchPunctuator(")") || (this.expectPunctuator(","), this.matchPunctuator(")"))) break;
    }
    return this.expectPunctuator(")"), e5;
  }
  parseMemberName() {
    const e5 = this.rawToken, t5 = this.captureStartMarker();
    return this.readNextRawToken(), e5.type !== h3.NullLiteral && e5.type !== h3.Identifier && e5.type !== h3.Keyword && e5.type !== h3.BooleanLiteral && this.throwUnexpectedToken({ rawToken: e5 }), this.finalize({ type: i5.Identifier, name: e5.value, ...this.getItemLocation(t5) });
  }
  parseLeftHandSideExpression() {
    const e5 = this.captureStartMarker();
    let t5 = this.inheritCoverGrammar(this.parsePrimaryExpression.bind(this));
    const u3 = this.captureStartMarker();
    let n7;
    for (; n7 = this.getMatchingPunctuator("([."); ) switch (n7) {
      case "(": {
        this.context.isAssignmentTarget = false, t5.type !== i5.Identifier && t5.type !== i5.MemberExpression && this.throwError(l3.IdentifierExpected, e5, u3);
        const n8 = this.parseArguments();
        t5 = this.finalize({ type: i5.CallExpression, callee: t5, arguments: n8, ...this.getItemLocation(e5) });
        continue;
      }
      case "[": {
        this.context.isAssignmentTarget = true, this.expectPunctuator("[");
        const u4 = this.isolateCoverGrammar(() => this.parseExpression());
        this.expectPunctuator("]"), t5 = this.finalize({ type: i5.MemberExpression, computed: true, object: t5, property: u4, ...this.getItemLocation(e5) });
        continue;
      }
      case ".": {
        this.context.isAssignmentTarget = true, this.expectPunctuator(".");
        const u4 = this.parseMemberName();
        t5 = this.finalize({ type: i5.MemberExpression, computed: false, object: t5, property: u4, ...this.getItemLocation(e5) });
        continue;
      }
    }
    return t5;
  }
  parseUpdateExpression() {
    const e5 = this.captureStartMarker();
    let t5 = this.getMatchingPunctuator(n6);
    if (t5) {
      this.readNextRawToken();
      const u4 = this.captureStartMarker(), n7 = this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));
      return n7.type !== i5.Identifier && n7.type !== i5.MemberExpression && n7.type !== i5.CallExpression && this.throwError(l3.InvalidExpression, u4), this.context.isAssignmentTarget || this.tolerateError(l3.InvalidLeftHandSideInAssignment, e5), this.context.isAssignmentTarget = false, this.finalize({ type: i5.UpdateExpression, operator: t5, argument: n7, prefix: true, ...this.getItemLocation(e5) });
    }
    const u3 = this.captureStartMarker(), r5 = this.inheritCoverGrammar(this.parseLeftHandSideExpression.bind(this)), s9 = this.captureStartMarker();
    return this.hasLineTerminator || (t5 = this.getMatchingPunctuator(n6), !t5) ? r5 : (r5.type !== i5.Identifier && r5.type !== i5.MemberExpression && this.throwError(l3.InvalidExpression, u3, s9), this.context.isAssignmentTarget || this.tolerateError(l3.InvalidLeftHandSideInAssignment, e5), this.readNextRawToken(), this.context.isAssignmentTarget = false, this.finalize({ type: i5.UpdateExpression, operator: t5, argument: r5, prefix: false, ...this.getItemLocation(e5) }));
  }
  parseUnaryExpression() {
    const e5 = this.getMatchingPunctuator(r4);
    if (e5) {
      const t5 = this.captureStartMarker();
      this.readNextRawToken();
      const u3 = this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));
      return this.context.isAssignmentTarget = false, this.finalize({ type: i5.UnaryExpression, operator: e5, argument: u3, prefix: true, ...this.getItemLocation(t5) });
    }
    return this.parseUpdateExpression();
  }
  parseBinaryExpression() {
    const e5 = this.rawToken;
    let t5 = this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));
    if (this.rawToken.type !== h3.Punctuator) return t5;
    const u3 = this.rawToken.value;
    let i7 = z4(u3);
    if (0 === i7) return t5;
    this.readNextRawToken(), this.context.isAssignmentTarget = false;
    const n7 = [e5, this.rawToken];
    let r5 = t5, s9 = this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));
    const a3 = [r5, u3, s9], o6 = [i7];
    for (; this.rawToken.type === h3.Punctuator && (i7 = z4(this.rawToken.value)) > 0; ) {
      for (; a3.length > 2 && i7 <= o6[o6.length - 1]; ) {
        s9 = a3.pop();
        const e6 = a3.pop();
        o6.pop(), r5 = a3.pop(), n7.pop();
        const t6 = n7[n7.length - 1], u4 = O2(t6, t6.lineStart);
        a3.push(this.finalize(this.createBinaryOrLogicalExpression(u4, e6, r5, s9)));
      }
      a3.push(this.rawToken.value), o6.push(i7), n7.push(this.rawToken), this.readNextRawToken(), a3.push(this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)));
    }
    let D4 = a3.length - 1;
    t5 = a3[D4];
    let c4 = n7.pop();
    for (; D4 > 1; ) {
      const e6 = n7.pop();
      if (!e6) break;
      const u4 = c4?.lineStart, i8 = O2(e6, u4), r6 = a3[D4 - 1];
      t5 = this.finalize(this.createBinaryOrLogicalExpression(i8, r6, a3[D4 - 2], t5)), D4 -= 2, c4 = e6;
    }
    return t5;
  }
  createBinaryOrLogicalExpression(e5, t5, u3, n7) {
    const r5 = a2.includes(t5) ? i5.LogicalExpression : i5.BinaryExpression;
    return r5 === i5.BinaryExpression || ((u3.type === i5.AssignmentExpression || u3.type === i5.UpdateExpression) && this.throwError(l3.InvalidExpression, ...R3(u3)), (n7.type === i5.AssignmentExpression || n7.type === i5.UpdateExpression) && this.throwError(l3.InvalidExpression, ...R3(u3))), { type: r5, operator: t5, left: u3, right: n7, ...this.getItemLocation(e5) };
  }
  parseAssignmentExpression() {
    const e5 = this.captureStartMarker(), t5 = this.inheritCoverGrammar(this.parseBinaryExpression.bind(this)), u3 = this.captureStartMarker(), n7 = this.getMatchingPunctuator(s7);
    if (!n7) return t5;
    t5.type !== i5.Identifier && t5.type !== i5.MemberExpression && this.throwError(l3.InvalidExpression, e5, u3), this.context.isAssignmentTarget || this.tolerateError(l3.InvalidLeftHandSideInAssignment, e5), this.matchPunctuator("=") || (this.context.isAssignmentTarget = false), this.readNextRawToken();
    const r5 = this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));
    return this.finalize({ type: i5.AssignmentExpression, left: t5, operator: n7, right: r5, ...this.getItemLocation(e5) });
  }
  parseExpression() {
    return this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));
  }
  parseStatements(e5) {
    const t5 = [];
    for (; this.rawToken.type !== h3.EOF && !this.matchPunctuator(e5); ) {
      const e6 = this.parseStatementListItem();
      A(e6) || t5.push(e6);
    }
    return t5;
  }
  parseStatementListItem() {
    return this.context.isAssignmentTarget = true, this.matchKeyword(t3.Function) ? this.parseFunctionDeclaration() : this.matchKeyword(t3.Export) ? this.parseExportDeclaration() : this.matchKeyword(t3.Import) ? this.parseImportDeclaration() : this.parseStatement();
  }
  parseBlock() {
    const e5 = this.captureStartMarker();
    this.expectPunctuator("{");
    const t5 = this.parseStatements("}");
    return this.expectPunctuator("}"), this.finalize({ type: i5.BlockStatement, body: t5, ...this.getItemLocation(e5) });
  }
  parseObjectStatement() {
    const e5 = this.captureStartMarker(), t5 = this.parseObjectExpression();
    return this.finalize({ type: i5.ExpressionStatement, expression: t5, ...this.getItemLocation(e5) });
  }
  parseBlockOrObjectStatement() {
    return this.context.curlyParsingType === M3.AsObject || this.peekAhead((e5) => {
      let t5 = e5();
      return !(t5.type !== h3.Identifier && t5.type !== h3.StringLiteral || (t5 = e5(), t5.type !== h3.Punctuator || ":" !== t5.value));
    }) ? this.parseObjectStatement() : this.parseBlock();
  }
  parseIdentifier() {
    const e5 = this.rawToken;
    if (e5.type !== h3.Identifier) return null;
    const t5 = this.captureStartMarker();
    return this.readNextRawToken(), this.finalize({ type: i5.Identifier, name: e5.value, ...this.getItemLocation(t5) });
  }
  parseVariableDeclarator() {
    const e5 = this.captureStartMarker(), t5 = this.parseIdentifier();
    t5 || this.throwUnexpectedToken({ code: l3.IdentifierExpected });
    let u3 = null;
    if (this.matchPunctuator("=")) {
      this.readNextRawToken();
      const e6 = this.rawToken;
      try {
        u3 = this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));
      } catch {
        this.throwUnexpectedToken({ rawToken: e6, code: l3.InvalidVariableAssignment });
      }
    }
    return this.finalize({ type: i5.VariableDeclarator, id: t5, init: u3, ...this.getItemLocation(e5) });
  }
  parseVariableDeclarators() {
    const e5 = [this.parseVariableDeclarator()];
    for (; this.matchPunctuator(","); ) this.readNextRawToken(), e5.push(this.parseVariableDeclarator());
    return e5;
  }
  parseVariableDeclaration() {
    const e5 = this.captureStartMarker();
    this.expectKeyword(t3.Var);
    const u3 = this.parseVariableDeclarators();
    return this.consumeSemicolon(), this.finalize({ type: i5.VariableDeclaration, declarations: u3, kind: "var", ...this.getItemLocation(e5) });
  }
  parseEmptyStatement() {
    const e5 = this.captureStartMarker();
    return this.expectPunctuator(";"), this.finalize({ type: i5.EmptyStatement, ...this.getItemLocation(e5) });
  }
  parseExpressionStatement() {
    const e5 = this.captureStartMarker(), t5 = this.parseExpression();
    return this.consumeSemicolon(), this.finalize({ type: i5.ExpressionStatement, expression: t5, ...this.getItemLocation(e5) });
  }
  parseIfClause() {
    return this.withBlockContext(P5.IfClause, this.parseStatement.bind(this));
  }
  parseIfStatement() {
    const e5 = this.captureStartMarker();
    this.expectKeyword(t3.If), this.expectPunctuator("(");
    const u3 = this.captureStartMarker(), n7 = this.parseExpression(), r5 = this.captureStartMarker();
    this.expectPunctuator(")"), (n7.type === i5.AssignmentExpression || n7.type === i5.UpdateExpression) && this.throwError(l3.InvalidExpression, u3, r5);
    const s9 = this.parseIfClause();
    let a3 = null;
    return this.matchKeyword(t3.Else) && (this.readNextRawToken(), a3 = this.parseIfClause()), this.finalize({ type: i5.IfStatement, test: n7, consequent: s9, alternate: a3, ...this.getItemLocation(e5) });
  }
  parseWhileStatement() {
    const e5 = this.captureStartMarker();
    this.expectKeyword(t3.While), this.expectPunctuator("(");
    const u3 = this.captureStartMarker(), n7 = this.parseExpression(), r5 = this.captureStartMarker();
    this.expectPunctuator(")"), (n7.type === i5.AssignmentExpression || n7.type === i5.UpdateExpression) && this.throwError(l3.InvalidExpression, u3, r5);
    const s9 = this.withBlockContext(P5.WhileLoop, this.parseStatement.bind(this));
    return this.finalize({ type: i5.WhileStatement, test: n7, body: s9, ...this.getItemLocation(e5) });
  }
  parseForStatement() {
    let e5 = i5.ForStatement, n7 = null, r5 = null, s9 = null, a3 = null, o6 = null;
    const D4 = this.captureStartMarker();
    if (this.expectKeyword(t3.For), this.expectPunctuator("("), this.matchKeyword(t3.Var)) {
      const r6 = this.captureStartMarker();
      this.readNextRawToken();
      const s10 = this.parseVariableDeclarators();
      n7 = this.finalize({ type: i5.VariableDeclaration, declarations: s10, kind: "var", ...this.getItemLocation(r6) });
      const o7 = this.matchKeyword(t3.In), D5 = this.matchContextualKeyword(u2.Of);
      1 === s10.length && (o7 || D5) && (s10[0].init && this.throwError(l3.ForInOfLoopInitializer, r6), e5 = o7 ? i5.ForInStatement : i5.ForOfStatement, a3 = n7);
    } else if (!this.matchPunctuator(";")) {
      const r6 = this.context.isAssignmentTarget, s10 = this.captureStartMarker();
      n7 = this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));
      const o7 = this.matchKeyword(t3.In), D5 = this.matchContextualKeyword(u2.Of);
      o7 || D5 ? (this.context.isAssignmentTarget || this.tolerateError(l3.InvalidLeftHandSideInForIn, s10), n7.type !== i5.Identifier && this.throwError(l3.InvalidLeftHandSideInForIn, s10), e5 = o7 ? i5.ForInStatement : i5.ForOfStatement, a3 = n7) : this.context.isAssignmentTarget = r6;
    }
    e5 === i5.ForStatement ? (this.expectPunctuator(";"), r5 = this.matchPunctuator(";") ? null : this.isolateCoverGrammar(this.parseExpression.bind(this)), this.expectPunctuator(";"), s9 = this.matchPunctuator(")") ? null : this.isolateCoverGrammar(this.parseExpression.bind(this))) : (this.readNextRawToken(), o6 = this.parseExpression()), this.expectPunctuator(")");
    const h5 = this.withBlockContext(e5 === i5.ForOfStatement ? P5.ForOfLoop : P5.ForLoop, () => this.isolateCoverGrammar(this.parseStatement.bind(this)));
    return e5 === i5.ForInStatement || e5 === i5.ForOfStatement ? this.finalize({ type: e5, left: a3, right: o6, body: h5, ...this.getItemLocation(D4) }) : this.finalize({ type: e5, init: n7, test: r5, update: s9, body: h5, ...this.getItemLocation(D4) });
  }
  parseContinueStatement() {
    const e5 = this.captureStartMarker();
    return this.expectKeyword(t3.Continue), this.consumeSemicolon(), this.finalize({ type: i5.ContinueStatement, ...this.getItemLocation(e5) });
  }
  parseBreakStatement() {
    const e5 = this.captureStartMarker();
    return this.expectKeyword(t3.Break), this.consumeSemicolon(), this.finalize({ type: i5.BreakStatement, ...this.getItemLocation(e5) });
  }
  parseReturnStatement() {
    const e5 = this.captureStartMarker();
    this.expectKeyword(t3.Return);
    const u3 = (this.matchPunctuator(";") || this.matchPunctuator("}") || this.hasLineTerminator || this.rawToken.type === h3.EOF) && this.rawToken.type !== h3.StringLiteral && this.rawToken.type !== h3.Template ? null : this.parseExpression();
    return this.consumeSemicolon(), this.finalize({ type: i5.ReturnStatement, argument: u3, ...this.getItemLocation(e5) });
  }
  parseStatement() {
    switch (this.rawToken.type) {
      case h3.BooleanLiteral:
      case h3.NullLiteral:
      case h3.NumericLiteral:
      case h3.StringLiteral:
      case h3.Template:
      case h3.Identifier:
        return this.parseExpressionStatement();
      case h3.Punctuator:
        return "{" === this.rawToken.value ? this.parseBlockOrObjectStatement() : "(" === this.rawToken.value ? this.parseExpressionStatement() : ";" === this.rawToken.value ? this.parseEmptyStatement() : this.parseExpressionStatement();
      case h3.Keyword:
        switch (this.rawToken.value.toLowerCase()) {
          case t3.Break:
            return this.parseBreakStatement();
          case t3.Continue:
            return this.parseContinueStatement();
          case t3.For:
            return this.parseForStatement();
          case t3.Function:
            return this.parseFunctionDeclaration();
          case t3.If:
            return this.parseIfStatement();
          case t3.Return:
            return this.parseReturnStatement();
          case t3.Var:
            return this.parseVariableDeclaration();
          case t3.While:
            return this.parseWhileStatement();
          default:
            return this.parseExpressionStatement();
        }
      default:
        return this.throwUnexpectedToken({ rawToken: this.rawToken });
    }
  }
  parseFormalParameters() {
    const e5 = [];
    if (this.expectPunctuator("("), !this.matchPunctuator(")")) for (; this.rawToken.type !== h3.EOF; ) {
      const t5 = this.parseIdentifier();
      if (t5 || this.throwUnexpectedToken({ rawToken: this.rawToken, code: l3.IdentifierExpected }), e5.push(t5), this.matchPunctuator(")") || (this.expectPunctuator(","), this.matchPunctuator(")"))) break;
    }
    return this.expectPunctuator(")"), e5;
  }
  parseFunctionDeclaration() {
    (this.context.blockContext & P5.Function) === P5.Function && this.throwUnexpectedToken({ code: l3.NoFunctionInsideFunction }), ((this.context.blockContext & P5.WhileLoop) === P5.WhileLoop || (this.context.blockContext & P5.ForOfLoop) === P5.ForOfLoop || (this.context.blockContext & P5.IfClause) === P5.IfClause) && this.throwUnexpectedToken({ code: l3.NoFunctionInsideBlock });
    const e5 = this.captureStartMarker();
    this.expectKeyword(t3.Function);
    const u3 = this.parseIdentifier();
    u3 || this.throwUnexpectedToken({ code: l3.InvalidFunctionIdentifier });
    const n7 = this.parseFormalParameters(), r5 = this.context.blockContext;
    this.context.blockContext |= P5.Function;
    const s9 = this.parseBlock();
    return this.context.blockContext = r5, this.finalize({ type: i5.FunctionDeclaration, id: u3, params: n7, body: s9, ...this.getItemLocation(e5) });
  }
  parseScript() {
    const e5 = this.captureStartMarker(), t5 = this.parseStatements(), u3 = this.finalize({ type: i5.Program, body: t5, ...this.getItemLocation(e5) });
    return this.options.tokens && (u3.tokens = this.tokens), this.options.tolerant && (u3.errors = this.errorHandler.errors), u3;
  }
  parseExportDeclaration() {
    this.context.blockContext !== P5.None && this.throwUnexpectedToken({ code: l3.ModuleExportRootOnly });
    let e5 = null;
    const u3 = this.captureStartMarker();
    return this.expectKeyword(t3.Export), this.matchKeyword(t3.Var) ? e5 = this.parseVariableDeclaration() : this.matchKeyword("function") ? e5 = this.parseFunctionDeclaration() : this.throwUnexpectedToken({ code: l3.InvalidExpression }), this.finalize({ type: i5.ExportNamedDeclaration, declaration: e5, specifiers: [], source: null, ...this.getItemLocation(u3) });
  }
  parseModuleSpecifier() {
    const e5 = this.captureStartMarker(), t5 = this.rawToken;
    if (t5.type === h3.StringLiteral) return this.readNextRawToken(), this.finalize({ type: i5.Literal, value: t5.value, raw: this.getSourceValue(t5), isString: true, ...this.getItemLocation(e5) });
    this.throwError(l3.InvalidModuleUri, e5);
  }
  parseDefaultSpecifier() {
    const e5 = this.captureStartMarker(), t5 = this.parseIdentifier();
    return t5 || this.throwUnexpectedToken({ code: l3.IdentifierExpected }), this.finalize({ type: i5.ImportDefaultSpecifier, local: t5, ...this.getItemLocation(e5) });
  }
  parseImportDeclaration() {
    this.context.blockContext !== P5.None && this.throwUnexpectedToken({ code: l3.ModuleImportRootOnly });
    const e5 = this.captureStartMarker();
    this.expectKeyword(t3.Import);
    const n7 = this.parseDefaultSpecifier();
    this.expectContextualKeyword(u2.From);
    const r5 = this.parseModuleSpecifier();
    return this.finalize({ type: i5.ImportDeclaration, specifiers: [n7], source: r5, ...this.getItemLocation(e5) });
  }
};
function H4(e5, t5, u3) {
  return new K2(e5, t5, u3).parseScript();
}

// node_modules/@arcgis/core/arcade/parser.js
function d5(d6, r5 = []) {
  const s9 = H4(d6);
  if (null === s9.body || void 0 === s9.body) throw new C3({ index: 0, line: 0, column: 0, data: null, description: "", code: l3.InvalidExpression });
  return s9.loadedModules = {}, b(s9, r5), s9;
}

// node_modules/@arcgis/core/arcade/featureset/support/RecentlyUsedCache.js
var e4 = class _e3 {
  constructor(e5) {
    const t5 = this;
    t5._keys = [], t5._values = [], t5.length = 0, e5 && e5.forEach((e6) => {
      t5.set(e6[0], e6[1]);
    });
  }
  entries() {
    return [].slice.call(this.keys().map((e5, t5) => [e5, this._values[t5]]));
  }
  keys() {
    return [].slice.call(this._keys);
  }
  values() {
    return [].slice.call(this._values);
  }
  has(e5) {
    return this._keys.includes(e5);
  }
  get(e5) {
    const t5 = this._keys.indexOf(e5);
    return t5 > -1 ? this._values[t5] : null;
  }
  deepGet(t5) {
    if (!t5?.length) return null;
    const s9 = (t6, a3) => null == t6 ? null : a3.length ? s9(t6 instanceof _e3 ? t6.get(a3[0]) : t6[a3[0]], a3.slice(1)) : t6;
    return s9(this.get(t5[0]), t5.slice(1));
  }
  set(e5, t5) {
    const s9 = this, a3 = this._keys.indexOf(e5);
    return a3 > -1 ? s9._values[a3] = t5 : (s9._keys.push(e5), s9._values.push(t5), s9.length = s9._values.length), this;
  }
  sortedSet(e5, t5, s9, a3) {
    const i7 = this, r5 = this._keys.length, h5 = s9 || 0, l4 = void 0 !== a3 ? a3 : r5 - 1;
    if (0 === r5) return i7._keys.push(e5), i7._values.push(t5), i7;
    if (e5 === this._keys[h5]) return this._values.splice(h5, 0, t5), this;
    if (e5 === this._keys[l4]) return this._values.splice(l4, 0, t5), this;
    if (e5 > this._keys[l4]) return this._keys.splice(l4 + 1, 0, e5), this._values.splice(l4 + 1, 0, t5), this;
    if (e5 < this._keys[h5]) return this._values.splice(h5, 0, t5), this._keys.splice(h5, 0, e5), this;
    if (h5 >= l4) return this;
    const n7 = h5 + Math.floor((l4 - h5) / 2);
    return e5 < this._keys[n7] ? this.sortedSet(e5, t5, h5, n7 - 1) : e5 > this._keys[n7] ? this.sortedSet(e5, t5, n7 + 1, l4) : this;
  }
  size() {
    return this.length;
  }
  clear() {
    const e5 = this;
    return e5._keys.length = e5.length = e5._values.length = 0, this;
  }
  delete(e5) {
    const t5 = this, s9 = t5._keys.indexOf(e5);
    return s9 > -1 && (t5._keys.splice(s9, 1), t5._values.splice(s9, 1), t5.length = t5._keys.length, true);
  }
  forEach(e5) {
    this._keys.forEach((t5, s9) => {
      e5(this._values[s9], t5, s9);
    });
  }
  map(e5) {
    return this.keys().map((t5, s9) => e5(this._values[s9], t5, s9));
  }
  filter(e5) {
    const t5 = this;
    return t5._keys.forEach((s9, a3) => {
      false === e5(t5._values[a3], s9, a3) && t5.delete(s9);
    }), this;
  }
  clone() {
    return new _e3(this.entries());
  }
};
var t4 = class {
  constructor(t5 = 20) {
    this._maxEntries = t5, this._values = new e4();
  }
  delete(e5) {
    this._values.has(e5) && this._values.delete(e5);
  }
  get(e5) {
    let t5 = null;
    return this._values.has(e5) && (t5 = this._values.get(e5), this._values.delete(e5), this._values.set(e5, t5)), t5;
  }
  put(e5, t5) {
    if (this._values.size() >= this._maxEntries) {
      const e6 = this._values.keys()[0];
      this._values.delete(e6);
    }
    this._values.set(e5, t5);
  }
};
var s8 = class {
  constructor(e5 = 20) {
    this._maxEntries = e5, this._cache = new t4(this._maxEntries), this._layerMetadata = new t4(this._maxEntries), this._serviceMetadata = new t4(this._maxEntries), this._portalItems = new t4(this._maxEntries), this._portalItemLayers = new t4(this._maxEntries), this._translations = new t4(this._maxEntries);
  }
  clear() {
    this._cache = new t4(this._maxEntries), this._layerMetadata = new t4(this._maxEntries), this._serviceMetadata = new t4(this._maxEntries), this._portalItems = new t4(this._maxEntries), this._portalItemLayers = new t4(this._maxEntries), this._translations = new t4(this._maxEntries);
  }
  addToCache(e5, t5) {
    this._cache.put(e5, t5);
  }
  removeFromCache(e5) {
    this._cache.delete(e5);
  }
  getFromCache(e5) {
    return this._cache.get(e5);
  }
  getCachedLayerMetadata(e5) {
    return this._layerMetadata.get(e5);
  }
  setCachedLayerMetadata(e5, t5) {
    this._layerMetadata.put(e5, t5);
  }
  removeCachedLayerMetadata(e5, t5) {
    this._layerMetadata.get(e5) === t5 && this._layerMetadata.delete(e5);
  }
  getCachedServiceMetadata(e5) {
    return this._serviceMetadata.get(e5);
  }
  setCachedServiceMetadata(e5, t5) {
    this._serviceMetadata.put(e5, t5);
  }
  removeCachedServiceMetadata(e5, t5) {
    this._serviceMetadata.get(e5) === t5 && this._serviceMetadata.delete(e5);
  }
  getCachedPortalItem(e5, t5) {
    return this._portalItems.get(`${t5}:${e5}`);
  }
  setCachedPortalItem(e5, t5, s9) {
    this._portalItems.put(`${t5}:${e5}`, s9);
  }
  removeCachedPortalItem(e5, t5, s9) {
    const a3 = `${t5}:${e5}`;
    this._portalItems.get(a3) === s9 && this._portalItems.delete(a3);
  }
  getCachedPortalItemLayer(e5, t5) {
    return this._portalItemLayers.get(`${t5}:${e5}`);
  }
  setCachedPortalItemLayer(e5, t5, s9) {
    this._portalItemLayers.put(`${t5}:${e5}`, s9);
  }
  removeCachedPortalItemLayer(e5, t5, s9) {
    const a3 = `${t5}:${e5}`;
    this._portalItemLayers.get(a3) === s9 && this._portalItemLayers.delete(a3);
  }
  getCachedTranslation(e5, t5) {
    return this._translations.get(JSON.stringify([e5, t5]));
  }
  setCachedTranslation(e5, t5, s9) {
    return this._translations.put(JSON.stringify([e5, t5]), s9);
  }
};

// node_modules/@arcgis/core/arcade/ArcadeModuleResolver.js
var _i = class _i {
  constructor(t5) {
    this.portalUri = t5;
  }
  normalizeModuleUri(t5) {
    const r5 = /^[a-z0-9]+(@[0-9]+\.[0-9]+\.[0-9]+)?([?|/].*)?$/gi, o6 = /(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi, c4 = /(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-z0-9]+\/items\/(?<itemid>.+)$/gi, l4 = /(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi, a3 = /(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([?|/].*)?$/gi;
    if (t5.startsWith("portal+")) {
      let i7 = t5.slice(7), u3 = "", n7 = i7, m2 = false;
      for (const t6 of [o6, l4, c4]) {
        const e5 = t6.exec(i7);
        if (null !== e5) {
          const t7 = e5.groups;
          n7 = t7.itemid, u3 = t7.portalurl, m2 = true;
          break;
        }
      }
      if (false === m2) {
        if (!r5.test(i7)) throw new l("UnsupportedUriProtocol", { uri: t5 });
        n7 = i7, u3 = this.portalUri;
      }
      n7.includes("/") && (n7 = n7.split("/")[0]), n7.includes("?") && (n7 = n7.split("?")[0]);
      let d6 = "current";
      const h5 = a3.exec(n7);
      if (null !== h5) {
        const t6 = h5.groups;
        n7 = t6.itemid, d6 = t6.versionstring;
      }
      return i7 = new M2({ url: u3 }).restUrl + "/content/items/" + n7 + "/resources/" + d6 + ".arc", { url: i7, scheme: "portal", uri: "PO:" + i7 };
    }
    if (t5.startsWith("mock")) {
      if ("mock" === t5) {
        return { url: "", scheme: "mock", data: '\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ', uri: "mock" };
      }
      const e5 = t5.replace("mock:", "");
      if (void 0 !== _i.mocks[e5]) return { url: "", scheme: "mock", data: _i.mocks[e5], uri: t5 };
    }
    throw new l("UnrecognizedUri", { uri: t5 });
  }
  async fetchModule(t5) {
    const e5 = _i.cachedModules.getFromCache(t5.uri);
    if (e5) return e5;
    const r5 = this.fetchSource(t5);
    _i.cachedModules.addToCache(t5.uri, r5);
    let o6 = null;
    try {
      o6 = await r5;
    } catch (s9) {
      throw _i.cachedModules.removeFromCache(t5.uri), s9;
    }
    return o6;
  }
  async fetchSource(o6) {
    if ("portal" === o6.scheme) {
      const e5 = await H(o6.url, { responseType: "text", query: {} });
      if (e5.data) return d5(e5.data, []);
    }
    if ("mock" === o6.scheme) return d5(o6.data ?? "", []);
    throw new l("UnsupportedUriProtocol");
  }
  static create(t5) {
    return new _i(t5);
  }
  static getDefault() {
    return this._default ?? (_i._default = _i._moduleResolverFactory());
  }
  static set moduleResolverClass(t5) {
    this._moduleResolverFactory = t5, this._default = null;
  }
};
_i.mocks = {};
_i.cachedModules = new s8(30);
_i._default = null;
_i._moduleResolverFactory = () => {
  const t5 = M2.getDefault();
  return new _i(t5.url);
};
var i6 = _i;

// node_modules/@arcgis/core/arcade/arcadeRuntime.js
var Q2 = () => i.getLogger("esri.arcade.arcadeRuntime");
var X = Symbol("uninitialized");
function ee2(e5) {
  if (e5 === X) throw new n3(null, "InvalidIdentifier", null);
}
function te3(e5) {
  return ee2(e5), e5;
}
function ne3(t5, n7) {
  const r5 = r2(n7);
  if (null !== t5.localScope) {
    const e5 = t5.localScope[r5];
    if (void 0 !== e5) return { scope: t5.localScope, id: r5, var: e5 };
  }
  const o6 = t5.globalScope[r5];
  if (void 0 !== o6) return { scope: t5.globalScope, id: r5, var: o6 };
  throw new n3(t5, "InvalidIdentifier", n7);
}
function re3(t5, n7, r5 = "InvalidIdentifier") {
  const o6 = r2(n7);
  if (null !== t5.localScope) {
    const e5 = t5.localScope[o6];
    if (void 0 !== e5) return ee2(e5), e5.value;
  }
  const i7 = t5.globalScope[o6];
  if (void 0 !== i7) return ee2(i7), i7.value;
  throw new n3(t5, r5, n7);
}
var oe3 = function() {
};
oe3.prototype = Object.freeze(/* @__PURE__ */ Object.create(null));
var ie3 = class extends r3 {
  constructor(e5, t5, n7, r5) {
    super(), this.definition = e5, this.context = t5, this._params = n7, this._locals = r5;
  }
  createFunction(e5) {
    return (...t5) => {
      const n7 = { spatialReference: this.context.spatialReference, console: this.context.console, services: this.context.services, timeZone: this.context.timeZone ?? null, lrucache: this.context.lrucache, exports: this.context.exports, libraryResolver: this.context.libraryResolver, interceptor: this.context.interceptor, abortSignal: this.context.abortSignal, localScope: new oe3(), depthCounter: { depth: e5.depthCounter.depth + 1 }, globalScope: this.context.globalScope, track: this.context.track };
      if (n7.depthCounter.depth > 64) throw new n3(e5, "MaximumCallDepth", null);
      return se2(n7, this.definition.body, this._params, this._locals, t5, null);
    };
  }
  call(e5, t5) {
    return ce2(e5, t5, (n7, r5, o6) => {
      const i7 = { spatialReference: e5.spatialReference, services: e5.services, globalScope: e5.globalScope, depthCounter: { depth: e5.depthCounter.depth + 1 }, libraryResolver: e5.libraryResolver, exports: e5.exports, timeZone: e5.timeZone ?? null, console: e5.console, lrucache: e5.lrucache, interceptor: e5.interceptor, abortSignal: e5.abortSignal, localScope: new oe3(), track: e5.track };
      if (i7.depthCounter.depth > 64) throw new n3(e5, "MaximumCallDepth", t5);
      return se2(i7, this.definition.body, this._params, this._locals, o6, t5);
    });
  }
  marshalledCall(e5, t5, n7, r5) {
    return r5(e5, t5, (o6, i7, s9) => {
      const l4 = { spatialReference: e5.spatialReference, globalScope: n7.globalScope, services: e5.services, depthCounter: { depth: e5.depthCounter.depth + 1 }, libraryResolver: e5.libraryResolver, exports: e5.exports, console: e5.console, timeZone: e5.timeZone ?? null, lrucache: e5.lrucache, interceptor: e5.interceptor, abortSignal: e5.abortSignal, localScope: new oe3(), track: e5.track };
      return s9 = s9.map((t6) => !L(t6) || t6 instanceof s5 ? t6 : n5(t6, e5, r5)), n5(se2(l4, this.definition.body, this._params, this._locals, s9, t5), n7, r5);
    });
  }
};
function se2(e5, t5, n7, r5, o6, i7) {
  try {
    if (n7.length !== o6.length) throw new n3(e5, "WrongNumberOfParameters", i7);
    if (null != e5.localScope) {
      for (let t6 = 0; t6 < n7.length; t6++) e5.localScope[n7[t6]] = { value: o6[t6] };
      for (const t6 of r5) e5.localScope[t6] = X;
    }
    const s9 = fe2(e5, t5);
    if (s9 instanceof R) return s9.value;
    if (s9 === _2) throw new n3(e5, "UnexpectedToken", i7);
    if (s9 === I) throw new n3(e5, "UnexpectedToken", i7);
    return s9 instanceof v ? s9.value : s9;
  } catch (s9) {
    throw s9;
  }
}
var le2 = class _le extends s2 {
  constructor(e5) {
    super(), this.moduleGlobalContext = e5;
  }
  global(t5) {
    const n7 = r2(t5), r5 = this.moduleGlobalContext.globalScope[n7];
    if (ee2(r5), L(r5.value) && !(r5.value instanceof s5)) {
      const e5 = new s5();
      return e5.fn = r5.value, e5.parameterEvaluator = ce2, e5.context = this.moduleGlobalContext, this.moduleGlobalContext.globalScope[n7] = { value: e5 }, e5;
    }
    return r5.value;
  }
  setGlobal(t5, n7) {
    if (L(n7)) throw new n3(null, "AssignModuleFunction", null);
    const r5 = r2(t5);
    if (void 0 === this.moduleGlobalContext.globalScope[r5]) throw new n3(null, "ModuleExportNotFound", null);
    this.moduleGlobalContext.globalScope[r5] = { value: n7 };
  }
  hasGlobal(t5) {
    return this.moduleGlobalContext.exports.has(r2(t5));
  }
  static load(e5, n7) {
    const { globals: i7, exports: s9 } = i4(n7), l4 = new Ve2();
    for (const t5 of i7) t5 in l4 || (l4[t5] = X);
    const a3 = e5.spatialReference ?? f.WebMercator, c4 = { lrucache: e5.lrucache, interceptor: e5.interceptor, services: e5.services, console: e5.console ?? Ye2, abortSignal: t2, timeZone: e5.timeZone ?? null, spatialReference: a3, track: e5.track, depthCounter: { depth: 1 }, libraryResolver: new s3(e5.libraryResolver._moduleSingletons, n7.loadedModules), exports: s9, localScope: null, globalScope: l4 };
    return Fe2(c4, n7), new _le(c4);
  }
};
function ae2(e5, t5) {
  const n7 = [];
  for (let r5 = 0; r5 < t5.arguments.length; r5++) n7.push(ue2(e5, t5.arguments[r5]));
  return n7;
}
function ce2(e5, t5, n7) {
  try {
    return true === t5.preparsed ? n7(e5, null, t5.arguments) : n7(e5, t5, ae2(e5, t5));
  } catch (r5) {
    throw r5;
  }
}
function ue2(e5, t5) {
  try {
    switch (t5.type) {
      case "AssignmentExpression":
        return ve3(e5, t5);
      case "UpdateExpression":
        return be2(e5, t5);
      case "TemplateLiteral":
        return Ue2(e5, t5);
      case "Identifier":
        return De3(e5, t5);
      case "MemberExpression":
        return Ne2(e5, t5);
      case "Literal":
        return t5.value;
      case "CallExpression":
        return Ke3(e5, t5);
      case "UnaryExpression":
        return ke2(e5, t5);
      case "BinaryExpression":
        return Ee2(e5, t5);
      case "LogicalExpression":
        return Be2(e5, t5);
      case "ArrayExpression":
        return Ce2(e5, t5);
      case "ObjectExpression":
        return pe2(e5, t5);
      default:
        throw new n3(e5, "Unrecognized", t5);
    }
  } catch (n7) {
    throw i2(e5, t5, n7);
  }
}
function fe2(e5, t5) {
  switch (t5.type) {
    case "EmptyStatement":
      return P2;
    case "VariableDeclaration":
      return Ae3(e5, t5);
    case "ImportDeclaration":
      return je2(e5, t5);
    case "ExportNamedDeclaration":
      return Oe2(e5, t5);
    case "BlockStatement":
      return Fe2(e5, t5);
    case "FunctionDeclaration":
      return Ie2(e5, t5);
    case "ReturnStatement":
      return Re3(e5, t5);
    case "IfStatement":
      return Se3(e5, t5);
    case "ExpressionStatement":
      return xe2(e5, t5);
    case "BreakStatement":
      return _2;
    case "ContinueStatement":
      return I;
    case "ForStatement":
      return we2(e5, t5);
    case "ForInStatement":
      return he2(e5, t5);
    case "ForOfStatement":
      return de3(e5, t5);
    case "WhileStatement":
      return me2(e5, t5);
    default:
      throw new n3(e5, "Unrecognized", t5);
  }
}
function pe2(e5, t5) {
  const n7 = /* @__PURE__ */ Object.create(null), r5 = /* @__PURE__ */ new Map();
  for (let i7 = 0; i7 < t5.properties.length; i7++) {
    const o7 = t5.properties[i7], s9 = "Identifier" === o7.key.type ? o7.key.name : ue2(e5, o7.key), l4 = ue2(e5, o7.value);
    if (L(l4)) throw new n3(e5, "NoFunctionInDictionary", t5);
    if (false === e(s9)) throw new n3(e5, "KeyMustBeString", t5);
    let a3 = s9.toString();
    const c4 = a3.toLowerCase();
    r5.has(c4) ? a3 = r5.get(c4) : r5.set(c4, a3), n7[a3] = l4 === P2 ? null : l4;
  }
  const o6 = new p(n7);
  return o6.immutable = false, o6;
}
function he2(e5, t5) {
  const n7 = ue2(e5, t5.right);
  "VariableDeclaration" === t5.left.type && Ae3(e5, t5.left);
  const r5 = ne3(e5, "VariableDeclaration" === t5.left.type ? t5.left.declarations[0].id : t5.left);
  if (o2(n7) || e(n7)) {
    const o6 = n7.length;
    for (let n8 = 0; n8 < o6; n8++) {
      r5.scope[r5.id] = { value: n8 };
      const o7 = fe2(e5, t5.body);
      if (o7 === _2) break;
      if (o7 instanceof R) return o7;
    }
    return P2;
  }
  if (te(n7)) {
    for (let o6 = 0; o6 < n7.length(); o6++) {
      r5.scope[r5.id] = { value: o6 };
      const n8 = fe2(e5, t5.body);
      if (n8 === _2) break;
      if (n8 instanceof R) return n8;
    }
    return P2;
  }
  if (n7 instanceof p || Q(n7)) {
    const o6 = n7.keys();
    for (let n8 = 0; n8 < o6.length; n8++) {
      r5.scope[r5.id] = { value: o6[n8] };
      const i7 = fe2(e5, t5.body);
      if (i7 === _2) break;
      if (i7 instanceof R) return i7;
    }
    return P2;
  }
  if (U(n7)) {
    for (const o6 of f3(n7)) {
      r5.scope[r5.id] = { value: o6 };
      const n8 = fe2(e5, t5.body);
      if (n8 === _2) break;
      if (n8 instanceof R) return n8;
    }
    return P2;
  }
  return P2;
}
function de3(e5, t5) {
  const n7 = ue2(e5, t5.right);
  "VariableDeclaration" === t5.left.type && fe2(e5, t5.left);
  const r5 = ne3(e5, "VariableDeclaration" === t5.left.type ? t5.left.declarations[0].id : t5.left);
  if (o2(n7) || e(n7)) {
    const o6 = n7.length;
    for (let i7 = 0; i7 < o6; i7++) {
      if (i7 >= n7.length) throw new n3(e5, "OutOfBounds", t5);
      r5.scope[r5.id] = { value: n7[i7] };
      const o7 = fe2(e5, t5.body);
      if (o7 === _2) break;
      if (o7 instanceof R) return o7;
    }
    return P2;
  }
  if (te(n7)) {
    for (let o6 = 0; o6 < n7.length(); o6++) {
      r5.scope[r5.id] = { value: n7.get(o6) };
      const i7 = fe2(e5, t5.body);
      if (i7 === _2) break;
      if (i7 instanceof R) return i7;
    }
    return P2;
  }
  if (n7 instanceof p || Q(n7)) {
    for (const o6 of n7.keys()) {
      const i7 = n7.field(o6);
      r5.scope[r5.id] = { value: p.containerEntry(o6, i7) };
      const s9 = fe2(e5, t5.body);
      if (s9 === _2) break;
      if (s9 instanceof R) return s9;
    }
    return P2;
  }
  if (U(n7)) {
    for (const o6 of f3(n7)) {
      const i7 = d(n7, o6, e5, t5, 1);
      r5.scope[r5.id] = { value: p.containerEntry(o6, i7) };
      const s9 = fe2(e5, t5.body);
      if (s9 === _2) break;
      if (s9 instanceof R) return s9;
    }
    return P2;
  }
  return P2;
}
function we2(e5, t5) {
  null !== t5.init && ("VariableDeclaration" === t5.init.type ? fe2(e5, t5.init) : ue2(e5, t5.init));
  const n7 = { testResult: true, lastAction: P2 };
  do {
    ge3(e5, t5, n7);
  } while (true === n7.testResult);
  return n7.lastAction instanceof R ? n7.lastAction : P2;
}
function me2(e5, t5) {
  const n7 = { testResult: true, lastAction: P2 };
  if (n7.testResult = ue2(e5, t5.test), false === n7.testResult) return P2;
  if (true !== n7.testResult) throw new n3(e5, "BooleanConditionRequired", t5);
  for (; true === n7.testResult && (n7.lastAction = fe2(e5, t5.body), n7.lastAction !== _2) && !(n7.lastAction instanceof R); ) if (n7.testResult = ue2(e5, t5.test), true !== n7.testResult && false !== n7.testResult) throw new n3(e5, "BooleanConditionRequired", t5);
  return n7.lastAction instanceof R ? n7.lastAction : P2;
}
function ge3(e5, t5, n7) {
  if (null !== t5.test) {
    if (n7.testResult = ue2(e5, t5.test), false === n7.testResult) return;
    if (true !== n7.testResult) throw new n3(e5, "BooleanConditionRequired", t5);
  }
  n7.lastAction = fe2(e5, t5.body), n7.lastAction !== _2 ? n7.lastAction instanceof R ? n7.testResult = false : null !== t5.update && ue2(e5, t5.update) : n7.testResult = false;
}
function be2(e5, t5) {
  if ("CallExpression" === t5.argument.type) throw new n3(e5, "NeverReach", t5);
  let n7;
  if ("MemberExpression" === t5.argument.type) {
    const r6 = ue2(e5, t5.argument.object);
    let o7;
    if (true === t5.argument.computed) o7 = ue2(e5, t5.argument.property);
    else {
      if ("Identifier" !== t5.argument.property.type) throw new n3(e5, "Unrecognized", t5);
      o7 = t5.argument.property.name;
    }
    if (o2(r6)) {
      if (!n4(o7)) throw new n3(e5, "ArrayAccessMustBeNumber", t5);
      if (o7 < 0 && (o7 = r6.length + o7), o7 < 0 || o7 >= r6.length) throw new n3(e5, "OutOfBounds", t5);
      n7 = Se(r6[o7]), r6[o7] = "++" === t5.operator ? n7 + 1 : n7 - 1;
    } else if (r6 instanceof p) {
      if (false === e(o7)) throw new n3(e5, "KeyAccessorMustBeString", t5);
      if (true !== r6.hasField(o7)) throw new n3(e5, "FieldNotFound", t5);
      n7 = Se(r6.field(o7)), r6.setField(o7, "++" === t5.operator ? n7 + 1 : n7 - 1);
    } else if (H2(r6)) {
      if (false === e(o7)) throw new n3(e5, "KeyAccessorMustBeString", t5);
      if (true !== r6.hasField(o7)) throw new n3(e5, "FieldNotFound", t5);
      n7 = Se(r6.field(o7)), r6.setField(o7, "++" === t5.operator ? n7 + 1 : n7 - 1);
    } else {
      if (te(r6)) throw new n3(e5, "Immutable", t5);
      if (!(r6 instanceof le2)) throw new n3(e5, "InvalidParameter", t5);
      if (false === e(o7)) throw new n3(e5, "ModuleAccessorMustBeString", t5);
      if (true !== r6.hasGlobal(o7)) throw new n3(e5, "ModuleExportNotFound", t5);
      n7 = Se(r6.global(o7)), r6.setGlobal(o7, "++" === t5.operator ? n7 + 1 : n7 - 1);
    }
    return false === t5.prefix ? n7 : "++" === t5.operator ? n7 + 1 : n7 - 1;
  }
  const r5 = ne3(e5, t5.argument);
  n7 = Se(te3(r5.var).value);
  const o6 = "++" === t5.operator ? n7 + 1 : n7 - 1;
  return r5.scope[r5.id] = { value: o6 }, false === t5.prefix ? n7 : "++" === t5.operator ? n7 + 1 : n7 - 1;
}
function ye3(e5, t5, n7, r5, o6) {
  switch (t5) {
    case "=":
      return e5 === P2 ? null : e5;
    case "/=":
      return Se(n7) / Se(e5);
    case "*=":
      return Se(n7) * Se(e5);
    case "-=":
      return Se(n7) - Se(e5);
    case "+=":
      return e(n7) || e(e5) ? ge(n7) + ge(e5) : Se(n7) + Se(e5);
    case "%=":
      return Se(n7) % Se(e5);
    default:
      throw new n3(o6, "UnsupportedOperator", r5);
  }
}
function ve3(e5, t5) {
  if ("MemberExpression" === t5.left.type) {
    const n8 = ue2(e5, t5.left.object);
    let r6;
    if (true === t5.left.computed) r6 = ue2(e5, t5.left.property);
    else {
      if ("Identifier" !== t5.left.property.type) throw new n3(e5, "InvalidIdentifier", t5);
      r6 = t5.left.property.name;
    }
    const o6 = ue2(e5, t5.right);
    if (o2(n8)) {
      if (!n4(r6)) throw new n3(e5, "ArrayAccessMustBeNumber", t5);
      if (r6 < 0 && (r6 = n8.length + r6), r6 < 0 || r6 > n8.length) throw new n3(e5, "OutOfBounds", t5);
      if (r6 === n8.length) {
        if ("=" !== t5.operator) throw new n3(e5, "OutOfBounds", t5);
        n8[r6] = ye3(o6, t5.operator, n8[r6], t5, e5);
      } else n8[r6] = ye3(o6, t5.operator, n8[r6], t5, e5);
    } else if (n8 instanceof p) {
      if (false === e(r6)) throw new n3(e5, "KeyAccessorMustBeString", t5);
      if (true === n8.hasField(r6)) n8.setField(r6, ye3(o6, t5.operator, n8.field(r6), t5, e5));
      else {
        if ("=" !== t5.operator) throw new n3(e5, "FieldNotFound", t5, { key: r6 });
        n8.setField(r6, ye3(o6, t5.operator, null, t5, e5));
      }
    } else if (H2(n8)) {
      if (false === e(r6)) throw new n3(e5, "KeyAccessorMustBeString", t5);
      if (true === n8.hasField(r6)) n8.setField(r6, ye3(o6, t5.operator, n8.field(r6), t5, e5));
      else {
        if ("=" !== t5.operator) throw new n3(e5, "FieldNotFound", t5, { key: r6 });
        n8.setField(r6, ye3(o6, t5.operator, null, t5, e5));
      }
    } else {
      if (te(n8)) throw new n3(e5, "Immutable", t5);
      if (!(n8 instanceof le2)) throw new n3(e5, "InvalidIdentifier", t5);
      if (false === e(r6)) throw new n3(e5, "ModuleAccessorMustBeString", t5);
      if (true !== n8.hasGlobal(r6)) throw new n3(e5, "ModuleExportNotFound", t5);
      n8.setGlobal(r6, ye3(o6, t5.operator, n8.global(r6), t5, e5));
    }
    return P2;
  }
  const n7 = ne3(e5, t5.left), r5 = ue2(e5, t5.right);
  return n7.scope[n7.id] = { value: ye3(r5, t5.operator, "=" !== t5.operator ? te3(n7.var).value : null, t5, e5) }, P2;
}
function xe2(e5, t5) {
  const n7 = ue2(e5, t5.expression);
  return n7 === P2 ? P2 : new v(n7);
}
function Se3(e5, t5) {
  const n7 = ue2(e5, t5.test);
  if (true === n7) return fe2(e5, t5.consequent);
  if (false === n7) return null !== t5.alternate ? fe2(e5, t5.alternate) : P2;
  throw new n3(e5, "BooleanConditionRequired", t5);
}
function Fe2(e5, t5) {
  let n7 = P2;
  for (let r5 = 0; r5 < t5.body.length; r5++) if (n7 = fe2(e5, t5.body[r5]), n7 instanceof R || n7 === _2 || n7 === I) return n7;
  return n7;
}
function Re3(e5, t5) {
  if (null === t5.argument) return new R(P2);
  const n7 = ue2(e5, t5.argument);
  return new R(n7);
}
function Ie2(t5, n7) {
  if (null != t5.localScope) throw Q2().error("Function declarations are only valid in global scope."), new n3(t5, "NeverReach", n7);
  const r5 = r2(n7.id);
  if (!(r5 in t5.globalScope)) throw Q2().error(`Function "${r5}" not declared.`), new n3(t5, "NeverReach", n7);
  const o6 = s4(n7), s9 = n7.params.map((t6) => r2(t6)), l4 = Array.from(o6).filter((e5) => !s9.includes(e5));
  return t5.globalScope[r5] = { value: new ie3(n7, t5, s9, l4) }, P2;
}
function je2(e5, t5) {
  const n7 = ne3(e5, t5.specifiers[0].local), r5 = e5.libraryResolver;
  if (null == r5) throw Q2().error("Internal error: module loader not initialized"), new n3(e5, "NeverReach", t5);
  const o6 = r5.loadLibrary(n7.id);
  let i7;
  return r5._moduleSingletons?.has(o6.uri) ? i7 = r5._moduleSingletons.get(o6.uri) : (i7 = le2.load(e5, o6.syntax), r5._moduleSingletons?.set(o6.uri, i7)), n7.scope[n7.id] = { value: i7 }, P2;
}
function Oe2(e5, t5) {
  return fe2(e5, t5.declaration), P2;
}
function Ae3(e5, t5) {
  for (let n7 = 0; n7 < t5.declarations.length; n7++) Me2(e5, t5.declarations[n7]);
  return P2;
}
function Me2(e5, t5) {
  let n7 = null === t5.init ? null : ue2(e5, t5.init);
  if (n7 === P2 && (n7 = null), "Identifier" !== t5.id.type) throw new n3(e5, "InvalidIdentifier", t5);
  const r5 = ne3(e5, t5.id);
  r5.scope[r5.id] = { value: n7 };
}
function Ne2(e5, t5) {
  try {
    const n7 = ue2(e5, t5.object);
    if (null === n7) throw new n3(e5, "MemberOfNull", t5);
    if (false === t5.computed) {
      if ("Identifier" === t5.property.type) {
        if (n7 instanceof p || Q(n7)) return n7.field(t5.property.name);
        if (n7 instanceof c) return d(n7, t5.property.name, e5, t5);
        if (n7 instanceof le2) {
          if (!n7.hasGlobal(t5.property.name)) throw new n3(e5, "InvalidIdentifier", t5);
          return n7.global(t5.property.name);
        }
      }
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    let r5 = ue2(e5, t5.property);
    if (n7 instanceof p || Q(n7)) {
      if (e(r5)) return n7.field(r5);
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    if (n7 instanceof le2) {
      if (e(r5)) return n7.global(r5);
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    if (n7 instanceof c) {
      if (e(r5)) return d(n7, r5, e5, t5);
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    if (o2(n7)) {
      if (n4(r5) && isFinite(r5) && Math.floor(r5) === r5) {
        if (r5 < 0 && (r5 = n7.length + r5), r5 >= n7.length || r5 < 0) throw new n3(e5, "OutOfBounds", t5);
        return n7[r5];
      }
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    if (e(n7)) {
      if (n4(r5) && isFinite(r5) && Math.floor(r5) === r5) {
        if (r5 < 0 && (r5 = n7.length + r5), r5 >= n7.length || r5 < 0) throw new n3(e5, "OutOfBounds", t5);
        return n7[r5];
      }
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    if (te(n7)) {
      if (n4(r5) && isFinite(r5) && Math.floor(r5) === r5) {
        if (r5 < 0 && (r5 = n7.length() + r5), r5 >= n7.length() || r5 < 0) throw new n3(e5, "OutOfBounds", t5);
        return n7.get(r5);
      }
      throw new n3(e5, "InvalidMemberAccessKey", t5);
    }
    throw new n3(e5, "InvalidMemberAccessKey", t5);
  } catch (n7) {
    throw n7;
  }
}
function ke2(e5, t5) {
  try {
    const n7 = ue2(e5, t5.argument);
    if (t(n7)) {
      if ("!" === t5.operator) return !n7;
      if ("-" === t5.operator) return -1 * Se(n7);
      if ("+" === t5.operator) return 1 * Se(n7);
      if ("~" === t5.operator) return ~Se(n7);
      throw new n3(e5, "UnsupportUnaryOperator", t5);
    }
    if ("~" === t5.operator) return ~Se(n7);
    if ("-" === t5.operator) return -1 * Se(n7);
    if ("+" === t5.operator) return 1 * Se(n7);
    throw new n3(e5, "UnsupportUnaryOperator", t5);
  } catch (n7) {
    throw n7;
  }
}
function Ce2(e5, t5) {
  try {
    const n7 = [];
    for (let r5 = 0; r5 < t5.elements.length; r5++) {
      const o6 = ue2(e5, t5.elements[r5]);
      if (L(o6)) throw new n3(e5, "NoFunctionInArray", t5);
      o6 === P2 ? n7.push(null) : n7.push(o6);
    }
    return n7;
  } catch (n7) {
    throw n7;
  }
}
function Ee2(e5, t5) {
  try {
    const n7 = ue2(e5, t5.left), r5 = ue2(e5, t5.right);
    switch (t5.operator) {
      case "|":
      case "<<":
      case ">>":
      case ">>>":
      case "^":
      case "&":
        return Le(Se(n7), Se(r5), t5.operator);
      case "==":
        return ye(n7, r5);
      case "!=":
        return !ye(n7, r5);
      case "<":
      case ">":
      case "<=":
      case ">=":
        return de(n7, r5, t5.operator);
      case "+":
        return e(n7) || e(r5) ? ge(n7) + ge(r5) : Se(n7) + Se(r5);
      case "-":
        return Se(n7) - Se(r5);
      case "*":
        return Se(n7) * Se(r5);
      case "/":
        return Se(n7) / Se(r5);
      case "%":
        return Se(n7) % Se(r5);
      default:
        throw new n3(e5, "UnsupportedOperator", t5);
    }
  } catch (n7) {
    throw n7;
  }
}
function Be2(e5, t5) {
  try {
    const n7 = ue2(e5, t5.left);
    if (t(n7)) switch (t5.operator) {
      case "||": {
        if (true === n7) return n7;
        const r5 = ue2(e5, t5.right);
        if (t(r5)) return r5;
        throw new n3(e5, "LogicExpressionOrAnd", t5);
      }
      case "&&": {
        if (false === n7) return n7;
        const r5 = ue2(e5, t5.right);
        if (t(r5)) return r5;
        throw new n3(e5, "LogicExpressionOrAnd", t5);
      }
      default:
        throw new n3(e5, "LogicExpressionOrAnd", t5);
    }
    throw new n3(e5, "LogicalExpressionOnlyBoolean", t5);
  } catch (n7) {
    throw n7;
  }
}
function Ge2(e5, t5, n7) {
  if (L(e5)) throw new n3(t5, "NoFunctionInTemplateLiteral", n7);
  return e5;
}
function Ue2(e5, t5) {
  let n7 = "", r5 = 0;
  for (const o6 of t5.quasis) if (n7 += o6.value ? o6.value.cooked : "", false === o6.tail) {
    n7 += t5.expressions[r5] ? ge(Ge2(ue2(e5, t5.expressions[r5]), e5, t5)) : "", r5++;
  }
  return n7;
}
function De3(e5, t5) {
  return re3(e5, t5);
}
function Ke3(e5, t5) {
  try {
    if ("MemberExpression" === t5.callee.type) {
      const n8 = ue2(e5, t5.callee.object);
      if (!(n8 instanceof le2)) throw new n3(e5, "FunctionNotFound", t5);
      const r5 = false === t5.callee.computed ? t5.callee.property.name : ue2(e5, t5.callee.property);
      if (!n8.hasGlobal(r5)) throw new n3(e5, "FunctionNotFound", t5);
      const o6 = n8.global(r5);
      if (!L(o6)) throw new n3(e5, "CallNonFunction", t5);
      return o6.call(e5, t5);
    }
    if ("Identifier" !== t5.callee.type) throw new n3(e5, "FunctionNotFound", t5);
    const n7 = re3(e5, t5.callee, "FunctionNotFound");
    if (L(n7)) return n7.call(e5, t5);
    throw new n3(e5, "CallNonFunction", t5);
  } catch (n7) {
    throw n7;
  }
}
function Le3(e5, t5) {
  try {
    if (true === t5.preparsed) throw new n3(e5, "NeverReach", t5);
    const n7 = t5.arguments;
    oe(null === n7 ? [] : n7, 3, 3, e5, t5);
    const r5 = ue2(e5, n7[0]);
    if (false === t(r5)) throw new n3(e5, "BooleanConditionRequired", t5);
    return ue2(e5, true === r5 ? n7[1] : n7[2]);
  } catch (n7) {
    throw n7;
  }
}
function _e2(e5, t5) {
  try {
    if (true === t5.preparsed) throw new n3(e5, "NeverReach", t5);
    const n7 = t5.arguments;
    oe(null === n7 ? [] : n7, 2, 3, e5, t5);
    const r5 = ue2(e5, n7[0]);
    if (3 === n7.length) {
      const t6 = ue2(e5, n7[1]), o6 = y2(r5, t6);
      return null != o6 && "" !== o6 ? o6 : ue2(e5, n7[2]);
    }
    return null === r5 || "" === r5 || void 0 === r5 ? ue2(e5, n7[1]) : r5;
  } catch (n7) {
    throw n7;
  }
}
function ze2(e5, t5) {
  try {
    if (true === t5.preparsed) throw new n3(e5, "NeverReach", t5);
    const n7 = t5.arguments;
    if (n7.length < 2) throw new n3(e5, "WrongNumberOfParameters", t5);
    if (2 === n7.length) return ue2(e5, n7[1]);
    {
      if ((n7.length - 1) % 2 == 0) throw new n3(e5, "WrongNumberOfParameters", t5);
      const r5 = ue2(e5, n7[0]);
      return Ze2(e5, t5, 1, r5);
    }
  } catch (n7) {
    throw n7;
  }
}
function Ze2(e5, t5, n7, r5) {
  try {
    const o6 = t5.arguments, i7 = ue2(e5, o6[n7]);
    if (ye(i7, r5)) return ue2(e5, o6[n7 + 1]);
    {
      const i8 = o6.length - n7;
      return 1 === i8 ? ue2(e5, o6[n7]) : 2 === i8 ? null : 3 === i8 ? ue2(e5, o6[n7 + 2]) : Ze2(e5, t5, n7 + 2, r5);
    }
  } catch (o6) {
    throw o6;
  }
}
function qe2(e5, t5) {
  try {
    if (true === t5.preparsed) throw new n3(e5, "NeverReach", t5);
    const n7 = t5.arguments;
    if (n7.length < 3) throw new n3(e5, "WrongNumberOfParameters", t5);
    if (n7.length % 2 == 0) throw new n3(e5, "WrongNumberOfParameters", t5);
    const r5 = ue2(e5, n7[0]);
    if (false === t(r5)) throw new n3(e5, "BooleanConditionRequired", n7[0]);
    return We2(e5, t5, 0, r5);
  } catch (n7) {
    throw n7;
  }
}
function We2(e5, t5, n7, r5) {
  try {
    const o6 = t5.arguments;
    if (true === r5) return ue2(e5, o6[n7 + 1]);
    if (3 === o6.length - n7) return ue2(e5, o6[n7 + 2]);
    {
      const r6 = ue2(e5, o6[n7 + 2]);
      if (false === t(r6)) throw new n3(e5, "BooleanConditionRequired", o6[n7 + 2]);
      return We2(e5, t5, n7 + 2, r6);
    }
  } catch (o6) {
    throw o6;
  }
}
function Pe3() {
  const e5 = /* @__PURE__ */ Object.create(null);
  j(e5, ce2), E(e5, ce2), P3(e5, ce2, De3), g2(e5, ce2), C2(e5, ce2), a(e5, ce2), F(e5, ce2), b3(e5, ce2), e5.iif = Le3, e5.defaultvalue = _e2, e5.decode = ze2, e5.when = qe2;
  const t5 = function() {
    this.textformatting = { value: p.textFormatting() };
  };
  t5.prototype = /* @__PURE__ */ Object.create(null), t5.prototype.infinity = Object.freeze({ value: Number.POSITIVE_INFINITY }), t5.prototype.pi = Object.freeze({ value: Math.PI });
  for (const [n7, r5] of Object.entries(e5)) t5.prototype[n7] = Object.freeze({ value: new e2(r5) });
  return t5;
}
var Ve2 = Pe3();
function Te2(e5) {
  const t5 = { mode: "sync", compiled: false, functions: /* @__PURE__ */ Object.create(null), signatures: [], standardFunction: ce2, evaluateIdentifier: De3 };
  for (let n7 = 0; n7 < e5.length; n7++) e5[n7].registerFunctions(t5);
  for (const [n7, r5] of Object.entries(t5.functions)) Ve2.prototype[n7] = Object.freeze({ value: new e2(r5) });
  for (let n7 = 0; n7 < t5.signatures.length; n7++) o3(t5.signatures[n7], "sync");
}
function Ye2(e5) {
  console.log(e5);
}
function $e2(n7, i7) {
  const s9 = new Set(Object.keys(i7?.vars || {}).map((t5) => r2(t5))), l4 = new Set(Object.keys(i7?.customfunctions || {}).map((t5) => r2(t5))), { globals: a3, exports: c4 } = i4(n7);
  return (e5) => {
    const o6 = e5.spatialReference ?? f.WebMercator;
    let i8 = null;
    n7.usesModules && (i8 = new s3(/* @__PURE__ */ new Map(), n7.loadedModules));
    const f6 = new Ve2();
    for (const t5 of l4) null != e5.customfunctions && t5 in e5.customfunctions ? f6[t5] = { value: new e2(e5.customfunctions[t5]) } : f6[t5] = X;
    for (const t5 of s9) {
      if (null == e5.vars || !(t5 in e5.vars)) {
        t5 in f6 || (f6[t5] = X);
        continue;
      }
      const n8 = e5.vars[t5] ?? null;
      i3(n8) ? f6[t5] = { value: I2.createFromGraphic(n8, e5.timeZone ?? null) } : f6[t5] = { value: n8 };
    }
    for (const t5 of a3) t5 in f6 || (f6[t5] = X);
    const d6 = { lrucache: e5.lrucache, interceptor: e5.interceptor, services: e5.services, console: e5.console ?? Ye2, abortSignal: t2, timeZone: e5.timeZone ?? null, spatialReference: o6, track: e5.track, depthCounter: { depth: 1 }, libraryResolver: i8, exports: c4, localScope: null, globalScope: f6 }, w3 = Fe2(d6, n7);
    if (w3 instanceof R || w3 instanceof v) {
      const e6 = w3.value;
      if (q(e6)) return null;
      if (L(e6)) throw new n3(d6, "IllegalResult", null);
      return e6;
    }
    if (q(w3)) return null;
    if (w3 === _2) throw new n3(d6, "IllegalResult", null);
    if (w3 === I) throw new n3(d6, "IllegalResult", null);
    throw new n3(d6, "NeverReach", null);
  };
}
function He2(e5, t5) {
  return $e2(e5, t5)(t5);
}
Te2([p3]);

// node_modules/@arcgis/core/chunks/arcade.js
var h4 = /* @__PURE__ */ new Set(["feature", "angle", "bearing", "centroid", "envelopeintersects", "extent", "geometry", "ringisclockwise", "trackgeometrywindow"]);
var k2 = new Set(["TrackAccelerationAt", "TrackAccelerationWindow", "TrackCurrentAcceleration", "TrackCurrentDistance", "TrackCurrentSpeed", "TrackDistanceAt", "TrackDistanceWindow", "TrackSpeedAt", "TrackSpeedWindow"].map((e5) => r2(e5)));
var T3 = new Set([...k2, "TrackCurrentTime", "TrackDuration", "TrackFieldWindow", "TrackGeometryWindow", "TrackIndex", "TrackStartTime", "TrackWindow"].map((e5) => r2(e5)));
var j2 = false;
var g4 = false;
var x2 = null;
var v3 = [];
var F3 = false;
function M4(r5, t5) {
  if (true === t5.useAsync || true === r5.isAsync) return G2(r5, t5);
  if (has("esri-csp-restrictions")) return $e2(r5, t5);
  try {
    return en(r5, t5);
  } catch (n7) {
    if ("esri.arcade.arcadeuncompilableerror" === n7.declaredRootClass) return $e2(r5, t5);
    throw n7;
  }
}
function G2(r5, t5) {
  if (null === x2) throw new n3(null, "AsyncNotEnabled", null);
  if (has("esri-csp-restrictions")) return x2.prepareScript(r5, t5);
  try {
    return en(r5, t5, true);
  } catch (n7) {
    if ("esri.arcade.arcadeuncompilableerror" === n7.declaredRootClass) return x2.prepareScript(r5, t5);
    throw n7;
  }
}
function C4(e5) {
  Te2(e5), Ze(e5, "sync"), null === x2 ? v3.push(e5) : (Ze(e5, "async"), x2.extend(e5));
}
function E3(e5, r5 = []) {
  return d5(e5, r5);
}
function I5(e5, r5, t5 = []) {
  return D3(d5(e5, t5), r5);
}
function D3(e5, r5) {
  if (true === r5.useAsync || true === e5.isAsync) {
    if (null === x2) throw new n3(null, "AsyncNotEnabled", null);
    return x2.executeScript(e5, r5);
  }
  return He2(e5, r5);
}
function U3(e5, r5) {
  return l2(e5, r5);
}
function W(e5, r5) {
  return p2(e5, r5);
}
function _3(e5, r5 = false) {
  return void 0 === r5 && (r5 = false), f4(e5).map(({ varId: e6, memberId: r6 }) => `${e6}.${r6}`);
}
function R4(e5) {
  return d2(e5);
}
function O3(e5, r5 = []) {
  return void 0 === e5.usesGeometry && b(e5, r5), true === e5.usesGeometry;
}
var P6 = null;
function z5() {
  return P6 || (P6 = L3(), P6);
}
async function L3() {
  return await H3(), g4 = true, true;
}
var $ = null;
function N2() {
  return null !== $ || ($ = q3()), $;
}
async function q3() {
  await nn(), x2 = await import("./arcadeAsyncRuntime-UVDATYBL.js");
  for (const e5 of v3) x2.extend(e5), Ze(e5, "async");
  return v3 = null, true;
}
function B2() {
  return j2;
}
function V() {
  return !!x2;
}
function H5() {
  return g4;
}
var J;
var K3 = null;
function Q3() {
  return K3 || (K3 = X2(), K3);
}
async function X2() {
  await N2();
  const [e5, t5, n7, s9, a3, o6] = await Promise.all([import("./featureSetUtils-B3KVTEZU.js"), import("./featuresetbase-NAZJMPLA.js"), import("./featuresetgeom-47Y4VZBH.js"), import("./featuresetstats-H6ESOQJU.js"), import("./featuresetstring-3PF62JBW.js"), import("./knowledgegraph-2QZFHYHJ.js")]);
  return ie4 = e5, x2.extend([t5, n7, s9, a3, o6]), Ze([t5, n7, s9, a3, o6], "async"), j2 = true, true;
}
function Y() {
  return J ??= s6().then(() => {
    F3 = true;
  });
}
function Z(e5, r5 = []) {
  return void 0 === e5.usesFeatureSet && b(e5, r5), true === e5.usesFeatureSet;
}
function ee3(e5, r5 = []) {
  return void 0 === e5.isAsync && b(e5, r5), true === e5.isAsync;
}
function re4(e5, r5) {
  if (r5) {
    for (const t5 of r5) if (U3(e5, t5)) return true;
    return false;
  }
  return false;
}
async function te4(e5, r5, t5 = [], n7 = false, s9 = null) {
  return ne4(/* @__PURE__ */ new Set(), e5, r5, t5, n7, s9);
}
async function ne4(e5, r5, t5, n7 = [], s9 = false, a3 = null) {
  const o6 = "string" == typeof r5 ? E3(r5) : r5, c4 = [];
  return o6 && (false === H5() && (O3(o6) || s9) && c4.push(z5()), false === V() && (true === o6.isAsync || t5) && c4.push(N2()), false === B2() && (Z(o6) || re4(o6, n7)) && c4.push(Q3()), F3 || le3(o6) && c4.push(Y())), c4.length && await Promise.all(c4), await ae3(e5, o6, a3, t5, s9), true;
}
function se3(e5, r5 = []) {
  return void 0 === e5.usesModules && b(e5, r5), true === e5.usesModules;
}
async function ae3(e5, r5, t5 = null, n7 = false, a3 = false) {
  const o6 = u(r5);
  null === t5 && o6.length > 0 && (t5 = i6.getDefault()), r5.loadedModules = {};
  for (const s9 of o6) {
    n2(t5);
    const o7 = t5.normalizeModuleUri(s9.source);
    if (e5.has(o7.uri)) throw new n3(null, "CircularModules", null);
    e5.add(o7.uri);
    const c4 = await t5.fetchModule(o7);
    await ne4(e5, c4, n7, [], a3, t5), e5.delete(o7.uri), c4.isAsync && (r5.isAsync = true), c4.usesFeatureSet && (r5.usesFeatureSet = true), c4.usesGeometry && (r5.usesGeometry = true), r5.loadedModules[s9.libname] = { uri: o7.uri, script: c4 };
  }
}
function oe4(e5) {
  if (O3(e5)) return true;
  const r5 = g(e5);
  let t5 = false;
  for (let n7 = 0; n7 < r5.length; n7++) if (h4.has(r5[n7])) {
    t5 = true;
    break;
  }
  return t5;
}
function ce3(e5, r5) {
  const t5 = null == r5 ? null : new Set(r5.map((e6) => e6.toLowerCase()));
  return f4(e5).some(({ varId: e6, memberId: r6 }) => "$view" === e6 && (null == t5 || t5.has(r6)));
}
var ie4 = null;
function ue3() {
  return ie4;
}
function le3(e5) {
  return g(e5).some((e6) => k2.has(e6));
}
function pe3(e5) {
  return g(e5).some((e6) => T3.has(e6));
}
var de4 = Object.freeze(Object.defineProperty({ __proto__: null, _loadScriptDependenciesImpl: ne4, compileScript: M4, enableAsyncSupport: N2, enableAsyncSupportImpl: q3, enableFeatureSetSupport: Q3, enableFeatureSetSupportImpl: X2, enableGeometrySupport: z5, enableGeometrySupportImpl: L3, executeScript: D3, extend: C4, extractExpectedFieldLiterals: R4, extractFieldLiterals: _3, featureSetUtils: ue3, isAsyncEnabled: V, isFeatureSetSupportEnabled: B2, isGeometryEnabled: H5, loadDependentModules: ae3, loadScriptDependencies: te4, loadTrackGeometryOperators: Y, parseAndExecuteScript: I5, parseScript: E3, referencesFunction: W, referencesMember: U3, scriptIsAsync: ee3, scriptTouchesGeometry: oe4, scriptUsesFeatureSet: Z, scriptUsesGeometryEngine: O3, scriptUsesModules: se3, scriptUsesTrack: pe3, scriptUsesViewProperties: ce3 }, Symbol.toStringTag, { value: "Module" }));

export {
  M4 as M,
  C4 as C,
  E3 as E,
  I5 as I,
  D3 as D,
  U3 as U,
  W,
  _3 as _,
  R4 as R,
  O3 as O,
  z5 as z,
  L3 as L,
  N2 as N,
  q3 as q,
  B2 as B,
  V,
  H5 as H,
  Q3 as Q,
  X2 as X,
  Y,
  Z,
  ee3 as ee,
  te4 as te,
  ne4 as ne,
  se3 as se,
  ae3 as ae,
  oe4 as oe,
  ce3 as ce,
  ue3 as ue,
  pe3 as pe,
  de4 as de
};
//# sourceMappingURL=chunk-FXBZEKGO.js.map
