import {
  C,
  E,
  L,
  a as a4,
  c as c5,
  d,
  f as f3,
  g,
  m as m4,
  m2 as m5,
  p as p4,
  p2 as p5,
  v
} from "./chunk-GHIN7ITM.js";
import {
  p as p3
} from "./chunk-XYIGNG2Z.js";
import "./chunk-BTFBYI67.js";
import "./chunk-D3G5WIRR.js";
import "./chunk-Q3JOE7TC.js";
import {
  i as i4,
  s as s3
} from "./chunk-A7O5R67Z.js";
import {
  S
} from "./chunk-NOLINR6O.js";
import {
  l as l5
} from "./chunk-CJZPTLIZ.js";
import {
  s as s2
} from "./chunk-ZETARPSI.js";
import {
  b2,
  u as u4,
  w as w2
} from "./chunk-CZOYDK6P.js";
import {
  j as j2
} from "./chunk-6TCXGIIN.js";
import {
  l as l2
} from "./chunk-NP2TBOXH.js";
import "./chunk-YE4E5JCT.js";
import "./chunk-SXZO7ULH.js";
import "./chunk-H34D76ZQ.js";
import {
  i as i3
} from "./chunk-FMOL5XMB.js";
import "./chunk-VNSHGTPN.js";
import "./chunk-S5K4XWUR.js";
import {
  c as c3
} from "./chunk-5LMH6D7V.js";
import "./chunk-EK7HOTRR.js";
import {
  e as e2,
  o as o2
} from "./chunk-233ALXRM.js";
import "./chunk-EKZRA6TO.js";
import "./chunk-M5SP6ZBM.js";
import {
  N,
  P,
  c as c2,
  q
} from "./chunk-VYMBX5H5.js";
import {
  l as l3,
  p as p2
} from "./chunk-PEL3D3ZN.js";
import "./chunk-Q5KWD3VQ.js";
import "./chunk-BUQC3CLV.js";
import {
  t as t2
} from "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import {
  n as n4
} from "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import {
  a as a3
} from "./chunk-KEZCWFAR.js";
import {
  m as m3
} from "./chunk-JZUJ34RR.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-C5OQVQZF.js";
import {
  u as u3
} from "./chunk-F7DKSAOI.js";
import {
  m as m2
} from "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import {
  c as c4
} from "./chunk-EDA5QFHZ.js";
import "./chunk-CNYNCKEV.js";
import "./chunk-XL5QPCXN.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import {
  o as o3
} from "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-W75DBJD7.js";
import {
  b as b3
} from "./chunk-P6IKJIMO.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import {
  l as l4
} from "./chunk-T7F6Q6JJ.js";
import "./chunk-YDTPM7OQ.js";
import {
  n as n2,
  r as r3
} from "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import {
  y3 as y
} from "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import {
  i as i2,
  u
} from "./chunk-LTPHDYPK.js";
import {
  e,
  n as n3
} from "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  a as a2,
  h,
  j,
  l
} from "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import {
  u as u2
} from "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import {
  r as r2
} from "./chunk-SMWUT52Z.js";
import {
  _
} from "./chunk-AXZMNHTN.js";
import {
  f as f2
} from "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import {
  t
} from "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import {
  H2 as H,
  p3 as p,
  w
} from "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import {
  o
} from "./chunk-XWE6BM2U.js";
import {
  r
} from "./chunk-SOIZOFSB.js";
import {
  n
} from "./chunk-XXLHAM2M.js";
import {
  b,
  c,
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a,
  x
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  f2 as f
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/layers/support/PlaybackInfo.js
var s4 = class extends l4(n) {
  constructor(o4) {
    super(o4), this.framerate = null, this.containerFormat = null, this.gop = null, this.aspectRatio = null, this.klv = null;
  }
};
__decorate([m({ type: String })], s4.prototype, "framerate", void 0), __decorate([m({ type: String })], s4.prototype, "containerFormat", void 0), __decorate([m({ type: Number })], s4.prototype, "gop", void 0), __decorate([m({ type: String })], s4.prototype, "aspectRatio", void 0), __decorate([m({ type: Object })], s4.prototype, "klv", void 0), s4 = __decorate([a("esri.layers.support.PlaybackInfo")], s4);
var i5 = s4;

// node_modules/@arcgis/core/layers/support/VideoFrame.js
function l6(o4) {
  return null != o4?.sourcePoint && null != o4.mapPoint;
}
var m6 = class extends l4(n) {
  constructor(o4) {
    super(o4), this.frame = null, this.controlPoints = null;
  }
  readControlPoints(o4) {
    return o4.map((o5) => ({ sourcePoint: { x: o5.frameX, y: o5.frameY }, mapPoint: new _(o5.point) }));
  }
  writeControlPoints(o4, r4) {
    null != o4 && l6(o4[0]) && (r4.controlPoints = o4.map((o5) => {
      const r5 = o5.sourcePoint, t3 = o5.mapPoint;
      return { frameX: r5.x, frameY: r5.y, point: t3.toJSON() };
    }));
  }
};
__decorate([m({ type: String })], m6.prototype, "frame", void 0), __decorate([m({ type: [p3], json: { write: { allowNull: false, isRequired: true } } })], m6.prototype, "controlPoints", void 0), __decorate([o("controlPoints")], m6.prototype, "readControlPoints", null), __decorate([r("controlPoints")], m6.prototype, "writeControlPoints", null), m6 = __decorate([a("esri.layers.support.VideoFrame")], m6);
var a5 = m6;

// node_modules/@arcgis/core/core/XHRAdapter.js
var _s = class _s extends EventTarget {
  constructor() {
    super(...arguments), this._readyState = 0, this._responseType = "", this.timeout = 0, this._withCredentials = false, this.onabort = null, this.onerror = null, this.onload = null, this.onloadend = null, this.onloadstart = null, this.onprogress = null, this.ontimeout = null, this.onreadystatechange = null, this.UNSENT = 0, this.OPENED = 1, this.HEADERS_RECEIVED = 2, this.LOADING = 3, this.DONE = 4, this._abortController = null, this._error = null, this._options = {}, this._response = null, this._sendFlag = false, this._url = "";
  }
  get readyState() {
    return this._readyState;
  }
  get response() {
    return "" === this.responseType || "text" === this.responseType ? this.responseText : this.readyState !== this.DONE || this._error || !this._response ? null : this._response.data;
  }
  get responseText() {
    return "" !== this.responseType && "text" !== this.responseType && this._throwDOMException(), this.readyState !== this.DONE ? "" : this._response ? this._response.data : null != this._error?.raw ? "string" == typeof this._error.raw ? this._error.raw : JSON.stringify(this._error.raw) : "";
  }
  get responseType() {
    return this._responseType;
  }
  set responseType(t3) {
    ("document" !== t3 || globalThis instanceof Window) && (this.readyState !== this.LOADING && this.readyState !== this.DONE || this._throwDOMException(), this._responseType = t3);
  }
  get responseURL() {
    return (this._response || this._error)?.url ?? "";
  }
  get responseXML() {
    return "" !== this.responseType && "document" !== this.responseType && this._throwDOMException(), this.readyState !== this.DONE ? null : this._response?.data ?? null;
  }
  get status() {
    return (this._response || this._error)?.httpStatus ?? 0;
  }
  get statusText() {
    return "";
  }
  get upload() {
    return console.warn("upload not implemented"), null;
  }
  get withCredentials() {
    return this._withCredentials;
  }
  set withCredentials(t3) {
    this.readyState !== this.UNSENT && this.readyState !== this.OPENED && this._throwDOMException(), this._withCredentials = t3;
  }
  abort() {
    this.readyState === this.OPENED && this._sendFlag || this.readyState === this.HEADERS_RECEIVED || this.readyState === this.LOADING ? (this._sendFlag = false, this._error = null, this._response = null, this._abortController?.abort(), this._updateReadyState(this.DONE), this._dispatchProgressEvent("abort"), this._dispatchProgressEvent("loadend")) : this.readyState === this.DONE && this._updateReadyState(this.UNSENT);
  }
  getAllResponseHeaders() {
    let t3 = "";
    const e8 = (this._response || this._error)?.getAllHeaders?.();
    if (e8) for (const [s6, r4] of e8) t3 += `${s6}: ${r4}\r
`;
    return t3;
  }
  getResponseHeader(t3) {
    return (this._response || this._error)?.getHeader?.(t3) ?? null;
  }
  open(t3, e8) {
    switch (this._sendFlag = false, this._options = {}, t3) {
      case "GET":
        this._options.method = "auto";
        break;
      case "POST":
        this._options.method = "post";
        break;
      case "HEAD":
        this._options.method = "head";
        break;
      case "DELETE":
        this._options.method = "delete";
        break;
      case "PUT":
        this._options.method = "put";
    }
    this._url = e8, this._error = null, this._response = null, this._abortController = new AbortController(), this._updateReadyState(this.OPENED);
  }
  overrideMimeType(t3) {
    throw new Error("overrideMimeType not implemented");
  }
  send(s6) {
    (this.readyState !== this.OPENED || this._sendFlag) && this._throwDOMException(), this._sendFlag = true, this._updateReadyState(this.LOADING), this._dispatchProgressEvent("loadstart");
    const r4 = this._options;
    s6 instanceof URLSearchParams ? r4.body = s6.toString() : r4.body = s6, r4.responseType = "" === this.responseType ? "text" : "arraybuffer" === this.responseType ? "array-buffer" : this.responseType, r4.signal = this._abortController?.signal, this.timeout && (r4.timeout = this.timeout), this.withCredentials && (r4.withCredentials = true), H(this._url, r4).then((t3) => {
      this._response = t3, this._updateReadyState(this.DONE), this._dispatchProgressEvent("load");
    }).catch((t3) => {
      this._sendFlag && (this._error = t3.details, this._updateReadyState(this.DONE), p(t3) ? this._dispatchProgressEvent("timeout") : "AbortError" === t3.name ? this._dispatchProgressEvent("abort") : this._dispatchProgressEvent("error"));
    }).finally(() => {
      this._sendFlag && this._dispatchProgressEvent("loadend");
    });
  }
  setRequestHeader(t3, e8) {
    (this.readyState !== this.OPENED || this._sendFlag) && this._throwDOMException(), this._options.headers ??= {}, this._options.headers[t3] = e8;
  }
  _dispatchProgressEvent(t3) {
    const e8 = new ProgressEvent(t3, { loaded: 0, total: 0 });
    this.dispatchEvent(e8), this[`on${t3}`]?.(e8);
  }
  _throwDOMException() {
    throw new DOMException("", "InvalidStateError");
  }
  _updateReadyState(t3) {
    if (this._readyState !== t3 && (this._readyState = t3, t3 !== this.UNSENT)) {
      const t4 = new Event("readystatechange");
      this.dispatchEvent(t4), this.onreadystatechange?.(t4);
    }
  }
};
_s.UNSENT = 0;
_s.OPENED = 1;
_s.HEADERS_RECEIVED = 2;
_s.LOADING = 3;
_s.DONE = 4;
var s5 = _s;

// node_modules/@arcgis/core/layers/video/VideoCameraSensorModel.js
var M = Math.PI / 180;
var V = class extends b {
  constructor(t3) {
    super(), this.averageElevation = 0, this.imageHeight = 0, this.imageWidth = 0, this.metadataSupportsTransforms = false, this.platformHeadingAngle = 0, this.platformPitchAngle = 0, this.platformRollAngle = 0, this.sensorHeadingAngle = 0, this.sensorAltitude = 0, this.sensorHorizontalFieldOfView = 0, this.sensorLatitude = 0, this.sensorLongitude = 0, this.sensorPitchAngle = 0, this.sensorRollAngle = 0, this.sensorVerticalFieldOfView = 0, this.vttMetadata = /* @__PURE__ */ new Map(), this._createMat3FromValues = (t4) => {
      const e9 = t4[0], o4 = t4[1], s6 = t4[2];
      return n3(e9[0], o4[0], s6[0], e9[1], o4[1], s6[1], e9[2], o4[2], s6[2]);
    }, this._multiplyMat3 = (t4, e9) => {
      const o4 = e();
      return i2(o4, t4, e9), o4;
    }, this._transposeMat3 = (t4) => {
      const e9 = e();
      return u(e9, t4), e9;
    }, this._calculateCameraFovForward = () => this._createMat3FromValues([[0, 0, 1], [Math.tan(0.5 * this.sensorHorizontalFieldOfView * M), 0, 0], [0, Math.tan(0.5 * this.sensorVerticalFieldOfView * M), 0]]), this._calculateCameraFovReverse = () => this._createMat3FromValues([[0, 1 / Math.tan(0.5 * this.sensorHorizontalFieldOfView * M), 0], [0, 0, 1 / Math.tan(0.5 * this.sensorVerticalFieldOfView * M)], [1, 0, 0]]), this._calculateCameraLook = () => this._getRotationMatrixZYX(this.sensorHeadingAngle * M, this.sensorPitchAngle * M, this.sensorRollAngle * M), this._calculateImageDimensionsForward = () => this._createMat3FromValues([[2 / this.imageWidth, 0, -1], [0, -2 / this.imageHeight, -1], [0, 0, 1]]), this._calculateImageDimensionsReverse = () => this._createMat3FromValues([[this.imageWidth / 2, 0, this.imageWidth / 2], [0, -this.imageHeight / 2, -this.imageHeight / 2], [0, 0, 1]]), this._calculatePlatformPositionMatrix = () => {
      const t4 = Math.sin(this.sensorLatitude * M), e9 = Math.cos(this.sensorLatitude * M), o4 = Math.sin(this.sensorLongitude * M), s6 = Math.cos(this.sensorLongitude * M);
      return this._createMat3FromValues([[-t4 * s6, -o4, -e9 * s6], [-t4 * o4, s6, -e9 * o4], [e9, 0, -t4]]);
    }, this._calculatePlatformOrientation = () => this._getRotationMatrixZYX(this.platformHeadingAngle * M, this.platformPitchAngle * M, this.platformRollAngle * M), this._extractValues = (t4) => {
      this.imageWidth = t4.get(d.EsriVideoWidth)?.value, this.imageHeight = t4.get(d.EsriVideoHeight)?.value;
      const e9 = t4.get(d.SensorEllipsoidHeight)?.value;
      this.sensorAltitude = e9 ?? t4.get(d.SensorTrueAltitude)?.value, this.sensorLatitude = t4.get(d.SensorLatitude)?.value, this.sensorLongitude = t4.get(d.SensorLongitude)?.value, this.sensorHeadingAngle = t4.get(d.SensorAzimuthAngle)?.value, this.sensorPitchAngle = t4.get(d.SensorElevationAngle)?.value, this.sensorRollAngle = t4.get(d.SensorRollAngle)?.value, this.sensorHorizontalFieldOfView = t4.get(d.SensorHorizontalFOV)?.value, this.sensorVerticalFieldOfView = t4.get(d.SensorVerticalFOV)?.value, this.platformHeadingAngle = t4.get(d.PlatformHeadingAngle)?.value, this.platformPitchAngle = t4.get(d.PlatformPitchAngle)?.value, this.platformRollAngle = t4.get(d.PlatformRollAngle)?.value, this.averageElevation = t4.get(d.FrameCenterElevation)?.value || 0;
    }, this._getRotationMatrixZYX = (t4, e9, o4) => {
      const s6 = Math.cos(t4), i6 = Math.sin(t4), a6 = Math.cos(e9), r4 = Math.sin(e9), l7 = Math.cos(o4), n5 = Math.sin(o4);
      return this._createMat3FromValues([[s6 * a6, s6 * r4 * n5 - l7 * i6, i6 * n5 + s6 * l7 * r4], [a6 * i6, s6 * l7 + i6 * r4 * n5, l7 * i6 * r4 - s6 * n5], [-r4, a6 * n5, a6 * l7]]);
    }, this._initCameraSensor = () => {
      const t4 = this._calculateCameraFovForward(), e9 = this._calculateCameraFovReverse(), o4 = this._calculateCameraLook(), s6 = this._calculateImageDimensionsForward(), i6 = this._calculateImageDimensionsReverse(), a6 = this._calculatePlatformPositionMatrix(), r4 = this._calculatePlatformOrientation(), l7 = this._multiplyMat3(this._multiplyMat3(a6, r4), o4);
      this._imageToEarthTransform = this._multiplyMat3(this._multiplyMat3(l7, t4), s6);
      const n5 = this._multiplyMat3(i6, e9);
      this._earthToImageTransform = this._multiplyMat3(n5, this._transposeMat3(l7)), this._platformPositionEcef = this._projectPointToECEF(this.sensorLongitude, this.sensorLatitude, this.sensorAltitude || this.averageElevation);
    }, this._metadataSupportsTransforms = (t4) => {
      if (!t4?.size) return false;
      const e9 = t4.get(d.EsriVideoWidth)?.value ?? 0, o4 = t4.get(d.EsriVideoHeight)?.value ?? 0;
      if (e9 <= 0 || o4 <= 0) return false;
      const s6 = t4.get(d.SensorEllipsoidHeight)?.value, i6 = t4.get(d.SensorTrueAltitude)?.value, a6 = t4.get(d.SensorLatitude)?.value, r4 = t4.get(d.SensorLongitude)?.value;
      if (null == s6 && null == i6 || null == a6 || null == r4) return false;
      const l7 = t4.get(d.PlatformHeadingAngle)?.value, n5 = t4.get(d.PlatformPitchAngle)?.value, h2 = t4.get(d.PlatformRollAngle)?.value;
      if (null == l7 || null == n5 || null == h2) return false;
      const m7 = t4.get(d.SensorHorizontalFOV)?.value, g2 = t4.get(d.SensorVerticalFOV)?.value;
      if (null == m7 || null == g2) return false;
      const u5 = t4.get(d.SensorAzimuthAngle)?.value, c6 = t4.get(d.SensorElevationAngle)?.value, p6 = t4.get(d.SensorRollAngle)?.value;
      return null != u5 && null != c6 && null != p6;
    }, this._projectPointToECEF = (t4, e9, o4) => {
      const s6 = [];
      return o3([t4, e9, o4], f2.WGS84, 0, s6, c3, 0), new _({ x: s6[0], y: s6[1], z: s6[2], spatialReference: c3 });
    }, this._projectImageVectorToEllipsoid = (t4, e9) => {
      const o4 = t.semiMajorAxis + e9, s6 = t.semiMinorAxis + e9, i6 = s6 / o4, a6 = o4 / s6, { x: n5, y: h2, z: u5 } = this._platformPositionEcef, c6 = u5 ?? this.averageElevation, p6 = r3(n5, h2, a6 * c6), d2 = P(t4, t4), f4 = P(t4, p6), v3 = P(p6, p6) - o4 * o4, A2 = (-f4 - Math.sqrt(f4 * f4 - d2 * v3)) / d2;
      if (A2 < 0) return [NaN, NaN, NaN];
      const M3 = n2();
      return q(M3, p6, t4, A2), M3[2] = M3[2] * i6, M3;
    };
    const e8 = t3?.videoMetadata;
    this.updateSensorModel(e8);
  }
  updateSensorModel(t3) {
    t3?.size && (this._set("metadataSupportsTransforms", this._metadataSupportsTransforms(t3)), this.metadataSupportsTransforms && (this._extractValues(t3), this._initCameraSensor()));
  }
  transformGeoToImage(t3, e8, o4) {
    const s6 = this._platformPositionEcef;
    if (!s6) return [0, 0];
    const { x: i6, y: a6, z: n5 } = s6, h2 = r3(i6, a6, n5), m7 = this._projectPointToECEF(t3, e8, o4 || this.averageElevation), g2 = n2(), p6 = r3(m7.x, m7.y, m7.z);
    c2(g2, p6, h2), N(g2, g2, this._earthToImageTransform);
    const d2 = g2[0], f4 = g2[1], v3 = g2[2];
    let _3 = r3(NaN, NaN, NaN);
    return isNaN(v3) || (_3 = r3(d2 / v3, f4 / v3, v3 / v3)), [_3[0], _3[1]];
  }
  transformImageToGeo(t3, e8) {
    const o4 = r3(t3, e8, 1), s6 = n2();
    N(s6, o4, this._imageToEarthTransform);
    const i6 = this._projectImageVectorToEllipsoid(s6, this.averageElevation);
    let a6;
    if (!isNaN(i6[0])) {
      const t4 = [];
      o3([i6[0], i6[1], i6[2]], c3, 0, t4, f2.WGS84, 0), a6 = new _({ x: t4[0], y: t4[1], z: t4[2], spatialReference: f2.WGS84 });
    }
    return a6;
  }
};
__decorate([m()], V.prototype, "averageElevation", void 0), __decorate([m()], V.prototype, "imageHeight", void 0), __decorate([m()], V.prototype, "imageWidth", void 0), __decorate([m({ readOnly: true })], V.prototype, "metadataSupportsTransforms", void 0), __decorate([m()], V.prototype, "platformHeadingAngle", void 0), __decorate([m()], V.prototype, "platformPitchAngle", void 0), __decorate([m()], V.prototype, "platformRollAngle", void 0), __decorate([m()], V.prototype, "sensorHeadingAngle", void 0), __decorate([m()], V.prototype, "sensorAltitude", void 0), __decorate([m()], V.prototype, "sensorHorizontalFieldOfView", void 0), __decorate([m()], V.prototype, "sensorLatitude", void 0), __decorate([m()], V.prototype, "sensorLongitude", void 0), __decorate([m()], V.prototype, "sensorPitchAngle", void 0), __decorate([m()], V.prototype, "sensorRollAngle", void 0), __decorate([m()], V.prototype, "sensorVerticalFieldOfView", void 0), __decorate([m()], V.prototype, "vttMetadata", void 0), V = __decorate([a("esri.layers.video.VideoCameraSensorModel")], V);

// node_modules/@arcgis/core/layers/video/VideoController.js
var y2;
var _2;
function v2() {
  return _2 ? y2 : (_2 = 1, e8 = "undefined" != typeof window ? window : void 0 !== e2 ? e2 : "undefined" != typeof self ? self : {}, y2 = e8);
  var e8;
}
var b4 = o2(v2());
var T;
var S2;
var E2;
var w3;
var C2;
var k;
var I;
var x2;
var A;
var D;
var P2;
var L2;
var O;
var N2;
var R;
var M2;
var U;
var B;
var F;
var q2;
var j3;
var $;
var H2;
var V2;
var z2;
var W;
function G() {
  if (S2) return T;
  S2 = 1;
  var e8 = Array.prototype.slice;
  function t3(t4, i6) {
    "length" in t4 || (t4 = [t4]), t4 = e8.call(t4);
    for (; t4.length; ) {
      var s6 = t4.shift(), n5 = i6(s6);
      if (n5) return n5;
      s6.childNodes && s6.childNodes.length && (t4 = e8.call(s6.childNodes).concat(t4));
    }
  }
  return T = t3;
}
function X() {
  if (w3) return E2;
  function e8(t3, i6) {
    if (!(this instanceof e8)) return new e8(t3, i6);
    this.data = t3, this.nodeValue = t3, this.length = t3.length, this.ownerDocument = i6 || null;
  }
  return w3 = 1, E2 = e8, e8.prototype.nodeType = 8, e8.prototype.nodeName = "#comment", e8.prototype.toString = function() {
    return "[object Comment]";
  }, E2;
}
function K() {
  if (k) return C2;
  function e8(t3, i6) {
    if (!(this instanceof e8)) return new e8(t3);
    this.data = t3 || "", this.length = this.data.length, this.ownerDocument = i6 || null;
  }
  return k = 1, C2 = e8, e8.prototype.type = "DOMTextNode", e8.prototype.nodeType = 3, e8.prototype.nodeName = "#text", e8.prototype.toString = function() {
    return this.data;
  }, e8.prototype.replaceData = function(e9, t3, i6) {
    var s6 = this.data, n5 = s6.substring(0, e9), r4 = s6.substring(e9 + t3, s6.length);
    this.data = n5 + i6 + r4, this.length = this.data.length;
  }, C2;
}
function Y() {
  if (x2) return I;
  function e8(e9) {
    var t3 = this, i6 = e9.type;
    e9.target || (e9.target = t3), t3.listeners || (t3.listeners = {});
    var s6 = t3.listeners[i6];
    if (s6) return s6.forEach(function(i7) {
      e9.currentTarget = t3, "function" == typeof i7 ? i7(e9) : i7.handleEvent(e9);
    });
    t3.parentNode && t3.parentNode.dispatchEvent(e9);
  }
  return x2 = 1, I = e8;
}
function Q() {
  if (D) return A;
  function e8(e9, t3) {
    var i6 = this;
    i6.listeners || (i6.listeners = {}), i6.listeners[e9] || (i6.listeners[e9] = []), -1 === i6.listeners[e9].indexOf(t3) && i6.listeners[e9].push(t3);
  }
  return D = 1, A = e8;
}
function J() {
  if (L2) return P2;
  function e8(e9, t3) {
    var i6 = this;
    if (i6.listeners && i6.listeners[e9]) {
      var s6 = i6.listeners[e9], n5 = s6.indexOf(t3);
      -1 !== n5 && s6.splice(n5, 1);
    }
  }
  return L2 = 1, P2 = e8;
}
function Z() {
  if (N2) return O;
  N2 = 1;
  var e8 = ["area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "menuitem", "meta", "param", "source", "track", "wbr"];
  function t3(e9) {
    switch (e9.nodeType) {
      case 3:
        return l7(e9.data);
      case 8:
        return "<!--" + e9.data + "-->";
      default:
        return i6(e9);
    }
  }
  function i6(i7) {
    var s7 = [], n6 = i7.tagName;
    return "http://www.w3.org/1999/xhtml" === i7.namespaceURI && (n6 = n6.toLowerCase()), s7.push("<" + n6 + o4(i7) + r4(i7)), e8.indexOf(n6) > -1 ? s7.push(" />") : (s7.push(">"), i7.childNodes.length ? s7.push.apply(s7, i7.childNodes.map(t3)) : i7.textContent || i7.innerText ? s7.push(l7(i7.textContent || i7.innerText)) : i7.innerHTML && s7.push(i7.innerHTML), s7.push("</" + n6 + ">")), s7.join("");
  }
  function s6(e9, t4) {
    var i7 = typeof e9[t4];
    return "style" === t4 && Object.keys(e9.style).length > 0 || e9.hasOwnProperty(t4) && ("string" === i7 || "boolean" === i7 || "number" === i7) && "nodeName" !== t4 && "className" !== t4 && "tagName" !== t4 && "textContent" !== t4 && "innerText" !== t4 && "namespaceURI" !== t4 && "innerHTML" !== t4;
  }
  function n5(e9) {
    if ("string" == typeof e9) return e9;
    var t4 = "";
    return Object.keys(e9).forEach(function(i7) {
      var s7 = e9[i7];
      i7 = i7.replace(/[A-Z]/g, function(e10) {
        return "-" + e10.toLowerCase();
      }), t4 += i7 + ":" + s7 + ";";
    }), t4;
  }
  function r4(e9) {
    var t4 = e9.dataset, i7 = [];
    for (var s7 in t4) i7.push({ name: "data-" + s7, value: t4[s7] });
    return i7.length ? a6(i7) : "";
  }
  function a6(e9) {
    var t4 = [];
    return e9.forEach(function(e10) {
      var i7 = e10.name, s7 = e10.value;
      "style" === i7 && (s7 = n5(s7)), t4.push(i7 + '="' + h2(s7) + '"');
    }), t4.length ? " " + t4.join(" ") : "";
  }
  function o4(e9) {
    var t4 = [];
    for (var i7 in e9) s6(e9, i7) && t4.push({ name: i7, value: e9[i7] });
    for (var n6 in e9._attributes) for (var r5 in e9._attributes[n6]) {
      var o5 = e9._attributes[n6][r5], l8 = (o5.prefix ? o5.prefix + ":" : "") + r5;
      t4.push({ name: l8, value: o5.value });
    }
    return e9.className && t4.push({ name: "class", value: e9.className }), t4.length ? a6(t4) : "";
  }
  function l7(e9) {
    var t4 = "";
    return "string" == typeof e9 ? t4 = e9 : e9 && (t4 = e9.toString()), t4.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  }
  function h2(e9) {
    return l7(e9).replace(/"/g, "&quot;");
  }
  return O = t3;
}
function ee() {
  if (M2) return R;
  M2 = 1;
  var e8 = G(), t3 = Y(), i6 = Q(), s6 = J(), n5 = Z(), r4 = "http://www.w3.org/1999/xhtml";
  function a6(e9, t4, i7) {
    if (!(this instanceof a6)) return new a6(e9);
    var s7 = void 0 === i7 ? r4 : i7 || null;
    this.tagName = s7 === r4 ? String(e9).toUpperCase() : e9, this.nodeName = this.tagName, this.className = "", this.dataset = {}, this.childNodes = [], this.parentNode = null, this.style = {}, this.ownerDocument = t4 || null, this.namespaceURI = s7, this._attributes = {}, "INPUT" === this.tagName && (this.type = "text");
  }
  return R = a6, a6.prototype.type = "DOMElement", a6.prototype.nodeType = 1, a6.prototype.appendChild = function(e9) {
    return e9.parentNode && e9.parentNode.removeChild(e9), this.childNodes.push(e9), e9.parentNode = this, e9;
  }, a6.prototype.replaceChild = function(e9, t4) {
    e9.parentNode && e9.parentNode.removeChild(e9);
    var i7 = this.childNodes.indexOf(t4);
    return t4.parentNode = null, this.childNodes[i7] = e9, e9.parentNode = this, t4;
  }, a6.prototype.removeChild = function(e9) {
    var t4 = this.childNodes.indexOf(e9);
    return this.childNodes.splice(t4, 1), e9.parentNode = null, e9;
  }, a6.prototype.insertBefore = function(e9, t4) {
    e9.parentNode && e9.parentNode.removeChild(e9);
    var i7 = null == t4 ? -1 : this.childNodes.indexOf(t4);
    return i7 > -1 ? this.childNodes.splice(i7, 0, e9) : this.childNodes.push(e9), e9.parentNode = this, e9;
  }, a6.prototype.setAttributeNS = function(e9, t4, i7) {
    var s7 = null, n6 = t4, r5 = t4.indexOf(":");
    (r5 > -1 && (s7 = t4.substr(0, r5), n6 = t4.substr(r5 + 1)), "INPUT" === this.tagName && "type" === t4) ? this.type = i7 : (this._attributes[e9] || (this._attributes[e9] = {}))[n6] = { value: i7, prefix: s7 };
  }, a6.prototype.getAttributeNS = function(e9, t4) {
    var i7 = this._attributes[e9], s7 = i7 && i7[t4] && i7[t4].value;
    return "INPUT" === this.tagName && "type" === t4 ? this.type : "string" != typeof s7 ? null : s7;
  }, a6.prototype.removeAttributeNS = function(e9, t4) {
    var i7 = this._attributes[e9];
    i7 && delete i7[t4];
  }, a6.prototype.hasAttributeNS = function(e9, t4) {
    var i7 = this._attributes[e9];
    return !!i7 && t4 in i7;
  }, a6.prototype.setAttribute = function(e9, t4) {
    return this.setAttributeNS(null, e9, t4);
  }, a6.prototype.getAttribute = function(e9) {
    return this.getAttributeNS(null, e9);
  }, a6.prototype.removeAttribute = function(e9) {
    return this.removeAttributeNS(null, e9);
  }, a6.prototype.hasAttribute = function(e9) {
    return this.hasAttributeNS(null, e9);
  }, a6.prototype.removeEventListener = s6, a6.prototype.addEventListener = i6, a6.prototype.dispatchEvent = t3, a6.prototype.focus = function() {
  }, a6.prototype.toString = function() {
    return n5(this);
  }, a6.prototype.getElementsByClassName = function(t4) {
    var i7 = t4.split(" "), s7 = [];
    return e8(this, function(e9) {
      if (1 === e9.nodeType) {
        var t5 = (e9.className || "").split(" ");
        i7.every(function(e10) {
          return -1 !== t5.indexOf(e10);
        }) && s7.push(e9);
      }
    }), s7;
  }, a6.prototype.getElementsByTagName = function(t4) {
    t4 = t4.toLowerCase();
    var i7 = [];
    return e8(this.childNodes, function(e9) {
      1 !== e9.nodeType || "*" !== t4 && e9.tagName.toLowerCase() !== t4 || i7.push(e9);
    }), i7;
  }, a6.prototype.contains = function(t4) {
    return e8(this, function(e9) {
      return t4 === e9;
    }) || false;
  }, R;
}
function te() {
  if (B) return U;
  B = 1;
  var e8 = ee();
  function t3(e9) {
    if (!(this instanceof t3)) return new t3();
    this.childNodes = [], this.parentNode = null, this.ownerDocument = e9 || null;
  }
  return U = t3, t3.prototype.type = "DocumentFragment", t3.prototype.nodeType = 11, t3.prototype.nodeName = "#document-fragment", t3.prototype.appendChild = e8.prototype.appendChild, t3.prototype.replaceChild = e8.prototype.replaceChild, t3.prototype.removeChild = e8.prototype.removeChild, t3.prototype.toString = function() {
    return this.childNodes.map(function(e9) {
      return String(e9);
    }).join("");
  }, U;
}
function ie() {
  if (q2) return F;
  function e8(e9) {
  }
  return q2 = 1, F = e8, e8.prototype.initEvent = function(e9, t3, i6) {
    this.type = e9, this.bubbles = t3, this.cancelable = i6;
  }, e8.prototype.preventDefault = function() {
  }, F;
}
function se() {
  if ($) return j3;
  $ = 1;
  var e8 = G(), t3 = X(), i6 = K(), s6 = ee(), n5 = te(), r4 = ie(), a6 = Y(), o4 = Q(), l7 = J();
  function h2() {
    if (!(this instanceof h2)) return new h2();
    this.head = this.createElement("head"), this.body = this.createElement("body"), this.documentElement = this.createElement("html"), this.documentElement.appendChild(this.head), this.documentElement.appendChild(this.body), this.childNodes = [this.documentElement], this.nodeType = 9;
  }
  j3 = h2;
  var u5 = h2.prototype;
  return u5.createTextNode = function(e9) {
    return new i6(e9, this);
  }, u5.createElementNS = function(e9, t4) {
    var i7 = null === e9 ? null : String(e9);
    return new s6(t4, this, i7);
  }, u5.createElement = function(e9) {
    return new s6(e9, this);
  }, u5.createDocumentFragment = function() {
    return new n5(this);
  }, u5.createEvent = function(e9) {
    return new r4(e9);
  }, u5.createComment = function(e9) {
    return new t3(e9, this);
  }, u5.getElementById = function(t4) {
    return t4 = String(t4), e8(this.childNodes, function(e9) {
      if (String(e9.id) === t4) return e9;
    }) || null;
  }, u5.getElementsByClassName = s6.prototype.getElementsByClassName, u5.getElementsByTagName = s6.prototype.getElementsByTagName, u5.contains = s6.prototype.contains, u5.removeEventListener = l7, u5.addEventListener = o4, u5.dispatchEvent = a6, j3;
}
function ne() {
  if (V2) return H2;
  V2 = 1;
  var e8 = se();
  return H2 = new e8();
}
function re() {
  if (W) return z2;
  W = 1;
  var e8, t3 = void 0 !== e2 ? e2 : "undefined" != typeof window ? window : {}, i6 = ne();
  return "undefined" != typeof document ? e8 = document : (e8 = t3["__GLOBAL_DOCUMENT_CACHE@4"]) || (e8 = t3["__GLOBAL_DOCUMENT_CACHE@4"] = i6), z2 = e8;
}
var ae = o2(re());
var oe;
var le;
var he;
var ue;
var de;
var ce;
var pe;
var me;
var ge;
var fe;
var ye = { exports: {} };
var _e = { exports: {} };
function ve() {
  return oe || (oe = 1, (function(e8) {
    function t3() {
      return e8.exports = t3 = Object.assign ? Object.assign.bind() : function(e9) {
        for (var t4 = 1; t4 < arguments.length; t4++) {
          var i6 = arguments[t4];
          for (var s6 in i6) ({}).hasOwnProperty.call(i6, s6) && (e9[s6] = i6[s6]);
        }
        return e9;
      }, e8.exports.__esModule = true, e8.exports.default = e8.exports, t3.apply(null, arguments);
    }
    e8.exports = t3, e8.exports.__esModule = true, e8.exports.default = e8.exports;
  })(_e)), _e.exports;
}
function be() {
  if (he) return le;
  he = 1, le = t3;
  var e8 = Object.prototype.toString;
  function t3(t4) {
    if (!t4) return false;
    var i6 = e8.call(t4);
    return "[object Function]" === i6 || "function" == typeof t4 && "[object RegExp]" !== i6 || "undefined" != typeof window && (t4 === window.setTimeout || t4 === window.alert || t4 === window.confirm || t4 === window.prompt);
  }
  return le;
}
function Te() {
  if (de) return ue;
  function e8(e9, i7) {
    var s6 = "undefined" != typeof Symbol && e9[Symbol.iterator] || e9["@@iterator"];
    if (s6) return (s6 = s6.call(e9)).next.bind(s6);
    if (Array.isArray(e9) || (s6 = t3(e9)) || i7) {
      s6 && (e9 = s6);
      var n5 = 0;
      return function() {
        return n5 >= e9.length ? { done: true } : { done: false, value: e9[n5++] };
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function t3(e9, t4) {
    if (e9) {
      if ("string" == typeof e9) return i6(e9, t4);
      var s6 = Object.prototype.toString.call(e9).slice(8, -1);
      return "Object" === s6 && e9.constructor && (s6 = e9.constructor.name), "Map" === s6 || "Set" === s6 ? Array.from(e9) : "Arguments" === s6 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s6) ? i6(e9, t4) : void 0;
    }
  }
  function i6(e9, t4) {
    (null == t4 || t4 > e9.length) && (t4 = e9.length);
    for (var i7 = 0, s6 = new Array(t4); i7 < t4; i7++) s6[i7] = e9[i7];
    return s6;
  }
  return de = 1, ue = (function() {
    function t4() {
      this.typeToInterceptorsMap_ = /* @__PURE__ */ new Map(), this.enabled_ = false;
    }
    var i7 = t4.prototype;
    return i7.getIsEnabled = function() {
      return this.enabled_;
    }, i7.enable = function() {
      this.enabled_ = true;
    }, i7.disable = function() {
      this.enabled_ = false;
    }, i7.reset = function() {
      this.typeToInterceptorsMap_ = /* @__PURE__ */ new Map(), this.enabled_ = false;
    }, i7.addInterceptor = function(e9, t5) {
      this.typeToInterceptorsMap_.has(e9) || this.typeToInterceptorsMap_.set(e9, /* @__PURE__ */ new Set());
      var i8 = this.typeToInterceptorsMap_.get(e9);
      return !i8.has(t5) && (i8.add(t5), true);
    }, i7.removeInterceptor = function(e9, t5) {
      var i8 = this.typeToInterceptorsMap_.get(e9);
      return !(!i8 || !i8.has(t5)) && (i8.delete(t5), true);
    }, i7.clearInterceptorsByType = function(e9) {
      return !!this.typeToInterceptorsMap_.get(e9) && (this.typeToInterceptorsMap_.delete(e9), this.typeToInterceptorsMap_.set(e9, /* @__PURE__ */ new Set()), true);
    }, i7.clear = function() {
      return !!this.typeToInterceptorsMap_.size && (this.typeToInterceptorsMap_ = /* @__PURE__ */ new Map(), true);
    }, i7.getForType = function(e9) {
      return this.typeToInterceptorsMap_.get(e9) || /* @__PURE__ */ new Set();
    }, i7.execute = function(t5, i8) {
      for (var s6, n5 = e8(this.getForType(t5)); !(s6 = n5()).done; ) {
        var r4 = s6.value;
        try {
          i8 = r4(i8);
        } catch (a6) {
        }
      }
      return i8;
    }, t4;
  })();
}
function Se() {
  if (pe) return ce;
  pe = 1;
  var e8 = (function() {
    function e9() {
      this.maxAttempts_ = 1, this.delayFactor_ = 0.1, this.fuzzFactor_ = 0.1, this.initialDelay_ = 1e3, this.enabled_ = false;
    }
    var i6 = e9.prototype;
    return i6.getIsEnabled = function() {
      return this.enabled_;
    }, i6.enable = function() {
      this.enabled_ = true;
    }, i6.disable = function() {
      this.enabled_ = false;
    }, i6.reset = function() {
      this.maxAttempts_ = 1, this.delayFactor_ = 0.1, this.fuzzFactor_ = 0.1, this.initialDelay_ = 1e3, this.enabled_ = false;
    }, i6.getMaxAttempts = function() {
      return this.maxAttempts_;
    }, i6.setMaxAttempts = function(e10) {
      this.maxAttempts_ = e10;
    }, i6.getDelayFactor = function() {
      return this.delayFactor_;
    }, i6.setDelayFactor = function(e10) {
      this.delayFactor_ = e10;
    }, i6.getFuzzFactor = function() {
      return this.fuzzFactor_;
    }, i6.setFuzzFactor = function(e10) {
      this.fuzzFactor_ = e10;
    }, i6.getInitialDelay = function() {
      return this.initialDelay_;
    }, i6.setInitialDelay = function(e10) {
      this.initialDelay_ = e10;
    }, i6.createRetry = function(e10) {
      var i7 = void 0 === e10 ? {} : e10, s6 = i7.maxAttempts, n5 = i7.delayFactor, r4 = i7.fuzzFactor, a6 = i7.initialDelay;
      return new t3({ maxAttempts: s6 || this.maxAttempts_, delayFactor: n5 || this.delayFactor_, fuzzFactor: r4 || this.fuzzFactor_, initialDelay: a6 || this.initialDelay_ });
    }, e9;
  })(), t3 = (function() {
    function e9(e10) {
      this.maxAttempts_ = e10.maxAttempts, this.delayFactor_ = e10.delayFactor, this.fuzzFactor_ = e10.fuzzFactor, this.currentDelay_ = e10.initialDelay, this.currentAttempt_ = 1;
    }
    var t4 = e9.prototype;
    return t4.moveToNextAttempt = function() {
      this.currentAttempt_++;
      var e10 = this.currentDelay_ * this.delayFactor_;
      this.currentDelay_ = this.currentDelay_ + e10;
    }, t4.shouldRetry = function() {
      return this.currentAttempt_ < this.maxAttempts_;
    }, t4.getCurrentDelay = function() {
      return this.currentDelay_;
    }, t4.getCurrentMinPossibleDelay = function() {
      return (1 - this.fuzzFactor_) * this.currentDelay_;
    }, t4.getCurrentMaxPossibleDelay = function() {
      return (1 + this.fuzzFactor_) * this.currentDelay_;
    }, t4.getCurrentFuzzedDelay = function() {
      var e10 = this.getCurrentMinPossibleDelay(), t5 = this.getCurrentMaxPossibleDelay();
      return e10 + Math.random() * (t5 - e10);
    }, e9;
  })();
  return ce = e8;
}
function Ee() {
  if (ge) return me;
  ge = 1;
  var e8 = v2();
  function t3(e9) {
    return void 0 === e9 && (e9 = ""), e9.toLowerCase().split(";").reduce(function(e10, t4) {
      var i6 = t4.split("="), s6 = i6[0], n5 = i6[1];
      return "charset" === s6.trim() ? n5.trim() : e10;
    }, "utf-8");
  }
  return me = function(i6, s6) {
    return void 0 === s6 && (s6 = false), function(n5, r4, a6) {
      if (n5) i6(n5);
      else if (r4.statusCode >= 400 && r4.statusCode <= 599) {
        var o4 = a6;
        if (s6) if (e8.TextDecoder) {
          var l7 = t3(r4.headers && r4.headers["content-type"]);
          try {
            o4 = new TextDecoder(l7).decode(a6);
          } catch (h2) {
          }
        } else o4 = String.fromCharCode.apply(null, new Uint8Array(a6));
        i6({ cause: o4 });
      } else i6(null, a6);
    };
  };
}
function we() {
  if (fe) return ye.exports;
  fe = 1;
  var e8 = v2(), t3 = ve(), i6 = be(), s6 = Te(), n5 = Se();
  h2.httpHandler = Ee(), h2.requestInterceptorsStorage = new s6(), h2.responseInterceptorsStorage = new s6(), h2.retryManager = new n5();
  var r4 = function(e9) {
    var t4 = {};
    return e9 ? (e9.trim().split("\n").forEach(function(e10) {
      var i7 = e10.indexOf(":"), s7 = e10.slice(0, i7).trim().toLowerCase(), n6 = e10.slice(i7 + 1).trim();
      void 0 === t4[s7] ? t4[s7] = n6 : Array.isArray(t4[s7]) ? t4[s7].push(n6) : t4[s7] = [t4[s7], n6];
    }), t4) : t4;
  };
  function a6(e9, t4) {
    for (var i7 = 0; i7 < e9.length; i7++) t4(e9[i7]);
  }
  function o4(e9) {
    for (var t4 in e9) if (e9.hasOwnProperty(t4)) return false;
    return true;
  }
  function l7(e9, s7, n6) {
    var r5 = e9;
    return i6(s7) ? (n6 = s7, "string" == typeof e9 && (r5 = { uri: e9 })) : r5 = t3({}, s7, { uri: e9 }), r5.callback = n6, r5;
  }
  function h2(e9, t4, i7) {
    return u5(t4 = l7(e9, t4, i7));
  }
  function u5(e9) {
    if (void 0 === e9.callback) throw new Error("callback argument missing");
    if (e9.requestType && h2.requestInterceptorsStorage.getIsEnabled()) {
      var t4 = { uri: e9.uri || e9.url, headers: e9.headers || {}, body: e9.body, metadata: e9.metadata || {}, retry: e9.retry, timeout: e9.timeout }, i7 = h2.requestInterceptorsStorage.execute(e9.requestType, t4);
      e9.uri = i7.uri, e9.headers = i7.headers, e9.body = i7.body, e9.metadata = i7.metadata, e9.retry = i7.retry, e9.timeout = i7.timeout;
    }
    var s7 = false, n6 = function(t5, i8, n7) {
      s7 || (s7 = true, e9.callback(t5, i8, n7));
    };
    function a7() {
      4 !== f4.readyState || h2.responseInterceptorsStorage.getIsEnabled() || setTimeout(p6, 0);
    }
    function l8() {
      var e10 = void 0;
      if (e10 = f4.response ? f4.response : f4.responseText || d2(f4), E3) try {
        e10 = JSON.parse(e10);
      } catch (t5) {
      }
      return e10;
    }
    function c7(t5) {
      if (clearTimeout(y3), clearTimeout(e9.retryTimeout), t5 instanceof Error || (t5 = new Error("" + (t5 || "Unknown XMLHttpRequest Error"))), t5.statusCode = 0, g2 || !h2.retryManager.getIsEnabled() || !e9.retry || !e9.retry.shouldRetry()) {
        if (e9.requestType && h2.responseInterceptorsStorage.getIsEnabled()) {
          var i8 = { headers: w4.headers || {}, body: w4.body, responseUrl: f4.responseURL, responseType: f4.responseType }, s8 = h2.responseInterceptorsStorage.execute(e9.requestType, i8);
          w4.body = s8.body, w4.headers = s8.headers;
        }
        return n6(t5, w4);
      }
      e9.retryTimeout = setTimeout(function() {
        e9.retry.moveToNextAttempt(), e9.xhr = f4, u5(e9);
      }, e9.retry.getCurrentFuzzedDelay());
    }
    function p6() {
      if (!g2) {
        var t5;
        clearTimeout(y3), clearTimeout(e9.retryTimeout), t5 = e9.useXDR && void 0 === f4.status ? 200 : 1223 === f4.status ? 204 : f4.status;
        var i8 = w4, s8 = null;
        if (0 !== t5 ? (i8 = { body: l8(), statusCode: t5, method: v3, headers: {}, url: _3, rawRequest: f4 }, f4.getAllResponseHeaders && (i8.headers = r4(f4.getAllResponseHeaders()))) : s8 = new Error("Internal XMLHttpRequest Error"), e9.requestType && h2.responseInterceptorsStorage.getIsEnabled()) {
          var a8 = { headers: i8.headers || {}, body: i8.body, responseUrl: f4.responseURL, responseType: f4.responseType }, o5 = h2.responseInterceptorsStorage.execute(e9.requestType, a8);
          i8.body = o5.body, i8.headers = o5.headers;
        }
        return n6(s8, i8, i8.body);
      }
    }
    var m7, g2, f4 = e9.xhr || null;
    f4 || (f4 = e9.cors || e9.useXDR ? new h2.XDomainRequest() : new h2.XMLHttpRequest());
    var y3, _3 = f4.url = e9.uri || e9.url, v3 = f4.method = e9.method || "GET", b5 = e9.body || e9.data, T2 = f4.headers = e9.headers || {}, S3 = !!e9.sync, E3 = false, w4 = { body: void 0, headers: {}, statusCode: 0, method: v3, url: _3, rawRequest: f4 };
    if ("json" in e9 && false !== e9.json && (E3 = true, T2.accept || T2.Accept || (T2.Accept = "application/json"), "GET" !== v3 && "HEAD" !== v3 && (T2["content-type"] || T2["Content-Type"] || (T2["Content-Type"] = "application/json"), b5 = JSON.stringify(true === e9.json ? b5 : e9.json))), f4.onreadystatechange = a7, f4.onload = p6, f4.onerror = c7, f4.onprogress = function() {
    }, f4.onabort = function() {
      g2 = true, clearTimeout(e9.retryTimeout);
    }, f4.ontimeout = c7, f4.open(v3, _3, !S3, e9.username, e9.password), S3 || (f4.withCredentials = !!e9.withCredentials), !S3 && e9.timeout > 0 && (y3 = setTimeout(function() {
      if (!g2) {
        g2 = true, f4.abort("timeout");
        var e10 = new Error("XMLHttpRequest timeout");
        e10.code = "ETIMEDOUT", c7(e10);
      }
    }, e9.timeout)), f4.setRequestHeader) for (m7 in T2) T2.hasOwnProperty(m7) && f4.setRequestHeader(m7, T2[m7]);
    else if (e9.headers && !o4(e9.headers)) throw new Error("Headers cannot be set on an XDomainRequest object");
    return "responseType" in e9 && (f4.responseType = e9.responseType), "beforeSend" in e9 && "function" == typeof e9.beforeSend && e9.beforeSend(f4), f4.send(b5 || null), f4;
  }
  function d2(e9) {
    try {
      if ("document" === e9.responseType) return e9.responseXML;
      var t4 = e9.responseXML && "parsererror" === e9.responseXML.documentElement.nodeName;
      if ("" === e9.responseType && !t4) return e9.responseXML;
    } catch (i7) {
    }
    return null;
  }
  function c6() {
  }
  return ye.exports = h2, ye.exports.default = h2, h2.XMLHttpRequest = e8.XMLHttpRequest || c6, h2.XDomainRequest = "withCredentials" in new h2.XMLHttpRequest() ? h2.XMLHttpRequest : e8.XDomainRequest, a6(["get", "put", "post", "patch", "head", "delete"], function(e9) {
    h2["delete" === e9 ? "del" : e9] = function(t4, i7, s7) {
      return (i7 = l7(t4, i7, s7)).method = e9.toUpperCase(), u5(i7);
    };
  }), ye.exports;
}
var Ce = o2(we());
var ke;
var Ie;
var xe;
var Ae;
var De;
var Pe;
var Le;
var Oe = { exports: {} };
function Ne() {
  if (Ie) return ke;
  Ie = 1;
  var e8 = re(), t3 = Object.create || /* @__PURE__ */ (function() {
    function e9() {
    }
    return function(t4) {
      if (1 !== arguments.length) throw new Error("Object.create shim only accepts one parameter.");
      return e9.prototype = t4, new e9();
    };
  })();
  function i6(e9, t4) {
    this.name = "ParsingError", this.code = e9.code, this.message = t4 || e9.message;
  }
  function s6(e9) {
    function t4(e10, t5, i8, s7) {
      return 3600 * (0 | e10) + 60 * (0 | t5) + (0 | i8) + (0 | s7) / 1e3;
    }
    var i7 = e9.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);
    return i7 ? i7[3] ? t4(i7[1], i7[2], i7[3].replace(":", ""), i7[4]) : i7[1] > 59 ? t4(i7[1], i7[2], 0, i7[4]) : t4(0, i7[1], i7[2], i7[4]) : null;
  }
  function n5() {
    this.values = t3(null);
  }
  function r4(e9, t4, i7, s7) {
    var n6 = s7 ? e9.split(s7) : [e9];
    for (var r5 in n6) if ("string" == typeof n6[r5]) {
      var a7 = n6[r5].split(i7);
      if (2 === a7.length) t4(a7[0].trim(), a7[1].trim());
    }
  }
  function a6(e9, t4, a7) {
    var o5 = e9;
    function l8() {
      var t5 = s6(e9);
      if (null === t5) throw new i6(i6.Errors.BadTimeStamp, "Malformed timestamp: " + o5);
      return e9 = e9.replace(/^[^\sa-zA-Z-]+/, ""), t5;
    }
    function h3(e10, t5) {
      var i7 = new n5();
      r4(e10, function(e11, t6) {
        switch (e11) {
          case "region":
            for (var s7 = a7.length - 1; s7 >= 0; s7--) if (a7[s7].id === t6) {
              i7.set(e11, a7[s7].region);
              break;
            }
            break;
          case "vertical":
            i7.alt(e11, t6, ["rl", "lr"]);
            break;
          case "line":
            var n6 = t6.split(","), r5 = n6[0];
            i7.integer(e11, r5), i7.percent(e11, r5) && i7.set("snapToLines", false), i7.alt(e11, r5, ["auto"]), 2 === n6.length && i7.alt("lineAlign", n6[1], ["start", "center", "end"]);
            break;
          case "position":
            n6 = t6.split(","), i7.percent(e11, n6[0]), 2 === n6.length && i7.alt("positionAlign", n6[1], ["start", "center", "end"]);
            break;
          case "size":
            i7.percent(e11, t6);
            break;
          case "align":
            i7.alt(e11, t6, ["start", "center", "end", "left", "right"]);
        }
      }, /:/, /\s/), t5.region = i7.get("region", null), t5.vertical = i7.get("vertical", "");
      try {
        t5.line = i7.get("line", "auto");
      } catch (s7) {
      }
      t5.lineAlign = i7.get("lineAlign", "start"), t5.snapToLines = i7.get("snapToLines", true), t5.size = i7.get("size", 100);
      try {
        t5.align = i7.get("align", "center");
      } catch (s7) {
        t5.align = i7.get("align", "middle");
      }
      try {
        t5.position = i7.get("position", "auto");
      } catch (s7) {
        t5.position = i7.get("position", { start: 0, left: 0, center: 50, middle: 50, end: 100, right: 100 }, t5.align);
      }
      t5.positionAlign = i7.get("positionAlign", { start: "start", left: "start", center: "center", middle: "center", end: "end", right: "end" }, t5.align);
    }
    function u6() {
      e9 = e9.replace(/^\s+/, "");
    }
    if (u6(), t4.startTime = l8(), u6(), "-->" !== e9.substr(0, 3)) throw new i6(i6.Errors.BadTimeStamp, "Malformed time stamp (time stamps must be separated by '-->'): " + o5);
    e9 = e9.substr(3), u6(), t4.endTime = l8(), u6(), h3(e9, t4);
  }
  i6.prototype = t3(Error.prototype), i6.prototype.constructor = i6, i6.Errors = { BadSignature: { code: 0, message: "Malformed WebVTT signature." }, BadTimeStamp: { code: 1, message: "Malformed time stamp." } }, n5.prototype = { set: function(e9, t4) {
    this.get(e9) || "" === t4 || (this.values[e9] = t4);
  }, get: function(e9, t4, i7) {
    return i7 ? this.has(e9) ? this.values[e9] : t4[i7] : this.has(e9) ? this.values[e9] : t4;
  }, has: function(e9) {
    return e9 in this.values;
  }, alt: function(e9, t4, i7) {
    for (var s7 = 0; s7 < i7.length; ++s7) if (t4 === i7[s7]) {
      this.set(e9, t4);
      break;
    }
  }, integer: function(e9, t4) {
    /^-?\d+$/.test(t4) && this.set(e9, parseInt(t4, 10));
  }, percent: function(e9, t4) {
    return !!(t4.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (t4 = parseFloat(t4)) >= 0 && t4 <= 100) && (this.set(e9, t4), true);
  } };
  var o4 = e8.createElement && e8.createElement("textarea"), l7 = { c: "span", i: "i", b: "b", u: "u", ruby: "ruby", rt: "rt", v: "span", lang: "span" }, h2 = { white: "rgba(255,255,255,1)", lime: "rgba(0,255,0,1)", cyan: "rgba(0,255,255,1)", red: "rgba(255,0,0,1)", yellow: "rgba(255,255,0,1)", magenta: "rgba(255,0,255,1)", blue: "rgba(0,0,255,1)", black: "rgba(0,0,0,1)" }, u5 = { v: "title", lang: "lang" }, d2 = { rt: "ruby" };
  function c6(e9, t4) {
    function i7() {
      if (!t4) return null;
      function e10(e11) {
        return t4 = t4.substr(e11.length), e11;
      }
      var i8 = t4.match(/^([^<]*)(<[^>]*>?)?/);
      return e10(i8[1] ? i8[1] : i8[2]);
    }
    function n6(e10) {
      return o4.innerHTML = e10, e10 = o4.textContent, o4.textContent = "", e10;
    }
    function r5(e10, t5) {
      return !d2[t5.localName] || d2[t5.localName] === e10.localName;
    }
    function a7(t5, i8) {
      var s7 = l7[t5];
      if (!s7) return null;
      var n7 = e9.document.createElement(s7), r6 = u5[t5];
      return r6 && i8 && (n7[r6] = i8.trim()), n7;
    }
    for (var c7, p7 = e9.document.createElement("div"), m8 = p7, g3 = []; null !== (c7 = i7()); ) if ("<" !== c7[0]) m8.appendChild(e9.document.createTextNode(n6(c7)));
    else {
      if ("/" === c7[1]) {
        g3.length && g3[g3.length - 1] === c7.substr(2).replace(">", "") && (g3.pop(), m8 = m8.parentNode);
        continue;
      }
      var f5, y4 = s6(c7.substr(1, c7.length - 2));
      if (y4) {
        f5 = e9.document.createProcessingInstruction("timestamp", y4), m8.appendChild(f5);
        continue;
      }
      var _4 = c7.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
      if (!_4) continue;
      if (!(f5 = a7(_4[1], _4[3]))) continue;
      if (!r5(m8, f5)) continue;
      if (_4[2]) {
        var v4 = _4[2].split(".");
        v4.forEach(function(e10) {
          var t5 = /^bg_/.test(e10), i8 = t5 ? e10.slice(3) : e10;
          if (h2.hasOwnProperty(i8)) {
            var s7 = t5 ? "background-color" : "color", n7 = h2[i8];
            f5.style[s7] = n7;
          }
        }), f5.className = v4.join(" ");
      }
      g3.push(_4[1]), m8.appendChild(f5), m8 = f5;
    }
    return p7;
  }
  var p6 = [[1470, 1470], [1472, 1472], [1475, 1475], [1478, 1478], [1488, 1514], [1520, 1524], [1544, 1544], [1547, 1547], [1549, 1549], [1563, 1563], [1566, 1610], [1645, 1647], [1649, 1749], [1765, 1766], [1774, 1775], [1786, 1805], [1807, 1808], [1810, 1839], [1869, 1957], [1969, 1969], [1984, 2026], [2036, 2037], [2042, 2042], [2048, 2069], [2074, 2074], [2084, 2084], [2088, 2088], [2096, 2110], [2112, 2136], [2142, 2142], [2208, 2208], [2210, 2220], [8207, 8207], [64285, 64285], [64287, 64296], [64298, 64310], [64312, 64316], [64318, 64318], [64320, 64321], [64323, 64324], [64326, 64449], [64467, 64829], [64848, 64911], [64914, 64967], [65008, 65020], [65136, 65140], [65142, 65276], [67584, 67589], [67592, 67592], [67594, 67637], [67639, 67640], [67644, 67644], [67647, 67669], [67671, 67679], [67840, 67867], [67872, 67897], [67903, 67903], [67968, 68023], [68030, 68031], [68096, 68096], [68112, 68115], [68117, 68119], [68121, 68147], [68160, 68167], [68176, 68184], [68192, 68223], [68352, 68405], [68416, 68437], [68440, 68466], [68472, 68479], [68608, 68680], [126464, 126467], [126469, 126495], [126497, 126498], [126500, 126500], [126503, 126503], [126505, 126514], [126516, 126519], [126521, 126521], [126523, 126523], [126530, 126530], [126535, 126535], [126537, 126537], [126539, 126539], [126541, 126543], [126545, 126546], [126548, 126548], [126551, 126551], [126553, 126553], [126555, 126555], [126557, 126557], [126559, 126559], [126561, 126562], [126564, 126564], [126567, 126570], [126572, 126578], [126580, 126583], [126585, 126588], [126590, 126590], [126592, 126601], [126603, 126619], [126625, 126627], [126629, 126633], [126635, 126651], [1114109, 1114109]];
  function m7(e9) {
    for (var t4 = 0; t4 < p6.length; t4++) {
      var i7 = p6[t4];
      if (e9 >= i7[0] && e9 <= i7[1]) return true;
    }
    return false;
  }
  function g2(e9) {
    var t4 = [], i7 = "";
    if (!e9 || !e9.childNodes) return "ltr";
    function s7(e10, t5) {
      for (var i8 = t5.childNodes.length - 1; i8 >= 0; i8--) e10.push(t5.childNodes[i8]);
    }
    function n6(e10) {
      if (!e10 || !e10.length) return null;
      var t5 = e10.pop(), i8 = t5.textContent || t5.innerText;
      if (i8) {
        var r6 = i8.match(/^.*(\n|\r)/);
        return r6 ? (e10.length = 0, r6[0]) : i8;
      }
      return "ruby" === t5.tagName ? n6(e10) : t5.childNodes ? (s7(e10, t5), n6(e10)) : void 0;
    }
    for (s7(t4, e9); i7 = n6(t4); ) for (var r5 = 0; r5 < i7.length; r5++) if (m7(i7.charCodeAt(r5))) return "rtl";
    return "ltr";
  }
  function f4(e9) {
    if ("number" == typeof e9.line && (e9.snapToLines || e9.line >= 0 && e9.line <= 100)) return e9.line;
    if (!e9.track || !e9.track.textTrackList || !e9.track.textTrackList.mediaElement) return -1;
    for (var t4 = e9.track, i7 = t4.textTrackList, s7 = 0, n6 = 0; n6 < i7.length && i7[n6] !== t4; n6++) "showing" === i7[n6].mode && s7++;
    return -1 * ++s7;
  }
  function y3() {
  }
  function _3(e9, t4, i7) {
    y3.call(this), this.cue = t4, this.cueDiv = c6(e9, t4.text);
    var s7 = { color: "rgba(255, 255, 255, 1)", backgroundColor: "rgba(0, 0, 0, 0.8)", position: "relative", left: 0, right: 0, top: 0, bottom: 0, display: "inline", writingMode: "" === t4.vertical ? "horizontal-tb" : "lr" === t4.vertical ? "vertical-lr" : "vertical-rl", unicodeBidi: "plaintext" };
    this.applyStyles(s7, this.cueDiv), this.div = e9.document.createElement("div"), s7 = { direction: g2(this.cueDiv), writingMode: "" === t4.vertical ? "horizontal-tb" : "lr" === t4.vertical ? "vertical-lr" : "vertical-rl", unicodeBidi: "plaintext", textAlign: "middle" === t4.align ? "center" : t4.align, font: i7.font, whiteSpace: "pre-line", position: "absolute" }, this.applyStyles(s7), this.div.appendChild(this.cueDiv);
    var n6 = 0;
    switch (t4.positionAlign) {
      case "start":
      case "line-left":
        n6 = t4.position;
        break;
      case "center":
        n6 = t4.position - t4.size / 2;
        break;
      case "end":
      case "line-right":
        n6 = t4.position - t4.size;
    }
    "" === t4.vertical ? this.applyStyles({ left: this.formatStyle(n6, "%"), width: this.formatStyle(t4.size, "%") }) : this.applyStyles({ top: this.formatStyle(n6, "%"), height: this.formatStyle(t4.size, "%") }), this.move = function(e10) {
      this.applyStyles({ top: this.formatStyle(e10.top, "px"), bottom: this.formatStyle(e10.bottom, "px"), left: this.formatStyle(e10.left, "px"), right: this.formatStyle(e10.right, "px"), height: this.formatStyle(e10.height, "px"), width: this.formatStyle(e10.width, "px") });
    };
  }
  function v3(e9) {
    var t4, i7, s7, n6;
    if (e9.div) {
      i7 = e9.div.offsetHeight, s7 = e9.div.offsetWidth, n6 = e9.div.offsetTop;
      var r5 = (r5 = e9.div.childNodes) && (r5 = r5[0]) && r5.getClientRects && r5.getClientRects();
      e9 = e9.div.getBoundingClientRect(), t4 = r5 ? Math.max(r5[0] && r5[0].height || 0, e9.height / r5.length) : 0;
    }
    this.left = e9.left, this.right = e9.right, this.top = e9.top || n6, this.height = e9.height || i7, this.bottom = e9.bottom || n6 + (e9.height || i7), this.width = e9.width || s7, this.lineHeight = void 0 !== t4 ? t4 : e9.lineHeight;
  }
  function b5(e9, t4, i7, s7) {
    function n6(e10, t5) {
      for (var n7, r6 = new v3(e10), a8 = 1, o6 = 0; o6 < t5.length; o6++) {
        for (; e10.overlapsOppositeAxis(i7, t5[o6]) || e10.within(i7) && e10.overlapsAny(s7); ) e10.move(t5[o6]);
        if (e10.within(i7)) return e10;
        var l9 = e10.intersectPercentage(i7);
        a8 > l9 && (n7 = new v3(e10), a8 = l9), e10 = new v3(r6);
      }
      return n7 || r6;
    }
    var r5 = new v3(t4), a7 = t4.cue, o5 = f4(a7), l8 = [];
    if (a7.snapToLines) {
      var h3;
      switch (a7.vertical) {
        case "":
          l8 = ["+y", "-y"], h3 = "height";
          break;
        case "rl":
          l8 = ["+x", "-x"], h3 = "width";
          break;
        case "lr":
          l8 = ["-x", "+x"], h3 = "width";
      }
      var u6 = r5.lineHeight, d3 = u6 * Math.round(o5), c7 = i7[h3] + u6, p7 = l8[0];
      Math.abs(d3) > c7 && (d3 = d3 < 0 ? -1 : 1, d3 *= Math.ceil(c7 / u6) * u6), o5 < 0 && (d3 += "" === a7.vertical ? i7.height : i7.width, l8 = l8.reverse()), r5.move(p7, d3);
    } else {
      var m8 = r5.lineHeight / i7.height * 100;
      switch (a7.lineAlign) {
        case "center":
          o5 -= m8 / 2;
          break;
        case "end":
          o5 -= m8;
      }
      switch (a7.vertical) {
        case "":
          t4.applyStyles({ top: t4.formatStyle(o5, "%") });
          break;
        case "rl":
          t4.applyStyles({ left: t4.formatStyle(o5, "%") });
          break;
        case "lr":
          t4.applyStyles({ right: t4.formatStyle(o5, "%") });
      }
      l8 = ["+y", "-x", "+x", "-y"], r5 = new v3(t4);
    }
    var g3 = n6(r5, l8);
    t4.move(g3.toCSSCompatValues(i7));
  }
  function T2() {
  }
  y3.prototype.applyStyles = function(e9, t4) {
    for (var i7 in t4 = t4 || this.div, e9) e9.hasOwnProperty(i7) && (t4.style[i7] = e9[i7]);
  }, y3.prototype.formatStyle = function(e9, t4) {
    return 0 === e9 ? 0 : e9 + t4;
  }, _3.prototype = t3(y3.prototype), _3.prototype.constructor = _3, v3.prototype.move = function(e9, t4) {
    switch (t4 = void 0 !== t4 ? t4 : this.lineHeight, e9) {
      case "+x":
        this.left += t4, this.right += t4;
        break;
      case "-x":
        this.left -= t4, this.right -= t4;
        break;
      case "+y":
        this.top += t4, this.bottom += t4;
        break;
      case "-y":
        this.top -= t4, this.bottom -= t4;
    }
  }, v3.prototype.overlaps = function(e9) {
    return this.left < e9.right && this.right > e9.left && this.top < e9.bottom && this.bottom > e9.top;
  }, v3.prototype.overlapsAny = function(e9) {
    for (var t4 = 0; t4 < e9.length; t4++) if (this.overlaps(e9[t4])) return true;
    return false;
  }, v3.prototype.within = function(e9) {
    return this.top >= e9.top && this.bottom <= e9.bottom && this.left >= e9.left && this.right <= e9.right;
  }, v3.prototype.overlapsOppositeAxis = function(e9, t4) {
    switch (t4) {
      case "+x":
        return this.left < e9.left;
      case "-x":
        return this.right > e9.right;
      case "+y":
        return this.top < e9.top;
      case "-y":
        return this.bottom > e9.bottom;
    }
  }, v3.prototype.intersectPercentage = function(e9) {
    return Math.max(0, Math.min(this.right, e9.right) - Math.max(this.left, e9.left)) * Math.max(0, Math.min(this.bottom, e9.bottom) - Math.max(this.top, e9.top)) / (this.height * this.width);
  }, v3.prototype.toCSSCompatValues = function(e9) {
    return { top: this.top - e9.top, bottom: e9.bottom - this.bottom, left: this.left - e9.left, right: e9.right - this.right, height: this.height, width: this.width };
  }, v3.getSimpleBoxPosition = function(e9) {
    var t4 = e9.div ? e9.div.offsetHeight : e9.tagName ? e9.offsetHeight : 0, i7 = e9.div ? e9.div.offsetWidth : e9.tagName ? e9.offsetWidth : 0, s7 = e9.div ? e9.div.offsetTop : e9.tagName ? e9.offsetTop : 0;
    return { left: (e9 = e9.div ? e9.div.getBoundingClientRect() : e9.tagName ? e9.getBoundingClientRect() : e9).left, right: e9.right, top: e9.top || s7, height: e9.height || t4, bottom: e9.bottom || s7 + (e9.height || t4), width: e9.width || i7 };
  }, T2.StringDecoder = function() {
    return { decode: function(e9) {
      if (!e9) return "";
      if ("string" != typeof e9) throw new Error("Error - expected string data.");
      return decodeURIComponent(encodeURIComponent(e9));
    } };
  }, T2.convertCueToDOMTree = function(e9, t4) {
    return e9 && t4 ? c6(e9, t4) : null;
  };
  var S3 = 0.05, E3 = "sans-serif", w4 = "1.5%";
  return T2.processCues = function(e9, t4, i7) {
    if (!e9 || !t4 || !i7) return null;
    for (; i7.firstChild; ) i7.removeChild(i7.firstChild);
    var s7 = e9.document.createElement("div");
    function n6(e10) {
      for (var t5 = 0; t5 < e10.length; t5++) if (e10[t5].hasBeenReset || !e10[t5].displayState) return true;
      return false;
    }
    if (s7.style.position = "absolute", s7.style.left = "0", s7.style.right = "0", s7.style.top = "0", s7.style.bottom = "0", s7.style.margin = w4, i7.appendChild(s7), n6(t4)) {
      var r5 = [], a7 = v3.getSimpleBoxPosition(s7), o5 = { font: Math.round(a7.height * S3 * 100) / 100 + "px " + E3 };
      !(function() {
        for (var i8, n7, l9 = 0; l9 < t4.length; l9++) n7 = t4[l9], i8 = new _3(e9, n7, o5), s7.appendChild(i8.div), b5(e9, i8, a7, r5), n7.displayState = i8.div, r5.push(v3.getSimpleBoxPosition(i8));
      })();
    } else for (var l8 = 0; l8 < t4.length; l8++) s7.appendChild(t4[l8].displayState);
  }, T2.Parser = function(e9, t4, i7) {
    i7 || (i7 = t4, t4 = {}), t4 || (t4 = {}), this.window = e9, this.vttjs = t4, this.state = "INITIAL", this.buffer = "", this.decoder = i7 || new TextDecoder("utf8"), this.regionList = [];
  }, T2.Parser.prototype = { reportOrThrowError: function(e9) {
    if (!(e9 instanceof i6)) throw e9;
    this.onparsingerror && this.onparsingerror(e9);
  }, parse: function(e9) {
    var t4 = this;
    function o5() {
      for (var e10 = t4.buffer, i7 = 0; i7 < e10.length && "\r" !== e10[i7] && "\n" !== e10[i7]; ) ++i7;
      var s7 = e10.substr(0, i7);
      return "\r" === e10[i7] && ++i7, "\n" === e10[i7] && ++i7, t4.buffer = e10.substr(i7), s7;
    }
    function l8(e10) {
      var i7 = new n5();
      if (r4(e10, function(e11, t5) {
        switch (e11) {
          case "id":
            i7.set(e11, t5);
            break;
          case "width":
            i7.percent(e11, t5);
            break;
          case "lines":
            i7.integer(e11, t5);
            break;
          case "regionanchor":
          case "viewportanchor":
            var s8 = t5.split(",");
            if (2 !== s8.length) break;
            var r5 = new n5();
            if (r5.percent("x", s8[0]), r5.percent("y", s8[1]), !r5.has("x") || !r5.has("y")) break;
            i7.set(e11 + "X", r5.get("x")), i7.set(e11 + "Y", r5.get("y"));
            break;
          case "scroll":
            i7.alt(e11, t5, ["up"]);
        }
      }, /=/, /\s/), i7.has("id")) {
        var s7 = new (t4.vttjs.VTTRegion || t4.window.VTTRegion)();
        s7.width = i7.get("width", 100), s7.lines = i7.get("lines", 3), s7.regionAnchorX = i7.get("regionanchorX", 0), s7.regionAnchorY = i7.get("regionanchorY", 100), s7.viewportAnchorX = i7.get("viewportanchorX", 0), s7.viewportAnchorY = i7.get("viewportanchorY", 100), s7.scroll = i7.get("scroll", ""), t4.onregion && t4.onregion(s7), t4.regionList.push({ id: i7.get("id"), region: s7 });
      }
    }
    function h3(e10) {
      var i7 = new n5();
      r4(e10, function(e11, t5) {
        switch (e11) {
          case "MPEGT":
            i7.integer(e11 + "S", t5);
            break;
          case "LOCA":
            i7.set(e11 + "L", s6(t5));
        }
      }, /[^\d]:/, /,/), t4.ontimestampmap && t4.ontimestampmap({ MPEGTS: i7.get("MPEGTS"), LOCAL: i7.get("LOCAL") });
    }
    function u6(e10) {
      e10.match(/X-TIMESTAMP-MAP/) ? r4(e10, function(e11, t5) {
        if ("X-TIMESTAMP-MAP" === e11) h3(t5);
      }, /=/) : r4(e10, function(e11, t5) {
        if ("Region" === e11) l8(t5);
      }, /:/);
    }
    e9 && (t4.buffer += t4.decoder.decode(e9, { stream: true }));
    try {
      var d3;
      if ("INITIAL" === t4.state) {
        if (!/\r\n|\n/.test(t4.buffer)) return this;
        var c7 = (d3 = o5()).match(/^WEBVTT([ \t].*)?$/);
        if (!c7 || !c7[0]) throw new i6(i6.Errors.BadSignature);
        t4.state = "HEADER";
      }
      for (var p7 = false; t4.buffer; ) {
        if (!/\r\n|\n/.test(t4.buffer)) return this;
        switch (p7 ? p7 = false : d3 = o5(), t4.state) {
          case "HEADER":
            /:/.test(d3) ? u6(d3) : d3 || (t4.state = "ID");
            continue;
          case "NOTE":
            d3 || (t4.state = "ID");
            continue;
          case "ID":
            if (/^NOTE($|[ \t])/.test(d3)) {
              t4.state = "NOTE";
              break;
            }
            if (!d3) continue;
            t4.cue = new (t4.vttjs.VTTCue || t4.window.VTTCue)(0, 0, "");
            try {
              t4.cue.align = "center";
            } catch (g3) {
              t4.cue.align = "middle";
            }
            if (t4.state = "CUE", -1 === d3.indexOf("-->")) {
              t4.cue.id = d3;
              continue;
            }
          case "CUE":
            try {
              a6(d3, t4.cue, t4.regionList);
            } catch (g3) {
              t4.reportOrThrowError(g3), t4.cue = null, t4.state = "BADCUE";
              continue;
            }
            t4.state = "CUETEXT";
            continue;
          case "CUETEXT":
            var m8 = -1 !== d3.indexOf("-->");
            if (!d3 || m8 && (p7 = true)) {
              t4.oncue && t4.oncue(t4.cue), t4.cue = null, t4.state = "ID";
              continue;
            }
            t4.cue.text && (t4.cue.text += "\n"), t4.cue.text += d3.replace(/\u2028/g, "\n").replace(/u2029/g, "\n");
            continue;
          case "BADCUE":
            d3 || (t4.state = "ID");
            continue;
        }
      }
    } catch (g3) {
      t4.reportOrThrowError(g3), "CUETEXT" === t4.state && t4.cue && t4.oncue && t4.oncue(t4.cue), t4.cue = null, t4.state = "INITIAL" === t4.state ? "BADWEBVTT" : "BADCUE";
    }
    return this;
  }, flush: function() {
    var e9 = this;
    try {
      if (e9.buffer += e9.decoder.decode(), (e9.cue || "HEADER" === e9.state) && (e9.buffer += "\n\n", e9.parse()), "INITIAL" === e9.state) throw new i6(i6.Errors.BadSignature);
    } catch (t4) {
      e9.reportOrThrowError(t4);
    }
    return e9.onflush && e9.onflush(), this;
  } }, ke = T2;
}
function Re() {
  if (Ae) return xe;
  Ae = 1;
  var e8 = "auto", t3 = { "": 1, lr: 1, rl: 1 }, i6 = { start: 1, center: 1, end: 1, left: 1, right: 1, auto: 1, "line-left": 1, "line-right": 1 };
  function s6(e9) {
    return "string" == typeof e9 && (!!t3[e9.toLowerCase()] && e9.toLowerCase());
  }
  function n5(e9) {
    return "string" == typeof e9 && (!!i6[e9.toLowerCase()] && e9.toLowerCase());
  }
  function r4(t4, i7, r5) {
    this.hasBeenReset = false;
    var a6 = "", o4 = false, l7 = t4, h2 = i7, u5 = r5, d2 = null, c6 = "", p6 = true, m7 = "auto", g2 = "start", f4 = "auto", y3 = "auto", _3 = 100, v3 = "center";
    Object.defineProperties(this, { id: { enumerable: true, get: function() {
      return a6;
    }, set: function(e9) {
      a6 = "" + e9;
    } }, pauseOnExit: { enumerable: true, get: function() {
      return o4;
    }, set: function(e9) {
      o4 = !!e9;
    } }, startTime: { enumerable: true, get: function() {
      return l7;
    }, set: function(e9) {
      if ("number" != typeof e9) throw new TypeError("Start time must be set to a number.");
      l7 = e9, this.hasBeenReset = true;
    } }, endTime: { enumerable: true, get: function() {
      return h2;
    }, set: function(e9) {
      if ("number" != typeof e9) throw new TypeError("End time must be set to a number.");
      h2 = e9, this.hasBeenReset = true;
    } }, text: { enumerable: true, get: function() {
      return u5;
    }, set: function(e9) {
      u5 = "" + e9, this.hasBeenReset = true;
    } }, region: { enumerable: true, get: function() {
      return d2;
    }, set: function(e9) {
      d2 = e9, this.hasBeenReset = true;
    } }, vertical: { enumerable: true, get: function() {
      return c6;
    }, set: function(e9) {
      var t5 = s6(e9);
      if (false === t5) throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");
      c6 = t5, this.hasBeenReset = true;
    } }, snapToLines: { enumerable: true, get: function() {
      return p6;
    }, set: function(e9) {
      p6 = !!e9, this.hasBeenReset = true;
    } }, line: { enumerable: true, get: function() {
      return m7;
    }, set: function(t5) {
      if ("number" != typeof t5 && t5 !== e8) throw new SyntaxError("Line: an invalid number or illegal string was specified.");
      m7 = t5, this.hasBeenReset = true;
    } }, lineAlign: { enumerable: true, get: function() {
      return g2;
    }, set: function(e9) {
      var t5 = n5(e9);
      t5 ? (g2 = t5, this.hasBeenReset = true) : console.warn("lineAlign: an invalid or illegal string was specified.");
    } }, position: { enumerable: true, get: function() {
      return f4;
    }, set: function(e9) {
      if (e9 < 0 || e9 > 100) throw new Error("Position must be between 0 and 100.");
      f4 = e9, this.hasBeenReset = true;
    } }, positionAlign: { enumerable: true, get: function() {
      return y3;
    }, set: function(e9) {
      var t5 = n5(e9);
      t5 ? (y3 = t5, this.hasBeenReset = true) : console.warn("positionAlign: an invalid or illegal string was specified.");
    } }, size: { enumerable: true, get: function() {
      return _3;
    }, set: function(e9) {
      if (e9 < 0 || e9 > 100) throw new Error("Size must be between 0 and 100.");
      _3 = e9, this.hasBeenReset = true;
    } }, align: { enumerable: true, get: function() {
      return v3;
    }, set: function(e9) {
      var t5 = n5(e9);
      if (!t5) throw new SyntaxError("align: an invalid or illegal alignment string was specified.");
      v3 = t5, this.hasBeenReset = true;
    } } }), this.displayState = void 0;
  }
  return r4.prototype.getCueAsHTML = function() {
    return WebVTT.convertCueToDOMTree(window, this.text);
  }, xe = r4;
}
function Me() {
  if (Pe) return De;
  Pe = 1;
  var e8 = { "": true, up: true };
  function t3(t4) {
    return "string" == typeof t4 && (!!e8[t4.toLowerCase()] && t4.toLowerCase());
  }
  function i6(e9) {
    return "number" == typeof e9 && e9 >= 0 && e9 <= 100;
  }
  function s6() {
    var e9 = 100, s7 = 3, n5 = 0, r4 = 100, a6 = 0, o4 = 100, l7 = "";
    Object.defineProperties(this, { width: { enumerable: true, get: function() {
      return e9;
    }, set: function(t4) {
      if (!i6(t4)) throw new Error("Width must be between 0 and 100.");
      e9 = t4;
    } }, lines: { enumerable: true, get: function() {
      return s7;
    }, set: function(e10) {
      if ("number" != typeof e10) throw new TypeError("Lines must be set to a number.");
      s7 = e10;
    } }, regionAnchorY: { enumerable: true, get: function() {
      return r4;
    }, set: function(e10) {
      if (!i6(e10)) throw new Error("RegionAnchorX must be between 0 and 100.");
      r4 = e10;
    } }, regionAnchorX: { enumerable: true, get: function() {
      return n5;
    }, set: function(e10) {
      if (!i6(e10)) throw new Error("RegionAnchorY must be between 0 and 100.");
      n5 = e10;
    } }, viewportAnchorY: { enumerable: true, get: function() {
      return o4;
    }, set: function(e10) {
      if (!i6(e10)) throw new Error("ViewportAnchorY must be between 0 and 100.");
      o4 = e10;
    } }, viewportAnchorX: { enumerable: true, get: function() {
      return a6;
    }, set: function(e10) {
      if (!i6(e10)) throw new Error("ViewportAnchorX must be between 0 and 100.");
      a6 = e10;
    } }, scroll: { enumerable: true, get: function() {
      return l7;
    }, set: function(e10) {
      var i7 = t3(e10);
      false === i7 ? console.warn("Scroll: an invalid or illegal string was specified.") : l7 = i7;
    } } });
  }
  return De = s6;
}
function Ue() {
  if (Le) return Oe.exports;
  Le = 1;
  var e8 = v2(), t3 = Oe.exports = { WebVTT: Ne(), VTTCue: Re(), VTTRegion: Me() };
  e8.vttjs = t3, e8.WebVTT = t3.WebVTT;
  var i6 = t3.VTTCue, s6 = t3.VTTRegion, n5 = e8.VTTCue, r4 = e8.VTTRegion;
  return t3.shim = function() {
    e8.VTTCue = i6, e8.VTTRegion = s6;
  }, t3.restore = function() {
    e8.VTTCue = n5, e8.VTTRegion = r4;
  }, e8.VTTCue || t3.shim(), Oe.exports;
}
var Be = o2(Ue());
function Fe() {
  return Fe = Object.assign ? Object.assign.bind() : function(e8) {
    for (var t3 = 1; t3 < arguments.length; t3++) {
      var i6 = arguments[t3];
      for (var s6 in i6) ({}).hasOwnProperty.call(i6, s6) && (e8[s6] = i6[s6]);
    }
    return e8;
  }, Fe.apply(null, arguments);
}
var qe = "https://example.com";
var je = function(e8, t3) {
  if (/^[a-z]+:/i.test(t3)) return t3;
  /^data:/.test(e8) && (e8 = b4.location && b4.location.href || "");
  var i6 = /^\/\//.test(e8), s6 = !b4.location && !/\/\//i.test(e8);
  e8 = new b4.URL(e8, b4.location || qe);
  var n5 = new URL(t3, e8);
  return s6 ? n5.href.slice(qe.length) : i6 ? n5.href.slice(n5.protocol.length) : n5.href;
};
var $e = (function() {
  function e8() {
    this.listeners = {};
  }
  var t3 = e8.prototype;
  return t3.on = function(e9, t4) {
    this.listeners[e9] || (this.listeners[e9] = []), this.listeners[e9].push(t4);
  }, t3.off = function(e9, t4) {
    if (!this.listeners[e9]) return false;
    var i6 = this.listeners[e9].indexOf(t4);
    return this.listeners[e9] = this.listeners[e9].slice(0), this.listeners[e9].splice(i6, 1), i6 > -1;
  }, t3.trigger = function(e9) {
    var t4 = this.listeners[e9];
    if (t4) if (2 === arguments.length) for (var i6 = t4.length, s6 = 0; s6 < i6; ++s6) t4[s6].call(this, arguments[1]);
    else for (var n5 = Array.prototype.slice.call(arguments, 1), r4 = t4.length, a6 = 0; a6 < r4; ++a6) t4[a6].apply(this, n5);
  }, t3.dispose = function() {
    this.listeners = {};
  }, t3.pipe = function(e9) {
    this.on("data", function(t4) {
      e9.push(t4);
    });
  }, e8;
})();
var He = function(e8) {
  return b4.atob ? b4.atob(e8) : Buffer.from(e8, "base64").toString("binary");
};
function Ve(e8) {
  for (var t3 = He(e8), i6 = new Uint8Array(t3.length), s6 = 0; s6 < t3.length; s6++) i6[s6] = t3.charCodeAt(s6);
  return i6;
}
var ze = class extends $e {
  constructor() {
    super(), this.buffer = "";
  }
  push(e8) {
    let t3;
    for (this.buffer += e8, t3 = this.buffer.indexOf("\n"); t3 > -1; t3 = this.buffer.indexOf("\n")) this.trigger("data", this.buffer.substring(0, t3)), this.buffer = this.buffer.substring(t3 + 1);
  }
};
var We = String.fromCharCode(9);
var Ge = function(e8) {
  const t3 = /([0-9.]*)?@?([0-9.]*)?/.exec(e8 || ""), i6 = {};
  return t3[1] && (i6.length = parseInt(t3[1], 10)), t3[2] && (i6.offset = parseInt(t3[2], 10)), i6;
};
var Xe = function() {
  return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))');
};
var Ke = function(e8) {
  const t3 = {};
  if (!e8) return t3;
  const i6 = e8.split(Xe());
  let s6, n5 = i6.length;
  for (; n5--; ) "" !== i6[n5] && (s6 = /([^=]*)=(.*)/.exec(i6[n5]).slice(1), s6[0] = s6[0].replace(/^\s+|\s+$/g, ""), s6[1] = s6[1].replace(/^\s+|\s+$/g, ""), s6[1] = s6[1].replace(/^['"](.*)['"]$/g, "$1"), t3[s6[0]] = s6[1]);
  return t3;
};
var Ye = (e8) => {
  const t3 = e8.split("x"), i6 = {};
  return t3[0] && (i6.width = parseInt(t3[0], 10)), t3[1] && (i6.height = parseInt(t3[1], 10)), i6;
};
var Qe = class extends $e {
  constructor() {
    super(), this.customParsers = [], this.tagMappers = [];
  }
  push(e8) {
    let t3, i6;
    if (0 === (e8 = e8.trim()).length) return;
    if ("#" !== e8[0]) return void this.trigger("data", { type: "uri", uri: e8 });
    this.tagMappers.reduce((t4, i7) => {
      const s6 = i7(e8);
      return s6 === e8 ? t4 : t4.concat([s6]);
    }, [e8]).forEach((e9) => {
      for (let t4 = 0; t4 < this.customParsers.length; t4++) if (this.customParsers[t4].call(this, e9)) return;
      if (0 === e9.indexOf("#EXT")) if (e9 = e9.replace("\r", ""), t3 = /^#EXTM3U/.exec(e9), t3) this.trigger("data", { type: "tag", tagType: "m3u" });
      else {
        if (t3 = /^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e9), t3) return i6 = { type: "tag", tagType: "inf" }, t3[1] && (i6.duration = parseFloat(t3[1])), t3[2] && (i6.title = t3[2]), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e9), t3) return i6 = { type: "tag", tagType: "targetduration" }, t3[1] && (i6.duration = parseInt(t3[1], 10)), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-VERSION:([0-9.]*)?/.exec(e9), t3) return i6 = { type: "tag", tagType: "version" }, t3[1] && (i6.version = parseInt(t3[1], 10)), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e9), t3) return i6 = { type: "tag", tagType: "media-sequence" }, t3[1] && (i6.number = parseInt(t3[1], 10)), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e9), t3) return i6 = { type: "tag", tagType: "discontinuity-sequence" }, t3[1] && (i6.number = parseInt(t3[1], 10)), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e9), t3) return i6 = { type: "tag", tagType: "playlist-type" }, t3[1] && (i6.playlistType = t3[1]), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-BYTERANGE:(.*)?$/.exec(e9), t3) return i6 = Fe(Ge(t3[1]), { type: "tag", tagType: "byterange" }), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e9), t3) return i6 = { type: "tag", tagType: "allow-cache" }, t3[1] && (i6.allowed = !/NO/.test(t3[1])), void this.trigger("data", i6);
        if (t3 = /^#EXT-X-MAP:(.*)$/.exec(e9), t3) {
          if (i6 = { type: "tag", tagType: "map" }, t3[1]) {
            const e10 = Ke(t3[1]);
            e10.URI && (i6.uri = e10.URI), e10.BYTERANGE && (i6.byterange = Ge(e10.BYTERANGE));
          }
          this.trigger("data", i6);
        } else {
          if (t3 = /^#EXT-X-STREAM-INF:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "stream-inf" }, t3[1] && (i6.attributes = Ke(t3[1]), i6.attributes.RESOLUTION && (i6.attributes.RESOLUTION = Ye(i6.attributes.RESOLUTION)), i6.attributes.BANDWIDTH && (i6.attributes.BANDWIDTH = parseInt(i6.attributes.BANDWIDTH, 10)), i6.attributes["FRAME-RATE"] && (i6.attributes["FRAME-RATE"] = parseFloat(i6.attributes["FRAME-RATE"])), i6.attributes["PROGRAM-ID"] && (i6.attributes["PROGRAM-ID"] = parseInt(i6.attributes["PROGRAM-ID"], 10))), void this.trigger("data", i6);
          if (t3 = /^#EXT-X-MEDIA:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "media" }, t3[1] && (i6.attributes = Ke(t3[1])), void this.trigger("data", i6);
          if (t3 = /^#EXT-X-ENDLIST/.exec(e9), t3) this.trigger("data", { type: "tag", tagType: "endlist" });
          else if (t3 = /^#EXT-X-DISCONTINUITY/.exec(e9), t3) this.trigger("data", { type: "tag", tagType: "discontinuity" });
          else {
            if (t3 = /^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "program-date-time" }, t3[1] && (i6.dateTimeString = t3[1], i6.dateTimeObject = new Date(t3[1])), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-KEY:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "key" }, t3[1] && (i6.attributes = Ke(t3[1]), i6.attributes.IV && ("0x" === i6.attributes.IV.substring(0, 2).toLowerCase() && (i6.attributes.IV = i6.attributes.IV.substring(2)), i6.attributes.IV = i6.attributes.IV.match(/.{8}/g), i6.attributes.IV[0] = parseInt(i6.attributes.IV[0], 16), i6.attributes.IV[1] = parseInt(i6.attributes.IV[1], 16), i6.attributes.IV[2] = parseInt(i6.attributes.IV[2], 16), i6.attributes.IV[3] = parseInt(i6.attributes.IV[3], 16), i6.attributes.IV = new Uint32Array(i6.attributes.IV))), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-START:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "start" }, t3[1] && (i6.attributes = Ke(t3[1]), i6.attributes["TIME-OFFSET"] = parseFloat(i6.attributes["TIME-OFFSET"]), i6.attributes.PRECISE = /YES/.test(i6.attributes.PRECISE)), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e9), t3) return i6 = { type: "tag", tagType: "cue-out-cont" }, t3[1] ? i6.data = t3[1] : i6.data = "", void this.trigger("data", i6);
            if (t3 = /^#EXT-X-CUE-OUT:(.*)?$/.exec(e9), t3) return i6 = { type: "tag", tagType: "cue-out" }, t3[1] ? i6.data = t3[1] : i6.data = "", void this.trigger("data", i6);
            if (t3 = /^#EXT-X-CUE-IN:?(.*)?$/.exec(e9), t3) return i6 = { type: "tag", tagType: "cue-in" }, t3[1] ? i6.data = t3[1] : i6.data = "", void this.trigger("data", i6);
            if (t3 = /^#EXT-X-SKIP:(.*)$/.exec(e9), t3 && t3[1]) return i6 = { type: "tag", tagType: "skip" }, i6.attributes = Ke(t3[1]), i6.attributes.hasOwnProperty("SKIPPED-SEGMENTS") && (i6.attributes["SKIPPED-SEGMENTS"] = parseInt(i6.attributes["SKIPPED-SEGMENTS"], 10)), i6.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES") && (i6.attributes["RECENTLY-REMOVED-DATERANGES"] = i6.attributes["RECENTLY-REMOVED-DATERANGES"].split(We)), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-PART:(.*)$/.exec(e9), t3 && t3[1]) return i6 = { type: "tag", tagType: "part" }, i6.attributes = Ke(t3[1]), ["DURATION"].forEach(function(e10) {
              i6.attributes.hasOwnProperty(e10) && (i6.attributes[e10] = parseFloat(i6.attributes[e10]));
            }), ["INDEPENDENT", "GAP"].forEach(function(e10) {
              i6.attributes.hasOwnProperty(e10) && (i6.attributes[e10] = /YES/.test(i6.attributes[e10]));
            }), i6.attributes.hasOwnProperty("BYTERANGE") && (i6.attributes.byterange = Ge(i6.attributes.BYTERANGE)), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e9), t3 && t3[1]) return i6 = { type: "tag", tagType: "server-control" }, i6.attributes = Ke(t3[1]), ["CAN-SKIP-UNTIL", "PART-HOLD-BACK", "HOLD-BACK"].forEach(function(e10) {
              i6.attributes.hasOwnProperty(e10) && (i6.attributes[e10] = parseFloat(i6.attributes[e10]));
            }), ["CAN-SKIP-DATERANGES", "CAN-BLOCK-RELOAD"].forEach(function(e10) {
              i6.attributes.hasOwnProperty(e10) && (i6.attributes[e10] = /YES/.test(i6.attributes[e10]));
            }), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-PART-INF:(.*)$/.exec(e9), t3 && t3[1]) return i6 = { type: "tag", tagType: "part-inf" }, i6.attributes = Ke(t3[1]), ["PART-TARGET"].forEach(function(e10) {
              i6.attributes.hasOwnProperty(e10) && (i6.attributes[e10] = parseFloat(i6.attributes[e10]));
            }), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e9), t3 && t3[1]) return i6 = { type: "tag", tagType: "preload-hint" }, i6.attributes = Ke(t3[1]), ["BYTERANGE-START", "BYTERANGE-LENGTH"].forEach(function(e10) {
              if (i6.attributes.hasOwnProperty(e10)) {
                i6.attributes[e10] = parseInt(i6.attributes[e10], 10);
                const t4 = "BYTERANGE-LENGTH" === e10 ? "length" : "offset";
                i6.attributes.byterange = i6.attributes.byterange || {}, i6.attributes.byterange[t4] = i6.attributes[e10], delete i6.attributes[e10];
              }
            }), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e9), t3 && t3[1]) return i6 = { type: "tag", tagType: "rendition-report" }, i6.attributes = Ke(t3[1]), ["LAST-MSN", "LAST-PART"].forEach(function(e10) {
              i6.attributes.hasOwnProperty(e10) && (i6.attributes[e10] = parseInt(i6.attributes[e10], 10));
            }), void this.trigger("data", i6);
            if (t3 = /^#EXT-X-DATERANGE:(.*)$/.exec(e9), t3 && t3[1]) {
              i6 = { type: "tag", tagType: "daterange" }, i6.attributes = Ke(t3[1]), ["ID", "CLASS"].forEach(function(e11) {
                i6.attributes.hasOwnProperty(e11) && (i6.attributes[e11] = String(i6.attributes[e11]));
              }), ["START-DATE", "END-DATE"].forEach(function(e11) {
                i6.attributes.hasOwnProperty(e11) && (i6.attributes[e11] = new Date(i6.attributes[e11]));
              }), ["DURATION", "PLANNED-DURATION"].forEach(function(e11) {
                i6.attributes.hasOwnProperty(e11) && (i6.attributes[e11] = parseFloat(i6.attributes[e11]));
              }), ["END-ON-NEXT"].forEach(function(e11) {
                i6.attributes.hasOwnProperty(e11) && (i6.attributes[e11] = /YES/i.test(i6.attributes[e11]));
              }), ["SCTE35-CMD", " SCTE35-OUT", "SCTE35-IN"].forEach(function(e11) {
                i6.attributes.hasOwnProperty(e11) && (i6.attributes[e11] = i6.attributes[e11].toString(16));
              });
              const e10 = /^X-([A-Z]+-)+[A-Z]+$/;
              for (const t4 in i6.attributes) {
                if (!e10.test(t4)) continue;
                const s6 = /[0-9A-Fa-f]{6}/g.test(i6.attributes[t4]), n5 = /^\d+(\.\d+)?$/.test(i6.attributes[t4]);
                i6.attributes[t4] = s6 ? i6.attributes[t4].toString(16) : n5 ? parseFloat(i6.attributes[t4]) : String(i6.attributes[t4]);
              }
              return void this.trigger("data", i6);
            }
            if (t3 = /^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e9), t3) this.trigger("data", { type: "tag", tagType: "independent-segments" });
            else if (t3 = /^#EXT-X-I-FRAMES-ONLY/.exec(e9), t3) this.trigger("data", { type: "tag", tagType: "i-frames-only" });
            else {
              if (t3 = /^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "content-steering" }, i6.attributes = Ke(t3[1]), void this.trigger("data", i6);
              if (t3 = /^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "i-frame-playlist" }, i6.attributes = Ke(t3[1]), i6.attributes.URI && (i6.uri = i6.attributes.URI), i6.attributes.BANDWIDTH && (i6.attributes.BANDWIDTH = parseInt(i6.attributes.BANDWIDTH, 10)), i6.attributes.RESOLUTION && (i6.attributes.RESOLUTION = Ye(i6.attributes.RESOLUTION)), i6.attributes["AVERAGE-BANDWIDTH"] && (i6.attributes["AVERAGE-BANDWIDTH"] = parseInt(i6.attributes["AVERAGE-BANDWIDTH"], 10)), i6.attributes["FRAME-RATE"] && (i6.attributes["FRAME-RATE"] = parseFloat(i6.attributes["FRAME-RATE"])), void this.trigger("data", i6);
              if (t3 = /^#EXT-X-DEFINE:(.*)$/.exec(e9), t3) return i6 = { type: "tag", tagType: "define" }, i6.attributes = Ke(t3[1]), void this.trigger("data", i6);
              this.trigger("data", { type: "tag", data: e9.slice(4) });
            }
          }
        }
      }
      else this.trigger("data", { type: "comment", text: e9.slice(1) });
    });
  }
  addParser({ expression: e8, customType: t3, dataParser: i6, segment: s6 }) {
    "function" != typeof i6 && (i6 = (e9) => e9), this.customParsers.push((n5) => {
      if (e8.exec(n5)) return this.trigger("data", { type: "custom", data: i6(n5), customType: t3, segment: s6 }), true;
    });
  }
  addTagMapper({ expression: e8, map: t3 }) {
    const i6 = (i7) => e8.test(i7) ? t3(i7) : i7;
    this.tagMappers.push(i6);
  }
};
var Je = (e8) => e8.toLowerCase().replace(/-(\w)/g, (e9) => e9[1].toUpperCase());
var Ze = function(e8) {
  const t3 = {};
  return Object.keys(e8).forEach(function(i6) {
    t3[Je(i6)] = e8[i6];
  }), t3;
};
var et = function(e8) {
  const { serverControl: t3, targetDuration: i6, partTargetDuration: s6 } = e8;
  if (!t3) return;
  const n5 = "#EXT-X-SERVER-CONTROL", r4 = "holdBack", a6 = "partHoldBack", o4 = i6 && 3 * i6, l7 = s6 && 2 * s6;
  i6 && !t3.hasOwnProperty(r4) && (t3[r4] = o4, this.trigger("info", { message: `${n5} defaulting HOLD-BACK to targetDuration * 3 (${o4}).` })), o4 && t3[r4] < o4 && (this.trigger("warn", { message: `${n5} clamping HOLD-BACK (${t3[r4]}) to targetDuration * 3 (${o4})` }), t3[r4] = o4), s6 && !t3.hasOwnProperty(a6) && (t3[a6] = 3 * s6, this.trigger("info", { message: `${n5} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t3[a6]}).` })), s6 && t3[a6] < l7 && (this.trigger("warn", { message: `${n5} clamping PART-HOLD-BACK (${t3[a6]}) to partTargetDuration * 2 (${l7}).` }), t3[a6] = l7);
};
var tt = class extends $e {
  constructor(e8 = {}) {
    super(), this.lineStream = new ze(), this.parseStream = new Qe(), this.lineStream.pipe(this.parseStream), this.mainDefinitions = e8.mainDefinitions || {}, this.params = new URL(e8.uri, "https://a.com").searchParams, this.lastProgramDateTime = null;
    const t3 = this, i6 = [];
    let s6, n5, r4 = {}, a6 = false;
    const o4 = function() {
    }, l7 = { AUDIO: {}, VIDEO: {}, "CLOSED-CAPTIONS": {}, SUBTITLES: {} }, h2 = "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";
    let u5 = 0;
    this.manifest = { allowCache: true, discontinuityStarts: [], dateRanges: [], iFramePlaylists: [], segments: [] };
    let d2 = 0, c6 = 0;
    const p6 = {};
    this.on("end", () => {
      r4.uri || !r4.parts && !r4.preloadHints || (!r4.map && s6 && (r4.map = s6), !r4.key && n5 && (r4.key = n5), r4.timeline || "number" != typeof u5 || (r4.timeline = u5), this.manifest.preloadSegment = r4);
    }), this.parseStream.on("data", function(e9) {
      let m7, g2;
      if (t3.manifest.definitions) {
        for (const i7 in t3.manifest.definitions) if (e9.uri && (e9.uri = e9.uri.replace(`{$${i7}}`, t3.manifest.definitions[i7])), e9.attributes) for (const s7 in e9.attributes) "string" == typeof e9.attributes[s7] && (e9.attributes[s7] = e9.attributes[s7].replace(`{$${i7}}`, t3.manifest.definitions[i7]));
      }
      ({ tag() {
        ({ version() {
          e9.version && (this.manifest.version = e9.version);
        }, "allow-cache"() {
          this.manifest.allowCache = e9.allowed, "allowed" in e9 || (this.trigger("info", { message: "defaulting allowCache to YES" }), this.manifest.allowCache = true);
        }, byterange() {
          const t4 = {};
          "length" in e9 && (r4.byterange = t4, t4.length = e9.length, "offset" in e9 || (e9.offset = d2)), "offset" in e9 && (r4.byterange = t4, t4.offset = e9.offset), d2 = t4.offset + t4.length;
        }, endlist() {
          this.manifest.endList = true;
        }, inf() {
          "mediaSequence" in this.manifest || (this.manifest.mediaSequence = 0, this.trigger("info", { message: "defaulting media sequence to zero" })), "discontinuitySequence" in this.manifest || (this.manifest.discontinuitySequence = 0, this.trigger("info", { message: "defaulting discontinuity sequence to zero" })), e9.title && (r4.title = e9.title), e9.duration > 0 && (r4.duration = e9.duration), 0 === e9.duration && (r4.duration = 0.01, this.trigger("info", { message: "updating zero segment duration to a small value" })), this.manifest.segments = i6;
        }, key() {
          if (e9.attributes) if ("NONE" !== e9.attributes.METHOD) if (e9.attributes.URI) {
            if ("com.apple.streamingkeydelivery" === e9.attributes.KEYFORMAT) return this.manifest.contentProtection = this.manifest.contentProtection || {}, void (this.manifest.contentProtection["com.apple.fps.1_0"] = { attributes: e9.attributes });
            if ("com.microsoft.playready" === e9.attributes.KEYFORMAT) return this.manifest.contentProtection = this.manifest.contentProtection || {}, void (this.manifest.contentProtection["com.microsoft.playready"] = { uri: e9.attributes.URI });
            if (e9.attributes.KEYFORMAT === h2) {
              return -1 === ["SAMPLE-AES", "SAMPLE-AES-CTR", "SAMPLE-AES-CENC"].indexOf(e9.attributes.METHOD) ? void this.trigger("warn", { message: "invalid key method provided for Widevine" }) : ("SAMPLE-AES-CENC" === e9.attributes.METHOD && this.trigger("warn", { message: "SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead" }), "data:text/plain;base64," !== e9.attributes.URI.substring(0, 23) ? void this.trigger("warn", { message: "invalid key URI provided for Widevine" }) : e9.attributes.KEYID && "0x" === e9.attributes.KEYID.substring(0, 2) ? (this.manifest.contentProtection = this.manifest.contentProtection || {}, void (this.manifest.contentProtection["com.widevine.alpha"] = { attributes: { schemeIdUri: e9.attributes.KEYFORMAT, keyId: e9.attributes.KEYID.substring(2) }, pssh: Ve(e9.attributes.URI.split(",")[1]) })) : void this.trigger("warn", { message: "invalid key ID provided for Widevine" }));
            }
            e9.attributes.METHOD || this.trigger("warn", { message: "defaulting key method to AES-128" }), n5 = { method: e9.attributes.METHOD || "AES-128", uri: e9.attributes.URI }, void 0 !== e9.attributes.IV && (n5.iv = e9.attributes.IV);
          } else this.trigger("warn", { message: "ignoring key declaration without URI" });
          else n5 = null;
          else this.trigger("warn", { message: "ignoring key declaration without attribute list" });
        }, "media-sequence"() {
          isFinite(e9.number) ? this.manifest.mediaSequence = e9.number : this.trigger("warn", { message: "ignoring invalid media sequence: " + e9.number });
        }, "discontinuity-sequence"() {
          isFinite(e9.number) ? (this.manifest.discontinuitySequence = e9.number, u5 = e9.number) : this.trigger("warn", { message: "ignoring invalid discontinuity sequence: " + e9.number });
        }, "playlist-type"() {
          /VOD|EVENT/.test(e9.playlistType) ? this.manifest.playlistType = e9.playlistType : this.trigger("warn", { message: "ignoring unknown playlist type: " + e9.playlist });
        }, map() {
          s6 = {}, e9.uri && (s6.uri = e9.uri), e9.byterange && (s6.byterange = e9.byterange), n5 && (s6.key = n5);
        }, "stream-inf"() {
          this.manifest.playlists = i6, this.manifest.mediaGroups = this.manifest.mediaGroups || l7, e9.attributes ? (r4.attributes || (r4.attributes = {}), Fe(r4.attributes, e9.attributes)) : this.trigger("warn", { message: "ignoring empty stream-inf attributes" });
        }, media() {
          if (this.manifest.mediaGroups = this.manifest.mediaGroups || l7, !(e9.attributes && e9.attributes.TYPE && e9.attributes["GROUP-ID"] && e9.attributes.NAME)) return void this.trigger("warn", { message: "ignoring incomplete or missing media group" });
          const t4 = this.manifest.mediaGroups[e9.attributes.TYPE];
          t4[e9.attributes["GROUP-ID"]] = t4[e9.attributes["GROUP-ID"]] || {}, m7 = t4[e9.attributes["GROUP-ID"]], g2 = { default: /yes/i.test(e9.attributes.DEFAULT) }, g2.default ? g2.autoselect = true : g2.autoselect = /yes/i.test(e9.attributes.AUTOSELECT), e9.attributes.LANGUAGE && (g2.language = e9.attributes.LANGUAGE), e9.attributes.URI && (g2.uri = e9.attributes.URI), e9.attributes["INSTREAM-ID"] && (g2.instreamId = e9.attributes["INSTREAM-ID"]), e9.attributes.CHARACTERISTICS && (g2.characteristics = e9.attributes.CHARACTERISTICS), e9.attributes.FORCED && (g2.forced = /yes/i.test(e9.attributes.FORCED)), m7[e9.attributes.NAME] = g2;
        }, discontinuity() {
          u5 += 1, r4.discontinuity = true, this.manifest.discontinuityStarts.push(i6.length);
        }, "program-date-time"() {
          void 0 === this.manifest.dateTimeString && (this.manifest.dateTimeString = e9.dateTimeString, this.manifest.dateTimeObject = e9.dateTimeObject), r4.dateTimeString = e9.dateTimeString, r4.dateTimeObject = e9.dateTimeObject;
          const { lastProgramDateTime: t4 } = this;
          this.lastProgramDateTime = new Date(e9.dateTimeString).getTime(), null === t4 && this.manifest.segments.reduceRight((e10, t5) => (t5.programDateTime = e10 - 1e3 * t5.duration, t5.programDateTime), this.lastProgramDateTime);
        }, targetduration() {
          !isFinite(e9.duration) || e9.duration < 0 ? this.trigger("warn", { message: "ignoring invalid target duration: " + e9.duration }) : (this.manifest.targetDuration = e9.duration, et.call(this, this.manifest));
        }, start() {
          e9.attributes && !isNaN(e9.attributes["TIME-OFFSET"]) ? this.manifest.start = { timeOffset: e9.attributes["TIME-OFFSET"], precise: e9.attributes.PRECISE } : this.trigger("warn", { message: "ignoring start declaration without appropriate attribute list" });
        }, "cue-out"() {
          r4.cueOut = e9.data;
        }, "cue-out-cont"() {
          r4.cueOutCont = e9.data;
        }, "cue-in"() {
          r4.cueIn = e9.data;
        }, skip() {
          this.manifest.skip = Ze(e9.attributes), this.warnOnMissingAttributes_("#EXT-X-SKIP", e9.attributes, ["SKIPPED-SEGMENTS"]);
        }, part() {
          a6 = true;
          const t4 = this.manifest.segments.length, i7 = Ze(e9.attributes);
          r4.parts = r4.parts || [], r4.parts.push(i7), i7.byterange && (i7.byterange.hasOwnProperty("offset") || (i7.byterange.offset = c6), c6 = i7.byterange.offset + i7.byterange.length);
          const s7 = r4.parts.length - 1;
          this.warnOnMissingAttributes_(`#EXT-X-PART #${s7} for segment #${t4}`, e9.attributes, ["URI", "DURATION"]), this.manifest.renditionReports && this.manifest.renditionReports.forEach((e10, t5) => {
            e10.hasOwnProperty("lastPart") || this.trigger("warn", { message: `#EXT-X-RENDITION-REPORT #${t5} lacks required attribute(s): LAST-PART` });
          });
        }, "server-control"() {
          const t4 = this.manifest.serverControl = Ze(e9.attributes);
          t4.hasOwnProperty("canBlockReload") || (t4.canBlockReload = false, this.trigger("info", { message: "#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false" })), et.call(this, this.manifest), t4.canSkipDateranges && !t4.hasOwnProperty("canSkipUntil") && this.trigger("warn", { message: "#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set" });
        }, "preload-hint"() {
          const t4 = this.manifest.segments.length, i7 = Ze(e9.attributes), s7 = i7.type && "PART" === i7.type;
          r4.preloadHints = r4.preloadHints || [], r4.preloadHints.push(i7), i7.byterange && (i7.byterange.hasOwnProperty("offset") || (i7.byterange.offset = s7 ? c6 : 0, s7 && (c6 = i7.byterange.offset + i7.byterange.length)));
          const n6 = r4.preloadHints.length - 1;
          if (this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${n6} for segment #${t4}`, e9.attributes, ["TYPE", "URI"]), i7.type) for (let e10 = 0; e10 < r4.preloadHints.length - 1; e10++) {
            const s8 = r4.preloadHints[e10];
            s8.type && (s8.type === i7.type && this.trigger("warn", { message: `#EXT-X-PRELOAD-HINT #${n6} for segment #${t4} has the same TYPE ${i7.type} as preload hint #${e10}` }));
          }
        }, "rendition-report"() {
          const t4 = Ze(e9.attributes);
          this.manifest.renditionReports = this.manifest.renditionReports || [], this.manifest.renditionReports.push(t4);
          const i7 = this.manifest.renditionReports.length - 1, s7 = ["LAST-MSN", "URI"];
          a6 && s7.push("LAST-PART"), this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${i7}`, e9.attributes, s7);
        }, "part-inf"() {
          this.manifest.partInf = Ze(e9.attributes), this.warnOnMissingAttributes_("#EXT-X-PART-INF", e9.attributes, ["PART-TARGET"]), this.manifest.partInf.partTarget && (this.manifest.partTargetDuration = this.manifest.partInf.partTarget), et.call(this, this.manifest);
        }, daterange() {
          this.manifest.dateRanges.push(Ze(e9.attributes));
          const t4 = this.manifest.dateRanges.length - 1;
          this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${t4}`, e9.attributes, ["ID", "START-DATE"]);
          const i7 = this.manifest.dateRanges[t4];
          i7.endDate && i7.startDate && new Date(i7.endDate) < new Date(i7.startDate) && this.trigger("warn", { message: "EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE" }), i7.duration && i7.duration < 0 && this.trigger("warn", { message: "EXT-X-DATERANGE DURATION must not be negative" }), i7.plannedDuration && i7.plannedDuration < 0 && this.trigger("warn", { message: "EXT-X-DATERANGE PLANNED-DURATION must not be negative" });
          const s7 = !!i7.endOnNext;
          if (s7 && !i7.class && this.trigger("warn", { message: "EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute" }), s7 && (i7.duration || i7.endDate) && this.trigger("warn", { message: "EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes" }), i7.duration && i7.endDate) {
            const e10 = i7.startDate.getTime() + 1e3 * i7.duration;
            this.manifest.dateRanges[t4].endDate = new Date(e10);
          }
          if (p6[i7.id]) {
            for (const t5 in p6[i7.id]) if (i7[t5] && JSON.stringify(p6[i7.id][t5]) !== JSON.stringify(i7[t5])) {
              this.trigger("warn", { message: "EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values" });
              break;
            }
            const e10 = this.manifest.dateRanges.findIndex((e11) => e11.id === i7.id);
            this.manifest.dateRanges[e10] = Fe(this.manifest.dateRanges[e10], i7), p6[i7.id] = Fe(p6[i7.id], i7), this.manifest.dateRanges.pop();
          } else p6[i7.id] = i7;
        }, "independent-segments"() {
          this.manifest.independentSegments = true;
        }, "i-frames-only"() {
          this.manifest.iFramesOnly = true, this.requiredCompatibilityversion(this.manifest.version, 4);
        }, "content-steering"() {
          this.manifest.contentSteering = Ze(e9.attributes), this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING", e9.attributes, ["SERVER-URI"]);
        }, define() {
          this.manifest.definitions = this.manifest.definitions || {};
          const t4 = (e10, t5) => {
            e10 in this.manifest.definitions ? this.trigger("error", { message: `EXT-X-DEFINE: Duplicate name ${e10}` }) : this.manifest.definitions[e10] = t5;
          };
          if ("QUERYPARAM" in e9.attributes) {
            if ("NAME" in e9.attributes || "IMPORT" in e9.attributes) return void this.trigger("error", { message: "EXT-X-DEFINE: Invalid attributes" });
            const i7 = this.params.get(e9.attributes.QUERYPARAM);
            return i7 ? void t4(e9.attributes.QUERYPARAM, decodeURIComponent(i7)) : void this.trigger("error", { message: `EXT-X-DEFINE: No query param ${e9.attributes.QUERYPARAM}` });
          }
          return "NAME" in e9.attributes ? "IMPORT" in e9.attributes ? void this.trigger("error", { message: "EXT-X-DEFINE: Invalid attributes" }) : "VALUE" in e9.attributes && "string" == typeof e9.attributes.VALUE ? void t4(e9.attributes.NAME, e9.attributes.VALUE) : void this.trigger("error", { message: `EXT-X-DEFINE: No value for ${e9.attributes.NAME}` }) : "IMPORT" in e9.attributes ? this.mainDefinitions[e9.attributes.IMPORT] ? void t4(e9.attributes.IMPORT, this.mainDefinitions[e9.attributes.IMPORT]) : void this.trigger("error", { message: `EXT-X-DEFINE: No value ${e9.attributes.IMPORT} to import, or IMPORT used on main playlist` }) : void this.trigger("error", { message: "EXT-X-DEFINE: No attribute" });
        }, "i-frame-playlist"() {
          this.manifest.iFramePlaylists.push({ attributes: e9.attributes, uri: e9.uri, timeline: u5 }), this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF", e9.attributes, ["BANDWIDTH", "URI"]);
        } }[e9.tagType] || o4).call(t3);
      }, uri() {
        r4.uri = e9.uri, i6.push(r4), this.manifest.targetDuration && !("duration" in r4) && (this.trigger("warn", { message: "defaulting segment duration to the target duration" }), r4.duration = this.manifest.targetDuration), n5 && (r4.key = n5), r4.timeline = u5, s6 && (r4.map = s6), c6 = 0, null !== this.lastProgramDateTime && (r4.programDateTime = this.lastProgramDateTime, this.lastProgramDateTime += 1e3 * r4.duration), r4 = {};
      }, comment() {
      }, custom() {
        e9.segment ? (r4.custom = r4.custom || {}, r4.custom[e9.customType] = e9.data) : (this.manifest.custom = this.manifest.custom || {}, this.manifest.custom[e9.customType] = e9.data);
      } })[e9.type].call(t3);
    });
  }
  requiredCompatibilityversion(e8, t3) {
    (e8 < t3 || !e8) && this.trigger("warn", { message: `manifest must be at least version ${t3}` });
  }
  warnOnMissingAttributes_(e8, t3, i6) {
    const s6 = [];
    i6.forEach(function(e9) {
      t3.hasOwnProperty(e9) || s6.push(e9);
    }), s6.length && this.trigger("warn", { message: `${e8} lacks required attribute(s): ${s6.join(", ")}` });
  }
  push(e8) {
    this.lineStream.push(e8);
  }
  end() {
    this.lineStream.push("\n"), this.manifest.dateRanges.length && null === this.lastProgramDateTime && this.trigger("warn", { message: "A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag" }), this.lastProgramDateTime = null, this.trigger("end");
  }
  addParser(e8) {
    this.parseStream.addParser(e8);
  }
  addTagMapper(e8) {
    this.parseStream.addTagMapper(e8);
  }
};
var it;
var st;
var nt = { mp4: /^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/, webm: /^(vp0?[89]|av0?1|opus|vorbis)/, ogg: /^(vp0?[89]|theora|flac|opus|vorbis)/, video: /^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/, audio: /^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/, text: /^(stpp.ttml.im1t)/, muxerVideo: /^(avc0?1)/, muxerAudio: /^(mp4a)/, muxerText: /a^/ };
var rt = ["video", "audio", "text"];
var at = ["Video", "Audio", "Text"];
var ot = function(e8) {
  return e8 ? e8.replace(/avc1\.(\d+)\.(\d+)/i, function(e9, t3, i6) {
    return "avc1." + ("00" + Number(t3).toString(16)).slice(-2) + "00" + ("00" + Number(i6).toString(16)).slice(-2);
  }) : e8;
};
var lt = function(e8) {
  void 0 === e8 && (e8 = "");
  var t3 = e8.split(","), i6 = [];
  return t3.forEach(function(e9) {
    var t4;
    e9 = e9.trim(), rt.forEach(function(s6) {
      var n5 = nt[s6].exec(e9.toLowerCase());
      if (n5 && !(n5.length <= 1)) {
        t4 = s6;
        var r4 = e9.substring(0, n5[1].length), a6 = e9.replace(r4, "");
        i6.push({ type: r4, details: a6, mediaType: s6 });
      }
    }), t4 || i6.push({ type: e9, details: "", mediaType: "unknown" });
  }), i6;
};
var ht = function(e8, t3) {
  if (!e8.mediaGroups.AUDIO || !t3) return null;
  var i6 = e8.mediaGroups.AUDIO[t3];
  if (!i6) return null;
  for (var s6 in i6) {
    var n5 = i6[s6];
    if (n5.default && n5.playlists) return lt(n5.playlists[0].attributes.CODECS);
  }
  return null;
};
var ut = function(e8) {
  return void 0 === e8 && (e8 = ""), nt.audio.test(e8.trim().toLowerCase());
};
var dt = function(e8) {
  return void 0 === e8 && (e8 = ""), nt.text.test(e8.trim().toLowerCase());
};
var ct = function(e8) {
  if (e8 && "string" == typeof e8) {
    var t3 = e8.toLowerCase().split(",").map(function(e9) {
      return ot(e9.trim());
    }), i6 = "video";
    1 === t3.length && ut(t3[0]) ? i6 = "audio" : 1 === t3.length && dt(t3[0]) && (i6 = "application");
    var s6 = "mp4";
    return t3.every(function(e9) {
      return nt.mp4.test(e9);
    }) ? s6 = "mp4" : t3.every(function(e9) {
      return nt.webm.test(e9);
    }) ? s6 = "webm" : t3.every(function(e9) {
      return nt.ogg.test(e9);
    }) && (s6 = "ogg"), i6 + "/" + s6 + ';codecs="' + e8 + '"';
  }
};
var pt = function(e8, t3) {
  return void 0 === e8 && (e8 = ""), void 0 === t3 && (t3 = false), b4.MediaSource && b4.MediaSource.isTypeSupported && b4.MediaSource.isTypeSupported(ct(e8)) || t3 && b4.ManagedMediaSource && b4.ManagedMediaSource.isTypeSupported && b4.ManagedMediaSource.isTypeSupported(ct(e8)) || false;
};
var mt = function(e8) {
  return void 0 === e8 && (e8 = ""), e8.toLowerCase().split(",").every(function(e9) {
    e9 = e9.trim();
    for (var t3 = 0; t3 < at.length; t3++) {
      var i6 = at[t3];
      if (nt["muxer" + i6].test(e9)) return true;
    }
    return false;
  });
};
var gt = "mp4a.40.2";
var ft = "avc1.4d400d";
var yt = /^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;
var _t = /^application\/dash\+xml/i;
var vt = function(e8) {
  return yt.test(e8) ? "hls" : _t.test(e8) ? "dash" : "application/vnd.videojs.vhs+json" === e8 ? "vhs-json" : null;
};
var bt = function(e8) {
  return e8.toString(2).length;
};
var Tt = function(e8) {
  return Math.ceil(bt(e8) / 8);
};
var St = function(e8) {
  return "function" === ArrayBuffer.isView ? ArrayBuffer.isView(e8) : e8 && e8.buffer instanceof ArrayBuffer;
};
var Et = function(e8) {
  return St(e8);
};
var wt = function(e8) {
  return e8 instanceof Uint8Array ? e8 : (Array.isArray(e8) || Et(e8) || e8 instanceof ArrayBuffer || (e8 = "number" != typeof e8 || "number" == typeof e8 && e8 != e8 ? 0 : [e8]), new Uint8Array(e8 && e8.buffer || e8, e8 && e8.byteOffset || 0, e8 && e8.byteLength || 0));
};
var Ct = b4.BigInt || Number;
var kt = [Ct("0x1"), Ct("0x100"), Ct("0x10000"), Ct("0x1000000"), Ct("0x100000000"), Ct("0x10000000000"), Ct("0x1000000000000"), Ct("0x100000000000000"), Ct("0x10000000000000000")];
it = new Uint16Array([65484]), 255 === (st = new Uint8Array(it.buffer, it.byteOffset, it.byteLength))[0] || st[0];
var It;
var xt;
var At = function(e8, t3) {
  var i6 = void 0 === t3 ? {} : t3, s6 = i6.signed, n5 = void 0 !== s6 && s6, r4 = i6.le, a6 = void 0 !== r4 && r4;
  e8 = wt(e8);
  var o4 = a6 ? "reduce" : "reduceRight", l7 = (e8[o4] ? e8[o4] : Array.prototype[o4]).call(e8, function(t4, i7, s7) {
    var n6 = a6 ? s7 : Math.abs(s7 + 1 - e8.length);
    return t4 + Ct(i7) * kt[n6];
  }, Ct(0));
  if (n5) {
    var h2 = kt[e8.length] / Ct(2) - Ct(1);
    (l7 = Ct(l7)) > h2 && (l7 -= h2, l7 -= h2, l7 -= Ct(2));
  }
  return Number(l7);
};
var Dt = function(e8, t3) {
  var i6 = {}.le, s6 = void 0 !== i6 && i6;
  ("bigint" != typeof e8 && "number" != typeof e8 || "number" == typeof e8 && e8 != e8) && (e8 = 0), e8 = Ct(e8);
  for (var n5 = Tt(e8), r4 = new Uint8Array(new ArrayBuffer(n5)), a6 = 0; a6 < n5; a6++) {
    var o4 = s6 ? a6 : Math.abs(a6 + 1 - r4.length);
    r4[o4] = Number(e8 / kt[a6] & Ct(255)), e8 < 0 && (r4[o4] = Math.abs(~r4[o4]), r4[o4] -= 0 === a6 ? 1 : 2);
  }
  return r4;
};
var Pt = function(e8, t3) {
  if ("string" != typeof e8 && e8 && "function" == typeof e8.toString && (e8 = e8.toString()), "string" != typeof e8) return new Uint8Array();
  t3 || (e8 = unescape(encodeURIComponent(e8)));
  for (var i6 = new Uint8Array(e8.length), s6 = 0; s6 < e8.length; s6++) i6[s6] = e8.charCodeAt(s6);
  return i6;
};
var Lt = function() {
  for (var e8 = arguments.length, t3 = new Array(e8), i6 = 0; i6 < e8; i6++) t3[i6] = arguments[i6];
  if (t3 = t3.filter(function(e9) {
    return e9 && (e9.byteLength || e9.length) && "string" != typeof e9;
  }), t3.length <= 1) return wt(t3[0]);
  var s6 = t3.reduce(function(e9, t4, i7) {
    return e9 + (t4.byteLength || t4.length);
  }, 0), n5 = new Uint8Array(s6), r4 = 0;
  return t3.forEach(function(e9) {
    e9 = wt(e9), n5.set(e9, r4), r4 += e9.byteLength;
  }), n5;
};
var Ot = function(e8, t3, i6) {
  var s6 = void 0 === i6 ? {} : i6, n5 = s6.offset, r4 = void 0 === n5 ? 0 : n5, a6 = s6.mask, o4 = void 0 === a6 ? [] : a6;
  e8 = wt(e8);
  var l7 = (t3 = wt(t3)).every ? t3.every : Array.prototype.every;
  return t3.length && e8.length - r4 >= t3.length && l7.call(t3, function(t4, i7) {
    return t4 === (o4[i7] ? o4[i7] & e8[r4 + i7] : e8[r4 + i7]);
  });
};
var Nt = function(e8, t3, i6) {
  t3.forEach(function(t4) {
    for (var s6 in e8.mediaGroups[t4]) for (var n5 in e8.mediaGroups[t4][s6]) {
      var r4 = e8.mediaGroups[t4][s6][n5];
      i6(r4, t4, s6, n5);
    }
  });
};
var Rt = {};
var Mt = {};
var Ut = {};
function Bt() {
  if (It) return Ut;
  function e8(e9, t4, i7) {
    if (void 0 === i7 && (i7 = Array.prototype), e9 && "function" == typeof i7.find) return i7.find.call(e9, t4);
    for (var s7 = 0; s7 < e9.length; s7++) if (Object.prototype.hasOwnProperty.call(e9, s7)) {
      var n6 = e9[s7];
      if (t4.call(void 0, n6, s7, e9)) return n6;
    }
  }
  function t3(e9, t4) {
    return void 0 === t4 && (t4 = Object), t4 && "function" == typeof t4.freeze ? t4.freeze(e9) : e9;
  }
  function i6(e9, t4) {
    if (null === e9 || "object" != typeof e9) throw new TypeError("target is not an object");
    for (var i7 in t4) Object.prototype.hasOwnProperty.call(t4, i7) && (e9[i7] = t4[i7]);
    return e9;
  }
  It = 1;
  var s6 = t3({ HTML: "text/html", isHTML: function(e9) {
    return e9 === s6.HTML;
  }, XML_APPLICATION: "application/xml", XML_TEXT: "text/xml", XML_XHTML_APPLICATION: "application/xhtml+xml", XML_SVG_IMAGE: "image/svg+xml" }), n5 = t3({ HTML: "http://www.w3.org/1999/xhtml", isHTML: function(e9) {
    return e9 === n5.HTML;
  }, SVG: "http://www.w3.org/2000/svg", XML: "http://www.w3.org/XML/1998/namespace", XMLNS: "http://www.w3.org/2000/xmlns/" });
  return Ut.assign = i6, Ut.find = e8, Ut.freeze = t3, Ut.MIME_TYPE = s6, Ut.NAMESPACE = n5, Ut;
}
function Ft() {
  if (xt) return Mt;
  xt = 1;
  var e8 = Bt(), t3 = e8.find, i6 = e8.NAMESPACE;
  function s6(e9) {
    return "" !== e9;
  }
  function n5(e9) {
    return e9 ? e9.split(/[\t\n\f\r ]+/).filter(s6) : [];
  }
  function r4(e9, t4) {
    return e9.hasOwnProperty(t4) || (e9[t4] = true), e9;
  }
  function a6(e9) {
    if (!e9) return [];
    var t4 = n5(e9);
    return Object.keys(t4.reduce(r4, {}));
  }
  function o4(e9) {
    return function(t4) {
      return e9 && -1 !== e9.indexOf(t4);
    };
  }
  function l7(e9, t4) {
    for (var i7 in e9) Object.prototype.hasOwnProperty.call(e9, i7) && (t4[i7] = e9[i7]);
  }
  function h2(e9, t4) {
    var i7 = e9.prototype;
    if (!(i7 instanceof t4)) {
      let s7 = function() {
      };
      s7.prototype = t4.prototype, l7(i7, s7 = new s7()), e9.prototype = i7 = s7;
    }
    i7.constructor != e9 && ("function" != typeof e9 && console.error("unknown Class:" + e9), i7.constructor = e9);
  }
  var u5 = {}, d2 = u5.ELEMENT_NODE = 1, c6 = u5.ATTRIBUTE_NODE = 2, p6 = u5.TEXT_NODE = 3, m7 = u5.CDATA_SECTION_NODE = 4, g2 = u5.ENTITY_REFERENCE_NODE = 5, f4 = u5.ENTITY_NODE = 6, y3 = u5.PROCESSING_INSTRUCTION_NODE = 7, _3 = u5.COMMENT_NODE = 8, v3 = u5.DOCUMENT_NODE = 9, b5 = u5.DOCUMENT_TYPE_NODE = 10, T2 = u5.DOCUMENT_FRAGMENT_NODE = 11, S3 = u5.NOTATION_NODE = 12, E3 = {}, w4 = {};
  E3.INDEX_SIZE_ERR = (w4[1] = "Index size error", 1), E3.DOMSTRING_SIZE_ERR = (w4[2] = "DOMString size error", 2);
  var C3 = E3.HIERARCHY_REQUEST_ERR = (w4[3] = "Hierarchy request error", 3);
  E3.WRONG_DOCUMENT_ERR = (w4[4] = "Wrong document", 4), E3.INVALID_CHARACTER_ERR = (w4[5] = "Invalid character", 5), E3.NO_DATA_ALLOWED_ERR = (w4[6] = "No data allowed", 6), E3.NO_MODIFICATION_ALLOWED_ERR = (w4[7] = "No modification allowed", 7);
  var k2 = E3.NOT_FOUND_ERR = (w4[8] = "Not found", 8);
  E3.NOT_SUPPORTED_ERR = (w4[9] = "Not supported", 9);
  var I2 = E3.INUSE_ATTRIBUTE_ERR = (w4[10] = "Attribute in use", 10);
  function x3(e9, t4) {
    if (t4 instanceof Error) var i7 = t4;
    else i7 = this, Error.call(this, w4[e9]), this.message = w4[e9], Error.captureStackTrace && Error.captureStackTrace(this, x3);
    return i7.code = e9, t4 && (this.message = this.message + ": " + t4), i7;
  }
  function A2() {
  }
  function D2(e9, t4) {
    this._node = e9, this._refresh = t4, P3(this);
  }
  function P3(e9) {
    var t4 = e9._node._inc || e9._node.ownerDocument._inc;
    if (e9._inc !== t4) {
      var i7 = e9._refresh(e9._node);
      if (Ee2(e9, "length", i7.length), !e9.$$length || i7.length < e9.$$length) for (var s7 = i7.length; s7 in e9; s7++) Object.prototype.hasOwnProperty.call(e9, s7) && delete e9[s7];
      l7(i7, e9), e9._inc = t4;
    }
  }
  function L3() {
  }
  function O2(e9, t4) {
    for (var i7 = e9.length; i7--; ) if (e9[i7] === t4) return i7;
  }
  function N3(e9, t4, i7, s7) {
    if (s7 ? t4[O2(t4, s7)] = i7 : t4[t4.length++] = i7, e9) {
      i7.ownerElement = e9;
      var n6 = e9.ownerDocument;
      n6 && (s7 && $2(n6, e9, s7), j4(n6, e9, i7));
    }
  }
  function R2(e9, t4, i7) {
    var s7 = O2(t4, i7);
    if (!(s7 >= 0)) throw new x3(k2, new Error(e9.tagName + "@" + i7));
    for (var n6 = t4.length - 1; s7 < n6; ) t4[s7] = t4[++s7];
    if (t4.length = n6, e9) {
      var r5 = e9.ownerDocument;
      r5 && ($2(r5, e9, i7), i7.ownerElement = null);
    }
  }
  function M3() {
  }
  function U2() {
  }
  function B2(e9) {
    return ("<" == e9 ? "&lt;" : ">" == e9 && "&gt;") || "&" == e9 && "&amp;" || '"' == e9 && "&quot;" || "&#" + e9.charCodeAt() + ";";
  }
  function F2(e9, t4) {
    if (t4(e9)) return true;
    if (e9 = e9.firstChild) do {
      if (F2(e9, t4)) return true;
    } while (e9 = e9.nextSibling);
  }
  function q3() {
    this.ownerDocument = this;
  }
  function j4(e9, t4, s7) {
    e9 && e9._inc++, s7.namespaceURI === i6.XMLNS && (t4._nsMap[s7.prefix ? s7.localName : ""] = s7.value);
  }
  function $2(e9, t4, s7, n6) {
    e9 && e9._inc++, s7.namespaceURI === i6.XMLNS && delete t4._nsMap[s7.prefix ? s7.localName : ""];
  }
  function H3(e9, t4, i7) {
    if (e9 && e9._inc) {
      e9._inc++;
      var s7 = t4.childNodes;
      if (i7) s7[s7.length++] = i7;
      else {
        for (var n6 = t4.firstChild, r5 = 0; n6; ) s7[r5++] = n6, n6 = n6.nextSibling;
        s7.length = r5, delete s7[s7.length];
      }
    }
  }
  function V3(e9, t4) {
    var i7 = t4.previousSibling, s7 = t4.nextSibling;
    return i7 ? i7.nextSibling = s7 : e9.firstChild = s7, s7 ? s7.previousSibling = i7 : e9.lastChild = i7, t4.parentNode = null, t4.previousSibling = null, t4.nextSibling = null, H3(e9.ownerDocument, e9), t4;
  }
  function z3(e9) {
    return e9 && (e9.nodeType === U2.DOCUMENT_NODE || e9.nodeType === U2.DOCUMENT_FRAGMENT_NODE || e9.nodeType === U2.ELEMENT_NODE);
  }
  function W2(e9) {
    return e9 && (X2(e9) || K2(e9) || G2(e9) || e9.nodeType === U2.DOCUMENT_FRAGMENT_NODE || e9.nodeType === U2.COMMENT_NODE || e9.nodeType === U2.PROCESSING_INSTRUCTION_NODE);
  }
  function G2(e9) {
    return e9 && e9.nodeType === U2.DOCUMENT_TYPE_NODE;
  }
  function X2(e9) {
    return e9 && e9.nodeType === U2.ELEMENT_NODE;
  }
  function K2(e9) {
    return e9 && e9.nodeType === U2.TEXT_NODE;
  }
  function Y3(e9, i7) {
    var s7 = e9.childNodes || [];
    if (t3(s7, X2) || G2(i7)) return false;
    var n6 = t3(s7, G2);
    return !(i7 && n6 && s7.indexOf(n6) > s7.indexOf(i7));
  }
  function Q2(e9, i7) {
    var s7 = e9.childNodes || [];
    function n6(e10) {
      return X2(e10) && e10 !== i7;
    }
    if (t3(s7, n6)) return false;
    var r5 = t3(s7, G2);
    return !(i7 && r5 && s7.indexOf(r5) > s7.indexOf(i7));
  }
  function J2(e9, t4, i7) {
    if (!z3(e9)) throw new x3(C3, "Unexpected parent node type " + e9.nodeType);
    if (i7 && i7.parentNode !== e9) throw new x3(k2, "child not in parent");
    if (!W2(t4) || G2(t4) && e9.nodeType !== U2.DOCUMENT_NODE) throw new x3(C3, "Unexpected node type " + t4.nodeType + " for parent node type " + e9.nodeType);
  }
  function Z2(e9, i7, s7) {
    var n6 = e9.childNodes || [], r5 = i7.childNodes || [];
    if (i7.nodeType === U2.DOCUMENT_FRAGMENT_NODE) {
      var a7 = r5.filter(X2);
      if (a7.length > 1 || t3(r5, K2)) throw new x3(C3, "More than one element or text in fragment");
      if (1 === a7.length && !Y3(e9, s7)) throw new x3(C3, "Element in fragment can not be inserted before doctype");
    }
    if (X2(i7) && !Y3(e9, s7)) throw new x3(C3, "Only one element can be added and only after doctype");
    if (G2(i7)) {
      if (t3(n6, G2)) throw new x3(C3, "Only one doctype is allowed");
      var o5 = t3(n6, X2);
      if (s7 && n6.indexOf(o5) < n6.indexOf(s7)) throw new x3(C3, "Doctype can only be inserted before an element");
      if (!s7 && o5) throw new x3(C3, "Doctype can not be appended since element is present");
    }
  }
  function ee3(e9, i7, s7) {
    var n6 = e9.childNodes || [], r5 = i7.childNodes || [];
    if (i7.nodeType === U2.DOCUMENT_FRAGMENT_NODE) {
      var a7 = r5.filter(X2);
      if (a7.length > 1 || t3(r5, K2)) throw new x3(C3, "More than one element or text in fragment");
      if (1 === a7.length && !Q2(e9, s7)) throw new x3(C3, "Element in fragment can not be inserted before doctype");
    }
    if (X2(i7) && !Q2(e9, s7)) throw new x3(C3, "Only one element can be added and only after doctype");
    if (G2(i7)) {
      let l8 = function(e10) {
        return G2(e10) && e10 !== s7;
      };
      if (t3(n6, l8)) throw new x3(C3, "Only one doctype is allowed");
      var o5 = t3(n6, X2);
      if (s7 && n6.indexOf(o5) < n6.indexOf(s7)) throw new x3(C3, "Doctype can only be inserted before an element");
    }
  }
  function te3(e9, t4, i7, s7) {
    J2(e9, t4, i7), e9.nodeType === U2.DOCUMENT_NODE && (s7 || Z2)(e9, t4, i7);
    var n6 = t4.parentNode;
    if (n6 && n6.removeChild(t4), t4.nodeType === T2) {
      var r5 = t4.firstChild;
      if (null == r5) return t4;
      var a7 = t4.lastChild;
    } else r5 = a7 = t4;
    var o5 = i7 ? i7.previousSibling : e9.lastChild;
    r5.previousSibling = o5, a7.nextSibling = i7, o5 ? o5.nextSibling = r5 : e9.firstChild = r5, null == i7 ? e9.lastChild = a7 : i7.previousSibling = a7;
    do {
      r5.parentNode = e9, ie3(r5, e9.ownerDocument || e9);
    } while (r5 !== a7 && (r5 = r5.nextSibling));
    return H3(e9.ownerDocument || e9, e9), t4.nodeType == T2 && (t4.firstChild = t4.lastChild = null), t4;
  }
  function ie3(e9, t4) {
    if (e9.ownerDocument !== t4) {
      if (e9.ownerDocument = t4, e9.nodeType === d2 && e9.attributes) for (var i7 = 0; i7 < e9.attributes.length; i7++) {
        var s7 = e9.attributes.item(i7);
        s7 && (s7.ownerDocument = t4);
      }
      for (var n6 = e9.firstChild; n6; ) ie3(n6, t4), n6 = n6.nextSibling;
    }
  }
  function se3(e9, t4) {
    return t4.parentNode && t4.parentNode.removeChild(t4), t4.parentNode = e9, t4.previousSibling = e9.lastChild, t4.nextSibling = null, t4.previousSibling ? t4.previousSibling.nextSibling = t4 : e9.firstChild = t4, e9.lastChild = t4, H3(e9.ownerDocument, e9, t4), ie3(t4, e9.ownerDocument || e9), t4;
  }
  function ne3() {
    this._nsMap = {};
  }
  function re3() {
  }
  function ae3() {
  }
  function oe3() {
  }
  function le3() {
  }
  function he2() {
  }
  function ue2() {
  }
  function de2() {
  }
  function ce2() {
  }
  function pe3() {
  }
  function me2() {
  }
  function ge2() {
  }
  function fe2() {
  }
  function ye3(e9, t4) {
    var i7 = [], s7 = 9 == this.nodeType && this.documentElement || this, n6 = s7.prefix, r5 = s7.namespaceURI;
    if (r5 && null == n6 && null == (n6 = s7.lookupPrefix(r5))) var a7 = [{ namespace: r5, prefix: null }];
    return be2(this, i7, e9, t4, a7), i7.join("");
  }
  function _e2(e9, t4, s7) {
    var n6 = e9.prefix || "", r5 = e9.namespaceURI;
    if (!r5) return false;
    if ("xml" === n6 && r5 === i6.XML || r5 === i6.XMLNS) return false;
    for (var a7 = s7.length; a7--; ) {
      var o5 = s7[a7];
      if (o5.prefix === n6) return o5.namespace !== r5;
    }
    return true;
  }
  function ve2(e9, t4, i7) {
    e9.push(" ", t4, '="', i7.replace(/[<>&"\t\n\r]/g, B2), '"');
  }
  function be2(e9, t4, s7, n6, r5) {
    if (r5 || (r5 = []), n6) {
      if (!(e9 = n6(e9))) return;
      if ("string" == typeof e9) return void t4.push(e9);
    }
    switch (e9.nodeType) {
      case d2:
        var a7 = e9.attributes, o5 = a7.length, l8 = e9.firstChild, h3 = e9.tagName, u6 = h3;
        if (!(s7 = i6.isHTML(e9.namespaceURI) || s7) && !e9.prefix && e9.namespaceURI) {
          for (var f5, S4 = 0; S4 < a7.length; S4++) if ("xmlns" === a7.item(S4).name) {
            f5 = a7.item(S4).value;
            break;
          }
          if (!f5) for (var E4 = r5.length - 1; E4 >= 0; E4--) {
            if ("" === (w5 = r5[E4]).prefix && w5.namespace === e9.namespaceURI) {
              f5 = w5.namespace;
              break;
            }
          }
          if (f5 !== e9.namespaceURI) for (E4 = r5.length - 1; E4 >= 0; E4--) {
            var w5;
            if ((w5 = r5[E4]).namespace === e9.namespaceURI) {
              w5.prefix && (u6 = w5.prefix + ":" + h3);
              break;
            }
          }
        }
        t4.push("<", u6);
        for (var C4 = 0; C4 < o5; C4++) {
          "xmlns" == (k3 = a7.item(C4)).prefix ? r5.push({ prefix: k3.localName, namespace: k3.value }) : "xmlns" == k3.nodeName && r5.push({ prefix: "", namespace: k3.value });
        }
        for (C4 = 0; C4 < o5; C4++) {
          var k3, I3, x4;
          if (_e2(k3 = a7.item(C4), s7, r5)) ve2(t4, (I3 = k3.prefix || "") ? "xmlns:" + I3 : "xmlns", x4 = k3.namespaceURI), r5.push({ prefix: I3, namespace: x4 });
          be2(k3, t4, s7, n6, r5);
        }
        if (h3 === u6 && _e2(e9, s7, r5)) ve2(t4, (I3 = e9.prefix || "") ? "xmlns:" + I3 : "xmlns", x4 = e9.namespaceURI), r5.push({ prefix: I3, namespace: x4 });
        if (l8 || s7 && !/^(?:meta|link|img|br|hr|input)$/i.test(h3)) {
          if (t4.push(">"), s7 && /^script$/i.test(h3)) for (; l8; ) l8.data ? t4.push(l8.data) : be2(l8, t4, s7, n6, r5.slice()), l8 = l8.nextSibling;
          else for (; l8; ) be2(l8, t4, s7, n6, r5.slice()), l8 = l8.nextSibling;
          t4.push("</", u6, ">");
        } else t4.push("/>");
        return;
      case v3:
      case T2:
        for (l8 = e9.firstChild; l8; ) be2(l8, t4, s7, n6, r5.slice()), l8 = l8.nextSibling;
        return;
      case c6:
        return ve2(t4, e9.name, e9.value);
      case p6:
        return t4.push(e9.data.replace(/[<&>]/g, B2));
      case m7:
        return t4.push("<![CDATA[", e9.data, "]]>");
      case _3:
        return t4.push("<!--", e9.data, "-->");
      case b5:
        var A3 = e9.publicId, D3 = e9.systemId;
        if (t4.push("<!DOCTYPE ", e9.name), A3) t4.push(" PUBLIC ", A3), D3 && "." != D3 && t4.push(" ", D3), t4.push(">");
        else if (D3 && "." != D3) t4.push(" SYSTEM ", D3, ">");
        else {
          var P4 = e9.internalSubset;
          P4 && t4.push(" [", P4, "]"), t4.push(">");
        }
        return;
      case y3:
        return t4.push("<?", e9.target, " ", e9.data, "?>");
      case g2:
        return t4.push("&", e9.nodeName, ";");
      default:
        t4.push("??", e9.nodeName);
    }
  }
  function Te2(e9, t4, i7) {
    var s7;
    switch (t4.nodeType) {
      case d2:
        (s7 = t4.cloneNode(false)).ownerDocument = e9;
      case T2:
        break;
      case c6:
        i7 = true;
    }
    if (s7 || (s7 = t4.cloneNode(false)), s7.ownerDocument = e9, s7.parentNode = null, i7) for (var n6 = t4.firstChild; n6; ) s7.appendChild(Te2(e9, n6, i7)), n6 = n6.nextSibling;
    return s7;
  }
  function Se2(e9, t4, i7) {
    var s7 = new t4.constructor();
    for (var n6 in t4) if (Object.prototype.hasOwnProperty.call(t4, n6)) {
      var r5 = t4[n6];
      "object" != typeof r5 && r5 != s7[n6] && (s7[n6] = r5);
    }
    switch (t4.childNodes && (s7.childNodes = new A2()), s7.ownerDocument = e9, s7.nodeType) {
      case d2:
        var a7 = t4.attributes, o5 = s7.attributes = new L3(), l8 = a7.length;
        o5._ownerElement = s7;
        for (var h3 = 0; h3 < l8; h3++) s7.setAttributeNode(Se2(e9, a7.item(h3), true));
        break;
      case c6:
        i7 = true;
    }
    if (i7) for (var u6 = t4.firstChild; u6; ) s7.appendChild(Se2(e9, u6, i7)), u6 = u6.nextSibling;
    return s7;
  }
  function Ee2(e9, t4, i7) {
    e9[t4] = i7;
  }
  E3.INVALID_STATE_ERR = (w4[11] = "Invalid state", 11), E3.SYNTAX_ERR = (w4[12] = "Syntax error", 12), E3.INVALID_MODIFICATION_ERR = (w4[13] = "Invalid modification", 13), E3.NAMESPACE_ERR = (w4[14] = "Invalid namespace", 14), E3.INVALID_ACCESS_ERR = (w4[15] = "Invalid access", 15), x3.prototype = Error.prototype, l7(E3, x3), A2.prototype = { length: 0, item: function(e9) {
    return e9 >= 0 && e9 < this.length ? this[e9] : null;
  }, toString: function(e9, t4) {
    for (var i7 = [], s7 = 0; s7 < this.length; s7++) be2(this[s7], i7, e9, t4);
    return i7.join("");
  }, filter: function(e9) {
    return Array.prototype.filter.call(this, e9);
  }, indexOf: function(e9) {
    return Array.prototype.indexOf.call(this, e9);
  } }, D2.prototype.item = function(e9) {
    return P3(this), this[e9] || null;
  }, h2(D2, A2), L3.prototype = { length: 0, item: A2.prototype.item, getNamedItem: function(e9) {
    for (var t4 = this.length; t4--; ) {
      var i7 = this[t4];
      if (i7.nodeName == e9) return i7;
    }
  }, setNamedItem: function(e9) {
    var t4 = e9.ownerElement;
    if (t4 && t4 != this._ownerElement) throw new x3(I2);
    var i7 = this.getNamedItem(e9.nodeName);
    return N3(this._ownerElement, this, e9, i7), i7;
  }, setNamedItemNS: function(e9) {
    var t4, i7 = e9.ownerElement;
    if (i7 && i7 != this._ownerElement) throw new x3(I2);
    return t4 = this.getNamedItemNS(e9.namespaceURI, e9.localName), N3(this._ownerElement, this, e9, t4), t4;
  }, removeNamedItem: function(e9) {
    var t4 = this.getNamedItem(e9);
    return R2(this._ownerElement, this, t4), t4;
  }, removeNamedItemNS: function(e9, t4) {
    var i7 = this.getNamedItemNS(e9, t4);
    return R2(this._ownerElement, this, i7), i7;
  }, getNamedItemNS: function(e9, t4) {
    for (var i7 = this.length; i7--; ) {
      var s7 = this[i7];
      if (s7.localName == t4 && s7.namespaceURI == e9) return s7;
    }
    return null;
  } }, M3.prototype = { hasFeature: function(e9, t4) {
    return true;
  }, createDocument: function(e9, t4, i7) {
    var s7 = new q3();
    if (s7.implementation = this, s7.childNodes = new A2(), s7.doctype = i7 || null, i7 && s7.appendChild(i7), t4) {
      var n6 = s7.createElementNS(e9, t4);
      s7.appendChild(n6);
    }
    return s7;
  }, createDocumentType: function(e9, t4, i7) {
    var s7 = new ue2();
    return s7.name = e9, s7.nodeName = e9, s7.publicId = t4 || "", s7.systemId = i7 || "", s7;
  } }, U2.prototype = { firstChild: null, lastChild: null, previousSibling: null, nextSibling: null, attributes: null, parentNode: null, childNodes: null, ownerDocument: null, nodeValue: null, namespaceURI: null, prefix: null, localName: null, insertBefore: function(e9, t4) {
    return te3(this, e9, t4);
  }, replaceChild: function(e9, t4) {
    te3(this, e9, t4, ee3), t4 && this.removeChild(t4);
  }, removeChild: function(e9) {
    return V3(this, e9);
  }, appendChild: function(e9) {
    return this.insertBefore(e9, null);
  }, hasChildNodes: function() {
    return null != this.firstChild;
  }, cloneNode: function(e9) {
    return Se2(this.ownerDocument || this, this, e9);
  }, normalize: function() {
    for (var e9 = this.firstChild; e9; ) {
      var t4 = e9.nextSibling;
      t4 && t4.nodeType == p6 && e9.nodeType == p6 ? (this.removeChild(t4), e9.appendData(t4.data)) : (e9.normalize(), e9 = t4);
    }
  }, isSupported: function(e9, t4) {
    return this.ownerDocument.implementation.hasFeature(e9, t4);
  }, hasAttributes: function() {
    return this.attributes.length > 0;
  }, lookupPrefix: function(e9) {
    for (var t4 = this; t4; ) {
      var i7 = t4._nsMap;
      if (i7) {
        for (var s7 in i7) if (Object.prototype.hasOwnProperty.call(i7, s7) && i7[s7] === e9) return s7;
      }
      t4 = t4.nodeType == c6 ? t4.ownerDocument : t4.parentNode;
    }
    return null;
  }, lookupNamespaceURI: function(e9) {
    for (var t4 = this; t4; ) {
      var i7 = t4._nsMap;
      if (i7 && Object.prototype.hasOwnProperty.call(i7, e9)) return i7[e9];
      t4 = t4.nodeType == c6 ? t4.ownerDocument : t4.parentNode;
    }
    return null;
  }, isDefaultNamespace: function(e9) {
    return null == this.lookupPrefix(e9);
  } }, l7(u5, U2), l7(u5, U2.prototype), q3.prototype = { nodeName: "#document", nodeType: v3, doctype: null, documentElement: null, _inc: 1, insertBefore: function(e9, t4) {
    if (e9.nodeType == T2) {
      for (var i7 = e9.firstChild; i7; ) {
        var s7 = i7.nextSibling;
        this.insertBefore(i7, t4), i7 = s7;
      }
      return e9;
    }
    return te3(this, e9, t4), ie3(e9, this), null === this.documentElement && e9.nodeType === d2 && (this.documentElement = e9), e9;
  }, removeChild: function(e9) {
    return this.documentElement == e9 && (this.documentElement = null), V3(this, e9);
  }, replaceChild: function(e9, t4) {
    te3(this, e9, t4, ee3), ie3(e9, this), t4 && this.removeChild(t4), X2(e9) && (this.documentElement = e9);
  }, importNode: function(e9, t4) {
    return Te2(this, e9, t4);
  }, getElementById: function(e9) {
    var t4 = null;
    return F2(this.documentElement, function(i7) {
      if (i7.nodeType == d2 && i7.getAttribute("id") == e9) return t4 = i7, true;
    }), t4;
  }, getElementsByClassName: function(e9) {
    var t4 = a6(e9);
    return new D2(this, function(i7) {
      var s7 = [];
      return t4.length > 0 && F2(i7.documentElement, function(n6) {
        if (n6 !== i7 && n6.nodeType === d2) {
          var r5 = n6.getAttribute("class");
          if (r5) {
            var l8 = e9 === r5;
            if (!l8) {
              var h3 = a6(r5);
              l8 = t4.every(o4(h3));
            }
            l8 && s7.push(n6);
          }
        }
      }), s7;
    });
  }, createElement: function(e9) {
    var t4 = new ne3();
    return t4.ownerDocument = this, t4.nodeName = e9, t4.tagName = e9, t4.localName = e9, t4.childNodes = new A2(), (t4.attributes = new L3())._ownerElement = t4, t4;
  }, createDocumentFragment: function() {
    var e9 = new me2();
    return e9.ownerDocument = this, e9.childNodes = new A2(), e9;
  }, createTextNode: function(e9) {
    var t4 = new oe3();
    return t4.ownerDocument = this, t4.appendData(e9), t4;
  }, createComment: function(e9) {
    var t4 = new le3();
    return t4.ownerDocument = this, t4.appendData(e9), t4;
  }, createCDATASection: function(e9) {
    var t4 = new he2();
    return t4.ownerDocument = this, t4.appendData(e9), t4;
  }, createProcessingInstruction: function(e9, t4) {
    var i7 = new ge2();
    return i7.ownerDocument = this, i7.tagName = i7.nodeName = i7.target = e9, i7.nodeValue = i7.data = t4, i7;
  }, createAttribute: function(e9) {
    var t4 = new re3();
    return t4.ownerDocument = this, t4.name = e9, t4.nodeName = e9, t4.localName = e9, t4.specified = true, t4;
  }, createEntityReference: function(e9) {
    var t4 = new pe3();
    return t4.ownerDocument = this, t4.nodeName = e9, t4;
  }, createElementNS: function(e9, t4) {
    var i7 = new ne3(), s7 = t4.split(":"), n6 = i7.attributes = new L3();
    return i7.childNodes = new A2(), i7.ownerDocument = this, i7.nodeName = t4, i7.tagName = t4, i7.namespaceURI = e9, 2 == s7.length ? (i7.prefix = s7[0], i7.localName = s7[1]) : i7.localName = t4, n6._ownerElement = i7, i7;
  }, createAttributeNS: function(e9, t4) {
    var i7 = new re3(), s7 = t4.split(":");
    return i7.ownerDocument = this, i7.nodeName = t4, i7.name = t4, i7.namespaceURI = e9, i7.specified = true, 2 == s7.length ? (i7.prefix = s7[0], i7.localName = s7[1]) : i7.localName = t4, i7;
  } }, h2(q3, U2), ne3.prototype = { nodeType: d2, hasAttribute: function(e9) {
    return null != this.getAttributeNode(e9);
  }, getAttribute: function(e9) {
    var t4 = this.getAttributeNode(e9);
    return t4 && t4.value || "";
  }, getAttributeNode: function(e9) {
    return this.attributes.getNamedItem(e9);
  }, setAttribute: function(e9, t4) {
    var i7 = this.ownerDocument.createAttribute(e9);
    i7.value = i7.nodeValue = "" + t4, this.setAttributeNode(i7);
  }, removeAttribute: function(e9) {
    var t4 = this.getAttributeNode(e9);
    t4 && this.removeAttributeNode(t4);
  }, appendChild: function(e9) {
    return e9.nodeType === T2 ? this.insertBefore(e9, null) : se3(this, e9);
  }, setAttributeNode: function(e9) {
    return this.attributes.setNamedItem(e9);
  }, setAttributeNodeNS: function(e9) {
    return this.attributes.setNamedItemNS(e9);
  }, removeAttributeNode: function(e9) {
    return this.attributes.removeNamedItem(e9.nodeName);
  }, removeAttributeNS: function(e9, t4) {
    var i7 = this.getAttributeNodeNS(e9, t4);
    i7 && this.removeAttributeNode(i7);
  }, hasAttributeNS: function(e9, t4) {
    return null != this.getAttributeNodeNS(e9, t4);
  }, getAttributeNS: function(e9, t4) {
    var i7 = this.getAttributeNodeNS(e9, t4);
    return i7 && i7.value || "";
  }, setAttributeNS: function(e9, t4, i7) {
    var s7 = this.ownerDocument.createAttributeNS(e9, t4);
    s7.value = s7.nodeValue = "" + i7, this.setAttributeNode(s7);
  }, getAttributeNodeNS: function(e9, t4) {
    return this.attributes.getNamedItemNS(e9, t4);
  }, getElementsByTagName: function(e9) {
    return new D2(this, function(t4) {
      var i7 = [];
      return F2(t4, function(s7) {
        s7 === t4 || s7.nodeType != d2 || "*" !== e9 && s7.tagName != e9 || i7.push(s7);
      }), i7;
    });
  }, getElementsByTagNameNS: function(e9, t4) {
    return new D2(this, function(i7) {
      var s7 = [];
      return F2(i7, function(n6) {
        n6 === i7 || n6.nodeType !== d2 || "*" !== e9 && n6.namespaceURI !== e9 || "*" !== t4 && n6.localName != t4 || s7.push(n6);
      }), s7;
    });
  } }, q3.prototype.getElementsByTagName = ne3.prototype.getElementsByTagName, q3.prototype.getElementsByTagNameNS = ne3.prototype.getElementsByTagNameNS, h2(ne3, U2), re3.prototype.nodeType = c6, h2(re3, U2), ae3.prototype = { data: "", substringData: function(e9, t4) {
    return this.data.substring(e9, e9 + t4);
  }, appendData: function(e9) {
    e9 = this.data + e9, this.nodeValue = this.data = e9, this.length = e9.length;
  }, insertData: function(e9, t4) {
    this.replaceData(e9, 0, t4);
  }, appendChild: function(e9) {
    throw new Error(w4[C3]);
  }, deleteData: function(e9, t4) {
    this.replaceData(e9, t4, "");
  }, replaceData: function(e9, t4, i7) {
    i7 = this.data.substring(0, e9) + i7 + this.data.substring(e9 + t4), this.nodeValue = this.data = i7, this.length = i7.length;
  } }, h2(ae3, U2), oe3.prototype = { nodeName: "#text", nodeType: p6, splitText: function(e9) {
    var t4 = this.data, i7 = t4.substring(e9);
    t4 = t4.substring(0, e9), this.data = this.nodeValue = t4, this.length = t4.length;
    var s7 = this.ownerDocument.createTextNode(i7);
    return this.parentNode && this.parentNode.insertBefore(s7, this.nextSibling), s7;
  } }, h2(oe3, ae3), le3.prototype = { nodeName: "#comment", nodeType: _3 }, h2(le3, ae3), he2.prototype = { nodeName: "#cdata-section", nodeType: m7 }, h2(he2, ae3), ue2.prototype.nodeType = b5, h2(ue2, U2), de2.prototype.nodeType = S3, h2(de2, U2), ce2.prototype.nodeType = f4, h2(ce2, U2), pe3.prototype.nodeType = g2, h2(pe3, U2), me2.prototype.nodeName = "#document-fragment", me2.prototype.nodeType = T2, h2(me2, U2), ge2.prototype.nodeType = y3, h2(ge2, U2), fe2.prototype.serializeToString = function(e9, t4, i7) {
    return ye3.call(e9, t4, i7);
  }, U2.prototype.toString = ye3;
  try {
    if (Object.defineProperty) {
      let Ce2 = function(e9) {
        switch (e9.nodeType) {
          case d2:
          case T2:
            var t4 = [];
            for (e9 = e9.firstChild; e9; ) 7 !== e9.nodeType && 8 !== e9.nodeType && t4.push(Ce2(e9)), e9 = e9.nextSibling;
            return t4.join("");
          default:
            return e9.nodeValue;
        }
      };
      Object.defineProperty(D2.prototype, "length", { get: function() {
        return P3(this), this.$$length;
      } }), Object.defineProperty(U2.prototype, "textContent", { get: function() {
        return Ce2(this);
      }, set: function(e9) {
        switch (this.nodeType) {
          case d2:
          case T2:
            for (; this.firstChild; ) this.removeChild(this.firstChild);
            (e9 || String(e9)) && this.appendChild(this.ownerDocument.createTextNode(e9));
            break;
          default:
            this.data = e9, this.value = e9, this.nodeValue = e9;
        }
      } }), Ee2 = function(e9, t4, i7) {
        e9["$$" + t4] = i7;
      };
    }
  } catch (we2) {
  }
  return Mt.DocumentType = ue2, Mt.DOMException = x3, Mt.DOMImplementation = M3, Mt.Element = ne3, Mt.Node = U2, Mt.NodeList = A2, Mt.XMLSerializer = fe2, Mt;
}
var qt;
var jt = {};
var $t = {};
function Ht() {
  return qt || (qt = 1, e8 = $t, t3 = Bt().freeze, e8.XML_ENTITIES = t3({ amp: "&", apos: "'", gt: ">", lt: "<", quot: '"' }), e8.HTML_ENTITIES = t3({ Aacute: "", aacute: "", Abreve: "", abreve: "", ac: "", acd: "", acE: "", Acirc: "", acirc: "", acute: "", Acy: "", acy: "", AElig: "", aelig: "", af: "", Afr: "", afr: "", Agrave: "", agrave: "", alefsym: "", aleph: "", Alpha: "", alpha: "", Amacr: "", amacr: "", amalg: "", AMP: "&", amp: "&", And: "", and: "", andand: "", andd: "", andslope: "", andv: "", ang: "", ange: "", angle: "", angmsd: "", angmsdaa: "", angmsdab: "", angmsdac: "", angmsdad: "", angmsdae: "", angmsdaf: "", angmsdag: "", angmsdah: "", angrt: "", angrtvb: "", angrtvbd: "", angsph: "", angst: "", angzarr: "", Aogon: "", aogon: "", Aopf: "", aopf: "", ap: "", apacir: "", apE: "", ape: "", apid: "", apos: "'", ApplyFunction: "", approx: "", approxeq: "", Aring: "", aring: "", Ascr: "", ascr: "", Assign: "", ast: "*", asymp: "", asympeq: "", Atilde: "", atilde: "", Auml: "", auml: "", awconint: "", awint: "", backcong: "", backepsilon: "", backprime: "", backsim: "", backsimeq: "", Backslash: "", Barv: "", barvee: "", Barwed: "", barwed: "", barwedge: "", bbrk: "", bbrktbrk: "", bcong: "", Bcy: "", bcy: "", bdquo: "", becaus: "", Because: "", because: "", bemptyv: "", bepsi: "", bernou: "", Bernoullis: "", Beta: "", beta: "", beth: "", between: "", Bfr: "", bfr: "", bigcap: "", bigcirc: "", bigcup: "", bigodot: "", bigoplus: "", bigotimes: "", bigsqcup: "", bigstar: "", bigtriangledown: "", bigtriangleup: "", biguplus: "", bigvee: "", bigwedge: "", bkarow: "", blacklozenge: "", blacksquare: "", blacktriangle: "", blacktriangledown: "", blacktriangleleft: "", blacktriangleright: "", blank: "", blk12: "", blk14: "", blk34: "", block: "", bne: "=", bnequiv: "", bNot: "", bnot: "", Bopf: "", bopf: "", bot: "", bottom: "", bowtie: "", boxbox: "", boxDL: "", boxDl: "", boxdL: "", boxdl: "", boxDR: "", boxDr: "", boxdR: "", boxdr: "", boxH: "", boxh: "", boxHD: "", boxHd: "", boxhD: "", boxhd: "", boxHU: "", boxHu: "", boxhU: "", boxhu: "", boxminus: "", boxplus: "", boxtimes: "", boxUL: "", boxUl: "", boxuL: "", boxul: "", boxUR: "", boxUr: "", boxuR: "", boxur: "", boxV: "", boxv: "", boxVH: "", boxVh: "", boxvH: "", boxvh: "", boxVL: "", boxVl: "", boxvL: "", boxvl: "", boxVR: "", boxVr: "", boxvR: "", boxvr: "", bprime: "", Breve: "", breve: "", brvbar: "", Bscr: "", bscr: "", bsemi: "", bsim: "", bsime: "", bsol: "\\", bsolb: "", bsolhsub: "", bull: "", bullet: "", bump: "", bumpE: "", bumpe: "", Bumpeq: "", bumpeq: "", Cacute: "", cacute: "", Cap: "", cap: "", capand: "", capbrcup: "", capcap: "", capcup: "", capdot: "", CapitalDifferentialD: "", caps: "", caret: "", caron: "", Cayleys: "", ccaps: "", Ccaron: "", ccaron: "", Ccedil: "", ccedil: "", Ccirc: "", ccirc: "", Cconint: "", ccups: "", ccupssm: "", Cdot: "", cdot: "", cedil: "", Cedilla: "", cemptyv: "", cent: "", CenterDot: "", centerdot: "", Cfr: "", cfr: "", CHcy: "", chcy: "", check: "", checkmark: "", Chi: "", chi: "", cir: "", circ: "", circeq: "", circlearrowleft: "", circlearrowright: "", circledast: "", circledcirc: "", circleddash: "", CircleDot: "", circledR: "", circledS: "", CircleMinus: "", CirclePlus: "", CircleTimes: "", cirE: "", cire: "", cirfnint: "", cirmid: "", cirscir: "", ClockwiseContourIntegral: "", CloseCurlyDoubleQuote: "", CloseCurlyQuote: "", clubs: "", clubsuit: "", Colon: "", colon: ":", Colone: "", colone: "", coloneq: "", comma: ",", commat: "@", comp: "", compfn: "", complement: "", complexes: "", cong: "", congdot: "", Congruent: "", Conint: "", conint: "", ContourIntegral: "", Copf: "", copf: "", coprod: "", Coproduct: "", COPY: "", copy: "", copysr: "", CounterClockwiseContourIntegral: "", crarr: "", Cross: "", cross: "", Cscr: "", cscr: "", csub: "", csube: "", csup: "", csupe: "", ctdot: "", cudarrl: "", cudarrr: "", cuepr: "", cuesc: "", cularr: "", cularrp: "", Cup: "", cup: "", cupbrcap: "", CupCap: "", cupcap: "", cupcup: "", cupdot: "", cupor: "", cups: "", curarr: "", curarrm: "", curlyeqprec: "", curlyeqsucc: "", curlyvee: "", curlywedge: "", curren: "", curvearrowleft: "", curvearrowright: "", cuvee: "", cuwed: "", cwconint: "", cwint: "", cylcty: "", Dagger: "", dagger: "", daleth: "", Darr: "", dArr: "", darr: "", dash: "", Dashv: "", dashv: "", dbkarow: "", dblac: "", Dcaron: "", dcaron: "", Dcy: "", dcy: "", DD: "", dd: "", ddagger: "", ddarr: "", DDotrahd: "", ddotseq: "", deg: "", Del: "", Delta: "", delta: "", demptyv: "", dfisht: "", Dfr: "", dfr: "", dHar: "", dharl: "", dharr: "", DiacriticalAcute: "", DiacriticalDot: "", DiacriticalDoubleAcute: "", DiacriticalGrave: "`", DiacriticalTilde: "", diam: "", Diamond: "", diamond: "", diamondsuit: "", diams: "", die: "", DifferentialD: "", digamma: "", disin: "", div: "", divide: "", divideontimes: "", divonx: "", DJcy: "", djcy: "", dlcorn: "", dlcrop: "", dollar: "$", Dopf: "", dopf: "", Dot: "", dot: "", DotDot: "", doteq: "", doteqdot: "", DotEqual: "", dotminus: "", dotplus: "", dotsquare: "", doublebarwedge: "", DoubleContourIntegral: "", DoubleDot: "", DoubleDownArrow: "", DoubleLeftArrow: "", DoubleLeftRightArrow: "", DoubleLeftTee: "", DoubleLongLeftArrow: "", DoubleLongLeftRightArrow: "", DoubleLongRightArrow: "", DoubleRightArrow: "", DoubleRightTee: "", DoubleUpArrow: "", DoubleUpDownArrow: "", DoubleVerticalBar: "", DownArrow: "", Downarrow: "", downarrow: "", DownArrowBar: "", DownArrowUpArrow: "", DownBreve: "", downdownarrows: "", downharpoonleft: "", downharpoonright: "", DownLeftRightVector: "", DownLeftTeeVector: "", DownLeftVector: "", DownLeftVectorBar: "", DownRightTeeVector: "", DownRightVector: "", DownRightVectorBar: "", DownTee: "", DownTeeArrow: "", drbkarow: "", drcorn: "", drcrop: "", Dscr: "", dscr: "", DScy: "", dscy: "", dsol: "", Dstrok: "", dstrok: "", dtdot: "", dtri: "", dtrif: "", duarr: "", duhar: "", dwangle: "", DZcy: "", dzcy: "", dzigrarr: "", Eacute: "", eacute: "", easter: "", Ecaron: "", ecaron: "", ecir: "", Ecirc: "", ecirc: "", ecolon: "", Ecy: "", ecy: "", eDDot: "", Edot: "", eDot: "", edot: "", ee: "", efDot: "", Efr: "", efr: "", eg: "", Egrave: "", egrave: "", egs: "", egsdot: "", el: "", Element: "", elinters: "", ell: "", els: "", elsdot: "", Emacr: "", emacr: "", empty: "", emptyset: "", EmptySmallSquare: "", emptyv: "", EmptyVerySmallSquare: "", emsp: "", emsp13: "", emsp14: "", ENG: "", eng: "", ensp: "", Eogon: "", eogon: "", Eopf: "", eopf: "", epar: "", eparsl: "", eplus: "", epsi: "", Epsilon: "", epsilon: "", epsiv: "", eqcirc: "", eqcolon: "", eqsim: "", eqslantgtr: "", eqslantless: "", Equal: "", equals: "=", EqualTilde: "", equest: "", Equilibrium: "", equiv: "", equivDD: "", eqvparsl: "", erarr: "", erDot: "", Escr: "", escr: "", esdot: "", Esim: "", esim: "", Eta: "", eta: "", ETH: "", eth: "", Euml: "", euml: "", euro: "", excl: "!", exist: "", Exists: "", expectation: "", ExponentialE: "", exponentiale: "", fallingdotseq: "", Fcy: "", fcy: "", female: "", ffilig: "", fflig: "", ffllig: "", Ffr: "", ffr: "", filig: "", FilledSmallSquare: "", FilledVerySmallSquare: "", fjlig: "fj", flat: "", fllig: "", fltns: "", fnof: "", Fopf: "", fopf: "", ForAll: "", forall: "", fork: "", forkv: "", Fouriertrf: "", fpartint: "", frac12: "", frac13: "", frac14: "", frac15: "", frac16: "", frac18: "", frac23: "", frac25: "", frac34: "", frac35: "", frac38: "", frac45: "", frac56: "", frac58: "", frac78: "", frasl: "", frown: "", Fscr: "", fscr: "", gacute: "", Gamma: "", gamma: "", Gammad: "", gammad: "", gap: "", Gbreve: "", gbreve: "", Gcedil: "", Gcirc: "", gcirc: "", Gcy: "", gcy: "", Gdot: "", gdot: "", gE: "", ge: "", gEl: "", gel: "", geq: "", geqq: "", geqslant: "", ges: "", gescc: "", gesdot: "", gesdoto: "", gesdotol: "", gesl: "", gesles: "", Gfr: "", gfr: "", Gg: "", gg: "", ggg: "", gimel: "", GJcy: "", gjcy: "", gl: "", gla: "", glE: "", glj: "", gnap: "", gnapprox: "", gnE: "", gne: "", gneq: "", gneqq: "", gnsim: "", Gopf: "", gopf: "", grave: "`", GreaterEqual: "", GreaterEqualLess: "", GreaterFullEqual: "", GreaterGreater: "", GreaterLess: "", GreaterSlantEqual: "", GreaterTilde: "", Gscr: "", gscr: "", gsim: "", gsime: "", gsiml: "", Gt: "", GT: ">", gt: ">", gtcc: "", gtcir: "", gtdot: "", gtlPar: "", gtquest: "", gtrapprox: "", gtrarr: "", gtrdot: "", gtreqless: "", gtreqqless: "", gtrless: "", gtrsim: "", gvertneqq: "", gvnE: "", Hacek: "", hairsp: "", half: "", hamilt: "", HARDcy: "", hardcy: "", hArr: "", harr: "", harrcir: "", harrw: "", Hat: "^", hbar: "", Hcirc: "", hcirc: "", hearts: "", heartsuit: "", hellip: "", hercon: "", Hfr: "", hfr: "", HilbertSpace: "", hksearow: "", hkswarow: "", hoarr: "", homtht: "", hookleftarrow: "", hookrightarrow: "", Hopf: "", hopf: "", horbar: "", HorizontalLine: "", Hscr: "", hscr: "", hslash: "", Hstrok: "", hstrok: "", HumpDownHump: "", HumpEqual: "", hybull: "", hyphen: "", Iacute: "", iacute: "", ic: "", Icirc: "", icirc: "", Icy: "", icy: "", Idot: "", IEcy: "", iecy: "", iexcl: "", iff: "", Ifr: "", ifr: "", Igrave: "", igrave: "", ii: "", iiiint: "", iiint: "", iinfin: "", iiota: "", IJlig: "", ijlig: "", Im: "", Imacr: "", imacr: "", image: "", ImaginaryI: "", imagline: "", imagpart: "", imath: "", imof: "", imped: "", Implies: "", in: "", incare: "", infin: "", infintie: "", inodot: "", Int: "", int: "", intcal: "", integers: "", Integral: "", intercal: "", Intersection: "", intlarhk: "", intprod: "", InvisibleComma: "", InvisibleTimes: "", IOcy: "", iocy: "", Iogon: "", iogon: "", Iopf: "", iopf: "", Iota: "", iota: "", iprod: "", iquest: "", Iscr: "", iscr: "", isin: "", isindot: "", isinE: "", isins: "", isinsv: "", isinv: "", it: "", Itilde: "", itilde: "", Iukcy: "", iukcy: "", Iuml: "", iuml: "", Jcirc: "", jcirc: "", Jcy: "", jcy: "", Jfr: "", jfr: "", jmath: "", Jopf: "", jopf: "", Jscr: "", jscr: "", Jsercy: "", jsercy: "", Jukcy: "", jukcy: "", Kappa: "", kappa: "", kappav: "", Kcedil: "", kcedil: "", Kcy: "", kcy: "", Kfr: "", kfr: "", kgreen: "", KHcy: "", khcy: "", KJcy: "", kjcy: "", Kopf: "", kopf: "", Kscr: "", kscr: "", lAarr: "", Lacute: "", lacute: "", laemptyv: "", lagran: "", Lambda: "", lambda: "", Lang: "", lang: "", langd: "", langle: "", lap: "", Laplacetrf: "", laquo: "", Larr: "", lArr: "", larr: "", larrb: "", larrbfs: "", larrfs: "", larrhk: "", larrlp: "", larrpl: "", larrsim: "", larrtl: "", lat: "", lAtail: "", latail: "", late: "", lates: "", lBarr: "", lbarr: "", lbbrk: "", lbrace: "{", lbrack: "[", lbrke: "", lbrksld: "", lbrkslu: "", Lcaron: "", lcaron: "", Lcedil: "", lcedil: "", lceil: "", lcub: "{", Lcy: "", lcy: "", ldca: "", ldquo: "", ldquor: "", ldrdhar: "", ldrushar: "", ldsh: "", lE: "", le: "", LeftAngleBracket: "", LeftArrow: "", Leftarrow: "", leftarrow: "", LeftArrowBar: "", LeftArrowRightArrow: "", leftarrowtail: "", LeftCeiling: "", LeftDoubleBracket: "", LeftDownTeeVector: "", LeftDownVector: "", LeftDownVectorBar: "", LeftFloor: "", leftharpoondown: "", leftharpoonup: "", leftleftarrows: "", LeftRightArrow: "", Leftrightarrow: "", leftrightarrow: "", leftrightarrows: "", leftrightharpoons: "", leftrightsquigarrow: "", LeftRightVector: "", LeftTee: "", LeftTeeArrow: "", LeftTeeVector: "", leftthreetimes: "", LeftTriangle: "", LeftTriangleBar: "", LeftTriangleEqual: "", LeftUpDownVector: "", LeftUpTeeVector: "", LeftUpVector: "", LeftUpVectorBar: "", LeftVector: "", LeftVectorBar: "", lEg: "", leg: "", leq: "", leqq: "", leqslant: "", les: "", lescc: "", lesdot: "", lesdoto: "", lesdotor: "", lesg: "", lesges: "", lessapprox: "", lessdot: "", lesseqgtr: "", lesseqqgtr: "", LessEqualGreater: "", LessFullEqual: "", LessGreater: "", lessgtr: "", LessLess: "", lesssim: "", LessSlantEqual: "", LessTilde: "", lfisht: "", lfloor: "", Lfr: "", lfr: "", lg: "", lgE: "", lHar: "", lhard: "", lharu: "", lharul: "", lhblk: "", LJcy: "", ljcy: "", Ll: "", ll: "", llarr: "", llcorner: "", Lleftarrow: "", llhard: "", lltri: "", Lmidot: "", lmidot: "", lmoust: "", lmoustache: "", lnap: "", lnapprox: "", lnE: "", lne: "", lneq: "", lneqq: "", lnsim: "", loang: "", loarr: "", lobrk: "", LongLeftArrow: "", Longleftarrow: "", longleftarrow: "", LongLeftRightArrow: "", Longleftrightarrow: "", longleftrightarrow: "", longmapsto: "", LongRightArrow: "", Longrightarrow: "", longrightarrow: "", looparrowleft: "", looparrowright: "", lopar: "", Lopf: "", lopf: "", loplus: "", lotimes: "", lowast: "", lowbar: "_", LowerLeftArrow: "", LowerRightArrow: "", loz: "", lozenge: "", lozf: "", lpar: "(", lparlt: "", lrarr: "", lrcorner: "", lrhar: "", lrhard: "", lrm: "", lrtri: "", lsaquo: "", Lscr: "", lscr: "", Lsh: "", lsh: "", lsim: "", lsime: "", lsimg: "", lsqb: "[", lsquo: "", lsquor: "", Lstrok: "", lstrok: "", Lt: "", LT: "<", lt: "<", ltcc: "", ltcir: "", ltdot: "", lthree: "", ltimes: "", ltlarr: "", ltquest: "", ltri: "", ltrie: "", ltrif: "", ltrPar: "", lurdshar: "", luruhar: "", lvertneqq: "", lvnE: "", macr: "", male: "", malt: "", maltese: "", Map: "", map: "", mapsto: "", mapstodown: "", mapstoleft: "", mapstoup: "", marker: "", mcomma: "", Mcy: "", mcy: "", mdash: "", mDDot: "", measuredangle: "", MediumSpace: "", Mellintrf: "", Mfr: "", mfr: "", mho: "", micro: "", mid: "", midast: "*", midcir: "", middot: "", minus: "", minusb: "", minusd: "", minusdu: "", MinusPlus: "", mlcp: "", mldr: "", mnplus: "", models: "", Mopf: "", mopf: "", mp: "", Mscr: "", mscr: "", mstpos: "", Mu: "", mu: "", multimap: "", mumap: "", nabla: "", Nacute: "", nacute: "", nang: "", nap: "", napE: "", napid: "", napos: "", napprox: "", natur: "", natural: "", naturals: "", nbsp: "", nbump: "", nbumpe: "", ncap: "", Ncaron: "", ncaron: "", Ncedil: "", ncedil: "", ncong: "", ncongdot: "", ncup: "", Ncy: "", ncy: "", ndash: "", ne: "", nearhk: "", neArr: "", nearr: "", nearrow: "", nedot: "", NegativeMediumSpace: "", NegativeThickSpace: "", NegativeThinSpace: "", NegativeVeryThinSpace: "", nequiv: "", nesear: "", nesim: "", NestedGreaterGreater: "", NestedLessLess: "", NewLine: "\n", nexist: "", nexists: "", Nfr: "", nfr: "", ngE: "", nge: "", ngeq: "", ngeqq: "", ngeqslant: "", nges: "", nGg: "", ngsim: "", nGt: "", ngt: "", ngtr: "", nGtv: "", nhArr: "", nharr: "", nhpar: "", ni: "", nis: "", nisd: "", niv: "", NJcy: "", njcy: "", nlArr: "", nlarr: "", nldr: "", nlE: "", nle: "", nLeftarrow: "", nleftarrow: "", nLeftrightarrow: "", nleftrightarrow: "", nleq: "", nleqq: "", nleqslant: "", nles: "", nless: "", nLl: "", nlsim: "", nLt: "", nlt: "", nltri: "", nltrie: "", nLtv: "", nmid: "", NoBreak: "", NonBreakingSpace: "", Nopf: "", nopf: "", Not: "", not: "", NotCongruent: "", NotCupCap: "", NotDoubleVerticalBar: "", NotElement: "", NotEqual: "", NotEqualTilde: "", NotExists: "", NotGreater: "", NotGreaterEqual: "", NotGreaterFullEqual: "", NotGreaterGreater: "", NotGreaterLess: "", NotGreaterSlantEqual: "", NotGreaterTilde: "", NotHumpDownHump: "", NotHumpEqual: "", notin: "", notindot: "", notinE: "", notinva: "", notinvb: "", notinvc: "", NotLeftTriangle: "", NotLeftTriangleBar: "", NotLeftTriangleEqual: "", NotLess: "", NotLessEqual: "", NotLessGreater: "", NotLessLess: "", NotLessSlantEqual: "", NotLessTilde: "", NotNestedGreaterGreater: "", NotNestedLessLess: "", notni: "", notniva: "", notnivb: "", notnivc: "", NotPrecedes: "", NotPrecedesEqual: "", NotPrecedesSlantEqual: "", NotReverseElement: "", NotRightTriangle: "", NotRightTriangleBar: "", NotRightTriangleEqual: "", NotSquareSubset: "", NotSquareSubsetEqual: "", NotSquareSuperset: "", NotSquareSupersetEqual: "", NotSubset: "", NotSubsetEqual: "", NotSucceeds: "", NotSucceedsEqual: "", NotSucceedsSlantEqual: "", NotSucceedsTilde: "", NotSuperset: "", NotSupersetEqual: "", NotTilde: "", NotTildeEqual: "", NotTildeFullEqual: "", NotTildeTilde: "", NotVerticalBar: "", npar: "", nparallel: "", nparsl: "", npart: "", npolint: "", npr: "", nprcue: "", npre: "", nprec: "", npreceq: "", nrArr: "", nrarr: "", nrarrc: "", nrarrw: "", nRightarrow: "", nrightarrow: "", nrtri: "", nrtrie: "", nsc: "", nsccue: "", nsce: "", Nscr: "", nscr: "", nshortmid: "", nshortparallel: "", nsim: "", nsime: "", nsimeq: "", nsmid: "", nspar: "", nsqsube: "", nsqsupe: "", nsub: "", nsubE: "", nsube: "", nsubset: "", nsubseteq: "", nsubseteqq: "", nsucc: "", nsucceq: "", nsup: "", nsupE: "", nsupe: "", nsupset: "", nsupseteq: "", nsupseteqq: "", ntgl: "", Ntilde: "", ntilde: "", ntlg: "", ntriangleleft: "", ntrianglelefteq: "", ntriangleright: "", ntrianglerighteq: "", Nu: "", nu: "", num: "#", numero: "", numsp: "", nvap: "", nVDash: "", nVdash: "", nvDash: "", nvdash: "", nvge: "", nvgt: ">", nvHarr: "", nvinfin: "", nvlArr: "", nvle: "", nvlt: "<", nvltrie: "", nvrArr: "", nvrtrie: "", nvsim: "", nwarhk: "", nwArr: "", nwarr: "", nwarrow: "", nwnear: "", Oacute: "", oacute: "", oast: "", ocir: "", Ocirc: "", ocirc: "", Ocy: "", ocy: "", odash: "", Odblac: "", odblac: "", odiv: "", odot: "", odsold: "", OElig: "", oelig: "", ofcir: "", Ofr: "", ofr: "", ogon: "", Ograve: "", ograve: "", ogt: "", ohbar: "", ohm: "", oint: "", olarr: "", olcir: "", olcross: "", oline: "", olt: "", Omacr: "", omacr: "", Omega: "", omega: "", Omicron: "", omicron: "", omid: "", ominus: "", Oopf: "", oopf: "", opar: "", OpenCurlyDoubleQuote: "", OpenCurlyQuote: "", operp: "", oplus: "", Or: "", or: "", orarr: "", ord: "", order: "", orderof: "", ordf: "", ordm: "", origof: "", oror: "", orslope: "", orv: "", oS: "", Oscr: "", oscr: "", Oslash: "", oslash: "", osol: "", Otilde: "", otilde: "", Otimes: "", otimes: "", otimesas: "", Ouml: "", ouml: "", ovbar: "", OverBar: "", OverBrace: "", OverBracket: "", OverParenthesis: "", par: "", para: "", parallel: "", parsim: "", parsl: "", part: "", PartialD: "", Pcy: "", pcy: "", percnt: "%", period: ".", permil: "", perp: "", pertenk: "", Pfr: "", pfr: "", Phi: "", phi: "", phiv: "", phmmat: "", phone: "", Pi: "", pi: "", pitchfork: "", piv: "", planck: "", planckh: "", plankv: "", plus: "+", plusacir: "", plusb: "", pluscir: "", plusdo: "", plusdu: "", pluse: "", PlusMinus: "", plusmn: "", plussim: "", plustwo: "", pm: "", Poincareplane: "", pointint: "", Popf: "", popf: "", pound: "", Pr: "", pr: "", prap: "", prcue: "", prE: "", pre: "", prec: "", precapprox: "", preccurlyeq: "", Precedes: "", PrecedesEqual: "", PrecedesSlantEqual: "", PrecedesTilde: "", preceq: "", precnapprox: "", precneqq: "", precnsim: "", precsim: "", Prime: "", prime: "", primes: "", prnap: "", prnE: "", prnsim: "", prod: "", Product: "", profalar: "", profline: "", profsurf: "", prop: "", Proportion: "", Proportional: "", propto: "", prsim: "", prurel: "", Pscr: "", pscr: "", Psi: "", psi: "", puncsp: "", Qfr: "", qfr: "", qint: "", Qopf: "", qopf: "", qprime: "", Qscr: "", qscr: "", quaternions: "", quatint: "", quest: "?", questeq: "", QUOT: '"', quot: '"', rAarr: "", race: "", Racute: "", racute: "", radic: "", raemptyv: "", Rang: "", rang: "", rangd: "", range: "", rangle: "", raquo: "", Rarr: "", rArr: "", rarr: "", rarrap: "", rarrb: "", rarrbfs: "", rarrc: "", rarrfs: "", rarrhk: "", rarrlp: "", rarrpl: "", rarrsim: "", Rarrtl: "", rarrtl: "", rarrw: "", rAtail: "", ratail: "", ratio: "", rationals: "", RBarr: "", rBarr: "", rbarr: "", rbbrk: "", rbrace: "}", rbrack: "]", rbrke: "", rbrksld: "", rbrkslu: "", Rcaron: "", rcaron: "", Rcedil: "", rcedil: "", rceil: "", rcub: "}", Rcy: "", rcy: "", rdca: "", rdldhar: "", rdquo: "", rdquor: "", rdsh: "", Re: "", real: "", realine: "", realpart: "", reals: "", rect: "", REG: "", reg: "", ReverseElement: "", ReverseEquilibrium: "", ReverseUpEquilibrium: "", rfisht: "", rfloor: "", Rfr: "", rfr: "", rHar: "", rhard: "", rharu: "", rharul: "", Rho: "", rho: "", rhov: "", RightAngleBracket: "", RightArrow: "", Rightarrow: "", rightarrow: "", RightArrowBar: "", RightArrowLeftArrow: "", rightarrowtail: "", RightCeiling: "", RightDoubleBracket: "", RightDownTeeVector: "", RightDownVector: "", RightDownVectorBar: "", RightFloor: "", rightharpoondown: "", rightharpoonup: "", rightleftarrows: "", rightleftharpoons: "", rightrightarrows: "", rightsquigarrow: "", RightTee: "", RightTeeArrow: "", RightTeeVector: "", rightthreetimes: "", RightTriangle: "", RightTriangleBar: "", RightTriangleEqual: "", RightUpDownVector: "", RightUpTeeVector: "", RightUpVector: "", RightUpVectorBar: "", RightVector: "", RightVectorBar: "", ring: "", risingdotseq: "", rlarr: "", rlhar: "", rlm: "", rmoust: "", rmoustache: "", rnmid: "", roang: "", roarr: "", robrk: "", ropar: "", Ropf: "", ropf: "", roplus: "", rotimes: "", RoundImplies: "", rpar: ")", rpargt: "", rppolint: "", rrarr: "", Rrightarrow: "", rsaquo: "", Rscr: "", rscr: "", Rsh: "", rsh: "", rsqb: "]", rsquo: "", rsquor: "", rthree: "", rtimes: "", rtri: "", rtrie: "", rtrif: "", rtriltri: "", RuleDelayed: "", ruluhar: "", rx: "", Sacute: "", sacute: "", sbquo: "", Sc: "", sc: "", scap: "", Scaron: "", scaron: "", sccue: "", scE: "", sce: "", Scedil: "", scedil: "", Scirc: "", scirc: "", scnap: "", scnE: "", scnsim: "", scpolint: "", scsim: "", Scy: "", scy: "", sdot: "", sdotb: "", sdote: "", searhk: "", seArr: "", searr: "", searrow: "", sect: "", semi: ";", seswar: "", setminus: "", setmn: "", sext: "", Sfr: "", sfr: "", sfrown: "", sharp: "", SHCHcy: "", shchcy: "", SHcy: "", shcy: "", ShortDownArrow: "", ShortLeftArrow: "", shortmid: "", shortparallel: "", ShortRightArrow: "", ShortUpArrow: "", shy: "", Sigma: "", sigma: "", sigmaf: "", sigmav: "", sim: "", simdot: "", sime: "", simeq: "", simg: "", simgE: "", siml: "", simlE: "", simne: "", simplus: "", simrarr: "", slarr: "", SmallCircle: "", smallsetminus: "", smashp: "", smeparsl: "", smid: "", smile: "", smt: "", smte: "", smtes: "", SOFTcy: "", softcy: "", sol: "/", solb: "", solbar: "", Sopf: "", sopf: "", spades: "", spadesuit: "", spar: "", sqcap: "", sqcaps: "", sqcup: "", sqcups: "", Sqrt: "", sqsub: "", sqsube: "", sqsubset: "", sqsubseteq: "", sqsup: "", sqsupe: "", sqsupset: "", sqsupseteq: "", squ: "", Square: "", square: "", SquareIntersection: "", SquareSubset: "", SquareSubsetEqual: "", SquareSuperset: "", SquareSupersetEqual: "", SquareUnion: "", squarf: "", squf: "", srarr: "", Sscr: "", sscr: "", ssetmn: "", ssmile: "", sstarf: "", Star: "", star: "", starf: "", straightepsilon: "", straightphi: "", strns: "", Sub: "", sub: "", subdot: "", subE: "", sube: "", subedot: "", submult: "", subnE: "", subne: "", subplus: "", subrarr: "", Subset: "", subset: "", subseteq: "", subseteqq: "", SubsetEqual: "", subsetneq: "", subsetneqq: "", subsim: "", subsub: "", subsup: "", succ: "", succapprox: "", succcurlyeq: "", Succeeds: "", SucceedsEqual: "", SucceedsSlantEqual: "", SucceedsTilde: "", succeq: "", succnapprox: "", succneqq: "", succnsim: "", succsim: "", SuchThat: "", Sum: "", sum: "", sung: "", Sup: "", sup: "", sup1: "", sup2: "", sup3: "", supdot: "", supdsub: "", supE: "", supe: "", supedot: "", Superset: "", SupersetEqual: "", suphsol: "", suphsub: "", suplarr: "", supmult: "", supnE: "", supne: "", supplus: "", Supset: "", supset: "", supseteq: "", supseteqq: "", supsetneq: "", supsetneqq: "", supsim: "", supsub: "", supsup: "", swarhk: "", swArr: "", swarr: "", swarrow: "", swnwar: "", szlig: "", Tab: "	", target: "", Tau: "", tau: "", tbrk: "", Tcaron: "", tcaron: "", Tcedil: "", tcedil: "", Tcy: "", tcy: "", tdot: "", telrec: "", Tfr: "", tfr: "", there4: "", Therefore: "", therefore: "", Theta: "", theta: "", thetasym: "", thetav: "", thickapprox: "", thicksim: "", ThickSpace: "", thinsp: "", ThinSpace: "", thkap: "", thksim: "", THORN: "", thorn: "", Tilde: "", tilde: "", TildeEqual: "", TildeFullEqual: "", TildeTilde: "", times: "", timesb: "", timesbar: "", timesd: "", tint: "", toea: "", top: "", topbot: "", topcir: "", Topf: "", topf: "", topfork: "", tosa: "", tprime: "", TRADE: "", trade: "", triangle: "", triangledown: "", triangleleft: "", trianglelefteq: "", triangleq: "", triangleright: "", trianglerighteq: "", tridot: "", trie: "", triminus: "", TripleDot: "", triplus: "", trisb: "", tritime: "", trpezium: "", Tscr: "", tscr: "", TScy: "", tscy: "", TSHcy: "", tshcy: "", Tstrok: "", tstrok: "", twixt: "", twoheadleftarrow: "", twoheadrightarrow: "", Uacute: "", uacute: "", Uarr: "", uArr: "", uarr: "", Uarrocir: "", Ubrcy: "", ubrcy: "", Ubreve: "", ubreve: "", Ucirc: "", ucirc: "", Ucy: "", ucy: "", udarr: "", Udblac: "", udblac: "", udhar: "", ufisht: "", Ufr: "", ufr: "", Ugrave: "", ugrave: "", uHar: "", uharl: "", uharr: "", uhblk: "", ulcorn: "", ulcorner: "", ulcrop: "", ultri: "", Umacr: "", umacr: "", uml: "", UnderBar: "_", UnderBrace: "", UnderBracket: "", UnderParenthesis: "", Union: "", UnionPlus: "", Uogon: "", uogon: "", Uopf: "", uopf: "", UpArrow: "", Uparrow: "", uparrow: "", UpArrowBar: "", UpArrowDownArrow: "", UpDownArrow: "", Updownarrow: "", updownarrow: "", UpEquilibrium: "", upharpoonleft: "", upharpoonright: "", uplus: "", UpperLeftArrow: "", UpperRightArrow: "", Upsi: "", upsi: "", upsih: "", Upsilon: "", upsilon: "", UpTee: "", UpTeeArrow: "", upuparrows: "", urcorn: "", urcorner: "", urcrop: "", Uring: "", uring: "", urtri: "", Uscr: "", uscr: "", utdot: "", Utilde: "", utilde: "", utri: "", utrif: "", uuarr: "", Uuml: "", uuml: "", uwangle: "", vangrt: "", varepsilon: "", varkappa: "", varnothing: "", varphi: "", varpi: "", varpropto: "", vArr: "", varr: "", varrho: "", varsigma: "", varsubsetneq: "", varsubsetneqq: "", varsupsetneq: "", varsupsetneqq: "", vartheta: "", vartriangleleft: "", vartriangleright: "", Vbar: "", vBar: "", vBarv: "", Vcy: "", vcy: "", VDash: "", Vdash: "", vDash: "", vdash: "", Vdashl: "", Vee: "", vee: "", veebar: "", veeeq: "", vellip: "", Verbar: "", verbar: "|", Vert: "", vert: "|", VerticalBar: "", VerticalLine: "|", VerticalSeparator: "", VerticalTilde: "", VeryThinSpace: "", Vfr: "", vfr: "", vltri: "", vnsub: "", vnsup: "", Vopf: "", vopf: "", vprop: "", vrtri: "", Vscr: "", vscr: "", vsubnE: "", vsubne: "", vsupnE: "", vsupne: "", Vvdash: "", vzigzag: "", Wcirc: "", wcirc: "", wedbar: "", Wedge: "", wedge: "", wedgeq: "", weierp: "", Wfr: "", wfr: "", Wopf: "", wopf: "", wp: "", wr: "", wreath: "", Wscr: "", wscr: "", xcap: "", xcirc: "", xcup: "", xdtri: "", Xfr: "", xfr: "", xhArr: "", xharr: "", Xi: "", xi: "", xlArr: "", xlarr: "", xmap: "", xnis: "", xodot: "", Xopf: "", xopf: "", xoplus: "", xotime: "", xrArr: "", xrarr: "", Xscr: "", xscr: "", xsqcup: "", xuplus: "", xutri: "", xvee: "", xwedge: "", Yacute: "", yacute: "", YAcy: "", yacy: "", Ycirc: "", ycirc: "", Ycy: "", ycy: "", yen: "", Yfr: "", yfr: "", YIcy: "", yicy: "", Yopf: "", yopf: "", Yscr: "", yscr: "", YUcy: "", yucy: "", Yuml: "", yuml: "", Zacute: "", zacute: "", Zcaron: "", zcaron: "", Zcy: "", zcy: "", Zdot: "", zdot: "", zeetrf: "", ZeroWidthSpace: "", Zeta: "", zeta: "", Zfr: "", zfr: "", ZHcy: "", zhcy: "", zigrarr: "", Zopf: "", zopf: "", Zscr: "", zscr: "", zwj: "", zwnj: "" }), e8.entityMap = e8.HTML_ENTITIES), $t;
  var e8, t3;
}
var Vt;
var zt;
var Wt;
var Gt = {};
function Xt() {
  if (Vt) return Gt;
  Vt = 1;
  var e8 = Bt().NAMESPACE, t3 = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/, i6 = new RegExp("[\\-\\.0-9" + t3.source.slice(1, -1) + "\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"), s6 = new RegExp("^" + t3.source + i6.source + "*(?::" + t3.source + i6.source + "*)?$"), n5 = 0, r4 = 1, a6 = 2, o4 = 3, l7 = 4, h2 = 5, u5 = 6, d2 = 7;
  function c6(e9, t4) {
    this.message = e9, this.locator = t4, Error.captureStackTrace && Error.captureStackTrace(this, c6);
  }
  function p6() {
  }
  function m7(t4, i7, s7, n6, r5) {
    function a7(e9) {
      if (e9 > 65535) {
        var t5 = 55296 + ((e9 -= 65536) >> 10), i8 = 56320 + (1023 & e9);
        return String.fromCharCode(t5, i8);
      }
      return String.fromCharCode(e9);
    }
    function o5(e9) {
      var t5 = e9.slice(1, -1);
      return Object.hasOwnProperty.call(s7, t5) ? s7[t5] : "#" === t5.charAt(0) ? a7(parseInt(t5.substr(1).replace("x", "0x"))) : (r5.error("entity not found:" + e9), e9);
    }
    function l8(e9) {
      if (e9 > C3) {
        var i8 = t4.substring(C3, e9).replace(/&#?\w+;/g, o5);
        m8 && h3(C3), n6.characters(i8, 0, e9 - C3), C3 = e9;
      }
    }
    function h3(e9, i8) {
      for (; e9 >= d3 && (i8 = p7.exec(t4)); ) u6 = i8.index, d3 = u6 + i8[0].length, m8.lineNumber++;
      m8.columnNumber = e9 - u6 + 1;
    }
    for (var u6 = 0, d3 = 0, p7 = /.*(?:\r\n?|\n)|.*$/g, m8 = n6.locator, b6 = [{ currentNSMap: i7 }], w5 = {}, C3 = 0; ; ) {
      try {
        var k2 = t4.indexOf("<", C3);
        if (k2 < 0) {
          if (!t4.substr(C3).match(/^\s*$/)) {
            var I2 = n6.doc, x3 = I2.createTextNode(t4.substr(C3));
            I2.appendChild(x3), n6.currentElement = x3;
          }
          return;
        }
        switch (k2 > C3 && l8(k2), t4.charAt(k2 + 1)) {
          case "/":
            var A2 = t4.indexOf(">", k2 + 3), D2 = t4.substring(k2 + 2, A2).replace(/[ \t\n\r]+$/g, ""), P3 = b6.pop();
            A2 < 0 ? (D2 = t4.substring(k2 + 2).replace(/[\s<].*/, ""), r5.error("end tag name: " + D2 + " is not complete:" + P3.tagName), A2 = k2 + 1 + D2.length) : D2.match(/\s</) && (D2 = D2.replace(/[\s<].*/, ""), r5.error("end tag name: " + D2 + " maybe not complete"), A2 = k2 + 1 + D2.length);
            var L3 = P3.localNSMap, O2 = P3.tagName == D2;
            if (O2 || P3.tagName && P3.tagName.toLowerCase() == D2.toLowerCase()) {
              if (n6.endElement(P3.uri, P3.localName, D2), L3) for (var N3 in L3) Object.prototype.hasOwnProperty.call(L3, N3) && n6.endPrefixMapping(N3);
              O2 || r5.fatalError("end tag name: " + D2 + " is not match the current start tagName:" + P3.tagName);
            } else b6.push(P3);
            A2++;
            break;
          case "?":
            m8 && h3(k2), A2 = S3(t4, k2, n6);
            break;
          case "!":
            m8 && h3(k2), A2 = T2(t4, k2, n6, r5);
            break;
          default:
            m8 && h3(k2);
            var R2 = new E3(), M3 = b6[b6.length - 1].currentNSMap, U2 = (A2 = f4(t4, k2, R2, M3, o5, r5), R2.length);
            if (!R2.closed && v3(t4, A2, R2.tagName, w5) && (R2.closed = true, s7.nbsp || r5.warning("unclosed xml attribute")), m8 && U2) {
              for (var B2 = g2(m8, {}), F2 = 0; F2 < U2; F2++) {
                var q3 = R2[F2];
                h3(q3.offset), q3.locator = g2(m8, {});
              }
              n6.locator = B2, y3(R2, n6, M3) && b6.push(R2), n6.locator = m8;
            } else y3(R2, n6, M3) && b6.push(R2);
            e8.isHTML(R2.uri) && !R2.closed ? A2 = _3(t4, A2, R2.tagName, o5, n6) : A2++;
        }
      } catch (j4) {
        if (j4 instanceof c6) throw j4;
        r5.error("element parse error: " + j4), A2 = -1;
      }
      A2 > C3 ? C3 = A2 : l8(Math.max(k2, C3) + 1);
    }
  }
  function g2(e9, t4) {
    return t4.lineNumber = e9.lineNumber, t4.columnNumber = e9.columnNumber, t4;
  }
  function f4(t4, i7, s7, c7, p7, m8) {
    function g3(e9, t5, i8) {
      s7.attributeNames.hasOwnProperty(e9) && m8.fatalError("Attribute " + e9 + " redefined"), s7.addValue(e9, t5.replace(/[\t\n\r]/g, " ").replace(/&#?\w+;/g, p7), i8);
    }
    for (var f5, y4 = ++i7, _4 = n5; ; ) {
      var v4 = t4.charAt(y4);
      switch (v4) {
        case "=":
          if (_4 === r4) f5 = t4.slice(i7, y4), _4 = o4;
          else {
            if (_4 !== a6) throw new Error("attribute equal must after attrName");
            _4 = o4;
          }
          break;
        case "'":
        case '"':
          if (_4 === o4 || _4 === r4) {
            if (_4 === r4 && (m8.warning('attribute value must after "="'), f5 = t4.slice(i7, y4)), i7 = y4 + 1, !((y4 = t4.indexOf(v4, i7)) > 0)) throw new Error("attribute value no end '" + v4 + "' match");
            g3(f5, b6 = t4.slice(i7, y4), i7 - 1), _4 = h2;
          } else {
            if (_4 != l7) throw new Error('attribute value must after "="');
            g3(f5, b6 = t4.slice(i7, y4), i7), m8.warning('attribute "' + f5 + '" missed start quot(' + v4 + ")!!"), i7 = y4 + 1, _4 = h2;
          }
          break;
        case "/":
          switch (_4) {
            case n5:
              s7.setTagName(t4.slice(i7, y4));
            case h2:
            case u5:
            case d2:
              _4 = d2, s7.closed = true;
            case l7:
            case r4:
              break;
            case a6:
              s7.closed = true;
              break;
            default:
              throw new Error("attribute invalid close char('/')");
          }
          break;
        case "":
          return m8.error("unexpected end of input"), _4 == n5 && s7.setTagName(t4.slice(i7, y4)), y4;
        case ">":
          switch (_4) {
            case n5:
              s7.setTagName(t4.slice(i7, y4));
            case h2:
            case u5:
            case d2:
              break;
            case l7:
            case r4:
              "/" === (b6 = t4.slice(i7, y4)).slice(-1) && (s7.closed = true, b6 = b6.slice(0, -1));
            case a6:
              _4 === a6 && (b6 = f5), _4 == l7 ? (m8.warning('attribute "' + b6 + '" missed quot(")!'), g3(f5, b6, i7)) : (e8.isHTML(c7[""]) && b6.match(/^(?:disabled|checked|selected)$/i) || m8.warning('attribute "' + b6 + '" missed value!! "' + b6 + '" instead!!'), g3(b6, b6, i7));
              break;
            case o4:
              throw new Error("attribute value missed!!");
          }
          return y4;
        case "":
          v4 = " ";
        default:
          if (v4 <= " ") switch (_4) {
            case n5:
              s7.setTagName(t4.slice(i7, y4)), _4 = u5;
              break;
            case r4:
              f5 = t4.slice(i7, y4), _4 = a6;
              break;
            case l7:
              var b6 = t4.slice(i7, y4);
              m8.warning('attribute "' + b6 + '" missed quot(")!!'), g3(f5, b6, i7);
            case h2:
              _4 = u5;
          }
          else switch (_4) {
            case a6:
              s7.tagName, e8.isHTML(c7[""]) && f5.match(/^(?:disabled|checked|selected)$/i) || m8.warning('attribute "' + f5 + '" missed value!! "' + f5 + '" instead2!!'), g3(f5, f5, i7), i7 = y4, _4 = r4;
              break;
            case h2:
              m8.warning('attribute space is required"' + f5 + '"!!');
            case u5:
              _4 = r4, i7 = y4;
              break;
            case o4:
              _4 = l7, i7 = y4;
              break;
            case d2:
              throw new Error("elements closed character '/' and '>' must be connected to");
          }
      }
      y4++;
    }
  }
  function y3(t4, i7, s7) {
    for (var n6 = t4.tagName, r5 = null, a7 = t4.length; a7--; ) {
      var o5 = t4[a7], l8 = o5.qName, h3 = o5.value;
      if ((p7 = l8.indexOf(":")) > 0) var u6 = o5.prefix = l8.slice(0, p7), d3 = l8.slice(p7 + 1), c7 = "xmlns" === u6 && d3;
      else d3 = l8, u6 = null, c7 = "xmlns" === l8 && "";
      o5.localName = d3, false !== c7 && (null == r5 && (r5 = {}, b5(s7, s7 = {})), s7[c7] = r5[c7] = h3, o5.uri = e8.XMLNS, i7.startPrefixMapping(c7, h3));
    }
    for (a7 = t4.length; a7--; ) {
      (u6 = (o5 = t4[a7]).prefix) && ("xml" === u6 && (o5.uri = e8.XML), "xmlns" !== u6 && (o5.uri = s7[u6 || ""]));
    }
    var p7;
    (p7 = n6.indexOf(":")) > 0 ? (u6 = t4.prefix = n6.slice(0, p7), d3 = t4.localName = n6.slice(p7 + 1)) : (u6 = null, d3 = t4.localName = n6);
    var m8 = t4.uri = s7[u6 || ""];
    if (i7.startElement(m8, d3, n6, t4), !t4.closed) return t4.currentNSMap = s7, t4.localNSMap = r5, true;
    if (i7.endElement(m8, d3, n6), r5) for (u6 in r5) Object.prototype.hasOwnProperty.call(r5, u6) && i7.endPrefixMapping(u6);
  }
  function _3(e9, t4, i7, s7, n6) {
    if (/^(?:script|textarea)$/i.test(i7)) {
      var r5 = e9.indexOf("</" + i7 + ">", t4), a7 = e9.substring(t4 + 1, r5);
      if (/[&<]/.test(a7)) return /^script$/i.test(i7) ? (n6.characters(a7, 0, a7.length), r5) : (a7 = a7.replace(/&#?\w+;/g, s7), n6.characters(a7, 0, a7.length), r5);
    }
    return t4 + 1;
  }
  function v3(e9, t4, i7, s7) {
    var n6 = s7[i7];
    return null == n6 && ((n6 = e9.lastIndexOf("</" + i7 + ">")) < t4 && (n6 = e9.lastIndexOf("</" + i7)), s7[i7] = n6), n6 < t4;
  }
  function b5(e9, t4) {
    for (var i7 in e9) Object.prototype.hasOwnProperty.call(e9, i7) && (t4[i7] = e9[i7]);
  }
  function T2(e9, t4, i7, s7) {
    if ("-" === e9.charAt(t4 + 2)) return "-" === e9.charAt(t4 + 3) ? (n6 = e9.indexOf("-->", t4 + 4)) > t4 ? (i7.comment(e9, t4 + 4, n6 - t4 - 4), n6 + 3) : (s7.error("Unclosed comment"), -1) : -1;
    if ("CDATA[" == e9.substr(t4 + 3, 6)) {
      var n6 = e9.indexOf("]]>", t4 + 9);
      return i7.startCDATA(), i7.characters(e9, t4 + 9, n6 - t4 - 9), i7.endCDATA(), n6 + 3;
    }
    var r5 = w4(e9, t4), a7 = r5.length;
    if (a7 > 1 && /!doctype/i.test(r5[0][0])) {
      var o5 = r5[1][0], l8 = false, h3 = false;
      a7 > 3 && (/^public$/i.test(r5[2][0]) ? (l8 = r5[3][0], h3 = a7 > 4 && r5[4][0]) : /^system$/i.test(r5[2][0]) && (h3 = r5[3][0]));
      var u6 = r5[a7 - 1];
      return i7.startDTD(o5, l8, h3), i7.endDTD(), u6.index + u6[0].length;
    }
    return -1;
  }
  function S3(e9, t4, i7) {
    var s7 = e9.indexOf("?>", t4);
    if (s7) {
      var n6 = e9.substring(t4, s7).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
      return n6 ? (n6[0].length, i7.processingInstruction(n6[1], n6[2]), s7 + 2) : -1;
    }
    return -1;
  }
  function E3() {
    this.attributeNames = {};
  }
  function w4(e9, t4) {
    var i7, s7 = [], n6 = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
    for (n6.lastIndex = t4, n6.exec(e9); i7 = n6.exec(e9); ) if (s7.push(i7), i7[1]) return s7;
  }
  return c6.prototype = new Error(), c6.prototype.name = c6.name, p6.prototype = { parse: function(e9, t4, i7) {
    var s7 = this.domBuilder;
    s7.startDocument(), b5(t4, t4 = {}), m7(e9, t4, i7, s7, this.errorHandler), s7.endDocument();
  } }, E3.prototype = { setTagName: function(e9) {
    if (!s6.test(e9)) throw new Error("invalid tagName:" + e9);
    this.tagName = e9;
  }, addValue: function(e9, t4, i7) {
    if (!s6.test(e9)) throw new Error("invalid attribute:" + e9);
    this.attributeNames[e9] = this.length, this[this.length++] = { qName: e9, value: t4, offset: i7 };
  }, length: 0, getLocalName: function(e9) {
    return this[e9].localName;
  }, getLocator: function(e9) {
    return this[e9].locator;
  }, getQName: function(e9) {
    return this[e9].qName;
  }, getURI: function(e9) {
    return this[e9].uri;
  }, getValue: function(e9) {
    return this[e9].value;
  } }, Gt.XMLReader = p6, Gt.ParseError = c6, Gt;
}
function Kt() {
  if (zt) return jt;
  zt = 1;
  var e8 = Bt(), t3 = Ft(), i6 = Ht(), s6 = Xt(), n5 = t3.DOMImplementation, r4 = e8.NAMESPACE, a6 = s6.ParseError, o4 = s6.XMLReader;
  function l7(e9) {
    return e9.replace(/\r[\n\u0085]/g, "\n").replace(/[\r\u0085\u2028]/g, "\n");
  }
  function h2(e9) {
    this.options = e9 || { locator: {} };
  }
  function u5(e9, t4, i7) {
    if (!e9) {
      if (t4 instanceof d2) return t4;
      e9 = t4;
    }
    var s7 = {}, n6 = e9 instanceof Function;
    function r5(t5) {
      var r6 = e9[t5];
      !r6 && n6 && (r6 = 2 == e9.length ? function(i8) {
        e9(t5, i8);
      } : e9), s7[t5] = r6 && function(e10) {
        r6("[xmldom " + t5 + "]	" + e10 + p6(i7));
      } || function() {
      };
    }
    return i7 = i7 || {}, r5("warning"), r5("error"), r5("fatalError"), s7;
  }
  function d2() {
    this.cdata = false;
  }
  function c6(e9, t4) {
    t4.lineNumber = e9.lineNumber, t4.columnNumber = e9.columnNumber;
  }
  function p6(e9) {
    if (e9) return "\n@" + (e9.systemId || "") + "#[line:" + e9.lineNumber + ",col:" + e9.columnNumber + "]";
  }
  function m7(e9, t4, i7) {
    return "string" == typeof e9 ? e9.substr(t4, i7) : e9.length >= t4 + i7 || t4 ? new java.lang.String(e9, t4, i7) + "" : e9;
  }
  function g2(e9, t4) {
    e9.currentElement ? e9.currentElement.appendChild(t4) : e9.doc.appendChild(t4);
  }
  return h2.prototype.parseFromString = function(e9, t4) {
    var s7 = this.options, n6 = new o4(), a7 = s7.domBuilder || new d2(), h3 = s7.errorHandler, c7 = s7.locator, p7 = s7.xmlns || {}, m8 = /\/x?html?$/.test(t4), g3 = m8 ? i6.HTML_ENTITIES : i6.XML_ENTITIES;
    c7 && a7.setDocumentLocator(c7), n6.errorHandler = u5(h3, a7, c7), n6.domBuilder = s7.domBuilder || a7, m8 && (p7[""] = r4.HTML), p7.xml = p7.xml || r4.XML;
    var f4 = s7.normalizeLineEndings || l7;
    return e9 && "string" == typeof e9 ? n6.parse(f4(e9), p7, g3) : n6.errorHandler.error("invalid doc source"), a7.doc;
  }, d2.prototype = { startDocument: function() {
    this.doc = new n5().createDocument(null, null, null), this.locator && (this.doc.documentURI = this.locator.systemId);
  }, startElement: function(e9, t4, i7, s7) {
    var n6 = this.doc, r5 = n6.createElementNS(e9, i7 || t4), a7 = s7.length;
    g2(this, r5), this.currentElement = r5, this.locator && c6(this.locator, r5);
    for (var o5 = 0; o5 < a7; o5++) {
      e9 = s7.getURI(o5);
      var l8 = s7.getValue(o5), h3 = (i7 = s7.getQName(o5), n6.createAttributeNS(e9, i7));
      this.locator && c6(s7.getLocator(o5), h3), h3.value = h3.nodeValue = l8, r5.setAttributeNode(h3);
    }
  }, endElement: function(e9, t4, i7) {
    var s7 = this.currentElement;
    s7.tagName, this.currentElement = s7.parentNode;
  }, startPrefixMapping: function(e9, t4) {
  }, endPrefixMapping: function(e9) {
  }, processingInstruction: function(e9, t4) {
    var i7 = this.doc.createProcessingInstruction(e9, t4);
    this.locator && c6(this.locator, i7), g2(this, i7);
  }, ignorableWhitespace: function(e9, t4, i7) {
  }, characters: function(e9, t4, i7) {
    if (e9 = m7.apply(this, arguments)) {
      if (this.cdata) var s7 = this.doc.createCDATASection(e9);
      else s7 = this.doc.createTextNode(e9);
      this.currentElement ? this.currentElement.appendChild(s7) : /^\s*$/.test(e9) && this.doc.appendChild(s7), this.locator && c6(this.locator, s7);
    }
  }, skippedEntity: function(e9) {
  }, endDocument: function() {
    this.doc.normalize();
  }, setDocumentLocator: function(e9) {
    (this.locator = e9) && (e9.lineNumber = 0);
  }, comment: function(e9, t4, i7) {
    e9 = m7.apply(this, arguments);
    var s7 = this.doc.createComment(e9);
    this.locator && c6(this.locator, s7), g2(this, s7);
  }, startCDATA: function() {
    this.cdata = true;
  }, endCDATA: function() {
    this.cdata = false;
  }, startDTD: function(e9, t4, i7) {
    var s7 = this.doc.implementation;
    if (s7 && s7.createDocumentType) {
      var n6 = s7.createDocumentType(e9, t4, i7);
      this.locator && c6(this.locator, n6), g2(this, n6), this.doc.doctype = n6;
    }
  }, warning: function(e9) {
    console.warn("[xmldom warning]	" + e9, p6(this.locator));
  }, error: function(e9) {
    console.error("[xmldom error]	" + e9, p6(this.locator));
  }, fatalError: function(e9) {
    throw new a6(e9, this.locator);
  } }, "endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g, function(e9) {
    d2.prototype[e9] = function() {
      return null;
    };
  }), jt.__DOMHandler = d2, jt.normalizeLineEndings = l7, jt.DOMParser = h2, jt;
}
function Yt() {
  if (Wt) return Rt;
  Wt = 1;
  var e8 = Ft();
  return Rt.DOMImplementation = e8.DOMImplementation, Rt.XMLSerializer = e8.XMLSerializer, Rt.DOMParser = Kt().DOMParser, Rt;
}
var Qt = Yt();
var Jt = (e8) => !!e8 && "object" == typeof e8;
var Zt = (...e8) => e8.reduce((e9, t3) => ("object" != typeof t3 || Object.keys(t3).forEach((i6) => {
  Array.isArray(e9[i6]) && Array.isArray(t3[i6]) ? e9[i6] = e9[i6].concat(t3[i6]) : Jt(e9[i6]) && Jt(t3[i6]) ? e9[i6] = Zt(e9[i6], t3[i6]) : e9[i6] = t3[i6];
}), e9), {});
var ei = (e8) => Object.keys(e8).map((t3) => e8[t3]);
var ti = (e8, t3) => {
  const i6 = [];
  for (let s6 = e8; s6 < t3; s6++) i6.push(s6);
  return i6;
};
var ii = (e8) => e8.reduce((e9, t3) => e9.concat(t3), []);
var si = (e8) => {
  if (!e8.length) return [];
  const t3 = [];
  for (let i6 = 0; i6 < e8.length; i6++) t3.push(e8[i6]);
  return t3;
};
var ni = (e8, t3) => e8.reduce((e9, i6, s6) => (i6[t3] && e9.push(s6), e9), []);
var ri = (e8, t3) => ei(e8.reduce((e9, i6) => (i6.forEach((i7) => {
  e9[t3(i7)] = i7;
}), e9), {}));
var ai = { INVALID_NUMBER_OF_PERIOD: "INVALID_NUMBER_OF_PERIOD", DASH_EMPTY_MANIFEST: "DASH_EMPTY_MANIFEST", DASH_INVALID_XML: "DASH_INVALID_XML", NO_BASE_URL: "NO_BASE_URL", SEGMENT_TIME_UNSPECIFIED: "SEGMENT_TIME_UNSPECIFIED", UNSUPPORTED_UTC_TIMING_SCHEME: "UNSUPPORTED_UTC_TIMING_SCHEME" };
var oi = ({ baseUrl: e8 = "", source: t3 = "", range: i6 = "", indexRange: s6 = "" }) => {
  const n5 = { uri: t3, resolvedUri: je(e8 || "", t3) };
  if (i6 || s6) {
    const e9 = (i6 || s6).split("-");
    let t4, r4 = b4.BigInt ? b4.BigInt(e9[0]) : parseInt(e9[0], 10), a6 = b4.BigInt ? b4.BigInt(e9[1]) : parseInt(e9[1], 10);
    r4 < Number.MAX_SAFE_INTEGER && "bigint" == typeof r4 && (r4 = Number(r4)), a6 < Number.MAX_SAFE_INTEGER && "bigint" == typeof a6 && (a6 = Number(a6)), t4 = "bigint" == typeof a6 || "bigint" == typeof r4 ? b4.BigInt(a6) - b4.BigInt(r4) + b4.BigInt(1) : a6 - r4 + 1, "bigint" == typeof t4 && t4 < Number.MAX_SAFE_INTEGER && (t4 = Number(t4)), n5.byterange = { length: t4, offset: r4 };
  }
  return n5;
};
var li = (e8) => {
  let t3;
  return t3 = "bigint" == typeof e8.offset || "bigint" == typeof e8.length ? b4.BigInt(e8.offset) + b4.BigInt(e8.length) - b4.BigInt(1) : e8.offset + e8.length - 1, `${e8.offset}-${t3}`;
};
var hi = (e8) => (e8 && "number" != typeof e8 && (e8 = parseInt(e8, 10)), isNaN(e8) ? null : e8);
var ui = { static(e8) {
  const { duration: t3, timescale: i6 = 1, sourceDuration: s6, periodDuration: n5 } = e8, r4 = hi(e8.endNumber), a6 = t3 / i6;
  return "number" == typeof r4 ? { start: 0, end: r4 } : "number" == typeof n5 ? { start: 0, end: n5 / a6 } : { start: 0, end: s6 / a6 };
}, dynamic(e8) {
  const { NOW: t3, clientOffset: i6, availabilityStartTime: s6, timescale: n5 = 1, duration: r4, periodStart: a6 = 0, minimumUpdatePeriod: o4 = 0, timeShiftBufferDepth: l7 = 1 / 0 } = e8, h2 = hi(e8.endNumber), u5 = (t3 + i6) / 1e3, d2 = s6 + a6, c6 = u5 + o4 - d2, p6 = Math.ceil(c6 * n5 / r4), m7 = Math.floor((u5 - d2 - l7) * n5 / r4), g2 = Math.floor((u5 - d2) * n5 / r4);
  return { start: Math.max(0, m7), end: "number" == typeof h2 ? h2 : Math.min(p6, g2) };
} };
var di = (e8) => (t3) => {
  const { duration: i6, timescale: s6 = 1, periodStart: n5, startNumber: r4 = 1 } = e8;
  return { number: r4 + t3, duration: i6 / s6, timeline: n5, time: t3 * i6 };
};
var ci = (e8) => {
  const { type: t3, duration: i6, timescale: s6 = 1, periodDuration: n5, sourceDuration: r4 } = e8, { start: a6, end: o4 } = ui[t3](e8), l7 = ti(a6, o4).map(di(e8));
  if ("static" === t3) {
    const e9 = l7.length - 1, t4 = "number" == typeof n5 ? n5 : r4;
    l7[e9].duration = t4 - i6 / s6 * e9;
  }
  return l7;
};
var pi = (e8) => {
  const { baseUrl: t3, initialization: i6 = {}, sourceDuration: s6, indexRange: n5 = "", periodStart: r4, presentationTime: a6, number: o4 = 0, duration: l7 } = e8;
  if (!t3) throw new Error(ai.NO_BASE_URL);
  const h2 = oi({ baseUrl: t3, source: i6.sourceURL, range: i6.range }), u5 = oi({ baseUrl: t3, source: t3, indexRange: n5 });
  if (u5.map = h2, l7) {
    const t4 = ci(e8);
    t4.length && (u5.duration = t4[0].duration, u5.timeline = t4[0].timeline);
  } else s6 && (u5.duration = s6, u5.timeline = r4);
  return u5.presentationTime = a6 || r4, u5.number = o4, [u5];
};
var mi = (e8, t3, i6) => {
  const s6 = e8.sidx.map ? e8.sidx.map : null, n5 = e8.sidx.duration, r4 = e8.timeline || 0, a6 = e8.sidx.byterange, o4 = a6.offset + a6.length, l7 = t3.timescale, h2 = t3.references.filter((e9) => 1 !== e9.referenceType), u5 = [], d2 = e8.endList ? "static" : "dynamic", c6 = e8.sidx.timeline;
  let p6, m7 = c6, g2 = e8.mediaSequence || 0;
  p6 = "bigint" == typeof t3.firstOffset ? b4.BigInt(o4) + t3.firstOffset : o4 + t3.firstOffset;
  for (let f4 = 0; f4 < h2.length; f4++) {
    const e9 = t3.references[f4], a7 = e9.referencedSize, o5 = e9.subsegmentDuration;
    let h3;
    h3 = "bigint" == typeof p6 ? p6 + b4.BigInt(a7) - b4.BigInt(1) : p6 + a7 - 1;
    const y3 = pi({ baseUrl: i6, timescale: l7, timeline: r4, periodStart: c6, presentationTime: m7, number: g2, duration: o5, sourceDuration: n5, indexRange: `${p6}-${h3}`, type: d2 })[0];
    s6 && (y3.map = s6), u5.push(y3), p6 += "bigint" == typeof p6 ? b4.BigInt(a7) : a7, m7 += o5 / l7, g2++;
  }
  return e8.segments = u5, e8;
};
var gi = ["AUDIO", "SUBTITLES"];
var fi = 1 / 60;
var yi = (e8) => ri(e8, ({ timeline: e9 }) => e9).sort((e9, t3) => e9.timeline > t3.timeline ? 1 : -1);
var _i = (e8, t3) => {
  for (let i6 = 0; i6 < e8.length; i6++) if (e8[i6].attributes.NAME === t3) return e8[i6];
  return null;
};
var vi = (e8) => {
  let t3 = [];
  return Nt(e8, gi, (e9, i6, s6, n5) => {
    t3 = t3.concat(e9.playlists || []);
  }), t3;
};
var bi = ({ playlist: e8, mediaSequence: t3 }) => {
  e8.mediaSequence = t3, e8.segments.forEach((t4, i6) => {
    t4.number = e8.mediaSequence + i6;
  });
};
var Ti = ({ oldPlaylists: e8, newPlaylists: t3, timelineStarts: i6 }) => {
  t3.forEach((t4) => {
    t4.discontinuitySequence = i6.findIndex(function({ timeline: e9 }) {
      return e9 === t4.timeline;
    });
    const s6 = _i(e8, t4.attributes.NAME);
    if (!s6) return;
    if (t4.sidx) return;
    const n5 = t4.segments[0], r4 = s6.segments.findIndex(function(e9) {
      return Math.abs(e9.presentationTime - n5.presentationTime) < fi;
    });
    if (-1 === r4) return bi({ playlist: t4, mediaSequence: s6.mediaSequence + s6.segments.length }), t4.segments[0].discontinuity = true, t4.discontinuityStarts.unshift(0), void ((!s6.segments.length && t4.timeline > s6.timeline || s6.segments.length && t4.timeline > s6.segments[s6.segments.length - 1].timeline) && t4.discontinuitySequence--);
    s6.segments[r4].discontinuity && !n5.discontinuity && (n5.discontinuity = true, t4.discontinuityStarts.unshift(0), t4.discontinuitySequence--), bi({ playlist: t4, mediaSequence: s6.segments[r4].number });
  });
};
var Si = ({ oldManifest: e8, newManifest: t3 }) => {
  const i6 = e8.playlists.concat(vi(e8)), s6 = t3.playlists.concat(vi(t3));
  return t3.timelineStarts = yi([e8.timelineStarts, t3.timelineStarts]), Ti({ oldPlaylists: i6, newPlaylists: s6, timelineStarts: t3.timelineStarts }), t3;
};
var Ei = (e8) => e8 && e8.uri + "-" + li(e8.byterange);
var wi = (e8) => {
  const t3 = e8.reduce(function(e9, t4) {
    return e9[t4.attributes.baseUrl] || (e9[t4.attributes.baseUrl] = []), e9[t4.attributes.baseUrl].push(t4), e9;
  }, {});
  let i6 = [];
  return Object.values(t3).forEach((e9) => {
    const t4 = ei(e9.reduce((e10, t5) => {
      const i7 = t5.attributes.id + (t5.attributes.lang || "");
      return e10[i7] ? (t5.segments && (t5.segments[0] && (t5.segments[0].discontinuity = true), e10[i7].segments.push(...t5.segments)), t5.attributes.contentProtection && (e10[i7].attributes.contentProtection = t5.attributes.contentProtection)) : (e10[i7] = t5, e10[i7].attributes.timelineStarts = []), e10[i7].attributes.timelineStarts.push({ start: t5.attributes.periodStart, timeline: t5.attributes.periodStart }), e10;
    }, {}));
    i6 = i6.concat(t4);
  }), i6.map((e9) => (e9.discontinuityStarts = ni(e9.segments || [], "discontinuity"), e9));
};
var Ci = (e8, t3) => {
  const i6 = Ei(e8.sidx), s6 = i6 && t3[i6] && t3[i6].sidx;
  return s6 && mi(e8, s6, e8.sidx.resolvedUri), e8;
};
var ki = (e8, t3 = {}) => {
  if (!Object.keys(t3).length) return e8;
  for (const i6 in e8) e8[i6] = Ci(e8[i6], t3);
  return e8;
};
var Ii = ({ attributes: e8, segments: t3, sidx: i6, mediaSequence: s6, discontinuitySequence: n5, discontinuityStarts: r4 }, a6) => {
  const o4 = { attributes: { NAME: e8.id, BANDWIDTH: e8.bandwidth, CODECS: e8.codecs, "PROGRAM-ID": 1 }, uri: "", endList: "static" === e8.type, timeline: e8.periodStart, resolvedUri: e8.baseUrl || "", targetDuration: e8.duration, discontinuitySequence: n5, discontinuityStarts: r4, timelineStarts: e8.timelineStarts, mediaSequence: s6, segments: t3 };
  return e8.contentProtection && (o4.contentProtection = e8.contentProtection), e8.serviceLocation && (o4.attributes.serviceLocation = e8.serviceLocation), i6 && (o4.sidx = i6), a6 && (o4.attributes.AUDIO = "audio", o4.attributes.SUBTITLES = "subs"), o4;
};
var xi = ({ attributes: e8, segments: t3, mediaSequence: i6, discontinuityStarts: s6, discontinuitySequence: n5 }) => {
  void 0 === t3 && (t3 = [{ uri: e8.baseUrl, timeline: e8.periodStart, resolvedUri: e8.baseUrl || "", duration: e8.sourceDuration, number: 0 }], e8.duration = e8.sourceDuration);
  const r4 = { NAME: e8.id, BANDWIDTH: e8.bandwidth, "PROGRAM-ID": 1 };
  e8.codecs && (r4.CODECS = e8.codecs);
  const a6 = { attributes: r4, uri: "", endList: "static" === e8.type, timeline: e8.periodStart, resolvedUri: e8.baseUrl || "", targetDuration: e8.duration, timelineStarts: e8.timelineStarts, discontinuityStarts: s6, discontinuitySequence: n5, mediaSequence: i6, segments: t3 };
  return e8.serviceLocation && (a6.attributes.serviceLocation = e8.serviceLocation), a6;
};
var Ai = (e8, t3 = {}, i6 = false) => {
  let s6;
  const n5 = e8.reduce((e9, n6) => {
    const r4 = n6.attributes.role && n6.attributes.role.value || "", a6 = n6.attributes.lang || "";
    let o4 = n6.attributes.label || "main";
    if (a6 && !n6.attributes.label) {
      const e10 = r4 ? ` (${r4})` : "";
      o4 = `${n6.attributes.lang}${e10}`;
    }
    e9[o4] || (e9[o4] = { language: a6, autoselect: true, default: "main" === r4, playlists: [], uri: "" });
    const l7 = Ci(Ii(n6, i6), t3);
    return e9[o4].playlists.push(l7), void 0 === s6 && "main" === r4 && (s6 = n6, s6.default = true), e9;
  }, {});
  if (!s6) {
    n5[Object.keys(n5)[0]].default = true;
  }
  return n5;
};
var Di = (e8, t3 = {}) => e8.reduce((e9, i6) => {
  const s6 = i6.attributes.label || i6.attributes.lang || "text", n5 = i6.attributes.lang || "und";
  return e9[s6] || (e9[s6] = { language: n5, default: false, autoselect: false, playlists: [], uri: "" }), e9[s6].playlists.push(Ci(xi(i6), t3)), e9;
}, {});
var Pi = (e8) => e8.reduce((e9, t3) => t3 ? (t3.forEach((t4) => {
  const { channel: i6, language: s6 } = t4;
  e9[s6] = { autoselect: false, default: false, instreamId: i6, language: s6 }, t4.hasOwnProperty("aspectRatio") && (e9[s6].aspectRatio = t4.aspectRatio), t4.hasOwnProperty("easyReader") && (e9[s6].easyReader = t4.easyReader), t4.hasOwnProperty("3D") && (e9[s6]["3D"] = t4["3D"]);
}), e9) : e9, {});
var Li = ({ attributes: e8, segments: t3, sidx: i6, discontinuityStarts: s6 }) => {
  const n5 = { attributes: { NAME: e8.id, AUDIO: "audio", SUBTITLES: "subs", RESOLUTION: { width: e8.width, height: e8.height }, CODECS: e8.codecs, BANDWIDTH: e8.bandwidth, "PROGRAM-ID": 1 }, uri: "", endList: "static" === e8.type, timeline: e8.periodStart, resolvedUri: e8.baseUrl || "", targetDuration: e8.duration, discontinuityStarts: s6, timelineStarts: e8.timelineStarts, segments: t3 };
  return e8.frameRate && (n5.attributes["FRAME-RATE"] = e8.frameRate), e8.contentProtection && (n5.contentProtection = e8.contentProtection), e8.serviceLocation && (n5.attributes.serviceLocation = e8.serviceLocation), i6 && (n5.sidx = i6), n5;
};
var Oi = ({ attributes: e8 }) => "video/mp4" === e8.mimeType || "video/webm" === e8.mimeType || "video" === e8.contentType;
var Ni = ({ attributes: e8 }) => "audio/mp4" === e8.mimeType || "audio/webm" === e8.mimeType || "audio" === e8.contentType;
var Ri = ({ attributes: e8 }) => "text/vtt" === e8.mimeType || "text" === e8.contentType;
var Mi = (e8, t3) => {
  e8.forEach((e9) => {
    e9.mediaSequence = 0, e9.discontinuitySequence = t3.findIndex(function({ timeline: t4 }) {
      return t4 === e9.timeline;
    }), e9.segments && e9.segments.forEach((e10, t4) => {
      e10.number = t4;
    });
  });
};
var Ui = (e8) => e8 ? Object.keys(e8).reduce((t3, i6) => {
  const s6 = e8[i6];
  return t3.concat(s6.playlists);
}, []) : [];
var Bi = ({ dashPlaylists: e8, locations: t3, contentSteering: i6, sidxMapping: s6 = {}, previousManifest: n5, eventStream: r4 }) => {
  if (!e8.length) return {};
  const { sourceDuration: a6, type: o4, suggestedPresentationDelay: l7, minimumUpdatePeriod: h2 } = e8[0].attributes, u5 = wi(e8.filter(Oi)).map(Li), d2 = wi(e8.filter(Ni)), c6 = wi(e8.filter(Ri)), p6 = e8.map((e9) => e9.attributes.captionServices).filter(Boolean), m7 = { allowCache: true, discontinuityStarts: [], segments: [], endList: true, mediaGroups: { AUDIO: {}, VIDEO: {}, "CLOSED-CAPTIONS": {}, SUBTITLES: {} }, uri: "", duration: a6, playlists: ki(u5, s6) };
  h2 >= 0 && (m7.minimumUpdatePeriod = 1e3 * h2), t3 && (m7.locations = t3), i6 && (m7.contentSteering = i6), "dynamic" === o4 && (m7.suggestedPresentationDelay = l7), r4 && r4.length > 0 && (m7.eventStream = r4);
  const g2 = 0 === m7.playlists.length, f4 = d2.length ? Ai(d2, s6, g2) : null, y3 = c6.length ? Di(c6, s6) : null, _3 = u5.concat(Ui(f4), Ui(y3)), v3 = _3.map(({ timelineStarts: e9 }) => e9);
  return m7.timelineStarts = yi(v3), Mi(_3, m7.timelineStarts), f4 && (m7.mediaGroups.AUDIO.audio = f4), y3 && (m7.mediaGroups.SUBTITLES.subs = y3), p6.length && (m7.mediaGroups["CLOSED-CAPTIONS"].cc = Pi(p6)), n5 ? Si({ oldManifest: n5, newManifest: m7 }) : m7;
};
var Fi = (e8, t3, i6) => {
  const { NOW: s6, clientOffset: n5, availabilityStartTime: r4, timescale: a6 = 1, periodStart: o4 = 0, minimumUpdatePeriod: l7 = 0 } = e8, h2 = (s6 + n5) / 1e3 + l7 - (r4 + o4);
  return Math.ceil((h2 * a6 - t3) / i6);
};
var qi = (e8, t3) => {
  const { type: i6, minimumUpdatePeriod: s6 = 0, media: n5 = "", sourceDuration: r4, timescale: a6 = 1, startNumber: o4 = 1, periodStart: l7 } = e8, h2 = [];
  let u5 = -1;
  for (let d2 = 0; d2 < t3.length; d2++) {
    const c6 = t3[d2], p6 = c6.d, m7 = c6.r || 0, g2 = c6.t || 0;
    let f4;
    if (u5 < 0 && (u5 = g2), g2 && g2 > u5 && (u5 = g2), m7 < 0) {
      const o5 = d2 + 1;
      f4 = o5 === t3.length ? "dynamic" === i6 && s6 > 0 && n5.indexOf("$Number$") > 0 ? Fi(e8, u5, p6) : (r4 * a6 - u5) / p6 : (t3[o5].t - u5) / p6;
    } else f4 = m7 + 1;
    const y3 = o4 + h2.length + f4;
    let _3 = o4 + h2.length;
    for (; _3 < y3; ) h2.push({ number: _3, duration: p6 / a6, time: u5, timeline: l7 }), u5 += p6, _3++;
  }
  return h2;
};
var ji = /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;
var $i = (e8) => (t3, i6, s6, n5) => {
  if ("$$" === t3) return "$";
  if (void 0 === e8[i6]) return t3;
  const r4 = "" + e8[i6];
  return "RepresentationID" === i6 ? r4 : (n5 = s6 ? parseInt(n5, 10) : 1, r4.length >= n5 ? r4 : `${new Array(n5 - r4.length + 1).join("0")}${r4}`);
};
var Hi = (e8, t3) => e8.replace(ji, $i(t3));
var Vi = (e8, t3) => e8.duration || t3 ? e8.duration ? ci(e8) : qi(e8, t3) : [{ number: e8.startNumber || 1, duration: e8.sourceDuration, time: 0, timeline: e8.periodStart }];
var zi = (e8, t3) => {
  const i6 = { RepresentationID: e8.id, Bandwidth: e8.bandwidth || 0 }, { initialization: s6 = { sourceURL: "", range: "" } } = e8, n5 = oi({ baseUrl: e8.baseUrl, source: Hi(s6.sourceURL, i6), range: s6.range });
  return Vi(e8, t3).map((t4) => {
    i6.Number = t4.number, i6.Time = t4.time;
    const s7 = Hi(e8.media || "", i6), r4 = e8.timescale || 1, a6 = e8.presentationTimeOffset || 0, o4 = e8.periodStart + (t4.time - a6) / r4;
    return { uri: s7, timeline: t4.timeline, duration: t4.duration, resolvedUri: je(e8.baseUrl || "", s7), map: n5, number: t4.number, presentationTime: o4 };
  });
};
var Wi = (e8, t3) => {
  const { baseUrl: i6, initialization: s6 = {} } = e8, n5 = oi({ baseUrl: i6, source: s6.sourceURL, range: s6.range }), r4 = oi({ baseUrl: i6, source: t3.media, range: t3.mediaRange });
  return r4.map = n5, r4;
};
var Gi = (e8, t3) => {
  const { duration: i6, segmentUrls: s6 = [], periodStart: n5 } = e8;
  if (!i6 && !t3 || i6 && t3) throw new Error(ai.SEGMENT_TIME_UNSPECIFIED);
  const r4 = s6.map((t4) => Wi(e8, t4));
  let a6;
  i6 && (a6 = ci(e8)), t3 && (a6 = qi(e8, t3));
  return a6.map((t4, i7) => {
    if (r4[i7]) {
      const s7 = r4[i7], a7 = e8.timescale || 1, o4 = e8.presentationTimeOffset || 0;
      return s7.timeline = t4.timeline, s7.duration = t4.duration, s7.number = t4.number, s7.presentationTime = n5 + (t4.time - o4) / a7, s7;
    }
  }).filter((e9) => e9);
};
var Xi = ({ attributes: e8, segmentInfo: t3 }) => {
  let i6, s6;
  t3.template ? (s6 = zi, i6 = Zt(e8, t3.template)) : t3.base ? (s6 = pi, i6 = Zt(e8, t3.base)) : t3.list && (s6 = Gi, i6 = Zt(e8, t3.list));
  const n5 = { attributes: e8 };
  if (!s6) return n5;
  const r4 = s6(i6, t3.segmentTimeline);
  if (i6.duration) {
    const { duration: e9, timescale: t4 = 1 } = i6;
    i6.duration = e9 / t4;
  } else r4.length ? i6.duration = r4.reduce((e9, t4) => Math.max(e9, Math.ceil(t4.duration)), 0) : i6.duration = 0;
  return n5.attributes = i6, n5.segments = r4, t3.base && i6.indexRange && (n5.sidx = r4[0], n5.segments = []), n5;
};
var Ki = (e8) => e8.map(Xi);
var Yi = (e8, t3) => si(e8.childNodes).filter(({ tagName: e9 }) => e9 === t3);
var Qi = (e8) => e8.textContent.trim();
var Ji = (e8) => parseFloat(e8.split("/").reduce((e9, t3) => e9 / t3));
var Zi = (e8) => {
  const t3 = 31536e3, i6 = 2592e3, s6 = 86400, n5 = 3600, r4 = 60, a6 = /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e8);
  if (!a6) return 0;
  const [o4, l7, h2, u5, d2, c6] = a6.slice(1);
  return parseFloat(o4 || 0) * t3 + parseFloat(l7 || 0) * i6 + parseFloat(h2 || 0) * s6 + parseFloat(u5 || 0) * n5 + parseFloat(d2 || 0) * r4 + parseFloat(c6 || 0);
};
var es = (e8) => (/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e8) && (e8 += "Z"), Date.parse(e8));
var ts = { mediaPresentationDuration: (e8) => Zi(e8), availabilityStartTime: (e8) => es(e8) / 1e3, minimumUpdatePeriod: (e8) => Zi(e8), suggestedPresentationDelay: (e8) => Zi(e8), type: (e8) => e8, timeShiftBufferDepth: (e8) => Zi(e8), start: (e8) => Zi(e8), width: (e8) => parseInt(e8, 10), height: (e8) => parseInt(e8, 10), bandwidth: (e8) => parseInt(e8, 10), frameRate: (e8) => Ji(e8), startNumber: (e8) => parseInt(e8, 10), timescale: (e8) => parseInt(e8, 10), presentationTimeOffset: (e8) => parseInt(e8, 10), duration(e8) {
  const t3 = parseInt(e8, 10);
  return isNaN(t3) ? Zi(e8) : t3;
}, d: (e8) => parseInt(e8, 10), t: (e8) => parseInt(e8, 10), r: (e8) => parseInt(e8, 10), presentationTime: (e8) => parseInt(e8, 10), DEFAULT: (e8) => e8 };
var is = (e8) => e8 && e8.attributes ? si(e8.attributes).reduce((e9, t3) => {
  const i6 = ts[t3.name] || ts.DEFAULT;
  return e9[t3.name] = i6(t3.value), e9;
}, {}) : {};
var ss = { "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey", "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha", "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready", "urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb": "com.adobe.primetime", "urn:mpeg:dash:mp4protection:2011": "mp4protection" };
var ns = (e8, t3) => t3.length ? ii(e8.map(function(e9) {
  return t3.map(function(t4) {
    const i6 = Qi(t4), s6 = je(e9.baseUrl, i6), n5 = Zt(is(t4), { baseUrl: s6 });
    return s6 !== i6 && !n5.serviceLocation && e9.serviceLocation && (n5.serviceLocation = e9.serviceLocation), n5;
  });
})) : e8;
var rs = (e8) => {
  const t3 = Yi(e8, "SegmentTemplate")[0], i6 = Yi(e8, "SegmentList")[0], s6 = i6 && Yi(i6, "SegmentURL").map((e9) => Zt({ tag: "SegmentURL" }, is(e9))), n5 = Yi(e8, "SegmentBase")[0], r4 = i6 || t3, a6 = r4 && Yi(r4, "SegmentTimeline")[0], o4 = i6 || n5 || t3, l7 = o4 && Yi(o4, "Initialization")[0], h2 = t3 && is(t3);
  h2 && l7 ? h2.initialization = l7 && is(l7) : h2 && h2.initialization && (h2.initialization = { sourceURL: h2.initialization });
  const u5 = { template: h2, segmentTimeline: a6 && Yi(a6, "S").map((e9) => is(e9)), list: i6 && Zt(is(i6), { segmentUrls: s6, initialization: is(l7) }), base: n5 && Zt(is(n5), { initialization: is(l7) }) };
  return Object.keys(u5).forEach((e9) => {
    u5[e9] || delete u5[e9];
  }), u5;
};
var as = (e8, t3, i6) => (s6) => {
  const n5 = Yi(s6, "BaseURL"), r4 = ns(t3, n5), a6 = Zt(e8, is(s6)), o4 = rs(s6);
  return r4.map((e9) => ({ segmentInfo: Zt(i6, o4), attributes: Zt(a6, e9) }));
};
var os = (e8) => e8.reduce((e9, t3) => {
  const i6 = is(t3);
  i6.schemeIdUri && (i6.schemeIdUri = i6.schemeIdUri.toLowerCase());
  const s6 = ss[i6.schemeIdUri];
  if (s6) {
    e9[s6] = { attributes: i6 };
    const n5 = Yi(t3, "cenc:pssh")[0];
    if (n5) {
      const t4 = Qi(n5);
      e9[s6].pssh = t4 && Ve(t4);
    }
  }
  return e9;
}, {});
var ls = (e8) => {
  if ("urn:scte:dash:cc:cea-608:2015" === e8.schemeIdUri) {
    return ("string" != typeof e8.value ? [] : e8.value.split(";")).map((e9) => {
      let t3, i6;
      return i6 = e9, /^CC\d=/.test(e9) ? [t3, i6] = e9.split("=") : /^CC\d$/.test(e9) && (t3 = e9), { channel: t3, language: i6 };
    });
  }
  if ("urn:scte:dash:cc:cea-708:2015" === e8.schemeIdUri) {
    return ("string" != typeof e8.value ? [] : e8.value.split(";")).map((e9) => {
      const t3 = { channel: void 0, language: void 0, aspectRatio: 1, easyReader: 0, "3D": 0 };
      if (/=/.test(e9)) {
        const [i6, s6 = ""] = e9.split("=");
        t3.channel = i6, t3.language = e9, s6.split(",").forEach((e10) => {
          const [i7, s7] = e10.split(":");
          "lang" === i7 ? t3.language = s7 : "er" === i7 ? t3.easyReader = Number(s7) : "war" === i7 ? t3.aspectRatio = Number(s7) : "3D" === i7 && (t3["3D"] = Number(s7));
        });
      } else t3.language = e9;
      return t3.channel && (t3.channel = "SERVICE" + t3.channel), t3;
    });
  }
};
var hs = (e8) => ii(Yi(e8.node, "EventStream").map((t3) => {
  const i6 = is(t3), s6 = i6.schemeIdUri;
  return Yi(t3, "Event").map((t4) => {
    const n5 = is(t4), r4 = n5.presentationTime || 0, a6 = i6.timescale || 1, o4 = n5.duration || 0, l7 = r4 / a6 + e8.attributes.start;
    return { schemeIdUri: s6, value: i6.value, id: n5.id, start: l7, end: l7 + o4 / a6, messageData: Qi(t4) || n5.messageData, contentEncoding: i6.contentEncoding, presentationTimeOffset: i6.presentationTimeOffset || 0 };
  });
}));
var us = (e8, t3, i6) => (s6) => {
  const n5 = is(s6), r4 = ns(t3, Yi(s6, "BaseURL")), a6 = Yi(s6, "Role")[0], o4 = { role: is(a6) };
  let l7 = Zt(e8, n5, o4);
  const h2 = Yi(s6, "Accessibility")[0], u5 = ls(is(h2));
  u5 && (l7 = Zt(l7, { captionServices: u5 }));
  const d2 = Yi(s6, "Label")[0];
  if (d2 && d2.childNodes.length) {
    const e9 = d2.childNodes[0].nodeValue.trim();
    l7 = Zt(l7, { label: e9 });
  }
  const c6 = os(Yi(s6, "ContentProtection"));
  Object.keys(c6).length && (l7 = Zt(l7, { contentProtection: c6 }));
  const p6 = rs(s6), m7 = Yi(s6, "Representation"), g2 = Zt(i6, p6);
  return ii(m7.map(as(l7, r4, g2)));
};
var ds = (e8, t3) => (i6, s6) => {
  const n5 = ns(t3, Yi(i6.node, "BaseURL")), r4 = Zt(e8, { periodStart: i6.attributes.start });
  "number" == typeof i6.attributes.duration && (r4.periodDuration = i6.attributes.duration);
  const a6 = Yi(i6.node, "AdaptationSet"), o4 = rs(i6.node);
  return ii(a6.map(us(r4, n5, o4)));
};
var cs = (e8, t3) => {
  if (e8.length > 1 && t3({ type: "warn", message: "The MPD manifest should contain no more than one ContentSteering tag" }), !e8.length) return null;
  const i6 = Zt({ serverURL: Qi(e8[0]) }, is(e8[0]));
  return i6.queryBeforeStart = "true" === i6.queryBeforeStart, i6;
};
var ps = ({ attributes: e8, priorPeriodAttributes: t3, mpdType: i6 }) => "number" == typeof e8.start ? e8.start : t3 && "number" == typeof t3.start && "number" == typeof t3.duration ? t3.start + t3.duration : t3 || "static" !== i6 ? null : 0;
var ms = (e8, t3 = {}) => {
  const { manifestUri: i6 = "", NOW: s6 = Date.now(), clientOffset: n5 = 0, eventHandler: r4 = function() {
  } } = t3, a6 = Yi(e8, "Period");
  if (!a6.length) throw new Error(ai.INVALID_NUMBER_OF_PERIOD);
  const o4 = Yi(e8, "Location"), l7 = is(e8), h2 = ns([{ baseUrl: i6 }], Yi(e8, "BaseURL")), u5 = Yi(e8, "ContentSteering");
  l7.type = l7.type || "static", l7.sourceDuration = l7.mediaPresentationDuration || 0, l7.NOW = s6, l7.clientOffset = n5, o4.length && (l7.locations = o4.map(Qi));
  const d2 = [];
  return a6.forEach((e9, t4) => {
    const i7 = is(e9), s7 = d2[t4 - 1];
    i7.start = ps({ attributes: i7, priorPeriodAttributes: s7 ? s7.attributes : null, mpdType: l7.type }), d2.push({ node: e9, attributes: i7 });
  }), { locations: l7.locations, contentSteeringInfo: cs(u5, r4), representationInfo: ii(d2.map(ds(l7, h2))), eventStream: ii(d2.map(hs)) };
};
var gs = (e8) => {
  if ("" === e8) throw new Error(ai.DASH_EMPTY_MANIFEST);
  const t3 = new Qt.DOMParser();
  let i6, s6;
  try {
    i6 = t3.parseFromString(e8, "application/xml"), s6 = i6 && "MPD" === i6.documentElement.tagName ? i6.documentElement : null;
  } catch (n5) {
  }
  if (!s6 || s6 && s6.getElementsByTagName("parsererror").length > 0) throw new Error(ai.DASH_INVALID_XML);
  return s6;
};
var fs = (e8) => {
  const t3 = Yi(e8, "UTCTiming")[0];
  if (!t3) return null;
  const i6 = is(t3);
  switch (i6.schemeIdUri) {
    case "urn:mpeg:dash:utc:http-head:2014":
    case "urn:mpeg:dash:utc:http-head:2012":
      i6.method = "HEAD";
      break;
    case "urn:mpeg:dash:utc:http-xsdate:2014":
    case "urn:mpeg:dash:utc:http-iso:2014":
    case "urn:mpeg:dash:utc:http-xsdate:2012":
    case "urn:mpeg:dash:utc:http-iso:2012":
      i6.method = "GET";
      break;
    case "urn:mpeg:dash:utc:direct:2014":
    case "urn:mpeg:dash:utc:direct:2012":
      i6.method = "DIRECT", i6.value = Date.parse(i6.value);
      break;
    default:
      throw new Error(ai.UNSUPPORTED_UTC_TIMING_SCHEME);
  }
  return i6;
};
var ys = (e8, t3 = {}) => {
  const i6 = ms(gs(e8), t3), s6 = Ki(i6.representationInfo);
  return Bi({ dashPlaylists: s6, locations: i6.locations, contentSteering: i6.contentSteeringInfo, sidxMapping: t3.sidxMapping, previousManifest: t3.previousManifest, eventStream: i6.eventStream });
};
var _s2 = (e8) => fs(gs(e8));
var vs;
var bs;
var Ts;
var Ss;
function Es() {
  if (bs) return vs;
  bs = 1;
  var e8 = Math.pow(2, 32);
  return vs = { getUint64: function(t3) {
    var i6, s6 = new DataView(t3.buffer, t3.byteOffset, t3.byteLength);
    return s6.getBigUint64 ? (i6 = s6.getBigUint64(0)) < Number.MAX_SAFE_INTEGER ? Number(i6) : i6 : s6.getUint32(0) * e8 + s6.getUint32(4);
  }, MAX_UINT32: e8 };
}
function ws() {
  if (Ss) return Ts;
  Ss = 1;
  var e8 = Es().getUint64;
  return Ts = function(t3) {
    var i6 = new DataView(t3.buffer, t3.byteOffset, t3.byteLength), s6 = { version: t3[0], flags: new Uint8Array(t3.subarray(1, 4)), references: [], referenceId: i6.getUint32(4), timescale: i6.getUint32(8) }, n5 = 12;
    0 === s6.version ? (s6.earliestPresentationTime = i6.getUint32(n5), s6.firstOffset = i6.getUint32(n5 + 4), n5 += 8) : (s6.earliestPresentationTime = e8(t3.subarray(n5)), s6.firstOffset = e8(t3.subarray(n5 + 8)), n5 += 16), n5 += 2;
    var r4 = i6.getUint16(n5);
    for (n5 += 2; r4 > 0; n5 += 12, r4--) s6.references.push({ referenceType: (128 & t3[n5]) >>> 7, referencedSize: 2147483647 & i6.getUint32(n5), subsegmentDuration: i6.getUint32(n5 + 4), startsWithSap: !!(128 & t3[n5 + 8]), sapType: (112 & t3[n5 + 8]) >>> 4, sapDeltaTime: 268435455 & i6.getUint32(n5 + 8) });
    return s6;
  };
}
var Cs = o2(ws());
var ks = wt([73, 68, 51]);
var Is = function(e8, t3) {
  void 0 === t3 && (t3 = 0);
  var i6 = (e8 = wt(e8))[t3 + 5], s6 = e8[t3 + 6] << 21 | e8[t3 + 7] << 14 | e8[t3 + 8] << 7 | e8[t3 + 9];
  return (16 & i6) >> 4 ? s6 + 20 : s6 + 10;
};
var xs = function e3(t3, i6) {
  return void 0 === i6 && (i6 = 0), (t3 = wt(t3)).length - i6 < 10 || !Ot(t3, ks, { offset: i6 }) ? i6 : e3(t3, i6 += Is(t3, i6));
};
var As = function(e8) {
  return "string" == typeof e8 ? Pt(e8) : e8;
};
var Ds = function(e8) {
  return Array.isArray(e8) ? e8.map(function(e9) {
    return As(e9);
  }) : [As(e8)];
};
var Ps = function e4(t3, i6, s6) {
  void 0 === s6 && (s6 = false), i6 = Ds(i6), t3 = wt(t3);
  var n5 = [];
  if (!i6.length) return n5;
  for (var r4 = 0; r4 < t3.length; ) {
    var a6 = (t3[r4] << 24 | t3[r4 + 1] << 16 | t3[r4 + 2] << 8 | t3[r4 + 3]) >>> 0, o4 = t3.subarray(r4 + 4, r4 + 8);
    if (0 === a6) break;
    var l7 = r4 + a6;
    if (l7 > t3.length) {
      if (s6) break;
      l7 = t3.length;
    }
    var h2 = t3.subarray(r4 + 8, l7);
    Ot(o4, i6[0]) && (1 === i6.length ? n5.push(h2) : n5.push.apply(n5, e4(h2, i6.slice(1), s6))), r4 = l7;
  }
  return n5;
};
var Ls = { EBML: wt([26, 69, 223, 163]), DocType: wt([66, 130]), Segment: wt([24, 83, 128, 103]), SegmentInfo: wt([21, 73, 169, 102]), Tracks: wt([22, 84, 174, 107]), Track: wt([174]), TrackNumber: wt([215]), DefaultDuration: wt([35, 227, 131]), TrackEntry: wt([174]), TrackType: wt([131]), FlagDefault: wt([136]), CodecID: wt([134]), CodecPrivate: wt([99, 162]), VideoTrack: wt([224]), AudioTrack: wt([225]), Cluster: wt([31, 67, 182, 117]), Timestamp: wt([231]), TimestampScale: wt([42, 215, 177]), BlockGroup: wt([160]), BlockDuration: wt([155]), Block: wt([161]), SimpleBlock: wt([163]) };
var Os = [128, 64, 32, 16, 8, 4, 2, 1];
var Ns = function(e8) {
  for (var t3 = 1, i6 = 0; i6 < Os.length && !(e8 & Os[i6]); i6++) t3++;
  return t3;
};
var Rs = function(e8, t3, i6, s6) {
  void 0 === i6 && (i6 = true), void 0 === s6 && (s6 = false);
  var n5 = Ns(e8[t3]), r4 = e8.subarray(t3, t3 + n5);
  return i6 && ((r4 = Array.prototype.slice.call(e8, t3, t3 + n5))[0] ^= Os[n5 - 1]), { length: n5, value: At(r4, { signed: s6 }), bytes: r4 };
};
var Ms = function e5(t3) {
  return "string" == typeof t3 ? t3.match(/.{1,2}/g).map(function(t4) {
    return e5(t4);
  }) : "number" == typeof t3 ? Dt(t3) : t3;
};
var Us = function(e8) {
  return Array.isArray(e8) ? e8.map(function(e9) {
    return Ms(e9);
  }) : [Ms(e8)];
};
var Bs = function e6(t3, i6, s6) {
  if (s6 >= i6.length) return i6.length;
  var n5 = Rs(i6, s6, false);
  if (Ot(t3.bytes, n5.bytes)) return s6;
  var r4 = Rs(i6, s6 + n5.length);
  return e6(t3, i6, s6 + r4.length + r4.value + n5.length);
};
var Fs = function e7(t3, i6) {
  i6 = Us(i6), t3 = wt(t3);
  var s6 = [];
  if (!i6.length) return s6;
  for (var n5 = 0; n5 < t3.length; ) {
    var r4 = Rs(t3, n5, false), a6 = Rs(t3, n5 + r4.length), o4 = n5 + r4.length + a6.length;
    127 === a6.value && (a6.value = Bs(r4, t3, o4), a6.value !== t3.length && (a6.value -= o4));
    var l7 = o4 + a6.value > t3.length ? t3.length : o4 + a6.value, h2 = t3.subarray(o4, l7);
    Ot(i6[0], r4.bytes) && (1 === i6.length ? s6.push(h2) : s6 = s6.concat(e7(h2, i6.slice(1)))), n5 += r4.length + a6.length + h2.length;
  }
  return s6;
};
var qs = wt([0, 0, 0, 1]);
var js = wt([0, 0, 1]);
var $s = wt([0, 0, 3]);
var Hs = function(e8) {
  for (var t3 = [], i6 = 1; i6 < e8.length - 2; ) Ot(e8.subarray(i6, i6 + 3), $s) && (t3.push(i6 + 2), i6++), i6++;
  if (0 === t3.length) return e8;
  var s6 = e8.length - t3.length, n5 = new Uint8Array(s6), r4 = 0;
  for (i6 = 0; i6 < s6; r4++, i6++) r4 === t3[0] && (r4++, t3.shift()), n5[i6] = e8[r4];
  return n5;
};
var Vs = function(e8, t3, i6, s6) {
  e8 = wt(e8), i6 = [].concat(i6);
  for (var n5, r4 = 0, a6 = 0; r4 < e8.length && (a6 < s6 || n5); ) {
    var o4 = void 0;
    if (Ot(e8.subarray(r4), qs) ? o4 = 4 : Ot(e8.subarray(r4), js) && (o4 = 3), o4) {
      if (a6++, n5) return Hs(e8.subarray(n5, r4));
      var l7 = void 0;
      "h264" === t3 ? l7 = 31 & e8[r4 + o4] : "h265" === t3 && (l7 = e8[r4 + o4] >> 1 & 63), -1 !== i6.indexOf(l7) && (n5 = r4 + o4), r4 += o4 + ("h264" === t3 ? 1 : 2);
    } else r4++;
  }
  return e8.subarray(0, 0);
};
var zs = function(e8, t3, i6) {
  return Vs(e8, "h264", t3, i6);
};
var Ws = function(e8, t3, i6) {
  return Vs(e8, "h265", t3, i6);
};
var Gs = { webm: wt([119, 101, 98, 109]), matroska: wt([109, 97, 116, 114, 111, 115, 107, 97]), flac: wt([102, 76, 97, 67]), ogg: wt([79, 103, 103, 83]), ac3: wt([11, 119]), riff: wt([82, 73, 70, 70]), avi: wt([65, 86, 73]), wav: wt([87, 65, 86, 69]), "3gp": wt([102, 116, 121, 112, 51, 103]), mp4: wt([102, 116, 121, 112]), fmp4: wt([115, 116, 121, 112]), mov: wt([102, 116, 121, 112, 113, 116]), moov: wt([109, 111, 111, 118]), moof: wt([109, 111, 111, 102]) };
var Xs = { aac: function(e8) {
  var t3 = xs(e8);
  return Ot(e8, [255, 16], { offset: t3, mask: [255, 22] });
}, mp3: function(e8) {
  var t3 = xs(e8);
  return Ot(e8, [255, 2], { offset: t3, mask: [255, 6] });
}, webm: function(e8) {
  var t3 = Fs(e8, [Ls.EBML, Ls.DocType])[0];
  return Ot(t3, Gs.webm);
}, mkv: function(e8) {
  var t3 = Fs(e8, [Ls.EBML, Ls.DocType])[0];
  return Ot(t3, Gs.matroska);
}, mp4: function(e8) {
  return !Xs["3gp"](e8) && !Xs.mov(e8) && (!(!Ot(e8, Gs.mp4, { offset: 4 }) && !Ot(e8, Gs.fmp4, { offset: 4 })) || (!(!Ot(e8, Gs.moof, { offset: 4 }) && !Ot(e8, Gs.moov, { offset: 4 })) || void 0));
}, mov: function(e8) {
  return Ot(e8, Gs.mov, { offset: 4 });
}, "3gp": function(e8) {
  return Ot(e8, Gs["3gp"], { offset: 4 });
}, ac3: function(e8) {
  var t3 = xs(e8);
  return Ot(e8, Gs.ac3, { offset: t3 });
}, ts: function(e8) {
  if (e8.length < 189 && e8.length >= 1) return 71 === e8[0];
  for (var t3 = 0; t3 + 188 < e8.length && t3 < 188; ) {
    if (71 === e8[t3] && 71 === e8[t3 + 188]) return true;
    t3 += 1;
  }
  return false;
}, flac: function(e8) {
  var t3 = xs(e8);
  return Ot(e8, Gs.flac, { offset: t3 });
}, ogg: function(e8) {
  return Ot(e8, Gs.ogg);
}, avi: function(e8) {
  return Ot(e8, Gs.riff) && Ot(e8, Gs.avi, { offset: 8 });
}, wav: function(e8) {
  return Ot(e8, Gs.riff) && Ot(e8, Gs.wav, { offset: 8 });
}, h264: function(e8) {
  return zs(e8, 7, 3).length;
}, h265: function(e8) {
  return Ws(e8, [32, 33], 3).length;
} };
var Ks = Object.keys(Xs).filter(function(e8) {
  return "ts" !== e8 && "h264" !== e8 && "h265" !== e8;
}).concat(["ts", "h264", "h265"]);
Ks.forEach(function(e8) {
  var t3 = Xs[e8];
  Xs[e8] = function(e9) {
    return t3(wt(e9));
  };
});
var Ys;
var Qs;
var Js = Xs;
var Zs = function(e8) {
  e8 = wt(e8);
  for (var t3 = 0; t3 < Ks.length; t3++) {
    var i6 = Ks[t3];
    if (Js[i6](e8)) return i6;
  }
  return "";
};
var en = function(e8) {
  return Ps(e8, ["moof"]).length > 0;
};
function tn() {
  if (Qs) return Ys;
  Qs = 1;
  var e8, t3, i6, s6, n5, r4, a6, o4 = 9e4;
  return n5 = function(t4, i7) {
    return e8(s6(t4, i7));
  }, r4 = function(e9, s7) {
    return t3(i6(e9), s7);
  }, a6 = function(e9, t4, s7) {
    return i6(s7 ? e9 : e9 - t4);
  }, Ys = { ONE_SECOND_IN_TS: o4, secondsToVideoTs: e8 = function(e9) {
    return e9 * o4;
  }, secondsToAudioTs: t3 = function(e9, t4) {
    return e9 * t4;
  }, videoTsToSeconds: i6 = function(e9) {
    return e9 / o4;
  }, audioTsToSeconds: s6 = function(e9, t4) {
    return e9 / t4;
  }, audioTsToVideoTs: n5, videoTsToAudioTs: r4, metadataTsToSeconds: a6 };
}
var sn = tn();
var nn = "8.22.0";
var rn = {};
var an = function(e8, t3) {
  return rn[e8] = rn[e8] || [], t3 && (rn[e8] = rn[e8].concat(t3)), rn[e8];
};
var on = function(e8, t3) {
  an(e8, t3);
};
var ln = function(e8, t3) {
  const i6 = an(e8).indexOf(t3);
  return !(i6 <= -1) && (rn[e8] = rn[e8].slice(), rn[e8].splice(i6, 1), true);
};
var hn = function(e8, t3) {
  an(e8, [].concat(t3).map((t4) => {
    const i6 = (...s6) => (ln(e8, i6), t4(...s6));
    return i6;
  }));
};
var un = { prefixed: true };
var dn = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror", "fullscreen"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror", "-webkit-full-screen"]];
var cn = dn[0];
var pn;
for (let Cg = 0; Cg < dn.length; Cg++) if (dn[Cg][1] in ae) {
  pn = dn[Cg];
  break;
}
if (pn) {
  for (let e8 = 0; e8 < pn.length; e8++) un[cn[e8]] = pn[e8];
  un.prefixed = pn[0] !== cn[0];
}
var mn = [];
var gn = (e8, t3, i6) => (s6, n5, r4) => {
  const a6 = t3.levels[n5], o4 = new RegExp(`^(${a6})$`);
  let l7 = e8;
  if ("log" !== s6 && r4.unshift(s6.toUpperCase() + ":"), i6 && (l7 = `%c${e8}`, r4.unshift(i6)), r4.unshift(l7 + ":"), mn) {
    mn.push([].concat(r4));
    const e9 = mn.length - 1e3;
    mn.splice(0, e9 > 0 ? e9 : 0);
  }
  if (!b4.console) return;
  let h2 = b4.console[s6];
  h2 || "debug" !== s6 || (h2 = b4.console.info || b4.console.log), h2 && a6 && o4.test(s6) && h2[Array.isArray(r4) ? "apply" : "call"](b4.console, r4);
};
function fn(e8, t3 = ":", i6 = "") {
  let s6, n5 = "info";
  function r4(...e9) {
    s6("log", n5, e9);
  }
  return s6 = gn(e8, r4, i6), r4.createLogger = (s7, n6, r5) => {
    const a6 = void 0 !== n6 ? n6 : t3;
    return fn(`${e8} ${a6} ${s7}`, a6, void 0 !== r5 ? r5 : i6);
  }, r4.createNewLogger = (e9, t4, i7) => fn(e9, t4, i7), r4.levels = { all: "debug|log|warn|error", off: "", debug: "debug|log|warn|error", info: "log|warn|error", warn: "warn|error", error: "error", DEFAULT: n5 }, r4.level = (e9) => {
    if ("string" == typeof e9) {
      if (!r4.levels.hasOwnProperty(e9)) throw new Error(`"${e9}" in not a valid log level`);
      n5 = e9;
    }
    return n5;
  }, r4.history = () => mn ? [].concat(mn) : [], r4.history.filter = (e9) => (mn || []).filter((t4) => new RegExp(`.*${e9}.*`).test(t4[0])), r4.history.clear = () => {
    mn && (mn.length = 0);
  }, r4.history.disable = () => {
    null !== mn && (mn.length = 0, mn = null);
  }, r4.history.enable = () => {
    null === mn && (mn = []);
  }, r4.error = (...e9) => s6("error", n5, e9), r4.warn = (...e9) => s6("warn", n5, e9), r4.debug = (...e9) => s6("debug", n5, e9), r4;
}
var yn = fn("VIDEOJS");
var _n = yn.createLogger;
var vn = Object.prototype.toString;
var bn = function(e8) {
  return En(e8) ? Object.keys(e8) : [];
};
function Tn(e8, t3) {
  bn(e8).forEach((i6) => t3(e8[i6], i6));
}
function Sn(e8, t3, i6 = 0) {
  return bn(e8).reduce((i7, s6) => t3(i7, e8[s6], s6), i6);
}
function En(e8) {
  return !!e8 && "object" == typeof e8;
}
function wn(e8) {
  return En(e8) && "[object Object]" === vn.call(e8) && e8.constructor === Object;
}
function Cn(...e8) {
  const t3 = {};
  return e8.forEach((e9) => {
    e9 && Tn(e9, (e10, i6) => {
      wn(e10) ? (wn(t3[i6]) || (t3[i6] = {}), t3[i6] = Cn(t3[i6], e10)) : t3[i6] = e10;
    });
  }), t3;
}
function kn(e8 = {}) {
  const t3 = [];
  for (const i6 in e8) if (e8.hasOwnProperty(i6)) {
    const s6 = e8[i6];
    t3.push(s6);
  }
  return t3;
}
function In(e8, t3, i6, s6 = true) {
  const n5 = (i7) => Object.defineProperty(e8, t3, { value: i7, enumerable: true, writable: true }), r4 = { configurable: true, enumerable: true, get() {
    const e9 = i6();
    return n5(e9), e9;
  } };
  return s6 && (r4.set = n5), Object.defineProperty(e8, t3, r4);
}
var xn = Object.freeze({ __proto__: null, each: Tn, reduce: Sn, isObject: En, isPlain: wn, merge: Cn, values: kn, defineLazyProperty: In });
var An;
var Dn = false;
var Pn = null;
var Ln = false;
var On = false;
var Nn = false;
var Rn = false;
var Mn = false;
var Un = null;
var Bn = null;
var Fn = Boolean(b4.cast && b4.cast.framework && b4.cast.framework.CastReceiverContext);
var qn = null;
var jn = false;
var $n = false;
var Hn = false;
var Vn = false;
var zn = false;
var Wn = false;
var Gn = false;
var Xn = Boolean(tr() && ("ontouchstart" in b4 || b4.navigator.maxTouchPoints || b4.DocumentTouch && b4.document instanceof b4.DocumentTouch));
var Kn = b4.navigator && b4.navigator.userAgentData;
if (Kn && Kn.platform && Kn.brands && (Ln = "Android" === Kn.platform, Nn = Boolean(Kn.brands.find((e8) => "Microsoft Edge" === e8.brand)), Rn = Boolean(Kn.brands.find((e8) => "Chromium" === e8.brand)), Mn = !Nn && Rn, Un = Bn = (Kn.brands.find((e8) => "Chromium" === e8.brand) || {}).version || null, $n = "Windows" === Kn.platform), !Rn) {
  const e8 = b4.navigator && b4.navigator.userAgent || "";
  Dn = /iPod/i.test(e8), Pn = (function() {
    const t3 = e8.match(/OS (\d+)_/i);
    return t3 && t3[1] ? t3[1] : null;
  })(), Ln = /Android/i.test(e8), An = (function() {
    const t3 = e8.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
    if (!t3) return null;
    const i6 = t3[1] && parseFloat(t3[1]), s6 = t3[2] && parseFloat(t3[2]);
    return i6 && s6 ? parseFloat(t3[1] + "." + t3[2]) : i6 || null;
  })(), On = /Firefox/i.test(e8), Nn = /Edg/i.test(e8), Rn = /Chrome/i.test(e8) || /CriOS/i.test(e8), Mn = !Nn && Rn, Un = Bn = (function() {
    const t3 = e8.match(/(Chrome|CriOS)\/(\d+)/);
    return t3 && t3[2] ? parseFloat(t3[2]) : null;
  })(), qn = (function() {
    const t3 = /MSIE\s(\d+)\.\d/.exec(e8);
    let i6 = t3 && parseFloat(t3[1]);
    return !i6 && /Trident\/7.0/i.test(e8) && /rv:11.0/.test(e8) && (i6 = 11), i6;
  })(), zn = /Tizen/i.test(e8), Wn = /Web0S/i.test(e8), Gn = zn || Wn, jn = /Safari/i.test(e8) && !Mn && !Ln && !Nn && !Gn, $n = /Windows/i.test(e8), Hn = /iPad/i.test(e8) || jn && Xn && !/iPhone/i.test(e8), Vn = /iPhone/i.test(e8) && !Hn;
}
var Yn = Vn || Hn || Dn;
var Qn = (jn || Yn) && !Mn;
var Jn = Object.freeze({ __proto__: null, get IS_IPOD() {
  return Dn;
}, get IOS_VERSION() {
  return Pn;
}, get IS_ANDROID() {
  return Ln;
}, get ANDROID_VERSION() {
  return An;
}, get IS_FIREFOX() {
  return On;
}, get IS_EDGE() {
  return Nn;
}, get IS_CHROMIUM() {
  return Rn;
}, get IS_CHROME() {
  return Mn;
}, get CHROMIUM_VERSION() {
  return Un;
}, get CHROME_VERSION() {
  return Bn;
}, IS_CHROMECAST_RECEIVER: Fn, get IE_VERSION() {
  return qn;
}, get IS_SAFARI() {
  return jn;
}, get IS_WINDOWS() {
  return $n;
}, get IS_IPAD() {
  return Hn;
}, get IS_IPHONE() {
  return Vn;
}, get IS_TIZEN() {
  return zn;
}, get IS_WEBOS() {
  return Wn;
}, get IS_SMART_TV() {
  return Gn;
}, TOUCH_ENABLED: Xn, IS_IOS: Yn, IS_ANY_SAFARI: Qn });
function Zn(e8) {
  return "string" == typeof e8 && Boolean(e8.trim());
}
function er(e8) {
  if (e8.indexOf(" ") >= 0) throw new Error("class has illegal whitespace characters");
}
function tr() {
  return ae === b4.document;
}
function ir(e8) {
  return En(e8) && 1 === e8.nodeType;
}
function sr() {
  try {
    return b4.parent !== b4.self;
  } catch (e8) {
    return true;
  }
}
function nr(e8) {
  return function(t3, i6) {
    if (!Zn(t3)) return ae[e8](null);
    Zn(i6) && (i6 = ae.querySelector(i6));
    const s6 = ir(i6) ? i6 : ae;
    return s6[e8] && s6[e8](t3);
  };
}
function rr(e8 = "div", t3 = {}, i6 = {}, s6) {
  const n5 = ae.createElement(e8);
  return Object.getOwnPropertyNames(t3).forEach(function(e9) {
    const i7 = t3[e9];
    "textContent" === e9 ? ar(n5, i7) : n5[e9] === i7 && "tabIndex" !== e9 || (n5[e9] = i7);
  }), Object.getOwnPropertyNames(i6).forEach(function(e9) {
    n5.setAttribute(e9, i6[e9]);
  }), s6 && Cr(n5, s6), n5;
}
function ar(e8, t3) {
  return void 0 === e8.textContent ? e8.innerText = t3 : e8.textContent = t3, e8;
}
function or(e8, t3) {
  t3.firstChild ? t3.insertBefore(e8, t3.firstChild) : t3.appendChild(e8);
}
function lr(e8, t3) {
  return er(t3), e8.classList.contains(t3);
}
function hr(e8, ...t3) {
  return e8.classList.add(...t3.reduce((e9, t4) => e9.concat(t4.split(/\s+/)), [])), e8;
}
function ur(e8, ...t3) {
  return e8 ? (e8.classList.remove(...t3.reduce((e9, t4) => e9.concat(t4.split(/\s+/)), [])), e8) : (yn.warn("removeClass was called with an element that doesn't exist"), null);
}
function dr(e8, t3, i6) {
  return "function" == typeof i6 && (i6 = i6(e8, t3)), "boolean" != typeof i6 && (i6 = void 0), t3.split(/\s+/).forEach((t4) => e8.classList.toggle(t4, i6)), e8;
}
function cr(e8, t3) {
  Object.getOwnPropertyNames(t3).forEach(function(i6) {
    const s6 = t3[i6];
    null == s6 || false === s6 ? e8.removeAttribute(i6) : e8.setAttribute(i6, true === s6 ? "" : s6);
  });
}
function pr(e8) {
  const t3 = {}, i6 = ["autoplay", "controls", "playsinline", "loop", "muted", "default", "defaultMuted"];
  if (e8 && e8.attributes && e8.attributes.length > 0) {
    const s6 = e8.attributes;
    for (let e9 = s6.length - 1; e9 >= 0; e9--) {
      const n5 = s6[e9].name;
      let r4 = s6[e9].value;
      i6.includes(n5) && (r4 = null !== r4), t3[n5] = r4;
    }
  }
  return t3;
}
function mr(e8, t3) {
  return e8.getAttribute(t3);
}
function gr(e8, t3, i6) {
  e8.setAttribute(t3, i6);
}
function fr(e8, t3) {
  e8.removeAttribute(t3);
}
function yr() {
  ae.body.focus(), ae.onselectstart = function() {
    return false;
  };
}
function _r() {
  ae.onselectstart = function() {
    return true;
  };
}
function vr(e8) {
  if (e8 && e8.getBoundingClientRect && e8.parentNode) {
    const t3 = e8.getBoundingClientRect(), i6 = {};
    return ["bottom", "height", "left", "right", "top", "width"].forEach((e9) => {
      void 0 !== t3[e9] && (i6[e9] = t3[e9]);
    }), i6.height || (i6.height = parseFloat(Dr(e8, "height"))), i6.width || (i6.width = parseFloat(Dr(e8, "width"))), i6;
  }
}
function br(e8) {
  if (!e8 || e8 && !e8.offsetParent) return { left: 0, top: 0, width: 0, height: 0 };
  const t3 = e8.offsetWidth, i6 = e8.offsetHeight;
  let s6 = 0, n5 = 0;
  for (; e8.offsetParent && e8 !== ae[un.fullscreenElement]; ) s6 += e8.offsetLeft, n5 += e8.offsetTop, e8 = e8.offsetParent;
  return { left: s6, top: n5, width: t3, height: i6 };
}
function Tr(e8, t3) {
  const i6 = { x: 0, y: 0 };
  if (Yn) {
    let t4 = e8;
    for (; t4 && "html" !== t4.nodeName.toLowerCase(); ) {
      const e9 = Dr(t4, "transform");
      if (/^matrix/.test(e9)) {
        const t5 = e9.slice(7, -1).split(/,\s/).map(Number);
        i6.x += t5[4], i6.y += t5[5];
      } else if (/^matrix3d/.test(e9)) {
        const t5 = e9.slice(9, -1).split(/,\s/).map(Number);
        i6.x += t5[12], i6.y += t5[13];
      }
      if (t4.assignedSlot && t4.assignedSlot.parentElement && b4.WebKitCSSMatrix) {
        const e10 = b4.getComputedStyle(t4.assignedSlot.parentElement).transform, s7 = new b4.WebKitCSSMatrix(e10);
        i6.x += s7.m41, i6.y += s7.m42;
      }
      t4 = t4.parentNode || t4.host;
    }
  }
  const s6 = {}, n5 = br(t3.target), r4 = br(e8), a6 = r4.width, o4 = r4.height;
  let l7 = t3.offsetY - (r4.top - n5.top), h2 = t3.offsetX - (r4.left - n5.left);
  return t3.changedTouches && (h2 = t3.changedTouches[0].pageX - r4.left, l7 = t3.changedTouches[0].pageY + r4.top, Yn && (h2 -= i6.x, l7 -= i6.y)), s6.y = 1 - Math.max(0, Math.min(1, l7 / o4)), s6.x = Math.max(0, Math.min(1, h2 / a6)), s6;
}
function Sr(e8) {
  return En(e8) && 3 === e8.nodeType;
}
function Er(e8) {
  for (; e8.firstChild; ) e8.removeChild(e8.firstChild);
  return e8;
}
function wr(e8) {
  return "function" == typeof e8 && (e8 = e8()), (Array.isArray(e8) ? e8 : [e8]).map((e9) => ("function" == typeof e9 && (e9 = e9()), ir(e9) || Sr(e9) ? e9 : "string" == typeof e9 && /\S/.test(e9) ? ae.createTextNode(e9) : void 0)).filter((e9) => e9);
}
function Cr(e8, t3) {
  return wr(t3).forEach((t4) => e8.appendChild(t4)), e8;
}
function kr(e8, t3) {
  return Cr(Er(e8), t3);
}
function Ir(e8) {
  return void 0 === e8.button && void 0 === e8.buttons || (0 === e8.button && void 0 === e8.buttons || ("mouseup" === e8.type && 0 === e8.button && 0 === e8.buttons || ("mousedown" === e8.type && 0 === e8.button && 0 === e8.buttons || 0 === e8.button && 1 === e8.buttons)));
}
var xr = nr("querySelector");
var Ar = nr("querySelectorAll");
function Dr(e8, t3) {
  if (!e8 || !t3) return "";
  if ("function" == typeof b4.getComputedStyle) {
    let s6;
    try {
      s6 = b4.getComputedStyle(e8);
    } catch (i6) {
      return "";
    }
    return s6 ? s6.getPropertyValue(t3) || s6[t3] : "";
  }
  return "";
}
function Pr(e8) {
  [...ae.styleSheets].forEach((t3) => {
    try {
      const i6 = [...t3.cssRules].map((e9) => e9.cssText).join(""), s6 = ae.createElement("style");
      s6.textContent = i6, e8.document.head.appendChild(s6);
    } catch (i6) {
      const s6 = ae.createElement("link");
      s6.rel = "stylesheet", s6.type = t3.type, s6.media = t3.media.mediaText, s6.href = t3.href, e8.document.head.appendChild(s6);
    }
  });
}
var Lr = Object.freeze({ __proto__: null, isReal: tr, isEl: ir, isInFrame: sr, createEl: rr, textContent: ar, prependTo: or, hasClass: lr, addClass: hr, removeClass: ur, toggleClass: dr, setAttributes: cr, getAttributes: pr, getAttribute: mr, setAttribute: gr, removeAttribute: fr, blockTextSelection: yr, unblockTextSelection: _r, getBoundingClientRect: vr, findPosition: br, getPointerPosition: Tr, isTextNode: Sr, emptyEl: Er, normalizeContent: wr, appendContent: Cr, insertContent: kr, isSingleLeftClick: Ir, $: xr, $$: Ar, computedStyle: Dr, copyStyleSheetsToWindow: Pr });
var Or;
var Nr = false;
var Rr = function() {
  if (false === Or.options.autoSetup) return;
  const e8 = Array.prototype.slice.call(ae.getElementsByTagName("video")), t3 = Array.prototype.slice.call(ae.getElementsByTagName("audio")), i6 = Array.prototype.slice.call(ae.getElementsByTagName("video-js")), s6 = e8.concat(t3, i6);
  if (s6 && s6.length > 0) for (let n5 = 0, r4 = s6.length; n5 < r4; n5++) {
    const e9 = s6[n5];
    if (!e9 || !e9.getAttribute) {
      Mr(1);
      break;
    }
    if (void 0 === e9.player) {
      null !== e9.getAttribute("data-setup") && Or(e9);
    }
  }
  else Nr || Mr(1);
};
function Mr(e8, t3) {
  tr() && (t3 && (Or = t3), b4.setTimeout(Rr, e8));
}
function Ur() {
  Nr = true, b4.removeEventListener("load", Ur);
}
tr() && ("complete" === ae.readyState ? Ur() : b4.addEventListener("load", Ur));
var Br = function(e8) {
  const t3 = ae.createElement("style");
  return t3.className = e8, t3;
};
var Fr = function(e8, t3) {
  e8.styleSheet ? e8.styleSheet.cssText = t3 : e8.textContent = t3;
};
var qr = /* @__PURE__ */ new WeakMap();
var jr;
var $r = 3;
function Hr() {
  return $r++;
}
function Vr(e8, t3) {
  if (!qr.has(e8)) return;
  const i6 = qr.get(e8);
  0 === i6.handlers[t3].length && (delete i6.handlers[t3], e8.removeEventListener ? e8.removeEventListener(t3, i6.dispatcher, false) : e8.detachEvent && e8.detachEvent("on" + t3, i6.dispatcher)), Object.getOwnPropertyNames(i6.handlers).length <= 0 && (delete i6.handlers, delete i6.dispatcher, delete i6.disabled), 0 === Object.getOwnPropertyNames(i6).length && qr.delete(e8);
}
function zr(e8, t3, i6, s6) {
  i6.forEach(function(i7) {
    e8(t3, i7, s6);
  });
}
function Wr(e8) {
  if (e8.fixed_) return e8;
  function t3() {
    return true;
  }
  function i6() {
    return false;
  }
  if (!e8 || !e8.isPropagationStopped || !e8.isImmediatePropagationStopped) {
    const s6 = e8 || b4.event;
    e8 = {};
    const n5 = ["layerX", "layerY", "keyLocation", "path", "webkitMovementX", "webkitMovementY", "mozPressure", "mozInputSource"];
    for (const t4 in s6) n5.includes(t4) || "returnValue" === t4 && s6.preventDefault || (e8[t4] = s6[t4]);
    if (e8.target || (e8.target = e8.srcElement || ae), e8.relatedTarget || (e8.relatedTarget = e8.fromElement === e8.target ? e8.toElement : e8.fromElement), e8.preventDefault = function() {
      s6.preventDefault && s6.preventDefault(), e8.returnValue = false, s6.returnValue = false, e8.defaultPrevented = true;
    }, e8.defaultPrevented = false, e8.stopPropagation = function() {
      s6.stopPropagation && s6.stopPropagation(), e8.cancelBubble = true, s6.cancelBubble = true, e8.isPropagationStopped = t3;
    }, e8.isPropagationStopped = i6, e8.stopImmediatePropagation = function() {
      s6.stopImmediatePropagation && s6.stopImmediatePropagation(), e8.isImmediatePropagationStopped = t3, e8.stopPropagation();
    }, e8.isImmediatePropagationStopped = i6, null !== e8.clientX && void 0 !== e8.clientX) {
      const t4 = ae.documentElement, i7 = ae.body;
      e8.pageX = e8.clientX + (t4 && t4.scrollLeft || i7 && i7.scrollLeft || 0) - (t4 && t4.clientLeft || i7 && i7.clientLeft || 0), e8.pageY = e8.clientY + (t4 && t4.scrollTop || i7 && i7.scrollTop || 0) - (t4 && t4.clientTop || i7 && i7.clientTop || 0);
    }
    e8.which = e8.charCode || e8.keyCode, null !== e8.button && void 0 !== e8.button && (e8.button = 1 & e8.button ? 0 : 4 & e8.button ? 1 : 2 & e8.button ? 2 : 0);
  }
  return e8.fixed_ = true, e8;
}
var Gr = function() {
  if ("boolean" != typeof jr) {
    jr = false;
    try {
      const e8 = Object.defineProperty({}, "passive", { get() {
        jr = true;
      } });
      b4.addEventListener("test", null, e8), b4.removeEventListener("test", null, e8);
    } catch (e8) {
    }
  }
  return jr;
};
var Xr = ["touchstart", "touchmove"];
function Kr(e8, t3, i6) {
  if (Array.isArray(t3)) return zr(Kr, e8, t3, i6);
  qr.has(e8) || qr.set(e8, {});
  const s6 = qr.get(e8);
  if (s6.handlers || (s6.handlers = {}), s6.handlers[t3] || (s6.handlers[t3] = []), i6.guid || (i6.guid = Hr()), s6.handlers[t3].push(i6), s6.dispatcher || (s6.disabled = false, s6.dispatcher = function(t4, i7) {
    if (s6.disabled) return;
    t4 = Wr(t4);
    const n5 = s6.handlers[t4.type];
    if (n5) {
      const s7 = n5.slice(0);
      for (let n6 = 0, a6 = s7.length; n6 < a6 && !t4.isImmediatePropagationStopped(); n6++) try {
        s7[n6].call(e8, t4, i7);
      } catch (r4) {
        yn.error(r4);
      }
    }
  }), 1 === s6.handlers[t3].length) if (e8.addEventListener) {
    let i7 = false;
    Gr() && Xr.indexOf(t3) > -1 && (i7 = { passive: true }), e8.addEventListener(t3, s6.dispatcher, i7);
  } else e8.attachEvent && e8.attachEvent("on" + t3, s6.dispatcher);
}
function Yr(e8, t3, i6) {
  if (!qr.has(e8)) return;
  const s6 = qr.get(e8);
  if (!s6.handlers) return;
  if (Array.isArray(t3)) return zr(Yr, e8, t3, i6);
  const n5 = function(e9, t4) {
    s6.handlers[t4] = [], Vr(e9, t4);
  };
  if (void 0 === t3) {
    for (const t4 in s6.handlers) Object.prototype.hasOwnProperty.call(s6.handlers || {}, t4) && n5(e8, t4);
    return;
  }
  const r4 = s6.handlers[t3];
  if (r4) if (i6) {
    if (i6.guid) for (let e9 = 0; e9 < r4.length; e9++) r4[e9].guid === i6.guid && r4.splice(e9--, 1);
    Vr(e8, t3);
  } else n5(e8, t3);
}
function Qr(e8, t3, i6) {
  const s6 = qr.has(e8) ? qr.get(e8) : {}, n5 = e8.parentNode || e8.ownerDocument;
  if ("string" == typeof t3 ? t3 = { type: t3, target: e8 } : t3.target || (t3.target = e8), t3 = Wr(t3), s6.dispatcher && s6.dispatcher.call(e8, t3, i6), n5 && !t3.isPropagationStopped() && true === t3.bubbles) Qr.call(null, n5, t3, i6);
  else if (!n5 && !t3.defaultPrevented && t3.target && t3.target[t3.type]) {
    qr.has(t3.target) || qr.set(t3.target, {});
    const e9 = qr.get(t3.target);
    t3.target[t3.type] && (e9.disabled = true, "function" == typeof t3.target[t3.type] && t3.target[t3.type](), e9.disabled = false);
  }
  return !t3.defaultPrevented;
}
function Jr(e8, t3, i6) {
  if (Array.isArray(t3)) return zr(Jr, e8, t3, i6);
  const s6 = function() {
    Yr(e8, t3, s6), i6.apply(this, arguments);
  };
  s6.guid = i6.guid = i6.guid || Hr(), Kr(e8, t3, s6);
}
function Zr(e8, t3, i6) {
  const s6 = function() {
    Yr(e8, t3, s6), i6.apply(this, arguments);
  };
  s6.guid = i6.guid = i6.guid || Hr(), Kr(e8, t3, s6);
}
var ea = Object.freeze({ __proto__: null, fixEvent: Wr, on: Kr, off: Yr, trigger: Qr, one: Jr, any: Zr });
var ta = 30;
var ia = function(e8, t3, i6) {
  t3.guid || (t3.guid = Hr());
  const s6 = t3.bind(e8);
  return s6.guid = i6 ? i6 + "_" + t3.guid : t3.guid, s6;
};
var sa = function(e8, t3) {
  let i6 = b4.performance.now();
  return function(...s6) {
    const n5 = b4.performance.now();
    n5 - i6 >= t3 && (e8(...s6), i6 = n5);
  };
};
var na = function(e8, t3, i6, s6 = b4) {
  let n5;
  const r4 = () => {
    s6.clearTimeout(n5), n5 = null;
  }, a6 = function() {
    const r5 = this, a7 = arguments;
    let o4 = function() {
      n5 = null, o4 = null, i6 || e8.apply(r5, a7);
    };
    !n5 && i6 && e8.apply(r5, a7), s6.clearTimeout(n5), n5 = s6.setTimeout(o4, t3);
  };
  return a6.cancel = r4, a6;
};
var ra = Object.freeze({ __proto__: null, UPDATE_REFRESH_INTERVAL: ta, bind_: ia, throttle: sa, debounce: na });
var aa;
var oa = class {
  on(e8, t3) {
    const i6 = this.addEventListener;
    this.addEventListener = () => {
    }, Kr(this, e8, t3), this.addEventListener = i6;
  }
  off(e8, t3) {
    Yr(this, e8, t3);
  }
  one(e8, t3) {
    const i6 = this.addEventListener;
    this.addEventListener = () => {
    }, Jr(this, e8, t3), this.addEventListener = i6;
  }
  any(e8, t3) {
    const i6 = this.addEventListener;
    this.addEventListener = () => {
    }, Zr(this, e8, t3), this.addEventListener = i6;
  }
  trigger(e8) {
    const t3 = e8.type || e8;
    "string" == typeof e8 && (e8 = { type: t3 }), e8 = Wr(e8), this.allowedEvents_[t3] && this["on" + t3] && this["on" + t3](e8), Qr(this, e8);
  }
  queueTrigger(e8) {
    aa || (aa = /* @__PURE__ */ new Map());
    const t3 = e8.type || e8;
    let i6 = aa.get(this);
    i6 || (i6 = /* @__PURE__ */ new Map(), aa.set(this, i6));
    const s6 = i6.get(t3);
    i6.delete(t3), b4.clearTimeout(s6);
    const n5 = b4.setTimeout(() => {
      i6.delete(t3), 0 === i6.size && (i6 = null, aa.delete(this)), this.trigger(e8);
    }, 0);
    i6.set(t3, n5);
  }
};
oa.prototype.allowedEvents_ = {}, oa.prototype.addEventListener = oa.prototype.on, oa.prototype.removeEventListener = oa.prototype.off, oa.prototype.dispatchEvent = oa.prototype.trigger;
var la = (e8) => "function" == typeof e8.name ? e8.name() : "string" == typeof e8.name ? e8.name : e8.name_ ? e8.name_ : e8.constructor && e8.constructor.name ? e8.constructor.name : typeof e8;
var ha = (e8) => e8 instanceof oa || !!e8.eventBusEl_ && ["on", "one", "off", "trigger"].every((t3) => "function" == typeof e8[t3]);
var ua = (e8, t3) => {
  ha(e8) ? t3() : (e8.eventedCallbacks || (e8.eventedCallbacks = []), e8.eventedCallbacks.push(t3));
};
var da = (e8) => "string" == typeof e8 && /\S/.test(e8) || Array.isArray(e8) && !!e8.length;
var ca = (e8, t3, i6) => {
  if (!e8 || !e8.nodeName && !ha(e8)) throw new Error(`Invalid target for ${la(t3)}#${i6}; must be a DOM node or evented object.`);
};
var pa = (e8, t3, i6) => {
  if (!da(e8)) throw new Error(`Invalid event type for ${la(t3)}#${i6}; must be a non-empty string or array.`);
};
var ma = (e8, t3, i6) => {
  if ("function" != typeof e8) throw new Error(`Invalid listener for ${la(t3)}#${i6}; must be a function.`);
};
var ga = (e8, t3, i6) => {
  const s6 = t3.length < 3 || t3[0] === e8 || t3[0] === e8.eventBusEl_;
  let n5, r4, a6;
  return s6 ? (n5 = e8.eventBusEl_, t3.length >= 3 && t3.shift(), [r4, a6] = t3) : (n5 = t3[0], r4 = t3[1], a6 = t3[2]), ca(n5, e8, i6), pa(r4, e8, i6), ma(a6, e8, i6), a6 = ia(e8, a6), { isTargetingSelf: s6, target: n5, type: r4, listener: a6 };
};
var fa = (e8, t3, i6, s6) => {
  ca(e8, e8, t3), e8.nodeName ? ea[t3](e8, i6, s6) : e8[t3](i6, s6);
};
var ya = { on(...e8) {
  const { isTargetingSelf: t3, target: i6, type: s6, listener: n5 } = ga(this, e8, "on");
  if (fa(i6, "on", s6, n5), !t3) {
    const e9 = () => this.off(i6, s6, n5);
    e9.guid = n5.guid;
    const t4 = () => this.off("dispose", e9);
    t4.guid = n5.guid, fa(this, "on", "dispose", e9), fa(i6, "on", "dispose", t4);
  }
}, one(...e8) {
  const { isTargetingSelf: t3, target: i6, type: s6, listener: n5 } = ga(this, e8, "one");
  if (t3) fa(i6, "one", s6, n5);
  else {
    const e9 = (...t4) => {
      this.off(i6, s6, e9), n5.apply(null, t4);
    };
    e9.guid = n5.guid, fa(i6, "one", s6, e9);
  }
}, any(...e8) {
  const { isTargetingSelf: t3, target: i6, type: s6, listener: n5 } = ga(this, e8, "any");
  if (t3) fa(i6, "any", s6, n5);
  else {
    const e9 = (...t4) => {
      this.off(i6, s6, e9), n5.apply(null, t4);
    };
    e9.guid = n5.guid, fa(i6, "any", s6, e9);
  }
}, off(e8, t3, i6) {
  if (!e8 || da(e8)) Yr(this.eventBusEl_, e8, t3);
  else {
    const s6 = e8, n5 = t3;
    ca(s6, this, "off"), pa(n5, this, "off"), ma(i6, this, "off"), i6 = ia(this, i6), this.off("dispose", i6), s6.nodeName ? (Yr(s6, n5, i6), Yr(s6, "dispose", i6)) : ha(s6) && (s6.off(n5, i6), s6.off("dispose", i6));
  }
}, trigger(e8, t3) {
  ca(this.eventBusEl_, this, "trigger");
  const i6 = e8 && "string" != typeof e8 ? e8.type : e8;
  if (!da(i6)) throw new Error(`Invalid event type for ${la(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);
  return Qr(this.eventBusEl_, e8, t3);
} };
function _a(e8, t3 = {}) {
  const { eventBusKey: i6 } = t3;
  if (i6) {
    if (!e8[i6].nodeName) throw new Error(`The eventBusKey "${i6}" does not refer to an element.`);
    e8.eventBusEl_ = e8[i6];
  } else e8.eventBusEl_ = rr("span", { className: "vjs-event-bus" });
  return Object.assign(e8, ya), e8.eventedCallbacks && e8.eventedCallbacks.forEach((e9) => {
    e9();
  }), e8.on("dispose", () => {
    e8.off(), [e8, e8.el_, e8.eventBusEl_].forEach(function(e9) {
      e9 && qr.has(e9) && qr.delete(e9);
    }), b4.setTimeout(() => {
      e8.eventBusEl_ = null;
    }, 0);
  }), e8;
}
var va = { state: {}, setState(e8) {
  let t3;
  return "function" == typeof e8 && (e8 = e8()), Tn(e8, (e9, i6) => {
    this.state[i6] !== e9 && (t3 = t3 || {}, t3[i6] = { from: this.state[i6], to: e9 }), this.state[i6] = e9;
  }), t3 && ha(this) && this.trigger({ changes: t3, type: "statechanged" }), t3;
} };
function ba(e8, t3) {
  return Object.assign(e8, va), e8.state = Object.assign({}, e8.state, t3), "function" == typeof e8.handleStateChanged && ha(e8) && e8.on("statechanged", e8.handleStateChanged), e8;
}
var Ta = function(e8) {
  return "string" != typeof e8 ? e8 : e8.replace(/./, (e9) => e9.toLowerCase());
};
var Sa = function(e8) {
  return "string" != typeof e8 ? e8 : e8.replace(/./, (e9) => e9.toUpperCase());
};
var Ea = function(e8, t3) {
  return Sa(e8) === Sa(t3);
};
var wa = Object.freeze({ __proto__: null, toLowerCase: Ta, toTitleCase: Sa, titleCaseEquals: Ea });
var Ca = class _Ca {
  constructor(e8, t3, i6) {
    if (!e8 && this.play ? this.player_ = e8 = this : this.player_ = e8, this.isDisposed_ = false, this.parentComponent_ = null, this.options_ = Cn({}, this.options_), t3 = this.options_ = Cn(this.options_, t3), this.id_ = t3.id || t3.el && t3.el.id, !this.id_) {
      const t4 = e8 && e8.id && e8.id() || "no_player";
      this.id_ = `${t4}_component_${Hr()}`;
    }
    this.name_ = t3.name || null, t3.el ? this.el_ = t3.el : false !== t3.createEl && (this.el_ = this.createEl()), t3.className && this.el_ && t3.className.split(" ").forEach((e9) => this.addClass(e9)), ["on", "off", "one", "any", "trigger"].forEach((e9) => {
      this[e9] = void 0;
    }), false !== t3.evented && (_a(this, { eventBusKey: this.el_ ? "el_" : null }), this.handleLanguagechange = this.handleLanguagechange.bind(this), this.on(this.player_, "languagechange", this.handleLanguagechange)), ba(this, this.constructor.defaultState), this.children_ = [], this.childIndex_ = {}, this.childNameIndex_ = {}, this.setTimeoutIds_ = /* @__PURE__ */ new Set(), this.setIntervalIds_ = /* @__PURE__ */ new Set(), this.rafIds_ = /* @__PURE__ */ new Set(), this.namedRafs_ = /* @__PURE__ */ new Map(), this.clearingTimersOnDispose_ = false, false !== t3.initChildren && this.initChildren(), this.ready(i6), false !== t3.reportTouchActivity && this.enableTouchActivity();
  }
  dispose(e8 = {}) {
    if (!this.isDisposed_) {
      if (this.readyQueue_ && (this.readyQueue_.length = 0), this.trigger({ type: "dispose", bubbles: false }), this.isDisposed_ = true, this.children_) for (let e9 = this.children_.length - 1; e9 >= 0; e9--) this.children_[e9].dispose && this.children_[e9].dispose();
      this.children_ = null, this.childIndex_ = null, this.childNameIndex_ = null, this.parentComponent_ = null, this.el_ && (this.el_.parentNode && (e8.restoreEl ? this.el_.parentNode.replaceChild(e8.restoreEl, this.el_) : this.el_.parentNode.removeChild(this.el_)), this.el_ = null), this.player_ = null;
    }
  }
  isDisposed() {
    return Boolean(this.isDisposed_);
  }
  player() {
    return this.player_;
  }
  options(e8) {
    return e8 ? (this.options_ = Cn(this.options_, e8), this.options_) : this.options_;
  }
  el() {
    return this.el_;
  }
  createEl(e8, t3, i6) {
    return rr(e8, t3, i6);
  }
  localize(e8, t3, i6 = e8) {
    const s6 = this.player_.language && this.player_.language(), n5 = this.player_.languages && this.player_.languages(), r4 = n5 && n5[s6], a6 = s6 && s6.split("-")[0], o4 = n5 && n5[a6];
    let l7 = i6;
    return r4 && r4[e8] ? l7 = r4[e8] : o4 && o4[e8] && (l7 = o4[e8]), t3 && (l7 = l7.replace(/\{(\d+)\}/g, function(e9, i7) {
      const s7 = t3[i7 - 1];
      let n6 = s7;
      return void 0 === s7 && (n6 = e9), n6;
    })), l7;
  }
  handleLanguagechange() {
  }
  contentEl() {
    return this.contentEl_ || this.el_;
  }
  id() {
    return this.id_;
  }
  name() {
    return this.name_;
  }
  children() {
    return this.children_;
  }
  getChildById(e8) {
    return this.childIndex_[e8];
  }
  getChild(e8) {
    if (e8) return this.childNameIndex_[e8];
  }
  getDescendant(...e8) {
    e8 = e8.reduce((e9, t4) => e9.concat(t4), []);
    let t3 = this;
    for (let i6 = 0; i6 < e8.length; i6++) if (t3 = t3.getChild(e8[i6]), !t3 || !t3.getChild) return;
    return t3;
  }
  setIcon(e8, t3 = this.el()) {
    if (!this.player_.options_.experimentalSvgIcons) return;
    const i6 = "http://www.w3.org/2000/svg", s6 = rr("span", { className: "vjs-icon-placeholder vjs-svg-icon" }, { "aria-hidden": "true" }), n5 = ae.createElementNS(i6, "svg");
    n5.setAttributeNS(null, "viewBox", "0 0 512 512");
    const r4 = ae.createElementNS(i6, "use");
    return n5.appendChild(r4), r4.setAttributeNS(null, "href", `#vjs-icon-${e8}`), s6.appendChild(n5), this.iconIsSet_ ? t3.replaceChild(s6, t3.querySelector(".vjs-icon-placeholder")) : t3.appendChild(s6), this.iconIsSet_ = true, s6;
  }
  addChild(e8, t3 = {}, i6 = this.children_.length) {
    let s6, n5;
    if ("string" == typeof e8) {
      n5 = Sa(e8);
      const i7 = t3.componentClass || n5;
      t3.name = n5;
      const r4 = _Ca.getComponent(i7);
      if (!r4) throw new Error(`Component ${i7} does not exist`);
      if ("function" != typeof r4) return null;
      s6 = new r4(this.player_ || this, t3);
    } else s6 = e8;
    if (s6.parentComponent_ && s6.parentComponent_.removeChild(s6), this.children_.splice(i6, 0, s6), s6.parentComponent_ = this, "function" == typeof s6.id && (this.childIndex_[s6.id()] = s6), n5 = n5 || s6.name && Sa(s6.name()), n5 && (this.childNameIndex_[n5] = s6, this.childNameIndex_[Ta(n5)] = s6), "function" == typeof s6.el && s6.el()) {
      let e9 = null;
      this.children_[i6 + 1] && (this.children_[i6 + 1].el_ ? e9 = this.children_[i6 + 1].el_ : ir(this.children_[i6 + 1]) && (e9 = this.children_[i6 + 1])), this.contentEl().insertBefore(s6.el(), e9);
    }
    return s6;
  }
  removeChild(e8) {
    if ("string" == typeof e8 && (e8 = this.getChild(e8)), !e8 || !this.children_) return;
    let t3 = false;
    for (let s6 = this.children_.length - 1; s6 >= 0; s6--) if (this.children_[s6] === e8) {
      t3 = true, this.children_.splice(s6, 1);
      break;
    }
    if (!t3) return;
    e8.parentComponent_ = null, this.childIndex_[e8.id()] = null, this.childNameIndex_[Sa(e8.name())] = null, this.childNameIndex_[Ta(e8.name())] = null;
    const i6 = e8.el();
    i6 && i6.parentNode === this.contentEl() && this.contentEl().removeChild(e8.el());
  }
  initChildren() {
    const e8 = this.options_.children;
    if (e8) {
      const t3 = this.options_, i6 = (e9) => {
        const i7 = e9.name;
        let s7 = e9.opts;
        if (void 0 !== t3[i7] && (s7 = t3[i7]), false === s7) return;
        true === s7 && (s7 = {}), s7.playerOptions = this.options_.playerOptions;
        const n6 = this.addChild(i7, s7);
        n6 && (this[i7] = n6);
      };
      let s6;
      const n5 = _Ca.getComponent("Tech");
      s6 = Array.isArray(e8) ? e8 : Object.keys(e8), s6.concat(Object.keys(this.options_).filter(function(e9) {
        return !s6.some(function(t4) {
          return "string" == typeof t4 ? e9 === t4 : e9 === t4.name;
        });
      })).map((t4) => {
        let i7, s7;
        return "string" == typeof t4 ? (i7 = t4, s7 = e8[i7] || this.options_[i7] || {}) : (i7 = t4.name, s7 = t4), { name: i7, opts: s7 };
      }).filter((e9) => {
        const t4 = _Ca.getComponent(e9.opts.componentClass || Sa(e9.name));
        return t4 && !n5.isTech(t4);
      }).forEach(i6);
    }
  }
  buildCSSClass() {
    return "";
  }
  ready(e8, t3 = false) {
    if (e8) return this.isReady_ ? void (t3 ? e8.call(this) : this.setTimeout(e8, 1)) : (this.readyQueue_ = this.readyQueue_ || [], void this.readyQueue_.push(e8));
  }
  triggerReady() {
    this.isReady_ = true, this.setTimeout(function() {
      const e8 = this.readyQueue_;
      this.readyQueue_ = [], e8 && e8.length > 0 && e8.forEach(function(e9) {
        e9.call(this);
      }, this), this.trigger("ready");
    }, 1);
  }
  $(e8, t3) {
    return xr(e8, t3 || this.contentEl());
  }
  $$(e8, t3) {
    return Ar(e8, t3 || this.contentEl());
  }
  hasClass(e8) {
    return lr(this.el_, e8);
  }
  addClass(...e8) {
    hr(this.el_, ...e8);
  }
  removeClass(...e8) {
    ur(this.el_, ...e8);
  }
  toggleClass(e8, t3) {
    dr(this.el_, e8, t3);
  }
  show() {
    this.removeClass("vjs-hidden");
  }
  hide() {
    this.addClass("vjs-hidden");
  }
  lockShowing() {
    this.addClass("vjs-lock-showing");
  }
  unlockShowing() {
    this.removeClass("vjs-lock-showing");
  }
  getAttribute(e8) {
    return mr(this.el_, e8);
  }
  setAttribute(e8, t3) {
    gr(this.el_, e8, t3);
  }
  removeAttribute(e8) {
    fr(this.el_, e8);
  }
  width(e8, t3) {
    return this.dimension("width", e8, t3);
  }
  height(e8, t3) {
    return this.dimension("height", e8, t3);
  }
  dimensions(e8, t3) {
    this.width(e8, true), this.height(t3);
  }
  dimension(e8, t3, i6) {
    if (void 0 !== t3) return null !== t3 && t3 == t3 || (t3 = 0), -1 !== ("" + t3).indexOf("%") || -1 !== ("" + t3).indexOf("px") ? this.el_.style[e8] = t3 : this.el_.style[e8] = "auto" === t3 ? "" : t3 + "px", void (i6 || this.trigger("componentresize"));
    if (!this.el_) return 0;
    const s6 = this.el_.style[e8], n5 = s6.indexOf("px");
    return -1 !== n5 ? parseInt(s6.slice(0, n5), 10) : parseInt(this.el_["offset" + Sa(e8)], 10);
  }
  currentDimension(e8) {
    let t3 = 0;
    if ("width" !== e8 && "height" !== e8) throw new Error("currentDimension only accepts width or height value");
    if (t3 = Dr(this.el_, e8), t3 = parseFloat(t3), 0 === t3 || isNaN(t3)) {
      const i6 = `offset${Sa(e8)}`;
      t3 = this.el_[i6];
    }
    return t3;
  }
  currentDimensions() {
    return { width: this.currentDimension("width"), height: this.currentDimension("height") };
  }
  currentWidth() {
    return this.currentDimension("width");
  }
  currentHeight() {
    return this.currentDimension("height");
  }
  getPositions() {
    const e8 = this.el_.getBoundingClientRect();
    return { boundingClientRect: { x: e8.x, y: e8.y, width: e8.width, height: e8.height, top: e8.top, right: e8.right, bottom: e8.bottom, left: e8.left }, center: { x: e8.left + e8.width / 2, y: e8.top + e8.height / 2, width: 0, height: 0, top: e8.top + e8.height / 2, right: e8.left + e8.width / 2, bottom: e8.top + e8.height / 2, left: e8.left + e8.width / 2 } };
  }
  focus() {
    this.el_.focus();
  }
  blur() {
    this.el_.blur();
  }
  handleKeyDown(e8) {
    this.player_ && ("Tab" === e8.key || this.player_.options_.playerOptions.spatialNavigation && this.player_.options_.playerOptions.spatialNavigation.enabled || e8.stopPropagation(), this.player_.handleKeyDown(e8));
  }
  handleKeyPress(e8) {
    this.handleKeyDown(e8);
  }
  emitTapEvents() {
    let e8 = 0, t3 = null;
    const i6 = 10, s6 = 200;
    let n5;
    this.on("touchstart", function(i7) {
      1 === i7.touches.length && (t3 = { pageX: i7.touches[0].pageX, pageY: i7.touches[0].pageY }, e8 = b4.performance.now(), n5 = true);
    }), this.on("touchmove", function(e9) {
      if (e9.touches.length > 1) n5 = false;
      else if (t3) {
        const s7 = e9.touches[0].pageX - t3.pageX, r5 = e9.touches[0].pageY - t3.pageY;
        Math.sqrt(s7 * s7 + r5 * r5) > i6 && (n5 = false);
      }
    });
    const r4 = function() {
      n5 = false;
    };
    this.on("touchleave", r4), this.on("touchcancel", r4), this.on("touchend", function(i7) {
      if (t3 = null, true === n5) {
        b4.performance.now() - e8 < s6 && (i7.preventDefault(), this.trigger("tap"));
      }
    });
  }
  enableTouchActivity() {
    if (!this.player() || !this.player().reportUserActivity) return;
    const e8 = ia(this.player(), this.player().reportUserActivity);
    let t3;
    this.on("touchstart", function() {
      e8(), this.clearInterval(t3), t3 = this.setInterval(e8, 250);
    });
    const i6 = function(i7) {
      e8(), this.clearInterval(t3);
    };
    this.on("touchmove", e8), this.on("touchend", i6), this.on("touchcancel", i6);
  }
  setTimeout(e8, t3) {
    var i6;
    return e8 = ia(this, e8), this.clearTimersOnDispose_(), i6 = b4.setTimeout(() => {
      this.setTimeoutIds_.has(i6) && this.setTimeoutIds_.delete(i6), e8();
    }, t3), this.setTimeoutIds_.add(i6), i6;
  }
  clearTimeout(e8) {
    return this.setTimeoutIds_.has(e8) && (this.setTimeoutIds_.delete(e8), b4.clearTimeout(e8)), e8;
  }
  setInterval(e8, t3) {
    e8 = ia(this, e8), this.clearTimersOnDispose_();
    const i6 = b4.setInterval(e8, t3);
    return this.setIntervalIds_.add(i6), i6;
  }
  clearInterval(e8) {
    return this.setIntervalIds_.has(e8) && (this.setIntervalIds_.delete(e8), b4.clearInterval(e8)), e8;
  }
  requestAnimationFrame(e8) {
    var t3;
    return this.clearTimersOnDispose_(), e8 = ia(this, e8), t3 = b4.requestAnimationFrame(() => {
      this.rafIds_.has(t3) && this.rafIds_.delete(t3), e8();
    }), this.rafIds_.add(t3), t3;
  }
  requestNamedAnimationFrame(e8, t3) {
    this.namedRafs_.has(e8) && this.cancelNamedAnimationFrame(e8), this.clearTimersOnDispose_(), t3 = ia(this, t3);
    const i6 = this.requestAnimationFrame(() => {
      t3(), this.namedRafs_.has(e8) && this.namedRafs_.delete(e8);
    });
    return this.namedRafs_.set(e8, i6), e8;
  }
  cancelNamedAnimationFrame(e8) {
    this.namedRafs_.has(e8) && (this.cancelAnimationFrame(this.namedRafs_.get(e8)), this.namedRafs_.delete(e8));
  }
  cancelAnimationFrame(e8) {
    return this.rafIds_.has(e8) && (this.rafIds_.delete(e8), b4.cancelAnimationFrame(e8)), e8;
  }
  clearTimersOnDispose_() {
    this.clearingTimersOnDispose_ || (this.clearingTimersOnDispose_ = true, this.one("dispose", () => {
      [["namedRafs_", "cancelNamedAnimationFrame"], ["rafIds_", "cancelAnimationFrame"], ["setTimeoutIds_", "clearTimeout"], ["setIntervalIds_", "clearInterval"]].forEach(([e8, t3]) => {
        this[e8].forEach((e9, i6) => this[t3](i6));
      }), this.clearingTimersOnDispose_ = false;
    }));
  }
  getIsDisabled() {
    return Boolean(this.el_.disabled);
  }
  getIsExpresslyInert() {
    return this.el_.inert && !this.el_.ownerDocument.documentElement.inert;
  }
  getIsFocusable(e8) {
    return (e8 || this.el_).tabIndex >= 0 && !(this.getIsDisabled() || this.getIsExpresslyInert());
  }
  getIsAvailableToBeFocused(e8) {
    function t3(e9) {
      const t4 = b4.getComputedStyle(e9, null), i7 = t4.getPropertyValue("visibility");
      return "none" !== t4.getPropertyValue("display") && !["hidden", "collapse"].includes(i7);
    }
    function i6(e9) {
      return !!t3(e9.parentElement) && !(!t3(e9) || "0" === e9.style.opacity || "0px" === b4.getComputedStyle(e9).height || "0px" === b4.getComputedStyle(e9).width);
    }
    function s6(e9) {
      if (e9.offsetWidth + e9.offsetHeight + e9.getBoundingClientRect().height + e9.getBoundingClientRect().width === 0) return false;
      const t4 = { x: e9.getBoundingClientRect().left + e9.offsetWidth / 2, y: e9.getBoundingClientRect().top + e9.offsetHeight / 2 };
      if (t4.x < 0) return false;
      if (t4.x > (ae.documentElement.clientWidth || b4.innerWidth)) return false;
      if (t4.y < 0) return false;
      if (t4.y > (ae.documentElement.clientHeight || b4.innerHeight)) return false;
      let i7 = ae.elementFromPoint(t4.x, t4.y);
      for (; i7; ) {
        if (i7 === e9) return true;
        if (!i7.parentNode) return false;
        i7 = i7.parentNode;
      }
    }
    return e8 || (e8 = this.el()), !(!s6(e8) || !i6(e8) || e8.parentElement && !(e8.tabIndex >= 0));
  }
  static registerComponent(e8, t3) {
    if ("string" != typeof e8 || !e8) throw new Error(`Illegal component name, "${e8}"; must be a non-empty string.`);
    const i6 = _Ca.getComponent("Tech"), s6 = i6 && i6.isTech(t3), n5 = _Ca === t3 || _Ca.prototype.isPrototypeOf(t3.prototype);
    if (s6 || !n5) {
      let t4;
      throw t4 = s6 ? "techs must be registered using Tech.registerTech()" : "must be a Component subclass", new Error(`Illegal component, "${e8}"; ${t4}.`);
    }
    e8 = Sa(e8), _Ca.components_ || (_Ca.components_ = {});
    const r4 = _Ca.getComponent("Player");
    if ("Player" === e8 && r4 && r4.players) {
      const e9 = r4.players, t4 = Object.keys(e9);
      if (e9 && t4.length > 0) {
        for (let i7 = 0; i7 < t4.length; i7++) if (null !== e9[t4[i7]]) throw new Error("Can not register Player component after player has been created.");
      }
    }
    return _Ca.components_[e8] = t3, _Ca.components_[Ta(e8)] = t3, t3;
  }
  static getComponent(e8) {
    if (e8 && _Ca.components_) return _Ca.components_[e8];
  }
};
function ka(e8, t3, i6) {
  if ("number" != typeof t3 || t3 < 0 || t3 > i6) throw new Error(`Failed to execute '${e8}' on 'TimeRanges': The index provided (${t3}) is non-numeric or out of bounds (0-${i6}).`);
}
function Ia(e8, t3, i6, s6) {
  return ka(e8, s6, i6.length - 1), i6[s6][t3];
}
function xa(e8) {
  let t3;
  return t3 = void 0 === e8 || 0 === e8.length ? { length: 0, start() {
    throw new Error("This TimeRanges object is empty");
  }, end() {
    throw new Error("This TimeRanges object is empty");
  } } : { length: e8.length, start: Ia.bind(null, "start", 0, e8), end: Ia.bind(null, "end", 1, e8) }, b4.Symbol && b4.Symbol.iterator && (t3[b4.Symbol.iterator] = () => (e8 || []).values()), t3;
}
function Aa(e8, t3) {
  return Array.isArray(e8) ? xa(e8) : void 0 === e8 || void 0 === t3 ? xa() : xa([[e8, t3]]);
}
Ca.registerComponent("Component", Ca);
var Da = function(e8, t3) {
  e8 = e8 < 0 ? 0 : e8;
  let i6 = Math.floor(e8 % 60), s6 = Math.floor(e8 / 60 % 60), n5 = Math.floor(e8 / 3600);
  const r4 = Math.floor(t3 / 60 % 60), a6 = Math.floor(t3 / 3600);
  return (isNaN(e8) || e8 === 1 / 0) && (n5 = s6 = i6 = "-"), n5 = n5 > 0 || a6 > 0 ? n5 + ":" : "", s6 = ((n5 || r4 >= 10) && s6 < 10 ? "0" + s6 : s6) + ":", i6 = i6 < 10 ? "0" + i6 : i6, n5 + s6 + i6;
};
var Pa = Da;
function La(e8) {
  Pa = e8;
}
function Oa() {
  Pa = Da;
}
function Na(e8, t3 = e8) {
  return Pa(e8, t3);
}
var Ra = Object.freeze({ __proto__: null, createTimeRanges: Aa, createTimeRange: Aa, setFormatTime: La, resetFormatTime: Oa, formatTime: Na });
function Ma(e8, t3) {
  let i6, s6, n5 = 0;
  if (!t3) return 0;
  e8 && e8.length || (e8 = Aa(0, 0));
  for (let r4 = 0; r4 < e8.length; r4++) i6 = e8.start(r4), s6 = e8.end(r4), s6 > t3 && (s6 = t3), n5 += s6 - i6;
  return n5 / t3;
}
function Ua(e8) {
  if (e8 instanceof Ua) return e8;
  "number" == typeof e8 ? this.code = e8 : "string" == typeof e8 ? this.message = e8 : En(e8) && ("number" == typeof e8.code && (this.code = e8.code), Object.assign(this, e8)), this.message || (this.message = Ua.defaultMessages[this.code] || "");
}
function Ba(e8) {
  return null != e8 && "function" == typeof e8.then;
}
function Fa(e8) {
  Ba(e8) && e8.then(null, (e9) => {
  });
}
Ua.prototype.code = 0, Ua.prototype.message = "", Ua.prototype.status = null, Ua.prototype.metadata = null, Ua.errorTypes = ["MEDIA_ERR_CUSTOM", "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED", "MEDIA_ERR_ENCRYPTED"], Ua.defaultMessages = { 1: "You aborted the media playback", 2: "A network error caused the media download to fail part-way.", 3: "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.", 4: "The media could not be loaded, either because the server or network failed or because the format is not supported.", 5: "The media is encrypted and we do not have the keys to decrypt it." }, Ua.MEDIA_ERR_CUSTOM = 0, Ua.prototype.MEDIA_ERR_CUSTOM = 0, Ua.MEDIA_ERR_ABORTED = 1, Ua.prototype.MEDIA_ERR_ABORTED = 1, Ua.MEDIA_ERR_NETWORK = 2, Ua.prototype.MEDIA_ERR_NETWORK = 2, Ua.MEDIA_ERR_DECODE = 3, Ua.prototype.MEDIA_ERR_DECODE = 3, Ua.MEDIA_ERR_SRC_NOT_SUPPORTED = 4, Ua.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED = 4, Ua.MEDIA_ERR_ENCRYPTED = 5, Ua.prototype.MEDIA_ERR_ENCRYPTED = 5;
var qa = function(e8) {
  return ["kind", "label", "language", "id", "inBandMetadataTrackDispatchType", "mode", "src"].reduce((t3, i6, s6) => (e8[i6] && (t3[i6] = e8[i6]), t3), { cues: e8.cues && Array.prototype.map.call(e8.cues, function(e9) {
    return { startTime: e9.startTime, endTime: e9.endTime, text: e9.text, id: e9.id };
  }) });
};
var ja = { textTracksToJson: function(e8) {
  const t3 = e8.$$("track"), i6 = Array.prototype.map.call(t3, (e9) => e9.track);
  return Array.prototype.map.call(t3, function(e9) {
    const t4 = qa(e9.track);
    return e9.src && (t4.src = e9.src), t4;
  }).concat(Array.prototype.filter.call(e8.textTracks(), function(e9) {
    return -1 === i6.indexOf(e9);
  }).map(qa));
}, jsonToTextTracks: function(e8, t3) {
  return e8.forEach(function(e9) {
    const i6 = t3.addRemoteTextTrack(e9).track;
    !e9.src && e9.cues && e9.cues.forEach((e10) => i6.addCue(e10));
  }), t3.textTracks();
}, trackToJson_: qa };
var $a = "vjs-modal-dialog";
var Ha = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.handleKeyDown_ = (e9) => this.handleKeyDown(e9), this.close_ = (e9) => this.close(e9), this.opened_ = this.hasBeenOpened_ = this.hasBeenFilled_ = false, this.closeable(!this.options_.uncloseable), this.content(this.options_.content), this.contentEl_ = rr("div", { className: `${$a}-content` }, { role: "document" }), this.descEl_ = rr("p", { className: `${$a}-description vjs-control-text`, id: this.el().getAttribute("aria-describedby") }), ar(this.descEl_, this.description()), this.el_.appendChild(this.descEl_), this.el_.appendChild(this.contentEl_);
  }
  createEl() {
    return super.createEl("div", { className: this.buildCSSClass(), tabIndex: -1 }, { "aria-describedby": `${this.id()}_description`, "aria-hidden": "true", "aria-label": this.label(), role: "dialog", "aria-live": "polite" });
  }
  dispose() {
    this.contentEl_ = null, this.descEl_ = null, this.previouslyActiveEl_ = null, super.dispose();
  }
  buildCSSClass() {
    return `${$a} vjs-hidden ${super.buildCSSClass()}`;
  }
  label() {
    return this.localize(this.options_.label || "Modal Window");
  }
  description() {
    let e8 = this.options_.description || this.localize("This is a modal window.");
    return this.closeable() && (e8 += " " + this.localize("This modal can be closed by pressing the Escape key or activating the close button.")), e8;
  }
  open() {
    if (this.opened_) return void (this.options_.fillAlways && this.fill());
    const e8 = this.player();
    this.trigger("beforemodalopen"), this.opened_ = true, (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) && this.fill(), this.wasPlaying_ = !e8.paused(), this.options_.pauseOnOpen && this.wasPlaying_ && e8.pause(), this.on("keydown", this.handleKeyDown_), this.hadControls_ = e8.controls(), e8.controls(false), this.show(), this.conditionalFocus_(), this.el().setAttribute("aria-hidden", "false"), this.trigger("modalopen"), this.hasBeenOpened_ = true;
  }
  opened(e8) {
    return "boolean" == typeof e8 && this[e8 ? "open" : "close"](), this.opened_;
  }
  close() {
    if (!this.opened_) return;
    const e8 = this.player();
    this.trigger("beforemodalclose"), this.opened_ = false, this.wasPlaying_ && this.options_.pauseOnOpen && e8.play(), this.off("keydown", this.handleKeyDown_), this.hadControls_ && e8.controls(true), this.hide(), this.el().setAttribute("aria-hidden", "true"), this.trigger({ type: "modalclose", bubbles: true }), this.conditionalBlur_(), this.options_.temporary && this.dispose();
  }
  closeable(e8) {
    if ("boolean" == typeof e8) {
      const t3 = this.closeable_ = !!e8;
      let i6 = this.getChild("closeButton");
      if (t3 && !i6) {
        const e9 = this.contentEl_;
        this.contentEl_ = this.el_, i6 = this.addChild("closeButton", { controlText: "Close Modal Dialog" }), this.contentEl_ = e9, this.on(i6, "close", this.close_);
      }
      !t3 && i6 && (this.off(i6, "close", this.close_), this.removeChild(i6), i6.dispose());
    }
    return this.closeable_;
  }
  fill() {
    this.fillWith(this.content());
  }
  fillWith(e8) {
    const t3 = this.contentEl(), i6 = t3.parentNode, s6 = t3.nextSibling;
    this.trigger("beforemodalfill"), this.hasBeenFilled_ = true, i6.removeChild(t3), this.empty(), kr(t3, e8), this.trigger("modalfill"), s6 ? i6.insertBefore(t3, s6) : i6.appendChild(t3);
    const n5 = this.getChild("closeButton");
    n5 && i6.appendChild(n5.el_), this.trigger("aftermodalfill");
  }
  empty() {
    this.trigger("beforemodalempty"), Er(this.contentEl()), this.trigger("modalempty");
  }
  content(e8) {
    return void 0 !== e8 && (this.content_ = e8), this.content_;
  }
  conditionalFocus_() {
    const e8 = ae.activeElement, t3 = this.player_.el_;
    this.previouslyActiveEl_ = null, (t3.contains(e8) || t3 === e8) && (this.previouslyActiveEl_ = e8, this.focus());
  }
  conditionalBlur_() {
    this.previouslyActiveEl_ && (this.previouslyActiveEl_.focus(), this.previouslyActiveEl_ = null);
  }
  handleKeyDown(e8) {
    if (this.trigger({ type: "modalKeydown", originalEvent: e8, target: this, bubbles: true }), e8.stopPropagation(), "Escape" === e8.key && this.closeable()) return e8.preventDefault(), void this.close();
    if ("Tab" !== e8.key) return;
    const t3 = this.focusableEls_(), i6 = this.el_.querySelector(":focus");
    let s6;
    for (let n5 = 0; n5 < t3.length; n5++) if (i6 === t3[n5]) {
      s6 = n5;
      break;
    }
    ae.activeElement === this.el_ && (s6 = 0), e8.shiftKey && 0 === s6 ? (t3[t3.length - 1].focus(), e8.preventDefault()) : e8.shiftKey || s6 !== t3.length - 1 || (t3[0].focus(), e8.preventDefault());
  }
  focusableEls_() {
    const e8 = this.el_.querySelectorAll("*");
    return Array.prototype.filter.call(e8, (e9) => (e9 instanceof b4.HTMLAnchorElement || e9 instanceof b4.HTMLAreaElement) && e9.hasAttribute("href") || (e9 instanceof b4.HTMLInputElement || e9 instanceof b4.HTMLSelectElement || e9 instanceof b4.HTMLTextAreaElement || e9 instanceof b4.HTMLButtonElement) && !e9.hasAttribute("disabled") || e9 instanceof b4.HTMLIFrameElement || e9 instanceof b4.HTMLObjectElement || e9 instanceof b4.HTMLEmbedElement || e9.hasAttribute("tabindex") && -1 !== e9.getAttribute("tabindex") || e9.hasAttribute("contenteditable"));
  }
};
Ha.prototype.options_ = { pauseOnOpen: true, temporary: true }, Ca.registerComponent("ModalDialog", Ha);
var Va = class extends oa {
  constructor(e8 = []) {
    super(), this.tracks_ = [], Object.defineProperty(this, "length", { get() {
      return this.tracks_.length;
    } });
    for (let t3 = 0; t3 < e8.length; t3++) this.addTrack(e8[t3]);
  }
  addTrack(e8) {
    const t3 = this.tracks_.length;
    "" + t3 in this || Object.defineProperty(this, t3, { get() {
      return this.tracks_[t3];
    } }), -1 === this.tracks_.indexOf(e8) && (this.tracks_.push(e8), this.trigger({ track: e8, type: "addtrack", target: this })), e8.labelchange_ = () => {
      this.trigger({ track: e8, type: "labelchange", target: this });
    }, ha(e8) && e8.addEventListener("labelchange", e8.labelchange_);
  }
  removeTrack(e8) {
    let t3;
    for (let i6 = 0, s6 = this.length; i6 < s6; i6++) if (this[i6] === e8) {
      t3 = this[i6], t3.off && t3.off(), this.tracks_.splice(i6, 1);
      break;
    }
    t3 && this.trigger({ track: t3, type: "removetrack", target: this });
  }
  getTrackById(e8) {
    let t3 = null;
    for (let i6 = 0, s6 = this.length; i6 < s6; i6++) {
      const s7 = this[i6];
      if (s7.id === e8) {
        t3 = s7;
        break;
      }
    }
    return t3;
  }
};
Va.prototype.allowedEvents_ = { change: "change", addtrack: "addtrack", removetrack: "removetrack", labelchange: "labelchange" };
for (const Cg in Va.prototype.allowedEvents_) Va.prototype["on" + Cg] = null;
var za = function(e8, t3) {
  for (let i6 = 0; i6 < e8.length; i6++) Object.keys(e8[i6]).length && t3.id !== e8[i6].id && (e8[i6].enabled = false);
};
var Wa = class extends Va {
  constructor(e8 = []) {
    for (let t3 = e8.length - 1; t3 >= 0; t3--) if (e8[t3].enabled) {
      za(e8, e8[t3]);
      break;
    }
    super(e8), this.changing_ = false;
  }
  addTrack(e8) {
    e8.enabled && za(this, e8), super.addTrack(e8), e8.addEventListener && (e8.enabledChange_ = () => {
      this.changing_ || (this.changing_ = true, za(this, e8), this.changing_ = false, this.trigger("change"));
    }, e8.addEventListener("enabledchange", e8.enabledChange_));
  }
  removeTrack(e8) {
    super.removeTrack(e8), e8.removeEventListener && e8.enabledChange_ && (e8.removeEventListener("enabledchange", e8.enabledChange_), e8.enabledChange_ = null);
  }
};
var Ga = function(e8, t3) {
  for (let i6 = 0; i6 < e8.length; i6++) Object.keys(e8[i6]).length && t3.id !== e8[i6].id && (e8[i6].selected = false);
};
var Xa = class extends Va {
  constructor(e8 = []) {
    for (let t3 = e8.length - 1; t3 >= 0; t3--) if (e8[t3].selected) {
      Ga(e8, e8[t3]);
      break;
    }
    super(e8), this.changing_ = false, Object.defineProperty(this, "selectedIndex", { get() {
      for (let e9 = 0; e9 < this.length; e9++) if (this[e9].selected) return e9;
      return -1;
    }, set() {
    } });
  }
  addTrack(e8) {
    e8.selected && Ga(this, e8), super.addTrack(e8), e8.addEventListener && (e8.selectedChange_ = () => {
      this.changing_ || (this.changing_ = true, Ga(this, e8), this.changing_ = false, this.trigger("change"));
    }, e8.addEventListener("selectedchange", e8.selectedChange_));
  }
  removeTrack(e8) {
    super.removeTrack(e8), e8.removeEventListener && e8.selectedChange_ && (e8.removeEventListener("selectedchange", e8.selectedChange_), e8.selectedChange_ = null);
  }
};
var Ka = class extends Va {
  addTrack(e8) {
    super.addTrack(e8), this.queueChange_ || (this.queueChange_ = () => this.queueTrigger("change")), this.triggerSelectedlanguagechange || (this.triggerSelectedlanguagechange_ = () => this.trigger("selectedlanguagechange")), e8.addEventListener("modechange", this.queueChange_);
    -1 === ["metadata", "chapters"].indexOf(e8.kind) && e8.addEventListener("modechange", this.triggerSelectedlanguagechange_);
  }
  removeTrack(e8) {
    super.removeTrack(e8), e8.removeEventListener && (this.queueChange_ && e8.removeEventListener("modechange", this.queueChange_), this.selectedlanguagechange_ && e8.removeEventListener("modechange", this.triggerSelectedlanguagechange_));
  }
};
var Ya = class {
  constructor(e8 = []) {
    this.trackElements_ = [], Object.defineProperty(this, "length", { get() {
      return this.trackElements_.length;
    } });
    for (let t3 = 0, i6 = e8.length; t3 < i6; t3++) this.addTrackElement_(e8[t3]);
  }
  addTrackElement_(e8) {
    const t3 = this.trackElements_.length;
    "" + t3 in this || Object.defineProperty(this, t3, { get() {
      return this.trackElements_[t3];
    } }), -1 === this.trackElements_.indexOf(e8) && this.trackElements_.push(e8);
  }
  getTrackElementByTrack_(e8) {
    let t3;
    for (let i6 = 0, s6 = this.trackElements_.length; i6 < s6; i6++) if (e8 === this.trackElements_[i6].track) {
      t3 = this.trackElements_[i6];
      break;
    }
    return t3;
  }
  removeTrackElement_(e8) {
    for (let t3 = 0, i6 = this.trackElements_.length; t3 < i6; t3++) if (e8 === this.trackElements_[t3]) {
      this.trackElements_[t3].track && "function" == typeof this.trackElements_[t3].track.off && this.trackElements_[t3].track.off(), "function" == typeof this.trackElements_[t3].off && this.trackElements_[t3].off(), this.trackElements_.splice(t3, 1);
      break;
    }
  }
};
var Qa = class _Qa {
  constructor(e8) {
    _Qa.prototype.setCues_.call(this, e8), Object.defineProperty(this, "length", { get() {
      return this.length_;
    } });
  }
  setCues_(e8) {
    const t3 = this.length || 0;
    let i6 = 0;
    const s6 = e8.length;
    this.cues_ = e8, this.length_ = e8.length;
    const n5 = function(e9) {
      "" + e9 in this || Object.defineProperty(this, "" + e9, { get() {
        return this.cues_[e9];
      } });
    };
    if (t3 < s6) for (i6 = t3; i6 < s6; i6++) n5.call(this, i6);
  }
  getCueById(e8) {
    let t3 = null;
    for (let i6 = 0, s6 = this.length; i6 < s6; i6++) {
      const s7 = this[i6];
      if (s7.id === e8) {
        t3 = s7;
        break;
      }
    }
    return t3;
  }
};
var Ja = { alternative: "alternative", captions: "captions", main: "main", sign: "sign", subtitles: "subtitles", commentary: "commentary" };
var Za = { alternative: "alternative", descriptions: "descriptions", main: "main", "main-desc": "main-desc", translation: "translation", commentary: "commentary" };
var eo = { subtitles: "subtitles", captions: "captions", descriptions: "descriptions", chapters: "chapters", metadata: "metadata" };
var to = { disabled: "disabled", hidden: "hidden", showing: "showing" };
var io = class extends oa {
  constructor(e8 = {}) {
    super();
    const t3 = { id: e8.id || "vjs_track_" + Hr(), kind: e8.kind || "", language: e8.language || "" };
    let i6 = e8.label || "";
    for (const s6 in t3) Object.defineProperty(this, s6, { get: () => t3[s6], set() {
    } });
    Object.defineProperty(this, "label", { get: () => i6, set(e9) {
      e9 !== i6 && (i6 = e9, this.trigger("labelchange"));
    } });
  }
};
var so = function(e8) {
  return new URL(e8, ae.baseURI);
};
var no = function(e8) {
  return new URL(e8, ae.baseURI).href;
};
var ro = function(e8) {
  if ("string" == typeof e8) {
    const t3 = /^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e8);
    if (t3) return t3.pop().toLowerCase();
  }
  return "";
};
var ao = function(e8, t3 = b4.location) {
  return so(e8).origin !== t3.origin;
};
var oo = Object.freeze({ __proto__: null, parseUrl: so, getAbsoluteURL: no, getFileExtension: ro, isCrossOrigin: ao });
var lo = function(e8, t3) {
  const i6 = new b4.WebVTT.Parser(b4, b4.vttjs, b4.WebVTT.StringDecoder()), s6 = [];
  i6.oncue = function(e9) {
    t3.addCue(e9);
  }, i6.onparsingerror = function(e9) {
    s6.push(e9);
  }, i6.onflush = function() {
    t3.trigger({ type: "loadeddata", target: t3 });
  }, i6.parse(e8), s6.length > 0 && (b4.console && b4.console.groupCollapsed && b4.console.groupCollapsed(`Text Track parsing errors for ${t3.src}`), s6.forEach((e9) => yn.error(e9)), b4.console && b4.console.groupEnd && b4.console.groupEnd()), i6.flush();
};
var ho = function(e8, t3) {
  const i6 = { uri: e8 }, s6 = ao(e8);
  s6 && (i6.cors = s6);
  const n5 = "use-credentials" === t3.tech_.crossOrigin();
  n5 && (i6.withCredentials = n5), Ce(i6, ia(this, function(e9, i7, s7) {
    if (e9) return yn.error(e9, i7);
    t3.loaded_ = true, "function" != typeof b4.WebVTT ? t3.tech_ && t3.tech_.any(["vttjsloaded", "vttjserror"], (e10) => {
      if ("vttjserror" !== e10.type) return lo(s7, t3);
      yn.error(`vttjs failed to load, stopping trying to process ${t3.src}`);
    }) : lo(s7, t3);
  }));
};
var uo = class extends io {
  constructor(e8 = {}) {
    if (!e8.tech) throw new Error("A tech was not provided.");
    const t3 = Cn(e8, { kind: eo[e8.kind] || "subtitles", language: e8.language || e8.srclang || "" });
    let i6 = to[t3.mode] || "disabled";
    const s6 = t3.default;
    "metadata" !== t3.kind && "chapters" !== t3.kind || (i6 = "hidden"), super(t3), this.tech_ = t3.tech, this.cues_ = [], this.activeCues_ = [], this.preload_ = false !== this.tech_.preloadTextTracks;
    const n5 = new Qa(this.cues_), r4 = new Qa(this.activeCues_);
    let a6 = false;
    this.timeupdateHandler = ia(this, function(e9 = {}) {
      this.tech_.isDisposed() || (this.tech_.isReady_ ? (this.activeCues = this.activeCues, a6 && (this.trigger("cuechange"), a6 = false), "timeupdate" !== e9.type && (this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler))) : "timeupdate" !== e9.type && (this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));
    });
    const o4 = () => {
      this.stopTracking();
    };
    this.tech_.one("dispose", o4), "disabled" !== i6 && this.startTracking(), Object.defineProperties(this, { default: { get: () => s6, set() {
    } }, mode: { get: () => i6, set(e9) {
      to[e9] && i6 !== e9 && (i6 = e9, this.preload_ || "disabled" === i6 || 0 !== this.cues.length || ho(this.src, this), this.stopTracking(), "disabled" !== i6 && this.startTracking(), this.trigger("modechange"));
    } }, cues: { get() {
      return this.loaded_ ? n5 : null;
    }, set() {
    } }, activeCues: { get() {
      if (!this.loaded_) return null;
      if (0 === this.cues.length) return r4;
      const e9 = this.tech_.currentTime(), t4 = [];
      for (let i7 = 0, s7 = this.cues.length; i7 < s7; i7++) {
        const s8 = this.cues[i7];
        s8.startTime <= e9 && s8.endTime >= e9 && t4.push(s8);
      }
      if (a6 = false, t4.length !== this.activeCues_.length) a6 = true;
      else for (let i7 = 0; i7 < t4.length; i7++) -1 === this.activeCues_.indexOf(t4[i7]) && (a6 = true);
      return this.activeCues_ = t4, r4.setCues_(this.activeCues_), r4;
    }, set() {
    } } }), t3.src ? (this.src = t3.src, this.preload_ || (this.loaded_ = true), (this.preload_ || "subtitles" !== t3.kind && "captions" !== t3.kind) && ho(this.src, this)) : this.loaded_ = true;
  }
  startTracking() {
    this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler), this.tech_.on("timeupdate", this.timeupdateHandler);
  }
  stopTracking() {
    this.rvf_ && (this.tech_.cancelVideoFrameCallback(this.rvf_), this.rvf_ = void 0), this.tech_.off("timeupdate", this.timeupdateHandler);
  }
  addCue(e8) {
    let t3 = e8;
    if (!("getCueAsHTML" in t3)) {
      t3 = new b4.vttjs.VTTCue(e8.startTime, e8.endTime, e8.text);
      for (const i7 in e8) i7 in t3 || (t3[i7] = e8[i7]);
      t3.id = e8.id, t3.originalCue_ = e8;
    }
    const i6 = this.tech_.textTracks();
    for (let s6 = 0; s6 < i6.length; s6++) i6[s6] !== this && i6[s6].removeCue(t3);
    this.cues_.push(t3), this.cues.setCues_(this.cues_);
  }
  removeCue(e8) {
    let t3 = this.cues_.length;
    for (; t3--; ) {
      const i6 = this.cues_[t3];
      if (i6 === e8 || i6.originalCue_ && i6.originalCue_ === e8) {
        this.cues_.splice(t3, 1), this.cues.setCues_(this.cues_);
        break;
      }
    }
  }
};
uo.prototype.allowedEvents_ = { cuechange: "cuechange" };
var co = class extends io {
  constructor(e8 = {}) {
    const t3 = Cn(e8, { kind: Za[e8.kind] || "" });
    super(t3);
    let i6 = false;
    Object.defineProperty(this, "enabled", { get: () => i6, set(e9) {
      "boolean" == typeof e9 && e9 !== i6 && (i6 = e9, this.trigger("enabledchange"));
    } }), t3.enabled && (this.enabled = t3.enabled), this.loaded_ = true;
  }
};
var po = class extends io {
  constructor(e8 = {}) {
    const t3 = Cn(e8, { kind: Ja[e8.kind] || "" });
    super(t3);
    let i6 = false;
    Object.defineProperty(this, "selected", { get: () => i6, set(e9) {
      "boolean" == typeof e9 && e9 !== i6 && (i6 = e9, this.trigger("selectedchange"));
    } }), t3.selected && (this.selected = t3.selected);
  }
};
var mo = class _mo extends oa {
  constructor(e8 = {}) {
    let t3;
    super();
    const i6 = new uo(e8);
    this.kind = i6.kind, this.src = i6.src, this.srclang = i6.language, this.label = i6.label, this.default = i6.default, Object.defineProperties(this, { readyState: { get: () => t3 }, track: { get: () => i6 } }), t3 = _mo.NONE, i6.addEventListener("loadeddata", () => {
      t3 = _mo.LOADED, this.trigger({ type: "load", target: this });
    });
  }
};
mo.prototype.allowedEvents_ = { load: "load" }, mo.NONE = 0, mo.LOADING = 1, mo.LOADED = 2, mo.ERROR = 3;
var go = { audio: { ListClass: Wa, TrackClass: co, capitalName: "Audio" }, video: { ListClass: Xa, TrackClass: po, capitalName: "Video" }, text: { ListClass: Ka, TrackClass: uo, capitalName: "Text" } };
Object.keys(go).forEach(function(e8) {
  go[e8].getterName = `${e8}Tracks`, go[e8].privateName = `${e8}Tracks_`;
});
var fo = { remoteText: { ListClass: Ka, TrackClass: uo, capitalName: "RemoteText", getterName: "remoteTextTracks", privateName: "remoteTextTracks_" }, remoteTextEl: { ListClass: Ya, TrackClass: mo, capitalName: "RemoteTextTrackEls", getterName: "remoteTextTrackEls", privateName: "remoteTextTrackEls_" } };
var yo = Object.assign({}, go, fo);
function _o(e8, t3, i6, s6, n5 = {}) {
  const r4 = e8.textTracks();
  n5.kind = t3, i6 && (n5.label = i6), s6 && (n5.language = s6), n5.tech = e8;
  const a6 = new yo.text.TrackClass(n5);
  return r4.addTrack(a6), a6;
}
fo.names = Object.keys(fo), go.names = Object.keys(go), yo.names = [].concat(fo.names).concat(go.names);
var vo = class _vo extends Ca {
  constructor(e8 = {}, t3 = function() {
  }) {
    e8.reportTouchActivity = false, super(null, e8, t3), this.onDurationChange_ = (e9) => this.onDurationChange(e9), this.trackProgress_ = (e9) => this.trackProgress(e9), this.trackCurrentTime_ = (e9) => this.trackCurrentTime(e9), this.stopTrackingCurrentTime_ = (e9) => this.stopTrackingCurrentTime(e9), this.disposeSourceHandler_ = (e9) => this.disposeSourceHandler(e9), this.queuedHanders_ = /* @__PURE__ */ new Set(), this.hasStarted_ = false, this.on("playing", function() {
      this.hasStarted_ = true;
    }), this.on("loadstart", function() {
      this.hasStarted_ = false;
    }), yo.names.forEach((t4) => {
      const i6 = yo[t4];
      e8 && e8[i6.getterName] && (this[i6.privateName] = e8[i6.getterName]);
    }), this.featuresProgressEvents || this.manualProgressOn(), this.featuresTimeupdateEvents || this.manualTimeUpdatesOn(), ["Text", "Audio", "Video"].forEach((t4) => {
      false === e8[`native${t4}Tracks`] && (this[`featuresNative${t4}Tracks`] = false);
    }), false === e8.nativeCaptions || false === e8.nativeTextTracks ? this.featuresNativeTextTracks = false : true !== e8.nativeCaptions && true !== e8.nativeTextTracks || (this.featuresNativeTextTracks = true), this.featuresNativeTextTracks || this.emulateTextTracks(), this.preloadTextTracks = false !== e8.preloadTextTracks, this.autoRemoteTextTracks_ = new yo.text.ListClass(), this.initTrackListeners(), e8.nativeControlsForTouch || this.emitTapEvents(), this.constructor && (this.name_ = this.constructor.name || "Unknown Tech");
  }
  triggerSourceset(e8) {
    this.isReady_ || this.one("ready", () => this.setTimeout(() => this.triggerSourceset(e8), 1)), this.trigger({ src: e8, type: "sourceset" });
  }
  manualProgressOn() {
    this.on("durationchange", this.onDurationChange_), this.manualProgress = true, this.one("ready", this.trackProgress_);
  }
  manualProgressOff() {
    this.manualProgress = false, this.stopTrackingProgress(), this.off("durationchange", this.onDurationChange_);
  }
  trackProgress(e8) {
    this.stopTrackingProgress(), this.progressInterval = this.setInterval(ia(this, function() {
      const e9 = this.bufferedPercent();
      this.bufferedPercent_ !== e9 && this.trigger("progress"), this.bufferedPercent_ = e9, 1 === e9 && this.stopTrackingProgress();
    }), 500);
  }
  onDurationChange(e8) {
    this.duration_ = this.duration();
  }
  buffered() {
    return Aa(0, 0);
  }
  bufferedPercent() {
    return Ma(this.buffered(), this.duration_);
  }
  stopTrackingProgress() {
    this.clearInterval(this.progressInterval);
  }
  manualTimeUpdatesOn() {
    this.manualTimeUpdates = true, this.on("play", this.trackCurrentTime_), this.on("pause", this.stopTrackingCurrentTime_);
  }
  manualTimeUpdatesOff() {
    this.manualTimeUpdates = false, this.stopTrackingCurrentTime(), this.off("play", this.trackCurrentTime_), this.off("pause", this.stopTrackingCurrentTime_);
  }
  trackCurrentTime() {
    this.currentTimeInterval && this.stopTrackingCurrentTime(), this.currentTimeInterval = this.setInterval(function() {
      this.trigger({ type: "timeupdate", target: this, manuallyTriggered: true });
    }, 250);
  }
  stopTrackingCurrentTime() {
    this.clearInterval(this.currentTimeInterval), this.trigger({ type: "timeupdate", target: this, manuallyTriggered: true });
  }
  dispose() {
    this.clearTracks(go.names), this.manualProgress && this.manualProgressOff(), this.manualTimeUpdates && this.manualTimeUpdatesOff(), super.dispose();
  }
  clearTracks(e8) {
    (e8 = [].concat(e8)).forEach((e9) => {
      const t3 = this[`${e9}Tracks`]() || [];
      let i6 = t3.length;
      for (; i6--; ) {
        const s6 = t3[i6];
        "text" === e9 && this.removeRemoteTextTrack(s6), t3.removeTrack(s6);
      }
    });
  }
  cleanupAutoTextTracks() {
    const e8 = this.autoRemoteTextTracks_ || [];
    let t3 = e8.length;
    for (; t3--; ) {
      const i6 = e8[t3];
      this.removeRemoteTextTrack(i6);
    }
  }
  reset() {
  }
  crossOrigin() {
  }
  setCrossOrigin() {
  }
  error(e8) {
    return void 0 !== e8 && (this.error_ = new Ua(e8), this.trigger("error")), this.error_;
  }
  played() {
    return this.hasStarted_ ? Aa(0, 0) : Aa();
  }
  play() {
  }
  setScrubbing(e8) {
  }
  scrubbing() {
  }
  setCurrentTime(e8) {
    this.manualTimeUpdates && this.trigger({ type: "timeupdate", target: this, manuallyTriggered: true });
  }
  initTrackListeners() {
    go.names.forEach((e8) => {
      const t3 = go[e8], i6 = () => {
        this.trigger(`${e8}trackchange`);
      }, s6 = this[t3.getterName]();
      s6.addEventListener("removetrack", i6), s6.addEventListener("addtrack", i6), this.on("dispose", () => {
        s6.removeEventListener("removetrack", i6), s6.removeEventListener("addtrack", i6);
      });
    });
  }
  addWebVttScript_() {
    if (!b4.WebVTT) if (ae.body.contains(this.el())) {
      if (!this.options_["vtt.js"] && wn(Be) && Object.keys(Be).length > 0) return void this.trigger("vttjsloaded");
      const e8 = ae.createElement("script");
      e8.src = this.options_["vtt.js"] || "https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js", e8.onload = () => {
        this.trigger("vttjsloaded");
      }, e8.onerror = () => {
        this.trigger("vttjserror");
      }, this.on("dispose", () => {
        e8.onload = null, e8.onerror = null;
      }), b4.WebVTT = true, this.el().parentNode.appendChild(e8);
    } else this.ready(this.addWebVttScript_);
  }
  emulateTextTracks() {
    const e8 = this.textTracks(), t3 = this.remoteTextTracks(), i6 = (t4) => e8.addTrack(t4.track), s6 = (t4) => e8.removeTrack(t4.track);
    t3.on("addtrack", i6), t3.on("removetrack", s6), this.addWebVttScript_();
    const n5 = () => this.trigger("texttrackchange"), r4 = () => {
      n5();
      for (let t4 = 0; t4 < e8.length; t4++) {
        const i7 = e8[t4];
        i7.removeEventListener("cuechange", n5), "showing" === i7.mode && i7.addEventListener("cuechange", n5);
      }
    };
    r4(), e8.addEventListener("change", r4), e8.addEventListener("addtrack", r4), e8.addEventListener("removetrack", r4), this.on("dispose", function() {
      t3.off("addtrack", i6), t3.off("removetrack", s6), e8.removeEventListener("change", r4), e8.removeEventListener("addtrack", r4), e8.removeEventListener("removetrack", r4);
      for (let t4 = 0; t4 < e8.length; t4++) {
        e8[t4].removeEventListener("cuechange", n5);
      }
    });
  }
  addTextTrack(e8, t3, i6) {
    if (!e8) throw new Error("TextTrack kind is required but was not provided");
    return _o(this, e8, t3, i6);
  }
  createRemoteTextTrack(e8) {
    const t3 = Cn(e8, { tech: this });
    return new fo.remoteTextEl.TrackClass(t3);
  }
  addRemoteTextTrack(e8 = {}, t3) {
    const i6 = this.createRemoteTextTrack(e8);
    return "boolean" != typeof t3 && (t3 = false), this.remoteTextTrackEls().addTrackElement_(i6), this.remoteTextTracks().addTrack(i6.track), false === t3 && this.ready(() => this.autoRemoteTextTracks_.addTrack(i6.track)), i6;
  }
  removeRemoteTextTrack(e8) {
    const t3 = this.remoteTextTrackEls().getTrackElementByTrack_(e8);
    this.remoteTextTrackEls().removeTrackElement_(t3), this.remoteTextTracks().removeTrack(e8), this.autoRemoteTextTracks_.removeTrack(e8);
  }
  getVideoPlaybackQuality() {
    return {};
  }
  requestPictureInPicture() {
    return Promise.reject();
  }
  disablePictureInPicture() {
    return true;
  }
  setDisablePictureInPicture() {
  }
  requestVideoFrameCallback(e8) {
    const t3 = Hr();
    return !this.isReady_ || this.paused() ? (this.queuedHanders_.add(t3), this.one("playing", () => {
      this.queuedHanders_.has(t3) && (this.queuedHanders_.delete(t3), e8());
    })) : this.requestNamedAnimationFrame(t3, e8), t3;
  }
  cancelVideoFrameCallback(e8) {
    this.queuedHanders_.has(e8) ? this.queuedHanders_.delete(e8) : this.cancelNamedAnimationFrame(e8);
  }
  setPoster() {
  }
  playsinline() {
  }
  setPlaysinline() {
  }
  overrideNativeAudioTracks(e8) {
  }
  overrideNativeVideoTracks(e8) {
  }
  canPlayType(e8) {
    return "";
  }
  static canPlayType(e8) {
    return "";
  }
  static canPlaySource(e8, t3) {
    return _vo.canPlayType(e8.type);
  }
  static isTech(e8) {
    return e8.prototype instanceof _vo || e8 instanceof _vo || e8 === _vo;
  }
  static registerTech(e8, t3) {
    if (_vo.techs_ || (_vo.techs_ = {}), !_vo.isTech(t3)) throw new Error(`Tech ${e8} must be a Tech`);
    if (!_vo.canPlayType) throw new Error("Techs must have a static canPlayType method on them");
    if (!_vo.canPlaySource) throw new Error("Techs must have a static canPlaySource method on them");
    return e8 = Sa(e8), _vo.techs_[e8] = t3, _vo.techs_[Ta(e8)] = t3, "Tech" !== e8 && _vo.defaultTechOrder_.push(e8), t3;
  }
  static getTech(e8) {
    if (e8) return _vo.techs_ && _vo.techs_[e8] ? _vo.techs_[e8] : (e8 = Sa(e8), b4 && b4.videojs && b4.videojs[e8] ? (yn.warn(`The ${e8} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`), b4.videojs[e8]) : void 0);
  }
};
yo.names.forEach(function(e8) {
  const t3 = yo[e8];
  vo.prototype[t3.getterName] = function() {
    return this[t3.privateName] = this[t3.privateName] || new t3.ListClass(), this[t3.privateName];
  };
}), vo.prototype.featuresVolumeControl = true, vo.prototype.featuresMuteControl = true, vo.prototype.featuresFullscreenResize = false, vo.prototype.featuresPlaybackRate = false, vo.prototype.featuresProgressEvents = false, vo.prototype.featuresSourceset = false, vo.prototype.featuresTimeupdateEvents = false, vo.prototype.featuresNativeTextTracks = false, vo.prototype.featuresVideoFrameCallback = false, vo.withSourceHandlers = function(e8) {
  e8.registerSourceHandler = function(t3, i6) {
    let s6 = e8.sourceHandlers;
    s6 || (s6 = e8.sourceHandlers = []), void 0 === i6 && (i6 = s6.length), s6.splice(i6, 0, t3);
  }, e8.canPlayType = function(t3) {
    const i6 = e8.sourceHandlers || [];
    let s6;
    for (let e9 = 0; e9 < i6.length; e9++) if (s6 = i6[e9].canPlayType(t3), s6) return s6;
    return "";
  }, e8.selectSourceHandler = function(t3, i6) {
    const s6 = e8.sourceHandlers || [];
    let n5;
    for (let e9 = 0; e9 < s6.length; e9++) if (n5 = s6[e9].canHandleSource(t3, i6), n5) return s6[e9];
    return null;
  }, e8.canPlaySource = function(t3, i6) {
    const s6 = e8.selectSourceHandler(t3, i6);
    return s6 ? s6.canHandleSource(t3, i6) : "";
  };
  ["seekable", "seeking", "duration"].forEach(function(e9) {
    const t3 = this[e9];
    "function" == typeof t3 && (this[e9] = function() {
      return this.sourceHandler_ && this.sourceHandler_[e9] ? this.sourceHandler_[e9].apply(this.sourceHandler_, arguments) : t3.apply(this, arguments);
    });
  }, e8.prototype), e8.prototype.setSource = function(t3) {
    let i6 = e8.selectSourceHandler(t3, this.options_);
    i6 || (e8.nativeSourceHandler ? i6 = e8.nativeSourceHandler : yn.error("No source handler found for the current source.")), this.disposeSourceHandler(), this.off("dispose", this.disposeSourceHandler_), i6 !== e8.nativeSourceHandler && (this.currentSource_ = t3), this.sourceHandler_ = i6.handleSource(t3, this, this.options_), this.one("dispose", this.disposeSourceHandler_);
  }, e8.prototype.disposeSourceHandler = function() {
    this.currentSource_ && (this.clearTracks(["audio", "video"]), this.currentSource_ = null), this.cleanupAutoTextTracks(), this.sourceHandler_ && (this.sourceHandler_.dispose && this.sourceHandler_.dispose(), this.sourceHandler_ = null);
  };
}, Ca.registerComponent("Tech", vo), vo.registerTech("Tech", vo), vo.defaultTechOrder_ = [];
var bo = {};
var To = {};
var So = {};
function Eo(e8, t3) {
  bo[e8] = bo[e8] || [], bo[e8].push(t3);
}
function wo(e8, t3, i6) {
  e8.setTimeout(() => Mo(t3, bo[t3.type], i6, e8), 1);
}
function Co(e8, t3) {
  e8.forEach((e9) => e9.setTech && e9.setTech(t3));
}
function ko(e8, t3, i6) {
  return e8.reduceRight(Lo(i6), t3[i6]());
}
function Io(e8, t3, i6, s6) {
  return t3[i6](e8.reduce(Lo(i6), s6));
}
function xo(e8, t3, i6, s6 = null) {
  const n5 = "call" + Sa(i6), r4 = e8.reduce(Lo(n5), s6), a6 = r4 === So, o4 = a6 ? null : t3[i6](r4);
  return Oo(e8, i6, o4, a6), o4;
}
var Ao = { buffered: 1, currentTime: 1, duration: 1, muted: 1, played: 1, paused: 1, seekable: 1, volume: 1, ended: 1 };
var Do = { setCurrentTime: 1, setMuted: 1, setVolume: 1 };
var Po = { play: 1, pause: 1 };
function Lo(e8) {
  return (t3, i6) => t3 === So ? So : i6[e8] ? i6[e8](t3) : t3;
}
function Oo(e8, t3, i6, s6) {
  for (let n5 = e8.length - 1; n5 >= 0; n5--) {
    const r4 = e8[n5];
    r4[t3] && r4[t3](s6, i6);
  }
}
function No(e8) {
  To.hasOwnProperty(e8.id()) && delete To[e8.id()];
}
function Ro(e8, t3) {
  const i6 = To[e8.id()];
  let s6 = null;
  if (null == i6) return s6 = t3(e8), To[e8.id()] = [[t3, s6]], s6;
  for (let n5 = 0; n5 < i6.length; n5++) {
    const [e9, r4] = i6[n5];
    e9 === t3 && (s6 = r4);
  }
  return null === s6 && (s6 = t3(e8), i6.push([t3, s6])), s6;
}
function Mo(e8 = {}, t3 = [], i6, s6, n5 = [], r4 = false) {
  const [a6, ...o4] = t3;
  if ("string" == typeof a6) Mo(e8, bo[a6], i6, s6, n5, r4);
  else if (a6) {
    const t4 = Ro(s6, a6);
    if (!t4.setSource) return n5.push(t4), Mo(e8, o4, i6, s6, n5, r4);
    t4.setSource(Object.assign({}, e8), function(a7, l7) {
      if (a7) return Mo(e8, o4, i6, s6, n5, r4);
      n5.push(t4), Mo(l7, e8.type === l7.type ? o4 : bo[l7.type], i6, s6, n5, r4);
    });
  } else o4.length ? Mo(e8, o4, i6, s6, n5, r4) : r4 ? i6(e8, n5) : Mo(e8, bo["*"], i6, s6, n5, true);
}
var Uo = { opus: "video/ogg", ogv: "video/ogg", mp4: "video/mp4", mov: "video/mp4", m4v: "video/mp4", mkv: "video/x-matroska", m4a: "audio/mp4", mp3: "audio/mpeg", aac: "audio/aac", caf: "audio/x-caf", flac: "audio/flac", oga: "audio/ogg", wav: "audio/wav", m3u8: "application/x-mpegURL", mpd: "application/dash+xml", jpg: "image/jpeg", jpeg: "image/jpeg", gif: "image/gif", png: "image/png", svg: "image/svg+xml", webp: "image/webp" };
var Bo = function(e8 = "") {
  const t3 = ro(e8);
  return Uo[t3.toLowerCase()] || "";
};
var Fo = (e8, t3) => {
  if (!t3) return "";
  if (e8.cache_.source.src === t3 && e8.cache_.source.type) return e8.cache_.source.type;
  const i6 = e8.cache_.sources.filter((e9) => e9.src === t3);
  if (i6.length) return i6[0].type;
  const s6 = e8.$$("source");
  for (let n5 = 0; n5 < s6.length; n5++) {
    const e9 = s6[n5];
    if (e9.type && e9.src && e9.src === t3) return e9.type;
  }
  return Bo(t3);
};
var qo = function(e8) {
  if (Array.isArray(e8)) {
    let t3 = [];
    e8.forEach(function(e9) {
      e9 = qo(e9), Array.isArray(e9) ? t3 = t3.concat(e9) : En(e9) && t3.push(e9);
    }), e8 = t3;
  } else e8 = "string" == typeof e8 && e8.trim() ? [jo({ src: e8 })] : En(e8) && "string" == typeof e8.src && e8.src && e8.src.trim() ? [jo(e8)] : [];
  return e8;
};
function jo(e8) {
  if (!e8.type) {
    const t3 = Bo(e8.src);
    t3 && (e8.type = t3);
  }
  return e8;
}
var $o = '<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>';
var Ho = zn ? 10009 : Wn ? 461 : 8;
var Vo = { codes: { play: 415, pause: 19, ff: 417, rw: 412, back: Ho }, names: { 415: "play", 19: "pause", 417: "ff", 412: "rw", [Ho]: "back" }, isEventKey(e8, t3) {
  return t3 = t3.toLowerCase(), !(!this.names[e8.keyCode] || this.names[e8.keyCode] !== t3);
}, getEventName(e8) {
  if (this.names[e8.keyCode]) return this.names[e8.keyCode];
  if (this.codes[e8.code]) {
    const t3 = this.codes[e8.code];
    return this.names[t3];
  }
  return null;
} };
var zo = 5;
var Wo = class extends oa {
  constructor(e8) {
    super(), this.player_ = e8, this.focusableComponents = [], this.isListening_ = false, this.isPaused_ = false, this.onKeyDown_ = this.onKeyDown_.bind(this), this.lastFocusedComponent_ = null;
  }
  start() {
    this.isListening_ || (this.player_.on("keydown", this.onKeyDown_), this.player_.on("modalKeydown", this.onKeyDown_), this.player_.on("loadedmetadata", () => {
      this.focus(this.updateFocusableComponents()[0]);
    }), this.player_.on("modalclose", () => {
      this.refocusComponent();
    }), this.player_.on("focusin", this.handlePlayerFocus_.bind(this)), this.player_.on("focusout", this.handlePlayerBlur_.bind(this)), this.isListening_ = true, this.player_.errorDisplay && this.player_.errorDisplay.on("aftermodalfill", () => {
      this.updateFocusableComponents(), this.focusableComponents.length && (this.focusableComponents.length > 1 ? this.focusableComponents[1].focus() : this.focusableComponents[0].focus());
    }));
  }
  stop() {
    this.player_.off("keydown", this.onKeyDown_), this.isListening_ = false;
  }
  onKeyDown_(e8) {
    const t3 = e8.originalEvent ? e8.originalEvent : e8;
    if (["ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown"].includes(t3.key)) {
      if (this.isPaused_) return;
      t3.preventDefault();
      const e9 = t3.key.substring(5).toLowerCase();
      this.move(e9);
    } else if (Vo.isEventKey(t3, "play") || Vo.isEventKey(t3, "pause") || Vo.isEventKey(t3, "ff") || Vo.isEventKey(t3, "rw")) {
      t3.preventDefault();
      const e9 = Vo.getEventName(t3);
      this.performMediaAction_(e9);
    } else Vo.isEventKey(t3, "Back") && e8.target && "function" == typeof e8.target.closeable && e8.target.closeable() && (t3.preventDefault(), e8.target.close());
  }
  performMediaAction_(e8) {
    if (this.player_) switch (e8) {
      case "play":
        this.player_.paused() && this.player_.play();
        break;
      case "pause":
        this.player_.paused() || this.player_.pause();
        break;
      case "ff":
        this.userSeek_(this.player_.currentTime() + zo);
        break;
      case "rw":
        this.userSeek_(this.player_.currentTime() - zo);
    }
  }
  userSeek_(e8) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && this.player_.liveTracker.nextSeekedFromUser(), this.player_.currentTime(e8);
  }
  pause() {
    this.isPaused_ = true;
  }
  resume() {
    this.isPaused_ = false;
  }
  handlePlayerBlur_(e8) {
    const t3 = e8.relatedTarget;
    let i6 = null;
    const s6 = this.getCurrentComponent(e8.target);
    t3 && (i6 = Boolean(t3.closest(".video-js")), t3.classList.contains("vjs-text-track-settings") && !this.isPaused_ && this.searchForTrackSelect_()), (e8.currentTarget.contains(e8.relatedTarget) || i6) && t3 || (s6 && "CloseButton" === s6.name() ? this.refocusComponent() : (this.pause(), s6 && s6.el() && (this.lastFocusedComponent_ = s6)));
  }
  handlePlayerFocus_() {
    this.getCurrentComponent() && this.getCurrentComponent().getIsFocusable() && this.resume();
  }
  updateFocusableComponents() {
    const e8 = this.player_, t3 = [];
    function i6(e9) {
      for (const s6 of e9) s6.hasOwnProperty("el_") && s6.getIsFocusable() && s6.getIsAvailableToBeFocused(s6.el()) && t3.push(s6), s6.hasOwnProperty("children_") && s6.children_.length > 0 && i6(s6.children_);
    }
    return e8.children_.forEach((e9) => {
      if (e9.hasOwnProperty("el_")) {
        if (e9.getIsFocusable && e9.getIsAvailableToBeFocused && e9.getIsFocusable() && e9.getIsAvailableToBeFocused(e9.el())) return void t3.push(e9);
        e9.hasOwnProperty("children_") && e9.children_.length > 0 ? i6(e9.children_) : e9.hasOwnProperty("items") && e9.items.length > 0 ? i6(e9.items) : this.findSuitableDOMChild(e9) && t3.push(e9);
      }
      if ("ErrorDisplay" === e9.name_ && e9.opened_) {
        const i7 = e9.el_.querySelector(".vjs-errors-ok-button-container");
        if (i7) {
          i7.querySelectorAll("button").forEach((e10, i8) => {
            t3.push({ name: () => "ModalButton" + (i8 + 1), el: () => e10, getPositions: () => {
              const t4 = e10.getBoundingClientRect();
              return { boundingClientRect: { x: t4.x, y: t4.y, width: t4.width, height: t4.height, top: t4.top, right: t4.right, bottom: t4.bottom, left: t4.left }, center: { x: t4.left + t4.width / 2, y: t4.top + t4.height / 2, width: 0, height: 0, top: t4.top + t4.height / 2, right: t4.left + t4.width / 2, bottom: t4.top + t4.height / 2, left: t4.left + t4.width / 2 } };
            }, getIsAvailableToBeFocused: () => true, getIsFocusable: (e11) => true, focus: () => e10.focus() });
          });
        }
      }
    }), this.focusableComponents = t3, this.focusableComponents;
  }
  findSuitableDOMChild(e8) {
    function t3(i6) {
      if (e8.getIsFocusable(i6) && e8.getIsAvailableToBeFocused(i6)) return i6;
      for (let e9 = 0; e9 < i6.children.length; e9++) {
        const s6 = t3(i6.children[e9]);
        if (s6) return s6;
      }
      return null;
    }
    return e8.el() ? t3(e8.el()) : null;
  }
  getCurrentComponent(e8) {
    this.updateFocusableComponents();
    const t3 = e8 || document.activeElement;
    if (this.focusableComponents.length) {
      for (const i6 of this.focusableComponents) if (i6.el() === t3) return i6;
    }
  }
  add(e8) {
    const t3 = [...this.focusableComponents];
    e8.hasOwnProperty("el_") && e8.getIsFocusable() && e8.getIsAvailableToBeFocused(e8.el()) && t3.push(e8), this.focusableComponents = t3, this.trigger({ type: "focusableComponentsChanged", focusableComponents: this.focusableComponents });
  }
  remove(e8) {
    for (let t3 = 0; t3 < this.focusableComponents.length; t3++) if (this.focusableComponents[t3].name() === e8.name()) return this.focusableComponents.splice(t3, 1), void this.trigger({ type: "focusableComponentsChanged", focusableComponents: this.focusableComponents });
  }
  clear() {
    this.focusableComponents.length > 0 && (this.focusableComponents = [], this.trigger({ type: "focusableComponentsChanged", focusableComponents: this.focusableComponents }));
  }
  move(e8) {
    const t3 = this.getCurrentComponent();
    if (!t3) return;
    const i6 = t3.getPositions(), s6 = this.focusableComponents.filter((s7) => s7 !== t3 && this.isInDirection_(i6.boundingClientRect, s7.getPositions().boundingClientRect, e8)), n5 = this.findBestCandidate_(i6.center, s6, e8);
    n5 ? this.focus(n5) : this.trigger({ type: "endOfFocusableComponents", direction: e8, focusedComponent: t3 });
  }
  findBestCandidate_(e8, t3, i6) {
    let s6 = 1 / 0, n5 = null;
    for (const r4 of t3) {
      const t4 = r4.getPositions().center, a6 = this.calculateDistance_(e8, t4, i6);
      a6 < s6 && (s6 = a6, n5 = r4);
    }
    return n5;
  }
  isInDirection_(e8, t3, i6) {
    switch (i6) {
      case "right":
        return t3.left >= e8.right;
      case "left":
        return t3.right <= e8.left;
      case "down":
        return t3.top >= e8.bottom;
      case "up":
        return t3.bottom <= e8.top;
      default:
        return false;
    }
  }
  refocusComponent() {
    if (this.lastFocusedComponent_) {
      this.player_.userActive() || this.player_.userActive(true), this.updateFocusableComponents();
      for (let e8 = 0; e8 < this.focusableComponents.length; e8++) if (this.focusableComponents[e8].name() === this.lastFocusedComponent_.name()) return void this.focus(this.focusableComponents[e8]);
    } else this.focus(this.updateFocusableComponents()[0]);
  }
  focus(e8) {
    "object" == typeof e8 && (e8.getIsAvailableToBeFocused(e8.el()) ? e8.focus() : this.findSuitableDOMChild(e8) && this.findSuitableDOMChild(e8).focus());
  }
  calculateDistance_(e8, t3, i6) {
    const s6 = Math.abs(e8.x - t3.x), n5 = Math.abs(e8.y - t3.y);
    let r4;
    switch (i6) {
      case "right":
      case "left":
        r4 = s6 + 100 * n5;
        break;
      case "up":
        r4 = 2 * n5 + 0.5 * s6;
        break;
      case "down":
        r4 = 5 * n5 + s6;
        break;
      default:
        r4 = s6 + n5;
    }
    return r4;
  }
  searchForTrackSelect_() {
    const e8 = this;
    for (const t3 of e8.updateFocusableComponents()) if ("TextTrackSelect" === t3.constructor.name) {
      e8.focus(t3);
      break;
    }
  }
};
var Go = class extends Ca {
  constructor(e8, t3, i6) {
    if (super(e8, Cn({ createEl: false }, t3), i6), t3.playerOptions.sources && 0 !== t3.playerOptions.sources.length) e8.src(t3.playerOptions.sources);
    else for (let s6 = 0, n5 = t3.playerOptions.techOrder; s6 < n5.length; s6++) {
      const t4 = Sa(n5[s6]);
      let i7 = vo.getTech(t4);
      if (t4 || (i7 = Ca.getComponent(t4)), i7 && i7.isSupported()) {
        e8.loadTech_(t4);
        break;
      }
    }
  }
};
Ca.registerComponent("MediaLoader", Go);
var Xo = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.options_.controlText && this.controlText(this.options_.controlText), this.handleMouseOver_ = (e9) => this.handleMouseOver(e9), this.handleMouseOut_ = (e9) => this.handleMouseOut(e9), this.handleClick_ = (e9) => this.handleClick(e9), this.handleKeyDown_ = (e9) => this.handleKeyDown(e9), this.emitTapEvents(), this.enable();
  }
  createEl(e8 = "div", t3 = {}, i6 = {}) {
    t3 = Object.assign({ className: this.buildCSSClass(), tabIndex: 0 }, t3), "button" === e8 && yn.error(`Creating a ClickableComponent with an HTML element of ${e8} is not supported; use a Button instead.`), i6 = Object.assign({ role: "button" }, i6), this.tabIndex_ = t3.tabIndex;
    const s6 = rr(e8, t3, i6);
    return this.player_.options_.experimentalSvgIcons || s6.appendChild(rr("span", { className: "vjs-icon-placeholder" }, { "aria-hidden": true })), this.createControlTextEl(s6), s6;
  }
  dispose() {
    this.controlTextEl_ = null, super.dispose();
  }
  createControlTextEl(e8) {
    return this.controlTextEl_ = rr("span", { className: "vjs-control-text" }, { "aria-live": "polite" }), e8 && e8.appendChild(this.controlTextEl_), this.controlText(this.controlText_, e8), this.controlTextEl_;
  }
  controlText(e8, t3 = this.el()) {
    if (void 0 === e8) return this.controlText_ || "Need Text";
    const i6 = this.localize(e8);
    this.controlText_ = e8, ar(this.controlTextEl_, i6), this.nonIconControl || this.player_.options_.noUITitleAttributes || t3.setAttribute("title", i6);
  }
  buildCSSClass() {
    return `vjs-control vjs-button ${super.buildCSSClass()}`;
  }
  enable() {
    this.enabled_ || (this.enabled_ = true, this.removeClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "false"), void 0 !== this.tabIndex_ && this.el_.setAttribute("tabIndex", this.tabIndex_), this.on(["tap", "click"], this.handleClick_), this.on("keydown", this.handleKeyDown_));
  }
  disable() {
    this.enabled_ = false, this.addClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "true"), void 0 !== this.tabIndex_ && this.el_.removeAttribute("tabIndex"), this.off("mouseover", this.handleMouseOver_), this.off("mouseout", this.handleMouseOut_), this.off(["tap", "click"], this.handleClick_), this.off("keydown", this.handleKeyDown_);
  }
  handleLanguagechange() {
    this.controlText(this.controlText_);
  }
  handleClick(e8) {
    this.options_.clickHandler && this.options_.clickHandler.call(this, arguments);
  }
  handleKeyDown(e8) {
    " " === e8.key || "Enter" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.trigger("click")) : super.handleKeyDown(e8);
  }
};
Ca.registerComponent("ClickableComponent", Xo);
var Ko = class extends Xo {
  constructor(e8, t3) {
    super(e8, t3), this.update(), this.update_ = (e9) => this.update(e9), e8.on("posterchange", this.update_);
  }
  dispose() {
    this.player().off("posterchange", this.update_), super.dispose();
  }
  createEl() {
    return rr("div", { className: "vjs-poster" });
  }
  crossOrigin(e8) {
    if (void 0 === e8) return this.$("img") ? this.$("img").crossOrigin : this.player_.tech_ && this.player_.tech_.isReady_ ? this.player_.crossOrigin() : this.player_.options_.crossOrigin || this.player_.options_.crossorigin || null;
    null === e8 || "anonymous" === e8 || "use-credentials" === e8 ? this.$("img") && (this.$("img").crossOrigin = e8) : this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e8}"`);
  }
  update(e8) {
    const t3 = this.player().poster();
    this.setSrc(t3), t3 ? this.show() : this.hide();
  }
  setSrc(e8) {
    e8 ? (this.$("img") || this.el_.appendChild(rr("picture", { className: "vjs-poster", tabIndex: -1 }, {}, rr("img", { loading: "lazy", crossOrigin: this.crossOrigin() }, { alt: "" }))), this.$("img").src = e8) : this.el_.textContent = "";
  }
  handleClick(e8) {
    this.player_.controls() && (this.player_.tech(true) && this.player_.tech(true).focus(), this.player_.paused() ? Fa(this.player_.play()) : this.player_.pause());
  }
};
Ko.prototype.crossorigin = Ko.prototype.crossOrigin, Ca.registerComponent("PosterImage", Ko);
var Yo = "#222";
var Qo = "#ccc";
var Jo = { monospace: "monospace", sansSerif: "sans-serif", serif: "serif", monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace', monospaceSerif: '"Courier New", monospace', proportionalSansSerif: "sans-serif", proportionalSerif: "serif", casual: '"Comic Sans MS", Impact, fantasy', script: '"Monotype Corsiva", cursive', smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif' };
function Zo(e8, t3) {
  let i6;
  if (4 === e8.length) i6 = e8[1] + e8[1] + e8[2] + e8[2] + e8[3] + e8[3];
  else {
    if (7 !== e8.length) throw new Error("Invalid color code provided, " + e8 + "; must be formatted as e.g. #f0e or #f604e2.");
    i6 = e8.slice(1);
  }
  return "rgba(" + parseInt(i6.slice(0, 2), 16) + "," + parseInt(i6.slice(2, 4), 16) + "," + parseInt(i6.slice(4, 6), 16) + "," + t3 + ")";
}
function el(e8, t3, i6) {
  try {
    e8.style[t3] = i6;
  } catch (s6) {
    return;
  }
}
function tl(e8) {
  return e8 ? `${e8}px` : "";
}
var il = class extends Ca {
  constructor(e8, t3, i6) {
    super(e8, t3, i6);
    const s6 = (e9) => this.updateDisplay(e9), n5 = (e9) => {
      this.updateDisplayOverlay(), this.updateDisplay(e9);
    };
    e8.on("loadstart", (e9) => this.toggleDisplay(e9)), e8.on("texttrackchange", s6), e8.on("loadedmetadata", (e9) => {
      this.updateDisplayOverlay(), this.preselectTrack(e9);
    }), e8.ready(ia(this, function() {
      if (e8.tech_ && e8.tech_.featuresNativeTextTracks) return void this.hide();
      e8.on("fullscreenchange", n5), e8.on("playerresize", n5);
      const t4 = b4.screen.orientation || b4, i7 = b4.screen.orientation ? "change" : "orientationchange";
      t4.addEventListener(i7, n5), e8.on("dispose", () => t4.removeEventListener(i7, n5));
      const s7 = this.options_.playerOptions.tracks || [];
      for (let e9 = 0; e9 < s7.length; e9++) this.player_.addRemoteTextTrack(s7[e9], true);
      this.preselectTrack();
    }));
  }
  preselectTrack() {
    const e8 = { captions: 1, subtitles: 1 }, t3 = this.player_.textTracks(), i6 = this.player_.cache_.selectedLanguage;
    let s6, n5, r4;
    for (let a6 = 0; a6 < t3.length; a6++) {
      const o4 = t3[a6];
      i6 && i6.enabled && i6.language && i6.language === o4.language && o4.kind in e8 ? o4.kind === i6.kind ? r4 = o4 : r4 || (r4 = o4) : i6 && !i6.enabled ? (r4 = null, s6 = null, n5 = null) : o4.default && ("descriptions" !== o4.kind || s6 ? o4.kind in e8 && !n5 && (n5 = o4) : s6 = o4);
    }
    r4 ? r4.mode = "showing" : n5 ? n5.mode = "showing" : s6 && (s6.mode = "showing");
  }
  toggleDisplay() {
    this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks ? this.hide() : this.show();
  }
  createEl() {
    return super.createEl("div", { className: "vjs-text-track-display" }, { translate: "yes", "aria-live": "off", "aria-atomic": "true" });
  }
  clearDisplay() {
    "function" == typeof b4.WebVTT && b4.WebVTT.processCues(b4, [], this.el_);
  }
  updateDisplay() {
    const e8 = this.player_.textTracks(), t3 = this.options_.allowMultipleShowingTracks;
    if (this.clearDisplay(), t3) {
      const t4 = [];
      for (let i7 = 0; i7 < e8.length; ++i7) {
        const s7 = e8[i7];
        "showing" === s7.mode && t4.push(s7);
      }
      return void this.updateForTrack(t4);
    }
    let i6 = null, s6 = null, n5 = e8.length;
    for (; n5--; ) {
      const t4 = e8[n5];
      "showing" === t4.mode && ("descriptions" === t4.kind ? i6 = t4 : s6 = t4);
    }
    if (s6 ? ("off" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "off"), this.updateForTrack(s6)) : i6 && ("assertive" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "assertive"), this.updateForTrack(i6)), !b4.CSS.supports("inset", "10px")) {
      const e9 = this.el_, t4 = e9.querySelectorAll(".vjs-text-track-cue"), i7 = this.player_.controlBar.el_.getBoundingClientRect().height, s7 = this.player_.el_.getBoundingClientRect().height;
      e9.style = "", el(e9, "position", "relative"), el(e9, "height", s7 - i7 + "px"), el(e9, "top", "unset"), el(e9, "bottom", Gn ? s7 + "px" : "0px"), t4.length > 0 && t4.forEach((e10) => {
        if (e10.style.inset) {
          const t5 = e10.style.inset.split(" ");
          3 === t5.length && Object.assign(e10.style, { top: t5[0], right: t5[1], bottom: t5[2], left: "unset" });
        }
      });
    }
  }
  updateDisplayOverlay() {
    if (!this.player_.videoHeight() || !b4.CSS.supports("inset-inline: 10px")) return;
    const e8 = this.player_.currentWidth(), t3 = this.player_.currentHeight(), i6 = e8 / t3, s6 = this.player_.videoWidth() / this.player_.videoHeight();
    let n5 = 0, r4 = 0;
    Math.abs(i6 - s6) > 0.1 && (i6 > s6 ? n5 = Math.round((e8 - t3 * s6) / 2) : r4 = Math.round((t3 - e8 / s6) / 2)), el(this.el_, "insetInline", tl(n5)), el(this.el_, "insetBlock", tl(r4));
  }
  updateDisplayState(e8) {
    const t3 = this.player_.textTrackSettings.getValues(), i6 = e8.activeCues;
    let s6 = i6.length;
    for (; s6--; ) {
      const e9 = i6[s6];
      if (!e9) continue;
      const n5 = e9.displayState;
      if (t3.color && (n5.firstChild.style.color = t3.color), t3.textOpacity && el(n5.firstChild, "color", Zo(t3.color || "#fff", t3.textOpacity)), t3.backgroundColor && (n5.firstChild.style.backgroundColor = t3.backgroundColor), t3.backgroundOpacity && el(n5.firstChild, "backgroundColor", Zo(t3.backgroundColor || "#000", t3.backgroundOpacity)), t3.windowColor && (t3.windowOpacity ? el(n5, "backgroundColor", Zo(t3.windowColor, t3.windowOpacity)) : n5.style.backgroundColor = t3.windowColor), t3.edgeStyle && ("dropshadow" === t3.edgeStyle ? n5.firstChild.style.textShadow = `2px 2px 3px ${Yo}, 2px 2px 4px ${Yo}, 2px 2px 5px ${Yo}` : "raised" === t3.edgeStyle ? n5.firstChild.style.textShadow = `1px 1px ${Yo}, 2px 2px ${Yo}, 3px 3px ${Yo}` : "depressed" === t3.edgeStyle ? n5.firstChild.style.textShadow = `1px 1px ${Qo}, 0 1px ${Qo}, -1px -1px ${Yo}, 0 -1px ${Yo}` : "uniform" === t3.edgeStyle && (n5.firstChild.style.textShadow = `0 0 4px ${Yo}, 0 0 4px ${Yo}, 0 0 4px ${Yo}, 0 0 4px ${Yo}`)), t3.fontPercent && 1 !== t3.fontPercent) {
        const e10 = b4.parseFloat(n5.style.fontSize);
        n5.style.fontSize = e10 * t3.fontPercent + "px", n5.style.height = "auto", n5.style.top = "auto";
      }
      t3.fontFamily && "default" !== t3.fontFamily && ("small-caps" === t3.fontFamily ? n5.firstChild.style.fontVariant = "small-caps" : n5.firstChild.style.fontFamily = Jo[t3.fontFamily]);
    }
  }
  updateForTrack(e8) {
    if (Array.isArray(e8) || (e8 = [e8]), "function" != typeof b4.WebVTT || e8.every((e9) => !e9.activeCues)) return;
    const t3 = [];
    for (let i6 = 0; i6 < e8.length; ++i6) {
      const s6 = e8[i6];
      for (let e9 = 0; e9 < s6.activeCues.length; ++e9) t3.push(s6.activeCues[e9]);
    }
    b4.WebVTT.processCues(b4, t3, this.el_);
    for (let i6 = 0; i6 < e8.length; ++i6) {
      const t4 = e8[i6];
      for (let e9 = 0; e9 < t4.activeCues.length; ++e9) {
        const s6 = t4.activeCues[e9].displayState;
        hr(s6, "vjs-text-track-cue", "vjs-text-track-cue-" + (t4.language ? t4.language : i6)), t4.language && gr(s6, "lang", t4.language);
      }
      this.player_.textTrackSettings && this.updateDisplayState(t4);
    }
  }
};
Ca.registerComponent("TextTrackDisplay", il);
var sl = class extends Ca {
  createEl() {
    const e8 = this.player_.isAudio(), t3 = this.localize(e8 ? "Audio Player" : "Video Player"), i6 = rr("span", { className: "vjs-control-text", textContent: this.localize("{1} is loading.", [t3]) }), s6 = super.createEl("div", { className: "vjs-loading-spinner", dir: "ltr" });
    return s6.appendChild(i6), s6;
  }
  handleLanguagechange() {
    this.$(".vjs-control-text").textContent = this.localize("{1} is loading.", [this.player_.isAudio() ? "Audio Player" : "Video Player"]);
  }
};
Ca.registerComponent("LoadingSpinner", sl);
var nl = class extends Xo {
  createEl(e8, t3 = {}, i6 = {}) {
    const s6 = rr("button", t3 = Object.assign({ className: this.buildCSSClass() }, t3), i6 = Object.assign({ type: "button" }, i6));
    return this.player_.options_.experimentalSvgIcons || s6.appendChild(rr("span", { className: "vjs-icon-placeholder" }, { "aria-hidden": true })), this.createControlTextEl(s6), s6;
  }
  addChild(e8, t3 = {}) {
    const i6 = this.constructor.name;
    return yn.warn(`Adding an actionable (user controllable) child to a Button (${i6}) is not supported; use a ClickableComponent instead.`), Ca.prototype.addChild.call(this, e8, t3);
  }
  enable() {
    super.enable(), this.el_.removeAttribute("disabled");
  }
  disable() {
    super.disable(), this.el_.setAttribute("disabled", "disabled");
  }
  handleKeyDown(e8) {
    " " !== e8.key && "Enter" !== e8.key ? super.handleKeyDown(e8) : e8.stopPropagation();
  }
};
Ca.registerComponent("Button", nl);
var rl = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.mouseused_ = false, this.setIcon("play"), this.on("mousedown", (e9) => this.handleMouseDown(e9));
  }
  buildCSSClass() {
    return "vjs-big-play-button";
  }
  handleClick(e8) {
    const t3 = this.player_.play();
    if (this.mouseused_ && "clientX" in e8 && "clientY" in e8) return Fa(t3), void (this.player_.tech(true) && this.player_.tech(true).focus());
    const i6 = this.player_.getChild("controlBar"), s6 = i6 && i6.getChild("playToggle");
    if (!s6) return void this.player_.tech(true).focus();
    const n5 = () => s6.focus();
    Ba(t3) ? t3.then(n5, () => {
    }) : this.setTimeout(n5, 1);
  }
  handleKeyDown(e8) {
    this.mouseused_ = false, super.handleKeyDown(e8);
  }
  handleMouseDown(e8) {
    this.mouseused_ = true;
  }
};
rl.prototype.controlText_ = "Play Video", Ca.registerComponent("BigPlayButton", rl);
var al = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.setIcon("cancel"), this.controlText(t3 && t3.controlText || this.localize("Close"));
  }
  buildCSSClass() {
    return `vjs-close-button ${super.buildCSSClass()}`;
  }
  handleClick(e8) {
    this.trigger({ type: "close", bubbles: false });
  }
  handleKeyDown(e8) {
    "Escape" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.trigger("click")) : super.handleKeyDown(e8);
  }
};
Ca.registerComponent("CloseButton", al);
var ol = class extends nl {
  constructor(e8, t3 = {}) {
    super(e8, t3), t3.replay = void 0 === t3.replay || t3.replay, this.setIcon("play"), this.on(e8, "play", (e9) => this.handlePlay(e9)), this.on(e8, "pause", (e9) => this.handlePause(e9)), t3.replay && this.on(e8, "ended", (e9) => this.handleEnded(e9));
  }
  buildCSSClass() {
    return `vjs-play-control ${super.buildCSSClass()}`;
  }
  handleClick(e8) {
    this.player_.paused() ? Fa(this.player_.play()) : this.player_.pause();
  }
  handleSeeked(e8) {
    this.removeClass("vjs-ended"), this.player_.paused() ? this.handlePause(e8) : this.handlePlay(e8);
  }
  handlePlay(e8) {
    this.removeClass("vjs-ended", "vjs-paused"), this.addClass("vjs-playing"), this.setIcon("pause"), this.controlText("Pause");
  }
  handlePause(e8) {
    this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.setIcon("play"), this.controlText("Play");
  }
  handleEnded(e8) {
    this.removeClass("vjs-playing"), this.addClass("vjs-ended"), this.setIcon("replay"), this.controlText("Replay"), this.one(this.player_, "seeked", (e9) => this.handleSeeked(e9));
  }
};
ol.prototype.controlText_ = "Play", Ca.registerComponent("PlayToggle", ol);
var ll = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.on(e8, ["timeupdate", "ended", "seeking"], (e9) => this.update(e9)), this.updateTextNode_();
  }
  createEl() {
    const e8 = this.buildCSSClass(), t3 = super.createEl("div", { className: `${e8} vjs-time-control vjs-control` }), i6 = rr("span", { className: "vjs-control-text", textContent: `${this.localize(this.labelText_)}` }, { role: "presentation" });
    return t3.appendChild(i6), this.contentEl_ = rr("span", { className: `${e8}-display` }, { role: "presentation" }), t3.appendChild(this.contentEl_), t3;
  }
  dispose() {
    this.contentEl_ = null, this.textNode_ = null, super.dispose();
  }
  update(e8) {
    (this.player_.options_.enableSmoothSeeking || "seeking" !== e8.type) && this.updateContent(e8);
  }
  updateTextNode_(e8 = 0) {
    e8 = Na(e8), this.formattedTime_ !== e8 && (this.formattedTime_ = e8, this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_", () => {
      if (!this.contentEl_) return;
      let e9 = this.textNode_;
      e9 && this.contentEl_.firstChild !== e9 && (e9 = null, yn.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")), this.textNode_ = ae.createTextNode(this.formattedTime_), this.textNode_ && (e9 ? this.contentEl_.replaceChild(this.textNode_, e9) : this.contentEl_.appendChild(this.textNode_));
    }));
  }
  updateContent(e8) {
  }
};
ll.prototype.labelText_ = "Time", ll.prototype.controlText_ = "Time", Ca.registerComponent("TimeDisplay", ll);
var hl = class extends ll {
  buildCSSClass() {
    return "vjs-current-time";
  }
  updateContent(e8) {
    let t3;
    t3 = this.player_.ended() ? this.player_.duration() : this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime(), this.updateTextNode_(t3);
  }
};
hl.prototype.labelText_ = "Current Time", hl.prototype.controlText_ = "Current Time", Ca.registerComponent("CurrentTimeDisplay", hl);
var ul = class extends ll {
  constructor(e8, t3) {
    super(e8, t3);
    const i6 = (e9) => this.updateContent(e9);
    this.on(e8, "durationchange", i6), this.on(e8, "loadstart", i6), this.on(e8, "loadedmetadata", i6);
  }
  buildCSSClass() {
    return "vjs-duration";
  }
  updateContent(e8) {
    const t3 = this.player_.duration();
    this.updateTextNode_(t3);
  }
};
ul.prototype.labelText_ = "Duration", ul.prototype.controlText_ = "Duration", Ca.registerComponent("DurationDisplay", ul);
var dl = class extends Ca {
  createEl() {
    const e8 = super.createEl("div", { className: "vjs-time-control vjs-time-divider" }, { "aria-hidden": true }), t3 = super.createEl("div"), i6 = super.createEl("span", { textContent: "/" });
    return t3.appendChild(i6), e8.appendChild(t3), e8;
  }
};
Ca.registerComponent("TimeDivider", dl);
var cl = class extends ll {
  constructor(e8, t3) {
    super(e8, t3), this.on(e8, "durationchange", (e9) => this.updateContent(e9));
  }
  buildCSSClass() {
    return "vjs-remaining-time";
  }
  createEl() {
    const e8 = super.createEl();
    return false !== this.options_.displayNegative && e8.insertBefore(rr("span", {}, { "aria-hidden": true }, "-"), this.contentEl_), e8;
  }
  updateContent(e8) {
    if ("number" != typeof this.player_.duration()) return;
    let t3;
    t3 = this.player_.ended() ? 0 : this.player_.remainingTimeDisplay ? this.player_.remainingTimeDisplay() : this.player_.remainingTime(), this.updateTextNode_(t3);
  }
};
cl.prototype.labelText_ = "Remaining Time", cl.prototype.controlText_ = "Remaining Time", Ca.registerComponent("RemainingTimeDisplay", cl);
var pl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.updateShowing(), this.on(this.player(), "durationchange", (e9) => this.updateShowing(e9));
  }
  createEl() {
    const e8 = super.createEl("div", { className: "vjs-live-control vjs-control" });
    return this.contentEl_ = rr("div", { className: "vjs-live-display" }, { "aria-live": "off" }), this.contentEl_.appendChild(rr("span", { className: "vjs-control-text", textContent: `${this.localize("Stream Type")}` })), this.contentEl_.appendChild(ae.createTextNode(this.localize("LIVE"))), e8.appendChild(this.contentEl_), e8;
  }
  dispose() {
    this.contentEl_ = null, super.dispose();
  }
  updateShowing(e8) {
    this.player().duration() === 1 / 0 ? this.show() : this.hide();
  }
};
Ca.registerComponent("LiveDisplay", pl);
var ml = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.updateLiveEdgeStatus(), this.player_.liveTracker && (this.updateLiveEdgeStatusHandler_ = (e9) => this.updateLiveEdgeStatus(e9), this.on(this.player_.liveTracker, "liveedgechange", this.updateLiveEdgeStatusHandler_));
  }
  createEl() {
    const e8 = super.createEl("button", { className: "vjs-seek-to-live-control vjs-control" });
    return this.setIcon("circle", e8), this.textEl_ = rr("span", { className: "vjs-seek-to-live-text", textContent: this.localize("LIVE") }, { "aria-hidden": "true" }), e8.appendChild(this.textEl_), e8;
  }
  updateLiveEdgeStatus() {
    !this.player_.liveTracker || this.player_.liveTracker.atLiveEdge() ? (this.setAttribute("aria-disabled", true), this.addClass("vjs-at-live-edge"), this.controlText("Seek to live, currently playing live")) : (this.setAttribute("aria-disabled", false), this.removeClass("vjs-at-live-edge"), this.controlText("Seek to live, currently behind live"));
  }
  handleClick() {
    this.player_.liveTracker.seekToLiveEdge();
  }
  dispose() {
    this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.updateLiveEdgeStatusHandler_), this.textEl_ = null, super.dispose();
  }
};
function gl(e8, t3, i6) {
  return e8 = Number(e8), Math.min(i6, Math.max(t3, isNaN(e8) ? t3 : e8));
}
ml.prototype.controlText_ = "Seek to live, currently playing live", Ca.registerComponent("SeekToLive", ml);
var fl = Object.freeze({ __proto__: null, clamp: gl });
var yl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.handleMouseDown_ = (e9) => this.handleMouseDown(e9), this.handleMouseUp_ = (e9) => this.handleMouseUp(e9), this.handleKeyDown_ = (e9) => this.handleKeyDown(e9), this.handleClick_ = (e9) => this.handleClick(e9), this.handleMouseMove_ = (e9) => this.handleMouseMove(e9), this.update_ = (e9) => this.update(e9), this.bar = this.getChild(this.options_.barName), this.vertical(!!this.options_.vertical), this.enable();
  }
  enabled() {
    return this.enabled_;
  }
  enable() {
    this.enabled() || (this.on("mousedown", this.handleMouseDown_), this.on("touchstart", this.handleMouseDown_), this.on("keydown", this.handleKeyDown_), this.on("click", this.handleClick_), this.on(this.player_, "controlsvisible", this.update), this.playerEvent && this.on(this.player_, this.playerEvent, this.update), this.removeClass("disabled"), this.setAttribute("tabindex", 0), this.enabled_ = true);
  }
  disable() {
    if (!this.enabled()) return;
    const e8 = this.bar.el_.ownerDocument;
    this.off("mousedown", this.handleMouseDown_), this.off("touchstart", this.handleMouseDown_), this.off("keydown", this.handleKeyDown_), this.off("click", this.handleClick_), this.off(this.player_, "controlsvisible", this.update_), this.off(e8, "mousemove", this.handleMouseMove_), this.off(e8, "mouseup", this.handleMouseUp_), this.off(e8, "touchmove", this.handleMouseMove_), this.off(e8, "touchend", this.handleMouseUp_), this.removeAttribute("tabindex"), this.addClass("disabled"), this.playerEvent && this.off(this.player_, this.playerEvent, this.update), this.enabled_ = false;
  }
  createEl(e8, t3 = {}, i6 = {}) {
    return t3.className = t3.className + " vjs-slider", t3 = Object.assign({ tabIndex: 0 }, t3), i6 = Object.assign({ role: "slider", "aria-valuenow": 0, "aria-valuemin": 0, "aria-valuemax": 100 }, i6), super.createEl(e8, t3, i6);
  }
  handleMouseDown(e8) {
    const t3 = this.bar.el_.ownerDocument;
    "mousedown" === e8.type && e8.preventDefault(), "touchstart" !== e8.type || Mn || e8.preventDefault(), yr(), this.addClass("vjs-sliding"), this.trigger("slideractive"), this.on(t3, "mousemove", this.handleMouseMove_), this.on(t3, "mouseup", this.handleMouseUp_), this.on(t3, "touchmove", this.handleMouseMove_), this.on(t3, "touchend", this.handleMouseUp_), this.handleMouseMove(e8, true);
  }
  handleMouseMove(e8) {
  }
  handleMouseUp(e8) {
    const t3 = this.bar.el_.ownerDocument;
    _r(), this.removeClass("vjs-sliding"), this.trigger("sliderinactive"), this.off(t3, "mousemove", this.handleMouseMove_), this.off(t3, "mouseup", this.handleMouseUp_), this.off(t3, "touchmove", this.handleMouseMove_), this.off(t3, "touchend", this.handleMouseUp_), this.update();
  }
  update() {
    if (!this.el_ || !this.bar) return;
    const e8 = this.getProgress();
    return e8 === this.progress_ || (this.progress_ = e8, this.requestNamedAnimationFrame("Slider#update", () => {
      const t3 = this.vertical() ? "height" : "width";
      this.bar.el().style[t3] = (100 * e8).toFixed(2) + "%";
    })), e8;
  }
  getProgress() {
    return Number(gl(this.getPercent(), 0, 1).toFixed(4));
  }
  calculateDistance(e8) {
    const t3 = Tr(this.el_, e8);
    return this.vertical() ? t3.y : t3.x;
  }
  handleKeyDown(e8) {
    const t3 = this.options_.playerOptions.spatialNavigation, i6 = t3 && t3.enabled, s6 = t3 && t3.horizontalSeek;
    i6 ? s6 && "ArrowLeft" === e8.key || !s6 && "ArrowDown" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.stepBack()) : s6 && "ArrowRight" === e8.key || !s6 && "ArrowUp" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.stepForward()) : super.handleKeyDown(e8) : "ArrowLeft" === e8.key || "ArrowDown" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.stepBack()) : "ArrowUp" === e8.key || "ArrowRight" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.stepForward()) : super.handleKeyDown(e8);
  }
  handleClick(e8) {
    e8.stopPropagation(), e8.preventDefault();
  }
  vertical(e8) {
    if (void 0 === e8) return this.vertical_ || false;
    this.vertical_ = !!e8, this.vertical_ ? this.addClass("vjs-slider-vertical") : this.addClass("vjs-slider-horizontal");
  }
};
Ca.registerComponent("Slider", yl);
var _l = (e8, t3) => gl(e8 / t3 * 100, 0, 100).toFixed(2) + "%";
var vl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.partEls_ = [], this.on(e8, "progress", (e9) => this.update(e9));
  }
  createEl() {
    const e8 = super.createEl("div", { className: "vjs-load-progress" }), t3 = rr("span", { className: "vjs-control-text" }), i6 = rr("span", { textContent: this.localize("Loaded") }), s6 = ae.createTextNode(": ");
    return this.percentageEl_ = rr("span", { className: "vjs-control-text-loaded-percentage", textContent: "0%" }), e8.appendChild(t3), t3.appendChild(i6), t3.appendChild(s6), t3.appendChild(this.percentageEl_), e8;
  }
  dispose() {
    this.partEls_ = null, this.percentageEl_ = null, super.dispose();
  }
  update(e8) {
    this.requestNamedAnimationFrame("LoadProgressBar#update", () => {
      const e9 = this.player_.liveTracker, t3 = this.player_.buffered(), i6 = e9 && e9.isLive() ? e9.seekableEnd() : this.player_.duration(), s6 = this.player_.bufferedEnd(), n5 = this.partEls_, r4 = _l(s6, i6);
      this.percent_ !== r4 && (this.el_.style.width = r4, ar(this.percentageEl_, r4), this.percent_ = r4);
      for (let a6 = 0; a6 < t3.length; a6++) {
        const e10 = t3.start(a6), i7 = t3.end(a6);
        let r5 = n5[a6];
        r5 || (r5 = this.el_.appendChild(rr()), n5[a6] = r5), r5.dataset.start === e10 && r5.dataset.end === i7 || (r5.dataset.start = e10, r5.dataset.end = i7, r5.style.left = _l(e10, s6), r5.style.width = _l(i7 - e10, s6));
      }
      for (let a6 = n5.length; a6 > t3.length; a6--) this.el_.removeChild(n5[a6 - 1]);
      n5.length = t3.length;
    });
  }
};
Ca.registerComponent("LoadProgressBar", vl);
var bl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.update = sa(ia(this, this.update), ta);
  }
  createEl() {
    return super.createEl("div", { className: "vjs-time-tooltip" }, { "aria-hidden": "true" });
  }
  update(e8, t3, i6) {
    const s6 = br(this.el_), n5 = vr(this.player_.el()), r4 = e8.width * t3;
    if (!n5 || !s6) return;
    let a6 = e8.left - n5.left + r4, o4 = e8.width - r4 + (n5.right - e8.right);
    o4 || (o4 = e8.width - r4, a6 = r4);
    let l7 = s6.width / 2;
    a6 < l7 ? l7 += l7 - a6 : o4 < l7 && (l7 = o4), l7 < 0 ? l7 = 0 : l7 > s6.width && (l7 = s6.width), l7 = Math.round(l7), this.el_.style.right = `-${l7}px`, this.write(i6);
  }
  write(e8) {
    ar(this.el_, e8);
  }
  updateTime(e8, t3, i6, s6) {
    this.requestNamedAnimationFrame("TimeTooltip#updateTime", () => {
      let n5;
      const r4 = this.player_.duration();
      if (this.player_.liveTracker && this.player_.liveTracker.isLive()) {
        const e9 = this.player_.liveTracker.liveWindow(), i7 = e9 - t3 * e9;
        n5 = (i7 < 1 ? "" : "-") + Na(i7, e9);
      } else n5 = Na(i6, r4);
      this.update(e8, t3, n5), s6 && s6();
    });
  }
};
Ca.registerComponent("TimeTooltip", bl);
var Tl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.setIcon("circle"), this.update = sa(ia(this, this.update), ta);
  }
  createEl() {
    return super.createEl("div", { className: "vjs-play-progress vjs-slider-bar" }, { "aria-hidden": "true" });
  }
  update(e8, t3) {
    const i6 = this.getChild("timeTooltip");
    if (!i6) return;
    const s6 = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
    i6.updateTime(e8, t3, s6);
  }
};
Tl.prototype.options_ = { children: [] }, Yn || Ln || Tl.prototype.options_.children.push("timeTooltip"), Ca.registerComponent("PlayProgressBar", Tl);
var Sl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.update = sa(ia(this, this.update), ta);
  }
  createEl() {
    return super.createEl("div", { className: "vjs-mouse-display" });
  }
  update(e8, t3) {
    const i6 = t3 * this.player_.duration();
    this.getChild("timeTooltip").updateTime(e8, t3, i6, () => {
      this.el_.style.left = e8.width * t3 + "px";
    });
  }
};
Sl.prototype.options_ = { children: ["timeTooltip"] }, Ca.registerComponent("MouseTimeDisplay", Sl);
var El = class _El extends yl {
  constructor(e8, t3) {
    (t3 = Cn(_El.prototype.options_, t3)).children = [...t3.children];
    const i6 = e8.options_.disableSeekWhileScrubbingOnMobile && (Yn || Ln);
    (!Yn && !Ln || i6) && t3.children.splice(1, 0, "mouseTimeDisplay"), super(e8, t3), this.shouldDisableSeekWhileScrubbingOnMobile_ = i6, this.pendingSeekTime_ = null, this.setEventHandlers_();
  }
  setEventHandlers_() {
    this.update_ = ia(this, this.update), this.update = sa(this.update_, ta), this.on(this.player_, ["durationchange", "timeupdate"], this.update), this.on(this.player_, ["ended"], this.update_), this.player_.liveTracker && this.on(this.player_.liveTracker, "liveedgechange", this.update), this.updateInterval = null, this.enableIntervalHandler_ = (e8) => this.enableInterval_(e8), this.disableIntervalHandler_ = (e8) => this.disableInterval_(e8), this.on(this.player_, ["playing"], this.enableIntervalHandler_), this.on(this.player_, ["ended", "pause", "waiting"], this.disableIntervalHandler_), "hidden" in ae && "visibilityState" in ae && this.on(ae, "visibilitychange", this.toggleVisibility_);
  }
  toggleVisibility_(e8) {
    "hidden" === ae.visibilityState ? (this.cancelNamedAnimationFrame("SeekBar#update"), this.cancelNamedAnimationFrame("Slider#update"), this.disableInterval_(e8)) : (this.player_.ended() || this.player_.paused() || this.enableInterval_(), this.update());
  }
  enableInterval_() {
    this.updateInterval || (this.updateInterval = this.setInterval(this.update, ta));
  }
  disableInterval_(e8) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && e8 && "ended" !== e8.type || this.updateInterval && (this.clearInterval(this.updateInterval), this.updateInterval = null);
  }
  createEl() {
    return super.createEl("div", { className: "vjs-progress-holder" }, { "aria-label": this.localize("Progress Bar") });
  }
  update(e8) {
    if ("hidden" === ae.visibilityState) return;
    const t3 = super.update();
    return this.requestNamedAnimationFrame("SeekBar#update", () => {
      const e9 = this.player_.ended() ? this.player_.duration() : this.getCurrentTime_(), i6 = this.player_.liveTracker;
      let s6 = this.player_.duration();
      i6 && i6.isLive() && (s6 = this.player_.liveTracker.liveCurrentTime()), this.percent_ !== t3 && (this.el_.setAttribute("aria-valuenow", (100 * t3).toFixed(2)), this.percent_ = t3), this.currentTime_ === e9 && this.duration_ === s6 || (this.el_.setAttribute("aria-valuetext", this.localize("progress bar timing: currentTime={1} duration={2}", [Na(e9, s6), Na(s6, s6)], "{1} of {2}")), this.currentTime_ = e9, this.duration_ = s6), this.bar && this.bar.update(vr(this.el()), this.getProgress());
    }), t3;
  }
  userSeek_(e8) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && this.player_.liveTracker.nextSeekedFromUser(), this.player_.currentTime(e8);
  }
  getCurrentTime_() {
    return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
  }
  getPercent() {
    if (this.pendingSeekTime_) return this.pendingSeekTime_ / this.player_.duration();
    const e8 = this.getCurrentTime_();
    let t3;
    const i6 = this.player_.liveTracker;
    return i6 && i6.isLive() ? (t3 = (e8 - i6.seekableStart()) / i6.liveWindow(), i6.atLiveEdge() && (t3 = 1)) : t3 = e8 / this.player_.duration(), t3;
  }
  handleMouseDown(e8) {
    Ir(e8) && (e8.stopPropagation(), this.videoWasPlaying = !this.player_.paused(), this.shouldDisableSeekWhileScrubbingOnMobile_ || this.player_.pause(), super.handleMouseDown(e8));
  }
  handleMouseMove(e8, t3 = false) {
    if (!Ir(e8) || isNaN(this.player_.duration())) return;
    let i6;
    t3 || this.player_.scrubbing() || this.player_.scrubbing(true);
    const s6 = this.calculateDistance(e8), n5 = this.player_.liveTracker;
    if (n5 && n5.isLive()) {
      if (s6 >= 0.99) return void n5.seekToLiveEdge();
      const e9 = n5.seekableStart(), t4 = n5.liveCurrentTime();
      if (i6 = e9 + s6 * n5.liveWindow(), i6 >= t4 && (i6 = t4), i6 <= e9 && (i6 = e9 + 0.1), i6 === 1 / 0) return;
    } else i6 = s6 * this.player_.duration(), i6 === this.player_.duration() && (i6 -= 0.1);
    this.shouldDisableSeekWhileScrubbingOnMobile_ ? this.pendingSeekTime_ = i6 : this.userSeek_(i6), this.player_.options_.enableSmoothSeeking && this.update();
  }
  enable() {
    super.enable();
    const e8 = this.getChild("mouseTimeDisplay");
    e8 && e8.show();
  }
  disable() {
    super.disable();
    const e8 = this.getChild("mouseTimeDisplay");
    e8 && e8.hide();
  }
  handleMouseUp(e8) {
    super.handleMouseUp(e8), e8 && e8.stopPropagation(), this.player_.scrubbing(false), this.pendingSeekTime_ && (this.userSeek_(this.pendingSeekTime_), this.pendingSeekTime_ = null), this.player_.trigger({ type: "timeupdate", target: this, manuallyTriggered: true }), this.videoWasPlaying ? Fa(this.player_.play()) : this.update_();
  }
  stepForward() {
    this.userSeek_(this.player_.currentTime() + this.options().stepSeconds);
  }
  stepBack() {
    this.userSeek_(this.player_.currentTime() - this.options().stepSeconds);
  }
  handleAction(e8) {
    this.player_.paused() ? this.player_.play() : this.player_.pause();
  }
  handleKeyDown(e8) {
    const t3 = this.player_.liveTracker;
    if (" " === e8.key || "Enter" === e8.key) e8.preventDefault(), e8.stopPropagation(), this.handleAction(e8);
    else if ("Home" === e8.key) e8.preventDefault(), e8.stopPropagation(), this.userSeek_(0);
    else if ("End" === e8.key) e8.preventDefault(), e8.stopPropagation(), t3 && t3.isLive() ? this.userSeek_(t3.liveCurrentTime()) : this.userSeek_(this.player_.duration());
    else if (/^[0-9]$/.test(e8.key)) {
      e8.preventDefault(), e8.stopPropagation();
      const i6 = 0.1 * parseInt(e8.key, 10);
      t3 && t3.isLive() ? this.userSeek_(t3.seekableStart() + t3.liveWindow() * i6) : this.userSeek_(this.player_.duration() * i6);
    } else "PageDown" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.userSeek_(this.player_.currentTime() - this.options().stepSeconds * this.options().pageMultiplier)) : "PageUp" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.userSeek_(this.player_.currentTime() + this.options().stepSeconds * this.options().pageMultiplier)) : super.handleKeyDown(e8);
  }
  dispose() {
    this.disableInterval_(), this.off(this.player_, ["durationchange", "timeupdate"], this.update), this.off(this.player_, ["ended"], this.update_), this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.update), this.off(this.player_, ["playing"], this.enableIntervalHandler_), this.off(this.player_, ["ended", "pause", "waiting"], this.disableIntervalHandler_), "hidden" in ae && "visibilityState" in ae && this.off(ae, "visibilitychange", this.toggleVisibility_), super.dispose();
  }
};
El.prototype.options_ = { children: ["loadProgressBar", "playProgressBar"], barName: "playProgressBar", stepSeconds: 5, pageMultiplier: 12 }, Ca.registerComponent("SeekBar", El);
var wl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.handleMouseMove = sa(ia(this, this.handleMouseMove), ta), this.throttledHandleMouseSeek = sa(ia(this, this.handleMouseSeek), ta), this.handleMouseUpHandler_ = (e9) => this.handleMouseUp(e9), this.handleMouseDownHandler_ = (e9) => this.handleMouseDown(e9), this.enable();
  }
  createEl() {
    return super.createEl("div", { className: "vjs-progress-control vjs-control" });
  }
  handleMouseMove(e8) {
    const t3 = this.getChild("seekBar");
    if (!t3) return;
    const i6 = t3.getChild("playProgressBar"), s6 = t3.getChild("mouseTimeDisplay");
    if (!i6 && !s6) return;
    const n5 = t3.el(), r4 = br(n5);
    let a6 = Tr(n5, e8).x;
    a6 = gl(a6, 0, 1), s6 && s6.update(r4, a6), i6 && i6.update(r4, t3.getProgress());
  }
  handleMouseSeek(e8) {
    const t3 = this.getChild("seekBar");
    t3 && t3.handleMouseMove(e8);
  }
  enabled() {
    return this.enabled_;
  }
  disable() {
    if (this.children().forEach((e8) => e8.disable && e8.disable()), this.enabled() && (this.off(["mousedown", "touchstart"], this.handleMouseDownHandler_), this.off(this.el_, ["mousemove", "touchmove"], this.handleMouseMove), this.removeListenersAddedOnMousedownAndTouchstart(), this.addClass("disabled"), this.enabled_ = false, this.player_.scrubbing())) {
      const e8 = this.getChild("seekBar");
      this.player_.scrubbing(false), e8.videoWasPlaying && Fa(this.player_.play());
    }
  }
  enable() {
    this.children().forEach((e8) => e8.enable && e8.enable()), this.enabled() || (this.on(["mousedown", "touchstart"], this.handleMouseDownHandler_), this.on(this.el_, ["mousemove", "touchmove"], this.handleMouseMove), this.removeClass("disabled"), this.enabled_ = true);
  }
  removeListenersAddedOnMousedownAndTouchstart() {
    const e8 = this.el_.ownerDocument;
    this.off(e8, "mousemove", this.throttledHandleMouseSeek), this.off(e8, "touchmove", this.throttledHandleMouseSeek), this.off(e8, "mouseup", this.handleMouseUpHandler_), this.off(e8, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseDown(e8) {
    const t3 = this.el_.ownerDocument, i6 = this.getChild("seekBar");
    i6 && i6.handleMouseDown(e8), this.on(t3, "mousemove", this.throttledHandleMouseSeek), this.on(t3, "touchmove", this.throttledHandleMouseSeek), this.on(t3, "mouseup", this.handleMouseUpHandler_), this.on(t3, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseUp(e8) {
    const t3 = this.getChild("seekBar");
    t3 && t3.handleMouseUp(e8), this.removeListenersAddedOnMousedownAndTouchstart();
  }
};
wl.prototype.options_ = { children: ["seekBar"] }, Ca.registerComponent("ProgressControl", wl);
var Cl = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.setIcon("picture-in-picture-enter"), this.on(e8, ["enterpictureinpicture", "leavepictureinpicture"], (e9) => this.handlePictureInPictureChange(e9)), this.on(e8, ["disablepictureinpicturechanged", "loadedmetadata"], (e9) => this.handlePictureInPictureEnabledChange(e9)), this.on(e8, ["loadedmetadata", "audioonlymodechange", "audiopostermodechange"], () => this.handlePictureInPictureAudioModeChange()), this.disable();
  }
  buildCSSClass() {
    return `vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`;
  }
  handlePictureInPictureAudioModeChange() {
    "audio" === this.player_.currentType().substring(0, 5) || this.player_.audioPosterMode() || this.player_.audioOnlyMode() ? (this.player_.isInPictureInPicture() && this.player_.exitPictureInPicture(), this.hide()) : this.show();
  }
  handlePictureInPictureEnabledChange() {
    ae.pictureInPictureEnabled && false === this.player_.disablePictureInPicture() || this.player_.options_.enableDocumentPictureInPicture && "documentPictureInPicture" in b4 ? this.enable() : this.disable();
  }
  handlePictureInPictureChange(e8) {
    this.player_.isInPictureInPicture() ? (this.setIcon("picture-in-picture-exit"), this.controlText("Exit Picture-in-Picture")) : (this.setIcon("picture-in-picture-enter"), this.controlText("Picture-in-Picture")), this.handlePictureInPictureEnabledChange();
  }
  handleClick(e8) {
    this.player_.isInPictureInPicture() ? this.player_.exitPictureInPicture() : this.player_.requestPictureInPicture();
  }
  show() {
    "function" == typeof ae.exitPictureInPicture && super.show();
  }
};
Cl.prototype.controlText_ = "Picture-in-Picture", Ca.registerComponent("PictureInPictureToggle", Cl);
var kl = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.setIcon("fullscreen-enter"), this.on(e8, "fullscreenchange", (e9) => this.handleFullscreenChange(e9)), false === ae[e8.fsApi_.fullscreenEnabled] && this.disable();
  }
  buildCSSClass() {
    return `vjs-fullscreen-control ${super.buildCSSClass()}`;
  }
  handleFullscreenChange(e8) {
    this.player_.isFullscreen() ? (this.controlText("Exit Fullscreen"), this.setIcon("fullscreen-exit")) : (this.controlText("Fullscreen"), this.setIcon("fullscreen-enter"));
  }
  handleClick(e8) {
    this.player_.isFullscreen() ? this.player_.exitFullscreen() : this.player_.requestFullscreen();
  }
};
kl.prototype.controlText_ = "Fullscreen", Ca.registerComponent("FullscreenToggle", kl);
var Il = function(e8, t3) {
  t3.tech_ && !t3.tech_.featuresVolumeControl && e8.addClass("vjs-hidden"), e8.on(t3, "loadstart", function() {
    t3.tech_.featuresVolumeControl ? e8.removeClass("vjs-hidden") : e8.addClass("vjs-hidden");
  });
};
var xl = class extends Ca {
  createEl() {
    const e8 = super.createEl("div", { className: "vjs-volume-level" });
    return this.setIcon("circle", e8), e8.appendChild(super.createEl("span", { className: "vjs-control-text" })), e8;
  }
};
Ca.registerComponent("VolumeLevel", xl);
var Al = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.update = sa(ia(this, this.update), ta);
  }
  createEl() {
    return super.createEl("div", { className: "vjs-volume-tooltip" }, { "aria-hidden": "true" });
  }
  update(e8, t3, i6, s6) {
    if (!i6) {
      const i7 = vr(this.el_), s7 = vr(this.player_.el()), n5 = e8.width * t3;
      if (!s7 || !i7) return;
      const r4 = e8.left - s7.left + n5, a6 = e8.width - n5 + (s7.right - e8.right);
      let o4 = i7.width / 2;
      r4 < o4 ? o4 += o4 - r4 : a6 < o4 && (o4 = a6), o4 < 0 ? o4 = 0 : o4 > i7.width && (o4 = i7.width), this.el_.style.right = `-${o4}px`;
    }
    this.write(`${s6}%`);
  }
  write(e8) {
    ar(this.el_, e8);
  }
  updateVolume(e8, t3, i6, s6, n5) {
    this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume", () => {
      this.update(e8, t3, i6, s6.toFixed(0)), n5 && n5();
    });
  }
};
Ca.registerComponent("VolumeLevelTooltip", Al);
var Dl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.update = sa(ia(this, this.update), ta);
  }
  createEl() {
    return super.createEl("div", { className: "vjs-mouse-display" });
  }
  update(e8, t3, i6) {
    const s6 = 100 * t3;
    this.getChild("volumeLevelTooltip").updateVolume(e8, t3, i6, s6, () => {
      i6 ? this.el_.style.bottom = e8.height * t3 + "px" : this.el_.style.left = e8.width * t3 + "px";
    });
  }
};
Dl.prototype.options_ = { children: ["volumeLevelTooltip"] }, Ca.registerComponent("MouseVolumeLevelDisplay", Dl);
var Pl = class extends yl {
  constructor(e8, t3) {
    super(e8, t3), this.on("slideractive", (e9) => this.updateLastVolume_(e9)), this.on(e8, "volumechange", (e9) => this.updateARIAAttributes(e9)), e8.ready(() => this.updateARIAAttributes());
  }
  createEl() {
    return super.createEl("div", { className: "vjs-volume-bar vjs-slider-bar" }, { "aria-label": this.localize("Volume Level"), "aria-live": "polite" });
  }
  handleMouseDown(e8) {
    Ir(e8) && super.handleMouseDown(e8);
  }
  handleMouseMove(e8) {
    const t3 = this.getChild("mouseVolumeLevelDisplay");
    if (t3) {
      const i6 = this.el(), s6 = vr(i6), n5 = this.vertical();
      let r4 = Tr(i6, e8);
      r4 = n5 ? r4.y : r4.x, r4 = gl(r4, 0, 1), t3.update(s6, r4, n5);
    }
    Ir(e8) && (this.checkMuted(), this.player_.volume(this.calculateDistance(e8)));
  }
  checkMuted() {
    this.player_.muted() && this.player_.muted(false);
  }
  getPercent() {
    return this.player_.muted() ? 0 : this.player_.volume();
  }
  stepForward() {
    this.checkMuted(), this.player_.volume(this.player_.volume() + 0.1);
  }
  stepBack() {
    this.checkMuted(), this.player_.volume(this.player_.volume() - 0.1);
  }
  updateARIAAttributes(e8) {
    const t3 = this.player_.muted() ? 0 : this.volumeAsPercentage_();
    this.el_.setAttribute("aria-valuenow", t3), this.el_.setAttribute("aria-valuetext", t3 + "%");
  }
  volumeAsPercentage_() {
    return Math.round(100 * this.player_.volume());
  }
  updateLastVolume_() {
    const e8 = this.player_.volume();
    this.one("sliderinactive", () => {
      0 === this.player_.volume() && this.player_.lastVolume_(e8);
    });
  }
};
Pl.prototype.options_ = { children: ["volumeLevel"], barName: "volumeLevel" }, Yn || Ln || Pl.prototype.options_.children.splice(0, 0, "mouseVolumeLevelDisplay"), Pl.prototype.playerEvent = "volumechange", Ca.registerComponent("VolumeBar", Pl);
var Ll = class extends Ca {
  constructor(e8, t3 = {}) {
    t3.vertical = t3.vertical || false, (void 0 === t3.volumeBar || wn(t3.volumeBar)) && (t3.volumeBar = t3.volumeBar || {}, t3.volumeBar.vertical = t3.vertical), super(e8, t3), Il(this, e8), this.throttledHandleMouseMove = sa(ia(this, this.handleMouseMove), ta), this.handleMouseUpHandler_ = (e9) => this.handleMouseUp(e9), this.on("mousedown", (e9) => this.handleMouseDown(e9)), this.on("touchstart", (e9) => this.handleMouseDown(e9)), this.on("mousemove", (e9) => this.handleMouseMove(e9)), this.on(this.volumeBar, ["focus", "slideractive"], () => {
      this.volumeBar.addClass("vjs-slider-active"), this.addClass("vjs-slider-active"), this.trigger("slideractive");
    }), this.on(this.volumeBar, ["blur", "sliderinactive"], () => {
      this.volumeBar.removeClass("vjs-slider-active"), this.removeClass("vjs-slider-active"), this.trigger("sliderinactive");
    });
  }
  createEl() {
    let e8 = "vjs-volume-horizontal";
    return this.options_.vertical && (e8 = "vjs-volume-vertical"), super.createEl("div", { className: `vjs-volume-control vjs-control ${e8}` });
  }
  handleMouseDown(e8) {
    const t3 = this.el_.ownerDocument;
    this.on(t3, "mousemove", this.throttledHandleMouseMove), this.on(t3, "touchmove", this.throttledHandleMouseMove), this.on(t3, "mouseup", this.handleMouseUpHandler_), this.on(t3, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseUp(e8) {
    const t3 = this.el_.ownerDocument;
    this.off(t3, "mousemove", this.throttledHandleMouseMove), this.off(t3, "touchmove", this.throttledHandleMouseMove), this.off(t3, "mouseup", this.handleMouseUpHandler_), this.off(t3, "touchend", this.handleMouseUpHandler_);
  }
  handleMouseMove(e8) {
    this.volumeBar.handleMouseMove(e8);
  }
};
Ll.prototype.options_ = { children: ["volumeBar"] }, Ca.registerComponent("VolumeControl", Ll);
var Ol = function(e8, t3) {
  t3.tech_ && !t3.tech_.featuresMuteControl && e8.addClass("vjs-hidden"), e8.on(t3, "loadstart", function() {
    t3.tech_.featuresMuteControl ? e8.removeClass("vjs-hidden") : e8.addClass("vjs-hidden");
  });
};
var Nl = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), Ol(this, e8), this.on(e8, ["loadstart", "volumechange"], (e9) => this.update(e9));
  }
  buildCSSClass() {
    return `vjs-mute-control ${super.buildCSSClass()}`;
  }
  handleClick(e8) {
    const t3 = this.player_.volume(), i6 = this.player_.lastVolume_();
    if (0 === t3) {
      const e9 = i6 < 0.1 ? 0.1 : i6;
      this.player_.volume(e9), this.player_.muted(false);
    } else this.player_.muted(!this.player_.muted());
  }
  update(e8) {
    this.updateIcon_(), this.updateControlText_();
  }
  updateIcon_() {
    const e8 = this.player_.volume();
    let t3 = 3;
    this.setIcon("volume-high"), Yn && this.player_.tech_ && this.player_.tech_.el_ && this.player_.muted(this.player_.tech_.el_.muted), 0 === e8 || this.player_.muted() ? (this.setIcon("volume-mute"), t3 = 0) : e8 < 0.33 ? (this.setIcon("volume-low"), t3 = 1) : e8 < 0.67 && (this.setIcon("volume-medium"), t3 = 2), ur(this.el_, [0, 1, 2, 3].reduce((e9, t4) => e9 + `${t4 ? " " : ""}vjs-vol-${t4}`, "")), hr(this.el_, `vjs-vol-${t3}`);
  }
  updateControlText_() {
    const e8 = this.player_.muted() || 0 === this.player_.volume() ? "Unmute" : "Mute";
    this.controlText() !== e8 && this.controlText(e8);
  }
};
Nl.prototype.controlText_ = "Mute", Ca.registerComponent("MuteToggle", Nl);
var Rl = class extends Ca {
  constructor(e8, t3 = {}) {
    void 0 !== t3.inline ? t3.inline = t3.inline : t3.inline = true, (void 0 === t3.volumeControl || wn(t3.volumeControl)) && (t3.volumeControl = t3.volumeControl || {}, t3.volumeControl.vertical = !t3.inline), super(e8, t3), this.handleKeyPressHandler_ = (e9) => this.handleKeyPress(e9), this.on(e8, ["loadstart"], (e9) => this.volumePanelState_(e9)), this.on(this.muteToggle, "keyup", (e9) => this.handleKeyPress(e9)), this.on(this.volumeControl, "keyup", (e9) => this.handleVolumeControlKeyUp(e9)), this.on("keydown", (e9) => this.handleKeyPress(e9)), this.on("mouseover", (e9) => this.handleMouseOver(e9)), this.on("mouseout", (e9) => this.handleMouseOut(e9)), this.on(this.volumeControl, ["slideractive"], this.sliderActive_), this.on(this.volumeControl, ["sliderinactive"], this.sliderInactive_);
  }
  sliderActive_() {
    this.addClass("vjs-slider-active");
  }
  sliderInactive_() {
    this.removeClass("vjs-slider-active");
  }
  volumePanelState_() {
    this.volumeControl.hasClass("vjs-hidden") && this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-hidden"), this.volumeControl.hasClass("vjs-hidden") && !this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-mute-toggle-only");
  }
  createEl() {
    let e8 = "vjs-volume-panel-horizontal";
    return this.options_.inline || (e8 = "vjs-volume-panel-vertical"), super.createEl("div", { className: `vjs-volume-panel vjs-control ${e8}` });
  }
  dispose() {
    this.handleMouseOut(), super.dispose();
  }
  handleVolumeControlKeyUp(e8) {
    "Escape" === e8.key && this.muteToggle.focus();
  }
  handleMouseOver(e8) {
    this.addClass("vjs-hover"), Kr(ae, "keyup", this.handleKeyPressHandler_);
  }
  handleMouseOut(e8) {
    this.removeClass("vjs-hover"), Yr(ae, "keyup", this.handleKeyPressHandler_);
  }
  handleKeyPress(e8) {
    "Escape" === e8.key && this.handleMouseOut();
  }
};
Rl.prototype.options_ = { children: ["muteToggle", "volumeControl"] }, Ca.registerComponent("VolumePanel", Rl);
var Ml = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.validOptions = [5, 10, 30], this.skipTime = this.getSkipForwardTime(), this.skipTime && this.validOptions.includes(this.skipTime) ? (this.setIcon(`forward-${this.skipTime}`), this.controlText(this.localize("Skip forward {1} seconds", [this.skipTime.toLocaleString(e8.language())])), this.show()) : this.hide();
  }
  getSkipForwardTime() {
    const e8 = this.options_.playerOptions;
    return e8.controlBar && e8.controlBar.skipButtons && e8.controlBar.skipButtons.forward;
  }
  buildCSSClass() {
    return `vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`;
  }
  handleClick(e8) {
    if (isNaN(this.player_.duration())) return;
    const t3 = this.player_.currentTime(), i6 = this.player_.liveTracker, s6 = i6 && i6.isLive() ? i6.seekableEnd() : this.player_.duration();
    let n5;
    n5 = t3 + this.skipTime <= s6 ? t3 + this.skipTime : s6, this.player_.currentTime(n5);
  }
  handleLanguagechange() {
    this.controlText(this.localize("Skip forward {1} seconds", [this.skipTime]));
  }
};
Ml.prototype.controlText_ = "Skip Forward", Ca.registerComponent("SkipForward", Ml);
var Ul = class extends nl {
  constructor(e8, t3) {
    super(e8, t3), this.validOptions = [5, 10, 30], this.skipTime = this.getSkipBackwardTime(), this.skipTime && this.validOptions.includes(this.skipTime) ? (this.setIcon(`replay-${this.skipTime}`), this.controlText(this.localize("Skip backward {1} seconds", [this.skipTime.toLocaleString(e8.language())])), this.show()) : this.hide();
  }
  getSkipBackwardTime() {
    const e8 = this.options_.playerOptions;
    return e8.controlBar && e8.controlBar.skipButtons && e8.controlBar.skipButtons.backward;
  }
  buildCSSClass() {
    return `vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`;
  }
  handleClick(e8) {
    const t3 = this.player_.currentTime(), i6 = this.player_.liveTracker, s6 = i6 && i6.isLive() && i6.seekableStart();
    let n5;
    n5 = s6 && t3 - this.skipTime <= s6 ? s6 : t3 >= this.skipTime ? t3 - this.skipTime : 0, this.player_.currentTime(n5);
  }
  handleLanguagechange() {
    this.controlText(this.localize("Skip backward {1} seconds", [this.skipTime]));
  }
};
Ul.prototype.controlText_ = "Skip Backward", Ca.registerComponent("SkipBackward", Ul);
var Bl = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), t3 && (this.menuButton_ = t3.menuButton), this.focusedChild_ = -1, this.on("keydown", (e9) => this.handleKeyDown(e9)), this.boundHandleBlur_ = (e9) => this.handleBlur(e9), this.boundHandleTapClick_ = (e9) => this.handleTapClick(e9);
  }
  addEventListenerForItem(e8) {
    e8 instanceof Ca && (this.on(e8, "blur", this.boundHandleBlur_), this.on(e8, ["tap", "click"], this.boundHandleTapClick_));
  }
  removeEventListenerForItem(e8) {
    e8 instanceof Ca && (this.off(e8, "blur", this.boundHandleBlur_), this.off(e8, ["tap", "click"], this.boundHandleTapClick_));
  }
  removeChild(e8) {
    "string" == typeof e8 && (e8 = this.getChild(e8)), this.removeEventListenerForItem(e8), super.removeChild(e8);
  }
  addItem(e8) {
    const t3 = this.addChild(e8);
    t3 && this.addEventListenerForItem(t3);
  }
  createEl() {
    const e8 = this.options_.contentElType || "ul";
    this.contentEl_ = rr(e8, { className: "vjs-menu-content" }), this.contentEl_.setAttribute("role", "menu");
    const t3 = super.createEl("div", { append: this.contentEl_, className: "vjs-menu" });
    return t3.appendChild(this.contentEl_), Kr(t3, "click", function(e9) {
      e9.preventDefault(), e9.stopImmediatePropagation();
    }), t3;
  }
  dispose() {
    this.contentEl_ = null, this.boundHandleBlur_ = null, this.boundHandleTapClick_ = null, super.dispose();
  }
  handleBlur(e8) {
    const t3 = e8.relatedTarget || ae.activeElement;
    if (!this.children().some((e9) => e9.el() === t3)) {
      const e9 = this.menuButton_;
      e9 && e9.buttonPressed_ && t3 !== e9.el().firstChild && e9.unpressButton();
    }
  }
  handleTapClick(e8) {
    if (this.menuButton_) {
      this.menuButton_.unpressButton();
      const t3 = this.children();
      if (!Array.isArray(t3)) return;
      const i6 = t3.filter((t4) => t4.el() === e8.target)[0];
      if (!i6) return;
      "CaptionSettingsMenuItem" !== i6.name() && this.menuButton_.focus();
    }
  }
  handleKeyDown(e8) {
    "ArrowLeft" === e8.key || "ArrowDown" === e8.key ? (e8.preventDefault(), e8.stopPropagation(), this.stepForward()) : "ArrowRight" !== e8.key && "ArrowUp" !== e8.key || (e8.preventDefault(), e8.stopPropagation(), this.stepBack());
  }
  stepForward() {
    let e8 = 0;
    void 0 !== this.focusedChild_ && (e8 = this.focusedChild_ + 1), this.focus(e8);
  }
  stepBack() {
    let e8 = 0;
    void 0 !== this.focusedChild_ && (e8 = this.focusedChild_ - 1), this.focus(e8);
  }
  focus(e8 = 0) {
    const t3 = this.children().slice();
    t3.length && t3[0].hasClass("vjs-menu-title") && t3.shift(), t3.length > 0 && (e8 < 0 ? e8 = 0 : e8 >= t3.length && (e8 = t3.length - 1), this.focusedChild_ = e8, t3[e8].el_.focus());
  }
};
Ca.registerComponent("Menu", Bl);
var Fl = class extends Ca {
  constructor(e8, t3 = {}) {
    super(e8, t3), this.menuButton_ = new nl(e8, t3), this.menuButton_.controlText(this.controlText_), this.menuButton_.el_.setAttribute("aria-haspopup", "true");
    const i6 = nl.prototype.buildCSSClass();
    this.menuButton_.el_.className = this.buildCSSClass() + " " + i6, this.menuButton_.removeClass("vjs-control"), this.addChild(this.menuButton_), this.update(), this.enabled_ = true;
    const s6 = (e9) => this.handleClick(e9);
    this.handleMenuKeyUp_ = (e9) => this.handleMenuKeyUp(e9), this.on(this.menuButton_, "tap", s6), this.on(this.menuButton_, "click", s6), this.on(this.menuButton_, "keydown", (e9) => this.handleKeyDown(e9)), this.on(this.menuButton_, "mouseenter", () => {
      this.addClass("vjs-hover"), this.menu.show(), Kr(ae, "keyup", this.handleMenuKeyUp_);
    }), this.on("mouseleave", (e9) => this.handleMouseLeave(e9)), this.on("keydown", (e9) => this.handleSubmenuKeyDown(e9));
  }
  update() {
    const e8 = this.createMenu();
    this.menu && (this.menu.dispose(), this.removeChild(this.menu)), this.menu = e8, this.addChild(e8), this.buttonPressed_ = false, this.menuButton_.el_.setAttribute("aria-expanded", "false"), this.items && this.items.length <= this.hideThreshold_ ? (this.hide(), this.menu.contentEl_.removeAttribute("role")) : (this.show(), this.menu.contentEl_.setAttribute("role", "menu"));
  }
  createMenu() {
    const e8 = new Bl(this.player_, { menuButton: this });
    if (this.hideThreshold_ = 0, this.options_.title) {
      const t3 = rr("li", { className: "vjs-menu-title", textContent: Sa(this.options_.title), tabIndex: -1 }), i6 = new Ca(this.player_, { el: t3 });
      e8.addItem(i6);
    }
    if (this.items = this.createItems(), this.items) for (let t3 = 0; t3 < this.items.length; t3++) e8.addItem(this.items[t3]);
    return e8;
  }
  createItems() {
  }
  createEl() {
    return super.createEl("div", { className: this.buildWrapperCSSClass() }, {});
  }
  setIcon(e8) {
    super.setIcon(e8, this.menuButton_.el_);
  }
  buildWrapperCSSClass() {
    let e8 = "vjs-menu-button";
    true === this.options_.inline ? e8 += "-inline" : e8 += "-popup";
    return `vjs-menu-button ${e8} ${nl.prototype.buildCSSClass()} ${super.buildCSSClass()}`;
  }
  buildCSSClass() {
    let e8 = "vjs-menu-button";
    return true === this.options_.inline ? e8 += "-inline" : e8 += "-popup", `vjs-menu-button ${e8} ${super.buildCSSClass()}`;
  }
  controlText(e8, t3 = this.menuButton_.el()) {
    return this.menuButton_.controlText(e8, t3);
  }
  dispose() {
    this.handleMouseLeave(), super.dispose();
  }
  handleClick(e8) {
    this.buttonPressed_ ? this.unpressButton() : this.pressButton();
  }
  handleMouseLeave(e8) {
    this.removeClass("vjs-hover"), Yr(ae, "keyup", this.handleMenuKeyUp_);
  }
  focus() {
    this.menuButton_.focus();
  }
  blur() {
    this.menuButton_.blur();
  }
  handleKeyDown(e8) {
    "Escape" === e8.key || "Tab" === e8.key ? (this.buttonPressed_ && this.unpressButton(), "Tab" === !e8.key && (e8.preventDefault(), this.menuButton_.focus())) : "Up" !== e8.key && ("Down" !== e8.key || this.player_.options_.playerOptions.spatialNavigation && this.player_.options_.playerOptions.spatialNavigation.enabled) || this.buttonPressed_ || (e8.preventDefault(), this.pressButton());
  }
  handleMenuKeyUp(e8) {
    "Escape" !== e8.key && "Tab" !== e8.key || this.removeClass("vjs-hover");
  }
  handleSubmenuKeyPress(e8) {
    this.handleSubmenuKeyDown(e8);
  }
  handleSubmenuKeyDown(e8) {
    "Escape" !== e8.key && "Tab" !== e8.key || (this.buttonPressed_ && this.unpressButton(), "Tab" === !e8.key && (e8.preventDefault(), this.menuButton_.focus()));
  }
  pressButton() {
    if (this.enabled_) {
      if (this.buttonPressed_ = true, this.menu.show(), this.menu.lockShowing(), this.menuButton_.el_.setAttribute("aria-expanded", "true"), Yn && sr()) return;
      this.menu.focus();
    }
  }
  unpressButton() {
    this.enabled_ && (this.buttonPressed_ = false, this.menu.unlockShowing(), this.menu.hide(), this.menuButton_.el_.setAttribute("aria-expanded", "false"));
  }
  disable() {
    this.unpressButton(), this.enabled_ = false, this.addClass("vjs-disabled"), this.menuButton_.disable();
  }
  enable() {
    this.enabled_ = true, this.removeClass("vjs-disabled"), this.menuButton_.enable();
  }
};
Ca.registerComponent("MenuButton", Fl);
var ql = class extends Fl {
  constructor(e8, t3) {
    const i6 = t3.tracks;
    if (super(e8, t3), this.items.length <= 1 && this.hide(), !i6) return;
    const s6 = ia(this, this.update);
    i6.addEventListener("removetrack", s6), i6.addEventListener("addtrack", s6), i6.addEventListener("labelchange", s6), this.player_.on("ready", s6), this.player_.on("dispose", function() {
      i6.removeEventListener("removetrack", s6), i6.removeEventListener("addtrack", s6), i6.removeEventListener("labelchange", s6);
    });
  }
};
Ca.registerComponent("TrackButton", ql);
var jl = class extends Xo {
  constructor(e8, t3) {
    super(e8, t3), this.selectable = t3.selectable, this.isSelected_ = t3.selected || false, this.multiSelectable = t3.multiSelectable, this.selected(this.isSelected_), this.selectable ? this.multiSelectable ? this.el_.setAttribute("role", "menuitemcheckbox") : this.el_.setAttribute("role", "menuitemradio") : this.el_.setAttribute("role", "menuitem");
  }
  createEl(e8, t3, i6) {
    this.nonIconControl = true;
    const s6 = super.createEl("li", Object.assign({ className: "vjs-menu-item", tabIndex: -1 }, t3), i6), n5 = rr("span", { className: "vjs-menu-item-text", textContent: this.localize(this.options_.label) });
    return this.player_.options_.experimentalSvgIcons ? s6.appendChild(n5) : s6.replaceChild(n5, s6.querySelector(".vjs-icon-placeholder")), s6;
  }
  handleKeyDown(e8) {
    ["Tab", "Escape", "ArrowUp", "ArrowLeft", "ArrowRight", "ArrowDown"].includes(e8.key) || super.handleKeyDown(e8);
  }
  handleClick(e8) {
    this.selected(true);
  }
  selected(e8) {
    this.selectable && (e8 ? (this.addClass("vjs-selected"), this.el_.setAttribute("aria-checked", "true"), this.controlText(", selected"), this.isSelected_ = true) : (this.removeClass("vjs-selected"), this.el_.setAttribute("aria-checked", "false"), this.controlText(""), this.isSelected_ = false));
  }
};
Ca.registerComponent("MenuItem", jl);
var $l = class extends jl {
  constructor(e8, t3) {
    const i6 = t3.track, s6 = e8.textTracks();
    t3.label = i6.label || i6.language || "Unknown", t3.selected = "showing" === i6.mode, super(e8, t3), this.track = i6, this.kinds = (t3.kinds || [t3.kind || this.track.kind]).filter(Boolean);
    const n5 = (...e9) => {
      this.handleTracksChange.apply(this, e9);
    }, r4 = (...e9) => {
      this.handleSelectedLanguageChange.apply(this, e9);
    };
    if (e8.on(["loadstart", "texttrackchange"], n5), s6.addEventListener("change", n5), s6.addEventListener("selectedlanguagechange", r4), this.on("dispose", function() {
      e8.off(["loadstart", "texttrackchange"], n5), s6.removeEventListener("change", n5), s6.removeEventListener("selectedlanguagechange", r4);
    }), void 0 === s6.onchange) {
      let e9;
      this.on(["tap", "click"], function() {
        if ("object" != typeof b4.Event) try {
          e9 = new b4.Event("change");
        } catch (t4) {
        }
        e9 || (e9 = ae.createEvent("Event"), e9.initEvent("change", true, true)), s6.dispatchEvent(e9);
      });
    }
    this.handleTracksChange();
  }
  handleClick(e8) {
    const t3 = this.track, i6 = this.player_.textTracks();
    if (super.handleClick(e8), i6) for (let s6 = 0; s6 < i6.length; s6++) {
      const e9 = i6[s6];
      -1 !== this.kinds.indexOf(e9.kind) && (e9 === t3 ? "showing" !== e9.mode && (e9.mode = "showing") : "disabled" !== e9.mode && (e9.mode = "disabled"));
    }
  }
  handleTracksChange(e8) {
    const t3 = "showing" === this.track.mode;
    t3 !== this.isSelected_ && this.selected(t3);
  }
  handleSelectedLanguageChange(e8) {
    if ("showing" === this.track.mode) {
      const e9 = this.player_.cache_.selectedLanguage;
      if (e9 && e9.enabled && e9.language === this.track.language && e9.kind !== this.track.kind) return;
      this.player_.cache_.selectedLanguage = { enabled: true, language: this.track.language, kind: this.track.kind };
    }
  }
  dispose() {
    this.track = null, super.dispose();
  }
};
Ca.registerComponent("TextTrackMenuItem", $l);
var Hl = class extends $l {
  constructor(e8, t3) {
    t3.track = { player: e8, kind: t3.kind, kinds: t3.kinds, default: false, mode: "disabled" }, t3.kinds || (t3.kinds = [t3.kind]), t3.label ? t3.track.label = t3.label : t3.track.label = t3.kinds.join(" and ") + " off", t3.selectable = true, t3.multiSelectable = false, super(e8, t3);
  }
  handleTracksChange(e8) {
    const t3 = this.player().textTracks();
    let i6 = true;
    for (let s6 = 0, n5 = t3.length; s6 < n5; s6++) {
      const e9 = t3[s6];
      if (this.options_.kinds.indexOf(e9.kind) > -1 && "showing" === e9.mode) {
        i6 = false;
        break;
      }
    }
    i6 !== this.isSelected_ && this.selected(i6);
  }
  handleSelectedLanguageChange(e8) {
    const t3 = this.player().textTracks();
    let i6 = true;
    for (let s6 = 0, n5 = t3.length; s6 < n5; s6++) {
      const e9 = t3[s6];
      if (["captions", "descriptions", "subtitles"].indexOf(e9.kind) > -1 && "showing" === e9.mode) {
        i6 = false;
        break;
      }
    }
    i6 && (this.player_.cache_.selectedLanguage = { enabled: false });
  }
  handleLanguagechange() {
    this.$(".vjs-menu-item-text").textContent = this.player_.localize(this.options_.label), super.handleLanguagechange();
  }
};
Ca.registerComponent("OffTextTrackMenuItem", Hl);
var Vl = class extends ql {
  constructor(e8, t3 = {}) {
    t3.tracks = e8.textTracks(), super(e8, t3);
  }
  createItems(e8 = [], t3 = $l) {
    let i6;
    this.label_ && (i6 = `${this.label_} off`), e8.push(new Hl(this.player_, { kinds: this.kinds_, kind: this.kind_, label: i6 })), this.hideThreshold_ += 1;
    const s6 = this.player_.textTracks();
    Array.isArray(this.kinds_) || (this.kinds_ = [this.kind_]);
    for (let n5 = 0; n5 < s6.length; n5++) {
      const i7 = s6[n5];
      if (this.kinds_.indexOf(i7.kind) > -1) {
        const s7 = new t3(this.player_, { track: i7, kinds: this.kinds_, kind: this.kind_, selectable: true, multiSelectable: false });
        s7.addClass(`vjs-${i7.kind}-menu-item`), e8.push(s7);
      }
    }
    return e8;
  }
};
Ca.registerComponent("TextTrackButton", Vl);
var zl = class extends jl {
  constructor(e8, t3) {
    const i6 = t3.track, s6 = t3.cue, n5 = e8.currentTime();
    t3.selectable = true, t3.multiSelectable = false, t3.label = s6.text, t3.selected = s6.startTime <= n5 && n5 < s6.endTime, super(e8, t3), this.track = i6, this.cue = s6;
  }
  handleClick(e8) {
    super.handleClick(), this.player_.currentTime(this.cue.startTime);
  }
};
Ca.registerComponent("ChaptersTrackMenuItem", zl);
var Wl = class extends Vl {
  constructor(e8, t3, i6) {
    super(e8, t3, i6), this.setIcon("chapters"), this.selectCurrentItem_ = () => {
      this.items.forEach((e9) => {
        e9.selected(this.track_.activeCues[0] === e9.cue);
      });
    };
  }
  buildCSSClass() {
    return `vjs-chapters-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-chapters-button ${super.buildWrapperCSSClass()}`;
  }
  update(e8) {
    if (e8 && e8.track && "chapters" !== e8.track.kind) return;
    const t3 = this.findChaptersTrack();
    t3 !== this.track_ ? (this.setTrack(t3), super.update()) : (!this.items || t3 && t3.cues && t3.cues.length !== this.items.length) && super.update();
  }
  setTrack(e8) {
    if (this.track_ !== e8) {
      if (this.updateHandler_ || (this.updateHandler_ = this.update.bind(this)), this.track_) {
        const e9 = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
        e9 && e9.removeEventListener("load", this.updateHandler_), this.track_.removeEventListener("cuechange", this.selectCurrentItem_), this.track_ = null;
      }
      if (this.track_ = e8, this.track_) {
        this.track_.mode = "hidden";
        const e9 = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
        e9 && e9.addEventListener("load", this.updateHandler_), this.track_.addEventListener("cuechange", this.selectCurrentItem_);
      }
    }
  }
  findChaptersTrack() {
    const e8 = this.player_.textTracks() || [];
    for (let t3 = e8.length - 1; t3 >= 0; t3--) {
      const i6 = e8[t3];
      if (i6.kind === this.kind_) return i6;
    }
  }
  getMenuCaption() {
    return this.track_ && this.track_.label ? this.track_.label : this.localize(Sa(this.kind_));
  }
  createMenu() {
    return this.options_.title = this.getMenuCaption(), super.createMenu();
  }
  createItems() {
    const e8 = [];
    if (!this.track_) return e8;
    const t3 = this.track_.cues;
    if (!t3) return e8;
    for (let i6 = 0, s6 = t3.length; i6 < s6; i6++) {
      const s7 = t3[i6], n5 = new zl(this.player_, { track: this.track_, cue: s7 });
      e8.push(n5);
    }
    return e8;
  }
};
Wl.prototype.kind_ = "chapters", Wl.prototype.controlText_ = "Chapters", Ca.registerComponent("ChaptersButton", Wl);
var Gl = class extends Vl {
  constructor(e8, t3, i6) {
    super(e8, t3, i6), this.setIcon("audio-description");
    const s6 = e8.textTracks(), n5 = ia(this, this.handleTracksChange);
    s6.addEventListener("change", n5), this.on("dispose", function() {
      s6.removeEventListener("change", n5);
    });
  }
  handleTracksChange(e8) {
    const t3 = this.player().textTracks();
    let i6 = false;
    for (let s6 = 0, n5 = t3.length; s6 < n5; s6++) {
      const e9 = t3[s6];
      if (e9.kind !== this.kind_ && "showing" === e9.mode) {
        i6 = true;
        break;
      }
    }
    i6 ? this.disable() : this.enable();
  }
  buildCSSClass() {
    return `vjs-descriptions-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-descriptions-button ${super.buildWrapperCSSClass()}`;
  }
};
Gl.prototype.kind_ = "descriptions", Gl.prototype.controlText_ = "Descriptions", Ca.registerComponent("DescriptionsButton", Gl);
var Xl = class extends Vl {
  constructor(e8, t3, i6) {
    super(e8, t3, i6), this.setIcon("subtitles");
  }
  buildCSSClass() {
    return `vjs-subtitles-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-subtitles-button ${super.buildWrapperCSSClass()}`;
  }
};
Xl.prototype.kind_ = "subtitles", Xl.prototype.controlText_ = "Subtitles", Ca.registerComponent("SubtitlesButton", Xl);
var Kl = class extends $l {
  constructor(e8, t3) {
    t3.track = { player: e8, kind: t3.kind, label: t3.kind + " settings", selectable: false, default: false, mode: "disabled" }, t3.selectable = false, t3.name = "CaptionSettingsMenuItem", super(e8, t3), this.addClass("vjs-texttrack-settings"), this.controlText(", opens " + t3.kind + " settings dialog");
  }
  handleClick(e8) {
    this.player().getChild("textTrackSettings").open();
  }
  handleLanguagechange() {
    this.$(".vjs-menu-item-text").textContent = this.player_.localize(this.options_.kind + " settings"), super.handleLanguagechange();
  }
};
Ca.registerComponent("CaptionSettingsMenuItem", Kl);
var Yl = class extends Vl {
  constructor(e8, t3, i6) {
    super(e8, t3, i6), this.setIcon("captions");
  }
  buildCSSClass() {
    return `vjs-captions-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-captions-button ${super.buildWrapperCSSClass()}`;
  }
  createItems() {
    const e8 = [];
    return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (e8.push(new Kl(this.player_, { kind: this.kind_ })), this.hideThreshold_ += 1), super.createItems(e8);
  }
};
Yl.prototype.kind_ = "captions", Yl.prototype.controlText_ = "Captions", Ca.registerComponent("CaptionsButton", Yl);
var Ql = class extends $l {
  createEl(e8, t3, i6) {
    const s6 = super.createEl(e8, t3, i6), n5 = s6.querySelector(".vjs-menu-item-text");
    return "captions" === this.options_.track.kind && (this.player_.options_.experimentalSvgIcons ? this.setIcon("captions", s6) : n5.appendChild(rr("span", { className: "vjs-icon-placeholder" }, { "aria-hidden": true })), n5.appendChild(rr("span", { className: "vjs-control-text", textContent: ` ${this.localize("Captions")}` }))), s6;
  }
};
Ca.registerComponent("SubsCapsMenuItem", Ql);
var Jl = class extends Vl {
  constructor(e8, t3 = {}) {
    super(e8, t3), this.label_ = "subtitles", this.setIcon("subtitles"), ["en", "en-us", "en-ca", "fr-ca"].indexOf(this.player_.language_) > -1 && (this.label_ = "captions", this.setIcon("captions")), this.menuButton_.controlText(Sa(this.label_));
  }
  buildCSSClass() {
    return `vjs-subs-caps-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-subs-caps-button ${super.buildWrapperCSSClass()}`;
  }
  createItems() {
    let e8 = [];
    return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (e8.push(new Kl(this.player_, { kind: this.label_ })), this.hideThreshold_ += 1), e8 = super.createItems(e8, Ql), e8;
  }
};
Jl.prototype.kinds_ = ["captions", "subtitles"], Jl.prototype.controlText_ = "Subtitles", Ca.registerComponent("SubsCapsButton", Jl);
var Zl = class extends jl {
  constructor(e8, t3) {
    const i6 = t3.track, s6 = e8.audioTracks();
    t3.label = i6.label || i6.language || "Unknown", t3.selected = i6.enabled, super(e8, t3), this.track = i6, this.addClass(`vjs-${i6.kind}-menu-item`);
    const n5 = (...e9) => {
      this.handleTracksChange.apply(this, e9);
    };
    s6.addEventListener("change", n5), this.on("dispose", () => {
      s6.removeEventListener("change", n5);
    });
  }
  createEl(e8, t3, i6) {
    const s6 = super.createEl(e8, t3, i6), n5 = s6.querySelector(".vjs-menu-item-text");
    return ["main-desc", "descriptions"].indexOf(this.options_.track.kind) >= 0 && (n5.appendChild(rr("span", { className: "vjs-icon-placeholder" }, { "aria-hidden": true })), n5.appendChild(rr("span", { className: "vjs-control-text", textContent: " " + this.localize("Descriptions") }))), s6;
  }
  handleClick(e8) {
    if (super.handleClick(e8), this.track.enabled = true, this.player_.tech_.featuresNativeAudioTracks) {
      const e9 = this.player_.audioTracks();
      for (let t3 = 0; t3 < e9.length; t3++) {
        const i6 = e9[t3];
        i6 !== this.track && (i6.enabled = i6 === this.track);
      }
    }
  }
  handleTracksChange(e8) {
    this.selected(this.track.enabled);
  }
};
Ca.registerComponent("AudioTrackMenuItem", Zl);
var eh = class extends ql {
  constructor(e8, t3 = {}) {
    t3.tracks = e8.audioTracks(), super(e8, t3), this.setIcon("audio");
  }
  buildCSSClass() {
    return `vjs-audio-button ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-audio-button ${super.buildWrapperCSSClass()}`;
  }
  createItems(e8 = []) {
    this.hideThreshold_ = 1;
    const t3 = this.player_.audioTracks();
    for (let i6 = 0; i6 < t3.length; i6++) {
      const s6 = t3[i6];
      e8.push(new Zl(this.player_, { track: s6, selectable: true, multiSelectable: false }));
    }
    return e8;
  }
};
eh.prototype.controlText_ = "Audio Track", Ca.registerComponent("AudioTrackButton", eh);
var th = class extends jl {
  constructor(e8, t3) {
    const i6 = t3.rate, s6 = parseFloat(i6, 10);
    t3.label = i6, t3.selected = s6 === e8.playbackRate(), t3.selectable = true, t3.multiSelectable = false, super(e8, t3), this.label = i6, this.rate = s6, this.on(e8, "ratechange", (e9) => this.update(e9));
  }
  handleClick(e8) {
    super.handleClick(), this.player().playbackRate(this.rate);
  }
  update(e8) {
    this.selected(this.player().playbackRate() === this.rate);
  }
};
th.prototype.contentElType = "button", Ca.registerComponent("PlaybackRateMenuItem", th);
var ih = class extends Fl {
  constructor(e8, t3) {
    super(e8, t3), this.menuButton_.el_.setAttribute("aria-describedby", this.labelElId_), this.updateVisibility(), this.updateLabel(), this.on(e8, "loadstart", (e9) => this.updateVisibility(e9)), this.on(e8, "ratechange", (e9) => this.updateLabel(e9)), this.on(e8, "playbackrateschange", (e9) => this.handlePlaybackRateschange(e9));
  }
  createEl() {
    const e8 = super.createEl();
    return this.labelElId_ = "vjs-playback-rate-value-label-" + this.id_, this.labelEl_ = rr("div", { className: "vjs-playback-rate-value", id: this.labelElId_, textContent: "1x" }), e8.appendChild(this.labelEl_), e8;
  }
  dispose() {
    this.labelEl_ = null, super.dispose();
  }
  buildCSSClass() {
    return `vjs-playback-rate ${super.buildCSSClass()}`;
  }
  buildWrapperCSSClass() {
    return `vjs-playback-rate ${super.buildWrapperCSSClass()}`;
  }
  createItems() {
    const e8 = this.playbackRates(), t3 = [];
    for (let i6 = e8.length - 1; i6 >= 0; i6--) t3.push(new th(this.player(), { rate: e8[i6] + "x" }));
    return t3;
  }
  handlePlaybackRateschange(e8) {
    this.update();
  }
  playbackRates() {
    const e8 = this.player();
    return e8.playbackRates && e8.playbackRates() || [];
  }
  playbackRateSupported() {
    return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;
  }
  updateVisibility(e8) {
    this.playbackRateSupported() ? this.removeClass("vjs-hidden") : this.addClass("vjs-hidden");
  }
  updateLabel(e8) {
    this.playbackRateSupported() && (this.labelEl_.textContent = this.player().playbackRate() + "x");
  }
};
ih.prototype.controlText_ = "Playback Rate", Ca.registerComponent("PlaybackRateMenuButton", ih);
var sh = class extends Ca {
  buildCSSClass() {
    return `vjs-spacer ${super.buildCSSClass()}`;
  }
  createEl(e8 = "div", t3 = {}, i6 = {}) {
    return t3.className || (t3.className = this.buildCSSClass()), super.createEl(e8, t3, i6);
  }
};
Ca.registerComponent("Spacer", sh);
var nh = class extends sh {
  buildCSSClass() {
    return `vjs-custom-control-spacer ${super.buildCSSClass()}`;
  }
  createEl() {
    return super.createEl("div", { className: this.buildCSSClass(), textContent: "" });
  }
};
Ca.registerComponent("CustomControlSpacer", nh);
var rh = class extends Ca {
  createEl() {
    return super.createEl("div", { className: "vjs-control-bar", dir: "ltr" });
  }
};
rh.prototype.options_ = { children: ["playToggle", "skipBackward", "skipForward", "volumePanel", "currentTimeDisplay", "timeDivider", "durationDisplay", "progressControl", "liveDisplay", "seekToLive", "remainingTimeDisplay", "customControlSpacer", "playbackRateMenuButton", "chaptersButton", "descriptionsButton", "subsCapsButton", "audioTrackButton", "pictureInPictureToggle", "fullscreenToggle"] }, Ca.registerComponent("ControlBar", rh);
var ah = class extends Ha {
  constructor(e8, t3) {
    super(e8, t3), this.on(e8, "error", (e9) => {
      this.open(e9);
    });
  }
  buildCSSClass() {
    return `vjs-error-display ${super.buildCSSClass()}`;
  }
  content() {
    const e8 = this.player().error();
    return e8 ? this.localize(e8.message) : "";
  }
};
ah.prototype.options_ = Object.assign({}, Ha.prototype.options_, { pauseOnOpen: false, fillAlways: true, temporary: false, uncloseable: true }), Ca.registerComponent("ErrorDisplay", ah);
var oh = class extends Ca {
  constructor(e8, t3 = {}) {
    super(e8, t3), this.el_.setAttribute("aria-labelledby", this.selectLabelledbyIds);
  }
  createEl() {
    this.selectLabelledbyIds = [this.options_.legendId, this.options_.labelId].join(" ").trim();
    return rr("select", { id: this.options_.id }, {}, this.options_.SelectOptions.map((e8) => {
      const t3 = (this.options_.labelId ? this.options_.labelId : `vjs-track-option-${Hr()}`) + "-" + e8[1].replace(/\W+/g, ""), i6 = rr("option", { id: t3, value: this.localize(e8[0]), textContent: this.localize(e8[1]) });
      return i6.setAttribute("aria-labelledby", `${this.selectLabelledbyIds} ${t3}`), i6;
    }));
  }
};
Ca.registerComponent("TextTrackSelect", oh);
var lh = class extends Ca {
  constructor(e8, t3 = {}) {
    super(e8, t3);
    const i6 = rr("legend", { textContent: this.localize(this.options_.legendText), id: this.options_.legendId });
    this.el().appendChild(i6);
    const s6 = this.options_.selects;
    for (const n5 of s6) {
      const t4 = this.options_.selectConfigs[n5], i7 = t4.className, s7 = t4.id.replace("%s", this.options_.id_);
      let r4 = null;
      const a6 = `vjs_select_${Hr()}`;
      if ("colors" === this.options_.type) {
        r4 = rr("span", { className: i7 });
        const e9 = rr("label", { id: s7, className: "vjs-label", textContent: this.localize(t4.label) });
        e9.setAttribute("for", a6), r4.appendChild(e9);
      }
      const o4 = new oh(e8, { SelectOptions: t4.options, legendId: this.options_.legendId, id: a6, labelId: s7 });
      this.addChild(o4), "colors" === this.options_.type && (r4.appendChild(o4.el()), this.el().appendChild(r4));
    }
  }
  createEl() {
    return rr("fieldset", { className: this.options_.className });
  }
};
Ca.registerComponent("TextTrackFieldset", lh);
var hh = class extends Ca {
  constructor(e8, t3 = {}) {
    super(e8, t3);
    const i6 = this.options_.textTrackComponentid, s6 = new lh(e8, { id_: i6, legendId: `captions-text-legend-${i6}`, legendText: this.localize("Text"), className: "vjs-fg vjs-track-setting", selects: this.options_.fieldSets[0], selectConfigs: this.options_.selectConfigs, type: "colors" });
    this.addChild(s6);
    const n5 = new lh(e8, { id_: i6, legendId: `captions-background-${i6}`, legendText: this.localize("Text Background"), className: "vjs-bg vjs-track-setting", selects: this.options_.fieldSets[1], selectConfigs: this.options_.selectConfigs, type: "colors" });
    this.addChild(n5);
    const r4 = new lh(e8, { id_: i6, legendId: `captions-window-${i6}`, legendText: this.localize("Caption Area Background"), className: "vjs-window vjs-track-setting", selects: this.options_.fieldSets[2], selectConfigs: this.options_.selectConfigs, type: "colors" });
    this.addChild(r4);
  }
  createEl() {
    return rr("div", { className: "vjs-track-settings-colors" });
  }
};
Ca.registerComponent("TextTrackSettingsColors", hh);
var uh = class extends Ca {
  constructor(e8, t3 = {}) {
    super(e8, t3);
    const i6 = this.options_.textTrackComponentid, s6 = new lh(e8, { id_: i6, legendId: `captions-font-size-${i6}`, legendText: "Font Size", className: "vjs-font-percent vjs-track-setting", selects: this.options_.fieldSets[0], selectConfigs: this.options_.selectConfigs, type: "font" });
    this.addChild(s6);
    const n5 = new lh(e8, { id_: i6, legendId: `captions-edge-style-${i6}`, legendText: this.localize("Text Edge Style"), className: "vjs-edge-style vjs-track-setting", selects: this.options_.fieldSets[1], selectConfigs: this.options_.selectConfigs, type: "font" });
    this.addChild(n5);
    const r4 = new lh(e8, { id_: i6, legendId: `captions-font-family-${i6}`, legendText: this.localize("Font Family"), className: "vjs-font-family vjs-track-setting", selects: this.options_.fieldSets[2], selectConfigs: this.options_.selectConfigs, type: "font" });
    this.addChild(r4);
  }
  createEl() {
    return rr("div", { className: "vjs-track-settings-font" });
  }
};
Ca.registerComponent("TextTrackSettingsFont", uh);
var dh = class extends Ca {
  constructor(e8, t3 = {}) {
    super(e8, t3);
    const i6 = this.localize("restore all settings to the default values"), s6 = new nl(e8, { controlText: i6, className: "vjs-default-button" });
    s6.el().classList.remove("vjs-control", "vjs-button"), s6.el().textContent = this.localize("Reset"), this.addChild(s6);
    const n5 = new nl(e8, { controlText: i6, className: "vjs-done-button" });
    n5.el().classList.remove("vjs-control", "vjs-button"), n5.el().textContent = this.localize("Done"), this.addChild(n5);
  }
  createEl() {
    return rr("div", { className: "vjs-track-settings-controls" });
  }
};
Ca.registerComponent("TrackSettingsControls", dh);
var ch = "vjs-text-track-settings";
var ph = ["#000", "Black"];
var mh = ["#00F", "Blue"];
var gh = ["#0FF", "Cyan"];
var fh = ["#0F0", "Green"];
var yh = ["#F0F", "Magenta"];
var _h = ["#F00", "Red"];
var vh = ["#FFF", "White"];
var bh = ["#FF0", "Yellow"];
var Th = ["1", "Opaque"];
var Sh = ["0.5", "Semi-Transparent"];
var Eh = ["0", "Transparent"];
var wh = { backgroundColor: { selector: ".vjs-bg-color > select", id: "captions-background-color-%s", label: "Color", options: [ph, vh, _h, fh, mh, bh, yh, gh], className: "vjs-bg-color" }, backgroundOpacity: { selector: ".vjs-bg-opacity > select", id: "captions-background-opacity-%s", label: "Opacity", options: [Th, Sh, Eh], className: "vjs-bg-opacity vjs-opacity" }, color: { selector: ".vjs-text-color > select", id: "captions-foreground-color-%s", label: "Color", options: [vh, ph, _h, fh, mh, bh, yh, gh], className: "vjs-text-color" }, edgeStyle: { selector: ".vjs-edge-style > select", id: "", label: "Text Edge Style", options: [["none", "None"], ["raised", "Raised"], ["depressed", "Depressed"], ["uniform", "Uniform"], ["dropshadow", "Drop shadow"]] }, fontFamily: { selector: ".vjs-font-family > select", id: "", label: "Font Family", options: [["proportionalSansSerif", "Proportional Sans-Serif"], ["monospaceSansSerif", "Monospace Sans-Serif"], ["proportionalSerif", "Proportional Serif"], ["monospaceSerif", "Monospace Serif"], ["casual", "Casual"], ["script", "Script"], ["small-caps", "Small Caps"]] }, fontPercent: { selector: ".vjs-font-percent > select", id: "", label: "Font Size", options: [["0.50", "50%"], ["0.75", "75%"], ["1.00", "100%"], ["1.25", "125%"], ["1.50", "150%"], ["1.75", "175%"], ["2.00", "200%"], ["3.00", "300%"], ["4.00", "400%"]], default: 2, parser: (e8) => "1.00" === e8 ? null : Number(e8) }, textOpacity: { selector: ".vjs-text-opacity > select", id: "captions-foreground-opacity-%s", label: "Opacity", options: [Th, Sh], className: "vjs-text-opacity vjs-opacity" }, windowColor: { selector: ".vjs-window-color > select", id: "captions-window-color-%s", label: "Color", className: "vjs-window-color" }, windowOpacity: { selector: ".vjs-window-opacity > select", id: "captions-window-opacity-%s", label: "Opacity", options: [Eh, Sh, Th], className: "vjs-window-opacity vjs-opacity" } };
function Ch(e8, t3) {
  if (t3 && (e8 = t3(e8)), e8 && "none" !== e8) return e8;
}
function kh(e8, t3) {
  return Ch(e8.options[e8.options.selectedIndex].value, t3);
}
function Ih(e8, t3, i6) {
  if (t3) {
    for (let s6 = 0; s6 < e8.options.length; s6++) if (Ch(e8.options[s6].value, i6) === t3) {
      e8.selectedIndex = s6;
      break;
    }
  }
}
wh.windowColor.options = wh.backgroundColor.options;
var xh = class extends Ha {
  constructor(e8, t3) {
    t3.temporary = false, super(e8, t3), this.updateDisplay = this.updateDisplay.bind(this), this.fill(), this.hasBeenOpened_ = this.hasBeenFilled_ = true, this.renderModalComponents(e8), this.endDialog = rr("p", { className: "vjs-control-text", textContent: this.localize("End of dialog window.") }), this.el().appendChild(this.endDialog), this.setDefaults(), void 0 === t3.persistTextTrackSettings && (this.options_.persistTextTrackSettings = this.options_.playerOptions.persistTextTrackSettings), this.bindFunctionsToSelectsAndButtons(), this.options_.persistTextTrackSettings && this.restoreSettings();
  }
  renderModalComponents(e8) {
    const t3 = new hh(e8, { textTrackComponentid: this.id_, selectConfigs: wh, fieldSets: [["color", "textOpacity"], ["backgroundColor", "backgroundOpacity"], ["windowColor", "windowOpacity"]] });
    this.addChild(t3);
    const i6 = new uh(e8, { textTrackComponentid: this.id_, selectConfigs: wh, fieldSets: [["fontPercent"], ["edgeStyle"], ["fontFamily"]] });
    this.addChild(i6);
    const s6 = new dh(e8);
    this.addChild(s6);
  }
  bindFunctionsToSelectsAndButtons() {
    this.on(this.$(".vjs-done-button"), ["click", "tap"], () => {
      this.saveSettings(), this.close();
    }), this.on(this.$(".vjs-default-button"), ["click", "tap"], () => {
      this.setDefaults(), this.updateDisplay();
    }), Tn(wh, (e8) => {
      this.on(this.$(e8.selector), "change", this.updateDisplay);
    });
  }
  dispose() {
    this.endDialog = null, super.dispose();
  }
  label() {
    return this.localize("Caption Settings Dialog");
  }
  description() {
    return this.localize("Beginning of dialog window. Escape will cancel and close the window.");
  }
  buildCSSClass() {
    return super.buildCSSClass() + " vjs-text-track-settings";
  }
  getValues() {
    return Sn(wh, (e8, t3, i6) => {
      const s6 = kh(this.$(t3.selector), t3.parser);
      return void 0 !== s6 && (e8[i6] = s6), e8;
    }, {});
  }
  setValues(e8) {
    Tn(wh, (t3, i6) => {
      Ih(this.$(t3.selector), e8[i6], t3.parser);
    });
  }
  setDefaults() {
    Tn(wh, (e8) => {
      const t3 = e8.hasOwnProperty("default") ? e8.default : 0;
      this.$(e8.selector).selectedIndex = t3;
    });
  }
  restoreSettings() {
    let e8;
    try {
      e8 = JSON.parse(b4.localStorage.getItem(ch));
    } catch (t3) {
      yn.warn(t3);
    }
    e8 && this.setValues(e8);
  }
  saveSettings() {
    if (!this.options_.persistTextTrackSettings) return;
    const e8 = this.getValues();
    try {
      Object.keys(e8).length ? b4.localStorage.setItem(ch, JSON.stringify(e8)) : b4.localStorage.removeItem(ch);
    } catch (t3) {
      yn.warn(t3);
    }
  }
  updateDisplay() {
    const e8 = this.player_.getChild("textTrackDisplay");
    e8 && e8.updateDisplay();
  }
  handleLanguagechange() {
    this.fill(), this.renderModalComponents(this.player_), this.bindFunctionsToSelectsAndButtons();
  }
};
Ca.registerComponent("TextTrackSettings", xh);
var Ah = class extends Ca {
  constructor(e8, t3) {
    let i6 = t3.ResizeObserver || b4.ResizeObserver;
    null === t3.ResizeObserver && (i6 = false);
    super(e8, Cn({ createEl: !i6, reportTouchActivity: false }, t3)), this.ResizeObserver = t3.ResizeObserver || b4.ResizeObserver, this.loadListener_ = null, this.resizeObserver_ = null, this.debouncedHandler_ = na(() => {
      this.resizeHandler();
    }, 100, false, this), i6 ? (this.resizeObserver_ = new this.ResizeObserver(this.debouncedHandler_), this.resizeObserver_.observe(e8.el())) : (this.loadListener_ = () => {
      if (!this.el_ || !this.el_.contentWindow) return;
      const e9 = this.debouncedHandler_;
      let t4 = this.unloadListener_ = function() {
        Yr(this, "resize", e9), Yr(this, "unload", t4), t4 = null;
      };
      Kr(this.el_.contentWindow, "unload", t4), Kr(this.el_.contentWindow, "resize", e9);
    }, this.one("load", this.loadListener_));
  }
  createEl() {
    return super.createEl("iframe", { className: "vjs-resize-manager", tabIndex: -1, title: this.localize("No content") }, { "aria-hidden": "true" });
  }
  resizeHandler() {
    this.player_ && this.player_.trigger && this.player_.trigger("playerresize");
  }
  dispose() {
    this.debouncedHandler_ && this.debouncedHandler_.cancel(), this.resizeObserver_ && (this.player_.el() && this.resizeObserver_.unobserve(this.player_.el()), this.resizeObserver_.disconnect()), this.loadListener_ && this.off("load", this.loadListener_), this.el_ && this.el_.contentWindow && this.unloadListener_ && this.unloadListener_.call(this.el_.contentWindow), this.ResizeObserver = null, this.resizeObserver = null, this.debouncedHandler_ = null, this.loadListener_ = null, super.dispose();
  }
};
Ca.registerComponent("ResizeManager", Ah);
var Dh = { trackingThreshold: 20, liveTolerance: 15 };
var Ph = class extends Ca {
  constructor(e8, t3) {
    super(e8, Cn(Dh, t3, { createEl: false })), this.trackLiveHandler_ = () => this.trackLive_(), this.handlePlay_ = (e9) => this.handlePlay(e9), this.handleFirstTimeupdate_ = (e9) => this.handleFirstTimeupdate(e9), this.handleSeeked_ = (e9) => this.handleSeeked(e9), this.seekToLiveEdge_ = (e9) => this.seekToLiveEdge(e9), this.reset_(), this.on(this.player_, "durationchange", (e9) => this.handleDurationchange(e9)), this.on(this.player_, "canplay", () => this.toggleTracking());
  }
  trackLive_() {
    const e8 = this.player_.seekable();
    if (!e8 || !e8.length) return;
    const t3 = Number(b4.performance.now().toFixed(4)), i6 = -1 === this.lastTime_ ? 0 : (t3 - this.lastTime_) / 1e3;
    this.lastTime_ = t3, this.pastSeekEnd_ = this.pastSeekEnd() + i6;
    const s6 = this.liveCurrentTime(), n5 = this.player_.currentTime();
    let r4 = this.player_.paused() || this.seekedBehindLive_ || Math.abs(s6 - n5) > this.options_.liveTolerance;
    this.timeupdateSeen_ && s6 !== 1 / 0 || (r4 = false), r4 !== this.behindLiveEdge_ && (this.behindLiveEdge_ = r4, this.trigger("liveedgechange"));
  }
  handleDurationchange() {
    this.toggleTracking();
  }
  toggleTracking() {
    this.player_.duration() === 1 / 0 && this.liveWindow() >= this.options_.trackingThreshold ? (this.player_.options_.liveui && this.player_.addClass("vjs-liveui"), this.startTracking()) : (this.player_.removeClass("vjs-liveui"), this.stopTracking());
  }
  startTracking() {
    this.isTracking() || (this.timeupdateSeen_ || (this.timeupdateSeen_ = this.player_.hasStarted()), this.trackingInterval_ = this.setInterval(this.trackLiveHandler_, ta), this.trackLive_(), this.on(this.player_, ["play", "pause"], this.trackLiveHandler_), this.timeupdateSeen_ ? this.on(this.player_, "seeked", this.handleSeeked_) : (this.one(this.player_, "play", this.handlePlay_), this.one(this.player_, "timeupdate", this.handleFirstTimeupdate_)));
  }
  handleFirstTimeupdate() {
    this.timeupdateSeen_ = true, this.on(this.player_, "seeked", this.handleSeeked_);
  }
  handleSeeked() {
    const e8 = Math.abs(this.liveCurrentTime() - this.player_.currentTime());
    this.seekedBehindLive_ = this.nextSeekedFromUser_ && e8 > 2, this.nextSeekedFromUser_ = false, this.trackLive_();
  }
  handlePlay() {
    this.one(this.player_, "timeupdate", this.seekToLiveEdge_);
  }
  reset_() {
    this.lastTime_ = -1, this.pastSeekEnd_ = 0, this.lastSeekEnd_ = -1, this.behindLiveEdge_ = true, this.timeupdateSeen_ = false, this.seekedBehindLive_ = false, this.nextSeekedFromUser_ = false, this.clearInterval(this.trackingInterval_), this.trackingInterval_ = null, this.off(this.player_, ["play", "pause"], this.trackLiveHandler_), this.off(this.player_, "seeked", this.handleSeeked_), this.off(this.player_, "play", this.handlePlay_), this.off(this.player_, "timeupdate", this.handleFirstTimeupdate_), this.off(this.player_, "timeupdate", this.seekToLiveEdge_);
  }
  nextSeekedFromUser() {
    this.nextSeekedFromUser_ = true;
  }
  stopTracking() {
    this.isTracking() && (this.reset_(), this.trigger("liveedgechange"));
  }
  seekableEnd() {
    const e8 = this.player_.seekable(), t3 = [];
    let i6 = e8 ? e8.length : 0;
    for (; i6--; ) t3.push(e8.end(i6));
    return t3.length ? t3.sort()[t3.length - 1] : 1 / 0;
  }
  seekableStart() {
    const e8 = this.player_.seekable(), t3 = [];
    let i6 = e8 ? e8.length : 0;
    for (; i6--; ) t3.push(e8.start(i6));
    return t3.length ? t3.sort()[0] : 0;
  }
  liveWindow() {
    const e8 = this.liveCurrentTime();
    return e8 === 1 / 0 ? 0 : e8 - this.seekableStart();
  }
  isLive() {
    return this.isTracking();
  }
  atLiveEdge() {
    return !this.behindLiveEdge();
  }
  liveCurrentTime() {
    return this.pastSeekEnd() + this.seekableEnd();
  }
  pastSeekEnd() {
    const e8 = this.seekableEnd();
    return -1 !== this.lastSeekEnd_ && e8 !== this.lastSeekEnd_ && (this.pastSeekEnd_ = 0), this.lastSeekEnd_ = e8, this.pastSeekEnd_;
  }
  behindLiveEdge() {
    return this.behindLiveEdge_;
  }
  isTracking() {
    return "number" == typeof this.trackingInterval_;
  }
  seekToLiveEdge() {
    this.seekedBehindLive_ = false, this.atLiveEdge() || (this.nextSeekedFromUser_ = false, this.player_.currentTime(this.liveCurrentTime()));
  }
  dispose() {
    this.stopTracking(), super.dispose();
  }
};
Ca.registerComponent("LiveTracker", Ph);
var Lh = class extends Ca {
  constructor(e8, t3) {
    super(e8, t3), this.on("statechanged", (e9) => this.updateDom_()), this.updateDom_();
  }
  createEl() {
    return this.els = { title: rr("div", { className: "vjs-title-bar-title", id: `vjs-title-bar-title-${Hr()}` }), description: rr("div", { className: "vjs-title-bar-description", id: `vjs-title-bar-description-${Hr()}` }) }, rr("div", { className: "vjs-title-bar" }, {}, kn(this.els));
  }
  updateDom_() {
    const e8 = this.player_.tech_, t3 = e8 && e8.el_, i6 = { title: "aria-labelledby", description: "aria-describedby" };
    ["title", "description"].forEach((e9) => {
      const s6 = this.state[e9], n5 = this.els[e9], r4 = i6[e9];
      Er(n5), s6 && ar(n5, s6), t3 && (t3.removeAttribute(r4), s6 && t3.setAttribute(r4, n5.id));
    }), this.state.title || this.state.description ? this.show() : this.hide();
  }
  update(e8) {
    this.setState(e8);
  }
  dispose() {
    const e8 = this.player_.tech_, t3 = e8 && e8.el_;
    t3 && (t3.removeAttribute("aria-labelledby"), t3.removeAttribute("aria-describedby")), super.dispose(), this.els = null;
  }
};
Ca.registerComponent("TitleBar", Lh);
var Oh = { initialDisplay: 4e3, position: [], takeFocus: false };
var Nh = class extends nl {
  constructor(e8, t3) {
    super(e8, t3 = Cn(Oh, t3)), this.controlText(t3.controlText), this.hide(), this.on(this.player_, ["useractive", "userinactive"], (e9) => {
      this.removeClass("force-display");
    });
  }
  buildCSSClass() {
    return `vjs-transient-button focus-visible ${this.options_.position.map((e8) => `vjs-${e8}`).join(" ")}`;
  }
  createEl() {
    const e8 = rr("button", {}, { type: "button", class: this.buildCSSClass() }, rr("span"));
    return this.controlTextEl_ = e8.querySelector("span"), e8;
  }
  show() {
    super.show(), this.addClass("force-display"), this.options_.takeFocus && this.el().focus({ preventScroll: true }), this.forceDisplayTimeout = this.player_.setTimeout(() => {
      this.removeClass("force-display");
    }, this.options_.initialDisplay);
  }
  hide() {
    this.removeClass("force-display"), super.hide();
  }
  dispose() {
    this.player_.clearTimeout(this.forceDisplayTimeout), super.dispose();
  }
};
Ca.registerComponent("TransientButton", Nh);
var Rh = (e8) => {
  const t3 = e8.el();
  if (t3.hasAttribute("src")) return e8.triggerSourceset(t3.src), true;
  const i6 = e8.$$("source"), s6 = [];
  let n5 = "";
  if (!i6.length) return false;
  for (let r4 = 0; r4 < i6.length; r4++) {
    const e9 = i6[r4].src;
    e9 && -1 === s6.indexOf(e9) && s6.push(e9);
  }
  return !!s6.length && (1 === s6.length && (n5 = s6[0]), e8.triggerSourceset(n5), true);
};
var Mh = Object.defineProperty({}, "innerHTML", { get() {
  return this.cloneNode(true).innerHTML;
}, set(e8) {
  const t3 = ae.createElement(this.nodeName.toLowerCase());
  t3.innerHTML = e8;
  const i6 = ae.createDocumentFragment();
  for (; t3.childNodes.length; ) i6.appendChild(t3.childNodes[0]);
  return this.innerText = "", b4.Element.prototype.appendChild.call(this, i6), this.innerHTML;
} });
var Uh = (e8, t3) => {
  let i6 = {};
  for (let s6 = 0; s6 < e8.length && (i6 = Object.getOwnPropertyDescriptor(e8[s6], t3), !(i6 && i6.set && i6.get)); s6++) ;
  return i6.enumerable = true, i6.configurable = true, i6;
};
var Bh = (e8) => Uh([e8.el(), b4.HTMLMediaElement.prototype, b4.Element.prototype, Mh], "innerHTML");
var Fh = function(e8) {
  const t3 = e8.el();
  if (t3.resetSourceWatch_) return;
  const i6 = {}, s6 = Bh(e8), n5 = (i7) => (...s7) => {
    const n6 = i7.apply(t3, s7);
    return Rh(e8), n6;
  };
  ["append", "appendChild", "insertAdjacentHTML"].forEach((e9) => {
    t3[e9] && (i6[e9] = t3[e9], t3[e9] = n5(i6[e9]));
  }), Object.defineProperty(t3, "innerHTML", Cn(s6, { set: n5(s6.set) })), t3.resetSourceWatch_ = () => {
    t3.resetSourceWatch_ = null, Object.keys(i6).forEach((e9) => {
      t3[e9] = i6[e9];
    }), Object.defineProperty(t3, "innerHTML", s6);
  }, e8.one("sourceset", t3.resetSourceWatch_);
};
var qh = Object.defineProperty({}, "src", { get() {
  return this.hasAttribute("src") ? no(b4.Element.prototype.getAttribute.call(this, "src")) : "";
}, set(e8) {
  return b4.Element.prototype.setAttribute.call(this, "src", e8), e8;
} });
var jh = (e8) => Uh([e8.el(), b4.HTMLMediaElement.prototype, qh], "src");
var $h = function(e8) {
  if (!e8.featuresSourceset) return;
  const t3 = e8.el();
  if (t3.resetSourceset_) return;
  const i6 = jh(e8), s6 = t3.setAttribute, n5 = t3.load;
  Object.defineProperty(t3, "src", Cn(i6, { set: (s7) => {
    const n6 = i6.set.call(t3, s7);
    return e8.triggerSourceset(t3.src), n6;
  } })), t3.setAttribute = (i7, n6) => {
    const r4 = s6.call(t3, i7, n6);
    return /src/i.test(i7) && e8.triggerSourceset(t3.src), r4;
  }, t3.load = () => {
    const i7 = n5.call(t3);
    return Rh(e8) || (e8.triggerSourceset(""), Fh(e8)), i7;
  }, t3.currentSrc ? e8.triggerSourceset(t3.currentSrc) : Rh(e8) || Fh(e8), t3.resetSourceset_ = () => {
    t3.resetSourceset_ = null, t3.load = n5, t3.setAttribute = s6, Object.defineProperty(t3, "src", i6), t3.resetSourceWatch_ && t3.resetSourceWatch_();
  };
};
var Hh = class _Hh extends vo {
  constructor(e8, t3) {
    super(e8, t3);
    const i6 = e8.source;
    let s6 = false;
    if (this.featuresVideoFrameCallback = this.featuresVideoFrameCallback && "VIDEO" === this.el_.tagName, i6 && (this.el_.currentSrc !== i6.src || e8.tag && 3 === e8.tag.initNetworkState_) ? this.setSource(i6) : this.handleLateInit_(this.el_), e8.enableSourceset && this.setupSourcesetHandling_(), this.isScrubbing_ = false, this.el_.hasChildNodes()) {
      const e9 = this.el_.childNodes;
      let t4 = e9.length;
      const i7 = [];
      for (; t4--; ) {
        const n5 = e9[t4];
        "track" === n5.nodeName.toLowerCase() && (this.featuresNativeTextTracks ? (this.remoteTextTrackEls().addTrackElement_(n5), this.remoteTextTracks().addTrack(n5.track), this.textTracks().addTrack(n5.track), s6 || this.el_.hasAttribute("crossorigin") || !ao(n5.src) || (s6 = true)) : i7.push(n5));
      }
      for (let s7 = 0; s7 < i7.length; s7++) this.el_.removeChild(i7[s7]);
    }
    this.proxyNativeTracks_(), this.featuresNativeTextTracks && s6 && yn.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."), this.restoreMetadataTracksInIOSNativePlayer_(), (Xn || Vn) && true === e8.nativeControlsForTouch && this.setControls(true), this.proxyWebkitFullscreen_(), this.triggerReady();
  }
  dispose() {
    this.el_ && this.el_.resetSourceset_ && this.el_.resetSourceset_(), _Hh.disposeMediaElement(this.el_), this.options_ = null, super.dispose();
  }
  setupSourcesetHandling_() {
    $h(this);
  }
  restoreMetadataTracksInIOSNativePlayer_() {
    const e8 = this.textTracks();
    let t3;
    const i6 = () => {
      t3 = [];
      for (let i7 = 0; i7 < e8.length; i7++) {
        const s7 = e8[i7];
        "metadata" === s7.kind && t3.push({ track: s7, storedMode: s7.mode });
      }
    };
    i6(), e8.addEventListener("change", i6), this.on("dispose", () => e8.removeEventListener("change", i6));
    const s6 = () => {
      for (let e9 = 0; e9 < t3.length; e9++) {
        const i7 = t3[e9];
        "disabled" === i7.track.mode && i7.track.mode !== i7.storedMode && (i7.track.mode = i7.storedMode);
      }
      e8.removeEventListener("change", s6);
    };
    this.on("webkitbeginfullscreen", () => {
      e8.removeEventListener("change", i6), e8.removeEventListener("change", s6), e8.addEventListener("change", s6);
    }), this.on("webkitendfullscreen", () => {
      e8.removeEventListener("change", i6), e8.addEventListener("change", i6), e8.removeEventListener("change", s6);
    });
  }
  overrideNative_(e8, t3) {
    if (t3 !== this[`featuresNative${e8}Tracks`]) return;
    const i6 = e8.toLowerCase();
    this[`${i6}TracksListeners_`] && Object.keys(this[`${i6}TracksListeners_`]).forEach((e9) => {
      this.el()[`${i6}Tracks`].removeEventListener(e9, this[`${i6}TracksListeners_`][e9]);
    }), this[`featuresNative${e8}Tracks`] = !t3, this[`${i6}TracksListeners_`] = null, this.proxyNativeTracksForType_(i6);
  }
  overrideNativeAudioTracks(e8) {
    this.overrideNative_("Audio", e8);
  }
  overrideNativeVideoTracks(e8) {
    this.overrideNative_("Video", e8);
  }
  proxyNativeTracksForType_(e8) {
    const t3 = go[e8], i6 = this.el()[t3.getterName], s6 = this[t3.getterName]();
    if (!this[`featuresNative${t3.capitalName}Tracks`] || !i6 || !i6.addEventListener) return;
    const n5 = { change: (t4) => {
      const i7 = { type: "change", target: s6, currentTarget: s6, srcElement: s6 };
      s6.trigger(i7), "text" === e8 && this[fo.remoteText.getterName]().trigger(i7);
    }, addtrack(e9) {
      s6.addTrack(e9.track);
    }, removetrack(e9) {
      s6.removeTrack(e9.track);
    } }, r4 = function() {
      const e9 = [];
      for (let t4 = 0; t4 < s6.length; t4++) {
        let n6 = false;
        for (let e10 = 0; e10 < i6.length; e10++) if (i6[e10] === s6[t4]) {
          n6 = true;
          break;
        }
        n6 || e9.push(s6[t4]);
      }
      for (; e9.length; ) s6.removeTrack(e9.shift());
    };
    this[t3.getterName + "Listeners_"] = n5, Object.keys(n5).forEach((e9) => {
      const t4 = n5[e9];
      i6.addEventListener(e9, t4), this.on("dispose", (s7) => i6.removeEventListener(e9, t4));
    }), this.on("loadstart", r4), this.on("dispose", (e9) => this.off("loadstart", r4));
  }
  proxyNativeTracks_() {
    go.names.forEach((e8) => {
      this.proxyNativeTracksForType_(e8);
    });
  }
  createEl() {
    let e8 = this.options_.tag;
    if (!e8 || !this.options_.playerElIngest && !this.movingMediaElementInDOM) {
      if (e8) {
        const t4 = e8.cloneNode(true);
        e8.parentNode && e8.parentNode.insertBefore(t4, e8), _Hh.disposeMediaElement(e8), e8 = t4;
      } else {
        e8 = ae.createElement("video");
        const t4 = Cn({}, this.options_.tag && pr(this.options_.tag));
        Xn && true === this.options_.nativeControlsForTouch || delete t4.controls, cr(e8, Object.assign(t4, { id: this.options_.techId, class: "vjs-tech" }));
      }
      e8.playerId = this.options_.playerId;
    }
    void 0 !== this.options_.preload && gr(e8, "preload", this.options_.preload), void 0 !== this.options_.disablePictureInPicture && (e8.disablePictureInPicture = this.options_.disablePictureInPicture);
    const t3 = ["loop", "muted", "playsinline", "autoplay"];
    for (let i6 = 0; i6 < t3.length; i6++) {
      const s6 = t3[i6], n5 = this.options_[s6];
      void 0 !== n5 && (n5 ? gr(e8, s6, s6) : fr(e8, s6), e8[s6] = n5);
    }
    return e8;
  }
  handleLateInit_(e8) {
    if (0 === e8.networkState || 3 === e8.networkState) return;
    if (0 === e8.readyState) {
      let e9 = false;
      const t4 = function() {
        e9 = true;
      };
      this.on("loadstart", t4);
      const i6 = function() {
        e9 || this.trigger("loadstart");
      };
      return this.on("loadedmetadata", i6), void this.ready(function() {
        this.off("loadstart", t4), this.off("loadedmetadata", i6), e9 || this.trigger("loadstart");
      });
    }
    const t3 = ["loadstart"];
    t3.push("loadedmetadata"), e8.readyState >= 2 && t3.push("loadeddata"), e8.readyState >= 3 && t3.push("canplay"), e8.readyState >= 4 && t3.push("canplaythrough"), this.ready(function() {
      t3.forEach(function(e9) {
        this.trigger(e9);
      }, this);
    });
  }
  setScrubbing(e8) {
    this.isScrubbing_ = e8;
  }
  scrubbing() {
    return this.isScrubbing_;
  }
  setCurrentTime(e8) {
    try {
      this.isScrubbing_ && this.el_.fastSeek && Qn ? this.el_.fastSeek(e8) : this.el_.currentTime = e8;
    } catch (t3) {
      yn(t3, "Video is not ready. (Video.js)");
    }
  }
  duration() {
    if (this.el_.duration === 1 / 0 && Ln && Mn && 0 === this.el_.currentTime) {
      const e8 = () => {
        this.el_.currentTime > 0 && (this.el_.duration === 1 / 0 && this.trigger("durationchange"), this.off("timeupdate", e8));
      };
      return this.on("timeupdate", e8), NaN;
    }
    return this.el_.duration || NaN;
  }
  width() {
    return this.el_.offsetWidth;
  }
  height() {
    return this.el_.offsetHeight;
  }
  proxyWebkitFullscreen_() {
    if (!("webkitDisplayingFullscreen" in this.el_)) return;
    const e8 = function() {
      this.trigger("fullscreenchange", { isFullscreen: false }), this.el_.controls && !this.options_.nativeControlsForTouch && this.controls() && (this.el_.controls = false);
    }, t3 = function() {
      "webkitPresentationMode" in this.el_ && "picture-in-picture" !== this.el_.webkitPresentationMode && (this.one("webkitendfullscreen", e8), this.trigger("fullscreenchange", { isFullscreen: true, nativeIOSFullscreen: true }));
    };
    this.on("webkitbeginfullscreen", t3), this.on("dispose", () => {
      this.off("webkitbeginfullscreen", t3), this.off("webkitendfullscreen", e8);
    });
  }
  supportsFullScreen() {
    return "function" == typeof this.el_.webkitEnterFullScreen;
  }
  enterFullScreen() {
    const e8 = this.el_;
    if (e8.paused && e8.networkState <= e8.HAVE_METADATA) Fa(this.el_.play()), this.setTimeout(function() {
      e8.pause();
      try {
        e8.webkitEnterFullScreen();
      } catch (t3) {
        this.trigger("fullscreenerror", t3);
      }
    }, 0);
    else try {
      e8.webkitEnterFullScreen();
    } catch (t3) {
      this.trigger("fullscreenerror", t3);
    }
  }
  exitFullScreen() {
    this.el_.webkitDisplayingFullscreen ? this.el_.webkitExitFullScreen() : this.trigger("fullscreenerror", new Error("The video is not fullscreen"));
  }
  requestPictureInPicture() {
    return this.el_.requestPictureInPicture();
  }
  requestVideoFrameCallback(e8) {
    return this.featuresVideoFrameCallback && !this.el_.webkitKeys ? this.el_.requestVideoFrameCallback(e8) : super.requestVideoFrameCallback(e8);
  }
  cancelVideoFrameCallback(e8) {
    this.featuresVideoFrameCallback && !this.el_.webkitKeys ? this.el_.cancelVideoFrameCallback(e8) : super.cancelVideoFrameCallback(e8);
  }
  src(e8) {
    if (void 0 === e8) return this.el_.src;
    this.setSrc(e8);
  }
  addSourceElement(e8, t3) {
    if (!e8) return yn.error("Invalid source URL."), false;
    const i6 = { src: e8 };
    t3 && (i6.type = t3);
    const s6 = rr("source", {}, i6);
    return this.el_.appendChild(s6), true;
  }
  removeSourceElement(e8) {
    if (!e8) return yn.error("Source URL is required to remove the source element."), false;
    const t3 = this.el_.querySelectorAll("source");
    for (const i6 of t3) if (i6.src === e8) return this.el_.removeChild(i6), true;
    return yn.warn(`No matching source element found with src: ${e8}`), false;
  }
  reset() {
    _Hh.resetMediaElement(this.el_);
  }
  currentSrc() {
    return this.currentSource_ ? this.currentSource_.src : this.el_.currentSrc;
  }
  setControls(e8) {
    this.el_.controls = !!e8;
  }
  addTextTrack(e8, t3, i6) {
    return this.featuresNativeTextTracks ? this.el_.addTextTrack(e8, t3, i6) : super.addTextTrack(e8, t3, i6);
  }
  createRemoteTextTrack(e8) {
    if (!this.featuresNativeTextTracks) return super.createRemoteTextTrack(e8);
    const t3 = ae.createElement("track");
    return e8.kind && (t3.kind = e8.kind), e8.label && (t3.label = e8.label), (e8.language || e8.srclang) && (t3.srclang = e8.language || e8.srclang), e8.default && (t3.default = e8.default), e8.id && (t3.id = e8.id), e8.src && (t3.src = e8.src), t3;
  }
  addRemoteTextTrack(e8, t3) {
    const i6 = super.addRemoteTextTrack(e8, t3);
    return this.featuresNativeTextTracks && this.el().appendChild(i6), i6;
  }
  removeRemoteTextTrack(e8) {
    if (super.removeRemoteTextTrack(e8), this.featuresNativeTextTracks) {
      const t3 = this.$$("track");
      let i6 = t3.length;
      for (; i6--; ) e8 !== t3[i6] && e8 !== t3[i6].track || this.el().removeChild(t3[i6]);
    }
  }
  getVideoPlaybackQuality() {
    if ("function" == typeof this.el().getVideoPlaybackQuality) return this.el().getVideoPlaybackQuality();
    const e8 = {};
    return void 0 !== this.el().webkitDroppedFrameCount && void 0 !== this.el().webkitDecodedFrameCount && (e8.droppedVideoFrames = this.el().webkitDroppedFrameCount, e8.totalVideoFrames = this.el().webkitDecodedFrameCount), b4.performance && (e8.creationTime = b4.performance.now()), e8;
  }
};
In(Hh, "TEST_VID", function() {
  if (!tr()) return;
  const e8 = ae.createElement("video"), t3 = ae.createElement("track");
  return t3.kind = "captions", t3.srclang = "en", t3.label = "English", e8.appendChild(t3), e8;
}), Hh.isSupported = function() {
  try {
    Hh.TEST_VID.volume = 0.5;
  } catch (e8) {
    return false;
  }
  return !(!Hh.TEST_VID || !Hh.TEST_VID.canPlayType);
}, Hh.canPlayType = function(e8) {
  return Hh.TEST_VID.canPlayType(e8);
}, Hh.canPlaySource = function(e8, t3) {
  return Hh.canPlayType(e8.type);
}, Hh.canControlVolume = function() {
  try {
    const e8 = Hh.TEST_VID.volume;
    Hh.TEST_VID.volume = e8 / 2 + 0.1;
    const t3 = e8 !== Hh.TEST_VID.volume;
    return t3 && Yn ? (b4.setTimeout(() => {
      Hh && Hh.prototype && (Hh.prototype.featuresVolumeControl = e8 !== Hh.TEST_VID.volume);
    }), false) : t3;
  } catch (e8) {
    return false;
  }
}, Hh.canMuteVolume = function() {
  try {
    const e8 = Hh.TEST_VID.muted;
    return Hh.TEST_VID.muted = !e8, Hh.TEST_VID.muted ? gr(Hh.TEST_VID, "muted", "muted") : fr(Hh.TEST_VID, "muted", "muted"), e8 !== Hh.TEST_VID.muted;
  } catch (e8) {
    return false;
  }
}, Hh.canControlPlaybackRate = function() {
  if (Ln && Mn && Bn < 58) return false;
  try {
    const e8 = Hh.TEST_VID.playbackRate;
    return Hh.TEST_VID.playbackRate = e8 / 2 + 0.1, e8 !== Hh.TEST_VID.playbackRate;
  } catch (e8) {
    return false;
  }
}, Hh.canOverrideAttributes = function() {
  try {
    const e8 = () => {
    };
    Object.defineProperty(ae.createElement("video"), "src", { get: e8, set: e8 }), Object.defineProperty(ae.createElement("audio"), "src", { get: e8, set: e8 }), Object.defineProperty(ae.createElement("video"), "innerHTML", { get: e8, set: e8 }), Object.defineProperty(ae.createElement("audio"), "innerHTML", { get: e8, set: e8 });
  } catch (e8) {
    return false;
  }
  return true;
}, Hh.supportsNativeTextTracks = function() {
  return Qn || Yn && Mn;
}, Hh.supportsNativeVideoTracks = function() {
  return !(!Hh.TEST_VID || !Hh.TEST_VID.videoTracks);
}, Hh.supportsNativeAudioTracks = function() {
  return !(!Hh.TEST_VID || !Hh.TEST_VID.audioTracks);
}, Hh.Events = ["loadstart", "suspend", "abort", "error", "emptied", "stalled", "loadedmetadata", "loadeddata", "canplay", "canplaythrough", "playing", "waiting", "seeking", "seeked", "ended", "durationchange", "timeupdate", "progress", "play", "pause", "ratechange", "resize", "volumechange"], [["featuresMuteControl", "canMuteVolume"], ["featuresPlaybackRate", "canControlPlaybackRate"], ["featuresSourceset", "canOverrideAttributes"], ["featuresNativeTextTracks", "supportsNativeTextTracks"], ["featuresNativeVideoTracks", "supportsNativeVideoTracks"], ["featuresNativeAudioTracks", "supportsNativeAudioTracks"]].forEach(function([e8, t3]) {
  In(Hh.prototype, e8, () => Hh[t3](), true);
}), Hh.prototype.featuresVolumeControl = Hh.canControlVolume(), Hh.prototype.movingMediaElementInDOM = !Yn, Hh.prototype.featuresFullscreenResize = true, Hh.prototype.featuresProgressEvents = true, Hh.prototype.featuresTimeupdateEvents = true, Hh.prototype.featuresVideoFrameCallback = !(!Hh.TEST_VID || !Hh.TEST_VID.requestVideoFrameCallback), Hh.disposeMediaElement = function(e8) {
  if (e8) {
    for (e8.parentNode && e8.parentNode.removeChild(e8); e8.hasChildNodes(); ) e8.removeChild(e8.firstChild);
    e8.removeAttribute("src"), "function" == typeof e8.load && (function() {
      try {
        e8.load();
      } catch (t3) {
      }
    })();
  }
}, Hh.resetMediaElement = function(e8) {
  if (!e8) return;
  const t3 = e8.querySelectorAll("source");
  let i6 = t3.length;
  for (; i6--; ) e8.removeChild(t3[i6]);
  e8.removeAttribute("src"), "function" == typeof e8.load && (function() {
    try {
      e8.load();
    } catch (t4) {
    }
  })();
}, ["muted", "defaultMuted", "autoplay", "controls", "loop", "playsinline"].forEach(function(e8) {
  Hh.prototype[e8] = function() {
    return this.el_[e8] || this.el_.hasAttribute(e8);
  };
}), ["muted", "defaultMuted", "autoplay", "loop", "playsinline"].forEach(function(e8) {
  Hh.prototype["set" + Sa(e8)] = function(t3) {
    this.el_[e8] = t3, t3 ? this.el_.setAttribute(e8, e8) : this.el_.removeAttribute(e8);
  };
}), ["paused", "currentTime", "buffered", "volume", "poster", "preload", "error", "seeking", "seekable", "ended", "playbackRate", "defaultPlaybackRate", "disablePictureInPicture", "played", "networkState", "readyState", "videoWidth", "videoHeight", "crossOrigin"].forEach(function(e8) {
  Hh.prototype[e8] = function() {
    return this.el_[e8];
  };
}), ["volume", "src", "poster", "preload", "playbackRate", "defaultPlaybackRate", "disablePictureInPicture", "crossOrigin"].forEach(function(e8) {
  Hh.prototype["set" + Sa(e8)] = function(t3) {
    this.el_[e8] = t3;
  };
}), ["pause", "load", "play"].forEach(function(e8) {
  Hh.prototype[e8] = function() {
    return this.el_[e8]();
  };
}), vo.withSourceHandlers(Hh), Hh.nativeSourceHandler = {}, Hh.nativeSourceHandler.canPlayType = function(e8) {
  try {
    return Hh.TEST_VID.canPlayType(e8);
  } catch (t3) {
    return "";
  }
}, Hh.nativeSourceHandler.canHandleSource = function(e8, t3) {
  if (e8.type) return Hh.nativeSourceHandler.canPlayType(e8.type);
  if (e8.src) {
    const t4 = ro(e8.src);
    return Hh.nativeSourceHandler.canPlayType(`video/${t4}`);
  }
  return "";
}, Hh.nativeSourceHandler.handleSource = function(e8, t3, i6) {
  t3.setSrc(e8.src);
}, Hh.nativeSourceHandler.dispose = function() {
}, Hh.registerSourceHandler(Hh.nativeSourceHandler), vo.registerTech("Html5", Hh);
var Vh = ["progress", "abort", "suspend", "emptied", "stalled", "loadedmetadata", "loadeddata", "timeupdate", "resize", "volumechange", "texttrackchange"];
var zh = { canplay: "CanPlay", canplaythrough: "CanPlayThrough", playing: "Playing", seeked: "Seeked" };
var Wh = ["tiny", "xsmall", "small", "medium", "large", "xlarge", "huge"];
var Gh = {};
Wh.forEach((e8) => {
  const t3 = "x" === e8.charAt(0) ? `x-${e8.substring(1)}` : e8;
  Gh[e8] = `vjs-layout-${t3}`;
});
var Xh = { tiny: 210, xsmall: 320, small: 425, medium: 768, large: 1440, xlarge: 2560, huge: 1 / 0 };
var Kh = class _Kh extends Ca {
  constructor(e8, t3, i6) {
    if (e8.id = e8.id || t3.id || `vjs_video_${Hr()}`, (t3 = Object.assign(_Kh.getTagSettings(e8), t3)).initChildren = false, t3.createEl = false, t3.evented = false, t3.reportTouchActivity = false, !t3.language) {
      const i7 = e8.closest("[lang]");
      i7 && (t3.language = i7.getAttribute("lang"));
    }
    if (super(null, t3, i6), this.boundDocumentFullscreenChange_ = (e9) => this.documentFullscreenChange_(e9), this.boundFullWindowOnEscKey_ = (e9) => this.fullWindowOnEscKey(e9), this.boundUpdateStyleEl_ = (e9) => this.updateStyleEl_(e9), this.boundApplyInitTime_ = (e9) => this.applyInitTime_(e9), this.boundUpdateCurrentBreakpoint_ = (e9) => this.updateCurrentBreakpoint_(e9), this.boundHandleTechClick_ = (e9) => this.handleTechClick_(e9), this.boundHandleTechDoubleClick_ = (e9) => this.handleTechDoubleClick_(e9), this.boundHandleTechTouchStart_ = (e9) => this.handleTechTouchStart_(e9), this.boundHandleTechTouchMove_ = (e9) => this.handleTechTouchMove_(e9), this.boundHandleTechTouchEnd_ = (e9) => this.handleTechTouchEnd_(e9), this.boundHandleTechTap_ = (e9) => this.handleTechTap_(e9), this.boundUpdatePlayerHeightOnAudioOnlyMode_ = (e9) => this.updatePlayerHeightOnAudioOnlyMode_(e9), this.isFullscreen_ = false, this.log = _n(this.id_), this.fsApi_ = un, this.isPosterFromTech_ = false, this.queuedCallbacks_ = [], this.isReady_ = false, this.hasStarted_ = false, this.userActive_ = false, this.debugEnabled_ = false, this.audioOnlyMode_ = false, this.audioPosterMode_ = false, this.audioOnlyCache_ = { controlBarHeight: null, playerHeight: null, hiddenChildren: [] }, !this.options_ || !this.options_.techOrder || !this.options_.techOrder.length) throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
    if (this.tag = e8, this.tagAttributes = e8 && pr(e8), this.language(this.options_.language), t3.languages) {
      const e9 = {};
      Object.getOwnPropertyNames(t3.languages).forEach(function(i7) {
        e9[i7.toLowerCase()] = t3.languages[i7];
      }), this.languages_ = e9;
    } else this.languages_ = _Kh.prototype.options_.languages;
    this.resetCache_(), this.poster_ = t3.poster || "", this.controls_ = !!t3.controls, e8.controls = false, e8.removeAttribute("controls"), this.changingSrc_ = false, this.playCallbacks_ = [], this.playTerminatedQueue_ = [], e8.hasAttribute("autoplay") ? this.autoplay(true) : this.autoplay(this.options_.autoplay), t3.plugins && Object.keys(t3.plugins).forEach((e9) => {
      if ("function" != typeof this[e9]) throw new Error(`plugin "${e9}" does not exist`);
    }), this.scrubbing_ = false, this.el_ = this.createEl(), _a(this, { eventBusKey: "el_" }), this.fsApi_.requestFullscreen && (Kr(ae, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), this.on(this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_)), this.fluid_ && this.on(["playerreset", "resize"], this.boundUpdateStyleEl_);
    const s6 = Cn(this.options_);
    if (t3.plugins && Object.keys(t3.plugins).forEach((e9) => {
      this[e9](t3.plugins[e9]);
    }), t3.debug && this.debug(true), this.options_.playerOptions = s6, this.middleware_ = [], this.playbackRates(t3.playbackRates), t3.experimentalSvgIcons) {
      const e9 = new b4.DOMParser().parseFromString($o, "image/svg+xml");
      if (e9.querySelector("parsererror")) yn.warn("Failed to load SVG Icons. Falling back to Font Icons."), this.options_.experimentalSvgIcons = null;
      else {
        const t4 = e9.documentElement;
        t4.style.display = "none", this.el_.appendChild(t4), this.addClass("vjs-svg-icons-enabled");
      }
    }
    this.initChildren(), this.isAudio("audio" === e8.nodeName.toLowerCase()), this.controls() ? this.addClass("vjs-controls-enabled") : this.addClass("vjs-controls-disabled"), this.el_.setAttribute("role", "region"), this.isAudio() ? this.el_.setAttribute("aria-label", this.localize("Audio Player")) : this.el_.setAttribute("aria-label", this.localize("Video Player")), this.isAudio() && this.addClass("vjs-audio"), t3.spatialNavigation && t3.spatialNavigation.enabled && (this.spatialNavigation = new Wo(this), this.addClass("vjs-spatial-navigation-enabled")), Xn && this.addClass("vjs-touch-enabled"), Yn || this.addClass("vjs-workinghover"), _Kh.players[this.id_] = this;
    const n5 = nn.split(".")[0];
    this.addClass(`vjs-v${n5}`), this.userActive(true), this.reportUserActivity(), this.one("play", (e9) => this.listenForUserActivity_(e9)), this.on("keydown", (e9) => this.handleKeyDown(e9)), this.on("languagechange", (e9) => this.handleLanguagechange(e9)), this.breakpoints(this.options_.breakpoints), this.responsive(this.options_.responsive), this.on("ready", () => {
      this.audioPosterMode(this.options_.audioPosterMode), this.audioOnlyMode(this.options_.audioOnlyMode);
    });
  }
  dispose() {
    this.trigger("dispose"), this.off("dispose"), Yr(ae, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), Yr(ae, "keydown", this.boundFullWindowOnEscKey_), this.styleEl_ && this.styleEl_.parentNode && (this.styleEl_.parentNode.removeChild(this.styleEl_), this.styleEl_ = null), _Kh.players[this.id_] = null, this.tag && this.tag.player && (this.tag.player = null), this.el_ && this.el_.player && (this.el_.player = null), this.tech_ && (this.tech_.dispose(), this.isPosterFromTech_ = false, this.poster_ = ""), this.playerElIngest_ && (this.playerElIngest_ = null), this.tag && (this.tag = null), No(this), yo.names.forEach((e8) => {
      const t3 = this[yo[e8].getterName]();
      t3 && t3.off && t3.off();
    }), super.dispose({ restoreEl: this.options_.restoreEl });
  }
  createEl() {
    let e8, t3 = this.tag, i6 = this.playerElIngest_ = t3.parentNode && t3.parentNode.hasAttribute && t3.parentNode.hasAttribute("data-vjs-player");
    const s6 = "video-js" === this.tag.tagName.toLowerCase();
    i6 ? e8 = this.el_ = t3.parentNode : s6 || (e8 = this.el_ = super.createEl("div"));
    const n5 = pr(t3);
    if (s6) {
      for (e8 = this.el_ = t3, t3 = this.tag = ae.createElement("video"); e8.children.length; ) t3.appendChild(e8.firstChild);
      lr(e8, "video-js") || hr(e8, "video-js"), e8.appendChild(t3), i6 = this.playerElIngest_ = e8, Object.keys(e8).forEach((i7) => {
        try {
          t3[i7] = e8[i7];
        } catch (s7) {
        }
      });
    }
    t3.setAttribute("tabindex", "-1"), n5.tabindex = "-1", Mn && $n && (t3.setAttribute("role", "application"), n5.role = "application"), t3.removeAttribute("width"), t3.removeAttribute("height"), "width" in n5 && delete n5.width, "height" in n5 && delete n5.height, Object.getOwnPropertyNames(n5).forEach(function(i7) {
      s6 && "class" === i7 || e8.setAttribute(i7, n5[i7]), s6 && t3.setAttribute(i7, n5[i7]);
    }), t3.playerId = t3.id, t3.id += "_html5_api", t3.className = "vjs-tech", t3.player = e8.player = this, this.addClass("vjs-paused");
    const r4 = ["IS_SMART_TV", "IS_TIZEN", "IS_WEBOS", "IS_ANDROID", "IS_IPAD", "IS_IPHONE", "IS_CHROMECAST_RECEIVER"].filter((e9) => Jn[e9]).map((e9) => "vjs-device-" + e9.substring(3).toLowerCase().replace(/\_/g, "-"));
    if (this.addClass(...r4), true !== b4.VIDEOJS_NO_DYNAMIC_STYLE) {
      this.styleEl_ = Br("vjs-styles-dimensions");
      const e9 = xr(".vjs-styles-defaults"), t4 = xr("head");
      t4.insertBefore(this.styleEl_, e9 ? e9.nextSibling : t4.firstChild);
    }
    this.fill_ = false, this.fluid_ = false, this.width(this.options_.width), this.height(this.options_.height), this.fill(this.options_.fill), this.fluid(this.options_.fluid), this.aspectRatio(this.options_.aspectRatio), this.crossOrigin(this.options_.crossOrigin || this.options_.crossorigin);
    const a6 = t3.getElementsByTagName("a");
    for (let o4 = 0; o4 < a6.length; o4++) {
      const e9 = a6.item(o4);
      hr(e9, "vjs-hidden"), e9.setAttribute("hidden", "hidden");
    }
    return t3.initNetworkState_ = t3.networkState, t3.parentNode && !i6 && t3.parentNode.insertBefore(e8, t3), or(t3, e8), this.children_.unshift(t3), this.el_.setAttribute("lang", this.language_), this.el_.setAttribute("translate", "no"), this.el_ = e8, e8;
  }
  crossOrigin(e8) {
    if (void 0 === e8) return this.techGet_("crossOrigin");
    null === e8 || "anonymous" === e8 || "use-credentials" === e8 ? (this.techCall_("setCrossOrigin", e8), this.posterImage && this.posterImage.crossOrigin(e8)) : yn.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e8}"`);
  }
  width(e8) {
    return this.dimension("width", e8);
  }
  height(e8) {
    return this.dimension("height", e8);
  }
  dimension(e8, t3) {
    const i6 = e8 + "_";
    if (void 0 === t3) return this[i6] || 0;
    if ("" === t3 || "auto" === t3) return this[i6] = void 0, void this.updateStyleEl_();
    const s6 = parseFloat(t3);
    isNaN(s6) ? yn.error(`Improper value "${t3}" supplied for for ${e8}`) : (this[i6] = s6, this.updateStyleEl_());
  }
  fluid(e8) {
    if (void 0 === e8) return !!this.fluid_;
    this.fluid_ = !!e8, ha(this) && this.off(["playerreset", "resize"], this.boundUpdateStyleEl_), e8 ? (this.addClass("vjs-fluid"), this.fill(false), ua(this, () => {
      this.on(["playerreset", "resize"], this.boundUpdateStyleEl_);
    })) : this.removeClass("vjs-fluid"), this.updateStyleEl_();
  }
  fill(e8) {
    if (void 0 === e8) return !!this.fill_;
    this.fill_ = !!e8, e8 ? (this.addClass("vjs-fill"), this.fluid(false)) : this.removeClass("vjs-fill");
  }
  aspectRatio(e8) {
    if (void 0 === e8) return this.aspectRatio_;
    if (!/^\d+\:\d+$/.test(e8)) throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
    this.aspectRatio_ = e8, this.fluid(true), this.updateStyleEl_();
  }
  updateStyleEl_() {
    if (true === b4.VIDEOJS_NO_DYNAMIC_STYLE) {
      const e9 = "number" == typeof this.width_ ? this.width_ : this.options_.width, t4 = "number" == typeof this.height_ ? this.height_ : this.options_.height, i7 = this.tech_ && this.tech_.el();
      return void (i7 && (e9 >= 0 && (i7.width = e9), t4 >= 0 && (i7.height = t4)));
    }
    let e8, t3, i6, s6;
    i6 = void 0 !== this.aspectRatio_ && "auto" !== this.aspectRatio_ ? this.aspectRatio_ : this.videoWidth() > 0 ? this.videoWidth() + ":" + this.videoHeight() : "16:9";
    const n5 = i6.split(":"), r4 = n5[1] / n5[0];
    e8 = void 0 !== this.width_ ? this.width_ : void 0 !== this.height_ ? this.height_ / r4 : this.videoWidth() || 300, t3 = void 0 !== this.height_ ? this.height_ : e8 * r4, s6 = /^[^a-zA-Z]/.test(this.id()) ? "dimensions-" + this.id() : this.id() + "-dimensions", this.addClass(s6), Fr(this.styleEl_, `
      .${s6} {
        width: ${e8}px;
        height: ${t3}px;
      }

      .${s6}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${100 * r4}%;
      }
    `);
  }
  loadTech_(e8, t3) {
    this.tech_ && this.unloadTech_();
    const i6 = Sa(e8), s6 = e8.charAt(0).toLowerCase() + e8.slice(1);
    "Html5" !== i6 && this.tag && (vo.getTech("Html5").disposeMediaElement(this.tag), this.tag.player = null, this.tag = null), this.techName_ = i6, this.isReady_ = false;
    let n5 = this.autoplay();
    ("string" == typeof this.autoplay() || true === this.autoplay() && this.options_.normalizeAutoplay) && (n5 = false);
    const r4 = { source: t3, autoplay: n5, nativeControlsForTouch: this.options_.nativeControlsForTouch, playerId: this.id(), techId: `${this.id()}_${s6}_api`, playsinline: this.options_.playsinline, preload: this.options_.preload, loop: this.options_.loop, disablePictureInPicture: this.options_.disablePictureInPicture, muted: this.options_.muted, poster: this.poster(), language: this.language(), playerElIngest: this.playerElIngest_ || false, "vtt.js": this.options_["vtt.js"], canOverridePoster: !!this.options_.techCanOverridePoster, enableSourceset: this.options_.enableSourceset };
    yo.names.forEach((e9) => {
      const t4 = yo[e9];
      r4[t4.getterName] = this[t4.privateName];
    }), Object.assign(r4, this.options_[i6]), Object.assign(r4, this.options_[s6]), Object.assign(r4, this.options_[e8.toLowerCase()]), this.tag && (r4.tag = this.tag), t3 && t3.src === this.cache_.src && this.cache_.currentTime > 0 && (r4.startTime = this.cache_.currentTime);
    const a6 = vo.getTech(e8);
    if (!a6) throw new Error(`No Tech named '${i6}' exists! '${i6}' should be registered using videojs.registerTech()'`);
    this.tech_ = new a6(r4), this.tech_.ready(ia(this, this.handleTechReady_), true), ja.jsonToTextTracks(this.textTracksJson_ || [], this.tech_), Vh.forEach((e9) => {
      this.on(this.tech_, e9, (t4) => this[`handleTech${Sa(e9)}_`](t4));
    }), Object.keys(zh).forEach((e9) => {
      this.on(this.tech_, e9, (t4) => {
        0 === this.tech_.playbackRate() && this.tech_.seeking() ? this.queuedCallbacks_.push({ callback: this[`handleTech${zh[e9]}_`].bind(this), event: t4 }) : this[`handleTech${zh[e9]}_`](t4);
      });
    }), this.on(this.tech_, "loadstart", (e9) => this.handleTechLoadStart_(e9)), this.on(this.tech_, "sourceset", (e9) => this.handleTechSourceset_(e9)), this.on(this.tech_, "waiting", (e9) => this.handleTechWaiting_(e9)), this.on(this.tech_, "ended", (e9) => this.handleTechEnded_(e9)), this.on(this.tech_, "seeking", (e9) => this.handleTechSeeking_(e9)), this.on(this.tech_, "play", (e9) => this.handleTechPlay_(e9)), this.on(this.tech_, "pause", (e9) => this.handleTechPause_(e9)), this.on(this.tech_, "durationchange", (e9) => this.handleTechDurationChange_(e9)), this.on(this.tech_, "fullscreenchange", (e9, t4) => this.handleTechFullscreenChange_(e9, t4)), this.on(this.tech_, "fullscreenerror", (e9, t4) => this.handleTechFullscreenError_(e9, t4)), this.on(this.tech_, "enterpictureinpicture", (e9) => this.handleTechEnterPictureInPicture_(e9)), this.on(this.tech_, "leavepictureinpicture", (e9) => this.handleTechLeavePictureInPicture_(e9)), this.on(this.tech_, "error", (e9) => this.handleTechError_(e9)), this.on(this.tech_, "posterchange", (e9) => this.handleTechPosterChange_(e9)), this.on(this.tech_, "textdata", (e9) => this.handleTechTextData_(e9)), this.on(this.tech_, "ratechange", (e9) => this.handleTechRateChange_(e9)), this.on(this.tech_, "loadedmetadata", this.boundUpdateStyleEl_), this.usingNativeControls(this.techGet_("controls")), this.controls() && !this.usingNativeControls() && this.addTechControlsListeners_(), this.tech_.el().parentNode === this.el() || "Html5" === i6 && this.tag || or(this.tech_.el(), this.el()), this.tag && (this.tag.player = null, this.tag = null);
  }
  unloadTech_() {
    yo.names.forEach((e8) => {
      const t3 = yo[e8];
      this[t3.privateName] = this[t3.getterName]();
    }), this.textTracksJson_ = ja.textTracksToJson(this.tech_), this.isReady_ = false, this.tech_.dispose(), this.tech_ = false, this.isPosterFromTech_ && (this.poster_ = "", this.trigger("posterchange")), this.isPosterFromTech_ = false;
  }
  tech(e8) {
    return void 0 === e8 && yn.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"), this.tech_;
  }
  version() {
    return { "video.js": nn };
  }
  addTechControlsListeners_() {
    this.removeTechControlsListeners_(), this.on(this.tech_, "click", this.boundHandleTechClick_), this.on(this.tech_, "dblclick", this.boundHandleTechDoubleClick_), this.on(this.tech_, "touchstart", this.boundHandleTechTouchStart_), this.on(this.tech_, "touchmove", this.boundHandleTechTouchMove_), this.on(this.tech_, "touchend", this.boundHandleTechTouchEnd_), this.on(this.tech_, "tap", this.boundHandleTechTap_);
  }
  removeTechControlsListeners_() {
    this.off(this.tech_, "tap", this.boundHandleTechTap_), this.off(this.tech_, "touchstart", this.boundHandleTechTouchStart_), this.off(this.tech_, "touchmove", this.boundHandleTechTouchMove_), this.off(this.tech_, "touchend", this.boundHandleTechTouchEnd_), this.off(this.tech_, "click", this.boundHandleTechClick_), this.off(this.tech_, "dblclick", this.boundHandleTechDoubleClick_);
  }
  handleTechReady_() {
    this.triggerReady(), this.cache_.volume && this.techCall_("setVolume", this.cache_.volume), this.handleTechPosterChange_(), this.handleTechDurationChange_();
  }
  handleTechLoadStart_() {
    this.removeClass("vjs-ended", "vjs-seeking"), this.error(null), this.handleTechDurationChange_(), this.paused() ? (this.hasStarted(false), this.trigger("loadstart")) : this.trigger("loadstart"), this.manualAutoplay_(true === this.autoplay() && this.options_.normalizeAutoplay ? "play" : this.autoplay());
  }
  manualAutoplay_(e8) {
    if (!this.tech_ || "string" != typeof e8) return;
    const t3 = () => {
      const e9 = this.muted();
      this.muted(true);
      const t4 = () => {
        this.muted(e9);
      };
      this.playTerminatedQueue_.push(t4);
      const i7 = this.play();
      if (Ba(i7)) return i7.catch((e10) => {
        throw t4(), new Error(`Rejection at manualAutoplay. Restoring muted value. ${e10 || ""}`);
      });
    };
    let i6;
    return "any" !== e8 || this.muted() ? i6 = "muted" !== e8 || this.muted() ? this.play() : t3() : (i6 = this.play(), Ba(i6) && (i6 = i6.catch(t3))), Ba(i6) ? i6.then(() => {
      this.trigger({ type: "autoplay-success", autoplay: e8 });
    }).catch(() => {
      this.trigger({ type: "autoplay-failure", autoplay: e8 });
    }) : void 0;
  }
  updateSourceCaches_(e8 = "") {
    let t3 = e8, i6 = "";
    "string" != typeof t3 && (t3 = e8.src, i6 = e8.type), this.cache_.source = this.cache_.source || {}, this.cache_.sources = this.cache_.sources || [], t3 && !i6 && (i6 = Fo(this, t3)), this.cache_.source = Cn({}, e8, { src: t3, type: i6 });
    const s6 = this.cache_.sources.filter((e9) => e9.src && e9.src === t3), n5 = [], r4 = this.$$("source"), a6 = [];
    for (let o4 = 0; o4 < r4.length; o4++) {
      const e9 = pr(r4[o4]);
      n5.push(e9), e9.src && e9.src === t3 && a6.push(e9.src);
    }
    a6.length && !s6.length ? this.cache_.sources = n5 : s6.length || (this.cache_.sources = [this.cache_.source]), this.cache_.src = t3;
  }
  handleTechSourceset_(e8) {
    if (!this.changingSrc_) {
      let t3 = (e9) => this.updateSourceCaches_(e9);
      const i6 = this.currentSource().src, s6 = e8.src;
      i6 && !/^blob:/.test(i6) && /^blob:/.test(s6) && (!this.lastSource_ || this.lastSource_.tech !== s6 && this.lastSource_.player !== i6) && (t3 = () => {
      }), t3(s6), e8.src || this.tech_.any(["sourceset", "loadstart"], (e9) => {
        if ("sourceset" === e9.type) return;
        const t4 = this.techGet_("currentSrc");
        this.lastSource_.tech = t4, this.updateSourceCaches_(t4);
      });
    }
    this.lastSource_ = { player: this.currentSource().src, tech: e8.src }, this.trigger({ src: e8.src, type: "sourceset" });
  }
  hasStarted(e8) {
    if (void 0 === e8) return this.hasStarted_;
    e8 !== this.hasStarted_ && (this.hasStarted_ = e8, this.hasStarted_ ? this.addClass("vjs-has-started") : this.removeClass("vjs-has-started"));
  }
  handleTechPlay_() {
    this.removeClass("vjs-ended", "vjs-paused"), this.addClass("vjs-playing"), this.hasStarted(true), this.trigger("play");
  }
  handleTechRateChange_() {
    this.tech_.playbackRate() > 0 && 0 === this.cache_.lastPlaybackRate && (this.queuedCallbacks_.forEach((e8) => e8.callback(e8.event)), this.queuedCallbacks_ = []), this.cache_.lastPlaybackRate = this.tech_.playbackRate(), this.trigger("ratechange");
  }
  handleTechWaiting_() {
    this.addClass("vjs-waiting"), this.trigger("waiting");
    const e8 = this.currentTime(), t3 = () => {
      e8 !== this.currentTime() && (this.removeClass("vjs-waiting"), this.off("timeupdate", t3));
    };
    this.on("timeupdate", t3);
  }
  handleTechCanPlay_() {
    this.removeClass("vjs-waiting"), this.trigger("canplay");
  }
  handleTechCanPlayThrough_() {
    this.removeClass("vjs-waiting"), this.trigger("canplaythrough");
  }
  handleTechPlaying_() {
    this.removeClass("vjs-waiting"), this.trigger("playing");
  }
  handleTechSeeking_() {
    this.addClass("vjs-seeking"), this.trigger("seeking");
  }
  handleTechSeeked_() {
    this.removeClass("vjs-seeking", "vjs-ended"), this.trigger("seeked");
  }
  handleTechPause_() {
    this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.trigger("pause");
  }
  handleTechEnded_() {
    this.addClass("vjs-ended"), this.removeClass("vjs-waiting"), this.options_.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause(), this.trigger("ended");
  }
  handleTechDurationChange_() {
    this.duration(this.techGet_("duration"));
  }
  handleTechClick_(e8) {
    this.controls_ && (void 0 !== this.options_ && void 0 !== this.options_.userActions && void 0 !== this.options_.userActions.click && false === this.options_.userActions.click || (void 0 !== this.options_ && void 0 !== this.options_.userActions && "function" == typeof this.options_.userActions.click ? this.options_.userActions.click.call(this, e8) : this.paused() ? Fa(this.play()) : this.pause()));
  }
  handleTechDoubleClick_(e8) {
    if (!this.controls_) return;
    Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"), (t3) => t3.contains(e8.target)) || void 0 !== this.options_ && void 0 !== this.options_.userActions && void 0 !== this.options_.userActions.doubleClick && false === this.options_.userActions.doubleClick || (void 0 !== this.options_ && void 0 !== this.options_.userActions && "function" == typeof this.options_.userActions.doubleClick ? this.options_.userActions.doubleClick.call(this, e8) : this.isInPictureInPicture() && !ae.pictureInPictureElement ? this.exitPictureInPicture() : this.isFullscreen() ? this.exitFullscreen() : this.requestFullscreen());
  }
  handleTechTap_() {
    this.userActive(!this.userActive());
  }
  handleTechTouchStart_() {
    this.userWasActive = this.userActive();
  }
  handleTechTouchMove_() {
    this.userWasActive && this.reportUserActivity();
  }
  handleTechTouchEnd_(e8) {
    e8.cancelable && e8.preventDefault();
  }
  toggleFullscreenClass_() {
    this.isFullscreen() ? this.addClass("vjs-fullscreen") : this.removeClass("vjs-fullscreen");
  }
  documentFullscreenChange_(e8) {
    const t3 = e8.target.player;
    if (t3 && t3 !== this) return;
    const i6 = this.el();
    let s6 = ae[this.fsApi_.fullscreenElement] === i6;
    !s6 && i6.matches && (s6 = i6.matches(":" + this.fsApi_.fullscreen)), this.isFullscreen(s6);
  }
  handleTechFullscreenChange_(e8, t3) {
    t3 && (t3.nativeIOSFullscreen && (this.addClass("vjs-ios-native-fs"), this.tech_.one("webkitendfullscreen", () => {
      this.removeClass("vjs-ios-native-fs");
    })), this.isFullscreen(t3.isFullscreen));
  }
  handleTechFullscreenError_(e8, t3) {
    this.trigger("fullscreenerror", t3);
  }
  togglePictureInPictureClass_() {
    this.isInPictureInPicture() ? this.addClass("vjs-picture-in-picture") : this.removeClass("vjs-picture-in-picture");
  }
  handleTechEnterPictureInPicture_(e8) {
    this.isInPictureInPicture(true);
  }
  handleTechLeavePictureInPicture_(e8) {
    this.isInPictureInPicture(false);
  }
  handleTechError_() {
    const e8 = this.tech_.error();
    e8 && this.error(e8);
  }
  handleTechTextData_() {
    let e8 = null;
    arguments.length > 1 && (e8 = arguments[1]), this.trigger("textdata", e8);
  }
  getCache() {
    return this.cache_;
  }
  resetCache_() {
    this.cache_ = { currentTime: 0, initTime: 0, inactivityTimeout: this.options_.inactivityTimeout, duration: NaN, lastVolume: 1, lastPlaybackRate: this.defaultPlaybackRate(), media: null, src: "", source: {}, sources: [], playbackRates: [], volume: 1 };
  }
  techCall_(e8, t3) {
    this.ready(function() {
      if (e8 in Do) return Io(this.middleware_, this.tech_, e8, t3);
      if (e8 in Po) return xo(this.middleware_, this.tech_, e8, t3);
      try {
        this.tech_ && this.tech_[e8](t3);
      } catch (i6) {
        throw yn(i6), i6;
      }
    }, true);
  }
  techGet_(e8) {
    if (this.tech_ && this.tech_.isReady_) {
      if (e8 in Ao) return ko(this.middleware_, this.tech_, e8);
      if (e8 in Po) return xo(this.middleware_, this.tech_, e8);
      try {
        return this.tech_[e8]();
      } catch (t3) {
        if (void 0 === this.tech_[e8]) throw yn(`Video.js: ${e8} method not defined for ${this.techName_} playback technology.`, t3), t3;
        if ("TypeError" === t3.name) throw yn(`Video.js: ${e8} unavailable on ${this.techName_} playback technology element.`, t3), this.tech_.isReady_ = false, t3;
        throw yn(t3), t3;
      }
    }
  }
  play() {
    return new Promise((e8) => {
      this.play_(e8);
    });
  }
  play_(e8 = Fa) {
    this.playCallbacks_.push(e8);
    const t3 = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc())), i6 = Boolean(Qn || Yn);
    if (this.waitToPlay_ && (this.off(["ready", "loadstart"], this.waitToPlay_), this.waitToPlay_ = null), !this.isReady_ || !t3) return this.waitToPlay_ = (e9) => {
      this.play_();
    }, this.one(["ready", "loadstart"], this.waitToPlay_), void (!t3 && i6 && this.load());
    const s6 = this.techGet_("play");
    i6 && this.hasClass("vjs-ended") && this.resetProgressBar_(), null === s6 ? this.runPlayTerminatedQueue_() : this.runPlayCallbacks_(s6);
  }
  runPlayTerminatedQueue_() {
    const e8 = this.playTerminatedQueue_.slice(0);
    this.playTerminatedQueue_ = [], e8.forEach(function(e9) {
      e9();
    });
  }
  runPlayCallbacks_(e8) {
    const t3 = this.playCallbacks_.slice(0);
    this.playCallbacks_ = [], this.playTerminatedQueue_ = [], t3.forEach(function(t4) {
      t4(e8);
    });
  }
  pause() {
    this.techCall_("pause");
  }
  paused() {
    return false !== this.techGet_("paused");
  }
  played() {
    return this.techGet_("played") || Aa(0, 0);
  }
  scrubbing(e8) {
    if (void 0 === e8) return this.scrubbing_;
    this.scrubbing_ = !!e8, this.techCall_("setScrubbing", this.scrubbing_), e8 ? this.addClass("vjs-scrubbing") : this.removeClass("vjs-scrubbing");
  }
  currentTime(e8) {
    return void 0 === e8 ? (this.cache_.currentTime = this.techGet_("currentTime") || 0, this.cache_.currentTime) : (e8 < 0 && (e8 = 0), this.isReady_ && !this.changingSrc_ && this.tech_ && this.tech_.isReady_ ? (this.techCall_("setCurrentTime", e8), this.cache_.initTime = 0, void (isFinite(e8) && (this.cache_.currentTime = Number(e8)))) : (this.cache_.initTime = e8, this.off("canplay", this.boundApplyInitTime_), void this.one("canplay", this.boundApplyInitTime_)));
  }
  applyInitTime_() {
    this.currentTime(this.cache_.initTime);
  }
  duration(e8) {
    if (void 0 === e8) return void 0 !== this.cache_.duration ? this.cache_.duration : NaN;
    (e8 = parseFloat(e8)) < 0 && (e8 = 1 / 0), e8 !== this.cache_.duration && (this.cache_.duration = e8, e8 === 1 / 0 ? this.addClass("vjs-live") : this.removeClass("vjs-live"), isNaN(e8) || this.trigger("durationchange"));
  }
  remainingTime() {
    return this.duration() - this.currentTime();
  }
  remainingTimeDisplay() {
    return Math.floor(this.duration()) - Math.floor(this.currentTime());
  }
  buffered() {
    let e8 = this.techGet_("buffered");
    return e8 && e8.length || (e8 = Aa(0, 0)), e8;
  }
  seekable() {
    let e8 = this.techGet_("seekable");
    return e8 && e8.length || (e8 = Aa(0, 0)), e8;
  }
  seeking() {
    return this.techGet_("seeking");
  }
  ended() {
    return this.techGet_("ended");
  }
  networkState() {
    return this.techGet_("networkState");
  }
  readyState() {
    return this.techGet_("readyState");
  }
  bufferedPercent() {
    return Ma(this.buffered(), this.duration());
  }
  bufferedEnd() {
    const e8 = this.buffered(), t3 = this.duration();
    let i6 = e8.end(e8.length - 1);
    return i6 > t3 && (i6 = t3), i6;
  }
  volume(e8) {
    let t3;
    return void 0 !== e8 ? (t3 = Math.max(0, Math.min(1, e8)), this.cache_.volume = t3, this.techCall_("setVolume", t3), void (t3 > 0 && this.lastVolume_(t3))) : (t3 = parseFloat(this.techGet_("volume")), isNaN(t3) ? 1 : t3);
  }
  muted(e8) {
    if (void 0 === e8) return this.techGet_("muted") || false;
    this.techCall_("setMuted", e8);
  }
  defaultMuted(e8) {
    return void 0 !== e8 && this.techCall_("setDefaultMuted", e8), this.techGet_("defaultMuted") || false;
  }
  lastVolume_(e8) {
    if (void 0 === e8 || 0 === e8) return this.cache_.lastVolume;
    this.cache_.lastVolume = e8;
  }
  supportsFullScreen() {
    return this.techGet_("supportsFullScreen") || false;
  }
  isFullscreen(e8) {
    if (void 0 !== e8) {
      const t3 = this.isFullscreen_;
      return this.isFullscreen_ = Boolean(e8), this.isFullscreen_ !== t3 && this.fsApi_.prefixed && this.trigger("fullscreenchange"), void this.toggleFullscreenClass_();
    }
    return this.isFullscreen_;
  }
  requestFullscreen(e8) {
    this.isInPictureInPicture() && this.exitPictureInPicture();
    const t3 = this;
    return new Promise((i6, s6) => {
      function n5() {
        t3.off("fullscreenerror", a6), t3.off("fullscreenchange", r4);
      }
      function r4() {
        n5(), i6();
      }
      function a6(e9, t4) {
        n5(), s6(t4);
      }
      t3.one("fullscreenchange", r4), t3.one("fullscreenerror", a6);
      const o4 = t3.requestFullscreenHelper_(e8);
      o4 && (o4.then(n5, n5), o4.then(i6, s6));
    });
  }
  requestFullscreenHelper_(e8) {
    let t3;
    if (this.fsApi_.prefixed || (t3 = this.options_.fullscreen && this.options_.fullscreen.options || {}, void 0 !== e8 && (t3 = e8)), this.fsApi_.requestFullscreen) {
      const e9 = this.el_[this.fsApi_.requestFullscreen](t3);
      return e9 && e9.then(() => this.isFullscreen(true), () => this.isFullscreen(false)), e9;
    }
    this.tech_.supportsFullScreen() && true == !this.options_.preferFullWindow ? this.techCall_("enterFullScreen") : this.enterFullWindow();
  }
  exitFullscreen() {
    const e8 = this;
    return new Promise((t3, i6) => {
      function s6() {
        e8.off("fullscreenerror", r4), e8.off("fullscreenchange", n5);
      }
      function n5() {
        s6(), t3();
      }
      function r4(e9, t4) {
        s6(), i6(t4);
      }
      e8.one("fullscreenchange", n5), e8.one("fullscreenerror", r4);
      const a6 = e8.exitFullscreenHelper_();
      a6 && (a6.then(s6, s6), a6.then(t3, i6));
    });
  }
  exitFullscreenHelper_() {
    if (this.fsApi_.requestFullscreen) {
      const e8 = ae[this.fsApi_.exitFullscreen]();
      return e8 && Fa(e8.then(() => this.isFullscreen(false))), e8;
    }
    this.tech_.supportsFullScreen() && true == !this.options_.preferFullWindow ? this.techCall_("exitFullScreen") : this.exitFullWindow();
  }
  enterFullWindow() {
    this.isFullscreen(true), this.isFullWindow = true, this.docOrigOverflow = ae.documentElement.style.overflow, Kr(ae, "keydown", this.boundFullWindowOnEscKey_), ae.documentElement.style.overflow = "hidden", hr(ae.body, "vjs-full-window"), this.trigger("enterFullWindow");
  }
  fullWindowOnEscKey(e8) {
    "Escape" === e8.key && true === this.isFullscreen() && (this.isFullWindow ? this.exitFullWindow() : this.exitFullscreen());
  }
  exitFullWindow() {
    this.isFullscreen(false), this.isFullWindow = false, Yr(ae, "keydown", this.boundFullWindowOnEscKey_), ae.documentElement.style.overflow = this.docOrigOverflow, ur(ae.body, "vjs-full-window"), this.trigger("exitFullWindow");
  }
  disablePictureInPicture(e8) {
    if (void 0 === e8) return this.techGet_("disablePictureInPicture");
    this.techCall_("setDisablePictureInPicture", e8), this.options_.disablePictureInPicture = e8, this.trigger("disablepictureinpicturechanged");
  }
  isInPictureInPicture(e8) {
    return void 0 !== e8 ? (this.isInPictureInPicture_ = !!e8, void this.togglePictureInPictureClass_()) : !!this.isInPictureInPicture_;
  }
  requestPictureInPicture() {
    if (this.options_.enableDocumentPictureInPicture && b4.documentPictureInPicture) {
      const e8 = ae.createElement(this.el().tagName);
      return e8.classList = this.el().classList, e8.classList.add("vjs-pip-container"), this.posterImage && e8.appendChild(this.posterImage.el().cloneNode(true)), this.titleBar && e8.appendChild(this.titleBar.el().cloneNode(true)), e8.appendChild(rr("p", { className: "vjs-pip-text" }, {}, this.localize("Playing in picture-in-picture"))), b4.documentPictureInPicture.requestWindow({ width: this.videoWidth(), height: this.videoHeight() }).then((t3) => (Pr(t3), this.el_.parentNode.insertBefore(e8, this.el_), t3.document.body.appendChild(this.el_), t3.document.body.classList.add("vjs-pip-window"), this.player_.isInPictureInPicture(true), this.player_.trigger({ type: "enterpictureinpicture", pipWindow: t3 }), t3.addEventListener("pagehide", (t4) => {
        const i6 = t4.target.querySelector(".video-js");
        e8.parentNode.replaceChild(i6, e8), this.player_.isInPictureInPicture(false), this.player_.trigger("leavepictureinpicture");
      }), t3));
    }
    return "pictureInPictureEnabled" in ae && false === this.disablePictureInPicture() ? this.techGet_("requestPictureInPicture") : Promise.reject("No PiP mode is available");
  }
  exitPictureInPicture() {
    return b4.documentPictureInPicture && b4.documentPictureInPicture.window ? (b4.documentPictureInPicture.window.close(), Promise.resolve()) : "pictureInPictureEnabled" in ae ? ae.exitPictureInPicture() : void 0;
  }
  handleKeyDown(e8) {
    const { userActions: t3 } = this.options_;
    if (!t3 || !t3.hotkeys) return;
    ((e9) => {
      const t4 = e9.tagName.toLowerCase();
      if (e9.isContentEditable) return true;
      if ("input" === t4) return -1 === ["button", "checkbox", "hidden", "radio", "reset", "submit"].indexOf(e9.type);
      return -1 !== ["textarea"].indexOf(t4);
    })(this.el_.ownerDocument.activeElement) || ("function" == typeof t3.hotkeys ? t3.hotkeys.call(this, e8) : this.handleHotkeys(e8));
  }
  handleHotkeys(e8) {
    const t3 = this.options_.userActions ? this.options_.userActions.hotkeys : {}, { fullscreenKey: i6 = (t4) => "f" === e8.key.toLowerCase(), muteKey: s6 = (t4) => "m" === e8.key.toLowerCase(), playPauseKey: n5 = (t4) => "k" === e8.key.toLowerCase() || " " === e8.key.toLowerCase() } = t3;
    if (i6.call(this, e8)) {
      e8.preventDefault(), e8.stopPropagation();
      const t4 = Ca.getComponent("FullscreenToggle");
      false !== ae[this.fsApi_.fullscreenEnabled] && t4.prototype.handleClick.call(this, e8);
    } else if (s6.call(this, e8)) {
      e8.preventDefault(), e8.stopPropagation();
      Ca.getComponent("MuteToggle").prototype.handleClick.call(this, e8);
    } else if (n5.call(this, e8)) {
      e8.preventDefault(), e8.stopPropagation();
      Ca.getComponent("PlayToggle").prototype.handleClick.call(this, e8);
    }
  }
  canPlayType(e8) {
    let t3;
    for (let i6 = 0, s6 = this.options_.techOrder; i6 < s6.length; i6++) {
      const n5 = s6[i6];
      let r4 = vo.getTech(n5);
      if (r4 || (r4 = Ca.getComponent(n5)), r4) {
        if (r4.isSupported() && (t3 = r4.canPlayType(e8), t3)) return t3;
      } else yn.error(`The "${n5}" tech is undefined. Skipped browser support check for that tech.`);
    }
    return "";
  }
  selectSource(e8) {
    const t3 = this.options_.techOrder.map((e9) => [e9, vo.getTech(e9)]).filter(([e9, t4]) => t4 ? t4.isSupported() : (yn.error(`The "${e9}" tech is undefined. Skipped browser support check for that tech.`), false)), i6 = function(e9, t4, i7) {
      let s7;
      return e9.some((e10) => t4.some((t5) => {
        if (s7 = i7(e10, t5), s7) return true;
      })), s7;
    };
    let s6;
    const n5 = (e9) => (t4, i7) => e9(i7, t4), r4 = ([e9, t4], i7) => {
      if (t4.canPlaySource(i7, this.options_[e9.toLowerCase()])) return { source: i7, tech: e9 };
    };
    return s6 = this.options_.sourceOrder ? i6(e8, t3, n5(r4)) : i6(t3, e8, r4), s6 || false;
  }
  handleSrc_(e8, t3) {
    if (void 0 === e8) return this.cache_.src || "";
    this.resetRetryOnError_ && this.resetRetryOnError_();
    const i6 = qo(e8);
    if (i6.length) {
      if (this.changingSrc_ = true, t3 || (this.cache_.sources = i6), this.updateSourceCaches_(i6[0]), wo(this, i6[0], (e9, s6) => {
        this.middleware_ = s6, t3 || (this.cache_.sources = i6), this.updateSourceCaches_(e9);
        if (this.src_(e9)) return i6.length > 1 ? this.handleSrc_(i6.slice(1)) : (this.changingSrc_ = false, this.setTimeout(function() {
          this.error({ code: 4, message: this.options_.notSupportedMessage });
        }, 0), void this.triggerReady());
        Co(s6, this.tech_);
      }), i6.length > 1) {
        const e9 = () => {
          this.error(null), this.handleSrc_(i6.slice(1), true);
        }, t4 = () => {
          this.off("error", e9);
        };
        this.one("error", e9), this.one("playing", t4), this.resetRetryOnError_ = () => {
          this.off("error", e9), this.off("playing", t4);
        };
      }
    } else this.setTimeout(function() {
      this.error({ code: 4, message: this.options_.notSupportedMessage });
    }, 0);
  }
  src(e8) {
    return this.handleSrc_(e8, false);
  }
  src_(e8) {
    const t3 = this.selectSource([e8]);
    return !t3 || (Ea(t3.tech, this.techName_) ? (this.ready(function() {
      this.tech_.constructor.prototype.hasOwnProperty("setSource") ? this.techCall_("setSource", e8) : this.techCall_("src", e8.src), this.changingSrc_ = false;
    }, true), false) : (this.changingSrc_ = true, this.loadTech_(t3.tech, t3.source), this.tech_.ready(() => {
      this.changingSrc_ = false;
    }), false));
  }
  addSourceElement(e8, t3) {
    return !!this.tech_ && this.tech_.addSourceElement(e8, t3);
  }
  removeSourceElement(e8) {
    return !!this.tech_ && this.tech_.removeSourceElement(e8);
  }
  load() {
    this.tech_ && this.tech_.vhs ? this.src(this.currentSource()) : this.techCall_("load");
  }
  reset() {
    if (this.paused()) this.doReset_();
    else {
      Fa(this.play().then(() => this.doReset_()));
    }
  }
  doReset_() {
    this.tech_ && this.tech_.clearTracks("text"), this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.resetCache_(), this.poster(""), this.loadTech_(this.options_.techOrder[0], null), this.techCall_("reset"), this.resetControlBarUI_(), this.error(null), this.titleBar && this.titleBar.update({ title: void 0, description: void 0 }), ha(this) && this.trigger("playerreset");
  }
  resetControlBarUI_() {
    this.resetProgressBar_(), this.resetPlaybackRate_(), this.resetVolumeBar_();
  }
  resetProgressBar_() {
    this.currentTime(0);
    const { currentTimeDisplay: e8, durationDisplay: t3, progressControl: i6, remainingTimeDisplay: s6 } = this.controlBar || {}, { seekBar: n5 } = i6 || {};
    e8 && e8.updateContent(), t3 && t3.updateContent(), s6 && s6.updateContent(), n5 && (n5.update(), n5.loadProgressBar && n5.loadProgressBar.update());
  }
  resetPlaybackRate_() {
    this.playbackRate(this.defaultPlaybackRate()), this.handleTechRateChange_();
  }
  resetVolumeBar_() {
    this.volume(1), this.trigger("volumechange");
  }
  currentSources() {
    const e8 = this.currentSource(), t3 = [];
    return 0 !== Object.keys(e8).length && t3.push(e8), this.cache_.sources || t3;
  }
  currentSource() {
    return this.cache_.source || {};
  }
  currentSrc() {
    return this.currentSource() && this.currentSource().src || "";
  }
  currentType() {
    return this.currentSource() && this.currentSource().type || "";
  }
  preload(e8) {
    return void 0 !== e8 ? (this.techCall_("setPreload", e8), void (this.options_.preload = e8)) : this.techGet_("preload");
  }
  autoplay(e8) {
    if (void 0 === e8) return this.options_.autoplay || false;
    let t3;
    "string" == typeof e8 && /(any|play|muted)/.test(e8) || true === e8 && this.options_.normalizeAutoplay ? (this.options_.autoplay = e8, this.manualAutoplay_("string" == typeof e8 ? e8 : "play"), t3 = false) : this.options_.autoplay = !!e8, t3 = void 0 === t3 ? this.options_.autoplay : t3, this.tech_ && this.techCall_("setAutoplay", t3);
  }
  playsinline(e8) {
    return void 0 !== e8 && (this.techCall_("setPlaysinline", e8), this.options_.playsinline = e8), this.techGet_("playsinline");
  }
  loop(e8) {
    return void 0 !== e8 ? (this.techCall_("setLoop", e8), void (this.options_.loop = e8)) : this.techGet_("loop");
  }
  poster(e8) {
    if (void 0 === e8) return this.poster_;
    e8 || (e8 = ""), e8 !== this.poster_ && (this.poster_ = e8, this.techCall_("setPoster", e8), this.isPosterFromTech_ = false, this.trigger("posterchange"));
  }
  handleTechPosterChange_() {
    if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {
      const e8 = this.tech_.poster() || "";
      e8 !== this.poster_ && (this.poster_ = e8, this.isPosterFromTech_ = true, this.trigger("posterchange"));
    }
  }
  controls(e8) {
    if (void 0 === e8) return !!this.controls_;
    e8 = !!e8, this.controls_ !== e8 && (this.controls_ = e8, this.usingNativeControls() && this.techCall_("setControls", e8), this.controls_ ? (this.removeClass("vjs-controls-disabled"), this.addClass("vjs-controls-enabled"), this.trigger("controlsenabled"), this.usingNativeControls() || this.addTechControlsListeners_()) : (this.removeClass("vjs-controls-enabled"), this.addClass("vjs-controls-disabled"), this.trigger("controlsdisabled"), this.usingNativeControls() || this.removeTechControlsListeners_()));
  }
  usingNativeControls(e8) {
    if (void 0 === e8) return !!this.usingNativeControls_;
    e8 = !!e8, this.usingNativeControls_ !== e8 && (this.usingNativeControls_ = e8, this.usingNativeControls_ ? (this.addClass("vjs-using-native-controls"), this.trigger("usingnativecontrols")) : (this.removeClass("vjs-using-native-controls"), this.trigger("usingcustomcontrols")));
  }
  error(e8) {
    if (void 0 === e8) return this.error_ || null;
    if (an("beforeerror").forEach((t3) => {
      const i6 = t3(this, e8);
      En(i6) && !Array.isArray(i6) || "string" == typeof i6 || "number" == typeof i6 || null === i6 ? e8 = i6 : this.log.error("please return a value that MediaError expects in beforeerror hooks");
    }), this.options_.suppressNotSupportedError && e8 && 4 === e8.code) {
      const t3 = function() {
        this.error(e8);
      };
      return this.options_.suppressNotSupportedError = false, this.any(["click", "touchstart"], t3), void this.one("loadstart", function() {
        this.off(["click", "touchstart"], t3);
      });
    }
    if (null === e8) return this.error_ = null, this.removeClass("vjs-error"), void (this.errorDisplay && this.errorDisplay.close());
    this.error_ = new Ua(e8), this.addClass("vjs-error"), yn.error(`(CODE:${this.error_.code} ${Ua.errorTypes[this.error_.code]})`, this.error_.message, this.error_), this.trigger("error"), an("error").forEach((e9) => e9(this, this.error_));
  }
  reportUserActivity(e8) {
    this.userActivity_ = true;
  }
  userActive(e8) {
    if (void 0 === e8) return this.userActive_;
    if ((e8 = !!e8) !== this.userActive_) {
      if (this.userActive_ = e8, this.userActive_) return this.userActivity_ = true, this.removeClass("vjs-user-inactive"), this.addClass("vjs-user-active"), void this.trigger("useractive");
      this.tech_ && this.tech_.one("mousemove", function(e9) {
        e9.stopPropagation(), e9.preventDefault();
      }), this.userActivity_ = false, this.removeClass("vjs-user-active"), this.addClass("vjs-user-inactive"), this.trigger("userinactive");
    }
  }
  listenForUserActivity_() {
    let e8, t3, i6;
    const s6 = ia(this, this.reportUserActivity), n5 = function(e9) {
      e9.screenX === t3 && e9.screenY === i6 || (t3 = e9.screenX, i6 = e9.screenY, s6());
    }, r4 = function() {
      s6(), this.clearInterval(e8), e8 = this.setInterval(s6, 250);
    }, a6 = function(t4) {
      s6(), this.clearInterval(e8);
    };
    this.on("mousedown", r4), this.on("mousemove", n5), this.on("mouseup", a6), this.on("mouseleave", a6);
    const o4 = this.getChild("controlBar");
    let l7;
    !o4 || Yn || Ln || (o4.on("mouseenter", function(e9) {
      0 !== this.player().options_.inactivityTimeout && (this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout), this.player().options_.inactivityTimeout = 0;
    }), o4.on("mouseleave", function(e9) {
      this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout;
    })), this.on("keydown", s6), this.on("keyup", s6);
    const h2 = function() {
      if (!this.userActivity_) return;
      this.userActivity_ = false, this.userActive(true), this.clearTimeout(l7);
      const e9 = this.options_.inactivityTimeout;
      e9 <= 0 || (l7 = this.setTimeout(function() {
        this.userActivity_ || this.userActive(false);
      }, e9));
    };
    this.setInterval(h2, 250);
  }
  playbackRate(e8) {
    if (void 0 === e8) return this.tech_ && this.tech_.featuresPlaybackRate ? this.cache_.lastPlaybackRate || this.techGet_("playbackRate") : 1;
    this.techCall_("setPlaybackRate", e8);
  }
  defaultPlaybackRate(e8) {
    return void 0 !== e8 ? this.techCall_("setDefaultPlaybackRate", e8) : this.tech_ && this.tech_.featuresPlaybackRate ? this.techGet_("defaultPlaybackRate") : 1;
  }
  isAudio(e8) {
    if (void 0 === e8) return !!this.isAudio_;
    this.isAudio_ = !!e8;
  }
  updatePlayerHeightOnAudioOnlyMode_() {
    const e8 = this.getChild("ControlBar");
    e8 && this.audioOnlyCache_.controlBarHeight !== e8.currentHeight() && (this.audioOnlyCache_.controlBarHeight = e8.currentHeight(), this.height(this.audioOnlyCache_.controlBarHeight));
  }
  enableAudioOnlyUI_() {
    this.addClass("vjs-audio-only-mode");
    const e8 = this.children(), t3 = this.getChild("ControlBar"), i6 = t3 && t3.currentHeight();
    e8.forEach((e9) => {
      e9 !== t3 && e9.el_ && !e9.hasClass("vjs-hidden") && (e9.hide(), this.audioOnlyCache_.hiddenChildren.push(e9));
    }), this.audioOnlyCache_.playerHeight = this.currentHeight(), this.audioOnlyCache_.controlBarHeight = i6, this.on("playerresize", this.boundUpdatePlayerHeightOnAudioOnlyMode_), this.height(i6), this.trigger("audioonlymodechange");
  }
  disableAudioOnlyUI_() {
    this.removeClass("vjs-audio-only-mode"), this.off("playerresize", this.boundUpdatePlayerHeightOnAudioOnlyMode_), this.audioOnlyCache_.hiddenChildren.forEach((e8) => e8.show()), this.height(this.audioOnlyCache_.playerHeight), this.trigger("audioonlymodechange");
  }
  audioOnlyMode(e8) {
    if ("boolean" != typeof e8 || e8 === this.audioOnlyMode_) return this.audioOnlyMode_;
    if (this.audioOnlyMode_ = e8, e8) {
      const e9 = [];
      return this.isInPictureInPicture() && e9.push(this.exitPictureInPicture()), this.isFullscreen() && e9.push(this.exitFullscreen()), this.audioPosterMode() && e9.push(this.audioPosterMode(false)), Promise.all(e9).then(() => this.enableAudioOnlyUI_());
    }
    return Promise.resolve().then(() => this.disableAudioOnlyUI_());
  }
  enablePosterModeUI_() {
    (this.tech_ && this.tech_).hide(), this.addClass("vjs-audio-poster-mode"), this.trigger("audiopostermodechange");
  }
  disablePosterModeUI_() {
    (this.tech_ && this.tech_).show(), this.removeClass("vjs-audio-poster-mode"), this.trigger("audiopostermodechange");
  }
  audioPosterMode(e8) {
    if ("boolean" != typeof e8 || e8 === this.audioPosterMode_) return this.audioPosterMode_;
    if (this.audioPosterMode_ = e8, e8) {
      if (this.audioOnlyMode()) {
        return this.audioOnlyMode(false).then(() => {
          this.enablePosterModeUI_();
        });
      }
      return Promise.resolve().then(() => {
        this.enablePosterModeUI_();
      });
    }
    return Promise.resolve().then(() => {
      this.disablePosterModeUI_();
    });
  }
  addTextTrack(e8, t3, i6) {
    if (this.tech_) return this.tech_.addTextTrack(e8, t3, i6);
  }
  addRemoteTextTrack(e8, t3) {
    if (this.tech_) return this.tech_.addRemoteTextTrack(e8, t3);
  }
  removeRemoteTextTrack(e8 = {}) {
    let { track: t3 } = e8;
    if (t3 || (t3 = e8), this.tech_) return this.tech_.removeRemoteTextTrack(t3);
  }
  getVideoPlaybackQuality() {
    return this.techGet_("getVideoPlaybackQuality");
  }
  videoWidth() {
    return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;
  }
  videoHeight() {
    return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;
  }
  language(e8) {
    if (void 0 === e8) return this.language_;
    this.language_ !== String(e8).toLowerCase() && (this.language_ = String(e8).toLowerCase(), ha(this) && this.trigger("languagechange"));
  }
  languages() {
    return Cn(_Kh.prototype.options_.languages, this.languages_);
  }
  toJSON() {
    const e8 = Cn(this.options_), t3 = e8.tracks;
    e8.tracks = [];
    for (let i6 = 0; i6 < t3.length; i6++) {
      let s6 = t3[i6];
      s6 = Cn(s6), s6.player = void 0, e8.tracks[i6] = s6;
    }
    return e8;
  }
  createModal(e8, t3) {
    (t3 = t3 || {}).content = e8 || "";
    const i6 = new Ha(this, t3);
    return this.addChild(i6), i6.on("dispose", () => {
      this.removeChild(i6);
    }), i6.open(), i6;
  }
  updateCurrentBreakpoint_() {
    if (!this.responsive()) return;
    const e8 = this.currentBreakpoint(), t3 = this.currentWidth();
    for (let i6 = 0; i6 < Wh.length; i6++) {
      const s6 = Wh[i6];
      if (t3 <= this.breakpoints_[s6]) {
        if (e8 === s6) return;
        e8 && this.removeClass(Gh[e8]), this.addClass(Gh[s6]), this.breakpoint_ = s6;
        break;
      }
    }
  }
  removeCurrentBreakpoint_() {
    const e8 = this.currentBreakpointClass();
    this.breakpoint_ = "", e8 && this.removeClass(e8);
  }
  breakpoints(e8) {
    return void 0 === e8 || (this.breakpoint_ = "", this.breakpoints_ = Object.assign({}, Xh, e8), this.updateCurrentBreakpoint_()), Object.assign(this.breakpoints_);
  }
  responsive(e8) {
    if (void 0 === e8) return this.responsive_;
    return (e8 = Boolean(e8)) !== this.responsive_ ? (this.responsive_ = e8, e8 ? (this.on("playerresize", this.boundUpdateCurrentBreakpoint_), this.updateCurrentBreakpoint_()) : (this.off("playerresize", this.boundUpdateCurrentBreakpoint_), this.removeCurrentBreakpoint_()), e8) : void 0;
  }
  currentBreakpoint() {
    return this.breakpoint_;
  }
  currentBreakpointClass() {
    return Gh[this.breakpoint_] || "";
  }
  loadMedia(e8, t3) {
    if (!e8 || "object" != typeof e8) return;
    const i6 = this.crossOrigin();
    this.reset(), this.cache_.media = Cn(e8);
    const { artist: s6, artwork: n5, description: r4, poster: a6, src: o4, textTracks: l7, title: h2 } = this.cache_.media;
    !n5 && a6 && (this.cache_.media.artwork = [{ src: a6, type: Bo(a6) }]), i6 && this.crossOrigin(i6), o4 && this.src(o4), a6 && this.poster(a6), Array.isArray(l7) && l7.forEach((e9) => this.addRemoteTextTrack(e9, false)), this.titleBar && this.titleBar.update({ title: h2, description: r4 || s6 || "" }), this.ready(t3);
  }
  getMedia() {
    if (!this.cache_.media) {
      const e8 = this.poster(), t3 = { src: this.currentSources(), textTracks: Array.prototype.map.call(this.remoteTextTracks(), (e9) => ({ kind: e9.kind, label: e9.label, language: e9.language, src: e9.src })) };
      return e8 && (t3.poster = e8, t3.artwork = [{ src: t3.poster, type: Bo(t3.poster) }]), t3;
    }
    return Cn(this.cache_.media);
  }
  static getTagSettings(e8) {
    const t3 = { sources: [], tracks: [] }, i6 = pr(e8), s6 = i6["data-setup"];
    if (lr(e8, "vjs-fill") && (i6.fill = true), lr(e8, "vjs-fluid") && (i6.fluid = true), null !== s6) try {
      Object.assign(i6, JSON.parse(s6 || "{}"));
    } catch (n5) {
      yn.error("data-setup", n5);
    }
    if (Object.assign(t3, i6), e8.hasChildNodes()) {
      const i7 = e8.childNodes;
      for (let e9 = 0, s7 = i7.length; e9 < s7; e9++) {
        const s8 = i7[e9], n5 = s8.nodeName.toLowerCase();
        "source" === n5 ? t3.sources.push(pr(s8)) : "track" === n5 && t3.tracks.push(pr(s8));
      }
    }
    return t3;
  }
  debug(e8) {
    if (void 0 === e8) return this.debugEnabled_;
    e8 ? (this.trigger("debugon"), this.previousLogLevel_ = this.log.level, this.log.level("debug"), this.debugEnabled_ = true) : (this.trigger("debugoff"), this.log.level(this.previousLogLevel_), this.previousLogLevel_ = void 0, this.debugEnabled_ = false);
  }
  playbackRates(e8) {
    if (void 0 === e8) return this.cache_.playbackRates;
    Array.isArray(e8) && e8.every((e9) => "number" == typeof e9) && (this.cache_.playbackRates = e8, this.trigger("playbackrateschange"));
  }
};
yo.names.forEach(function(e8) {
  const t3 = yo[e8];
  Kh.prototype[t3.getterName] = function() {
    return this.tech_ ? this.tech_[t3.getterName]() : (this[t3.privateName] = this[t3.privateName] || new t3.ListClass(), this[t3.privateName]);
  };
}), Kh.prototype.crossorigin = Kh.prototype.crossOrigin, Kh.players = {};
var Yh = b4.navigator;
Kh.prototype.options_ = { techOrder: vo.defaultTechOrder_, html5: {}, enableSourceset: true, inactivityTimeout: 2e3, playbackRates: [], liveui: false, children: ["mediaLoader", "posterImage", "titleBar", "textTrackDisplay", "loadingSpinner", "bigPlayButton", "liveTracker", "controlBar", "errorDisplay", "textTrackSettings", "resizeManager"], language: Yh && (Yh.languages && Yh.languages[0] || Yh.userLanguage || Yh.language) || "en", languages: {}, notSupportedMessage: "No compatible source was found for this media.", normalizeAutoplay: false, fullscreen: { options: { navigationUI: "hide" } }, breakpoints: {}, responsive: false, audioOnlyMode: false, audioPosterMode: false, spatialNavigation: { enabled: false, horizontalSeek: false }, enableSmoothSeeking: false, disableSeekWhileScrubbingOnMobile: false }, Vh.forEach(function(e8) {
  Kh.prototype[`handleTech${Sa(e8)}_`] = function() {
    return this.trigger(e8);
  };
}), Ca.registerComponent("Player", Kh);
var Qh = "plugin";
var Jh = "activePlugins_";
var Zh = {};
var eu = (e8) => Zh.hasOwnProperty(e8);
var tu = (e8) => eu(e8) ? Zh[e8] : void 0;
var iu = (e8, t3) => {
  e8[Jh] = e8[Jh] || {}, e8[Jh][t3] = true;
};
var su = (e8, t3, i6) => {
  const s6 = (i6 ? "before" : "") + "pluginsetup";
  e8.trigger(s6, t3), e8.trigger(s6 + ":" + t3.name, t3);
};
var nu = function(e8, t3) {
  const i6 = function() {
    su(this, { name: e8, plugin: t3, instance: null }, true);
    const i7 = t3.apply(this, arguments);
    return iu(this, e8), su(this, { name: e8, plugin: t3, instance: i7 }), i7;
  };
  return Object.keys(t3).forEach(function(e9) {
    i6[e9] = t3[e9];
  }), i6;
};
var ru = (e8, t3) => (t3.prototype.name = e8, function(...i6) {
  su(this, { name: e8, plugin: t3, instance: null }, true);
  const s6 = new t3(...[this, ...i6]);
  return this[e8] = () => s6, su(this, s6.getEventHash()), s6;
});
var au = class _au {
  constructor(e8) {
    if (this.constructor === _au) throw new Error("Plugin must be sub-classed; not directly instantiated.");
    this.player = e8, this.log || (this.log = this.player.log.createLogger(this.name)), _a(this), delete this.trigger, ba(this, this.constructor.defaultState), iu(e8, this.name), this.dispose = this.dispose.bind(this), e8.on("dispose", this.dispose);
  }
  version() {
    return this.constructor.VERSION;
  }
  getEventHash(e8 = {}) {
    return e8.name = this.name, e8.plugin = this.constructor, e8.instance = this, e8;
  }
  trigger(e8, t3 = {}) {
    return Qr(this.eventBusEl_, e8, this.getEventHash(t3));
  }
  handleStateChanged(e8) {
  }
  dispose() {
    const { name: e8, player: t3 } = this;
    this.trigger("dispose"), this.off(), t3.off("dispose", this.dispose), t3[Jh][e8] = false, this.player = this.state = null, t3[e8] = ru(e8, Zh[e8]);
  }
  static isBasic(e8) {
    const t3 = "string" == typeof e8 ? tu(e8) : e8;
    return "function" == typeof t3 && !_au.prototype.isPrototypeOf(t3.prototype);
  }
  static registerPlugin(e8, t3) {
    if ("string" != typeof e8) throw new Error(`Illegal plugin name, "${e8}", must be a string, was ${typeof e8}.`);
    if (eu(e8)) yn.warn(`A plugin named "${e8}" already exists. You may want to avoid re-registering plugins!`);
    else if (Kh.prototype.hasOwnProperty(e8)) throw new Error(`Illegal plugin name, "${e8}", cannot share a name with an existing player method!`);
    if ("function" != typeof t3) throw new Error(`Illegal plugin for "${e8}", must be a function, was ${typeof t3}.`);
    return Zh[e8] = t3, e8 !== Qh && (_au.isBasic(t3) ? Kh.prototype[e8] = nu(e8, t3) : Kh.prototype[e8] = ru(e8, t3)), t3;
  }
  static deregisterPlugin(e8) {
    if (e8 === Qh) throw new Error("Cannot de-register base plugin.");
    eu(e8) && (delete Zh[e8], delete Kh.prototype[e8]);
  }
  static getPlugins(e8 = Object.keys(Zh)) {
    let t3;
    return e8.forEach((e9) => {
      const i6 = tu(e9);
      i6 && (t3 = t3 || {}, t3[e9] = i6);
    }), t3;
  }
  static getPluginVersion(e8) {
    const t3 = tu(e8);
    return t3 && t3.VERSION || "";
  }
};
function ou(e8, t3) {
  let i6 = false;
  return function(...s6) {
    return i6 || yn.warn(e8), i6 = true, t3.apply(this, s6);
  };
}
function lu(e8, t3, i6, s6) {
  return ou(`${t3} is deprecated and will be removed in ${e8}.0; please use ${i6} instead.`, s6);
}
au.getPlugin = tu, au.BASE_PLUGIN_NAME = Qh, au.registerPlugin(Qh, au), Kh.prototype.usingPlugin = function(e8) {
  return !!this[Jh] && true === this[Jh][e8];
}, Kh.prototype.hasPlugin = function(e8) {
  return !!eu(e8);
};
var hu = { NetworkBadStatus: "networkbadstatus", NetworkRequestFailed: "networkrequestfailed", NetworkRequestAborted: "networkrequestaborted", NetworkRequestTimeout: "networkrequesttimeout", NetworkBodyParserFailed: "networkbodyparserfailed", StreamingHlsPlaylistParserError: "streaminghlsplaylistparsererror", StreamingDashManifestParserError: "streamingdashmanifestparsererror", StreamingContentSteeringParserError: "streamingcontentsteeringparsererror", StreamingVttParserError: "streamingvttparsererror", StreamingFailedToSelectNextSegment: "streamingfailedtoselectnextsegment", StreamingFailedToDecryptSegment: "streamingfailedtodecryptsegment", StreamingFailedToTransmuxSegment: "streamingfailedtotransmuxsegment", StreamingFailedToAppendSegment: "streamingfailedtoappendsegment", StreamingCodecsChangeError: "streamingcodecschangeerror" };
var uu = (e8) => 0 === e8.indexOf("#") ? e8.slice(1) : e8;
function du(e8, t3, i6) {
  let s6 = du.getPlayer(e8);
  if (s6) return t3 && yn.warn(`Player "${e8}" is already initialised. Options will not be applied.`), i6 && s6.ready(i6), s6;
  const n5 = "string" == typeof e8 ? xr("#" + uu(e8)) : e8;
  if (!ir(n5)) throw new TypeError("The element or ID supplied is not valid. (videojs)");
  const r4 = "getRootNode" in n5 && n5.getRootNode() instanceof b4.ShadowRoot ? n5.getRootNode() : n5.ownerDocument.body;
  n5.ownerDocument.defaultView && r4.contains(n5) || yn.warn("The element supplied is not included in the DOM"), true === (t3 = t3 || {}).restoreEl && (t3.restoreEl = (n5.parentNode && n5.parentNode.hasAttribute && n5.parentNode.hasAttribute("data-vjs-player") ? n5.parentNode : n5).cloneNode(true)), an("beforesetup").forEach((e9) => {
    const i7 = e9(n5, Cn(t3));
    En(i7) && !Array.isArray(i7) ? t3 = Cn(t3, i7) : yn.error("please return an object in beforesetup hooks");
  });
  const a6 = Ca.getComponent("Player");
  return s6 = new a6(n5, t3, i6), an("setup").forEach((e9) => e9(s6)), s6;
}
if (du.hooks_ = rn, du.hooks = an, du.hook = on, du.hookOnce = hn, du.removeHook = ln, true !== b4.VIDEOJS_NO_DYNAMIC_STYLE && tr()) {
  let e8 = xr(".vjs-styles-defaults");
  if (!e8) {
    e8 = Br("vjs-styles-defaults");
    const t3 = xr("head");
    t3 && t3.insertBefore(e8, t3.firstChild), Fr(e8, "\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ");
  }
}
Mr(1, du), du.VERSION = nn, du.options = Kh.prototype.options_, du.getPlayers = () => Kh.players, du.getPlayer = (e8) => {
  const t3 = Kh.players;
  let i6;
  if ("string" == typeof e8) {
    const s6 = uu(e8), n5 = t3[s6];
    if (n5) return n5;
    i6 = xr("#" + s6);
  } else i6 = e8;
  if (ir(i6)) {
    const { player: e9, playerId: s6 } = i6;
    if (e9 || t3[s6]) return e9 || t3[s6];
  }
}, du.getAllPlayers = () => Object.keys(Kh.players).map((e8) => Kh.players[e8]).filter(Boolean), du.players = Kh.players, du.getComponent = Ca.getComponent, du.registerComponent = (e8, t3) => (vo.isTech(t3) && yn.warn(`The ${e8} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`), Ca.registerComponent.call(Ca, e8, t3)), du.getTech = vo.getTech, du.registerTech = vo.registerTech, du.use = Eo, Object.defineProperty(du, "middleware", { value: {}, writeable: false, enumerable: true }), Object.defineProperty(du.middleware, "TERMINATOR", { value: So, writeable: false, enumerable: true }), du.browser = Jn, du.obj = xn, du.mergeOptions = lu(9, "videojs.mergeOptions", "videojs.obj.merge", Cn), du.defineLazyProperty = lu(9, "videojs.defineLazyProperty", "videojs.obj.defineLazyProperty", In), du.bind = lu(9, "videojs.bind", "native Function.prototype.bind", ia), du.registerPlugin = au.registerPlugin, du.deregisterPlugin = au.deregisterPlugin, du.plugin = (e8, t3) => (yn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"), au.registerPlugin(e8, t3)), du.getPlugins = au.getPlugins, du.getPlugin = au.getPlugin, du.getPluginVersion = au.getPluginVersion, du.addLanguage = function(e8, t3) {
  return e8 = ("" + e8).toLowerCase(), du.options.languages = Cn(du.options.languages, { [e8]: t3 }), du.options.languages[e8];
}, du.log = yn, du.createLogger = _n, du.time = Ra, du.createTimeRange = lu(9, "videojs.createTimeRange", "videojs.time.createTimeRanges", Aa), du.createTimeRanges = lu(9, "videojs.createTimeRanges", "videojs.time.createTimeRanges", Aa), du.formatTime = lu(9, "videojs.formatTime", "videojs.time.formatTime", Na), du.setFormatTime = lu(9, "videojs.setFormatTime", "videojs.time.setFormatTime", La), du.resetFormatTime = lu(9, "videojs.resetFormatTime", "videojs.time.resetFormatTime", Oa), du.parseUrl = lu(9, "videojs.parseUrl", "videojs.url.parseUrl", so), du.isCrossOrigin = lu(9, "videojs.isCrossOrigin", "videojs.url.isCrossOrigin", ao), du.EventTarget = oa, du.any = Zr, du.on = Kr, du.one = Jr, du.off = Yr, du.trigger = Qr, du.xhr = Ce, du.TextTrack = uo, du.AudioTrack = co, du.VideoTrack = po, ["isEl", "isTextNode", "createEl", "hasClass", "addClass", "removeClass", "toggleClass", "setAttributes", "getAttributes", "emptyEl", "appendContent", "insertContent"].forEach((e8) => {
  du[e8] = function() {
    return yn.warn(`videojs.${e8}() is deprecated; use videojs.dom.${e8}() instead`), Lr[e8].apply(null, arguments);
  };
}), du.computedStyle = lu(9, "videojs.computedStyle", "videojs.dom.computedStyle", Dr), du.dom = Lr, du.fn = ra, du.num = fl, du.str = wa, du.url = oo, du.Error = hu;
var cu = class {
  constructor(e8) {
    let t3 = this;
    return t3.id = e8.id, t3.label = t3.id, t3.width = e8.width, t3.height = e8.height, t3.bitrate = e8.bandwidth, t3.frameRate = e8.frameRate, t3.enabled_ = e8.enabled, Object.defineProperty(t3, "enabled", { get: () => t3.enabled_(), set(e9) {
      t3.enabled_(e9);
    } }), t3;
  }
};
var pu = class extends du.EventTarget {
  constructor() {
    super();
    let e8 = this;
    return e8.levels_ = [], e8.selectedIndex_ = -1, Object.defineProperty(e8, "selectedIndex", { get: () => e8.selectedIndex_ }), Object.defineProperty(e8, "length", { get: () => e8.levels_.length }), e8[Symbol.iterator] = () => e8.levels_.values(), e8;
  }
  addQualityLevel(e8) {
    let t3 = this.getQualityLevelById(e8.id);
    if (t3) return t3;
    const i6 = this.levels_.length;
    return t3 = new cu(e8), "" + i6 in this || Object.defineProperty(this, i6, { get() {
      return this.levels_[i6];
    } }), this.levels_.push(t3), this.trigger({ qualityLevel: t3, type: "addqualitylevel" }), t3;
  }
  removeQualityLevel(e8) {
    let t3 = null;
    for (let i6 = 0, s6 = this.length; i6 < s6; i6++) if (this[i6] === e8) {
      t3 = this.levels_.splice(i6, 1)[0], this.selectedIndex_ === i6 ? this.selectedIndex_ = -1 : this.selectedIndex_ > i6 && this.selectedIndex_--;
      break;
    }
    return t3 && this.trigger({ qualityLevel: e8, type: "removequalitylevel" }), t3;
  }
  getQualityLevelById(e8) {
    for (let t3 = 0, i6 = this.length; t3 < i6; t3++) {
      const i7 = this[t3];
      if (i7.id === e8) return i7;
    }
    return null;
  }
  dispose() {
    this.selectedIndex_ = -1, this.levels_.length = 0;
  }
};
pu.prototype.allowedEvents_ = { change: "change", addqualitylevel: "addqualitylevel", removequalitylevel: "removequalitylevel" };
for (const Cg in pu.prototype.allowedEvents_) pu.prototype["on" + Cg] = null;
var mu = "4.1.0";
var gu = function(e8, t3) {
  const i6 = e8.qualityLevels, s6 = new pu(), n5 = function() {
    s6.dispose(), e8.qualityLevels = i6, e8.off("dispose", n5);
  };
  return e8.on("dispose", n5), e8.qualityLevels = () => s6, e8.qualityLevels.VERSION = mu, s6;
};
var fu = function(e8) {
  return gu(this, du.obj.merge({}, e8));
};
du.registerPlugin("qualityLevels", fu), fu.VERSION = mu;
var yu = je;
var _u = (e8, t3) => t3 && t3.responseURL && e8 !== t3.responseURL ? t3.responseURL : e8;
var vu = (e8) => du.log.debug ? du.log.debug.bind(du, "VHS:", `${e8} >`) : function() {
};
function bu(...e8) {
  const t3 = du.obj || du;
  return (t3.merge || t3.mergeOptions).apply(t3, e8);
}
function Tu(...e8) {
  const t3 = du.time || du;
  return (t3.createTimeRanges || t3.createTimeRanges).apply(t3, e8);
}
function Su(e8) {
  if (0 === e8.length) return "Buffered Ranges are empty";
  let t3 = "Buffered Ranges: \n";
  for (let i6 = 0; i6 < e8.length; i6++) {
    const s6 = e8.start(i6), n5 = e8.end(i6);
    t3 += `${s6} --> ${n5}. Duration (${n5 - s6})
`;
  }
  return t3;
}
var Eu = 1 / 30;
var wu = 3 * Eu;
var Cu = function(e8, t3) {
  const i6 = [];
  let s6;
  if (e8 && e8.length) for (s6 = 0; s6 < e8.length; s6++) t3(e8.start(s6), e8.end(s6)) && i6.push([e8.start(s6), e8.end(s6)]);
  return Tu(i6);
};
var ku = function(e8, t3) {
  return Cu(e8, function(e9, i6) {
    return e9 - wu <= t3 && i6 + wu >= t3;
  });
};
var Iu = function(e8, t3) {
  return Cu(e8, function(e9) {
    return e9 - Eu >= t3;
  });
};
var xu = function(e8) {
  if (e8.length < 2) return Tu();
  const t3 = [];
  for (let i6 = 1; i6 < e8.length; i6++) {
    const s6 = e8.end(i6 - 1), n5 = e8.start(i6);
    t3.push([s6, n5]);
  }
  return Tu(t3);
};
var Au = function(e8, t3) {
  let i6 = null, s6 = null, n5 = 0;
  const r4 = [], a6 = [];
  if (!(e8 && e8.length && t3 && t3.length)) return Tu();
  let o4 = e8.length;
  for (; o4--; ) r4.push({ time: e8.start(o4), type: "start" }), r4.push({ time: e8.end(o4), type: "end" });
  for (o4 = t3.length; o4--; ) r4.push({ time: t3.start(o4), type: "start" }), r4.push({ time: t3.end(o4), type: "end" });
  for (r4.sort(function(e9, t4) {
    return e9.time - t4.time;
  }), o4 = 0; o4 < r4.length; o4++) "start" === r4[o4].type ? (n5++, 2 === n5 && (i6 = r4[o4].time)) : "end" === r4[o4].type && (n5--, 1 === n5 && (s6 = r4[o4].time)), null !== i6 && null !== s6 && (a6.push([i6, s6]), i6 = null, s6 = null);
  return Tu(a6);
};
var Du = (e8) => {
  const t3 = [];
  if (!e8 || !e8.length) return "";
  for (let i6 = 0; i6 < e8.length; i6++) t3.push(e8.start(i6) + " => " + e8.end(i6));
  return t3.join(", ");
};
var Pu = function(e8, t3, i6 = 1) {
  return ((e8.length ? e8.end(e8.length - 1) : 0) - t3) / i6;
};
var Lu = (e8) => {
  const t3 = [];
  for (let i6 = 0; i6 < e8.length; i6++) t3.push({ start: e8.start(i6), end: e8.end(i6) });
  return t3;
};
var Ou = function(e8, t3) {
  if (e8 === t3) return false;
  if (!e8 && t3 || !t3 && e8) return true;
  if (e8.length !== t3.length) return true;
  for (let i6 = 0; i6 < e8.length; i6++) if (e8.start(i6) !== t3.start(i6) || e8.end(i6) !== t3.end(i6)) return true;
  return false;
};
var Nu = function(e8) {
  if (e8 && e8.length && e8.end) return e8.end(e8.length - 1);
};
var Ru = function(e8, t3) {
  let i6 = 0;
  if (!e8 || !e8.length) return i6;
  for (let s6 = 0; s6 < e8.length; s6++) {
    const n5 = e8.start(s6), r4 = e8.end(s6);
    t3 > r4 || (i6 += t3 > n5 && t3 <= r4 ? r4 - t3 : r4 - n5);
  }
  return i6;
};
var Mu = (e8, t3) => {
  if (!t3.preload) return t3.duration;
  let i6 = 0;
  return (t3.parts || []).forEach(function(e9) {
    i6 += e9.duration;
  }), (t3.preloadHints || []).forEach(function(t4) {
    "PART" === t4.type && (i6 += e8.partTargetDuration);
  }), i6;
};
var Uu = (e8) => (e8.segments || []).reduce((e9, t3, i6) => (t3.parts ? t3.parts.forEach(function(s6, n5) {
  e9.push({ duration: s6.duration, segmentIndex: i6, partIndex: n5, part: s6, segment: t3 });
}) : e9.push({ duration: t3.duration, segmentIndex: i6, partIndex: null, segment: t3, part: null }), e9), []);
var Bu = (e8) => {
  const t3 = e8.segments && e8.segments.length && e8.segments[e8.segments.length - 1];
  return t3 && t3.parts || [];
};
var Fu = ({ preloadSegment: e8 }) => {
  if (!e8) return;
  const { parts: t3, preloadHints: i6 } = e8;
  let s6 = (i6 || []).reduce((e9, t4) => e9 + ("PART" === t4.type ? 1 : 0), 0);
  return s6 += t3 && t3.length ? t3.length : 0, s6;
};
var qu = (e8, t3) => {
  if (t3.endList) return 0;
  if (e8 && e8.suggestedPresentationDelay) return e8.suggestedPresentationDelay;
  const i6 = Bu(t3).length > 0;
  return i6 && t3.serverControl && t3.serverControl.partHoldBack ? t3.serverControl.partHoldBack : i6 && t3.partTargetDuration ? 3 * t3.partTargetDuration : t3.serverControl && t3.serverControl.holdBack ? t3.serverControl.holdBack : t3.targetDuration ? 3 * t3.targetDuration : 0;
};
var ju = function(e8, t3) {
  let i6 = 0, s6 = t3 - e8.mediaSequence, n5 = e8.segments[s6];
  if (n5) {
    if (void 0 !== n5.start) return { result: n5.start, precise: true };
    if (void 0 !== n5.end) return { result: n5.end - n5.duration, precise: true };
  }
  for (; s6--; ) {
    if (n5 = e8.segments[s6], void 0 !== n5.end) return { result: i6 + n5.end, precise: true };
    if (i6 += Mu(e8, n5), void 0 !== n5.start) return { result: i6 + n5.start, precise: true };
  }
  return { result: i6, precise: false };
};
var $u = function(e8, t3) {
  let i6, s6 = 0, n5 = t3 - e8.mediaSequence;
  for (; n5 < e8.segments.length; n5++) {
    if (i6 = e8.segments[n5], void 0 !== i6.start) return { result: i6.start - s6, precise: true };
    if (s6 += Mu(e8, i6), void 0 !== i6.end) return { result: i6.end - s6, precise: true };
  }
  return { result: -1, precise: false };
};
var Hu = function(e8, t3, i6) {
  if (void 0 === t3 && (t3 = e8.mediaSequence + e8.segments.length), t3 < e8.mediaSequence) return 0;
  const s6 = ju(e8, t3);
  if (s6.precise) return s6.result;
  const n5 = $u(e8, t3);
  return n5.precise ? n5.result : s6.result + i6;
};
var Vu = function(e8, t3, i6) {
  if (!e8) return 0;
  if ("number" != typeof i6 && (i6 = 0), void 0 === t3) {
    if (e8.totalDuration) return e8.totalDuration;
    if (!e8.endList) return b4.Infinity;
  }
  return Hu(e8, t3, i6);
};
var zu = function({ defaultDuration: e8, durationList: t3, startIndex: i6, endIndex: s6 }) {
  let n5 = 0;
  if (i6 > s6 && ([i6, s6] = [s6, i6]), i6 < 0) {
    for (let t4 = i6; t4 < Math.min(0, s6); t4++) n5 += e8;
    i6 = 0;
  }
  for (let r4 = i6; r4 < s6; r4++) n5 += t3[r4].duration;
  return n5;
};
var Wu = function(e8, t3, i6, s6) {
  if (!e8 || !e8.segments) return null;
  if (e8.endList) return Vu(e8);
  if (null === t3) return null;
  t3 = t3 || 0;
  let n5 = Hu(e8, e8.mediaSequence + e8.segments.length, t3);
  return i6 && (n5 -= s6 = "number" == typeof s6 ? s6 : qu(null, e8)), Math.max(0, n5);
};
var Gu = function(e8) {
  return e8.excludeUntil && e8.excludeUntil > Date.now();
};
var Xu = function(e8) {
  return e8.excludeUntil && e8.excludeUntil === 1 / 0;
};
var Ku = function(e8) {
  const t3 = Gu(e8);
  return !e8.disabled && !t3;
};
var Yu = function(e8, t3) {
  return t3.attributes && t3.attributes[e8];
};
var Qu = function(e8, t3, i6, s6 = 0) {
  if (!Yu("BANDWIDTH", i6)) return NaN;
  return (e8 * i6.attributes.BANDWIDTH - 8 * s6) / t3;
};
var Ju = (e8, t3) => {
  if (1 === e8.playlists.length) return true;
  const i6 = t3.attributes.BANDWIDTH || Number.MAX_VALUE;
  return 0 === e8.playlists.filter((e9) => !!Ku(e9) && (e9.attributes.BANDWIDTH || 0) < i6).length;
};
var Zu = (e8, t3) => !(!e8 && !t3 || !e8 && t3 || e8 && !t3) && (e8 === t3 || (!(!e8.id || !t3.id || e8.id !== t3.id) || (!(!e8.resolvedUri || !t3.resolvedUri || e8.resolvedUri !== t3.resolvedUri) || !(!e8.uri || !t3.uri || e8.uri !== t3.uri))));
var ed = function(e8, t3) {
  const i6 = e8 && e8.mediaGroups && e8.mediaGroups.AUDIO || {};
  let s6 = false;
  for (const n5 in i6) {
    for (const e9 in i6[n5]) if (s6 = t3(i6[n5][e9]), s6) break;
    if (s6) break;
  }
  return !!s6;
};
var td = (e8) => {
  if (!e8 || !e8.playlists || !e8.playlists.length) {
    return ed(e8, (e9) => e9.playlists && e9.playlists.length || e9.uri);
  }
  for (let t3 = 0; t3 < e8.playlists.length; t3++) {
    const i6 = e8.playlists[t3], s6 = i6.attributes && i6.attributes.CODECS;
    if (s6 && s6.split(",").every((e9) => ut(e9))) continue;
    if (!ed(e8, (e9) => Zu(i6, e9))) return false;
  }
  return true;
};
var id = { liveEdgeDelay: qu, duration: Vu, seekable: function(e8, t3, i6) {
  const s6 = t3 || 0;
  let n5 = Wu(e8, t3, true, i6);
  return null === n5 ? Tu() : (n5 < s6 && (n5 = s6), Tu(s6, n5));
}, getMediaInfoForTime: function({ playlist: e8, currentTime: t3, startingSegmentIndex: i6, startingPartIndex: s6, startTime: n5, exactManifestTimings: r4 }) {
  let a6 = t3 - n5;
  const o4 = Uu(e8);
  let l7 = 0;
  for (let h2 = 0; h2 < o4.length; h2++) {
    const e9 = o4[h2];
    if (i6 === e9.segmentIndex && ("number" != typeof s6 || "number" != typeof e9.partIndex || s6 === e9.partIndex)) {
      l7 = h2;
      break;
    }
  }
  if (a6 < 0) {
    if (l7 > 0) for (let t4 = l7 - 1; t4 >= 0; t4--) {
      const i7 = o4[t4];
      if (a6 += i7.duration, r4) {
        if (a6 < 0) continue;
      } else if (a6 + Eu <= 0) continue;
      return { partIndex: i7.partIndex, segmentIndex: i7.segmentIndex, startTime: n5 - zu({ defaultDuration: e8.targetDuration, durationList: o4, startIndex: l7, endIndex: t4 }) };
    }
    return { partIndex: o4[0] && o4[0].partIndex || null, segmentIndex: o4[0] && o4[0].segmentIndex || 0, startTime: t3 };
  }
  if (l7 < 0) {
    for (let i7 = l7; i7 < 0; i7++) if (a6 -= e8.targetDuration, a6 < 0) return { partIndex: o4[0] && o4[0].partIndex || null, segmentIndex: o4[0] && o4[0].segmentIndex || 0, startTime: t3 };
    l7 = 0;
  }
  for (let h2 = l7; h2 < o4.length; h2++) {
    const t4 = o4[h2];
    a6 -= t4.duration;
    const i7 = t4.duration > Eu;
    if (!(0 === a6) && !(i7 && a6 + Eu >= 0) || h2 === o4.length - 1) {
      if (r4) {
        if (a6 > 0) continue;
      } else if (a6 - Eu >= 0) continue;
      return { partIndex: t4.partIndex, segmentIndex: t4.segmentIndex, startTime: n5 + zu({ defaultDuration: e8.targetDuration, durationList: o4, startIndex: l7, endIndex: h2 }) };
    }
  }
  return { segmentIndex: o4[o4.length - 1].segmentIndex, partIndex: o4[o4.length - 1].partIndex, startTime: t3 };
}, isEnabled: Ku, isDisabled: function(e8) {
  return e8.disabled;
}, isExcluded: Gu, isIncompatible: Xu, playlistEnd: Wu, isAes: function(e8) {
  for (let t3 = 0; t3 < e8.segments.length; t3++) if (e8.segments[t3].key) return true;
  return false;
}, hasAttribute: Yu, estimateSegmentRequestTime: Qu, isLowestEnabledRendition: Ju, isAudioOnly: td, playlistMatch: Zu, segmentDurationWithParts: Mu };
var { log: sd } = du;
var nd = (e8, t3) => `${e8}-${t3}`;
var rd = (e8, t3, i6) => `placeholder-uri-${e8}-${t3}-${i6}`;
var ad = ({ onwarn: e8, oninfo: t3, manifestString: i6, customTagParsers: s6 = [], customTagMappers: n5 = [], llhls: r4 }) => {
  const a6 = new tt();
  e8 && a6.on("warn", e8), t3 && a6.on("info", t3), s6.forEach((e9) => a6.addParser(e9)), n5.forEach((e9) => a6.addTagMapper(e9)), a6.push(i6), a6.end();
  const o4 = a6.manifest;
  if (r4 || (["preloadSegment", "skip", "serverControl", "renditionReports", "partInf", "partTargetDuration"].forEach(function(e9) {
    o4.hasOwnProperty(e9) && delete o4[e9];
  }), o4.segments && o4.segments.forEach(function(e9) {
    ["parts", "preloadHints"].forEach(function(t4) {
      e9.hasOwnProperty(t4) && delete e9[t4];
    });
  })), !o4.targetDuration) {
    let t4 = 10;
    o4.segments && o4.segments.length && (t4 = o4.segments.reduce((e9, t5) => Math.max(e9, t5.duration), 0)), e8 && e8({ message: `manifest has no targetDuration defaulting to ${t4}` }), o4.targetDuration = t4;
  }
  const l7 = Bu(o4);
  if (l7.length && !o4.partTargetDuration) {
    const t4 = l7.reduce((e9, t5) => Math.max(e9, t5.duration), 0);
    e8 && (e8({ message: `manifest has no partTargetDuration defaulting to ${t4}` }), sd.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")), o4.partTargetDuration = t4;
  }
  return o4;
};
var od = (e8, t3) => {
  e8.mediaGroups && ["AUDIO", "SUBTITLES"].forEach((i6) => {
    if (e8.mediaGroups[i6]) for (const s6 in e8.mediaGroups[i6]) for (const n5 in e8.mediaGroups[i6][s6]) {
      const r4 = e8.mediaGroups[i6][s6][n5];
      t3(r4, i6, s6, n5);
    }
  });
};
var ld = ({ playlist: e8, uri: t3, id: i6 }) => {
  e8.id = i6, e8.playlistErrors_ = 0, t3 && (e8.uri = t3), e8.attributes = e8.attributes || {};
};
var hd = (e8) => {
  let t3 = e8.playlists.length;
  for (; t3--; ) {
    const i6 = e8.playlists[t3];
    ld({ playlist: i6, id: nd(t3, i6.uri) }), i6.resolvedUri = yu(e8.uri, i6.uri), e8.playlists[i6.id] = i6, e8.playlists[i6.uri] = i6, i6.attributes.BANDWIDTH || sd.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.");
  }
};
var ud = (e8) => {
  od(e8, (t3) => {
    t3.uri && (t3.resolvedUri = yu(e8.uri, t3.uri));
  });
};
var dd = (e8, t3) => {
  const i6 = nd(0, t3), s6 = { mediaGroups: { AUDIO: {}, VIDEO: {}, "CLOSED-CAPTIONS": {}, SUBTITLES: {} }, uri: b4.location.href, resolvedUri: b4.location.href, playlists: [{ uri: t3, id: i6, resolvedUri: t3, attributes: {} }] };
  return s6.playlists[i6] = s6.playlists[0], s6.playlists[t3] = s6.playlists[0], s6;
};
var cd = (e8, t3, i6 = rd) => {
  e8.uri = t3;
  for (let n5 = 0; n5 < e8.playlists.length; n5++) if (!e8.playlists[n5].uri) {
    const t4 = `placeholder-uri-${n5}`;
    e8.playlists[n5].uri = t4;
  }
  const s6 = td(e8);
  od(e8, (t4, n5, r4, a6) => {
    if (!t4.playlists || !t4.playlists.length) {
      if (s6 && "AUDIO" === n5 && !t4.uri) for (let t5 = 0; t5 < e8.playlists.length; t5++) {
        const i7 = e8.playlists[t5];
        if (i7.attributes && i7.attributes.AUDIO && i7.attributes.AUDIO === r4) return;
      }
      t4.playlists = [Fe({}, t4)];
    }
    t4.playlists.forEach(function(t5, s7) {
      const o4 = i6(n5, r4, a6, t5), l7 = nd(s7, o4);
      t5.uri ? t5.resolvedUri = t5.resolvedUri || yu(e8.uri, t5.uri) : (t5.uri = 0 === s7 ? o4 : l7, t5.resolvedUri = t5.uri), t5.id = t5.id || l7, t5.attributes = t5.attributes || {}, e8.playlists[t5.id] = t5, e8.playlists[t5.uri] = t5;
    });
  }), hd(e8), ud(e8);
};
var pd = class {
  constructor() {
    this.offset_ = null, this.pendingDateRanges_ = /* @__PURE__ */ new Map(), this.processedDateRanges_ = /* @__PURE__ */ new Map();
  }
  setOffset(e8 = []) {
    if (null !== this.offset_) return;
    if (!e8.length) return;
    const [t3] = e8;
    void 0 !== t3.programDateTime && (this.offset_ = t3.programDateTime / 1e3);
  }
  setPendingDateRanges(e8 = []) {
    if (!e8.length) return;
    const [t3] = e8, i6 = t3.startDate.getTime();
    this.trimProcessedDateRanges_(i6), this.pendingDateRanges_ = e8.reduce((e9, t4) => (e9.set(t4.id, t4), e9), /* @__PURE__ */ new Map());
  }
  processDateRange(e8) {
    this.pendingDateRanges_.delete(e8.id), this.processedDateRanges_.set(e8.id, e8);
  }
  getDateRangesToProcess() {
    if (null === this.offset_) return [];
    const e8 = {}, t3 = [];
    this.pendingDateRanges_.forEach((i6, s6) => {
      if (!this.processedDateRanges_.has(s6) && (i6.startTime = i6.startDate.getTime() / 1e3 - this.offset_, i6.processDateRange = () => this.processDateRange(i6), t3.push(i6), i6.class)) if (e8[i6.class]) {
        const t4 = e8[i6.class].push(i6);
        i6.classListIndex = t4 - 1;
      } else e8[i6.class] = [i6], i6.classListIndex = 0;
    });
    for (const i6 of t3) {
      const t4 = e8[i6.class] || [];
      i6.endDate ? i6.endTime = i6.endDate.getTime() / 1e3 - this.offset_ : i6.endOnNext && t4[i6.classListIndex + 1] ? i6.endTime = t4[i6.classListIndex + 1].startTime : i6.duration ? i6.endTime = i6.startTime + i6.duration : i6.plannedDuration ? i6.endTime = i6.startTime + i6.plannedDuration : i6.endTime = i6.startTime;
    }
    return t3;
  }
  trimProcessedDateRanges_(e8) {
    new Map(this.processedDateRanges_).forEach((t3, i6) => {
      t3.startDate.getTime() < e8 && this.processedDateRanges_.delete(i6);
    });
  }
};
var md = 22;
var gd = ({ requestType: e8, request: t3, error: i6, parseFailure: s6 }) => {
  const n5 = t3.status < 200 || t3.status > 299, r4 = t3.status >= 400 && t3.status <= 499, a6 = { uri: t3.uri, requestType: e8 }, o4 = n5 && !r4 || s6;
  if (i6 && r4) a6.error = Fe({}, i6), a6.errorType = du.Error.NetworkRequestFailed;
  else if (t3.aborted) a6.errorType = du.Error.NetworkRequestAborted;
  else if (t3.timedout) a6.erroType = du.Error.NetworkRequestTimeout;
  else if (o4) {
    const e9 = s6 ? du.Error.NetworkBodyParserFailed : du.Error.NetworkBadStatus;
    a6.errorType = e9, a6.status = t3.status, a6.headers = t3.headers;
  }
  return a6;
};
var fd = vu("CodecUtils");
var yd = function(e8) {
  const t3 = e8.attributes || {};
  if (t3.CODECS) return lt(t3.CODECS);
};
var _d = (e8, t3) => {
  const i6 = t3.attributes || {};
  return e8 && e8.mediaGroups && e8.mediaGroups.AUDIO && i6.AUDIO && e8.mediaGroups.AUDIO[i6.AUDIO];
};
var vd = (e8, t3) => {
  if (!_d(e8, t3)) return true;
  const i6 = t3.attributes || {}, s6 = e8.mediaGroups.AUDIO[i6.AUDIO];
  for (const n5 in s6) if (!s6[n5].uri && !s6[n5].playlists) return true;
  return false;
};
var bd = function(e8) {
  const t3 = {};
  return e8.forEach(({ mediaType: e9, type: i6, details: s6 }) => {
    t3[e9] = t3[e9] || [], t3[e9].push(ot(`${i6}${s6}`));
  }), Object.keys(t3).forEach(function(e9) {
    if (t3[e9].length > 1) return fd(`multiple ${e9} codecs found as attributes: ${t3[e9].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`), void (t3[e9] = null);
    t3[e9] = t3[e9][0];
  }), t3;
};
var Td = function(e8) {
  let t3 = 0;
  return e8.audio && t3++, e8.video && t3++, t3;
};
var Sd = function(e8, t3) {
  const i6 = t3.attributes || {}, s6 = bd(yd(t3) || []);
  if (_d(e8, t3) && !s6.audio && !vd(e8, t3)) {
    const t4 = bd(ht(e8, i6.AUDIO) || []);
    t4.audio && (s6.audio = t4.audio);
  }
  return s6;
};
var { EventTarget: Ed } = du;
var wd = (e8, t3) => {
  if (t3.endList || !t3.serverControl) return e8;
  const i6 = {};
  if (t3.serverControl.canBlockReload) {
    const { preloadSegment: e9 } = t3;
    let s6 = t3.mediaSequence + t3.segments.length;
    if (e9) {
      const n5 = e9.parts || [], r4 = Fu(t3) - 1;
      r4 > -1 && r4 !== n5.length - 1 && (i6._HLS_part = r4), (r4 > -1 || n5.length) && s6--;
    }
    i6._HLS_msn = s6;
  }
  if (t3.serverControl && t3.serverControl.canSkipUntil && (i6._HLS_skip = t3.serverControl.canSkipDateranges ? "v2" : "YES"), Object.keys(i6).length) {
    const t4 = new b4.URL(e8);
    ["_HLS_skip", "_HLS_msn", "_HLS_part"].forEach(function(e9) {
      i6.hasOwnProperty(e9) && t4.searchParams.set(e9, i6[e9]);
    }), e8 = t4.toString();
  }
  return e8;
};
var Cd = (e8, t3) => {
  if (!e8) return t3;
  const i6 = bu(e8, t3);
  if (e8.preloadHints && !t3.preloadHints && delete i6.preloadHints, e8.parts && !t3.parts) delete i6.parts;
  else if (e8.parts && t3.parts) for (let s6 = 0; s6 < t3.parts.length; s6++) e8.parts && e8.parts[s6] && (i6.parts[s6] = bu(e8.parts[s6], t3.parts[s6]));
  return !e8.skipped && t3.skipped && (i6.skipped = false), e8.preload && !t3.preload && (i6.preload = false), i6;
};
var kd = (e8, t3, i6) => {
  const s6 = e8.slice(), n5 = t3.slice();
  i6 = i6 || 0;
  const r4 = [];
  let a6;
  for (let o4 = 0; o4 < n5.length; o4++) {
    const e9 = s6[o4 + i6], t4 = n5[o4];
    e9 ? (a6 = e9.map || a6, r4.push(Cd(e9, t4))) : (a6 && !t4.map && (t4.map = a6), r4.push(t4));
  }
  return r4;
};
var Id = (e8, t3) => {
  !e8.resolvedUri && e8.uri && (e8.resolvedUri = yu(t3, e8.uri)), e8.key && !e8.key.resolvedUri && (e8.key.resolvedUri = yu(t3, e8.key.uri)), e8.map && !e8.map.resolvedUri && (e8.map.resolvedUri = yu(t3, e8.map.uri)), e8.map && e8.map.key && !e8.map.key.resolvedUri && (e8.map.key.resolvedUri = yu(t3, e8.map.key.uri)), e8.parts && e8.parts.length && e8.parts.forEach((e9) => {
    e9.resolvedUri || (e9.resolvedUri = yu(t3, e9.uri));
  }), e8.preloadHints && e8.preloadHints.length && e8.preloadHints.forEach((e9) => {
    e9.resolvedUri || (e9.resolvedUri = yu(t3, e9.uri));
  });
};
var xd = function(e8) {
  const t3 = e8.segments || [], i6 = e8.preloadSegment;
  if (i6 && i6.parts && i6.parts.length) {
    if (i6.preloadHints) {
      for (let e9 = 0; e9 < i6.preloadHints.length; e9++) if ("MAP" === i6.preloadHints[e9].type) return t3;
    }
    i6.duration = e8.targetDuration, i6.preload = true, t3.push(i6);
  }
  return t3;
};
var Ad = (e8, t3) => e8 === t3 || e8.segments && t3.segments && e8.segments.length === t3.segments.length && e8.endList === t3.endList && e8.mediaSequence === t3.mediaSequence && e8.preloadSegment === t3.preloadSegment;
var Dd = (e8, t3, i6 = Ad) => {
  const s6 = bu(e8, {}), n5 = s6.playlists[t3.id];
  if (!n5) return null;
  if (i6(n5, t3)) return null;
  t3.segments = xd(t3);
  const r4 = bu(n5, t3);
  if (r4.preloadSegment && !t3.preloadSegment && delete r4.preloadSegment, n5.segments) {
    if (t3.skip) {
      t3.segments = t3.segments || [];
      for (let e9 = 0; e9 < t3.skip.skippedSegments; e9++) t3.segments.unshift({ skipped: true });
    }
    r4.segments = kd(n5.segments, t3.segments, t3.mediaSequence - n5.mediaSequence);
  }
  r4.segments.forEach((e9) => {
    Id(e9, r4.resolvedUri);
  });
  for (let a6 = 0; a6 < s6.playlists.length; a6++) s6.playlists[a6].id === t3.id && (s6.playlists[a6] = r4);
  return s6.playlists[t3.id] = r4, s6.playlists[t3.uri] = r4, od(e8, (e9, i7, s7, n6) => {
    if (e9.playlists) for (let a6 = 0; a6 < e9.playlists.length; a6++) t3.id === e9.playlists[a6].id && (e9.playlists[a6] = r4);
  }), s6;
};
var Pd = (e8, t3) => {
  const i6 = e8.segments || [], s6 = i6[i6.length - 1], n5 = s6 && s6.parts && s6.parts[s6.parts.length - 1], r4 = n5 && n5.duration || s6 && s6.duration;
  return t3 && r4 ? 1e3 * r4 : 500 * (e8.partTargetDuration || e8.targetDuration || 10);
};
var Ld = (e8, t3, i6) => {
  if (!e8) return;
  const s6 = [];
  return e8.forEach((e9) => {
    if (!e9.attributes) return;
    const { BANDWIDTH: t4, RESOLUTION: i7, CODECS: n5 } = e9.attributes;
    s6.push({ id: e9.id, bandwidth: t4, resolution: i7, codecs: n5 });
  }), { type: t3, isLive: i6, renditions: s6 };
};
var Od = class extends Ed {
  constructor(e8, t3, i6 = {}) {
    if (super(), !e8) throw new Error("A non-empty playlist URL or object is required");
    this.logger_ = vu("PlaylistLoader");
    const { withCredentials: s6 = false } = i6;
    this.src = e8, this.vhs_ = t3, this.withCredentials = s6, this.addDateRangesToTextTrack_ = i6.addDateRangesToTextTrack;
    const n5 = t3.options_;
    this.customTagParsers = n5 && n5.customTagParsers || [], this.customTagMappers = n5 && n5.customTagMappers || [], this.llhls = n5 && n5.llhls, this.dateRangesStorage_ = new pd(), this.state = "HAVE_NOTHING", this.handleMediaupdatetimeout_ = this.handleMediaupdatetimeout_.bind(this), this.on("mediaupdatetimeout", this.handleMediaupdatetimeout_), this.on("loadedplaylist", this.handleLoadedPlaylist_.bind(this));
  }
  handleLoadedPlaylist_() {
    const e8 = this.media();
    if (!e8) return;
    this.dateRangesStorage_.setOffset(e8.segments), this.dateRangesStorage_.setPendingDateRanges(e8.dateRanges);
    const t3 = this.dateRangesStorage_.getDateRangesToProcess();
    t3.length && this.addDateRangesToTextTrack_ && this.addDateRangesToTextTrack_(t3);
  }
  handleMediaupdatetimeout_() {
    if ("HAVE_METADATA" !== this.state) return;
    const e8 = this.media();
    let t3 = yu(this.main.uri, e8.uri);
    this.llhls && (t3 = wd(t3, e8)), this.state = "HAVE_CURRENT_METADATA", this.request = this.vhs_.xhr({ uri: t3, withCredentials: this.withCredentials, requestType: "hls-playlist" }, (e9, t4) => {
      if (this.request) return e9 ? this.playlistRequestError(this.request, this.media(), "HAVE_METADATA") : void this.haveMetadata({ playlistString: this.request.responseText, url: this.media().uri, id: this.media().id });
    });
  }
  playlistRequestError(e8, t3, i6) {
    const { uri: s6, id: n5 } = t3;
    this.request = null, i6 && (this.state = i6), this.error = { playlist: this.main.playlists[n5], status: e8.status, message: `HLS playlist request error at URL: ${s6}.`, responseText: e8.responseText, code: e8.status >= 500 ? 4 : 2, metadata: gd({ requestType: e8.requestType, request: e8, error: e8.error }) }, this.trigger("error");
  }
  parseManifest_({ url: e8, manifestString: t3 }) {
    try {
      const i6 = ad({ onwarn: ({ message: t4 }) => this.logger_(`m3u8-parser warn for ${e8}: ${t4}`), oninfo: ({ message: t4 }) => this.logger_(`m3u8-parser info for ${e8}: ${t4}`), manifestString: t3, customTagParsers: this.customTagParsers, customTagMappers: this.customTagMappers, llhls: this.llhls });
      return i6.playlists && i6.playlists.length ? (this.excludeAudioOnlyVariants(i6.playlists), i6) : i6;
    } catch (i6) {
      this.error = i6, this.error.metadata = { errorType: du.Error.StreamingHlsPlaylistParserError, error: i6 };
    }
  }
  excludeAudioOnlyVariants(e8) {
    const t3 = (e9) => {
      const t4 = e9.attributes || {}, { width: i6, height: s6 } = t4.RESOLUTION || {};
      if (i6 && s6) return true;
      const n5 = yd(e9) || [], r4 = bd(n5);
      return Boolean(r4.video);
    };
    e8.some(t3) && e8.forEach((e9) => {
      t3(e9) || (e9.excludeUntil = 1 / 0);
    });
  }
  haveMetadata({ playlistString: e8, playlistObject: t3, url: i6, id: s6 }) {
    this.request = null, this.state = "HAVE_METADATA";
    const n5 = { playlistInfo: { type: "media", uri: i6 } };
    this.trigger({ type: "playlistparsestart", metadata: n5 });
    const r4 = t3 || this.parseManifest_({ url: i6, manifestString: e8 });
    r4.lastRequest = Date.now(), ld({ playlist: r4, uri: i6, id: s6 });
    const a6 = Dd(this.main, r4);
    this.targetDuration = r4.partTargetDuration || r4.targetDuration, this.pendingMedia_ = null, a6 ? (this.main = a6, this.media_ = this.main.playlists[s6]) : this.trigger("playlistunchanged"), this.updateMediaUpdateTimeout_(Pd(this.media(), !!a6)), n5.parsedPlaylist = Ld(this.main.playlists, n5.playlistInfo.type, !this.media_.endList), this.trigger({ type: "playlistparsecomplete", metadata: n5 }), this.trigger("loadedplaylist");
  }
  dispose() {
    this.trigger("dispose"), this.stopRequest(), b4.clearTimeout(this.mediaUpdateTimeout), b4.clearTimeout(this.finalRenditionTimeout), this.dateRangesStorage_ = new pd(), this.off();
  }
  stopRequest() {
    if (this.request) {
      const e8 = this.request;
      this.request = null, e8.onreadystatechange = null, e8.abort();
    }
  }
  media(e8, t3) {
    if (!e8) return this.media_;
    if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state);
    if ("string" == typeof e8) {
      if (!this.main.playlists[e8]) throw new Error("Unknown playlist URI: " + e8);
      e8 = this.main.playlists[e8];
    }
    if (b4.clearTimeout(this.finalRenditionTimeout), t3) {
      const t4 = (e8.partTargetDuration || e8.targetDuration) / 2 * 1e3 || 5e3;
      return void (this.finalRenditionTimeout = b4.setTimeout(this.media.bind(this, e8, false), t4));
    }
    const i6 = this.state, s6 = !this.media_ || e8.id !== this.media_.id, n5 = this.main.playlists[e8.id];
    if (n5 && n5.endList || e8.endList && e8.segments.length) return this.request && (this.request.onreadystatechange = null, this.request.abort(), this.request = null), this.state = "HAVE_METADATA", this.media_ = e8, void (s6 && (this.trigger("mediachanging"), "HAVE_MAIN_MANIFEST" === i6 ? this.trigger("loadedmetadata") : this.trigger("mediachange")));
    if (this.updateMediaUpdateTimeout_(Pd(e8, true)), !s6) return;
    if (this.state = "SWITCHING_MEDIA", this.request) {
      if (e8.resolvedUri === this.request.url) return;
      this.request.onreadystatechange = null, this.request.abort(), this.request = null;
    }
    this.media_ && this.trigger("mediachanging"), this.pendingMedia_ = e8;
    const r4 = { playlistInfo: { type: "media", uri: e8.uri } };
    this.trigger({ type: "playlistrequeststart", metadata: r4 }), this.request = this.vhs_.xhr({ uri: e8.resolvedUri, withCredentials: this.withCredentials, requestType: "hls-playlist" }, (t4, s7) => {
      if (this.request) {
        if (e8.lastRequest = Date.now(), e8.resolvedUri = _u(e8.resolvedUri, s7), t4) return this.playlistRequestError(this.request, e8, i6);
        this.trigger({ type: "playlistrequestcomplete", metadata: r4 }), this.haveMetadata({ playlistString: s7.responseText, url: e8.uri, id: e8.id }), "HAVE_MAIN_MANIFEST" === i6 ? this.trigger("loadedmetadata") : this.trigger("mediachange");
      }
    });
  }
  pause() {
    this.mediaUpdateTimeout && (b4.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null), this.stopRequest(), "HAVE_NOTHING" === this.state && (this.started = false), "SWITCHING_MEDIA" === this.state ? this.media_ ? this.state = "HAVE_METADATA" : this.state = "HAVE_MAIN_MANIFEST" : "HAVE_CURRENT_METADATA" === this.state && (this.state = "HAVE_METADATA");
  }
  load(e8) {
    this.mediaUpdateTimeout && (b4.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null);
    const t3 = this.media();
    if (e8) {
      const e9 = t3 ? (t3.partTargetDuration || t3.targetDuration) / 2 * 1e3 : 5e3;
      return void (this.mediaUpdateTimeout = b4.setTimeout(() => {
        this.mediaUpdateTimeout = null, this.load();
      }, e9));
    }
    this.started ? t3 && !t3.endList ? this.trigger("mediaupdatetimeout") : this.trigger("loadedplaylist") : this.start();
  }
  updateMediaUpdateTimeout_(e8) {
    this.mediaUpdateTimeout && (b4.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null), this.media() && !this.media().endList && (this.mediaUpdateTimeout = b4.setTimeout(() => {
      this.mediaUpdateTimeout = null, this.trigger("mediaupdatetimeout"), this.updateMediaUpdateTimeout_(e8);
    }, e8));
  }
  start() {
    if (this.started = true, "object" == typeof this.src) return this.src.uri || (this.src.uri = b4.location.href), this.src.resolvedUri = this.src.uri, void setTimeout(() => {
      this.setupInitialPlaylist(this.src);
    }, 0);
    const e8 = { playlistInfo: { type: "multivariant", uri: this.src } };
    this.trigger({ type: "playlistrequeststart", metadata: e8 }), this.request = this.vhs_.xhr({ uri: this.src, withCredentials: this.withCredentials, requestType: "hls-playlist" }, (t3, i6) => {
      if (!this.request) return;
      if (this.request = null, t3) return this.error = { status: i6.status, message: `HLS playlist request error at URL: ${this.src}.`, responseText: i6.responseText, code: 2, metadata: gd({ requestType: i6.requestType, request: i6, error: t3 }) }, "HAVE_NOTHING" === this.state && (this.started = false), this.trigger("error");
      this.trigger({ type: "playlistrequestcomplete", metadata: e8 }), this.src = _u(this.src, i6), this.trigger({ type: "playlistparsestart", metadata: e8 });
      const s6 = this.parseManifest_({ manifestString: i6.responseText, url: this.src });
      e8.parsedPlaylist = Ld(s6.playlists, e8.playlistInfo.type, false), this.trigger({ type: "playlistparsecomplete", metadata: e8 }), this.setupInitialPlaylist(s6);
    });
  }
  srcUri() {
    return "string" == typeof this.src ? this.src : this.src.uri;
  }
  setupInitialPlaylist(e8) {
    if (this.state = "HAVE_MAIN_MANIFEST", e8.playlists) return this.main = e8, cd(this.main, this.srcUri()), e8.playlists.forEach((e9) => {
      e9.segments = xd(e9), e9.segments.forEach((t4) => {
        Id(t4, e9.resolvedUri);
      });
    }), this.trigger("loadedplaylist"), void (this.request || this.media(this.main.playlists[0]));
    const t3 = this.srcUri() || b4.location.href;
    this.main = dd(e8, t3), this.haveMetadata({ playlistObject: e8, url: t3, id: this.main.playlists[0].id }), this.trigger("loadedmetadata");
  }
  updateOrDeleteClone(e8, t3) {
    const i6 = this.main, s6 = e8.ID;
    let n5 = i6.playlists.length;
    for (; n5--; ) {
      const r4 = i6.playlists[n5];
      if (r4.attributes["PATHWAY-ID"] === s6) {
        const a6 = r4.resolvedUri, o4 = r4.id;
        if (t3) {
          const t4 = this.createCloneURI_(r4.resolvedUri, e8), a7 = nd(s6, t4), o5 = this.createCloneAttributes_(s6, r4.attributes), l7 = this.createClonePlaylist_(r4, a7, e8, o5);
          i6.playlists[n5] = l7, i6.playlists[a7] = l7, i6.playlists[t4] = l7;
        } else i6.playlists.splice(n5, 1);
        delete i6.playlists[o4], delete i6.playlists[a6];
      }
    }
    this.updateOrDeleteCloneMedia(e8, t3);
  }
  updateOrDeleteCloneMedia(e8, t3) {
    const i6 = this.main, s6 = e8.ID;
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((e9) => {
      if (i6.mediaGroups[e9] && i6.mediaGroups[e9][s6]) {
        for (const t4 in i6.mediaGroups[e9]) if (t4 === s6) {
          for (const s7 in i6.mediaGroups[e9][t4]) {
            i6.mediaGroups[e9][t4][s7].playlists.forEach((e10, t5) => {
              const s8 = i6.playlists[e10.id], n5 = s8.id, r4 = s8.resolvedUri;
              delete i6.playlists[n5], delete i6.playlists[r4];
            });
          }
          delete i6.mediaGroups[e9][t4];
        }
      }
    }), t3 && this.createClonedMediaGroups_(e8);
  }
  addClonePathway(e8, t3 = {}) {
    const i6 = this.main, s6 = i6.playlists.length, n5 = this.createCloneURI_(t3.resolvedUri, e8), r4 = nd(e8.ID, n5), a6 = this.createCloneAttributes_(e8.ID, t3.attributes), o4 = this.createClonePlaylist_(t3, r4, e8, a6);
    i6.playlists[s6] = o4, i6.playlists[r4] = o4, i6.playlists[n5] = o4, this.createClonedMediaGroups_(e8);
  }
  createClonedMediaGroups_(e8) {
    const t3 = e8.ID, i6 = e8["BASE-ID"], s6 = this.main;
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((n5) => {
      if (s6.mediaGroups[n5] && !s6.mediaGroups[n5][t3]) {
        for (const r4 in s6.mediaGroups[n5]) if (r4 === i6) {
          s6.mediaGroups[n5][t3] = {};
          for (const i7 in s6.mediaGroups[n5][r4]) {
            const a6 = s6.mediaGroups[n5][r4][i7];
            s6.mediaGroups[n5][t3][i7] = Fe({}, a6);
            const o4 = s6.mediaGroups[n5][t3][i7], l7 = this.createCloneURI_(a6.resolvedUri, e8);
            o4.resolvedUri = l7, o4.uri = l7, o4.playlists = [], a6.playlists.forEach((r5, a7) => {
              const l8 = s6.playlists[r5.id], h2 = rd(n5, t3, i7), u5 = nd(t3, h2);
              if (l8 && !s6.playlists[u5]) {
                const t4 = this.createClonePlaylist_(l8, u5, e8), i8 = t4.resolvedUri;
                s6.playlists[u5] = t4, s6.playlists[i8] = t4;
              }
              o4.playlists[a7] = this.createClonePlaylist_(r5, u5, e8);
            });
          }
        }
      }
    });
  }
  createClonePlaylist_(e8, t3, i6, s6) {
    const n5 = this.createCloneURI_(e8.resolvedUri, i6), r4 = { resolvedUri: n5, uri: n5, id: t3 };
    return e8.segments && (r4.segments = []), s6 && (r4.attributes = s6), bu(e8, r4);
  }
  createCloneURI_(e8, t3) {
    const i6 = new URL(e8);
    i6.hostname = t3["URI-REPLACEMENT"].HOST;
    const s6 = t3["URI-REPLACEMENT"].PARAMS;
    for (const n5 of Object.keys(s6)) i6.searchParams.set(n5, s6[n5]);
    return i6.href;
  }
  createCloneAttributes_(e8, t3) {
    const i6 = { "PATHWAY-ID": e8 };
    return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((s6) => {
      t3[s6] && (i6[s6] = e8);
    }), i6;
  }
  getKeyIdSet(e8) {
    if (e8.contentProtection) {
      const t3 = /* @__PURE__ */ new Set();
      for (const i6 in e8.contentProtection) {
        const s6 = e8.contentProtection[i6].attributes.keyId;
        s6 && t3.add(s6.toLowerCase());
      }
      return t3;
    }
  }
};
var Nd = function(e8, t3, i6, s6) {
  const n5 = "arraybuffer" === e8.responseType ? e8.response : e8.responseText;
  !t3 && n5 && (e8.responseTime = Date.now(), e8.roundTripTime = e8.responseTime - e8.requestTime, e8.bytesReceived = n5.byteLength || n5.length, e8.bandwidth || (e8.bandwidth = Math.floor(e8.bytesReceived / e8.roundTripTime * 8 * 1e3))), i6.headers && (e8.responseHeaders = i6.headers), t3 && "ETIMEDOUT" === t3.code && (e8.timedout = true), t3 || e8.aborted || 200 === i6.statusCode || 206 === i6.statusCode || 0 === i6.statusCode || (t3 = new Error("XHR Failed with a response of: " + (e8 && (n5 || e8.responseText)))), s6(t3, e8);
};
var Rd = (e8, t3) => {
  if (!e8 || !e8.size) return;
  let i6 = t3;
  return e8.forEach((e9) => {
    i6 = e9(i6);
  }), i6;
};
var Md = (e8, t3, i6, s6) => {
  e8 && e8.size && e8.forEach((e9) => {
    e9(t3, i6, s6);
  });
};
var Ud = function() {
  const e8 = function e9(t3, i6) {
    t3 = bu({ timeout: 45e3 }, t3);
    const s6 = e9.beforeRequest || du.Vhs.xhr.beforeRequest, n5 = e9._requestCallbackSet || du.Vhs.xhr._requestCallbackSet || /* @__PURE__ */ new Set(), r4 = e9._responseCallbackSet || du.Vhs.xhr._responseCallbackSet;
    s6 && "function" == typeof s6 && (du.log.warn("beforeRequest is deprecated, use onRequest instead."), n5.add(s6));
    const a6 = true === du.Vhs.xhr.original ? du.xhr : du.Vhs.xhr, o4 = Rd(n5, t3);
    n5.delete(s6);
    const l7 = a6(o4 || t3, function(e10, t4) {
      return Md(r4, l7, e10, t4), Nd(l7, e10, t4, i6);
    }), h2 = l7.abort;
    return l7.abort = function() {
      return l7.aborted = true, h2.apply(l7, arguments);
    }, l7.uri = t3.uri, l7.requestType = t3.requestType, l7.requestTime = Date.now(), l7;
  };
  return e8.original = true, e8;
};
var Bd = function(e8) {
  let t3;
  const i6 = e8.offset;
  return t3 = "bigint" == typeof e8.offset || "bigint" == typeof e8.length ? b4.BigInt(e8.offset) + b4.BigInt(e8.length) - b4.BigInt(1) : e8.offset + e8.length - 1, "bytes=" + i6 + "-" + t3;
};
var Fd = function(e8) {
  const t3 = {};
  return e8.byterange && (t3.Range = Bd(e8.byterange)), t3;
};
var qd = function(e8, t3) {
  return e8.start(t3) + "-" + e8.end(t3);
};
var jd = function(e8, t3) {
  const i6 = e8.toString(16);
  return "00".substring(0, 2 - i6.length) + i6 + (t3 % 2 ? " " : "");
};
var $d = function(e8) {
  return e8 >= 32 && e8 < 126 ? String.fromCharCode(e8) : ".";
};
var Hd = function(e8) {
  const t3 = {};
  return Object.keys(e8).forEach((i6) => {
    const s6 = e8[i6];
    St(s6) ? t3[i6] = { bytes: s6.buffer, byteOffset: s6.byteOffset, byteLength: s6.byteLength } : t3[i6] = s6;
  }), t3;
};
var Vd = function(e8) {
  const t3 = e8.byterange || { length: 1 / 0, offset: 0 };
  return [t3.length, t3.offset, e8.resolvedUri].join(",");
};
var zd = function(e8) {
  return e8.resolvedUri;
};
var Wd = (e8) => {
  const t3 = Array.prototype.slice.call(e8), i6 = 16;
  let s6, n5, r4 = "";
  for (let a6 = 0; a6 < t3.length / i6; a6++) s6 = t3.slice(a6 * i6, a6 * i6 + i6).map(jd).join(""), n5 = t3.slice(a6 * i6, a6 * i6 + i6).map($d).join(""), r4 += s6 + " " + n5 + "\n";
  return r4;
};
var Gd = ({ bytes: e8 }) => Wd(e8);
var Xd = (e8) => {
  let t3, i6 = "";
  for (t3 = 0; t3 < e8.length; t3++) i6 += qd(e8, t3) + " ";
  return i6;
};
var Kd = Object.freeze({ __proto__: null, createTransferableMessage: Hd, initSegmentId: Vd, segmentKeyId: zd, hexDump: Wd, tagDump: Gd, textRanges: Xd });
var Yd = 0.25;
var Qd = (e8, t3) => {
  if (!t3.dateTimeObject) return null;
  const i6 = t3.videoTimingInfo.transmuxerPrependedSeconds, s6 = e8 - (t3.videoTimingInfo.transmuxedPresentationStart + i6);
  return new Date(t3.dateTimeObject.getTime() + 1e3 * s6);
};
var Jd = (e8) => e8.transmuxedPresentationEnd - e8.transmuxedPresentationStart - e8.transmuxerPrependedSeconds;
var Zd = (e8, t3) => {
  let i6;
  try {
    i6 = new Date(e8);
  } catch (o4) {
    return null;
  }
  if (!t3 || !t3.segments || 0 === t3.segments.length) return null;
  let s6 = t3.segments[0];
  if (i6 < new Date(s6.dateTimeObject)) return null;
  for (let l7 = 0; l7 < t3.segments.length - 1; l7++) {
    s6 = t3.segments[l7];
    if (i6 < new Date(t3.segments[l7 + 1].dateTimeObject)) break;
  }
  const n5 = t3.segments[t3.segments.length - 1], r4 = n5.dateTimeObject, a6 = n5.videoTimingInfo ? Jd(n5.videoTimingInfo) : n5.duration + n5.duration * Yd;
  return i6 > new Date(r4.getTime() + 1e3 * a6) ? null : (i6 > new Date(r4) && (s6 = n5), { segment: s6, estimatedStart: s6.videoTimingInfo ? s6.videoTimingInfo.transmuxedPresentationStart : id.duration(t3, t3.mediaSequence + t3.segments.indexOf(s6)), type: s6.videoTimingInfo ? "accurate" : "estimate" });
};
var ec = (e8, t3) => {
  if (!t3 || !t3.segments || 0 === t3.segments.length) return null;
  let i6, s6 = 0;
  for (let r4 = 0; r4 < t3.segments.length && (i6 = t3.segments[r4], s6 = i6.videoTimingInfo ? i6.videoTimingInfo.transmuxedPresentationEnd : s6 + i6.duration, !(e8 <= s6)); r4++) ;
  const n5 = t3.segments[t3.segments.length - 1];
  if (n5.videoTimingInfo && n5.videoTimingInfo.transmuxedPresentationEnd < e8) return null;
  if (e8 > s6) {
    if (e8 > s6 + n5.duration * Yd) return null;
    i6 = n5;
  }
  return { segment: i6, estimatedStart: i6.videoTimingInfo ? i6.videoTimingInfo.transmuxedPresentationStart : s6 - i6.duration, type: i6.videoTimingInfo ? "accurate" : "estimate" };
};
var tc = (e8, t3) => {
  let i6, s6;
  try {
    i6 = new Date(e8), s6 = new Date(t3);
  } catch (r4) {
  }
  const n5 = i6.getTime();
  return (s6.getTime() - n5) / 1e3;
};
var ic = (e8) => {
  if (!e8.segments || 0 === e8.segments.length) return false;
  for (let t3 = 0; t3 < e8.segments.length; t3++) {
    if (!e8.segments[t3].dateTimeObject) return false;
  }
  return true;
};
var sc = ({ playlist: e8, time: t3, callback: i6 }) => {
  if (!i6) throw new Error("getProgramTime: callback must be provided");
  if (!e8 || void 0 === t3) return i6({ message: "getProgramTime: playlist and time must be provided" });
  const s6 = ec(t3, e8);
  if (!s6) return i6({ message: "valid programTime was not found" });
  if ("estimate" === s6.type) return i6({ message: "Accurate programTime could not be determined. Please seek to e.seekTime and try again", seekTime: s6.estimatedStart });
  const n5 = { mediaSeconds: t3 }, r4 = Qd(t3, s6.segment);
  return r4 && (n5.programDateTime = r4.toISOString()), i6(null, n5);
};
var nc = ({ programTime: e8, playlist: t3, retryCount: i6 = 2, seekTo: s6, pauseAfterSeek: n5 = true, tech: r4, callback: a6 }) => {
  if (!a6) throw new Error("seekToProgramTime: callback must be provided");
  if (void 0 === e8 || !t3 || !s6) return a6({ message: "seekToProgramTime: programTime, seekTo and playlist must be provided" });
  if (!t3.endList && !r4.hasStarted_) return a6({ message: "player must be playing a live stream to start buffering" });
  if (!ic(t3)) return a6({ message: "programDateTime tags must be provided in the manifest " + t3.resolvedUri });
  const o4 = Zd(e8, t3);
  if (!o4) return a6({ message: `${e8} was not found in the stream` });
  const l7 = o4.segment, h2 = tc(l7.dateTimeObject, e8);
  if ("estimate" === o4.type) return 0 === i6 ? a6({ message: `${e8} is not buffered yet. Try again` }) : (s6(o4.estimatedStart + h2), void r4.one("seeked", () => {
    nc({ programTime: e8, playlist: t3, retryCount: i6 - 1, seekTo: s6, pauseAfterSeek: n5, tech: r4, callback: a6 });
  }));
  const u5 = l7.start + h2, d2 = () => a6(null, r4.currentTime());
  r4.one("seeked", d2), n5 && r4.pause(), s6(u5);
};
var rc = (e8, t3) => {
  if (4 === e8.readyState) return t3();
};
var ac = (e8, t3, i6, s6) => {
  let n5, r4 = [], a6 = false;
  const o4 = function(e9, t4, s7, n6) {
    return t4.abort(), a6 = true, i6(e9, t4, s7, n6);
  }, l7 = function(e9, t4) {
    if (a6) return;
    if (e9) return e9.metadata = gd({ requestType: s6, request: t4, error: e9 }), o4(e9, t4, "", r4);
    const i7 = t4.responseText.substring(r4 && r4.byteLength || 0, t4.responseText.length);
    if (r4 = Lt(r4, Pt(i7, true)), n5 = n5 || xs(r4), r4.length < 10 || n5 && r4.length < n5 + 2) return rc(t4, () => o4(e9, t4, "", r4));
    const l8 = Zs(r4);
    return "ts" === l8 && r4.length < 188 || !l8 && r4.length < 376 ? rc(t4, () => o4(e9, t4, "", r4)) : o4(null, t4, l8, r4);
  }, h2 = { uri: e8, beforeSend(e9) {
    e9.overrideMimeType("text/plain; charset=x-user-defined"), e9.addEventListener("progress", function({ total: t4, loaded: i7 }) {
      return Nd(e9, null, { statusCode: e9.status }, l7);
    });
  } }, u5 = t3(h2, function(e9, t4) {
    return Nd(u5, e9, t4, l7);
  });
  return u5;
};
var { EventTarget: oc } = du;
var lc = function(e8, t3) {
  if (!Ad(e8, t3)) return false;
  if (e8.sidx && t3.sidx && (e8.sidx.offset !== t3.sidx.offset || e8.sidx.length !== t3.sidx.length)) return false;
  if (!e8.sidx && t3.sidx || e8.sidx && !t3.sidx) return false;
  if (e8.segments && !t3.segments || !e8.segments && t3.segments) return false;
  if (!e8.segments && !t3.segments) return true;
  for (let i6 = 0; i6 < e8.segments.length; i6++) {
    const s6 = e8.segments[i6], n5 = t3.segments[i6];
    if (s6.uri !== n5.uri) return false;
    if (!s6.byterange && !n5.byterange) continue;
    const r4 = s6.byterange, a6 = n5.byterange;
    if (r4 && !a6 || !r4 && a6) return false;
    if (r4.offset !== a6.offset || r4.length !== a6.length) return false;
  }
  return true;
};
var hc = (e8, t3, i6, s6) => `placeholder-uri-${e8}-${t3}-${s6.attributes.NAME || i6}`;
var uc = ({ mainXml: e8, srcUrl: t3, clientOffset: i6, sidxMapping: s6, previousManifest: n5 }) => {
  const r4 = ys(e8, { manifestUri: t3, clientOffset: i6, sidxMapping: s6, previousManifest: n5 });
  return cd(r4, t3, hc), r4;
};
var dc = (e8, t3) => {
  od(e8, (i6, s6, n5, r4) => {
    t3.mediaGroups[s6][n5] && r4 in t3.mediaGroups[s6][n5] || delete e8.mediaGroups[s6][n5][r4];
  });
};
var cc = (e8, t3, i6) => {
  let s6 = true, n5 = bu(e8, { duration: t3.duration, minimumUpdatePeriod: t3.minimumUpdatePeriod, timelineStarts: t3.timelineStarts });
  for (let r4 = 0; r4 < t3.playlists.length; r4++) {
    const e9 = t3.playlists[r4];
    if (e9.sidx) {
      const t4 = Ei(e9.sidx);
      i6 && i6[t4] && i6[t4].sidx && mi(e9, i6[t4].sidx, e9.sidx.resolvedUri);
    }
    const a6 = Dd(n5, e9, lc);
    a6 && (n5 = a6, s6 = false);
  }
  return od(t3, (e9, t4, i7, r4) => {
    if (e9.playlists && e9.playlists.length) {
      const a6 = e9.playlists[0].id, o4 = Dd(n5, e9.playlists[0], lc);
      o4 && (n5 = o4, r4 in n5.mediaGroups[t4][i7] || (n5.mediaGroups[t4][i7][r4] = e9), n5.mediaGroups[t4][i7][r4].playlists[0] = n5.playlists[a6], s6 = false);
    }
  }), dc(n5, t3), t3.minimumUpdatePeriod !== e8.minimumUpdatePeriod && (s6 = false), s6 ? null : n5;
};
var pc = (e8, t3) => (Boolean(!e8.map && !t3.map) || Boolean(e8.map && t3.map && e8.map.byterange.offset === t3.map.byterange.offset && e8.map.byterange.length === t3.map.byterange.length)) && e8.uri === t3.uri && e8.byterange.offset === t3.byterange.offset && e8.byterange.length === t3.byterange.length;
var mc = (e8, t3) => {
  const i6 = {};
  for (const s6 in e8) {
    const n5 = e8[s6].sidx;
    if (n5) {
      const e9 = Ei(n5);
      if (!t3[e9]) break;
      const s7 = t3[e9].sidxInfo;
      pc(s7, n5) && (i6[e9] = t3[e9]);
    }
  }
  return i6;
};
var gc = (e8, t3) => {
  let i6 = mc(e8.playlists, t3);
  return od(e8, (e9, s6, n5, r4) => {
    if (e9.playlists && e9.playlists.length) {
      const s7 = e9.playlists;
      i6 = bu(i6, mc(s7, t3));
    }
  }), i6;
};
var fc = class extends oc {
  constructor(e8, t3, i6 = {}, s6) {
    super(), this.isPaused_ = true, this.mainPlaylistLoader_ = s6 || this, s6 || (this.isMain_ = true);
    const { withCredentials: n5 = false } = i6;
    if (this.vhs_ = t3, this.withCredentials = n5, this.addMetadataToTextTrack = i6.addMetadataToTextTrack, !e8) throw new Error("A non-empty playlist URL or object is required");
    this.on("minimumUpdatePeriod", () => {
      this.refreshXml_();
    }), this.on("mediaupdatetimeout", () => {
      this.refreshMedia_(this.media().id);
    }), this.state = "HAVE_NOTHING", this.loadedPlaylists_ = {}, this.logger_ = vu("DashPlaylistLoader"), this.isMain_ ? (this.mainPlaylistLoader_.srcUrl = e8, this.mainPlaylistLoader_.sidxMapping_ = {}) : this.childPlaylist_ = e8;
  }
  get isPaused() {
    return this.isPaused_;
  }
  requestErrored_(e8, t3, i6) {
    return !this.request || (this.request = null, e8 ? (this.error = "object" != typeof e8 || e8 instanceof Error ? { status: t3.status, message: "DASH request error at URL: " + t3.uri, response: t3.response, code: 2, metadata: e8.metadata } : e8, i6 && (this.state = i6), this.trigger("error"), true) : void 0);
  }
  addSidxSegments_(e8, t3, i6) {
    const s6 = e8.sidx && Ei(e8.sidx);
    if (!e8.sidx || !s6 || this.mainPlaylistLoader_.sidxMapping_[s6]) return b4.clearTimeout(this.mediaRequest_), void (this.mediaRequest_ = b4.setTimeout(() => i6(false), 0));
    const n5 = _u(e8.sidx.resolvedUri), r4 = (n6, r5) => {
      if (this.requestErrored_(n6, r5, t3)) return;
      const a7 = this.mainPlaylistLoader_.sidxMapping_, { requestType: o4 } = r5;
      let l7;
      try {
        l7 = Cs(wt(r5.response).subarray(8));
      } catch (h2) {
        return h2.metadata = gd({ requestType: o4, request: r5, parseFailure: true }), void this.requestErrored_(h2, r5, t3);
      }
      return a7[s6] = { sidxInfo: e8.sidx, sidx: l7 }, mi(e8, l7, e8.sidx.resolvedUri), i6(true);
    }, a6 = "dash-sidx";
    this.request = ac(n5, this.vhs_.xhr, (t4, i7, s7, a7) => {
      if (t4) return r4(t4, i7);
      if (!s7 || "mp4" !== s7) {
        const t5 = s7 || "unknown";
        return r4({ status: i7.status, message: `Unsupported ${t5} container type for sidx segment at URL: ${n5}`, response: "", playlist: e8, internal: true, playlistExclusionDuration: 1 / 0, code: 2 }, i7);
      }
      const { offset: o4, length: l7 } = e8.sidx.byterange;
      if (a7.length >= l7 + o4) return r4(t4, { response: a7.subarray(o4, o4 + l7), status: i7.status, uri: i7.uri });
      this.request = this.vhs_.xhr({ uri: n5, responseType: "arraybuffer", requestType: "dash-sidx", headers: Fd({ byterange: e8.sidx.byterange }) }, r4);
    }, a6);
  }
  dispose() {
    this.isPaused_ = true, this.trigger("dispose"), this.stopRequest(), this.loadedPlaylists_ = {}, b4.clearTimeout(this.minimumUpdatePeriodTimeout_), b4.clearTimeout(this.mediaRequest_), b4.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null, this.mediaRequest_ = null, this.minimumUpdatePeriodTimeout_ = null, this.mainPlaylistLoader_.createMupOnMedia_ && (this.off("loadedmetadata", this.mainPlaylistLoader_.createMupOnMedia_), this.mainPlaylistLoader_.createMupOnMedia_ = null), this.off();
  }
  hasPendingRequest() {
    return this.request || this.mediaRequest_;
  }
  stopRequest() {
    if (this.request) {
      const e8 = this.request;
      this.request = null, e8.onreadystatechange = null, e8.abort();
    }
  }
  media(e8) {
    if (!e8) return this.media_;
    if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state);
    const t3 = this.state;
    if ("string" == typeof e8) {
      if (!this.mainPlaylistLoader_.main.playlists[e8]) throw new Error("Unknown playlist URI: " + e8);
      e8 = this.mainPlaylistLoader_.main.playlists[e8];
    }
    const i6 = !this.media_ || e8.id !== this.media_.id;
    if (i6 && this.loadedPlaylists_[e8.id] && this.loadedPlaylists_[e8.id].endList) return this.state = "HAVE_METADATA", this.media_ = e8, void (i6 && (this.trigger("mediachanging"), this.trigger("mediachange")));
    i6 && (this.media_ && this.trigger("mediachanging"), this.addSidxSegments_(e8, t3, (i7) => {
      this.haveMetadata({ startingState: t3, playlist: e8 });
    }));
  }
  haveMetadata({ startingState: e8, playlist: t3 }) {
    this.state = "HAVE_METADATA", this.loadedPlaylists_[t3.id] = t3, b4.clearTimeout(this.mediaRequest_), this.mediaRequest_ = null, this.refreshMedia_(t3.id), "HAVE_MAIN_MANIFEST" === e8 ? this.trigger("loadedmetadata") : this.trigger("mediachange");
  }
  pause() {
    this.isPaused_ = true, this.mainPlaylistLoader_.createMupOnMedia_ && (this.off("loadedmetadata", this.mainPlaylistLoader_.createMupOnMedia_), this.mainPlaylistLoader_.createMupOnMedia_ = null), this.stopRequest(), b4.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null, this.isMain_ && (b4.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_), this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_ = null), "HAVE_NOTHING" === this.state && (this.started = false);
  }
  load(e8) {
    this.isPaused_ = false, b4.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null;
    const t3 = this.media();
    if (e8) {
      const e9 = t3 ? t3.targetDuration / 2 * 1e3 : 5e3;
      return void (this.mediaUpdateTimeout = b4.setTimeout(() => this.load(), e9));
    }
    this.started ? t3 && !t3.endList ? (this.isMain_ && !this.minimumUpdatePeriodTimeout_ && (this.trigger("minimumUpdatePeriod"), this.updateMinimumUpdatePeriodTimeout_()), this.trigger("mediaupdatetimeout")) : this.trigger("loadedplaylist") : this.start();
  }
  start() {
    if (this.started = true, !this.isMain_) return b4.clearTimeout(this.mediaRequest_), void (this.mediaRequest_ = b4.setTimeout(() => this.haveMain_(), 0));
    this.requestMain_((e8, t3) => {
      this.haveMain_(), this.hasPendingRequest() || this.media_ || this.media(this.mainPlaylistLoader_.main.playlists[0]);
    });
  }
  requestMain_(e8) {
    const t3 = { manifestInfo: { uri: this.mainPlaylistLoader_.srcUrl } };
    this.trigger({ type: "manifestrequeststart", metadata: t3 }), this.request = this.vhs_.xhr({ uri: this.mainPlaylistLoader_.srcUrl, withCredentials: this.withCredentials, requestType: "dash-manifest" }, (i6, s6) => {
      if (i6) {
        const { requestType: e9 } = s6;
        i6.metadata = gd({ requestType: e9, request: s6, error: i6 });
      }
      if (this.requestErrored_(i6, s6)) return void ("HAVE_NOTHING" === this.state && (this.started = false));
      this.trigger({ type: "manifestrequestcomplete", metadata: t3 });
      const n5 = s6.responseText !== this.mainPlaylistLoader_.mainXml_;
      return this.mainPlaylistLoader_.mainXml_ = s6.responseText, s6.responseHeaders && s6.responseHeaders.date ? this.mainLoaded_ = Date.parse(s6.responseHeaders.date) : this.mainLoaded_ = Date.now(), this.mainPlaylistLoader_.srcUrl = _u(this.mainPlaylistLoader_.srcUrl, s6), n5 ? (this.handleMain_(), void this.syncClientServerClock_(() => e8(s6, n5))) : e8(s6, n5);
    });
  }
  syncClientServerClock_(e8) {
    const t3 = _s2(this.mainPlaylistLoader_.mainXml_);
    return null === t3 ? (this.mainPlaylistLoader_.clientOffset_ = this.mainLoaded_ - Date.now(), e8()) : "DIRECT" === t3.method ? (this.mainPlaylistLoader_.clientOffset_ = t3.value - Date.now(), e8()) : void (this.request = this.vhs_.xhr({ uri: yu(this.mainPlaylistLoader_.srcUrl, t3.value), method: t3.method, withCredentials: this.withCredentials, requestType: "dash-clock-sync" }, (i6, s6) => {
      if (!this.request) return;
      if (i6) {
        const { requestType: t4 } = s6;
        return this.error.metadata = gd({ requestType: t4, request: s6, error: i6 }), this.mainPlaylistLoader_.clientOffset_ = this.mainLoaded_ - Date.now(), e8();
      }
      let n5;
      n5 = "HEAD" === t3.method ? s6.responseHeaders && s6.responseHeaders.date ? Date.parse(s6.responseHeaders.date) : this.mainLoaded_ : Date.parse(s6.responseText), this.mainPlaylistLoader_.clientOffset_ = n5 - Date.now(), e8();
    }));
  }
  haveMain_() {
    this.state = "HAVE_MAIN_MANIFEST", this.isMain_ ? this.trigger("loadedplaylist") : this.media_ || this.media(this.childPlaylist_);
  }
  handleMain_() {
    b4.clearTimeout(this.mediaRequest_), this.mediaRequest_ = null;
    const e8 = this.mainPlaylistLoader_.main, t3 = { manifestInfo: { uri: this.mainPlaylistLoader_.srcUrl } };
    let i6;
    this.trigger({ type: "manifestparsestart", metadata: t3 });
    try {
      i6 = uc({ mainXml: this.mainPlaylistLoader_.mainXml_, srcUrl: this.mainPlaylistLoader_.srcUrl, clientOffset: this.mainPlaylistLoader_.clientOffset_, sidxMapping: this.mainPlaylistLoader_.sidxMapping_, previousManifest: e8 });
    } catch (n5) {
      this.error = n5, this.error.metadata = { errorType: du.Error.StreamingDashManifestParserError, error: n5 }, this.trigger("error");
    }
    e8 && (i6 = cc(e8, i6, this.mainPlaylistLoader_.sidxMapping_)), this.mainPlaylistLoader_.main = i6 || e8;
    const s6 = this.mainPlaylistLoader_.main.locations && this.mainPlaylistLoader_.main.locations[0];
    if (s6 && s6 !== this.mainPlaylistLoader_.srcUrl && (this.mainPlaylistLoader_.srcUrl = s6), (!e8 || i6 && i6.minimumUpdatePeriod !== e8.minimumUpdatePeriod) && this.updateMinimumUpdatePeriodTimeout_(), this.addEventStreamToMetadataTrack_(i6), i6) {
      const { duration: e9, endList: s7 } = i6, n5 = [];
      i6.playlists.forEach((e10) => {
        n5.push({ id: e10.id, bandwidth: e10.attributes.BANDWIDTH, resolution: e10.attributes.RESOLUTION, codecs: e10.attributes.CODECS });
      });
      const r4 = { duration: e9, isLive: !s7, renditions: n5 };
      t3.parsedManifest = r4, this.trigger({ type: "manifestparsecomplete", metadata: t3 });
    }
    return Boolean(i6);
  }
  updateMinimumUpdatePeriodTimeout_() {
    const e8 = this.mainPlaylistLoader_;
    e8.createMupOnMedia_ && (e8.off("loadedmetadata", e8.createMupOnMedia_), e8.createMupOnMedia_ = null), e8.minimumUpdatePeriodTimeout_ && (b4.clearTimeout(e8.minimumUpdatePeriodTimeout_), e8.minimumUpdatePeriodTimeout_ = null);
    let t3 = e8.main && e8.main.minimumUpdatePeriod;
    0 === t3 && (e8.media() ? t3 = 1e3 * e8.media().targetDuration : (e8.createMupOnMedia_ = e8.updateMinimumUpdatePeriodTimeout_, e8.one("loadedmetadata", e8.createMupOnMedia_))), "number" != typeof t3 || t3 <= 0 ? t3 < 0 && this.logger_(`found invalid minimumUpdatePeriod of ${t3}, not setting a timeout`) : this.createMUPTimeout_(t3);
  }
  createMUPTimeout_(e8) {
    const t3 = this.mainPlaylistLoader_;
    t3.minimumUpdatePeriodTimeout_ = b4.setTimeout(() => {
      t3.minimumUpdatePeriodTimeout_ = null, t3.trigger("minimumUpdatePeriod"), t3.createMUPTimeout_(e8);
    }, e8);
  }
  refreshXml_() {
    this.requestMain_((e8, t3) => {
      t3 && (this.media_ && (this.media_ = this.mainPlaylistLoader_.main.playlists[this.media_.id]), this.mainPlaylistLoader_.sidxMapping_ = gc(this.mainPlaylistLoader_.main, this.mainPlaylistLoader_.sidxMapping_), this.addSidxSegments_(this.media(), this.state, (e9) => {
        this.refreshMedia_(this.media().id);
      }));
    });
  }
  refreshMedia_(e8) {
    if (!e8) throw new Error("refreshMedia_ must take a media id");
    this.media_ && this.isMain_ && this.handleMain_();
    const t3 = this.mainPlaylistLoader_.main.playlists, i6 = !this.media_ || this.media_ !== t3[e8];
    if (i6 ? this.media_ = t3[e8] : this.trigger("playlistunchanged"), !this.mediaUpdateTimeout) {
      const e9 = () => {
        this.media().endList || (this.mediaUpdateTimeout = b4.setTimeout(() => {
          this.trigger("mediaupdatetimeout"), e9();
        }, Pd(this.media(), Boolean(i6))));
      };
      e9();
    }
    this.trigger("loadedplaylist");
  }
  addEventStreamToMetadataTrack_(e8) {
    if (e8 && this.mainPlaylistLoader_.main.eventStream) {
      const e9 = this.mainPlaylistLoader_.main.eventStream.map((e10) => ({ cueTime: e10.start, frames: [{ data: e10.messageData }] }));
      this.addMetadataToTextTrack("EventStream", e9, this.mainPlaylistLoader_.main.duration);
    }
  }
  getKeyIdSet(e8) {
    if (e8.contentProtection) {
      const t3 = /* @__PURE__ */ new Set();
      for (const i6 in e8.contentProtection) {
        const s6 = e8.contentProtection[i6].attributes["cenc:default_KID"];
        s6 && t3.add(s6.replace(/-/g, "").toLowerCase());
      }
      return t3;
    }
  }
};
var yc = { GOAL_BUFFER_LENGTH: 30, MAX_GOAL_BUFFER_LENGTH: 60, BACK_BUFFER_LENGTH: 30, GOAL_BUFFER_LENGTH_RATE: 1, INITIAL_BANDWIDTH: 4194304, BANDWIDTH_VARIANCE: 1.2, BUFFER_LOW_WATER_LINE: 0, MAX_BUFFER_LOW_WATER_LINE: 30, EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE: 16, BUFFER_LOW_WATER_LINE_RATE: 1, BUFFER_HIGH_WATER_LINE: 30 };
var _c = (e8) => {
  const t3 = new Uint8Array(new ArrayBuffer(e8.length));
  for (let i6 = 0; i6 < e8.length; i6++) t3[i6] = e8.charCodeAt(i6);
  return t3.buffer;
};
var vc = function(e8) {
  return e8.on = e8.addEventListener, e8.off = e8.removeEventListener, e8;
};
var bc = function(e8) {
  try {
    return URL.createObjectURL(new Blob([e8], { type: "application/javascript" }));
  } catch (t3) {
    const i6 = new BlobBuilder();
    return i6.append(e8), URL.createObjectURL(i6.getBlob());
  }
};
var Tc = function(e8) {
  return function() {
    const t3 = bc(e8), i6 = vc(new Worker(t3));
    i6.objURL = t3;
    const s6 = i6.terminate;
    return i6.on = i6.addEventListener, i6.off = i6.removeEventListener, i6.terminate = function() {
      return URL.revokeObjectURL(t3), s6.call(this);
    }, i6;
  };
};
var Sc = function(e8) {
  return `var browserWorkerPolyFill = ${vc.toString()};
browserWorkerPolyFill(self);
` + e8;
};
var Ec = function(e8) {
  return e8.toString().replace(/^function.+?{/, "").slice(0, -1);
};
var wc = Sc(Ec(function() {
  var e8 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, t3 = function() {
    this.init = function() {
      var e9 = {};
      this.on = function(t4, i7) {
        e9[t4] || (e9[t4] = []), e9[t4] = e9[t4].concat(i7);
      }, this.off = function(t4, i7) {
        var s7;
        return !!e9[t4] && (s7 = e9[t4].indexOf(i7), e9[t4] = e9[t4].slice(), e9[t4].splice(s7, 1), s7 > -1);
      }, this.trigger = function(t4) {
        var i7, s7, n6, r5;
        if (i7 = e9[t4]) if (2 === arguments.length) for (n6 = i7.length, s7 = 0; s7 < n6; ++s7) i7[s7].call(this, arguments[1]);
        else {
          for (r5 = [], s7 = arguments.length, s7 = 1; s7 < arguments.length; ++s7) r5.push(arguments[s7]);
          for (n6 = i7.length, s7 = 0; s7 < n6; ++s7) i7[s7].apply(this, r5);
        }
      }, this.dispose = function() {
        e9 = {};
      };
    };
  };
  t3.prototype.pipe = function(e9) {
    return this.on("data", function(t4) {
      e9.push(t4);
    }), this.on("done", function(t4) {
      e9.flush(t4);
    }), this.on("partialdone", function(t4) {
      e9.partialFlush(t4);
    }), this.on("endedtimeline", function(t4) {
      e9.endTimeline(t4);
    }), this.on("reset", function(t4) {
      e9.reset(t4);
    }), e9;
  }, t3.prototype.push = function(e9) {
    this.trigger("data", e9);
  }, t3.prototype.flush = function(e9) {
    this.trigger("done", e9);
  }, t3.prototype.partialFlush = function(e9) {
    this.trigger("partialdone", e9);
  }, t3.prototype.endTimeline = function(e9) {
    this.trigger("endedtimeline", e9);
  }, t3.prototype.reset = function(e9) {
    this.trigger("reset", e9);
  };
  var i6, s6, n5, r4, a6, o4, l7, h2, u5, d2, c6, p6, m7, g2, f4, y3, _3, v3, b5, T2, S3, E3, w4, C3, k2, I2, x3, A2, D2, P3, L3, O2, N3, R2, M3, U2, B2, F2, q3, j4, $2 = t3, H3 = Math.pow(2, 32), V3 = { getUint64: function(e9) {
    var t4, i7 = new DataView(e9.buffer, e9.byteOffset, e9.byteLength);
    return i7.getBigUint64 ? (t4 = i7.getBigUint64(0)) < Number.MAX_SAFE_INTEGER ? Number(t4) : t4 : i7.getUint32(0) * H3 + i7.getUint32(4);
  }, MAX_UINT32: H3 }, z3 = V3.MAX_UINT32;
  !(function() {
    var e9;
    if (E3 = { avc1: [], avcC: [], btrt: [], dinf: [], dref: [], esds: [], ftyp: [], hdlr: [], mdat: [], mdhd: [], mdia: [], mfhd: [], minf: [], moof: [], moov: [], mp4a: [], mvex: [], mvhd: [], pasp: [], sdtp: [], smhd: [], stbl: [], stco: [], stsc: [], stsd: [], stsz: [], stts: [], styp: [], tfdt: [], tfhd: [], traf: [], trak: [], trun: [], trex: [], tkhd: [], vmhd: [] }, "undefined" != typeof Uint8Array) {
      for (e9 in E3) E3.hasOwnProperty(e9) && (E3[e9] = [e9.charCodeAt(0), e9.charCodeAt(1), e9.charCodeAt(2), e9.charCodeAt(3)]);
      w4 = new Uint8Array(["i".charCodeAt(0), "s".charCodeAt(0), "o".charCodeAt(0), "m".charCodeAt(0)]), k2 = new Uint8Array(["a".charCodeAt(0), "v".charCodeAt(0), "c".charCodeAt(0), "1".charCodeAt(0)]), C3 = new Uint8Array([0, 0, 0, 1]), I2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]), x3 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]), A2 = { video: I2, audio: x3 }, L3 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]), P3 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), O2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), N3 = O2, R2 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), M3 = O2, D2 = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
    }
  })(), i6 = function(e9) {
    var t4, i7, s7 = [], n6 = 0;
    for (t4 = 1; t4 < arguments.length; t4++) s7.push(arguments[t4]);
    for (t4 = s7.length; t4--; ) n6 += s7[t4].byteLength;
    for (i7 = new Uint8Array(n6 + 8), new DataView(i7.buffer, i7.byteOffset, i7.byteLength).setUint32(0, i7.byteLength), i7.set(e9, 4), t4 = 0, n6 = 8; t4 < s7.length; t4++) i7.set(s7[t4], n6), n6 += s7[t4].byteLength;
    return i7;
  }, s6 = function() {
    return i6(E3.dinf, i6(E3.dref, L3));
  }, n5 = function(e9) {
    return i6(E3.esds, new Uint8Array([0, 0, 0, 0, 3, 25, 0, 0, 0, 4, 17, 64, 21, 0, 6, 0, 0, 0, 218, 192, 0, 0, 218, 192, 5, 2, e9.audioobjecttype << 3 | e9.samplingfrequencyindex >>> 1, e9.samplingfrequencyindex << 7 | e9.channelcount << 3, 6, 1, 2]));
  }, f4 = function(e9) {
    return i6(E3.hdlr, A2[e9]);
  }, g2 = function(e9) {
    var t4 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 3, 0, 1, 95, 144, e9.duration >>> 24 & 255, e9.duration >>> 16 & 255, e9.duration >>> 8 & 255, 255 & e9.duration, 85, 196, 0, 0]);
    return e9.samplerate && (t4[12] = e9.samplerate >>> 24 & 255, t4[13] = e9.samplerate >>> 16 & 255, t4[14] = e9.samplerate >>> 8 & 255, t4[15] = 255 & e9.samplerate), i6(E3.mdhd, t4);
  }, m7 = function(e9) {
    return i6(E3.mdia, g2(e9), f4(e9.type), o4(e9));
  }, a6 = function(e9) {
    return i6(E3.mfhd, new Uint8Array([0, 0, 0, 0, (4278190080 & e9) >> 24, (16711680 & e9) >> 16, (65280 & e9) >> 8, 255 & e9]));
  }, o4 = function(e9) {
    return i6(E3.minf, "video" === e9.type ? i6(E3.vmhd, D2) : i6(E3.smhd, P3), s6(), _3(e9));
  }, l7 = function(e9, t4) {
    for (var s7 = [], n6 = t4.length; n6--; ) s7[n6] = b5(t4[n6]);
    return i6.apply(null, [E3.moof, a6(e9)].concat(s7));
  }, h2 = function(e9) {
    for (var t4 = e9.length, s7 = []; t4--; ) s7[t4] = c6(e9[t4]);
    return i6.apply(null, [E3.moov, d2(4294967295)].concat(s7).concat(u5(e9)));
  }, u5 = function(e9) {
    for (var t4 = e9.length, s7 = []; t4--; ) s7[t4] = T2(e9[t4]);
    return i6.apply(null, [E3.mvex].concat(s7));
  }, d2 = function(e9) {
    var t4 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 1, 95, 144, (4278190080 & e9) >> 24, (16711680 & e9) >> 16, (65280 & e9) >> 8, 255 & e9, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
    return i6(E3.mvhd, t4);
  }, y3 = function(e9) {
    var t4, s7, n6 = e9.samples || [], r5 = new Uint8Array(4 + n6.length);
    for (s7 = 0; s7 < n6.length; s7++) t4 = n6[s7].flags, r5[s7 + 4] = t4.dependsOn << 4 | t4.isDependedOn << 2 | t4.hasRedundancy;
    return i6(E3.sdtp, r5);
  }, _3 = function(e9) {
    return i6(E3.stbl, v3(e9), i6(E3.stts, M3), i6(E3.stsc, N3), i6(E3.stsz, R2), i6(E3.stco, O2));
  }, v3 = function(e9) {
    return i6(E3.stsd, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), "video" === e9.type ? U2(e9) : B2(e9));
  }, U2 = function(e9) {
    var t4, s7, n6 = e9.sps || [], r5 = e9.pps || [], a7 = [], o5 = [];
    for (t4 = 0; t4 < n6.length; t4++) a7.push((65280 & n6[t4].byteLength) >>> 8), a7.push(255 & n6[t4].byteLength), a7 = a7.concat(Array.prototype.slice.call(n6[t4]));
    for (t4 = 0; t4 < r5.length; t4++) o5.push((65280 & r5[t4].byteLength) >>> 8), o5.push(255 & r5[t4].byteLength), o5 = o5.concat(Array.prototype.slice.call(r5[t4]));
    if (s7 = [E3.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e9.width) >> 8, 255 & e9.width, (65280 & e9.height) >> 8, 255 & e9.height, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), i6(E3.avcC, new Uint8Array([1, e9.profileIdc, e9.profileCompatibility, e9.levelIdc, 255].concat([n6.length], a7, [r5.length], o5))), i6(E3.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192]))], e9.sarRatio) {
      var l8 = e9.sarRatio[0], h3 = e9.sarRatio[1];
      s7.push(i6(E3.pasp, new Uint8Array([(4278190080 & l8) >> 24, (16711680 & l8) >> 16, (65280 & l8) >> 8, 255 & l8, (4278190080 & h3) >> 24, (16711680 & h3) >> 16, (65280 & h3) >> 8, 255 & h3])));
    }
    return i6.apply(null, s7);
  }, B2 = function(e9) {
    return i6(E3.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e9.channelcount) >> 8, 255 & e9.channelcount, (65280 & e9.samplesize) >> 8, 255 & e9.samplesize, 0, 0, 0, 0, (65280 & e9.samplerate) >> 8, 255 & e9.samplerate, 0, 0]), n5(e9));
  }, p6 = function(e9) {
    var t4 = new Uint8Array([0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, (4278190080 & e9.id) >> 24, (16711680 & e9.id) >> 16, (65280 & e9.id) >> 8, 255 & e9.id, 0, 0, 0, 0, (4278190080 & e9.duration) >> 24, (16711680 & e9.duration) >> 16, (65280 & e9.duration) >> 8, 255 & e9.duration, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, (65280 & e9.width) >> 8, 255 & e9.width, 0, 0, (65280 & e9.height) >> 8, 255 & e9.height, 0, 0]);
    return i6(E3.tkhd, t4);
  }, b5 = function(e9) {
    var t4, s7, n6, r5, a7, o5, l8;
    return t4 = i6(E3.tfhd, new Uint8Array([0, 0, 0, 58, (4278190080 & e9.id) >> 24, (16711680 & e9.id) >> 16, (65280 & e9.id) >> 8, 255 & e9.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), o5 = Math.floor(e9.baseMediaDecodeTime / z3), l8 = Math.floor(e9.baseMediaDecodeTime % z3), s7 = i6(E3.tfdt, new Uint8Array([1, 0, 0, 0, o5 >>> 24 & 255, o5 >>> 16 & 255, o5 >>> 8 & 255, 255 & o5, l8 >>> 24 & 255, l8 >>> 16 & 255, l8 >>> 8 & 255, 255 & l8])), a7 = 92, "audio" === e9.type ? (n6 = S3(e9, a7), i6(E3.traf, t4, s7, n6)) : (r5 = y3(e9), n6 = S3(e9, r5.length + a7), i6(E3.traf, t4, s7, n6, r5));
  }, c6 = function(e9) {
    return e9.duration = e9.duration || 4294967295, i6(E3.trak, p6(e9), m7(e9));
  }, T2 = function(e9) {
    var t4 = new Uint8Array([0, 0, 0, 0, (4278190080 & e9.id) >> 24, (16711680 & e9.id) >> 16, (65280 & e9.id) >> 8, 255 & e9.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]);
    return "video" !== e9.type && (t4[t4.length - 1] = 0), i6(E3.trex, t4);
  }, j4 = function(e9, t4) {
    var i7 = 0, s7 = 0, n6 = 0, r5 = 0;
    return e9.length && (void 0 !== e9[0].duration && (i7 = 1), void 0 !== e9[0].size && (s7 = 2), void 0 !== e9[0].flags && (n6 = 4), void 0 !== e9[0].compositionTimeOffset && (r5 = 8)), [0, 0, i7 | s7 | n6 | r5, 1, (4278190080 & e9.length) >>> 24, (16711680 & e9.length) >>> 16, (65280 & e9.length) >>> 8, 255 & e9.length, (4278190080 & t4) >>> 24, (16711680 & t4) >>> 16, (65280 & t4) >>> 8, 255 & t4];
  }, q3 = function(e9, t4) {
    var s7, n6, r5, a7, o5, l8;
    for (t4 += 20 + 16 * (a7 = e9.samples || []).length, r5 = j4(a7, t4), (n6 = new Uint8Array(r5.length + 16 * a7.length)).set(r5), s7 = r5.length, l8 = 0; l8 < a7.length; l8++) o5 = a7[l8], n6[s7++] = (4278190080 & o5.duration) >>> 24, n6[s7++] = (16711680 & o5.duration) >>> 16, n6[s7++] = (65280 & o5.duration) >>> 8, n6[s7++] = 255 & o5.duration, n6[s7++] = (4278190080 & o5.size) >>> 24, n6[s7++] = (16711680 & o5.size) >>> 16, n6[s7++] = (65280 & o5.size) >>> 8, n6[s7++] = 255 & o5.size, n6[s7++] = o5.flags.isLeading << 2 | o5.flags.dependsOn, n6[s7++] = o5.flags.isDependedOn << 6 | o5.flags.hasRedundancy << 4 | o5.flags.paddingValue << 1 | o5.flags.isNonSyncSample, n6[s7++] = 61440 & o5.flags.degradationPriority, n6[s7++] = 15 & o5.flags.degradationPriority, n6[s7++] = (4278190080 & o5.compositionTimeOffset) >>> 24, n6[s7++] = (16711680 & o5.compositionTimeOffset) >>> 16, n6[s7++] = (65280 & o5.compositionTimeOffset) >>> 8, n6[s7++] = 255 & o5.compositionTimeOffset;
    return i6(E3.trun, n6);
  }, F2 = function(e9, t4) {
    var s7, n6, r5, a7, o5, l8;
    for (t4 += 20 + 8 * (a7 = e9.samples || []).length, r5 = j4(a7, t4), (s7 = new Uint8Array(r5.length + 8 * a7.length)).set(r5), n6 = r5.length, l8 = 0; l8 < a7.length; l8++) o5 = a7[l8], s7[n6++] = (4278190080 & o5.duration) >>> 24, s7[n6++] = (16711680 & o5.duration) >>> 16, s7[n6++] = (65280 & o5.duration) >>> 8, s7[n6++] = 255 & o5.duration, s7[n6++] = (4278190080 & o5.size) >>> 24, s7[n6++] = (16711680 & o5.size) >>> 16, s7[n6++] = (65280 & o5.size) >>> 8, s7[n6++] = 255 & o5.size;
    return i6(E3.trun, s7);
  }, S3 = function(e9, t4) {
    return "audio" === e9.type ? F2(e9, t4) : q3(e9, t4);
  };
  var W2, G2, X2, K2, Y3, Q2, J2, Z2, ee3 = { ftyp: r4 = function() {
    return i6(E3.ftyp, w4, C3, w4, k2);
  }, mdat: function(e9) {
    return i6(E3.mdat, e9);
  }, moof: l7, moov: h2, initSegment: function(e9) {
    var t4, i7 = r4(), s7 = h2(e9);
    return (t4 = new Uint8Array(i7.byteLength + s7.byteLength)).set(i7), t4.set(s7, i7.byteLength), t4;
  } }, te3 = function() {
    return { size: 0, flags: { isLeading: 0, dependsOn: 1, isDependedOn: 0, hasRedundancy: 0, degradationPriority: 0, isNonSyncSample: 1 } };
  }, ie3 = function(e9, t4) {
    var i7 = te3();
    return i7.dataOffset = t4, i7.compositionTimeOffset = e9.pts - e9.dts, i7.duration = e9.duration, i7.size = 4 * e9.length, i7.size += e9.byteLength, e9.keyFrame && (i7.flags.dependsOn = 2, i7.flags.isNonSyncSample = 0), i7;
  }, se3 = function(e9, t4) {
    var i7, s7, n6, r5, a7, o5 = t4 || 0, l8 = [];
    for (i7 = 0; i7 < e9.length; i7++) for (r5 = e9[i7], s7 = 0; s7 < r5.length; s7++) a7 = r5[s7], o5 += (n6 = ie3(a7, o5)).size, l8.push(n6);
    return l8;
  }, ne3 = function(e9, t4) {
    var i7, s7 = [];
    return i7 = ie3(e9, t4 || 0), s7.push(i7), s7;
  }, re3 = { groupNalsIntoFrames: function(e9) {
    var t4, i7, s7 = [], n6 = [];
    for (n6.byteLength = 0, n6.nalCount = 0, n6.duration = 0, s7.byteLength = 0, t4 = 0; t4 < e9.length; t4++) "access_unit_delimiter_rbsp" === (i7 = e9[t4]).nalUnitType ? (s7.length && (s7.duration = i7.dts - s7.dts, n6.byteLength += s7.byteLength, n6.nalCount += s7.length, n6.duration += s7.duration, n6.push(s7)), (s7 = [i7]).byteLength = i7.data.byteLength, s7.pts = i7.pts, s7.dts = i7.dts) : ("slice_layer_without_partitioning_rbsp_idr" === i7.nalUnitType && (s7.keyFrame = true), s7.duration = i7.dts - s7.dts, s7.byteLength += i7.data.byteLength, s7.push(i7));
    return n6.length && (!s7.duration || s7.duration <= 0) && (s7.duration = n6[n6.length - 1].duration), n6.byteLength += s7.byteLength, n6.nalCount += s7.length, n6.duration += s7.duration, n6.push(s7), n6;
  }, groupFramesIntoGops: function(e9) {
    var t4, i7, s7 = [], n6 = [];
    for (s7.byteLength = 0, s7.nalCount = 0, s7.duration = 0, s7.pts = e9[0].pts, s7.dts = e9[0].dts, n6.byteLength = 0, n6.nalCount = 0, n6.duration = 0, n6.pts = e9[0].pts, n6.dts = e9[0].dts, t4 = 0; t4 < e9.length; t4++) (i7 = e9[t4]).keyFrame ? (s7.length && (n6.push(s7), n6.byteLength += s7.byteLength, n6.nalCount += s7.nalCount, n6.duration += s7.duration), (s7 = [i7]).nalCount = i7.length, s7.byteLength = i7.byteLength, s7.pts = i7.pts, s7.dts = i7.dts, s7.duration = i7.duration) : (s7.duration += i7.duration, s7.nalCount += i7.length, s7.byteLength += i7.byteLength, s7.push(i7));
    return n6.length && s7.duration <= 0 && (s7.duration = n6[n6.length - 1].duration), n6.byteLength += s7.byteLength, n6.nalCount += s7.nalCount, n6.duration += s7.duration, n6.push(s7), n6;
  }, extendFirstKeyFrame: function(e9) {
    var t4;
    return !e9[0][0].keyFrame && e9.length > 1 && (t4 = e9.shift(), e9.byteLength -= t4.byteLength, e9.nalCount -= t4.nalCount, e9[0][0].dts = t4.dts, e9[0][0].pts = t4.pts, e9[0][0].duration += t4.duration), e9;
  }, generateSampleTable: se3, concatenateNalData: function(e9) {
    var t4, i7, s7, n6, r5, a7, o5 = 0, l8 = e9.byteLength, h3 = e9.nalCount, u6 = new Uint8Array(l8 + 4 * h3), d3 = new DataView(u6.buffer);
    for (t4 = 0; t4 < e9.length; t4++) for (n6 = e9[t4], i7 = 0; i7 < n6.length; i7++) for (r5 = n6[i7], s7 = 0; s7 < r5.length; s7++) a7 = r5[s7], d3.setUint32(o5, a7.data.byteLength), o5 += 4, u6.set(a7.data, o5), o5 += a7.data.byteLength;
    return u6;
  }, generateSampleTableForFrame: ne3, concatenateNalDataForFrame: function(e9) {
    var t4, i7, s7 = 0, n6 = e9.byteLength, r5 = e9.length, a7 = new Uint8Array(n6 + 4 * r5), o5 = new DataView(a7.buffer);
    for (t4 = 0; t4 < e9.length; t4++) i7 = e9[t4], o5.setUint32(s7, i7.data.byteLength), s7 += 4, a7.set(i7.data, s7), s7 += i7.data.byteLength;
    return a7;
  } }, ae3 = [33, 16, 5, 32, 164, 27], oe3 = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252], le3 = function(e9) {
    for (var t4 = []; e9--; ) t4.push(0);
    return t4;
  }, he2 = function(e9) {
    return Object.keys(e9).reduce(function(t4, i7) {
      return t4[i7] = new Uint8Array(e9[i7].reduce(function(e10, t5) {
        return e10.concat(t5);
      }, [])), t4;
    }, {});
  }, ue2 = function() {
    if (!W2) {
      var e9 = { 96e3: [ae3, [227, 64], le3(154), [56]], 88200: [ae3, [231], le3(170), [56]], 64e3: [ae3, [248, 192], le3(240), [56]], 48e3: [ae3, [255, 192], le3(268), [55, 148, 128], le3(54), [112]], 44100: [ae3, [255, 192], le3(268), [55, 163, 128], le3(84), [112]], 32e3: [ae3, [255, 192], le3(268), [55, 234], le3(226), [112]], 24e3: [ae3, [255, 192], le3(268), [55, 255, 128], le3(268), [111, 112], le3(126), [224]], 16e3: [ae3, [255, 192], le3(268), [55, 255, 128], le3(268), [111, 255], le3(269), [223, 108], le3(195), [1, 192]], 12e3: [oe3, le3(268), [3, 127, 248], le3(268), [6, 255, 240], le3(268), [13, 255, 224], le3(268), [27, 253, 128], le3(259), [56]], 11025: [oe3, le3(268), [3, 127, 248], le3(268), [6, 255, 240], le3(268), [13, 255, 224], le3(268), [27, 255, 192], le3(268), [55, 175, 128], le3(108), [112]], 8e3: [oe3, le3(268), [3, 121, 16], le3(47), [7]] };
      W2 = he2(e9);
    }
    return W2;
  }, de2 = 9e4;
  Q2 = function(e9, t4) {
    return G2(Y3(e9, t4));
  }, J2 = function(e9, t4) {
    return X2(K2(e9), t4);
  }, Z2 = function(e9, t4, i7) {
    return K2(i7 ? e9 : e9 - t4);
  };
  var ce2 = { ONE_SECOND_IN_TS: de2, secondsToVideoTs: G2 = function(e9) {
    return e9 * de2;
  }, secondsToAudioTs: X2 = function(e9, t4) {
    return e9 * t4;
  }, videoTsToSeconds: K2 = function(e9) {
    return e9 / de2;
  }, audioTsToSeconds: Y3 = function(e9, t4) {
    return e9 / t4;
  }, audioTsToVideoTs: Q2, videoTsToAudioTs: J2, metadataTsToSeconds: Z2 }, pe3 = ue2, me2 = ce2, ge2 = function(e9) {
    var t4, i7 = 0;
    for (t4 = 0; t4 < e9.length; t4++) i7 += e9[t4].data.byteLength;
    return i7;
  }, fe2 = function(e9) {
    var t4, i7, s7 = [];
    for (t4 = 0; t4 < e9.length; t4++) i7 = e9[t4], s7.push({ size: i7.data.byteLength, duration: 1024 });
    return s7;
  }, ye3 = { prefixWithSilence: function(e9, t4, i7, s7) {
    var n6, r5, a7, o5, l8 = 0, h3 = 0, u6 = 0, d3 = 0;
    if (t4.length && (n6 = me2.audioTsToVideoTs(e9.baseMediaDecodeTime, e9.samplerate), l8 = Math.ceil(me2.ONE_SECOND_IN_TS / (e9.samplerate / 1024)), i7 && s7 && (h3 = n6 - Math.max(i7, s7), d3 = (u6 = Math.floor(h3 / l8)) * l8), !(u6 < 1 || d3 > me2.ONE_SECOND_IN_TS / 2))) {
      for ((r5 = pe3()[e9.samplerate]) || (r5 = t4[0].data), a7 = 0; a7 < u6; a7++) o5 = t4[0], t4.splice(0, 0, { data: r5, dts: o5.dts - l8, pts: o5.pts - l8 });
      return e9.baseMediaDecodeTime -= Math.floor(me2.videoTsToAudioTs(d3, e9.samplerate)), d3;
    }
  }, trimAdtsFramesByEarliestDts: function(e9, t4, i7) {
    return t4.minSegmentDts >= i7 ? e9 : (t4.minSegmentDts = 1 / 0, e9.filter(function(e10) {
      return e10.dts >= i7 && (t4.minSegmentDts = Math.min(t4.minSegmentDts, e10.dts), t4.minSegmentPts = t4.minSegmentDts, true);
    }));
  }, generateSampleTable: fe2, concatenateFrameData: function(e9) {
    var t4, i7, s7 = 0, n6 = new Uint8Array(ge2(e9));
    for (t4 = 0; t4 < e9.length; t4++) i7 = e9[t4], n6.set(i7.data, s7), s7 += i7.data.byteLength;
    return n6;
  } }, _e2 = ce2.ONE_SECOND_IN_TS, ve2 = { clearDtsInfo: function(e9) {
    delete e9.minSegmentDts, delete e9.maxSegmentDts, delete e9.minSegmentPts, delete e9.maxSegmentPts;
  }, calculateTrackBaseMediaDecodeTime: function(e9, t4) {
    var i7, s7 = e9.minSegmentDts;
    return t4 || (s7 -= e9.timelineStartInfo.dts), i7 = e9.timelineStartInfo.baseMediaDecodeTime, i7 += s7, i7 = Math.max(0, i7), "audio" === e9.type && (i7 *= e9.samplerate / _e2, i7 = Math.floor(i7)), i7;
  }, collectDtsInfo: function(e9, t4) {
    "number" == typeof t4.pts && (void 0 === e9.timelineStartInfo.pts && (e9.timelineStartInfo.pts = t4.pts), void 0 === e9.minSegmentPts ? e9.minSegmentPts = t4.pts : e9.minSegmentPts = Math.min(e9.minSegmentPts, t4.pts), void 0 === e9.maxSegmentPts ? e9.maxSegmentPts = t4.pts : e9.maxSegmentPts = Math.max(e9.maxSegmentPts, t4.pts)), "number" == typeof t4.dts && (void 0 === e9.timelineStartInfo.dts && (e9.timelineStartInfo.dts = t4.dts), void 0 === e9.minSegmentDts ? e9.minSegmentDts = t4.dts : e9.minSegmentDts = Math.min(e9.minSegmentDts, t4.dts), void 0 === e9.maxSegmentDts ? e9.maxSegmentDts = t4.dts : e9.maxSegmentDts = Math.max(e9.maxSegmentDts, t4.dts));
  } }, be2 = 4, Te2 = 128, Se2 = { parseSei: function(e9) {
    for (var t4 = 0, i7 = { payloadType: -1, payloadSize: 0 }, s7 = 0, n6 = 0; t4 < e9.byteLength && e9[t4] !== Te2; ) {
      for (; 255 === e9[t4]; ) s7 += 255, t4++;
      for (s7 += e9[t4++]; 255 === e9[t4]; ) n6 += 255, t4++;
      if (n6 += e9[t4++], !i7.payload && s7 === be2) {
        if ("GA94" === String.fromCharCode(e9[t4 + 3], e9[t4 + 4], e9[t4 + 5], e9[t4 + 6])) {
          i7.payloadType = s7, i7.payloadSize = n6, i7.payload = e9.subarray(t4, t4 + n6);
          break;
        }
        i7.payload = void 0;
      }
      t4 += n6, s7 = 0, n6 = 0;
    }
    return i7;
  }, parseUserData: function(e9) {
    return 181 !== e9.payload[0] || 49 != (e9.payload[1] << 8 | e9.payload[2]) || "GA94" !== String.fromCharCode(e9.payload[3], e9.payload[4], e9.payload[5], e9.payload[6]) || 3 !== e9.payload[7] ? null : e9.payload.subarray(8, e9.payload.length - 1);
  }, parseCaptionPackets: function(e9, t4) {
    var i7, s7, n6, r5, a7 = [];
    if (!(64 & t4[0])) return a7;
    for (s7 = 31 & t4[0], i7 = 0; i7 < s7; i7++) r5 = { type: 3 & t4[(n6 = 3 * i7) + 2], pts: e9 }, 4 & t4[n6 + 2] && (r5.ccData = t4[n6 + 3] << 8 | t4[n6 + 4], a7.push(r5));
    return a7;
  }, discardEmulationPreventionBytes: function(e9) {
    for (var t4, i7, s7 = e9.byteLength, n6 = [], r5 = 1; r5 < s7 - 2; ) 0 === e9[r5] && 0 === e9[r5 + 1] && 3 === e9[r5 + 2] ? (n6.push(r5 + 2), r5 += 2) : r5++;
    if (0 === n6.length) return e9;
    t4 = s7 - n6.length, i7 = new Uint8Array(t4);
    var a7 = 0;
    for (r5 = 0; r5 < t4; a7++, r5++) a7 === n6[0] && (a7++, n6.shift()), i7[r5] = e9[a7];
    return i7;
  }, USER_DATA_REGISTERED_ITU_T_T35: be2 }, Ee2 = $2, we2 = Se2, Ce2 = function(e9) {
    e9 = e9 || {}, Ce2.prototype.init.call(this), this.parse708captions_ = "boolean" != typeof e9.parse708captions || e9.parse708captions, this.captionPackets_ = [], this.ccStreams_ = [new Ue2(0, 0), new Ue2(0, 1), new Ue2(1, 0), new Ue2(1, 1)], this.parse708captions_ && (this.cc708Stream_ = new Pe2({ captionServices: e9.captionServices })), this.reset(), this.ccStreams_.forEach(function(e10) {
      e10.on("data", this.trigger.bind(this, "data")), e10.on("partialdone", this.trigger.bind(this, "partialdone")), e10.on("done", this.trigger.bind(this, "done"));
    }, this), this.parse708captions_ && (this.cc708Stream_.on("data", this.trigger.bind(this, "data")), this.cc708Stream_.on("partialdone", this.trigger.bind(this, "partialdone")), this.cc708Stream_.on("done", this.trigger.bind(this, "done")));
  };
  Ce2.prototype = new Ee2(), Ce2.prototype.push = function(e9) {
    var t4, i7, s7;
    if ("sei_rbsp" === e9.nalUnitType && (t4 = we2.parseSei(e9.escapedRBSP)).payload && t4.payloadType === we2.USER_DATA_REGISTERED_ITU_T_T35 && (i7 = we2.parseUserData(t4))) if (e9.dts < this.latestDts_) this.ignoreNextEqualDts_ = true;
    else {
      if (e9.dts === this.latestDts_ && this.ignoreNextEqualDts_) return this.numSameDts_--, void (this.numSameDts_ || (this.ignoreNextEqualDts_ = false));
      s7 = we2.parseCaptionPackets(e9.pts, i7), this.captionPackets_ = this.captionPackets_.concat(s7), this.latestDts_ !== e9.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = e9.dts;
    }
  }, Ce2.prototype.flushCCStreams = function(e9) {
    this.ccStreams_.forEach(function(t4) {
      return "flush" === e9 ? t4.flush() : t4.partialFlush();
    }, this);
  }, Ce2.prototype.flushStream = function(e9) {
    this.captionPackets_.length ? (this.captionPackets_.forEach(function(e10, t4) {
      e10.presortIndex = t4;
    }), this.captionPackets_.sort(function(e10, t4) {
      return e10.pts === t4.pts ? e10.presortIndex - t4.presortIndex : e10.pts - t4.pts;
    }), this.captionPackets_.forEach(function(e10) {
      e10.type < 2 ? this.dispatchCea608Packet(e10) : this.dispatchCea708Packet(e10);
    }, this), this.captionPackets_.length = 0, this.flushCCStreams(e9)) : this.flushCCStreams(e9);
  }, Ce2.prototype.flush = function() {
    return this.flushStream("flush");
  }, Ce2.prototype.partialFlush = function() {
    return this.flushStream("partialFlush");
  }, Ce2.prototype.reset = function() {
    this.latestDts_ = null, this.ignoreNextEqualDts_ = false, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function(e9) {
      e9.reset();
    });
  }, Ce2.prototype.dispatchCea608Packet = function(e9) {
    this.setsTextOrXDSActive(e9) ? this.activeCea608Channel_[e9.type] = null : this.setsChannel1Active(e9) ? this.activeCea608Channel_[e9.type] = 0 : this.setsChannel2Active(e9) && (this.activeCea608Channel_[e9.type] = 1), null !== this.activeCea608Channel_[e9.type] && this.ccStreams_[(e9.type << 1) + this.activeCea608Channel_[e9.type]].push(e9);
  }, Ce2.prototype.setsChannel1Active = function(e9) {
    return 4096 == (30720 & e9.ccData);
  }, Ce2.prototype.setsChannel2Active = function(e9) {
    return 6144 == (30720 & e9.ccData);
  }, Ce2.prototype.setsTextOrXDSActive = function(e9) {
    return 256 == (28928 & e9.ccData) || 4138 == (30974 & e9.ccData) || 6186 == (30974 & e9.ccData);
  }, Ce2.prototype.dispatchCea708Packet = function(e9) {
    this.parse708captions_ && this.cc708Stream_.push(e9);
  };
  var ke2 = { 127: 9834, 4128: 32, 4129: 160, 4133: 8230, 4138: 352, 4140: 338, 4144: 9608, 4145: 8216, 4146: 8217, 4147: 8220, 4148: 8221, 4149: 8226, 4153: 8482, 4154: 353, 4156: 339, 4157: 8480, 4159: 376, 4214: 8539, 4215: 8540, 4216: 8541, 4217: 8542, 4218: 9168, 4219: 9124, 4220: 9123, 4221: 9135, 4222: 9126, 4223: 9121, 4256: 12600 }, Ie2 = function(e9) {
    var t4 = ke2[e9] || e9;
    return 4096 & e9 && e9 === t4 ? "" : String.fromCharCode(t4);
  }, xe2 = function(e9) {
    return 32 <= e9 && e9 <= 127 || 160 <= e9 && e9 <= 255;
  }, Ae2 = function(e9) {
    this.windowNum = e9, this.reset();
  };
  Ae2.prototype.reset = function() {
    this.clearText(), this.pendingNewLine = false, this.winAttr = {}, this.penAttr = {}, this.penLoc = {}, this.penColor = {}, this.visible = 0, this.rowLock = 0, this.columnLock = 0, this.priority = 0, this.relativePositioning = 0, this.anchorVertical = 0, this.anchorHorizontal = 0, this.anchorPoint = 0, this.rowCount = 1, this.virtualRowCount = this.rowCount + 1, this.columnCount = 41, this.windowStyle = 0, this.penStyle = 0;
  }, Ae2.prototype.getText = function() {
    return this.rows.join("\n");
  }, Ae2.prototype.clearText = function() {
    this.rows = [""], this.rowIdx = 0;
  }, Ae2.prototype.newLine = function(e9) {
    for (this.rows.length >= this.virtualRowCount && "function" == typeof this.beforeRowOverflow && this.beforeRowOverflow(e9), this.rows.length > 0 && (this.rows.push(""), this.rowIdx++); this.rows.length > this.virtualRowCount; ) this.rows.shift(), this.rowIdx--;
  }, Ae2.prototype.isEmpty = function() {
    return 0 === this.rows.length || 1 === this.rows.length && "" === this.rows[0];
  }, Ae2.prototype.addText = function(e9) {
    this.rows[this.rowIdx] += e9;
  }, Ae2.prototype.backspace = function() {
    if (!this.isEmpty()) {
      var e9 = this.rows[this.rowIdx];
      this.rows[this.rowIdx] = e9.substr(0, e9.length - 1);
    }
  };
  var De2 = function(e9, t4, i7) {
    this.serviceNum = e9, this.text = "", this.currentWindow = new Ae2(-1), this.windows = [], this.stream = i7, "string" == typeof t4 && this.createTextDecoder(t4);
  };
  De2.prototype.init = function(e9, t4) {
    this.startPts = e9;
    for (var i7 = 0; i7 < 8; i7++) this.windows[i7] = new Ae2(i7), "function" == typeof t4 && (this.windows[i7].beforeRowOverflow = t4);
  }, De2.prototype.setCurrentWindow = function(e9) {
    this.currentWindow = this.windows[e9];
  }, De2.prototype.createTextDecoder = function(e9) {
    if ("undefined" == typeof TextDecoder) this.stream.trigger("log", { level: "warn", message: "The `encoding` option is unsupported without TextDecoder support" });
    else try {
      this.textDecoder_ = new TextDecoder(e9);
    } catch (t4) {
      this.stream.trigger("log", { level: "warn", message: "TextDecoder could not be created with " + e9 + " encoding. " + t4 });
    }
  };
  var Pe2 = function(e9) {
    e9 = e9 || {}, Pe2.prototype.init.call(this);
    var t4, i7 = this, s7 = e9.captionServices || {}, n6 = {};
    Object.keys(s7).forEach((e10) => {
      t4 = s7[e10], /^SERVICE/.test(e10) && (n6[e10] = t4.encoding);
    }), this.serviceEncodings = n6, this.current708Packet = null, this.services = {}, this.push = function(e10) {
      3 === e10.type ? (i7.new708Packet(), i7.add708Bytes(e10)) : (null === i7.current708Packet && i7.new708Packet(), i7.add708Bytes(e10));
    };
  };
  Pe2.prototype = new Ee2(), Pe2.prototype.new708Packet = function() {
    null !== this.current708Packet && this.push708Packet(), this.current708Packet = { data: [], ptsVals: [] };
  }, Pe2.prototype.add708Bytes = function(e9) {
    var t4 = e9.ccData, i7 = t4 >>> 8, s7 = 255 & t4;
    this.current708Packet.ptsVals.push(e9.pts), this.current708Packet.data.push(i7), this.current708Packet.data.push(s7);
  }, Pe2.prototype.push708Packet = function() {
    var e9 = this.current708Packet, t4 = e9.data, i7 = null, s7 = null, n6 = 0, r5 = t4[n6++];
    for (e9.seq = r5 >> 6, e9.sizeCode = 63 & r5; n6 < t4.length; n6++) s7 = 31 & (r5 = t4[n6++]), 7 === (i7 = r5 >> 5) && s7 > 0 && (i7 = r5 = t4[n6++]), this.pushServiceBlock(i7, n6, s7), s7 > 0 && (n6 += s7 - 1);
  }, Pe2.prototype.pushServiceBlock = function(e9, t4, i7) {
    var s7, n6 = t4, r5 = this.current708Packet.data, a7 = this.services[e9];
    for (a7 || (a7 = this.initService(e9, n6)); n6 < t4 + i7 && n6 < r5.length; n6++) s7 = r5[n6], xe2(s7) ? n6 = this.handleText(n6, a7) : 24 === s7 ? n6 = this.multiByteCharacter(n6, a7) : 16 === s7 ? n6 = this.extendedCommands(n6, a7) : 128 <= s7 && s7 <= 135 ? n6 = this.setCurrentWindow(n6, a7) : 152 <= s7 && s7 <= 159 ? n6 = this.defineWindow(n6, a7) : 136 === s7 ? n6 = this.clearWindows(n6, a7) : 140 === s7 ? n6 = this.deleteWindows(n6, a7) : 137 === s7 ? n6 = this.displayWindows(n6, a7) : 138 === s7 ? n6 = this.hideWindows(n6, a7) : 139 === s7 ? n6 = this.toggleWindows(n6, a7) : 151 === s7 ? n6 = this.setWindowAttributes(n6, a7) : 144 === s7 ? n6 = this.setPenAttributes(n6, a7) : 145 === s7 ? n6 = this.setPenColor(n6, a7) : 146 === s7 ? n6 = this.setPenLocation(n6, a7) : 143 === s7 ? a7 = this.reset(n6, a7) : 8 === s7 ? a7.currentWindow.backspace() : 12 === s7 ? a7.currentWindow.clearText() : 13 === s7 ? a7.currentWindow.pendingNewLine = true : 14 === s7 ? a7.currentWindow.clearText() : 141 === s7 && n6++;
  }, Pe2.prototype.extendedCommands = function(e9, t4) {
    var i7 = this.current708Packet.data[++e9];
    return xe2(i7) && (e9 = this.handleText(e9, t4, { isExtended: true })), e9;
  }, Pe2.prototype.getPts = function(e9) {
    return this.current708Packet.ptsVals[Math.floor(e9 / 2)];
  }, Pe2.prototype.initService = function(e9, t4) {
    var i7, s7, n6 = this;
    return (i7 = "SERVICE" + e9) in this.serviceEncodings && (s7 = this.serviceEncodings[i7]), this.services[e9] = new De2(e9, s7, n6), this.services[e9].init(this.getPts(t4), function(t5) {
      n6.flushDisplayed(t5, n6.services[e9]);
    }), this.services[e9];
  }, Pe2.prototype.handleText = function(e9, t4, i7) {
    var s7, n6, r5 = i7 && i7.isExtended, a7 = i7 && i7.isMultiByte, o5 = this.current708Packet.data, l8 = r5 ? 4096 : 0, h3 = o5[e9], u6 = o5[e9 + 1], d3 = t4.currentWindow;
    function c7(e10) {
      return e10.map((e11) => ("0" + (255 & e11).toString(16)).slice(-2)).join("");
    }
    if (a7 ? (n6 = [h3, u6], e9++) : n6 = [h3], t4.textDecoder_ && !r5) s7 = t4.textDecoder_.decode(new Uint8Array(n6));
    else if (a7) {
      const e10 = c7(n6);
      s7 = String.fromCharCode(parseInt(e10, 16));
    } else s7 = Ie2(l8 | h3);
    return d3.pendingNewLine && !d3.isEmpty() && d3.newLine(this.getPts(e9)), d3.pendingNewLine = false, d3.addText(s7), e9;
  }, Pe2.prototype.multiByteCharacter = function(e9, t4) {
    var i7 = this.current708Packet.data, s7 = i7[e9 + 1], n6 = i7[e9 + 2];
    return xe2(s7) && xe2(n6) && (e9 = this.handleText(++e9, t4, { isMultiByte: true })), e9;
  }, Pe2.prototype.setCurrentWindow = function(e9, t4) {
    var i7 = 7 & this.current708Packet.data[e9];
    return t4.setCurrentWindow(i7), e9;
  }, Pe2.prototype.defineWindow = function(e9, t4) {
    var i7 = this.current708Packet.data, s7 = i7[e9], n6 = 7 & s7;
    t4.setCurrentWindow(n6);
    var r5 = t4.currentWindow;
    return s7 = i7[++e9], r5.visible = (32 & s7) >> 5, r5.rowLock = (16 & s7) >> 4, r5.columnLock = (8 & s7) >> 3, r5.priority = 7 & s7, s7 = i7[++e9], r5.relativePositioning = (128 & s7) >> 7, r5.anchorVertical = 127 & s7, s7 = i7[++e9], r5.anchorHorizontal = s7, s7 = i7[++e9], r5.anchorPoint = (240 & s7) >> 4, r5.rowCount = 15 & s7, s7 = i7[++e9], r5.columnCount = 63 & s7, s7 = i7[++e9], r5.windowStyle = (56 & s7) >> 3, r5.penStyle = 7 & s7, r5.virtualRowCount = r5.rowCount + 1, e9;
  }, Pe2.prototype.setWindowAttributes = function(e9, t4) {
    var i7 = this.current708Packet.data, s7 = i7[e9], n6 = t4.currentWindow.winAttr;
    return s7 = i7[++e9], n6.fillOpacity = (192 & s7) >> 6, n6.fillRed = (48 & s7) >> 4, n6.fillGreen = (12 & s7) >> 2, n6.fillBlue = 3 & s7, s7 = i7[++e9], n6.borderType = (192 & s7) >> 6, n6.borderRed = (48 & s7) >> 4, n6.borderGreen = (12 & s7) >> 2, n6.borderBlue = 3 & s7, s7 = i7[++e9], n6.borderType += (128 & s7) >> 5, n6.wordWrap = (64 & s7) >> 6, n6.printDirection = (48 & s7) >> 4, n6.scrollDirection = (12 & s7) >> 2, n6.justify = 3 & s7, s7 = i7[++e9], n6.effectSpeed = (240 & s7) >> 4, n6.effectDirection = (12 & s7) >> 2, n6.displayEffect = 3 & s7, e9;
  }, Pe2.prototype.flushDisplayed = function(e9, t4) {
    for (var i7 = [], s7 = 0; s7 < 8; s7++) t4.windows[s7].visible && !t4.windows[s7].isEmpty() && i7.push(t4.windows[s7].getText());
    t4.endPts = e9, t4.text = i7.join("\n\n"), this.pushCaption(t4), t4.startPts = e9;
  }, Pe2.prototype.pushCaption = function(e9) {
    "" !== e9.text && (this.trigger("data", { startPts: e9.startPts, endPts: e9.endPts, text: e9.text, stream: "cc708_" + e9.serviceNum }), e9.text = "", e9.startPts = e9.endPts);
  }, Pe2.prototype.displayWindows = function(e9, t4) {
    var i7 = this.current708Packet.data[++e9], s7 = this.getPts(e9);
    this.flushDisplayed(s7, t4);
    for (var n6 = 0; n6 < 8; n6++) i7 & 1 << n6 && (t4.windows[n6].visible = 1);
    return e9;
  }, Pe2.prototype.hideWindows = function(e9, t4) {
    var i7 = this.current708Packet.data[++e9], s7 = this.getPts(e9);
    this.flushDisplayed(s7, t4);
    for (var n6 = 0; n6 < 8; n6++) i7 & 1 << n6 && (t4.windows[n6].visible = 0);
    return e9;
  }, Pe2.prototype.toggleWindows = function(e9, t4) {
    var i7 = this.current708Packet.data[++e9], s7 = this.getPts(e9);
    this.flushDisplayed(s7, t4);
    for (var n6 = 0; n6 < 8; n6++) i7 & 1 << n6 && (t4.windows[n6].visible ^= 1);
    return e9;
  }, Pe2.prototype.clearWindows = function(e9, t4) {
    var i7 = this.current708Packet.data[++e9], s7 = this.getPts(e9);
    this.flushDisplayed(s7, t4);
    for (var n6 = 0; n6 < 8; n6++) i7 & 1 << n6 && t4.windows[n6].clearText();
    return e9;
  }, Pe2.prototype.deleteWindows = function(e9, t4) {
    var i7 = this.current708Packet.data[++e9], s7 = this.getPts(e9);
    this.flushDisplayed(s7, t4);
    for (var n6 = 0; n6 < 8; n6++) i7 & 1 << n6 && t4.windows[n6].reset();
    return e9;
  }, Pe2.prototype.setPenAttributes = function(e9, t4) {
    var i7 = this.current708Packet.data, s7 = i7[e9], n6 = t4.currentWindow.penAttr;
    return s7 = i7[++e9], n6.textTag = (240 & s7) >> 4, n6.offset = (12 & s7) >> 2, n6.penSize = 3 & s7, s7 = i7[++e9], n6.italics = (128 & s7) >> 7, n6.underline = (64 & s7) >> 6, n6.edgeType = (56 & s7) >> 3, n6.fontStyle = 7 & s7, e9;
  }, Pe2.prototype.setPenColor = function(e9, t4) {
    var i7 = this.current708Packet.data, s7 = i7[e9], n6 = t4.currentWindow.penColor;
    return s7 = i7[++e9], n6.fgOpacity = (192 & s7) >> 6, n6.fgRed = (48 & s7) >> 4, n6.fgGreen = (12 & s7) >> 2, n6.fgBlue = 3 & s7, s7 = i7[++e9], n6.bgOpacity = (192 & s7) >> 6, n6.bgRed = (48 & s7) >> 4, n6.bgGreen = (12 & s7) >> 2, n6.bgBlue = 3 & s7, s7 = i7[++e9], n6.edgeRed = (48 & s7) >> 4, n6.edgeGreen = (12 & s7) >> 2, n6.edgeBlue = 3 & s7, e9;
  }, Pe2.prototype.setPenLocation = function(e9, t4) {
    var i7 = this.current708Packet.data, s7 = i7[e9], n6 = t4.currentWindow.penLoc;
    return t4.currentWindow.pendingNewLine = true, s7 = i7[++e9], n6.row = 15 & s7, s7 = i7[++e9], n6.column = 63 & s7, e9;
  }, Pe2.prototype.reset = function(e9, t4) {
    var i7 = this.getPts(e9);
    return this.flushDisplayed(i7, t4), this.initService(t4.serviceNum, e9);
  };
  var Le2 = { 42: 225, 92: 233, 94: 237, 95: 243, 96: 250, 123: 231, 124: 247, 125: 209, 126: 241, 127: 9608, 304: 174, 305: 176, 306: 189, 307: 191, 308: 8482, 309: 162, 310: 163, 311: 9834, 312: 224, 313: 160, 314: 232, 315: 226, 316: 234, 317: 238, 318: 244, 319: 251, 544: 193, 545: 201, 546: 211, 547: 218, 548: 220, 549: 252, 550: 8216, 551: 161, 552: 42, 553: 39, 554: 8212, 555: 169, 556: 8480, 557: 8226, 558: 8220, 559: 8221, 560: 192, 561: 194, 562: 199, 563: 200, 564: 202, 565: 203, 566: 235, 567: 206, 568: 207, 569: 239, 570: 212, 571: 217, 572: 249, 573: 219, 574: 171, 575: 187, 800: 195, 801: 227, 802: 205, 803: 204, 804: 236, 805: 210, 806: 242, 807: 213, 808: 245, 809: 123, 810: 125, 811: 92, 812: 94, 813: 95, 814: 124, 815: 126, 816: 196, 817: 228, 818: 214, 819: 246, 820: 223, 821: 165, 822: 164, 823: 9474, 824: 197, 825: 229, 826: 216, 827: 248, 828: 9484, 829: 9488, 830: 9492, 831: 9496 }, Oe2 = function(e9) {
    return null === e9 ? "" : (e9 = Le2[e9] || e9, String.fromCharCode(e9));
  }, Ne2 = 14, Re2 = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152], Me2 = function() {
    for (var e9 = [], t4 = Ne2 + 1; t4--; ) e9.push({ text: "", indent: 0, offset: 0 });
    return e9;
  }, Ue2 = function(e9, t4) {
    Ue2.prototype.init.call(this), this.field_ = e9 || 0, this.dataChannel_ = t4 || 0, this.name_ = "CC" + (1 + (this.field_ << 1 | this.dataChannel_)), this.setConstants(), this.reset(), this.push = function(e10) {
      var t5, i7, s7, n6, r5;
      if ((t5 = 32639 & e10.ccData) !== this.lastControlCode_) {
        if (4096 == (61440 & t5) ? this.lastControlCode_ = t5 : t5 !== this.PADDING_ && (this.lastControlCode_ = null), s7 = t5 >>> 8, n6 = 255 & t5, t5 !== this.PADDING_) if (t5 === this.RESUME_CAPTION_LOADING_) this.mode_ = "popOn";
        else if (t5 === this.END_OF_CAPTION_) this.mode_ = "popOn", this.clearFormatting(e10.pts), this.flushDisplayed(e10.pts), i7 = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = i7, this.startPts_ = e10.pts;
        else if (t5 === this.ROLL_UP_2_ROWS_) this.rollUpRows_ = 2, this.setRollUp(e10.pts);
        else if (t5 === this.ROLL_UP_3_ROWS_) this.rollUpRows_ = 3, this.setRollUp(e10.pts);
        else if (t5 === this.ROLL_UP_4_ROWS_) this.rollUpRows_ = 4, this.setRollUp(e10.pts);
        else if (t5 === this.CARRIAGE_RETURN_) this.clearFormatting(e10.pts), this.flushDisplayed(e10.pts), this.shiftRowsUp_(), this.startPts_ = e10.pts;
        else if (t5 === this.BACKSPACE_) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_].text = this.nonDisplayed_[this.row_].text.slice(0, -1) : this.displayed_[this.row_].text = this.displayed_[this.row_].text.slice(0, -1);
        else if (t5 === this.ERASE_DISPLAYED_MEMORY_) this.flushDisplayed(e10.pts), this.displayed_ = Me2();
        else if (t5 === this.ERASE_NON_DISPLAYED_MEMORY_) this.nonDisplayed_ = Me2();
        else if (t5 === this.RESUME_DIRECT_CAPTIONING_) "paintOn" !== this.mode_ && (this.flushDisplayed(e10.pts), this.displayed_ = Me2()), this.mode_ = "paintOn", this.startPts_ = e10.pts;
        else if (this.isSpecialCharacter(s7, n6)) r5 = Oe2((s7 = (3 & s7) << 8) | n6), this[this.mode_](e10.pts, r5), this.column_++;
        else if (this.isExtCharacter(s7, n6)) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_].text = this.nonDisplayed_[this.row_].text.slice(0, -1) : this.displayed_[this.row_].text = this.displayed_[this.row_].text.slice(0, -1), r5 = Oe2((s7 = (3 & s7) << 8) | n6), this[this.mode_](e10.pts, r5), this.column_++;
        else if (this.isMidRowCode(s7, n6)) this.clearFormatting(e10.pts), this[this.mode_](e10.pts, " "), this.column_++, 14 & ~n6 || this.addFormatting(e10.pts, ["i"]), 1 & ~n6 || this.addFormatting(e10.pts, ["u"]);
        else if (this.isOffsetControlCode(s7, n6)) {
          const e11 = 3 & n6;
          this.nonDisplayed_[this.row_].offset = e11, this.column_ += e11;
        } else if (this.isPAC(s7, n6)) {
          var a7 = Re2.indexOf(7968 & t5);
          if ("rollUp" === this.mode_ && (a7 - this.rollUpRows_ + 1 < 0 && (a7 = this.rollUpRows_ - 1), this.setRollUp(e10.pts, a7)), a7 !== this.row_ && a7 >= 0 && a7 <= 14 && (this.clearFormatting(e10.pts), this.row_ = a7), 1 & n6 && -1 === this.formatting_.indexOf("u") && this.addFormatting(e10.pts, ["u"]), !(16 & ~t5)) {
            const e11 = (14 & t5) >> 1;
            this.column_ = 4 * e11, this.nonDisplayed_[this.row_].indent += e11;
          }
          this.isColorPAC(n6) && (14 & ~n6 || this.addFormatting(e10.pts, ["i"]));
        } else this.isNormalChar(s7) && (0 === n6 && (n6 = null), r5 = Oe2(s7), r5 += Oe2(n6), this[this.mode_](e10.pts, r5), this.column_ += r5.length);
      } else this.lastControlCode_ = null;
    };
  };
  Ue2.prototype = new Ee2(), Ue2.prototype.flushDisplayed = function(e9) {
    const t4 = (e10) => {
      this.trigger("log", { level: "warn", message: "Skipping a malformed 608 caption at index " + e10 + "." });
    }, i7 = [];
    this.displayed_.forEach((e10, s7) => {
      if (e10 && e10.text && e10.text.length) {
        try {
          e10.text = e10.text.trim();
        } catch (n6) {
          t4(s7);
        }
        e10.text.length && i7.push({ text: e10.text, line: s7 + 1, position: 10 + Math.min(70, 10 * e10.indent) + 2.5 * e10.offset });
      } else null == e10 && t4(s7);
    }), i7.length && this.trigger("data", { startPts: this.startPts_, endPts: e9, content: i7, stream: this.name_ });
  }, Ue2.prototype.reset = function() {
    this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = Me2(), this.nonDisplayed_ = Me2(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = Ne2, this.rollUpRows_ = 2, this.formatting_ = [];
  }, Ue2.prototype.setConstants = function() {
    0 === this.dataChannel_ ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : 1 === this.dataChannel_ && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_, this.END_OF_CAPTION_ = 47 | this.CONTROL_, this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_, this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_, this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_, this.CARRIAGE_RETURN_ = 45 | this.CONTROL_, this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_, this.BACKSPACE_ = 33 | this.CONTROL_, this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_, this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_;
  }, Ue2.prototype.isSpecialCharacter = function(e9, t4) {
    return e9 === this.EXT_ && t4 >= 48 && t4 <= 63;
  }, Ue2.prototype.isExtCharacter = function(e9, t4) {
    return (e9 === this.EXT_ + 1 || e9 === this.EXT_ + 2) && t4 >= 32 && t4 <= 63;
  }, Ue2.prototype.isMidRowCode = function(e9, t4) {
    return e9 === this.EXT_ && t4 >= 32 && t4 <= 47;
  }, Ue2.prototype.isOffsetControlCode = function(e9, t4) {
    return e9 === this.OFFSET_ && t4 >= 33 && t4 <= 35;
  }, Ue2.prototype.isPAC = function(e9, t4) {
    return e9 >= this.BASE_ && e9 < this.BASE_ + 8 && t4 >= 64 && t4 <= 127;
  }, Ue2.prototype.isColorPAC = function(e9) {
    return e9 >= 64 && e9 <= 79 || e9 >= 96 && e9 <= 127;
  }, Ue2.prototype.isNormalChar = function(e9) {
    return e9 >= 32 && e9 <= 127;
  }, Ue2.prototype.setRollUp = function(e9, t4) {
    if ("rollUp" !== this.mode_ && (this.row_ = Ne2, this.mode_ = "rollUp", this.flushDisplayed(e9), this.nonDisplayed_ = Me2(), this.displayed_ = Me2()), void 0 !== t4 && t4 !== this.row_) for (var i7 = 0; i7 < this.rollUpRows_; i7++) this.displayed_[t4 - i7] = this.displayed_[this.row_ - i7], this.displayed_[this.row_ - i7] = { text: "", indent: 0, offset: 0 };
    void 0 === t4 && (t4 = this.row_), this.topRow_ = t4 - this.rollUpRows_ + 1;
  }, Ue2.prototype.addFormatting = function(e9, t4) {
    this.formatting_ = this.formatting_.concat(t4);
    var i7 = t4.reduce(function(e10, t5) {
      return e10 + "<" + t5 + ">";
    }, "");
    this[this.mode_](e9, i7);
  }, Ue2.prototype.clearFormatting = function(e9) {
    if (this.formatting_.length) {
      var t4 = this.formatting_.reverse().reduce(function(e10, t5) {
        return e10 + "</" + t5 + ">";
      }, "");
      this.formatting_ = [], this[this.mode_](e9, t4);
    }
  }, Ue2.prototype.popOn = function(e9, t4) {
    var i7 = this.nonDisplayed_[this.row_].text;
    i7 += t4, this.nonDisplayed_[this.row_].text = i7;
  }, Ue2.prototype.rollUp = function(e9, t4) {
    var i7 = this.displayed_[this.row_].text;
    i7 += t4, this.displayed_[this.row_].text = i7;
  }, Ue2.prototype.shiftRowsUp_ = function() {
    var e9;
    for (e9 = 0; e9 < this.topRow_; e9++) this.displayed_[e9] = { text: "", indent: 0, offset: 0 };
    for (e9 = this.row_ + 1; e9 < Ne2 + 1; e9++) this.displayed_[e9] = { text: "", indent: 0, offset: 0 };
    for (e9 = this.topRow_; e9 < this.row_; e9++) this.displayed_[e9] = this.displayed_[e9 + 1];
    this.displayed_[this.row_] = { text: "", indent: 0, offset: 0 };
  }, Ue2.prototype.paintOn = function(e9, t4) {
    var i7 = this.displayed_[this.row_].text;
    i7 += t4, this.displayed_[this.row_].text = i7;
  };
  var Be2 = { CaptionStream: Ce2, Cea608Stream: Ue2, Cea708Stream: Pe2 }, Fe2 = { H264_STREAM_TYPE: 27, ADTS_STREAM_TYPE: 15, METADATA_STREAM_TYPE: 21 }, qe2 = $2, je2 = 8589934592, $e2 = 4294967296, He2 = "shared", Ve2 = function(e9, t4) {
    var i7 = 1;
    for (e9 > t4 && (i7 = -1); Math.abs(t4 - e9) > $e2; ) e9 += i7 * je2;
    return e9;
  }, ze2 = function(e9) {
    var t4, i7;
    ze2.prototype.init.call(this), this.type_ = e9 || He2, this.push = function(e10) {
      "metadata" !== e10.type ? this.type_ !== He2 && e10.type !== this.type_ || (void 0 === i7 && (i7 = e10.dts), e10.dts = Ve2(e10.dts, i7), e10.pts = Ve2(e10.pts, i7), t4 = e10.dts, this.trigger("data", e10)) : this.trigger("data", e10);
    }, this.flush = function() {
      i7 = t4, this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    }, this.discontinuity = function() {
      i7 = void 0, t4 = void 0;
    }, this.reset = function() {
      this.discontinuity(), this.trigger("reset");
    };
  };
  ze2.prototype = new qe2();
  var We2, Ge2 = { TimestampRolloverStream: ze2, handleRollover: Ve2 }, Xe2 = (e9, t4, i7) => {
    if (!e9) return -1;
    for (var s7 = i7; s7 < e9.length; s7++) if (e9[s7] === t4) return s7;
    return -1;
  }, Ke2 = { typedArrayIndexOf: Xe2 }.typedArrayIndexOf, Ye2 = { Utf8: 3 }, Qe2 = function(e9, t4, i7) {
    var s7, n6 = "";
    for (s7 = t4; s7 < i7; s7++) n6 += "%" + ("00" + e9[s7].toString(16)).slice(-2);
    return n6;
  }, Je2 = function(e9, t4, i7) {
    return decodeURIComponent(Qe2(e9, t4, i7));
  }, Ze2 = function(e9, t4, i7) {
    return unescape(Qe2(e9, t4, i7));
  }, et2 = function(e9) {
    return e9[0] << 21 | e9[1] << 14 | e9[2] << 7 | e9[3];
  }, tt2 = { APIC: function(e9) {
    var t4, i7, s7 = 1, n6 = "-->";
    e9.data[0] === Ye2.Utf8 && ((t4 = Ke2(e9.data, 0, s7)) < 0 || (e9.mimeType = Ze2(e9.data, s7, t4), s7 = t4 + 1, e9.pictureType = e9.data[s7], s7++, (i7 = Ke2(e9.data, 0, s7)) < 0 || (e9.description = Je2(e9.data, s7, i7), s7 = i7 + 1, e9.mimeType === n6 ? e9.url = Ze2(e9.data, s7, e9.data.length) : e9.pictureData = e9.data.subarray(s7, e9.data.length))));
  }, "T*": function(e9) {
    e9.data[0] === Ye2.Utf8 && (e9.value = Je2(e9.data, 1, e9.data.length).replace(/\0*$/, ""), e9.values = e9.value.split("\0"));
  }, TXXX: function(e9) {
    var t4;
    e9.data[0] === Ye2.Utf8 && -1 !== (t4 = Ke2(e9.data, 0, 1)) && (e9.description = Je2(e9.data, 1, t4), e9.value = Je2(e9.data, t4 + 1, e9.data.length).replace(/\0*$/, ""), e9.data = e9.value);
  }, "W*": function(e9) {
    e9.url = Ze2(e9.data, 0, e9.data.length).replace(/\0.*$/, "");
  }, WXXX: function(e9) {
    var t4;
    e9.data[0] === Ye2.Utf8 && -1 !== (t4 = Ke2(e9.data, 0, 1)) && (e9.description = Je2(e9.data, 1, t4), e9.url = Ze2(e9.data, t4 + 1, e9.data.length).replace(/\0.*$/, ""));
  }, PRIV: function(e9) {
    var t4;
    for (t4 = 0; t4 < e9.data.length; t4++) if (0 === e9.data[t4]) {
      e9.owner = Ze2(e9.data, 0, t4);
      break;
    }
    e9.privateData = e9.data.subarray(t4 + 1), e9.data = e9.privateData;
  } }, it2 = { parseId3Frames: function(e9) {
    var t4, i7 = 10, s7 = 0, n6 = [];
    if (!(e9.length < 10 || e9[0] !== "I".charCodeAt(0) || e9[1] !== "D".charCodeAt(0) || e9[2] !== "3".charCodeAt(0))) {
      s7 = et2(e9.subarray(6, 10)), s7 += 10, 64 & e9[5] && (i7 += 4, i7 += et2(e9.subarray(10, 14)), s7 -= et2(e9.subarray(16, 20)));
      do {
        if ((t4 = et2(e9.subarray(i7 + 4, i7 + 8))) < 1) break;
        var r5 = { id: String.fromCharCode(e9[i7], e9[i7 + 1], e9[i7 + 2], e9[i7 + 3]), data: e9.subarray(i7 + 10, i7 + t4 + 10) };
        r5.key = r5.id, tt2[r5.id] ? tt2[r5.id](r5) : "T" === r5.id[0] ? tt2["T*"](r5) : "W" === r5.id[0] && tt2["W*"](r5), n6.push(r5), i7 += 10, i7 += t4;
      } while (i7 < s7);
      return n6;
    }
  }, parseSyncSafeInteger: et2, frameParsers: tt2 }, st2 = Fe2, nt2 = it2;
  (We2 = function(e9) {
    var t4, i7 = { descriptor: e9 && e9.descriptor }, s7 = 0, n6 = [], r5 = 0;
    if (We2.prototype.init.call(this), this.dispatchType = st2.METADATA_STREAM_TYPE.toString(16), i7.descriptor) for (t4 = 0; t4 < i7.descriptor.length; t4++) this.dispatchType += ("00" + i7.descriptor[t4].toString(16)).slice(-2);
    this.push = function(e10) {
      var t5, i8, a7, o5, l8;
      if ("timed-metadata" === e10.type) {
        if (e10.dataAlignmentIndicator && (r5 = 0, n6.length = 0), 0 === n6.length && (e10.data.length < 10 || e10.data[0] !== "I".charCodeAt(0) || e10.data[1] !== "D".charCodeAt(0) || e10.data[2] !== "3".charCodeAt(0))) this.trigger("log", { level: "warn", message: "Skipping unrecognized metadata packet" });
        else if (n6.push(e10), r5 += e10.data.byteLength, 1 === n6.length && (s7 = nt2.parseSyncSafeInteger(e10.data.subarray(6, 10)), s7 += 10), !(r5 < s7)) {
          for (t5 = { data: new Uint8Array(s7), frames: [], pts: n6[0].pts, dts: n6[0].dts }, l8 = 0; l8 < s7; ) t5.data.set(n6[0].data.subarray(0, s7 - l8), l8), l8 += n6[0].data.byteLength, r5 -= n6[0].data.byteLength, n6.shift();
          i8 = 10, 64 & t5.data[5] && (i8 += 4, i8 += nt2.parseSyncSafeInteger(t5.data.subarray(10, 14)), s7 -= nt2.parseSyncSafeInteger(t5.data.subarray(16, 20)));
          do {
            if ((a7 = nt2.parseSyncSafeInteger(t5.data.subarray(i8 + 4, i8 + 8))) < 1) {
              this.trigger("log", { level: "warn", message: "Malformed ID3 frame encountered. Skipping remaining metadata parsing." });
              break;
            }
            if ((o5 = { id: String.fromCharCode(t5.data[i8], t5.data[i8 + 1], t5.data[i8 + 2], t5.data[i8 + 3]), data: t5.data.subarray(i8 + 10, i8 + a7 + 10) }).key = o5.id, nt2.frameParsers[o5.id] ? nt2.frameParsers[o5.id](o5) : "T" === o5.id[0] ? nt2.frameParsers["T*"](o5) : "W" === o5.id[0] && nt2.frameParsers["W*"](o5), "com.apple.streaming.transportStreamTimestamp" === o5.owner) {
              var h3 = o5.data, u6 = (1 & h3[3]) << 30 | h3[4] << 22 | h3[5] << 14 | h3[6] << 6 | h3[7] >>> 2;
              u6 *= 4, u6 += 3 & h3[7], o5.timeStamp = u6, void 0 === t5.pts && void 0 === t5.dts && (t5.pts = o5.timeStamp, t5.dts = o5.timeStamp), this.trigger("timestamp", o5);
            }
            t5.frames.push(o5), i8 += 10, i8 += a7;
          } while (i8 < s7);
          this.trigger("data", t5);
        }
      }
    };
  }).prototype = new $2();
  var rt2, at2, ot2, lt2 = We2, ht2 = $2, ut2 = Be2, dt2 = Fe2, ct2 = Ge2.TimestampRolloverStream, pt2 = 188, mt2 = 71;
  (rt2 = function() {
    var e9 = new Uint8Array(pt2), t4 = 0;
    rt2.prototype.init.call(this), this.push = function(i7) {
      var s7, n6 = 0, r5 = pt2;
      for (t4 ? ((s7 = new Uint8Array(i7.byteLength + t4)).set(e9.subarray(0, t4)), s7.set(i7, t4), t4 = 0) : s7 = i7; r5 < s7.byteLength; ) s7[n6] !== mt2 || s7[r5] !== mt2 ? (n6++, r5++) : (this.trigger("data", s7.subarray(n6, r5)), n6 += pt2, r5 += pt2);
      n6 < s7.byteLength && (e9.set(s7.subarray(n6), 0), t4 = s7.byteLength - n6);
    }, this.flush = function() {
      t4 === pt2 && e9[0] === mt2 && (this.trigger("data", e9), t4 = 0), this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    }, this.reset = function() {
      t4 = 0, this.trigger("reset");
    };
  }).prototype = new ht2(), at2 = function() {
    var e9, t4, i7, s7;
    at2.prototype.init.call(this), s7 = this, this.packetsWaitingForPmt = [], this.programMapTable = void 0, e9 = function(e10, s8) {
      var n6 = 0;
      s8.payloadUnitStartIndicator && (n6 += e10[n6] + 1), "pat" === s8.type ? t4(e10.subarray(n6), s8) : i7(e10.subarray(n6), s8);
    }, t4 = function(e10, t5) {
      t5.section_number = e10[7], t5.last_section_number = e10[8], s7.pmtPid = (31 & e10[10]) << 8 | e10[11], t5.pmtPid = s7.pmtPid;
    }, i7 = function(e10, t5) {
      var i8, n6;
      if (1 & e10[5]) {
        for (s7.programMapTable = { video: null, audio: null, "timed-metadata": {} }, i8 = 3 + ((15 & e10[1]) << 8 | e10[2]) - 4, n6 = 12 + ((15 & e10[10]) << 8 | e10[11]); n6 < i8; ) {
          var r5 = e10[n6], a7 = (31 & e10[n6 + 1]) << 8 | e10[n6 + 2];
          r5 === dt2.H264_STREAM_TYPE && null === s7.programMapTable.video ? s7.programMapTable.video = a7 : r5 === dt2.ADTS_STREAM_TYPE && null === s7.programMapTable.audio ? s7.programMapTable.audio = a7 : r5 === dt2.METADATA_STREAM_TYPE && (s7.programMapTable["timed-metadata"][a7] = r5), n6 += 5 + ((15 & e10[n6 + 3]) << 8 | e10[n6 + 4]);
        }
        t5.programMapTable = s7.programMapTable;
      }
    }, this.push = function(t5) {
      var i8 = {}, s8 = 4;
      if (i8.payloadUnitStartIndicator = !!(64 & t5[1]), i8.pid = 31 & t5[1], i8.pid <<= 8, i8.pid |= t5[2], (48 & t5[3]) >>> 4 > 1 && (s8 += t5[s8] + 1), 0 === i8.pid) i8.type = "pat", e9(t5.subarray(s8), i8), this.trigger("data", i8);
      else if (i8.pid === this.pmtPid) for (i8.type = "pmt", e9(t5.subarray(s8), i8), this.trigger("data", i8); this.packetsWaitingForPmt.length; ) this.processPes_.apply(this, this.packetsWaitingForPmt.shift());
      else void 0 === this.programMapTable ? this.packetsWaitingForPmt.push([t5, s8, i8]) : this.processPes_(t5, s8, i8);
    }, this.processPes_ = function(e10, t5, i8) {
      i8.pid === this.programMapTable.video ? i8.streamType = dt2.H264_STREAM_TYPE : i8.pid === this.programMapTable.audio ? i8.streamType = dt2.ADTS_STREAM_TYPE : i8.streamType = this.programMapTable["timed-metadata"][i8.pid], i8.type = "pes", i8.data = e10.subarray(t5), this.trigger("data", i8);
    };
  }, at2.prototype = new ht2(), at2.STREAM_TYPES = { h264: 27, adts: 15 }, ot2 = function() {
    var e9, t4 = this, i7 = false, s7 = { data: [], size: 0 }, n6 = { data: [], size: 0 }, r5 = { data: [], size: 0 }, a7 = function(e10, t5) {
      var i8;
      const s8 = e10[0] << 16 | e10[1] << 8 | e10[2];
      t5.data = new Uint8Array(), 1 === s8 && (t5.packetLength = 6 + (e10[4] << 8 | e10[5]), t5.dataAlignmentIndicator = !!(4 & e10[6]), 192 & (i8 = e10[7]) && (t5.pts = (14 & e10[9]) << 27 | (255 & e10[10]) << 20 | (254 & e10[11]) << 12 | (255 & e10[12]) << 5 | (254 & e10[13]) >>> 3, t5.pts *= 4, t5.pts += (6 & e10[13]) >>> 1, t5.dts = t5.pts, 64 & i8 && (t5.dts = (14 & e10[14]) << 27 | (255 & e10[15]) << 20 | (254 & e10[16]) << 12 | (255 & e10[17]) << 5 | (254 & e10[18]) >>> 3, t5.dts *= 4, t5.dts += (6 & e10[18]) >>> 1)), t5.data = e10.subarray(9 + e10[8]));
    }, o5 = function(e10, i8, s8) {
      var n7, r6 = new Uint8Array(e10.size), o6 = { type: i8 }, l8 = 0, h3 = 0, u6 = false;
      if (e10.data.length && !(e10.size < 9)) {
        for (o6.trackId = e10.data[0].pid, l8 = 0; l8 < e10.data.length; l8++) n7 = e10.data[l8], r6.set(n7.data, h3), h3 += n7.data.byteLength;
        a7(r6, o6), u6 = "video" === i8 || o6.packetLength <= e10.size, (s8 || u6) && (e10.size = 0, e10.data.length = 0), u6 && t4.trigger("data", o6);
      }
    };
    ot2.prototype.init.call(this), this.push = function(a8) {
      ({ pat: function() {
      }, pes: function() {
        var e10, t5;
        switch (a8.streamType) {
          case dt2.H264_STREAM_TYPE:
            e10 = s7, t5 = "video";
            break;
          case dt2.ADTS_STREAM_TYPE:
            e10 = n6, t5 = "audio";
            break;
          case dt2.METADATA_STREAM_TYPE:
            e10 = r5, t5 = "timed-metadata";
            break;
          default:
            return;
        }
        a8.payloadUnitStartIndicator && o5(e10, t5, true), e10.data.push(a8), e10.size += a8.data.byteLength;
      }, pmt: function() {
        var s8 = { type: "metadata", tracks: [] };
        null !== (e9 = a8.programMapTable).video && s8.tracks.push({ timelineStartInfo: { baseMediaDecodeTime: 0 }, id: +e9.video, codec: "avc", type: "video" }), null !== e9.audio && s8.tracks.push({ timelineStartInfo: { baseMediaDecodeTime: 0 }, id: +e9.audio, codec: "adts", type: "audio" }), i7 = true, t4.trigger("data", s8);
      } })[a8.type]();
    }, this.reset = function() {
      s7.size = 0, s7.data.length = 0, n6.size = 0, n6.data.length = 0, this.trigger("reset");
    }, this.flushStreams_ = function() {
      o5(s7, "video"), o5(n6, "audio"), o5(r5, "timed-metadata");
    }, this.flush = function() {
      if (!i7 && e9) {
        var s8 = { type: "metadata", tracks: [] };
        null !== e9.video && s8.tracks.push({ timelineStartInfo: { baseMediaDecodeTime: 0 }, id: +e9.video, codec: "avc", type: "video" }), null !== e9.audio && s8.tracks.push({ timelineStartInfo: { baseMediaDecodeTime: 0 }, id: +e9.audio, codec: "adts", type: "audio" }), t4.trigger("data", s8);
      }
      i7 = false, this.flushStreams_(), this.trigger("done");
    };
  }, ot2.prototype = new ht2();
  var gt2 = { PAT_PID: 0, MP2T_PACKET_LENGTH: pt2, TransportPacketStream: rt2, TransportParseStream: at2, ElementaryStream: ot2, TimestampRolloverStream: ct2, CaptionStream: ut2.CaptionStream, Cea608Stream: ut2.Cea608Stream, Cea708Stream: ut2.Cea708Stream, MetadataStream: lt2 };
  for (var ft2 in dt2) dt2.hasOwnProperty(ft2) && (gt2[ft2] = dt2[ft2]);
  var yt2, _t2 = gt2, vt2 = $2, bt2 = ce2.ONE_SECOND_IN_TS, Tt2 = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
  (yt2 = function(e9) {
    var t4, i7 = 0;
    yt2.prototype.init.call(this), this.skipWarn_ = function(e10, t5) {
      this.trigger("log", { level: "warn", message: `adts skiping bytes ${e10} to ${t5} in frame ${i7} outside syncword` });
    }, this.push = function(s7) {
      var n6, r5, a7, o5, l8, h3 = 0;
      if (e9 || (i7 = 0), "audio" === s7.type) {
        var u6;
        for (t4 && t4.length ? (a7 = t4, (t4 = new Uint8Array(a7.byteLength + s7.data.byteLength)).set(a7), t4.set(s7.data, a7.byteLength)) : t4 = s7.data; h3 + 7 < t4.length; ) if (255 === t4[h3] && 240 == (246 & t4[h3 + 1])) {
          if ("number" == typeof u6 && (this.skipWarn_(u6, h3), u6 = null), r5 = 2 * (1 & ~t4[h3 + 1]), n6 = (3 & t4[h3 + 3]) << 11 | t4[h3 + 4] << 3 | (224 & t4[h3 + 5]) >> 5, l8 = (o5 = 1024 * (1 + (3 & t4[h3 + 6]))) * bt2 / Tt2[(60 & t4[h3 + 2]) >>> 2], t4.byteLength - h3 < n6) break;
          this.trigger("data", { pts: s7.pts + i7 * l8, dts: s7.dts + i7 * l8, sampleCount: o5, audioobjecttype: 1 + (t4[h3 + 2] >>> 6 & 3), channelcount: (1 & t4[h3 + 2]) << 2 | (192 & t4[h3 + 3]) >>> 6, samplerate: Tt2[(60 & t4[h3 + 2]) >>> 2], samplingfrequencyindex: (60 & t4[h3 + 2]) >>> 2, samplesize: 16, data: t4.subarray(h3 + 7 + r5, h3 + n6) }), i7++, h3 += n6;
        } else "number" != typeof u6 && (u6 = h3), h3++;
        "number" == typeof u6 && (this.skipWarn_(u6, h3), u6 = null), t4 = t4.subarray(h3);
      }
    }, this.flush = function() {
      i7 = 0, this.trigger("done");
    }, this.reset = function() {
      t4 = void 0, this.trigger("reset");
    }, this.endTimeline = function() {
      t4 = void 0, this.trigger("endedtimeline");
    };
  }).prototype = new vt2();
  var St2, Et2, wt2, Ct2 = yt2, kt2 = $2, It2 = function(e9) {
    var t4 = e9.byteLength, i7 = 0, s7 = 0;
    this.length = function() {
      return 8 * t4;
    }, this.bitsAvailable = function() {
      return 8 * t4 + s7;
    }, this.loadWord = function() {
      var n6 = e9.byteLength - t4, r5 = new Uint8Array(4), a7 = Math.min(4, t4);
      if (0 === a7) throw new Error("no bytes available");
      r5.set(e9.subarray(n6, n6 + a7)), i7 = new DataView(r5.buffer).getUint32(0), s7 = 8 * a7, t4 -= a7;
    }, this.skipBits = function(e10) {
      var n6;
      s7 > e10 ? (i7 <<= e10, s7 -= e10) : (e10 -= s7, e10 -= 8 * (n6 = Math.floor(e10 / 8)), t4 -= n6, this.loadWord(), i7 <<= e10, s7 -= e10);
    }, this.readBits = function(e10) {
      var n6 = Math.min(s7, e10), r5 = i7 >>> 32 - n6;
      return (s7 -= n6) > 0 ? i7 <<= n6 : t4 > 0 && this.loadWord(), (n6 = e10 - n6) > 0 ? r5 << n6 | this.readBits(n6) : r5;
    }, this.skipLeadingZeros = function() {
      var e10;
      for (e10 = 0; e10 < s7; ++e10) if (i7 & 2147483648 >>> e10) return i7 <<= e10, s7 -= e10, e10;
      return this.loadWord(), e10 + this.skipLeadingZeros();
    }, this.skipUnsignedExpGolomb = function() {
      this.skipBits(1 + this.skipLeadingZeros());
    }, this.skipExpGolomb = function() {
      this.skipBits(1 + this.skipLeadingZeros());
    }, this.readUnsignedExpGolomb = function() {
      var e10 = this.skipLeadingZeros();
      return this.readBits(e10 + 1) - 1;
    }, this.readExpGolomb = function() {
      var e10 = this.readUnsignedExpGolomb();
      return 1 & e10 ? 1 + e10 >>> 1 : -1 * (e10 >>> 1);
    }, this.readBoolean = function() {
      return 1 === this.readBits(1);
    }, this.readUnsignedByte = function() {
      return this.readBits(8);
    }, this.loadWord();
  };
  (Et2 = function() {
    var e9, t4, i7 = 0;
    Et2.prototype.init.call(this), this.push = function(s7) {
      var n6;
      t4 ? ((n6 = new Uint8Array(t4.byteLength + s7.data.byteLength)).set(t4), n6.set(s7.data, t4.byteLength), t4 = n6) : t4 = s7.data;
      for (var r5 = t4.byteLength; i7 < r5 - 3; i7++) if (1 === t4[i7 + 2]) {
        e9 = i7 + 5;
        break;
      }
      for (; e9 < r5; ) switch (t4[e9]) {
        case 0:
          if (0 !== t4[e9 - 1]) {
            e9 += 2;
            break;
          }
          if (0 !== t4[e9 - 2]) {
            e9++;
            break;
          }
          i7 + 3 !== e9 - 2 && this.trigger("data", t4.subarray(i7 + 3, e9 - 2));
          do {
            e9++;
          } while (1 !== t4[e9] && e9 < r5);
          i7 = e9 - 2, e9 += 3;
          break;
        case 1:
          if (0 !== t4[e9 - 1] || 0 !== t4[e9 - 2]) {
            e9 += 3;
            break;
          }
          this.trigger("data", t4.subarray(i7 + 3, e9 - 2)), i7 = e9 - 2, e9 += 3;
          break;
        default:
          e9 += 3;
      }
      t4 = t4.subarray(i7), e9 -= i7, i7 = 0;
    }, this.reset = function() {
      t4 = null, i7 = 0, this.trigger("reset");
    }, this.flush = function() {
      t4 && t4.byteLength > 3 && this.trigger("data", t4.subarray(i7 + 3)), t4 = null, i7 = 0, this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    };
  }).prototype = new kt2(), wt2 = { 100: true, 110: true, 122: true, 244: true, 44: true, 83: true, 86: true, 118: true, 128: true, 138: true, 139: true, 134: true }, St2 = function() {
    var e9, t4, i7, s7, n6, r5, a7, o5 = new Et2();
    St2.prototype.init.call(this), e9 = this, this.push = function(e10) {
      "video" === e10.type && (t4 = e10.trackId, i7 = e10.pts, s7 = e10.dts, o5.push(e10));
    }, o5.on("data", function(a8) {
      var o6 = { trackId: t4, pts: i7, dts: s7, data: a8, nalUnitTypeCode: 31 & a8[0] };
      switch (o6.nalUnitTypeCode) {
        case 5:
          o6.nalUnitType = "slice_layer_without_partitioning_rbsp_idr";
          break;
        case 6:
          o6.nalUnitType = "sei_rbsp", o6.escapedRBSP = n6(a8.subarray(1));
          break;
        case 7:
          o6.nalUnitType = "seq_parameter_set_rbsp", o6.escapedRBSP = n6(a8.subarray(1)), o6.config = r5(o6.escapedRBSP);
          break;
        case 8:
          o6.nalUnitType = "pic_parameter_set_rbsp";
          break;
        case 9:
          o6.nalUnitType = "access_unit_delimiter_rbsp";
      }
      e9.trigger("data", o6);
    }), o5.on("done", function() {
      e9.trigger("done");
    }), o5.on("partialdone", function() {
      e9.trigger("partialdone");
    }), o5.on("reset", function() {
      e9.trigger("reset");
    }), o5.on("endedtimeline", function() {
      e9.trigger("endedtimeline");
    }), this.flush = function() {
      o5.flush();
    }, this.partialFlush = function() {
      o5.partialFlush();
    }, this.reset = function() {
      o5.reset();
    }, this.endTimeline = function() {
      o5.endTimeline();
    }, a7 = function(e10, t5) {
      var i8, s8 = 8, n7 = 8;
      for (i8 = 0; i8 < e10; i8++) 0 !== n7 && (n7 = (s8 + t5.readExpGolomb() + 256) % 256), s8 = 0 === n7 ? s8 : n7;
    }, n6 = function(e10) {
      for (var t5, i8, s8 = e10.byteLength, n7 = [], r6 = 1; r6 < s8 - 2; ) 0 === e10[r6] && 0 === e10[r6 + 1] && 3 === e10[r6 + 2] ? (n7.push(r6 + 2), r6 += 2) : r6++;
      if (0 === n7.length) return e10;
      t5 = s8 - n7.length, i8 = new Uint8Array(t5);
      var a8 = 0;
      for (r6 = 0; r6 < t5; a8++, r6++) a8 === n7[0] && (a8++, n7.shift()), i8[r6] = e10[a8];
      return i8;
    }, r5 = function(e10) {
      var t5, i8, s8, n7, r6, o6, l8, h3, u6, d3, c7, p7, m8 = 0, g3 = 0, f5 = 0, y4 = 0, _4 = [1, 1];
      if (i8 = (t5 = new It2(e10)).readUnsignedByte(), n7 = t5.readUnsignedByte(), s8 = t5.readUnsignedByte(), t5.skipUnsignedExpGolomb(), wt2[i8] && (3 === (r6 = t5.readUnsignedExpGolomb()) && t5.skipBits(1), t5.skipUnsignedExpGolomb(), t5.skipUnsignedExpGolomb(), t5.skipBits(1), t5.readBoolean())) for (c7 = 3 !== r6 ? 8 : 12, p7 = 0; p7 < c7; p7++) t5.readBoolean() && a7(p7 < 6 ? 16 : 64, t5);
      if (t5.skipUnsignedExpGolomb(), 0 === (o6 = t5.readUnsignedExpGolomb())) t5.readUnsignedExpGolomb();
      else if (1 === o6) for (t5.skipBits(1), t5.skipExpGolomb(), t5.skipExpGolomb(), l8 = t5.readUnsignedExpGolomb(), p7 = 0; p7 < l8; p7++) t5.skipExpGolomb();
      if (t5.skipUnsignedExpGolomb(), t5.skipBits(1), h3 = t5.readUnsignedExpGolomb(), u6 = t5.readUnsignedExpGolomb(), 0 === (d3 = t5.readBits(1)) && t5.skipBits(1), t5.skipBits(1), t5.readBoolean() && (m8 = t5.readUnsignedExpGolomb(), g3 = t5.readUnsignedExpGolomb(), f5 = t5.readUnsignedExpGolomb(), y4 = t5.readUnsignedExpGolomb()), t5.readBoolean() && t5.readBoolean()) {
        switch (t5.readUnsignedByte()) {
          case 1:
            _4 = [1, 1];
            break;
          case 2:
            _4 = [12, 11];
            break;
          case 3:
            _4 = [10, 11];
            break;
          case 4:
            _4 = [16, 11];
            break;
          case 5:
            _4 = [40, 33];
            break;
          case 6:
            _4 = [24, 11];
            break;
          case 7:
            _4 = [20, 11];
            break;
          case 8:
            _4 = [32, 11];
            break;
          case 9:
            _4 = [80, 33];
            break;
          case 10:
            _4 = [18, 11];
            break;
          case 11:
            _4 = [15, 11];
            break;
          case 12:
            _4 = [64, 33];
            break;
          case 13:
            _4 = [160, 99];
            break;
          case 14:
            _4 = [4, 3];
            break;
          case 15:
            _4 = [3, 2];
            break;
          case 16:
            _4 = [2, 1];
            break;
          case 255:
            _4 = [t5.readUnsignedByte() << 8 | t5.readUnsignedByte(), t5.readUnsignedByte() << 8 | t5.readUnsignedByte()];
        }
        _4 && (_4[0], _4[1]);
      }
      return { profileIdc: i8, levelIdc: s8, profileCompatibility: n7, width: 16 * (h3 + 1) - 2 * m8 - 2 * g3, height: (2 - d3) * (u6 + 1) * 16 - 2 * f5 - 2 * y4, sarRatio: _4 };
    };
  }, St2.prototype = new kt2();
  var xt2, At2 = { H264Stream: St2 }, Dt2 = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], Pt2 = function(e9, t4) {
    var i7 = e9[t4 + 6] << 21 | e9[t4 + 7] << 14 | e9[t4 + 8] << 7 | e9[t4 + 9];
    return i7 = i7 >= 0 ? i7 : 0, (16 & e9[t4 + 5]) >> 4 ? i7 + 20 : i7 + 10;
  }, Lt2 = function(e9, t4) {
    return e9.length - t4 < 10 || e9[t4] !== "I".charCodeAt(0) || e9[t4 + 1] !== "D".charCodeAt(0) || e9[t4 + 2] !== "3".charCodeAt(0) ? t4 : (t4 += Pt2(e9, t4), Lt2(e9, t4));
  }, Ot2 = function(e9) {
    return e9[0] << 21 | e9[1] << 14 | e9[2] << 7 | e9[3];
  }, Nt2 = function(e9, t4, i7) {
    var s7, n6 = "";
    for (s7 = t4; s7 < i7; s7++) n6 += "%" + ("00" + e9[s7].toString(16)).slice(-2);
    return n6;
  }, Rt2 = function(e9, t4, i7) {
    return unescape(Nt2(e9, t4, i7));
  }, Mt2 = { isLikelyAacData: function(e9) {
    var t4 = Lt2(e9, 0);
    return e9.length >= t4 + 2 && !(255 & ~e9[t4]) && !(240 & ~e9[t4 + 1]) && 16 == (22 & e9[t4 + 1]);
  }, parseId3TagSize: Pt2, parseAdtsSize: function(e9, t4) {
    var i7 = (224 & e9[t4 + 5]) >> 5, s7 = e9[t4 + 4] << 3;
    return 6144 & e9[t4 + 3] | s7 | i7;
  }, parseType: function(e9, t4) {
    return e9[t4] === "I".charCodeAt(0) && e9[t4 + 1] === "D".charCodeAt(0) && e9[t4 + 2] === "3".charCodeAt(0) ? "timed-metadata" : true & e9[t4] && !(240 & ~e9[t4 + 1]) ? "audio" : null;
  }, parseSampleRate: function(e9) {
    for (var t4 = 0; t4 + 5 < e9.length; ) {
      if (255 === e9[t4] && 240 == (246 & e9[t4 + 1])) return Dt2[(60 & e9[t4 + 2]) >>> 2];
      t4++;
    }
    return null;
  }, parseAacTimestamp: function(e9) {
    var t4, i7, s7;
    t4 = 10, 64 & e9[5] && (t4 += 4, t4 += Ot2(e9.subarray(10, 14)));
    do {
      if ((i7 = Ot2(e9.subarray(t4 + 4, t4 + 8))) < 1) return null;
      if ("PRIV" === String.fromCharCode(e9[t4], e9[t4 + 1], e9[t4 + 2], e9[t4 + 3])) {
        s7 = e9.subarray(t4 + 10, t4 + i7 + 10);
        for (var n6 = 0; n6 < s7.byteLength; n6++) if (0 === s7[n6]) {
          if ("com.apple.streaming.transportStreamTimestamp" === Rt2(s7, 0, n6)) {
            var r5 = s7.subarray(n6 + 1), a7 = (1 & r5[3]) << 30 | r5[4] << 22 | r5[5] << 14 | r5[6] << 6 | r5[7] >>> 2;
            return a7 *= 4, a7 += 3 & r5[7];
          }
          break;
        }
      }
      t4 += 10, t4 += i7;
    } while (t4 < e9.byteLength);
    return null;
  } }, Ut2 = Mt2;
  (xt2 = function() {
    var e9 = new Uint8Array(), t4 = 0;
    xt2.prototype.init.call(this), this.setTimestamp = function(e10) {
      t4 = e10;
    }, this.push = function(i7) {
      var s7, n6, r5, a7, o5 = 0, l8 = 0;
      for (e9.length ? (a7 = e9.length, (e9 = new Uint8Array(i7.byteLength + a7)).set(e9.subarray(0, a7)), e9.set(i7, a7)) : e9 = i7; e9.length - l8 >= 3; ) if (e9[l8] !== "I".charCodeAt(0) || e9[l8 + 1] !== "D".charCodeAt(0) || e9[l8 + 2] !== "3".charCodeAt(0)) if (255 & ~e9[l8] || 240 & ~e9[l8 + 1]) l8++;
      else {
        if (e9.length - l8 < 7) break;
        if (l8 + (o5 = Ut2.parseAdtsSize(e9, l8)) > e9.length) break;
        r5 = { type: "audio", data: e9.subarray(l8, l8 + o5), pts: t4, dts: t4 }, this.trigger("data", r5), l8 += o5;
      }
      else {
        if (e9.length - l8 < 10) break;
        if (l8 + (o5 = Ut2.parseId3TagSize(e9, l8)) > e9.length) break;
        n6 = { type: "timed-metadata", data: e9.subarray(l8, l8 + o5) }, this.trigger("data", n6), l8 += o5;
      }
      s7 = e9.length - l8, e9 = s7 > 0 ? e9.subarray(l8) : new Uint8Array();
    }, this.reset = function() {
      e9 = new Uint8Array(), this.trigger("reset");
    }, this.endTimeline = function() {
      e9 = new Uint8Array(), this.trigger("endedtimeline");
    };
  }).prototype = new $2();
  var Bt2, Ft2, qt2, jt2, $t2 = xt2, Ht2 = ["audioobjecttype", "channelcount", "samplerate", "samplingfrequencyindex", "samplesize"], Vt2 = ["width", "height", "profileIdc", "levelIdc", "profileCompatibility", "sarRatio"], zt2 = $2, Wt2 = ee3, Gt2 = re3, Xt2 = ye3, Kt2 = ve2, Yt2 = _t2, Qt2 = ce2, Jt2 = Ct2, Zt2 = At2.H264Stream, ei2 = $t2, ti2 = Mt2.isLikelyAacData, ii2 = ce2.ONE_SECOND_IN_TS, si2 = Ht2, ni2 = Vt2, ri2 = function(e9, t4) {
    t4.stream = e9, this.trigger("log", t4);
  }, ai2 = function(e9, t4) {
    for (var i7 = Object.keys(t4), s7 = 0; s7 < i7.length; s7++) {
      var n6 = i7[s7];
      "headOfPipeline" !== n6 && t4[n6].on && t4[n6].on("log", ri2.bind(e9, n6));
    }
  }, oi2 = function(e9, t4) {
    var i7;
    if (e9.length !== t4.length) return false;
    for (i7 = 0; i7 < e9.length; i7++) if (e9[i7] !== t4[i7]) return false;
    return true;
  }, li2 = function(e9, t4, i7, s7, n6, r5) {
    return { start: { dts: e9, pts: e9 + (i7 - t4) }, end: { dts: e9 + (s7 - t4), pts: e9 + (n6 - i7) }, prependedContentDuration: r5, baseMediaDecodeTime: e9 };
  };
  Ft2 = function(e9, t4) {
    var i7, s7 = [], n6 = 0, r5 = 0, a7 = 1 / 0;
    i7 = (t4 = t4 || {}).firstSequenceNumber || 0, Ft2.prototype.init.call(this), this.push = function(t5) {
      Kt2.collectDtsInfo(e9, t5), e9 && si2.forEach(function(i8) {
        e9[i8] = t5[i8];
      }), s7.push(t5);
    }, this.setEarliestDts = function(e10) {
      n6 = e10;
    }, this.setVideoBaseMediaDecodeTime = function(e10) {
      a7 = e10;
    }, this.setAudioAppendStart = function(e10) {
      r5 = e10;
    }, this.flush = function() {
      var o5, l8, h3, u6, d3, c7, p7;
      0 !== s7.length ? (o5 = Xt2.trimAdtsFramesByEarliestDts(s7, e9, n6), e9.baseMediaDecodeTime = Kt2.calculateTrackBaseMediaDecodeTime(e9, t4.keepOriginalTimestamps), p7 = Xt2.prefixWithSilence(e9, o5, r5, a7), e9.samples = Xt2.generateSampleTable(o5), h3 = Wt2.mdat(Xt2.concatenateFrameData(o5)), s7 = [], l8 = Wt2.moof(i7, [e9]), u6 = new Uint8Array(l8.byteLength + h3.byteLength), i7++, u6.set(l8), u6.set(h3, l8.byteLength), Kt2.clearDtsInfo(e9), d3 = Math.ceil(1024 * ii2 / e9.samplerate), o5.length && (c7 = o5.length * d3, this.trigger("segmentTimingInfo", li2(Qt2.audioTsToVideoTs(e9.baseMediaDecodeTime, e9.samplerate), o5[0].dts, o5[0].pts, o5[0].dts + c7, o5[0].pts + c7, p7 || 0)), this.trigger("timingInfo", { start: o5[0].pts, end: o5[0].pts + c7 })), this.trigger("data", { track: e9, boxes: u6 }), this.trigger("done", "AudioSegmentStream")) : this.trigger("done", "AudioSegmentStream");
    }, this.reset = function() {
      Kt2.clearDtsInfo(e9), s7 = [], this.trigger("reset");
    };
  }, Ft2.prototype = new zt2(), Bt2 = function(e9, t4) {
    var i7, s7, n6, r5 = [], a7 = [];
    i7 = (t4 = t4 || {}).firstSequenceNumber || 0, Bt2.prototype.init.call(this), delete e9.minPTS, this.gopCache_ = [], this.push = function(t5) {
      Kt2.collectDtsInfo(e9, t5), "seq_parameter_set_rbsp" !== t5.nalUnitType || s7 || (s7 = t5.config, e9.sps = [t5.data], ni2.forEach(function(t6) {
        e9[t6] = s7[t6];
      }, this)), "pic_parameter_set_rbsp" !== t5.nalUnitType || n6 || (n6 = t5.data, e9.pps = [t5.data]), r5.push(t5);
    }, this.flush = function() {
      for (var s8, n7, o5, l8, h3, u6, d3, c7, p7 = 0; r5.length && "access_unit_delimiter_rbsp" !== r5[0].nalUnitType; ) r5.shift();
      if (0 === r5.length) return this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
      if (s8 = Gt2.groupNalsIntoFrames(r5), (o5 = Gt2.groupFramesIntoGops(s8))[0][0].keyFrame || ((n7 = this.getGopForFusion_(r5[0], e9)) ? (p7 = n7.duration, o5.unshift(n7), o5.byteLength += n7.byteLength, o5.nalCount += n7.nalCount, o5.pts = n7.pts, o5.dts = n7.dts, o5.duration += n7.duration) : o5 = Gt2.extendFirstKeyFrame(o5)), a7.length) {
        var m8;
        if (!(m8 = t4.alignGopsAtEnd ? this.alignGopsAtEnd_(o5) : this.alignGopsAtStart_(o5))) return this.gopCache_.unshift({ gop: o5.pop(), pps: e9.pps, sps: e9.sps }), this.gopCache_.length = Math.min(6, this.gopCache_.length), r5 = [], this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
        Kt2.clearDtsInfo(e9), o5 = m8;
      }
      Kt2.collectDtsInfo(e9, o5), e9.samples = Gt2.generateSampleTable(o5), h3 = Wt2.mdat(Gt2.concatenateNalData(o5)), e9.baseMediaDecodeTime = Kt2.calculateTrackBaseMediaDecodeTime(e9, t4.keepOriginalTimestamps), this.trigger("processedGopsInfo", o5.map(function(e10) {
        return { pts: e10.pts, dts: e10.dts, byteLength: e10.byteLength };
      })), d3 = o5[0], c7 = o5[o5.length - 1], this.trigger("segmentTimingInfo", li2(e9.baseMediaDecodeTime, d3.dts, d3.pts, c7.dts + c7.duration, c7.pts + c7.duration, p7)), this.trigger("timingInfo", { start: o5[0].pts, end: o5[o5.length - 1].pts + o5[o5.length - 1].duration }), this.gopCache_.unshift({ gop: o5.pop(), pps: e9.pps, sps: e9.sps }), this.gopCache_.length = Math.min(6, this.gopCache_.length), r5 = [], this.trigger("baseMediaDecodeTime", e9.baseMediaDecodeTime), this.trigger("timelineStartInfo", e9.timelineStartInfo), l8 = Wt2.moof(i7, [e9]), u6 = new Uint8Array(l8.byteLength + h3.byteLength), i7++, u6.set(l8), u6.set(h3, l8.byteLength), this.trigger("data", { track: e9, boxes: u6 }), this.resetStream_(), this.trigger("done", "VideoSegmentStream");
    }, this.reset = function() {
      this.resetStream_(), r5 = [], this.gopCache_.length = 0, a7.length = 0, this.trigger("reset");
    }, this.resetStream_ = function() {
      Kt2.clearDtsInfo(e9), s7 = void 0, n6 = void 0;
    }, this.getGopForFusion_ = function(t5) {
      var i8, s8, n7, r6, a8, o5 = 45e3, l8 = 1 / 0;
      for (a8 = 0; a8 < this.gopCache_.length; a8++) n7 = (r6 = this.gopCache_[a8]).gop, e9.pps && oi2(e9.pps[0], r6.pps[0]) && e9.sps && oi2(e9.sps[0], r6.sps[0]) && (n7.dts < e9.timelineStartInfo.dts || (i8 = t5.dts - n7.dts - n7.duration) >= -1e4 && i8 <= o5 && (!s8 || l8 > i8) && (s8 = r6, l8 = i8));
      return s8 ? s8.gop : null;
    }, this.alignGopsAtStart_ = function(e10) {
      var t5, i8, s8, n7, r6, o5, l8, h3;
      for (r6 = e10.byteLength, o5 = e10.nalCount, l8 = e10.duration, t5 = i8 = 0; t5 < a7.length && i8 < e10.length && (s8 = a7[t5], n7 = e10[i8], s8.pts !== n7.pts); ) n7.pts > s8.pts ? t5++ : (i8++, r6 -= n7.byteLength, o5 -= n7.nalCount, l8 -= n7.duration);
      return 0 === i8 ? e10 : i8 === e10.length ? null : ((h3 = e10.slice(i8)).byteLength = r6, h3.duration = l8, h3.nalCount = o5, h3.pts = h3[0].pts, h3.dts = h3[0].dts, h3);
    }, this.alignGopsAtEnd_ = function(e10) {
      var t5, i8, s8, n7, r6, o5, l8;
      for (t5 = a7.length - 1, i8 = e10.length - 1, r6 = null, o5 = false; t5 >= 0 && i8 >= 0; ) {
        if (s8 = a7[t5], n7 = e10[i8], s8.pts === n7.pts) {
          o5 = true;
          break;
        }
        s8.pts > n7.pts ? t5-- : (t5 === a7.length - 1 && (r6 = i8), i8--);
      }
      if (!o5 && null === r6) return null;
      if (0 === (l8 = o5 ? i8 : r6)) return e10;
      var h3 = e10.slice(l8), u6 = h3.reduce(function(e11, t6) {
        return e11.byteLength += t6.byteLength, e11.duration += t6.duration, e11.nalCount += t6.nalCount, e11;
      }, { byteLength: 0, duration: 0, nalCount: 0 });
      return h3.byteLength = u6.byteLength, h3.duration = u6.duration, h3.nalCount = u6.nalCount, h3.pts = h3[0].pts, h3.dts = h3[0].dts, h3;
    }, this.alignGopsWith = function(e10) {
      a7 = e10;
    };
  }, Bt2.prototype = new zt2(), jt2 = function(e9, t4) {
    this.numberOfTracks = 0, this.metadataStream = t4, void 0 !== (e9 = e9 || {}).remux ? this.remuxTracks = !!e9.remux : this.remuxTracks = true, "boolean" == typeof e9.keepOriginalTimestamps ? this.keepOriginalTimestamps = e9.keepOriginalTimestamps : this.keepOriginalTimestamps = false, this.pendingTracks = [], this.videoTrack = null, this.pendingBoxes = [], this.pendingCaptions = [], this.pendingMetadata = [], this.pendingBytes = 0, this.emittedTracks = 0, jt2.prototype.init.call(this), this.push = function(e10) {
      return e10.content || e10.text ? this.pendingCaptions.push(e10) : e10.frames ? this.pendingMetadata.push(e10) : (this.pendingTracks.push(e10.track), this.pendingBytes += e10.boxes.byteLength, "video" === e10.track.type && (this.videoTrack = e10.track, this.pendingBoxes.push(e10.boxes)), void ("audio" === e10.track.type && (this.audioTrack = e10.track, this.pendingBoxes.unshift(e10.boxes))));
    };
  }, jt2.prototype = new zt2(), jt2.prototype.flush = function(e9) {
    var t4, i7, s7, n6, r5 = 0, a7 = { captions: [], captionStreams: {}, metadata: [], info: {} }, o5 = 0;
    if (this.pendingTracks.length < this.numberOfTracks) {
      if ("VideoSegmentStream" !== e9 && "AudioSegmentStream" !== e9) return;
      if (this.remuxTracks) return;
      if (0 === this.pendingTracks.length) return this.emittedTracks++, void (this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0));
    }
    if (this.videoTrack ? (o5 = this.videoTrack.timelineStartInfo.pts, ni2.forEach(function(e10) {
      a7.info[e10] = this.videoTrack[e10];
    }, this)) : this.audioTrack && (o5 = this.audioTrack.timelineStartInfo.pts, si2.forEach(function(e10) {
      a7.info[e10] = this.audioTrack[e10];
    }, this)), this.videoTrack || this.audioTrack) {
      for (1 === this.pendingTracks.length ? a7.type = this.pendingTracks[0].type : a7.type = "combined", this.emittedTracks += this.pendingTracks.length, s7 = Wt2.initSegment(this.pendingTracks), a7.initSegment = new Uint8Array(s7.byteLength), a7.initSegment.set(s7), a7.data = new Uint8Array(this.pendingBytes), n6 = 0; n6 < this.pendingBoxes.length; n6++) a7.data.set(this.pendingBoxes[n6], r5), r5 += this.pendingBoxes[n6].byteLength;
      for (n6 = 0; n6 < this.pendingCaptions.length; n6++) (t4 = this.pendingCaptions[n6]).startTime = Qt2.metadataTsToSeconds(t4.startPts, o5, this.keepOriginalTimestamps), t4.endTime = Qt2.metadataTsToSeconds(t4.endPts, o5, this.keepOriginalTimestamps), a7.captionStreams[t4.stream] = true, a7.captions.push(t4);
      for (n6 = 0; n6 < this.pendingMetadata.length; n6++) (i7 = this.pendingMetadata[n6]).cueTime = Qt2.metadataTsToSeconds(i7.pts, o5, this.keepOriginalTimestamps), a7.metadata.push(i7);
      for (a7.metadata.dispatchType = this.metadataStream.dispatchType, this.pendingTracks.length = 0, this.videoTrack = null, this.pendingBoxes.length = 0, this.pendingCaptions.length = 0, this.pendingBytes = 0, this.pendingMetadata.length = 0, this.trigger("data", a7), n6 = 0; n6 < a7.captions.length; n6++) t4 = a7.captions[n6], this.trigger("caption", t4);
      for (n6 = 0; n6 < a7.metadata.length; n6++) i7 = a7.metadata[n6], this.trigger("id3Frame", i7);
    }
    this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0);
  }, jt2.prototype.setRemux = function(e9) {
    this.remuxTracks = e9;
  }, qt2 = function(e9) {
    var t4, i7, s7 = this, n6 = true;
    qt2.prototype.init.call(this), e9 = e9 || {}, this.baseMediaDecodeTime = e9.baseMediaDecodeTime || 0, this.transmuxPipeline_ = {}, this.setupAacPipeline = function() {
      var n7 = {};
      this.transmuxPipeline_ = n7, n7.type = "aac", n7.metadataStream = new Yt2.MetadataStream(), n7.aacStream = new ei2(), n7.audioTimestampRolloverStream = new Yt2.TimestampRolloverStream("audio"), n7.timedMetadataTimestampRolloverStream = new Yt2.TimestampRolloverStream("timed-metadata"), n7.adtsStream = new Jt2(), n7.coalesceStream = new jt2(e9, n7.metadataStream), n7.headOfPipeline = n7.aacStream, n7.aacStream.pipe(n7.audioTimestampRolloverStream).pipe(n7.adtsStream), n7.aacStream.pipe(n7.timedMetadataTimestampRolloverStream).pipe(n7.metadataStream).pipe(n7.coalesceStream), n7.metadataStream.on("timestamp", function(e10) {
        n7.aacStream.setTimestamp(e10.timeStamp);
      }), n7.aacStream.on("data", function(r5) {
        "timed-metadata" !== r5.type && "audio" !== r5.type || n7.audioSegmentStream || (i7 = i7 || { timelineStartInfo: { baseMediaDecodeTime: s7.baseMediaDecodeTime }, codec: "adts", type: "audio" }, n7.coalesceStream.numberOfTracks++, n7.audioSegmentStream = new Ft2(i7, e9), n7.audioSegmentStream.on("log", s7.getLogTrigger_("audioSegmentStream")), n7.audioSegmentStream.on("timingInfo", s7.trigger.bind(s7, "audioTimingInfo")), n7.adtsStream.pipe(n7.audioSegmentStream).pipe(n7.coalesceStream), s7.trigger("trackinfo", { hasAudio: !!i7, hasVideo: !!t4 }));
      }), n7.coalesceStream.on("data", this.trigger.bind(this, "data")), n7.coalesceStream.on("done", this.trigger.bind(this, "done")), ai2(this, n7);
    }, this.setupTsPipeline = function() {
      var n7 = {};
      this.transmuxPipeline_ = n7, n7.type = "ts", n7.metadataStream = new Yt2.MetadataStream(), n7.packetStream = new Yt2.TransportPacketStream(), n7.parseStream = new Yt2.TransportParseStream(), n7.elementaryStream = new Yt2.ElementaryStream(), n7.timestampRolloverStream = new Yt2.TimestampRolloverStream(), n7.adtsStream = new Jt2(), n7.h264Stream = new Zt2(), n7.captionStream = new Yt2.CaptionStream(e9), n7.coalesceStream = new jt2(e9, n7.metadataStream), n7.headOfPipeline = n7.packetStream, n7.packetStream.pipe(n7.parseStream).pipe(n7.elementaryStream).pipe(n7.timestampRolloverStream), n7.timestampRolloverStream.pipe(n7.h264Stream), n7.timestampRolloverStream.pipe(n7.adtsStream), n7.timestampRolloverStream.pipe(n7.metadataStream).pipe(n7.coalesceStream), n7.h264Stream.pipe(n7.captionStream).pipe(n7.coalesceStream), n7.elementaryStream.on("data", function(r5) {
        var a7;
        if ("metadata" === r5.type) {
          for (a7 = r5.tracks.length; a7--; ) t4 || "video" !== r5.tracks[a7].type ? i7 || "audio" !== r5.tracks[a7].type || ((i7 = r5.tracks[a7]).timelineStartInfo.baseMediaDecodeTime = s7.baseMediaDecodeTime) : (t4 = r5.tracks[a7]).timelineStartInfo.baseMediaDecodeTime = s7.baseMediaDecodeTime;
          t4 && !n7.videoSegmentStream && (n7.coalesceStream.numberOfTracks++, n7.videoSegmentStream = new Bt2(t4, e9), n7.videoSegmentStream.on("log", s7.getLogTrigger_("videoSegmentStream")), n7.videoSegmentStream.on("timelineStartInfo", function(t5) {
            i7 && !e9.keepOriginalTimestamps && (i7.timelineStartInfo = t5, n7.audioSegmentStream.setEarliestDts(t5.dts - s7.baseMediaDecodeTime));
          }), n7.videoSegmentStream.on("processedGopsInfo", s7.trigger.bind(s7, "gopInfo")), n7.videoSegmentStream.on("segmentTimingInfo", s7.trigger.bind(s7, "videoSegmentTimingInfo")), n7.videoSegmentStream.on("baseMediaDecodeTime", function(e10) {
            i7 && n7.audioSegmentStream.setVideoBaseMediaDecodeTime(e10);
          }), n7.videoSegmentStream.on("timingInfo", s7.trigger.bind(s7, "videoTimingInfo")), n7.h264Stream.pipe(n7.videoSegmentStream).pipe(n7.coalesceStream)), i7 && !n7.audioSegmentStream && (n7.coalesceStream.numberOfTracks++, n7.audioSegmentStream = new Ft2(i7, e9), n7.audioSegmentStream.on("log", s7.getLogTrigger_("audioSegmentStream")), n7.audioSegmentStream.on("timingInfo", s7.trigger.bind(s7, "audioTimingInfo")), n7.audioSegmentStream.on("segmentTimingInfo", s7.trigger.bind(s7, "audioSegmentTimingInfo")), n7.adtsStream.pipe(n7.audioSegmentStream).pipe(n7.coalesceStream)), s7.trigger("trackinfo", { hasAudio: !!i7, hasVideo: !!t4 });
        }
      }), n7.coalesceStream.on("data", this.trigger.bind(this, "data")), n7.coalesceStream.on("id3Frame", function(e10) {
        e10.dispatchType = n7.metadataStream.dispatchType, s7.trigger("id3Frame", e10);
      }), n7.coalesceStream.on("caption", this.trigger.bind(this, "caption")), n7.coalesceStream.on("done", this.trigger.bind(this, "done")), ai2(this, n7);
    }, this.setBaseMediaDecodeTime = function(s8) {
      var n7 = this.transmuxPipeline_;
      e9.keepOriginalTimestamps || (this.baseMediaDecodeTime = s8), i7 && (i7.timelineStartInfo.dts = void 0, i7.timelineStartInfo.pts = void 0, Kt2.clearDtsInfo(i7), n7.audioTimestampRolloverStream && n7.audioTimestampRolloverStream.discontinuity()), t4 && (n7.videoSegmentStream && (n7.videoSegmentStream.gopCache_ = []), t4.timelineStartInfo.dts = void 0, t4.timelineStartInfo.pts = void 0, Kt2.clearDtsInfo(t4), n7.captionStream.reset()), n7.timestampRolloverStream && n7.timestampRolloverStream.discontinuity();
    }, this.setAudioAppendStart = function(e10) {
      i7 && this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e10);
    }, this.setRemux = function(t5) {
      var i8 = this.transmuxPipeline_;
      e9.remux = t5, i8 && i8.coalesceStream && i8.coalesceStream.setRemux(t5);
    }, this.alignGopsWith = function(e10) {
      t4 && this.transmuxPipeline_.videoSegmentStream && this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e10);
    }, this.getLogTrigger_ = function(e10) {
      var t5 = this;
      return function(i8) {
        i8.stream = e10, t5.trigger("log", i8);
      };
    }, this.push = function(e10) {
      if (n6) {
        var t5 = ti2(e10);
        t5 && "aac" !== this.transmuxPipeline_.type ? this.setupAacPipeline() : t5 || "ts" === this.transmuxPipeline_.type || this.setupTsPipeline(), n6 = false;
      }
      this.transmuxPipeline_.headOfPipeline.push(e10);
    }, this.flush = function() {
      n6 = true, this.transmuxPipeline_.headOfPipeline.flush();
    }, this.endTimeline = function() {
      this.transmuxPipeline_.headOfPipeline.endTimeline();
    }, this.reset = function() {
      this.transmuxPipeline_.headOfPipeline && this.transmuxPipeline_.headOfPipeline.reset();
    }, this.resetCaptions = function() {
      this.transmuxPipeline_.captionStream && this.transmuxPipeline_.captionStream.reset();
    };
  }, qt2.prototype = new zt2();
  var hi2, ui2, di2, ci2, pi2, mi2, gi2, fi2 = { Transmuxer: qt2 }, yi2 = { toUnsigned: function(e9) {
    return e9 >>> 0;
  }, toHexString: function(e9) {
    return ("00" + e9.toString(16)).slice(-2);
  } }, _i2 = function(e9) {
    var t4 = "";
    return t4 += String.fromCharCode(e9[0]), t4 += String.fromCharCode(e9[1]), t4 += String.fromCharCode(e9[2]), t4 += String.fromCharCode(e9[3]);
  }, vi2 = yi2.toUnsigned, bi2 = _i2, Ti2 = function(e9, t4) {
    var i7, s7, n6, r5, a7, o5 = [];
    if (!t4.length) return null;
    for (i7 = 0; i7 < e9.byteLength; ) s7 = vi2(e9[i7] << 24 | e9[i7 + 1] << 16 | e9[i7 + 2] << 8 | e9[i7 + 3]), n6 = bi2(e9.subarray(i7 + 4, i7 + 8)), r5 = s7 > 1 ? i7 + s7 : e9.byteLength, n6 === t4[0] && (1 === t4.length ? o5.push(e9.subarray(i7 + 8, r5)) : (a7 = Ti2(e9.subarray(i7 + 8, r5), t4.slice(1))).length && (o5 = o5.concat(a7))), i7 = r5;
    return o5;
  }, Si2 = Ti2, Ei2 = yi2.toUnsigned, wi2 = V3.getUint64, Ci2 = function(e9) {
    var t4 = { version: e9[0], flags: new Uint8Array(e9.subarray(1, 4)) };
    return 1 === t4.version ? t4.baseMediaDecodeTime = wi2(e9.subarray(4)) : t4.baseMediaDecodeTime = Ei2(e9[4] << 24 | e9[5] << 16 | e9[6] << 8 | e9[7]), t4;
  }, ki2 = function(e9) {
    var t4, i7 = new DataView(e9.buffer, e9.byteOffset, e9.byteLength), s7 = { version: e9[0], flags: new Uint8Array(e9.subarray(1, 4)), trackId: i7.getUint32(4) }, n6 = 1 & s7.flags[2], r5 = 2 & s7.flags[2], a7 = 8 & s7.flags[2], o5 = 16 & s7.flags[2], l8 = 32 & s7.flags[2], h3 = 65536 & s7.flags[0], u6 = 131072 & s7.flags[0];
    return t4 = 8, n6 && (t4 += 4, s7.baseDataOffset = i7.getUint32(12), t4 += 4), r5 && (s7.sampleDescriptionIndex = i7.getUint32(t4), t4 += 4), a7 && (s7.defaultSampleDuration = i7.getUint32(t4), t4 += 4), o5 && (s7.defaultSampleSize = i7.getUint32(t4), t4 += 4), l8 && (s7.defaultSampleFlags = i7.getUint32(t4)), h3 && (s7.durationIsEmpty = true), !n6 && u6 && (s7.baseDataOffsetIsMoof = true), s7;
  }, Ii2 = function(e9) {
    return { isLeading: (12 & e9[0]) >>> 2, dependsOn: 3 & e9[0], isDependedOn: (192 & e9[1]) >>> 6, hasRedundancy: (48 & e9[1]) >>> 4, paddingValue: (14 & e9[1]) >>> 1, isNonSyncSample: 1 & e9[1], degradationPriority: e9[2] << 8 | e9[3] };
  }, xi2 = function(e9) {
    var t4, i7 = { version: e9[0], flags: new Uint8Array(e9.subarray(1, 4)), samples: [] }, s7 = new DataView(e9.buffer, e9.byteOffset, e9.byteLength), n6 = 1 & i7.flags[2], r5 = 4 & i7.flags[2], a7 = 1 & i7.flags[1], o5 = 2 & i7.flags[1], l8 = 4 & i7.flags[1], h3 = 8 & i7.flags[1], u6 = s7.getUint32(4), d3 = 8;
    for (n6 && (i7.dataOffset = s7.getInt32(d3), d3 += 4), r5 && u6 && (t4 = { flags: Ii2(e9.subarray(d3, d3 + 4)) }, d3 += 4, a7 && (t4.duration = s7.getUint32(d3), d3 += 4), o5 && (t4.size = s7.getUint32(d3), d3 += 4), h3 && (1 === i7.version ? t4.compositionTimeOffset = s7.getInt32(d3) : t4.compositionTimeOffset = s7.getUint32(d3), d3 += 4), i7.samples.push(t4), u6--); u6--; ) t4 = {}, a7 && (t4.duration = s7.getUint32(d3), d3 += 4), o5 && (t4.size = s7.getUint32(d3), d3 += 4), l8 && (t4.flags = Ii2(e9.subarray(d3, d3 + 4)), d3 += 4), h3 && (1 === i7.version ? t4.compositionTimeOffset = s7.getInt32(d3) : t4.compositionTimeOffset = s7.getUint32(d3), d3 += 4), i7.samples.push(t4);
    return i7;
  }, Ai2 = { tfdt: Ci2, trun: xi2 }, Di2 = { parseTfdt: Ai2.tfdt, parseTrun: Ai2.trun }, Pi2 = { uint8ToCString: function(e9) {
    for (var t4 = 0, i7 = String.fromCharCode(e9[t4]), s7 = ""; "\0" !== i7; ) s7 += i7, t4++, i7 = String.fromCharCode(e9[t4]);
    return s7 += i7;
  } }.uint8ToCString, Li2 = V3.getUint64, Oi2 = function(e9) {
    var t4, i7, s7, n6, r5, a7, o5, l8 = 4, h3 = e9[0];
    if (0 === h3) l8 += (t4 = Pi2(e9.subarray(l8))).length, l8 += (i7 = Pi2(e9.subarray(l8))).length, s7 = (u6 = new DataView(e9.buffer)).getUint32(l8), l8 += 4, r5 = u6.getUint32(l8), l8 += 4, a7 = u6.getUint32(l8), l8 += 4, o5 = u6.getUint32(l8), l8 += 4;
    else if (1 === h3) {
      var u6;
      s7 = (u6 = new DataView(e9.buffer)).getUint32(l8), l8 += 4, n6 = Li2(e9.subarray(l8)), l8 += 8, a7 = u6.getUint32(l8), l8 += 4, o5 = u6.getUint32(l8), l8 += 4, l8 += (t4 = Pi2(e9.subarray(l8))).length, l8 += (i7 = Pi2(e9.subarray(l8))).length;
    }
    var d3 = { scheme_id_uri: t4, value: i7, timescale: s7 || 1, presentation_time: n6, presentation_time_delta: r5, event_duration: a7, id: o5, message_data: new Uint8Array(e9.subarray(l8, e9.byteLength)) };
    return Ri2(h3, d3) ? d3 : void 0;
  }, Ni2 = function(e9, t4, i7, s7) {
    return e9 || 0 === e9 ? e9 / t4 : s7 + i7 / t4;
  }, Ri2 = function(e9, t4) {
    var i7 = "\0" !== t4.scheme_id_uri, s7 = 0 === e9 && Mi2(t4.presentation_time_delta) && i7, n6 = 1 === e9 && Mi2(t4.presentation_time) && i7;
    return !(e9 > 1) && s7 || n6;
  }, Mi2 = function(e9) {
    return void 0 !== e9 || null !== e9;
  }, Ui2 = { parseEmsgBox: Oi2, scaleTime: Ni2 }, Bi2 = "undefined" != typeof window ? window : void 0 !== e8 ? e8 : "undefined" != typeof self ? self : {}, Fi2 = yi2.toUnsigned, qi2 = yi2.toHexString, ji2 = Si2, $i2 = _i2, Hi2 = Ui2, Vi2 = ki2, zi2 = xi2, Wi2 = Ci2, Gi2 = V3.getUint64, Xi2 = Bi2, Ki2 = it2.parseId3Frames;
  hi2 = function(e9) {
    var t4 = {};
    return ji2(e9, ["moov", "trak"]).reduce(function(e10, t5) {
      var i7, s7, n6, r5, a7;
      return (i7 = ji2(t5, ["tkhd"])[0]) ? (s7 = i7[0], r5 = Fi2(i7[n6 = 0 === s7 ? 12 : 20] << 24 | i7[n6 + 1] << 16 | i7[n6 + 2] << 8 | i7[n6 + 3]), (a7 = ji2(t5, ["mdia", "mdhd"])[0]) ? (n6 = 0 === (s7 = a7[0]) ? 12 : 20, e10[r5] = Fi2(a7[n6] << 24 | a7[n6 + 1] << 16 | a7[n6 + 2] << 8 | a7[n6 + 3]), e10) : null) : null;
    }, t4);
  }, ui2 = function(e9, t4) {
    var i7 = ji2(t4, ["moof", "traf"]).reduce(function(t5, i8) {
      var s7, n6 = ji2(i8, ["tfhd"])[0], r5 = Fi2(n6[4] << 24 | n6[5] << 16 | n6[6] << 8 | n6[7]), a7 = e9[r5] || 9e4, o5 = ji2(i8, ["tfdt"])[0], l8 = new DataView(o5.buffer, o5.byteOffset, o5.byteLength);
      let h3;
      return "bigint" == typeof (s7 = 1 === o5[0] ? Gi2(o5.subarray(4, 12)) : l8.getUint32(4)) ? h3 = s7 / Xi2.BigInt(a7) : "number" != typeof s7 || isNaN(s7) || (h3 = s7 / a7), h3 < Number.MAX_SAFE_INTEGER && (h3 = Number(h3)), h3 < t5 && (t5 = h3), t5;
    }, 1 / 0);
    return "bigint" == typeof i7 || isFinite(i7) ? i7 : 0;
  }, di2 = function(e9, t4) {
    var i7, s7 = ji2(t4, ["moof", "traf"]), n6 = 0, r5 = 0;
    if (s7 && s7.length) {
      var a7 = ji2(s7[0], ["tfhd"])[0], o5 = ji2(s7[0], ["trun"])[0], l8 = ji2(s7[0], ["tfdt"])[0];
      if (a7) i7 = Vi2(a7).trackId;
      if (l8) n6 = Wi2(l8).baseMediaDecodeTime;
      if (o5) {
        var h3 = zi2(o5);
        h3.samples && h3.samples.length && (r5 = h3.samples[0].compositionTimeOffset || 0);
      }
    }
    var u6 = e9[i7] || 9e4;
    "bigint" == typeof n6 && (r5 = Xi2.BigInt(r5), u6 = Xi2.BigInt(u6));
    var d3 = (n6 + r5) / u6;
    return "bigint" == typeof d3 && d3 < Number.MAX_SAFE_INTEGER && (d3 = Number(d3)), d3;
  }, ci2 = function(e9) {
    var t4 = ji2(e9, ["moov", "trak"]), i7 = [];
    return t4.forEach(function(e10) {
      var t5 = ji2(e10, ["mdia", "hdlr"]), s7 = ji2(e10, ["tkhd"]);
      t5.forEach(function(e11, t6) {
        var n6, r5, a7 = $i2(e11.subarray(8, 12)), o5 = s7[t6];
        "vide" === a7 && (r5 = 0 === (n6 = new DataView(o5.buffer, o5.byteOffset, o5.byteLength)).getUint8(0) ? n6.getUint32(12) : n6.getUint32(20), i7.push(r5));
      });
    }), i7;
  }, mi2 = function(e9) {
    var t4 = 0 === e9[0] ? 12 : 20;
    return Fi2(e9[t4] << 24 | e9[t4 + 1] << 16 | e9[t4 + 2] << 8 | e9[t4 + 3]);
  }, pi2 = function(e9) {
    var t4 = ji2(e9, ["moov", "trak"]), i7 = [];
    return t4.forEach(function(e10) {
      var t5, s7, n6 = {}, r5 = ji2(e10, ["tkhd"])[0];
      r5 && (s7 = (t5 = new DataView(r5.buffer, r5.byteOffset, r5.byteLength)).getUint8(0), n6.id = 0 === s7 ? t5.getUint32(12) : t5.getUint32(20));
      var a7 = ji2(e10, ["mdia", "hdlr"])[0];
      if (a7) {
        var o5 = $i2(a7.subarray(8, 12));
        n6.type = "vide" === o5 ? "video" : "soun" === o5 ? "audio" : o5;
      }
      var l8 = ji2(e10, ["mdia", "minf", "stbl", "stsd"])[0];
      if (l8) {
        var h3 = l8.subarray(8);
        n6.codec = $i2(h3.subarray(4, 8));
        var u6, d3 = ji2(h3, [n6.codec])[0];
        d3 && (/^[asm]vc[1-9]$/i.test(n6.codec) ? (u6 = d3.subarray(78), "avcC" === $i2(u6.subarray(4, 8)) && u6.length > 11 ? (n6.codec += ".", n6.codec += qi2(u6[9]), n6.codec += qi2(u6[10]), n6.codec += qi2(u6[11])) : n6.codec = "avc1.4d400d") : /^mp4[a,v]$/i.test(n6.codec) ? (u6 = d3.subarray(28), "esds" === $i2(u6.subarray(4, 8)) && u6.length > 20 && 0 !== u6[19] ? (n6.codec += "." + qi2(u6[19]), n6.codec += "." + qi2(u6[20] >>> 2 & 63).replace(/^0/, "")) : n6.codec = "mp4a.40.2") : n6.codec = n6.codec.toLowerCase());
      }
      var c7 = ji2(e10, ["mdia", "mdhd"])[0];
      c7 && (n6.timescale = mi2(c7)), i7.push(n6);
    }), i7;
  }, gi2 = function(e9, t4 = 0) {
    return ji2(e9, ["emsg"]).map((e10) => {
      var i7 = Hi2.parseEmsgBox(new Uint8Array(e10)), s7 = Ki2(i7.message_data);
      return { cueTime: Hi2.scaleTime(i7.presentation_time, i7.timescale, i7.presentation_time_delta, t4), duration: Hi2.scaleTime(i7.event_duration, i7.timescale), frames: s7 };
    });
  };
  var Yi2 = { findBox: ji2, parseType: $i2, timescale: hi2, startTime: ui2, compositionStartTime: di2, videoTrackIds: ci2, tracks: pi2, getTimescaleFromMediaHeader: mi2, getEmsgID3: gi2 };
  const { parseTrun: Qi2 } = Di2, { findBox: Ji2 } = Yi2;
  var Zi2 = Bi2, es2 = function(e9) {
    var t4 = Ji2(e9, ["moof", "traf"]), i7 = Ji2(e9, ["mdat"]), s7 = [];
    return i7.forEach(function(e10, i8) {
      var n6 = t4[i8];
      s7.push({ mdat: e10, traf: n6 });
    }), s7;
  }, ts2 = function(e9, t4, i7) {
    var s7 = t4, n6 = i7.defaultSampleDuration || 0, r5 = i7.defaultSampleSize || 0, a7 = i7.trackId, o5 = [];
    return e9.forEach(function(e10) {
      var t5 = Qi2(e10).samples;
      t5.forEach(function(e11) {
        void 0 === e11.duration && (e11.duration = n6), void 0 === e11.size && (e11.size = r5), e11.trackId = a7, e11.dts = s7, void 0 === e11.compositionTimeOffset && (e11.compositionTimeOffset = 0), "bigint" == typeof s7 ? (e11.pts = s7 + Zi2.BigInt(e11.compositionTimeOffset), s7 += Zi2.BigInt(e11.duration)) : (e11.pts = s7 + e11.compositionTimeOffset, s7 += e11.duration);
      }), o5 = o5.concat(t5);
    }), o5;
  }, is2 = { getMdatTrafPairs: es2, parseSamples: ts2 }, ss2 = Se2.discardEmulationPreventionBytes, ns2 = Be2.CaptionStream, rs2 = Si2, as2 = Ci2, os2 = ki2, { getMdatTrafPairs: ls2, parseSamples: hs2 } = is2, us2 = function(e9, t4) {
    for (var i7 = e9, s7 = 0; s7 < t4.length; s7++) {
      var n6 = t4[s7];
      if (i7 < n6.size) return n6;
      i7 -= n6.size;
    }
    return null;
  }, ds2 = function(e9, t4, i7) {
    var s7, n6, r5, a7, o5 = new DataView(e9.buffer, e9.byteOffset, e9.byteLength), l8 = { logs: [], seiNals: [] };
    for (n6 = 0; n6 + 4 < e9.length; n6 += r5) if (r5 = o5.getUint32(n6), n6 += 4, !(r5 <= 0)) switch (31 & e9[n6]) {
      case 6:
        var h3 = e9.subarray(n6 + 1, n6 + 1 + r5), u6 = us2(n6, t4);
        if (s7 = { nalUnitType: "sei_rbsp", size: r5, data: h3, escapedRBSP: ss2(h3), trackId: i7 }, u6) s7.pts = u6.pts, s7.dts = u6.dts, a7 = u6;
        else {
          if (!a7) {
            l8.logs.push({ level: "warn", message: "We've encountered a nal unit without data at " + n6 + " for trackId " + i7 + ". See mux.js#223." });
            break;
          }
          s7.pts = a7.pts, s7.dts = a7.dts;
        }
        l8.seiNals.push(s7);
    }
    return l8;
  }, cs2 = function(e9, t4) {
    var i7 = {};
    return ls2(e9).forEach(function(e10) {
      var s7, n6, r5 = e10.mdat, a7 = e10.traf, o5 = rs2(a7, ["tfhd"]), l8 = os2(o5[0]), h3 = l8.trackId, u6 = rs2(a7, ["tfdt"]), d3 = u6.length > 0 ? as2(u6[0]).baseMediaDecodeTime : 0, c7 = rs2(a7, ["trun"]);
      t4 === h3 && c7.length > 0 && (s7 = hs2(c7, d3, l8), n6 = ds2(r5, s7, h3), i7[h3] || (i7[h3] = { seiNals: [], logs: [] }), i7[h3].seiNals = i7[h3].seiNals.concat(n6.seiNals), i7[h3].logs = i7[h3].logs.concat(n6.logs));
    }), i7;
  }, ps2 = function(e9, t4, i7) {
    if (null === t4) return null;
    var s7 = cs2(e9, t4)[t4] || {};
    return { seiNals: s7.seiNals, logs: s7.logs, timescale: i7 };
  }, ms2 = function() {
    var e9, t4, i7, s7, n6, r5, a7 = false;
    this.isInitialized = function() {
      return a7;
    }, this.init = function(t5) {
      e9 = new ns2(), a7 = true, r5 = !!t5 && t5.isPartial, e9.on("data", function(e10) {
        e10.startTime = e10.startPts / s7, e10.endTime = e10.endPts / s7, n6.captions.push(e10), n6.captionStreams[e10.stream] = true;
      }), e9.on("log", function(e10) {
        n6.logs.push(e10);
      });
    }, this.isNewInit = function(e10, t5) {
      return !(e10 && 0 === e10.length || t5 && "object" == typeof t5 && 0 === Object.keys(t5).length) && (i7 !== e10[0] || s7 !== t5[i7]);
    }, this.parse = function(e10, r6, a8) {
      var o5;
      if (!this.isInitialized()) return null;
      if (!r6 || !a8) return null;
      if (this.isNewInit(r6, a8)) i7 = r6[0], s7 = a8[i7];
      else if (null === i7 || !s7) return t4.push(e10), null;
      for (; t4.length > 0; ) {
        var l8 = t4.shift();
        this.parse(l8, r6, a8);
      }
      return (o5 = ps2(e10, i7, s7)) && o5.logs && (n6.logs = n6.logs.concat(o5.logs)), null !== o5 && o5.seiNals ? (this.pushNals(o5.seiNals), this.flushStream(), n6) : n6.logs.length ? { logs: n6.logs, captions: [], captionStreams: [] } : null;
    }, this.pushNals = function(t5) {
      if (!this.isInitialized() || !t5 || 0 === t5.length) return null;
      t5.forEach(function(t6) {
        e9.push(t6);
      });
    }, this.flushStream = function() {
      if (!this.isInitialized()) return null;
      r5 ? e9.partialFlush() : e9.flush();
    }, this.clearParsedCaptions = function() {
      n6.captions = [], n6.captionStreams = {}, n6.logs = [];
    }, this.resetCaptionStream = function() {
      if (!this.isInitialized()) return null;
      e9.reset();
    }, this.clearAllCaptions = function() {
      this.clearParsedCaptions(), this.resetCaptionStream();
    }, this.reset = function() {
      t4 = [], i7 = null, s7 = null, n6 ? this.clearParsedCaptions() : n6 = { captions: [], captionStreams: {}, logs: [] }, this.resetCaptionStream();
    }, this.reset();
  }, gs2 = ms2;
  const { parseTfdt: fs2 } = Di2, ys2 = Si2, { getTimescaleFromMediaHeader: _s3 } = Yi2, { parseSamples: vs2, getMdatTrafPairs: bs2 } = is2, Ts2 = function() {
    let e9 = 9e4;
    this.init = function(t4) {
      const i7 = ys2(t4, ["moov", "trak", "mdia", "mdhd"])[0];
      i7 && (e9 = _s3(i7));
    }, this.parseSegment = function(t4) {
      const i7 = [], s7 = bs2(t4);
      let n6 = 0;
      return s7.forEach(function(t5) {
        const s8 = t5.mdat, r5 = t5.traf, a7 = ys2(r5, ["tfdt"])[0], o5 = ys2(r5, ["tfhd"])[0], l8 = ys2(r5, ["trun"]);
        if (a7) {
          const e10 = fs2(a7);
          n6 = e10.baseMediaDecodeTime;
        }
        if (l8.length && o5) {
          const t6 = vs2(l8, n6, o5);
          let r6 = 0;
          t6.forEach(function(t7) {
            const n7 = new TextDecoder("utf-8"), a8 = s8.slice(r6, r6 + t7.size);
            if (ys2(a8, ["vtte"])[0]) return void (r6 += t7.size);
            ys2(a8, ["vttc"]).forEach(function(s9) {
              const r7 = ys2(s9, ["payl"])[0], a9 = ys2(s9, ["sttg"])[0], o6 = t7.pts / e9, l9 = (t7.pts + t7.duration) / e9;
              let h3, u6;
              if (r7) try {
                h3 = n7.decode(r7);
              } catch (d3) {
                console.error(d3);
              }
              if (a9) try {
                u6 = n7.decode(a9);
              } catch (d3) {
                console.error(d3);
              }
              t7.duration && h3 && i7.push({ cueText: h3, start: o6, end: l9, settings: u6 });
            }), r6 += t7.size;
          });
        }
      }), i7;
    };
  };
  var Ss2 = Ts2, Es2 = Fe2, ws2 = function(e9) {
    var t4 = 31 & e9[1];
    return t4 <<= 8, t4 |= e9[2];
  }, Cs2 = function(e9) {
    return !!(64 & e9[1]);
  }, ks2 = function(e9) {
    var t4 = 0;
    return (48 & e9[3]) >>> 4 > 1 && (t4 += e9[4] + 1), t4;
  }, Is2 = function(e9) {
    if (!Cs2(e9)) return null;
    var t4 = 4 + ks2(e9);
    if (t4 >= e9.byteLength) return null;
    var i7, s7 = null;
    return 192 & (i7 = e9[t4 + 7]) && ((s7 = {}).pts = (14 & e9[t4 + 9]) << 27 | (255 & e9[t4 + 10]) << 20 | (254 & e9[t4 + 11]) << 12 | (255 & e9[t4 + 12]) << 5 | (254 & e9[t4 + 13]) >>> 3, s7.pts *= 4, s7.pts += (6 & e9[t4 + 13]) >>> 1, s7.dts = s7.pts, 64 & i7 && (s7.dts = (14 & e9[t4 + 14]) << 27 | (255 & e9[t4 + 15]) << 20 | (254 & e9[t4 + 16]) << 12 | (255 & e9[t4 + 17]) << 5 | (254 & e9[t4 + 18]) >>> 3, s7.dts *= 4, s7.dts += (6 & e9[t4 + 18]) >>> 1)), s7;
  }, xs2 = function(e9) {
    switch (e9) {
      case 5:
        return "slice_layer_without_partitioning_rbsp_idr";
      case 6:
        return "sei_rbsp";
      case 7:
        return "seq_parameter_set_rbsp";
      case 8:
        return "pic_parameter_set_rbsp";
      case 9:
        return "access_unit_delimiter_rbsp";
      default:
        return null;
    }
  }, As2 = { parseType: function(e9, t4) {
    var i7 = ws2(e9);
    return 0 === i7 ? "pat" : i7 === t4 ? "pmt" : t4 ? "pes" : null;
  }, parsePat: function(e9) {
    var t4 = Cs2(e9), i7 = 4 + ks2(e9);
    return t4 && (i7 += e9[i7] + 1), (31 & e9[i7 + 10]) << 8 | e9[i7 + 11];
  }, parsePmt: function(e9) {
    var t4 = {}, i7 = Cs2(e9), s7 = 4 + ks2(e9);
    if (i7 && (s7 += e9[s7] + 1), 1 & e9[s7 + 5]) {
      var n6;
      n6 = 3 + ((15 & e9[s7 + 1]) << 8 | e9[s7 + 2]) - 4;
      for (var r5 = 12 + ((15 & e9[s7 + 10]) << 8 | e9[s7 + 11]); r5 < n6; ) {
        var a7 = s7 + r5;
        t4[(31 & e9[a7 + 1]) << 8 | e9[a7 + 2]] = e9[a7], r5 += 5 + ((15 & e9[a7 + 3]) << 8 | e9[a7 + 4]);
      }
      return t4;
    }
  }, parsePayloadUnitStartIndicator: Cs2, parsePesType: function(e9, t4) {
    switch (t4[ws2(e9)]) {
      case Es2.H264_STREAM_TYPE:
        return "video";
      case Es2.ADTS_STREAM_TYPE:
        return "audio";
      case Es2.METADATA_STREAM_TYPE:
        return "timed-metadata";
      default:
        return null;
    }
  }, parsePesTime: Is2, videoPacketContainsKeyFrame: function(e9) {
    for (var t4 = 4 + ks2(e9), i7 = e9.subarray(t4), s7 = 0, n6 = 0, r5 = false; n6 < i7.byteLength - 3; n6++) if (1 === i7[n6 + 2]) {
      s7 = n6 + 5;
      break;
    }
    for (; s7 < i7.byteLength; ) switch (i7[s7]) {
      case 0:
        if (0 !== i7[s7 - 1]) {
          s7 += 2;
          break;
        }
        if (0 !== i7[s7 - 2]) {
          s7++;
          break;
        }
        n6 + 3 !== s7 - 2 && "slice_layer_without_partitioning_rbsp_idr" === xs2(31 & i7[n6 + 3]) && (r5 = true);
        do {
          s7++;
        } while (1 !== i7[s7] && s7 < i7.length);
        n6 = s7 - 2, s7 += 3;
        break;
      case 1:
        if (0 !== i7[s7 - 1] || 0 !== i7[s7 - 2]) {
          s7 += 3;
          break;
        }
        "slice_layer_without_partitioning_rbsp_idr" === xs2(31 & i7[n6 + 3]) && (r5 = true), n6 = s7 - 2, s7 += 3;
        break;
      default:
        s7 += 3;
    }
    return i7 = i7.subarray(n6), s7 -= n6, n6 = 0, i7 && i7.byteLength > 3 && "slice_layer_without_partitioning_rbsp_idr" === xs2(31 & i7[n6 + 3]) && (r5 = true), r5;
  } }, Ds2 = Fe2, Ps2 = Ge2.handleRollover, Ls2 = {};
  Ls2.ts = As2, Ls2.aac = Mt2;
  var Os2 = ce2.ONE_SECOND_IN_TS, Ns2 = 188, Rs2 = 71, Ms2 = function(e9, t4) {
    for (var i7, s7 = 0, n6 = Ns2; n6 < e9.byteLength; ) if (e9[s7] !== Rs2 || e9[n6] !== Rs2) s7++, n6++;
    else {
      switch (i7 = e9.subarray(s7, n6), Ls2.ts.parseType(i7, t4.pid)) {
        case "pat":
          t4.pid = Ls2.ts.parsePat(i7);
          break;
        case "pmt":
          var r5 = Ls2.ts.parsePmt(i7);
          t4.table = t4.table || {}, Object.keys(r5).forEach(function(e10) {
            t4.table[e10] = r5[e10];
          });
      }
      s7 += Ns2, n6 += Ns2;
    }
  }, Us2 = function(e9, t4, i7) {
    for (var s7, n6, r5, a7, o5 = 0, l8 = Ns2, h3 = false; l8 <= e9.byteLength; ) if (e9[o5] !== Rs2 || e9[l8] !== Rs2 && l8 !== e9.byteLength) o5++, l8++;
    else {
      if (s7 = e9.subarray(o5, l8), "pes" === Ls2.ts.parseType(s7, t4.pid)) n6 = Ls2.ts.parsePesType(s7, t4.table), r5 = Ls2.ts.parsePayloadUnitStartIndicator(s7), "audio" === n6 && r5 && (a7 = Ls2.ts.parsePesTime(s7)) && (a7.type = "audio", i7.audio.push(a7), h3 = true);
      if (h3) break;
      o5 += Ns2, l8 += Ns2;
    }
    for (o5 = (l8 = e9.byteLength) - Ns2, h3 = false; o5 >= 0; ) if (e9[o5] !== Rs2 || e9[l8] !== Rs2 && l8 !== e9.byteLength) o5--, l8--;
    else {
      if (s7 = e9.subarray(o5, l8), "pes" === Ls2.ts.parseType(s7, t4.pid)) n6 = Ls2.ts.parsePesType(s7, t4.table), r5 = Ls2.ts.parsePayloadUnitStartIndicator(s7), "audio" === n6 && r5 && (a7 = Ls2.ts.parsePesTime(s7)) && (a7.type = "audio", i7.audio.push(a7), h3 = true);
      if (h3) break;
      o5 -= Ns2, l8 -= Ns2;
    }
  }, Bs2 = function(e9, t4, i7) {
    for (var s7, n6, r5, a7, o5, l8, h3, u6 = 0, d3 = Ns2, c7 = false, p7 = { data: [], size: 0 }; d3 < e9.byteLength; ) if (e9[u6] !== Rs2 || e9[d3] !== Rs2) u6++, d3++;
    else {
      if (s7 = e9.subarray(u6, d3), "pes" === Ls2.ts.parseType(s7, t4.pid)) {
        if (n6 = Ls2.ts.parsePesType(s7, t4.table), r5 = Ls2.ts.parsePayloadUnitStartIndicator(s7), "video" === n6 && (r5 && !c7 && (a7 = Ls2.ts.parsePesTime(s7)) && (a7.type = "video", i7.video.push(a7), c7 = true), !i7.firstKeyFrame)) {
          if (r5 && 0 !== p7.size) {
            for (o5 = new Uint8Array(p7.size), l8 = 0; p7.data.length; ) h3 = p7.data.shift(), o5.set(h3, l8), l8 += h3.byteLength;
            if (Ls2.ts.videoPacketContainsKeyFrame(o5)) {
              var m8 = Ls2.ts.parsePesTime(o5);
              m8 ? (i7.firstKeyFrame = m8, i7.firstKeyFrame.type = "video") : console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.");
            }
            p7.size = 0;
          }
          p7.data.push(s7), p7.size += s7.byteLength;
        }
      }
      if (c7 && i7.firstKeyFrame) break;
      u6 += Ns2, d3 += Ns2;
    }
    for (u6 = (d3 = e9.byteLength) - Ns2, c7 = false; u6 >= 0; ) if (e9[u6] !== Rs2 || e9[d3] !== Rs2) u6--, d3--;
    else {
      if (s7 = e9.subarray(u6, d3), "pes" === Ls2.ts.parseType(s7, t4.pid)) n6 = Ls2.ts.parsePesType(s7, t4.table), r5 = Ls2.ts.parsePayloadUnitStartIndicator(s7), "video" === n6 && r5 && (a7 = Ls2.ts.parsePesTime(s7)) && (a7.type = "video", i7.video.push(a7), c7 = true);
      if (c7) break;
      u6 -= Ns2, d3 -= Ns2;
    }
  }, Fs2 = function(e9, t4) {
    if (e9.audio && e9.audio.length) {
      var i7 = t4;
      (void 0 === i7 || isNaN(i7)) && (i7 = e9.audio[0].dts), e9.audio.forEach(function(e10) {
        e10.dts = Ps2(e10.dts, i7), e10.pts = Ps2(e10.pts, i7), e10.dtsTime = e10.dts / Os2, e10.ptsTime = e10.pts / Os2;
      });
    }
    if (e9.video && e9.video.length) {
      var s7 = t4;
      if ((void 0 === s7 || isNaN(s7)) && (s7 = e9.video[0].dts), e9.video.forEach(function(e10) {
        e10.dts = Ps2(e10.dts, s7), e10.pts = Ps2(e10.pts, s7), e10.dtsTime = e10.dts / Os2, e10.ptsTime = e10.pts / Os2;
      }), e9.firstKeyFrame) {
        var n6 = e9.firstKeyFrame;
        n6.dts = Ps2(n6.dts, s7), n6.pts = Ps2(n6.pts, s7), n6.dtsTime = n6.dts / Os2, n6.ptsTime = n6.pts / Os2;
      }
    }
  }, qs2 = function(e9) {
    for (var t4, i7 = false, s7 = 0, n6 = null, r5 = null, a7 = 0, o5 = 0; e9.length - o5 >= 3; ) {
      switch (Ls2.aac.parseType(e9, o5)) {
        case "timed-metadata":
          if (e9.length - o5 < 10) {
            i7 = true;
            break;
          }
          if ((a7 = Ls2.aac.parseId3TagSize(e9, o5)) > e9.length) {
            i7 = true;
            break;
          }
          null === r5 && (t4 = e9.subarray(o5, o5 + a7), r5 = Ls2.aac.parseAacTimestamp(t4)), o5 += a7;
          break;
        case "audio":
          if (e9.length - o5 < 7) {
            i7 = true;
            break;
          }
          if ((a7 = Ls2.aac.parseAdtsSize(e9, o5)) > e9.length) {
            i7 = true;
            break;
          }
          null === n6 && (t4 = e9.subarray(o5, o5 + a7), n6 = Ls2.aac.parseSampleRate(t4)), s7++, o5 += a7;
          break;
        default:
          o5++;
      }
      if (i7) return null;
    }
    if (null === n6 || null === r5) return null;
    var l8 = Os2 / n6;
    return { audio: [{ type: "audio", dts: r5, pts: r5 }, { type: "audio", dts: r5 + 1024 * s7 * l8, pts: r5 + 1024 * s7 * l8 }] };
  }, js2 = function(e9) {
    var t4 = { pid: null, table: null }, i7 = {};
    for (var s7 in Ms2(e9, t4), t4.table) {
      if (t4.table.hasOwnProperty(s7)) switch (t4.table[s7]) {
        case Ds2.H264_STREAM_TYPE:
          i7.video = [], Bs2(e9, t4, i7), 0 === i7.video.length && delete i7.video;
          break;
        case Ds2.ADTS_STREAM_TYPE:
          i7.audio = [], Us2(e9, t4, i7), 0 === i7.audio.length && delete i7.audio;
      }
    }
    return i7;
  }, $s2 = { inspect: function(e9, t4) {
    var i7;
    return (i7 = Ls2.aac.isLikelyAacData(e9) ? qs2(e9) : js2(e9)) && (i7.audio || i7.video) ? (Fs2(i7, t4), i7) : null;
  }, parseAudioPes_: Us2 };
  const Hs2 = function(e9, t4) {
    t4.on("data", function(t5) {
      const i7 = t5.initSegment;
      t5.initSegment = { data: i7.buffer, byteOffset: i7.byteOffset, byteLength: i7.byteLength };
      const s7 = t5.data;
      t5.data = s7.buffer, e9.postMessage({ action: "data", segment: t5, byteOffset: s7.byteOffset, byteLength: s7.byteLength }, [t5.data]);
    }), t4.on("done", function(t5) {
      e9.postMessage({ action: "done" });
    }), t4.on("gopInfo", function(t5) {
      e9.postMessage({ action: "gopInfo", gopInfo: t5 });
    }), t4.on("videoSegmentTimingInfo", function(t5) {
      const i7 = { start: { decode: ce2.videoTsToSeconds(t5.start.dts), presentation: ce2.videoTsToSeconds(t5.start.pts) }, end: { decode: ce2.videoTsToSeconds(t5.end.dts), presentation: ce2.videoTsToSeconds(t5.end.pts) }, baseMediaDecodeTime: ce2.videoTsToSeconds(t5.baseMediaDecodeTime) };
      t5.prependedContentDuration && (i7.prependedContentDuration = ce2.videoTsToSeconds(t5.prependedContentDuration)), e9.postMessage({ action: "videoSegmentTimingInfo", videoSegmentTimingInfo: i7 });
    }), t4.on("audioSegmentTimingInfo", function(t5) {
      const i7 = { start: { decode: ce2.videoTsToSeconds(t5.start.dts), presentation: ce2.videoTsToSeconds(t5.start.pts) }, end: { decode: ce2.videoTsToSeconds(t5.end.dts), presentation: ce2.videoTsToSeconds(t5.end.pts) }, baseMediaDecodeTime: ce2.videoTsToSeconds(t5.baseMediaDecodeTime) };
      t5.prependedContentDuration && (i7.prependedContentDuration = ce2.videoTsToSeconds(t5.prependedContentDuration)), e9.postMessage({ action: "audioSegmentTimingInfo", audioSegmentTimingInfo: i7 });
    }), t4.on("id3Frame", function(t5) {
      e9.postMessage({ action: "id3Frame", id3Frame: t5 });
    }), t4.on("caption", function(t5) {
      e9.postMessage({ action: "caption", caption: t5 });
    }), t4.on("trackinfo", function(t5) {
      e9.postMessage({ action: "trackinfo", trackInfo: t5 });
    }), t4.on("audioTimingInfo", function(t5) {
      e9.postMessage({ action: "audioTimingInfo", audioTimingInfo: { start: ce2.videoTsToSeconds(t5.start), end: ce2.videoTsToSeconds(t5.end) } });
    }), t4.on("videoTimingInfo", function(t5) {
      e9.postMessage({ action: "videoTimingInfo", videoTimingInfo: { start: ce2.videoTsToSeconds(t5.start), end: ce2.videoTsToSeconds(t5.end) } });
    }), t4.on("log", function(t5) {
      e9.postMessage({ action: "log", log: t5 });
    });
  };
  class Vs2 {
    constructor(e9, t4) {
      this.options = t4 || {}, this.self = e9, this.init();
    }
    init() {
      this.transmuxer && this.transmuxer.dispose(), this.transmuxer = new fi2.Transmuxer(this.options), Hs2(this.self, this.transmuxer);
    }
    pushMp4Captions(e9) {
      this.captionParser || (this.captionParser = new gs2(), this.captionParser.init());
      const t4 = new Uint8Array(e9.data, e9.byteOffset, e9.byteLength), i7 = this.captionParser.parse(t4, e9.trackIds, e9.timescales);
      this.self.postMessage({ action: "mp4Captions", captions: i7 && i7.captions || [], logs: i7 && i7.logs || [], data: t4.buffer }, [t4.buffer]);
    }
    initMp4WebVttParser(e9) {
      this.webVttParser || (this.webVttParser = new Ss2());
      const t4 = new Uint8Array(e9.data, e9.byteOffset, e9.byteLength);
      this.webVttParser.init(t4);
    }
    getMp4WebVttText(e9) {
      this.webVttParser || (this.webVttParser = new Ss2());
      const t4 = new Uint8Array(e9.data, e9.byteOffset, e9.byteLength), i7 = this.webVttParser.parseSegment(t4);
      this.self.postMessage({ action: "getMp4WebVttText", mp4VttCues: i7 || [], data: t4.buffer }, [t4.buffer]);
    }
    probeMp4StartTime({ timescales: e9, data: t4 }) {
      const i7 = Yi2.startTime(e9, t4);
      this.self.postMessage({ action: "probeMp4StartTime", startTime: i7, data: t4 }, [t4.buffer]);
    }
    probeMp4Tracks({ data: e9 }) {
      const t4 = Yi2.tracks(e9);
      this.self.postMessage({ action: "probeMp4Tracks", tracks: t4, data: e9 }, [e9.buffer]);
    }
    probeEmsgID3({ data: e9, offset: t4 }) {
      const i7 = Yi2.getEmsgID3(e9, t4);
      this.self.postMessage({ action: "probeEmsgID3", id3Frames: i7, emsgData: e9 }, [e9.buffer]);
    }
    probeTs({ data: e9, baseStartTime: t4 }) {
      const i7 = "number" != typeof t4 || isNaN(t4) ? void 0 : t4 * ce2.ONE_SECOND_IN_TS, s7 = $s2.inspect(e9, i7);
      let n6 = null;
      s7 && (n6 = { hasVideo: s7.video && 2 === s7.video.length || false, hasAudio: s7.audio && 2 === s7.audio.length || false }, n6.hasVideo && (n6.videoStart = s7.video[0].ptsTime), n6.hasAudio && (n6.audioStart = s7.audio[0].ptsTime)), this.self.postMessage({ action: "probeTs", result: n6, data: e9 }, [e9.buffer]);
    }
    clearAllMp4Captions() {
      this.captionParser && this.captionParser.clearAllCaptions();
    }
    clearParsedMp4Captions() {
      this.captionParser && this.captionParser.clearParsedCaptions();
    }
    push(e9) {
      const t4 = new Uint8Array(e9.data, e9.byteOffset, e9.byteLength);
      this.transmuxer.push(t4);
    }
    reset() {
      this.transmuxer.reset();
    }
    setTimestampOffset(e9) {
      const t4 = e9.timestampOffset || 0;
      this.transmuxer.setBaseMediaDecodeTime(Math.round(ce2.secondsToVideoTs(t4)));
    }
    setAudioAppendStart(e9) {
      this.transmuxer.setAudioAppendStart(Math.ceil(ce2.secondsToVideoTs(e9.appendStart)));
    }
    setRemux(e9) {
      this.transmuxer.setRemux(e9.remux);
    }
    flush(e9) {
      this.transmuxer.flush(), self.postMessage({ action: "done", type: "transmuxed" });
    }
    endTimeline() {
      this.transmuxer.endTimeline(), self.postMessage({ action: "endedtimeline", type: "transmuxed" });
    }
    alignGopsWith(e9) {
      this.transmuxer.alignGopsWith(e9.gopsToAlignWith.slice());
    }
  }
  self.onmessage = function(e9) {
    "init" === e9.data.action && e9.data.options ? this.messageHandlers = new Vs2(self, e9.data.options) : (this.messageHandlers || (this.messageHandlers = new Vs2(self)), e9.data && e9.data.action && "init" !== e9.data.action && this.messageHandlers[e9.data.action] && this.messageHandlers[e9.data.action](e9.data));
  };
}));
var Cc = Tc(wc);
var kc = (e8, t3, i6) => {
  const { type: s6, initSegment: n5, captions: r4, captionStreams: a6, metadata: o4, videoFrameDtsTime: l7, videoFramePtsTime: h2 } = e8.data.segment;
  t3.buffer.push({ captions: r4, captionStreams: a6, metadata: o4 });
  const u5 = e8.data.segment.boxes || { data: e8.data.segment.data }, d2 = { type: s6, data: new Uint8Array(u5.data, u5.data.byteOffset, u5.data.byteLength), initSegment: new Uint8Array(n5.data, n5.byteOffset, n5.byteLength) };
  void 0 !== l7 && (d2.videoFrameDtsTime = l7), void 0 !== h2 && (d2.videoFramePtsTime = h2), i6(d2);
};
var Ic = ({ transmuxedData: e8, callback: t3 }) => {
  e8.buffer = [], t3(e8);
};
var xc = (e8, t3) => {
  t3.gopInfo = e8.data.gopInfo;
};
var Ac = (e8) => {
  const { transmuxer: t3, bytes: i6, audioAppendStart: s6, gopsToAlignWith: n5, remux: r4, onData: a6, onTrackInfo: o4, onAudioTimingInfo: l7, onVideoTimingInfo: h2, onVideoSegmentTimingInfo: u5, onAudioSegmentTimingInfo: d2, onId3: c6, onCaptions: p6, onDone: m7, onEndedTimeline: g2, onTransmuxerLog: f4, isEndOfTimeline: y3, segment: _3, triggerSegmentEventFn: v3 } = e8, b5 = { buffer: [] };
  let T2 = y3;
  const S3 = (i7) => {
    t3.currentTransmux === e8 && ("data" === i7.data.action && kc(i7, b5, a6), "trackinfo" === i7.data.action && o4(i7.data.trackInfo), "gopInfo" === i7.data.action && xc(i7, b5), "audioTimingInfo" === i7.data.action && l7(i7.data.audioTimingInfo), "videoTimingInfo" === i7.data.action && h2(i7.data.videoTimingInfo), "videoSegmentTimingInfo" === i7.data.action && u5(i7.data.videoSegmentTimingInfo), "audioSegmentTimingInfo" === i7.data.action && d2(i7.data.audioSegmentTimingInfo), "id3Frame" === i7.data.action && c6([i7.data.id3Frame], i7.data.id3Frame.dispatchType), "caption" === i7.data.action && p6(i7.data.caption), "endedtimeline" === i7.data.action && (T2 = false, g2()), "log" === i7.data.action && f4(i7.data.log), "transmuxed" === i7.data.type && (T2 || (t3.onmessage = null, Ic({ transmuxedData: b5, callback: m7 }), Dc(t3))));
  }, E3 = () => {
    const e9 = { message: "Received an error message from the transmuxer worker", metadata: { errorType: du.Error.StreamingFailedToTransmuxSegment, segmentInfo: Wp({ segment: _3 }) } };
    m7(null, e9);
  };
  if (t3.onmessage = S3, t3.onerror = E3, s6 && t3.postMessage({ action: "setAudioAppendStart", appendStart: s6 }), Array.isArray(n5) && t3.postMessage({ action: "alignGopsWith", gopsToAlignWith: n5 }), void 0 !== r4 && t3.postMessage({ action: "setRemux", remux: r4 }), i6.byteLength) {
    const e9 = i6 instanceof ArrayBuffer ? i6 : i6.buffer, s7 = i6 instanceof ArrayBuffer ? 0 : i6.byteOffset;
    v3({ type: "segmenttransmuxingstart", segment: _3 }), t3.postMessage({ action: "push", data: e9, byteOffset: s7, byteLength: i6.byteLength }, [e9]);
  }
  y3 && t3.postMessage({ action: "endTimeline" }), t3.postMessage({ action: "flush" });
};
var Dc = (e8) => {
  e8.currentTransmux = null, e8.transmuxQueue.length && (e8.currentTransmux = e8.transmuxQueue.shift(), "function" == typeof e8.currentTransmux ? e8.currentTransmux() : Ac(e8.currentTransmux));
};
var Pc = (e8, t3) => {
  e8.postMessage({ action: t3 }), Dc(e8);
};
var Lc = (e8, t3) => {
  if (!t3.currentTransmux) return t3.currentTransmux = e8, void Pc(t3, e8);
  t3.transmuxQueue.push(Pc.bind(null, t3, e8));
};
var Oc = (e8) => {
  if (!e8.transmuxer.currentTransmux) return e8.transmuxer.currentTransmux = e8, void Ac(e8);
  e8.transmuxer.transmuxQueue.push(e8);
};
var Nc = { reset: (e8) => {
  Lc("reset", e8);
}, endTimeline: (e8) => {
  Lc("endTimeline", e8);
}, transmux: Oc, createTransmuxer: (e8) => {
  const t3 = new Cc();
  t3.currentTransmux = null, t3.transmuxQueue = [];
  const i6 = t3.terminate;
  return t3.terminate = () => (t3.currentTransmux = null, t3.transmuxQueue.length = 0, i6.call(t3)), t3.postMessage({ action: "init", options: e8 }), t3;
} };
var Rc = function(e8) {
  const t3 = e8.transmuxer, i6 = e8.endAction || e8.action, s6 = e8.callback, n5 = Fe({}, e8, { endAction: null, transmuxer: null, callback: null }), r4 = (n6) => {
    n6.data.action === i6 && (t3.removeEventListener("message", r4), n6.data.data && (n6.data.data = new Uint8Array(n6.data.data, e8.byteOffset || 0, e8.byteLength || n6.data.data.byteLength), e8.data && (e8.data = n6.data.data)), s6(n6.data));
  };
  if (t3.addEventListener("message", r4), e8.data) {
    const i7 = e8.data instanceof ArrayBuffer;
    n5.byteOffset = i7 ? 0 : e8.data.byteOffset, n5.byteLength = e8.data.byteLength;
    const s7 = [i7 ? e8.data : e8.data.buffer];
    t3.postMessage(n5, s7);
  } else t3.postMessage(n5);
};
var Mc = { FAILURE: 2, TIMEOUT: -101, ABORTED: -102 };
var Uc = "wvtt";
var Bc = (e8) => {
  e8.forEach((e9) => {
    e9.abort();
  });
};
var Fc = (e8) => ({ bandwidth: e8.bandwidth, bytesReceived: e8.bytesReceived || 0, roundTripTime: e8.roundTripTime || 0 });
var qc = (e8) => {
  const t3 = e8.target, i6 = { bandwidth: 1 / 0, bytesReceived: 0, roundTripTime: Date.now() - t3.requestTime || 0 };
  return i6.bytesReceived = e8.loaded, i6.bandwidth = Math.floor(i6.bytesReceived / i6.roundTripTime * 8 * 1e3), i6;
};
var jc = (e8, t3) => {
  const { requestType: i6 } = t3, s6 = gd({ requestType: i6, request: t3, error: e8 });
  return t3.timedout ? { status: t3.status, message: "HLS request timed-out at URL: " + t3.uri, code: Mc.TIMEOUT, xhr: t3, metadata: s6 } : t3.aborted ? { status: t3.status, message: "HLS request aborted at URL: " + t3.uri, code: Mc.ABORTED, xhr: t3, metadata: s6 } : e8 ? { status: t3.status, message: "HLS request errored at URL: " + t3.uri, code: Mc.FAILURE, xhr: t3, metadata: s6 } : "arraybuffer" === t3.responseType && 0 === t3.response.byteLength ? { status: t3.status, message: "Empty HLS response at URL: " + t3.uri, code: Mc.FAILURE, xhr: t3, metadata: s6 } : null;
};
var $c = (e8, t3, i6, s6) => (n5, r4) => {
  const a6 = r4.response, o4 = jc(n5, r4);
  if (o4) return i6(o4, e8);
  if (16 !== a6.byteLength) return i6({ status: r4.status, message: "Invalid HLS key at URL: " + r4.uri, code: Mc.FAILURE, xhr: r4 }, e8);
  const l7 = new DataView(a6), h2 = new Uint32Array([l7.getUint32(0), l7.getUint32(4), l7.getUint32(8), l7.getUint32(12)]);
  for (let e9 = 0; e9 < t3.length; e9++) t3[e9].bytes = h2;
  const u5 = { uri: r4.uri };
  return s6({ type: "segmentkeyloadcomplete", segment: e8, keyInfo: u5 }), i6(null, e8);
};
var Hc = (e8, t3) => {
  t3 === Uc && e8.transmuxer.postMessage({ action: "initMp4WebVttParser", data: e8.map.bytes });
};
var Vc = (e8, t3, i6) => {
  t3 === Uc && Rc({ action: "getMp4WebVttText", data: e8.bytes, transmuxer: e8.transmuxer, callback: ({ data: t4, mp4VttCues: s6 }) => {
    e8.bytes = t4, i6(null, e8, { mp4VttCues: s6 });
  } });
};
var zc = (e8, t3) => {
  const i6 = Zs(e8.map.bytes);
  if ("mp4" !== i6) {
    const s6 = e8.map.resolvedUri || e8.map.uri, n5 = i6 || "unknown";
    return t3({ internal: true, message: `Found unsupported ${n5} container for initialization segment at URL: ${s6}`, code: Mc.FAILURE, metadata: { mediaType: n5 } });
  }
  Rc({ action: "probeMp4Tracks", data: e8.map.bytes, transmuxer: e8.transmuxer, callback: ({ tracks: i7, data: s6 }) => (e8.map.bytes = s6, i7.forEach(function(t4) {
    e8.map.tracks = e8.map.tracks || {}, e8.map.tracks[t4.type] || (e8.map.tracks[t4.type] = t4, "number" == typeof t4.id && t4.timescale && (e8.map.timescales = e8.map.timescales || {}, e8.map.timescales[t4.id] = t4.timescale), "text" === t4.type && Hc(e8, t4.codec));
  }), t3(null)) });
};
var Wc = ({ segment: e8, finishProcessingFn: t3, triggerSegmentEventFn: i6 }) => (s6, n5) => {
  const r4 = jc(s6, n5);
  if (r4) return t3(r4, e8);
  const a6 = new Uint8Array(n5.response);
  if (i6({ type: "segmentloaded", segment: e8 }), e8.map.key) return e8.map.encryptedBytes = a6, t3(null, e8);
  e8.map.bytes = a6, zc(e8, function(i7) {
    if (i7) return i7.xhr = n5, i7.status = n5.status, t3(i7, e8);
    t3(null, e8);
  });
};
var Gc = ({ segment: e8, finishProcessingFn: t3, responseType: i6, triggerSegmentEventFn: s6 }) => (n5, r4) => {
  const a6 = jc(n5, r4);
  if (a6) return t3(a6, e8);
  s6({ type: "segmentloaded", segment: e8 });
  const o4 = "arraybuffer" !== i6 && r4.responseText ? _c(r4.responseText.substring(e8.lastReachedChar || 0)) : r4.response;
  return e8.stats = Fc(r4), e8.key ? e8.encryptedBytes = new Uint8Array(o4) : e8.bytes = new Uint8Array(o4), t3(null, e8);
};
var Xc = ({ segment: e8, bytes: t3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 }) => {
  const m7 = e8.map && e8.map.tracks || {}, g2 = Boolean(m7.audio && m7.video);
  let f4 = s6.bind(null, e8, "audio", "start");
  const y3 = s6.bind(null, e8, "audio", "end");
  let _3 = s6.bind(null, e8, "video", "start");
  const v3 = s6.bind(null, e8, "video", "end"), b5 = () => Oc({ bytes: t3, transmuxer: e8.transmuxer, audioAppendStart: e8.audioAppendStart, gopsToAlignWith: e8.gopsToAlignWith, remux: g2, onData: (t4) => {
    t4.type = "combined" === t4.type ? "video" : t4.type, u5(e8, t4);
  }, onTrackInfo: (t4) => {
    i6 && (g2 && (t4.isMuxed = true), i6(e8, t4));
  }, onAudioTimingInfo: (e9) => {
    f4 && void 0 !== e9.start && (f4(e9.start), f4 = null), y3 && void 0 !== e9.end && y3(e9.end);
  }, onVideoTimingInfo: (e9) => {
    _3 && void 0 !== e9.start && (_3(e9.start), _3 = null), v3 && void 0 !== e9.end && v3(e9.end);
  }, onVideoSegmentTimingInfo: (t4) => {
    const i7 = { pts: { start: t4.start.presentation, end: t4.end.presentation }, dts: { start: t4.start.decode, end: t4.end.decode } };
    p6({ type: "segmenttransmuxingtiminginfoavailable", segment: e8, timingInfo: i7 }), n5(t4);
  }, onAudioSegmentTimingInfo: (t4) => {
    const i7 = { pts: { start: t4.start.pts, end: t4.end.pts }, dts: { start: t4.start.dts, end: t4.end.dts } };
    p6({ type: "segmenttransmuxingtiminginfoavailable", segment: e8, timingInfo: i7 }), r4(t4);
  }, onId3: (t4, i7) => {
    a6(e8, t4, i7);
  }, onCaptions: (t4) => {
    o4(e8, [t4]);
  }, isEndOfTimeline: l7, onEndedTimeline: () => {
    h2();
  }, onTransmuxerLog: c6, onDone: (t4, i7) => {
    d2 && (t4.type = "combined" === t4.type ? "video" : t4.type, p6({ type: "segmenttransmuxingcomplete", segment: e8 }), d2(i7, e8, t4));
  }, segment: e8, triggerSegmentEventFn: p6 });
  Rc({ action: "probeTs", transmuxer: e8.transmuxer, data: t3, baseStartTime: e8.baseStartTime, callback: (s7) => {
    e8.bytes = t3 = s7.data;
    const n6 = s7.result;
    n6 && (i6(e8, { hasAudio: n6.hasAudio, hasVideo: n6.hasVideo, isMuxed: g2 }), i6 = null), b5();
  } });
};
var Kc = ({ segment: e8, bytes: t3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 }) => {
  let m7 = new Uint8Array(t3);
  if (en(m7)) {
    e8.isFmp4 = true;
    const { tracks: n6 } = e8.map;
    if (n6.text && (!n6.audio || !n6.video)) return u5(e8, { data: m7, type: "text" }), void Vc(e8, n6.text.codec, d2);
    const r5 = { isFmp4: true, hasVideo: !!n6.video, hasAudio: !!n6.audio };
    n6.audio && n6.audio.codec && "enca" !== n6.audio.codec && (r5.audioCodec = n6.audio.codec), n6.video && n6.video.codec && "encv" !== n6.video.codec && (r5.videoCodec = n6.video.codec), n6.video && n6.audio && (r5.isMuxed = true), i6(e8, r5);
    const l8 = (t4, i7) => {
      u5(e8, { data: m7, type: r5.hasAudio && !r5.isMuxed ? "audio" : "video" }), i7 && i7.length && a6(e8, i7), t4 && t4.length && o4(e8, t4), d2(null, e8, {});
    };
    return void Rc({ action: "probeMp4StartTime", timescales: e8.map.timescales, data: m7, transmuxer: e8.transmuxer, callback: ({ data: i7, startTime: a7 }) => {
      t3 = i7.buffer, e8.bytes = m7 = i7, r5.hasAudio && !r5.isMuxed && s6(e8, "audio", "start", a7), r5.hasVideo && s6(e8, "video", "start", a7), Rc({ action: "probeEmsgID3", data: m7, transmuxer: e8.transmuxer, offset: a7, callback: ({ emsgData: i8, id3Frames: s7 }) => {
        t3 = i8.buffer, e8.bytes = m7 = i8, n6.video && i8.byteLength && e8.transmuxer ? Rc({ action: "pushMp4Captions", endAction: "mp4Captions", transmuxer: e8.transmuxer, data: m7, timescales: e8.map.timescales, trackIds: [n6.video.id], callback: (i9) => {
          t3 = i9.data.buffer, e8.bytes = m7 = i9.data, i9.logs.forEach(function(e9) {
            c6(bu(e9, { stream: "mp4CaptionParser" }));
          }), l8(i9.captions, s7);
        } }) : l8(void 0, s7);
      } });
    } });
  }
  if (e8.transmuxer) {
    if (void 0 === e8.container && (e8.container = Zs(m7)), "ts" !== e8.container && "aac" !== e8.container) return i6(e8, { hasAudio: false, hasVideo: false }), void d2(null, e8, {});
    Xc({ segment: e8, bytes: t3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 });
  } else d2(null, e8, {});
};
var Yc = function({ id: e8, key: t3, encryptedBytes: i6, decryptionWorker: s6, segment: n5, doneFn: r4 }, a6) {
  const o4 = (t4) => {
    if (t4.data.source === e8) {
      s6.removeEventListener("message", o4);
      const e9 = t4.data.decrypted;
      a6(new Uint8Array(e9.bytes, e9.byteOffset, e9.byteLength));
    }
  };
  let l7;
  s6.onerror = () => {
    const e9 = "An error occurred in the decryption worker", t4 = Wp({ segment: n5 }), i7 = { message: e9, metadata: { error: new Error(e9), errorType: du.Error.StreamingFailedToDecryptSegment, segmentInfo: t4, keyInfo: { uri: n5.key.resolvedUri || n5.map.key.resolvedUri } } };
    r4(i7, n5);
  }, s6.addEventListener("message", o4), l7 = t3.bytes.slice ? t3.bytes.slice() : new Uint32Array(Array.prototype.slice.call(t3.bytes)), s6.postMessage(Hd({ source: e8, encrypted: i6, key: l7, iv: t3.iv }), [i6.buffer, l7.buffer]);
};
var Qc = ({ decryptionWorker: e8, segment: t3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 }) => {
  p6({ type: "segmentdecryptionstart" }), Yc({ id: t3.requestId, key: t3.key, encryptedBytes: t3.encryptedBytes, decryptionWorker: e8, segment: t3, doneFn: d2 }, (e9) => {
    t3.bytes = e9, p6({ type: "segmentdecryptioncomplete", segment: t3 }), Kc({ segment: t3, bytes: t3.bytes, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 });
  });
};
var Jc = ({ activeXhrs: e8, decryptionWorker: t3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 }) => {
  let m7 = 0, g2 = false;
  return (f4, y3) => {
    if (!g2) {
      if (f4) return g2 = true, Bc(e8), d2(f4, y3);
      if (m7 += 1, m7 === e8.length) {
        const m8 = function() {
          if (y3.encryptedBytes) return Qc({ decryptionWorker: t3, segment: y3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 });
          Kc({ segment: y3, bytes: y3.bytes, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5, doneFn: d2, onTransmuxerLog: c6, triggerSegmentEventFn: p6 });
        };
        if (y3.endOfAllRequests = Date.now(), y3.map && y3.map.encryptedBytes && !y3.map.bytes) return p6({ type: "segmentdecryptionstart", segment: y3 }), Yc({ decryptionWorker: t3, id: y3.requestId + "-init", encryptedBytes: y3.map.encryptedBytes, key: y3.map.key, segment: y3, doneFn: d2 }, (t4) => {
          y3.map.bytes = t4, p6({ type: "segmentdecryptioncomplete", segment: y3 }), zc(y3, (t5) => {
            if (t5) return Bc(e8), d2(t5, y3);
            m8();
          });
        });
        m8();
      }
    }
  };
};
var Zc = ({ loadendState: e8, abortFn: t3 }) => (i6) => {
  i6.target.aborted && t3 && !e8.calledAbortFn && (t3(), e8.calledAbortFn = true);
};
var ep = ({ segment: e8, progressFn: t3, trackInfoFn: i6, timingInfoFn: s6, videoSegmentTimingInfoFn: n5, audioSegmentTimingInfoFn: r4, id3Fn: a6, captionsFn: o4, isEndOfTimeline: l7, endedTimelineFn: h2, dataFn: u5 }) => (i7) => {
  if (!i7.target.aborted) return e8.stats = bu(e8.stats, qc(i7)), !e8.stats.firstBytesReceivedAt && e8.stats.bytesReceived && (e8.stats.firstBytesReceivedAt = Date.now()), t3(i7, e8);
};
var tp = ({ xhr: e8, xhrOptions: t3, decryptionWorker: i6, segment: s6, abortFn: n5, progressFn: r4, trackInfoFn: a6, timingInfoFn: o4, videoSegmentTimingInfoFn: l7, audioSegmentTimingInfoFn: h2, id3Fn: u5, captionsFn: d2, isEndOfTimeline: c6, endedTimelineFn: p6, dataFn: m7, doneFn: g2, onTransmuxerLog: f4, triggerSegmentEventFn: y3 }) => {
  const _3 = [], v3 = Jc({ activeXhrs: _3, decryptionWorker: i6, trackInfoFn: a6, timingInfoFn: o4, videoSegmentTimingInfoFn: l7, audioSegmentTimingInfoFn: h2, id3Fn: u5, captionsFn: d2, isEndOfTimeline: c6, endedTimelineFn: p6, dataFn: m7, doneFn: g2, onTransmuxerLog: f4, triggerSegmentEventFn: y3 });
  if (s6.key && !s6.key.bytes) {
    const i7 = [s6.key];
    s6.map && !s6.map.bytes && s6.map.key && s6.map.key.resolvedUri === s6.key.resolvedUri && i7.push(s6.map.key);
    const n6 = bu(t3, { uri: s6.key.resolvedUri, responseType: "arraybuffer", requestType: "segment-key" }), r5 = $c(s6, i7, v3, y3);
    y3({ type: "segmentkeyloadstart", segment: s6, keyInfo: { uri: s6.key.resolvedUri } });
    const a7 = e8(n6, r5);
    _3.push(a7);
  }
  if (s6.map && !s6.map.bytes) {
    if (s6.map.key && (!s6.key || s6.key.resolvedUri !== s6.map.key.resolvedUri)) {
      const i8 = bu(t3, { uri: s6.map.key.resolvedUri, responseType: "arraybuffer", requestType: "segment-key" }), n7 = $c(s6, [s6.map.key], v3, y3);
      y3({ type: "segmentkeyloadstart", segment: s6, keyInfo: { uri: s6.map.key.resolvedUri } });
      const r6 = e8(i8, n7);
      _3.push(r6);
    }
    const i7 = bu(t3, { uri: s6.map.resolvedUri, responseType: "arraybuffer", headers: Fd(s6.map), requestType: "segment-media-initialization" }), n6 = Wc({ segment: s6, finishProcessingFn: v3, triggerSegmentEventFn: y3 });
    y3({ type: "segmentloadstart", segment: s6 });
    const r5 = e8(i7, n6);
    _3.push(r5);
  }
  const b5 = bu(t3, { uri: s6.part && s6.part.resolvedUri || s6.resolvedUri, responseType: "arraybuffer", headers: Fd(s6), requestType: "segment" }), T2 = Gc({ segment: s6, finishProcessingFn: v3, responseType: b5.responseType, triggerSegmentEventFn: y3 });
  y3({ type: "segmentloadstart", segment: s6 });
  const S3 = e8(b5, T2);
  S3.addEventListener("progress", ep({ segment: s6, progressFn: r4, trackInfoFn: a6, timingInfoFn: o4, videoSegmentTimingInfoFn: l7, audioSegmentTimingInfoFn: h2, id3Fn: u5, captionsFn: d2, isEndOfTimeline: c6, endedTimelineFn: p6, dataFn: m7 })), _3.push(S3);
  const E3 = {};
  return _3.forEach((e9) => {
    e9.addEventListener("loadend", Zc({ loadendState: E3, abortFn: n5 }));
  }), () => Bc(_3);
};
var ip = vu("PlaylistSelector");
var sp = function(e8) {
  if (!e8 || !e8.playlist) return;
  const t3 = e8.playlist;
  return JSON.stringify({ id: t3.id, bandwidth: e8.bandwidth, width: e8.width, height: e8.height, codecs: t3.attributes && t3.attributes.CODECS || "" });
};
var np = function(e8, t3) {
  if (!e8) return "";
  const i6 = b4.getComputedStyle(e8);
  return i6 ? i6[t3] : "";
};
var rp = function(e8, t3) {
  const i6 = e8.slice();
  e8.sort(function(e9, s6) {
    const n5 = t3(e9, s6);
    return 0 === n5 ? i6.indexOf(e9) - i6.indexOf(s6) : n5;
  });
};
var ap = function(e8, t3) {
  let i6, s6;
  return e8.attributes.BANDWIDTH && (i6 = e8.attributes.BANDWIDTH), i6 = i6 || b4.Number.MAX_VALUE, t3.attributes.BANDWIDTH && (s6 = t3.attributes.BANDWIDTH), s6 = s6 || b4.Number.MAX_VALUE, i6 - s6;
};
var op = function(e8, t3) {
  let i6, s6;
  return e8.attributes.RESOLUTION && e8.attributes.RESOLUTION.width && (i6 = e8.attributes.RESOLUTION.width), i6 = i6 || b4.Number.MAX_VALUE, t3.attributes.RESOLUTION && t3.attributes.RESOLUTION.width && (s6 = t3.attributes.RESOLUTION.width), s6 = s6 || b4.Number.MAX_VALUE, i6 === s6 && e8.attributes.BANDWIDTH && t3.attributes.BANDWIDTH ? e8.attributes.BANDWIDTH - t3.attributes.BANDWIDTH : i6 - s6;
};
var lp = function(e8) {
  const { main: t3, bandwidth: i6, playerWidth: s6, playerHeight: n5, playerObjectFit: r4, limitRenditionByPlayerDimensions: a6, playlistController: o4 } = e8;
  if (!t3) return;
  const l7 = { bandwidth: i6, width: s6, height: n5, limitRenditionByPlayerDimensions: a6 };
  let h2 = t3.playlists;
  id.isAudioOnly(t3) && (h2 = o4.getAudioTrackPlaylists_(), l7.audioOnly = true);
  let u5 = h2.map((e9) => {
    let t4;
    const i7 = e9.attributes && e9.attributes.RESOLUTION && e9.attributes.RESOLUTION.width, s7 = e9.attributes && e9.attributes.RESOLUTION && e9.attributes.RESOLUTION.height;
    return t4 = e9.attributes && e9.attributes.BANDWIDTH, t4 = t4 || b4.Number.MAX_VALUE, { bandwidth: t4, width: i7, height: s7, playlist: e9 };
  });
  rp(u5, (e9, t4) => e9.bandwidth - t4.bandwidth), u5 = u5.filter((e9) => !id.isIncompatible(e9.playlist));
  let d2 = u5.filter((e9) => id.isEnabled(e9.playlist));
  d2.length || (d2 = u5.filter((e9) => !id.isDisabled(e9.playlist)));
  const c6 = d2.filter((e9) => e9.bandwidth * yc.BANDWIDTH_VARIANCE < i6);
  let p6 = c6[c6.length - 1];
  const m7 = c6.filter((e9) => e9.bandwidth === p6.bandwidth)[0];
  if (false === a6) {
    const e9 = m7 || d2[0] || u5[0];
    if (e9 && e9.playlist) {
      let t4 = "sortedPlaylistReps";
      return m7 && (t4 = "bandwidthBestRep"), d2[0] && (t4 = "enabledPlaylistReps"), ip(`choosing ${sp(e9)} using ${t4} with options`, l7), e9.playlist;
    }
    return ip("could not choose a playlist with options", l7), null;
  }
  const g2 = c6.filter((e9) => e9.width && e9.height);
  rp(g2, (e9, t4) => e9.width - t4.width);
  const f4 = g2.filter((e9) => e9.width === s6 && e9.height === n5);
  p6 = f4[f4.length - 1];
  const y3 = f4.filter((e9) => e9.bandwidth === p6.bandwidth)[0];
  let _3, v3, T2, S3;
  if (y3 || (_3 = g2.filter((e9) => "cover" === r4 ? e9.width > s6 && e9.height > n5 : e9.width > s6 || e9.height > n5), v3 = _3.filter((e9) => e9.width === _3[0].width && e9.height === _3[0].height), p6 = v3[v3.length - 1], T2 = v3.filter((e9) => e9.bandwidth === p6.bandwidth)[0]), o4.leastPixelDiffSelector) {
    const e9 = g2.map((e10) => (e10.pixelDiff = Math.abs(e10.width - s6) + Math.abs(e10.height - n5), e10));
    rp(e9, (e10, t4) => e10.pixelDiff === t4.pixelDiff ? t4.bandwidth - e10.bandwidth : e10.pixelDiff - t4.pixelDiff), S3 = e9[0];
  }
  const E3 = S3 || T2 || y3 || m7 || d2[0] || u5[0];
  if (E3 && E3.playlist) {
    let e9 = "sortedPlaylistReps";
    return S3 ? e9 = "leastPixelDiffRep" : T2 ? e9 = "resolutionPlusOneRep" : y3 ? e9 = "resolutionBestRep" : m7 ? e9 = "bandwidthBestRep" : d2[0] && (e9 = "enabledPlaylistReps"), ip(`choosing ${sp(E3)} using ${e9} with options`, l7), E3.playlist;
  }
  return ip("could not choose a playlist with options", l7), null;
};
var hp = function() {
  let e8 = this.useDevicePixelRatio && b4.devicePixelRatio || 1;
  return isNaN(this.customPixelRatio) || (e8 = this.customPixelRatio), lp({ main: this.playlists.main, bandwidth: this.systemBandwidth, playerWidth: parseInt(np(this.tech_.el(), "width"), 10) * e8, playerHeight: parseInt(np(this.tech_.el(), "height"), 10) * e8, playerObjectFit: this.usePlayerObjectFit ? np(this.tech_.el(), "objectFit") : "", limitRenditionByPlayerDimensions: this.limitRenditionByPlayerDimensions, playlistController: this.playlistController_ });
};
var up = function(e8) {
  let t3 = -1, i6 = -1;
  if (e8 < 0 || e8 > 1) throw new Error("Moving average bandwidth decay must be between 0 and 1.");
  return function() {
    let s6 = this.useDevicePixelRatio && b4.devicePixelRatio || 1;
    return isNaN(this.customPixelRatio) || (s6 = this.customPixelRatio), t3 < 0 && (t3 = this.systemBandwidth, i6 = this.systemBandwidth), this.systemBandwidth > 0 && this.systemBandwidth !== i6 && (t3 = e8 * this.systemBandwidth + (1 - e8) * t3, i6 = this.systemBandwidth), lp({ main: this.playlists.main, bandwidth: t3, playerWidth: parseInt(np(this.tech_.el(), "width"), 10) * s6, playerHeight: parseInt(np(this.tech_.el(), "height"), 10) * s6, playerObjectFit: this.usePlayerObjectFit ? np(this.tech_.el(), "objectFit") : "", limitRenditionByPlayerDimensions: this.limitRenditionByPlayerDimensions, playlistController: this.playlistController_ });
  };
};
var dp = function(e8) {
  const { main: t3, currentTime: i6, bandwidth: s6, duration: n5, segmentDuration: r4, timeUntilRebuffer: a6, currentTimeline: o4, syncController: l7 } = e8, h2 = t3.playlists.filter((e9) => !id.isIncompatible(e9));
  let u5 = h2.filter(id.isEnabled);
  u5.length || (u5 = h2.filter((e9) => !id.isDisabled(e9)));
  const d2 = u5.filter(id.hasAttribute.bind(null, "BANDWIDTH")).map((e9) => {
    const t4 = l7.getSyncPoint(e9, n5, o4, i6) ? 1 : 2;
    return { playlist: e9, rebufferingImpact: id.estimateSegmentRequestTime(r4, s6, e9) * t4 - a6 };
  }), c6 = d2.filter((e9) => e9.rebufferingImpact <= 0);
  return rp(c6, (e9, t4) => ap(t4.playlist, e9.playlist)), c6.length ? c6[0] : (rp(d2, (e9, t4) => e9.rebufferingImpact - t4.rebufferingImpact), d2[0] || null);
};
var cp = function() {
  const e8 = this.playlists.main.playlists.filter(id.isEnabled);
  rp(e8, (e9, t3) => ap(e9, t3));
  return e8.filter((e9) => !!Sd(this.playlists.main, e9).video)[0] || null;
};
var pp = (e8) => {
  let t3, i6 = 0;
  return e8.bytes && (t3 = new Uint8Array(e8.bytes), e8.segments.forEach((e9) => {
    t3.set(e9, i6), i6 += e9.byteLength;
  })), t3;
};
function mp(e8) {
  try {
    return new URL(e8).pathname.split("/").slice(-2).join("/");
  } catch (t3) {
    return "";
  }
}
var gp = function(e8, t3, i6) {
  if (!e8[i6]) {
    t3.trigger({ type: "usage", name: "vhs-608" });
    let s6 = i6;
    /^cc708_/.test(i6) && (s6 = "SERVICE" + i6.split("_")[1]);
    const n5 = t3.textTracks().getTrackById(s6);
    if (n5) e8[i6] = n5;
    else {
      let n6 = i6, r4 = i6, a6 = false;
      const o4 = (t3.options_.vhs && t3.options_.vhs.captionServices || {})[s6];
      o4 && (n6 = o4.label, r4 = o4.language, a6 = o4.default), e8[i6] = t3.addRemoteTextTrack({ kind: "captions", id: s6, default: a6, label: n6, language: r4 }, false).track;
    }
  }
};
var fp = function({ inbandTextTracks: e8, captionArray: t3, timestampOffset: i6 }) {
  if (!t3) return;
  const s6 = b4.WebKitDataCue || b4.VTTCue;
  t3.forEach((t4) => {
    const n5 = t4.stream;
    t4.content ? t4.content.forEach((r4) => {
      const a6 = new s6(t4.startTime + i6, t4.endTime + i6, r4.text);
      a6.line = r4.line, a6.align = "left", a6.position = r4.position, a6.positionAlign = "line-left", e8[n5].addCue(a6);
    }) : e8[n5].addCue(new s6(t4.startTime + i6, t4.endTime + i6, t4.text));
  });
};
var yp = function(e8) {
  Object.defineProperties(e8.frame, { id: { get: () => (du.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."), e8.value.key) }, value: { get: () => (du.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."), e8.value.data) }, privateData: { get: () => (du.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."), e8.value.data) } });
};
var _p = ({ inbandTextTracks: e8, metadataArray: t3, timestampOffset: i6, videoDuration: s6 }) => {
  if (!t3) return;
  const n5 = b4.WebKitDataCue || b4.VTTCue, r4 = e8.metadataTrack_;
  if (!r4) return;
  if (t3.forEach((e9) => {
    const t4 = e9.cueTime + i6;
    !("number" != typeof t4 || b4.isNaN(t4) || t4 < 0) && t4 < 1 / 0 && e9.frames && e9.frames.length && e9.frames.forEach((e10) => {
      const i7 = new n5(t4, t4, e10.value || e10.url || e10.data || "");
      i7.frame = e10, i7.value = e10, yp(i7), r4.addCue(i7);
    });
  }), !r4.cues || !r4.cues.length) return;
  const a6 = r4.cues, o4 = [];
  for (let u5 = 0; u5 < a6.length; u5++) a6[u5] && o4.push(a6[u5]);
  const l7 = o4.reduce((e9, t4) => {
    const i7 = e9[t4.startTime] || [];
    return i7.push(t4), e9[t4.startTime] = i7, e9;
  }, {}), h2 = Object.keys(l7).sort((e9, t4) => Number(e9) - Number(t4));
  h2.forEach((e9, t4) => {
    const i7 = l7[e9], n6 = isFinite(s6) ? s6 : e9, r5 = Number(h2[t4 + 1]) || n6;
    i7.forEach((e10) => {
      e10.endTime = r5;
    });
  });
};
var vp = { id: "ID", class: "CLASS", startDate: "START-DATE", duration: "DURATION", endDate: "END-DATE", endOnNext: "END-ON-NEXT", plannedDuration: "PLANNED-DURATION", scte35Out: "SCTE35-OUT", scte35In: "SCTE35-IN" };
var bp = /* @__PURE__ */ new Set(["id", "class", "startDate", "duration", "endDate", "endOnNext", "startTime", "endTime", "processDateRange"]);
var Tp = ({ inbandTextTracks: e8, dateRanges: t3 }) => {
  const i6 = e8.metadataTrack_;
  if (!i6) return;
  const s6 = b4.WebKitDataCue || b4.VTTCue;
  t3.forEach((e9) => {
    for (const t4 of Object.keys(e9)) {
      if (bp.has(t4)) continue;
      const n5 = new s6(e9.startTime, e9.endTime, "");
      n5.id = e9.id, n5.type = "com.apple.quicktime.HLS", n5.value = { key: vp[t4], data: e9[t4] }, "scte35Out" !== t4 && "scte35In" !== t4 || (n5.value.data = new Uint8Array(n5.value.data.match(/[\da-f]{2}/gi)).buffer), i6.addCue(n5);
    }
    e9.processDateRange();
  });
};
var Sp = (e8, t3, i6) => {
  e8.metadataTrack_ || (e8.metadataTrack_ = i6.addRemoteTextTrack({ kind: "metadata", label: "Timed Metadata" }, false).track, du.browser.IS_ANY_SAFARI || (e8.metadataTrack_.inBandMetadataTrackDispatchType = t3));
};
var Ep = function(e8, t3, i6) {
  let s6, n5;
  if (i6 && i6.cues) for (s6 = i6.cues.length; s6--; ) n5 = i6.cues[s6], n5.startTime >= e8 && n5.endTime <= t3 && i6.removeCue(n5);
};
var wp = function(e8) {
  const t3 = e8.cues;
  if (!t3) return;
  const i6 = {};
  for (let s6 = t3.length - 1; s6 >= 0; s6--) {
    const n5 = t3[s6], r4 = `${n5.startTime}-${n5.endTime}-${n5.text}`;
    i6[r4] ? e8.removeCue(n5) : i6[r4] = n5;
  }
};
var Cp = (e8, t3, i6) => {
  if (null == t3 || !e8.length) return [];
  const s6 = Math.ceil((t3 - i6 + 3) * sn.ONE_SECOND_IN_TS);
  let n5;
  for (n5 = 0; n5 < e8.length && !(e8[n5].pts > s6); n5++) ;
  return e8.slice(n5);
};
var kp = (e8, t3, i6) => {
  if (!t3.length) return e8;
  if (i6) return t3.slice();
  const s6 = t3[0].pts;
  let n5 = 0;
  for (; n5 < e8.length && !(e8[n5].pts >= s6); n5++) ;
  return e8.slice(0, n5).concat(t3);
};
var Ip = (e8, t3, i6, s6) => {
  const n5 = Math.ceil((t3 - s6) * sn.ONE_SECOND_IN_TS), r4 = Math.ceil((i6 - s6) * sn.ONE_SECOND_IN_TS), a6 = e8.slice();
  let o4 = e8.length;
  for (; o4-- && !(e8[o4].pts <= r4); ) ;
  if (-1 === o4) return a6;
  let l7 = o4 + 1;
  for (; l7-- && !(e8[l7].pts <= n5); ) ;
  return l7 = Math.max(l7, 0), a6.splice(l7, o4 - l7 + 1), a6;
};
var xp = function(e8, t3) {
  if (!e8 && !t3 || !e8 && t3 || e8 && !t3) return false;
  if (e8 === t3) return true;
  const i6 = Object.keys(e8).sort(), s6 = Object.keys(t3).sort();
  if (i6.length !== s6.length) return false;
  for (let n5 = 0; n5 < i6.length; n5++) {
    const r4 = i6[n5];
    if (r4 !== s6[n5]) return false;
    if (e8[r4] !== t3[r4]) return false;
  }
  return true;
};
var Ap = function(e8, t3, i6) {
  t3 = t3 || [];
  const s6 = [];
  let n5 = 0;
  for (let r4 = 0; r4 < t3.length; r4++) {
    const a6 = t3[r4];
    if (e8 === a6.timeline && (s6.push(r4), n5 += a6.duration, n5 > i6)) return r4;
  }
  return 0 === s6.length ? 0 : s6[s6.length - 1];
};
var Dp = 1;
var Pp = 500;
var Lp = (e8) => "number" == typeof e8 && isFinite(e8);
var Op = 1 / 60;
var Np = (e8, t3, i6) => "main" === e8 && t3 && i6 ? i6.hasAudio || i6.hasVideo ? t3.hasVideo && !i6.hasVideo ? "Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest." : !t3.hasVideo && i6.hasVideo ? "Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest." : null : "Neither audio nor video found in segment." : null;
var Rp = (e8, t3, i6) => {
  let s6 = t3 - yc.BACK_BUFFER_LENGTH;
  e8.length && (s6 = Math.max(s6, e8.start(0)));
  const n5 = t3 - i6;
  return Math.min(n5, s6);
};
var Mp = (e8) => {
  const { startOfSegment: t3, duration: i6, segment: s6, part: n5, playlist: { mediaSequence: r4, id: a6, segments: o4 = [] }, mediaIndex: l7, partIndex: h2, timeline: u5 } = e8, d2 = o4.length - 1;
  let c6 = "mediaIndex/partIndex increment";
  e8.getMediaInfoForTime ? c6 = `getMediaInfoForTime (${e8.getMediaInfoForTime})` : e8.isSyncRequest && (c6 = "getSyncSegmentCandidate (isSyncRequest)"), e8.independent && (c6 += ` with independent ${e8.independent}`);
  const p6 = "number" == typeof h2, m7 = e8.segment.uri ? "segment" : "pre-segment", g2 = p6 ? Fu({ preloadSegment: s6 }) - 1 : 0;
  return `${m7} [${r4 + l7}/${r4 + d2}]` + (p6 ? ` part [${h2}/${g2}]` : "") + ` segment start/end [${s6.start} => ${s6.end}]` + (p6 ? ` part start/end [${n5.start} => ${n5.end}]` : "") + ` startOfSegment [${t3}] duration [${i6}] timeline [${u5}] selected by [${c6}] playlist [${a6}]`;
};
var Up = (e8) => `${e8}TimingInfo`;
var Bp = ({ segmentTimeline: e8, currentTimeline: t3, startOfSegment: i6, buffered: s6, overrideCheck: n5 }) => n5 || e8 !== t3 ? e8 < t3 ? i6 : s6.length ? s6.end(s6.length - 1) : i6 : null;
var Fp = ({ timelineChangeController: e8, currentTimeline: t3, segmentTimeline: i6, loaderType: s6, audioDisabled: n5 }) => {
  if (t3 === i6) return false;
  if ("audio" === s6) {
    const t4 = e8.lastTimelineChange({ type: "main" });
    return !t4 || t4.to !== i6;
  }
  if ("main" === s6 && n5) {
    const t4 = e8.pendingTimelineChange({ type: "audio" });
    return !t4 || t4.to !== i6;
  }
  return false;
};
var qp = (e8) => {
  if (!e8) return false;
  const t3 = e8.pendingTimelineChange({ type: "audio" }), i6 = e8.pendingTimelineChange({ type: "main" }), s6 = t3 && i6, n5 = s6 && t3.to !== i6.to;
  return !(!s6 || -1 === t3.from || -1 === i6.from || !n5);
};
var jp = (e8) => {
  const t3 = e8.timelineChangeController_.pendingTimelineChange({ type: "audio" }), i6 = e8.timelineChangeController_.pendingTimelineChange({ type: "main" });
  return t3 && i6 && t3.to < i6.to;
};
var $p = (e8) => {
  const t3 = e8.pendingSegment_;
  if (!t3) return;
  if (Fp({ timelineChangeController: e8.timelineChangeController_, currentTimeline: e8.currentTimeline_, segmentTimeline: t3.timeline, loaderType: e8.loaderType_, audioDisabled: e8.audioDisabled_ }) && qp(e8.timelineChangeController_)) {
    if (jp(e8)) return void e8.timelineChangeController_.trigger("audioTimelineBehind");
    e8.timelineChangeController_.trigger("fixBadTimelineChange");
  }
};
var Hp = (e8) => {
  let t3 = 0;
  return ["video", "audio"].forEach(function(i6) {
    const s6 = e8[`${i6}TimingInfo`];
    if (!s6) return;
    const { start: n5, end: r4 } = s6;
    let a6;
    "bigint" == typeof n5 || "bigint" == typeof r4 ? a6 = b4.BigInt(r4) - b4.BigInt(n5) : "number" == typeof n5 && "number" == typeof r4 && (a6 = r4 - n5), void 0 !== a6 && a6 > t3 && (t3 = a6);
  }), "bigint" == typeof t3 && t3 < Number.MAX_SAFE_INTEGER && (t3 = Number(t3)), t3;
};
var Vp = ({ segmentDuration: e8, maxDuration: t3 }) => !!e8 && Math.round(e8) > t3 + Eu;
var zp = (e8, t3) => {
  if ("hls" !== t3) return null;
  const i6 = Hp({ audioTimingInfo: e8.audioTimingInfo, videoTimingInfo: e8.videoTimingInfo });
  if (!i6) return null;
  const s6 = e8.playlist.targetDuration, n5 = Vp({ segmentDuration: i6, maxDuration: 2 * s6 }), r4 = Vp({ segmentDuration: i6, maxDuration: s6 }), a6 = `Segment with index ${e8.mediaIndex} from playlist ${e8.playlist.id} has a duration of ${i6} when the reported duration is ${e8.duration} and the target duration is ${s6}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;
  return n5 || r4 ? { severity: n5 ? "warn" : "info", message: a6 } : null;
};
var Wp = ({ type: e8, segment: t3 }) => {
  if (!t3) return;
  const i6 = Boolean(t3.key || t3.map && t3.map.ke), s6 = Boolean(t3.map && !t3.map.bytes), n5 = void 0 === t3.startOfSegment ? t3.start : t3.startOfSegment;
  return { type: e8 || t3.type, uri: t3.resolvedUri || t3.uri, start: n5, duration: t3.duration, isEncrypted: i6, isMediaInitialization: s6 };
};
var Gp = class extends du.EventTarget {
  constructor(e8, t3 = {}) {
    if (super(), !e8) throw new TypeError("Initialization settings are required");
    if ("function" != typeof e8.currentTime) throw new TypeError("No currentTime getter specified");
    if (!e8.mediaSource) throw new TypeError("No MediaSource specified");
    this.bandwidth = e8.bandwidth, this.throughput = { rate: 0, count: 0 }, this.roundTrip = NaN, this.resetStats_(), this.mediaIndex = null, this.partIndex = null, this.hasPlayed_ = e8.hasPlayed, this.currentTime_ = e8.currentTime, this.seekable_ = e8.seekable, this.seeking_ = e8.seeking, this.duration_ = e8.duration, this.mediaSource_ = e8.mediaSource, this.vhs_ = e8.vhs, this.loaderType_ = e8.loaderType, this.currentMediaInfo_ = void 0, this.startingMediaInfo_ = void 0, this.segmentMetadataTrack_ = e8.segmentMetadataTrack, this.goalBufferLength_ = e8.goalBufferLength, this.sourceType_ = e8.sourceType, this.sourceUpdater_ = e8.sourceUpdater, this.inbandTextTracks_ = e8.inbandTextTracks, this.state_ = "INIT", this.timelineChangeController_ = e8.timelineChangeController, this.shouldSaveSegmentTimingInfo_ = true, this.parse708captions_ = e8.parse708captions, this.useDtsForTimestampOffset_ = e8.useDtsForTimestampOffset, this.captionServices_ = e8.captionServices, this.exactManifestTimings = e8.exactManifestTimings, this.addMetadataToTextTrack = e8.addMetadataToTextTrack, this.checkBufferTimeout_ = null, this.error_ = void 0, this.currentTimeline_ = -1, this.shouldForceTimestampOffsetAfterResync_ = false, this.pendingSegment_ = null, this.xhrOptions_ = null, this.pendingSegments_ = [], this.audioDisabled_ = false, this.isPendingTimestampOffset_ = false, this.gopBuffer_ = [], this.timeMapping_ = 0, this.safeAppend_ = false, this.appendInitSegment_ = { audio: true, video: true }, this.playlistOfLastInitSegment_ = { audio: null, video: null }, this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_ = { id3: [], caption: [] }, this.waitingOnRemove_ = false, this.quotaExceededErrorRetryTimeout_ = null, this.activeInitSegmentId_ = null, this.initSegments_ = {}, this.cacheEncryptionKeys_ = e8.cacheEncryptionKeys, this.keyCache_ = {}, this.decrypter_ = e8.decrypter, this.syncController_ = e8.syncController, this.syncPoint_ = { segmentIndex: 0, time: 0 }, this.transmuxer_ = this.createTransmuxer_(), this.triggerSyncInfoUpdate_ = () => this.trigger("syncinfoupdate"), this.syncController_.on("syncinfoupdate", this.triggerSyncInfoUpdate_), this.mediaSource_.addEventListener("sourceopen", () => {
      this.isEndOfStream_() || (this.ended_ = false);
    }), this.fetchAtBuffer_ = false, this.logger_ = vu(`SegmentLoader[${this.loaderType_}]`), Object.defineProperty(this, "state", { get() {
      return this.state_;
    }, set(e9) {
      e9 !== this.state_ && (this.logger_(`${this.state_} -> ${e9}`), this.state_ = e9, this.trigger("statechange"));
    } }), this.sourceUpdater_.on("ready", () => {
      this.hasEnoughInfoToAppend_() ? this.processCallQueue_() : $p(this);
    }), this.sourceUpdater_.on("codecschange", (e9) => {
      this.trigger(Fe({ type: "codecschange" }, e9));
    }), "main" === this.loaderType_ && this.timelineChangeController_.on("pendingtimelinechange", () => {
      this.hasEnoughInfoToAppend_() ? this.processCallQueue_() : $p(this);
    }), "audio" === this.loaderType_ && this.timelineChangeController_.on("timelinechange", (e9) => {
      this.trigger(Fe({ type: "timelinechange" }, e9)), this.hasEnoughInfoToLoad_() ? this.processLoadQueue_() : $p(this), this.hasEnoughInfoToAppend_() ? this.processCallQueue_() : $p(this);
    });
  }
  get mediaSequenceSync_() {
    return this.syncController_.getMediaSequenceSync(this.loaderType_);
  }
  createTransmuxer_() {
    return Nc.createTransmuxer({ remux: false, alignGopsAtEnd: this.safeAppend_, keepOriginalTimestamps: true, parse708captions: this.parse708captions_, captionServices: this.captionServices_ });
  }
  resetStats_() {
    this.mediaBytesTransferred = 0, this.mediaRequests = 0, this.mediaRequestsAborted = 0, this.mediaRequestsTimedout = 0, this.mediaRequestsErrored = 0, this.mediaTransferDuration = 0, this.mediaSecondsLoaded = 0, this.mediaAppends = 0;
  }
  dispose() {
    this.trigger("dispose"), this.state = "DISPOSED", this.pause(), this.abort_(), this.transmuxer_ && this.transmuxer_.terminate(), this.resetStats_(), this.checkBufferTimeout_ && b4.clearTimeout(this.checkBufferTimeout_), this.syncController_ && this.triggerSyncInfoUpdate_ && this.syncController_.off("syncinfoupdate", this.triggerSyncInfoUpdate_), this.off();
  }
  setAudio(e8) {
    this.audioDisabled_ = !e8, e8 ? this.appendInitSegment_.audio = true : this.sourceUpdater_.removeAudio(0, this.duration_());
  }
  abort() {
    if ("WAITING" !== this.state) return this.pendingSegment_ && (this.pendingSegment_ = null), void this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);
    this.abort_(), this.state = "READY", this.paused() || this.monitorBuffer_();
  }
  abort_() {
    this.pendingSegment_ && this.pendingSegment_.abortRequests && this.pendingSegment_.abortRequests(), this.pendingSegment_ = null, this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [], this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_), this.waitingOnRemove_ = false, b4.clearTimeout(this.quotaExceededErrorRetryTimeout_), this.quotaExceededErrorRetryTimeout_ = null;
  }
  checkForAbort_(e8) {
    return "APPENDING" !== this.state || this.pendingSegment_ ? !this.pendingSegment_ || this.pendingSegment_.requestId !== e8 : (this.state = "READY", true);
  }
  error(e8) {
    return void 0 !== e8 && (this.logger_("error occurred:", e8), this.error_ = e8), this.pendingSegment_ = null, this.error_;
  }
  endOfStream() {
    this.ended_ = true, this.transmuxer_ && Nc.reset(this.transmuxer_), this.gopBuffer_.length = 0, this.pause(), this.trigger("ended");
  }
  buffered_() {
    const e8 = this.getMediaInfo_();
    if (!this.sourceUpdater_ || !e8) return Tu();
    if ("main" === this.loaderType_) {
      const { hasAudio: t3, hasVideo: i6, isMuxed: s6 } = e8;
      if (i6 && t3 && !this.audioDisabled_ && !s6) return this.sourceUpdater_.buffered();
      if (i6) return this.sourceUpdater_.videoBuffered();
    }
    return this.sourceUpdater_.audioBuffered();
  }
  initSegmentForMap(e8, t3 = false) {
    if (!e8) return null;
    const i6 = Vd(e8);
    let s6 = this.initSegments_[i6];
    return t3 && !s6 && e8.bytes && (this.initSegments_[i6] = s6 = { resolvedUri: e8.resolvedUri, byterange: e8.byterange, bytes: e8.bytes, tracks: e8.tracks, timescales: e8.timescales }), s6 || e8;
  }
  segmentKey(e8, t3 = false) {
    if (!e8) return null;
    const i6 = zd(e8);
    let s6 = this.keyCache_[i6];
    this.cacheEncryptionKeys_ && t3 && !s6 && e8.bytes && (this.keyCache_[i6] = s6 = { resolvedUri: e8.resolvedUri, bytes: e8.bytes });
    const n5 = { resolvedUri: (s6 || e8).resolvedUri };
    return s6 && (n5.bytes = s6.bytes), n5;
  }
  couldBeginLoading_() {
    return this.playlist_ && !this.paused();
  }
  load() {
    if (this.monitorBuffer_(), this.playlist_) return "INIT" === this.state && this.couldBeginLoading_() ? this.init_() : void (!this.couldBeginLoading_() || "READY" !== this.state && "INIT" !== this.state || (this.state = "READY"));
  }
  init_() {
    return this.state = "READY", this.resetEverything(), this.monitorBuffer_();
  }
  playlist(e8, t3 = {}) {
    if (!e8) return;
    if (this.playlist_ && this.playlist_.endList && e8.endList && this.playlist_.uri === e8.uri) return;
    const i6 = this.playlist_, s6 = this.pendingSegment_;
    this.playlist_ = e8, this.xhrOptions_ = t3, "INIT" === this.state && (e8.syncInfo = { mediaSequence: e8.mediaSequence, time: 0 }, "main" === this.loaderType_ && this.syncController_.setDateTimeMappingForStart(e8));
    let n5 = null;
    if (i6 && (i6.id ? n5 = i6.id : i6.uri && (n5 = i6.uri)), this.logger_(`playlist update [${n5} => ${e8.id || e8.uri}]`), this.mediaSequenceSync_ && (this.mediaSequenceSync_.update(e8, this.currentTime_()), this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${Nu(this.buffered_())}
`, this.mediaSequenceSync_.diagnostics)), this.trigger("syncinfoupdate"), "INIT" === this.state && this.couldBeginLoading_()) return this.init_();
    if (!i6 || i6.uri !== e8.uri) {
      if (null !== this.mediaIndex) {
        !e8.endList && "number" == typeof e8.partTargetDuration ? this.resetLoader() : this.resyncLoader();
      }
      return this.currentMediaInfo_ = void 0, void this.trigger("playlistupdate");
    }
    const r4 = e8.mediaSequence - i6.mediaSequence;
    if (this.logger_(`live window shift [${r4}]`), null !== this.mediaIndex) if (this.mediaIndex -= r4, this.mediaIndex < 0) this.mediaIndex = null, this.partIndex = null;
    else {
      const e9 = this.playlist_.segments[this.mediaIndex];
      if (this.partIndex && (!e9.parts || !e9.parts.length || !e9.parts[this.partIndex])) {
        const e10 = this.mediaIndex;
        this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`), this.resetLoader(), this.mediaIndex = e10;
      }
    }
    s6 && (s6.mediaIndex -= r4, s6.mediaIndex < 0 ? (s6.mediaIndex = null, s6.partIndex = null) : (s6.mediaIndex >= 0 && (s6.segment = e8.segments[s6.mediaIndex]), s6.partIndex >= 0 && s6.segment.parts && (s6.part = s6.segment.parts[s6.partIndex]))), this.syncController_.saveExpiredSegmentInfo(i6, e8);
  }
  pause() {
    this.checkBufferTimeout_ && (b4.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = null);
  }
  paused() {
    return null === this.checkBufferTimeout_;
  }
  resetEverything(e8) {
    this.ended_ = false, this.activeInitSegmentId_ = null, this.appendInitSegment_ = { audio: true, video: true }, this.resetLoader(), this.remove(0, 1 / 0, e8), this.transmuxer_ && (this.transmuxer_.postMessage({ action: "clearAllMp4Captions" }), this.transmuxer_.postMessage({ action: "reset" }));
  }
  resetLoader() {
    this.fetchAtBuffer_ = false, this.mediaSequenceSync_ && this.mediaSequenceSync_.resetAppendedStatus(), this.resyncLoader();
  }
  resyncLoader() {
    this.transmuxer_ && Nc.reset(this.transmuxer_), this.mediaIndex = null, this.partIndex = null, this.syncPoint_ = null, this.isPendingTimestampOffset_ = false;
    const e8 = this.currentMediaInfo_ && this.currentMediaInfo_.isFmp4;
    "hls" === this.sourceType_ && !e8 && (this.shouldForceTimestampOffsetAfterResync_ = true), this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [], this.abort(), this.transmuxer_ && this.transmuxer_.postMessage({ action: "clearParsedMp4Captions" });
  }
  remove(e8, t3, i6 = () => {
  }, s6 = false) {
    if (t3 === 1 / 0 && (t3 = this.duration_()), t3 <= e8) return void this.logger_("skipping remove because end ${end} is <= start ${start}");
    if (!this.sourceUpdater_ || !this.getMediaInfo_()) return void this.logger_("skipping remove because no source updater or starting media info");
    let n5 = 1;
    const r4 = () => {
      n5--, 0 === n5 && i6();
    };
    !s6 && this.audioDisabled_ || (n5++, this.sourceUpdater_.removeAudio(e8, t3, r4)), (s6 || "main" === this.loaderType_) && (this.gopBuffer_ = Ip(this.gopBuffer_, e8, t3, this.timeMapping_), n5++, this.sourceUpdater_.removeVideo(e8, t3, r4));
    for (const a6 in this.inbandTextTracks_) Ep(e8, t3, this.inbandTextTracks_[a6]);
    Ep(e8, t3, this.segmentMetadataTrack_), r4();
  }
  monitorBuffer_() {
    this.checkBufferTimeout_ && b4.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = b4.setTimeout(this.monitorBufferTick_.bind(this), 1);
  }
  monitorBufferTick_() {
    "READY" === this.state && this.fillBuffer_(), this.checkBufferTimeout_ && b4.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = b4.setTimeout(this.monitorBufferTick_.bind(this), Pp);
  }
  fillBuffer_() {
    if (this.sourceUpdater_.updating()) return;
    const e8 = this.chooseNextRequest_();
    if (!e8) return;
    const t3 = { segmentInfo: Wp({ type: this.loaderType_, segment: e8 }) };
    this.trigger({ type: "segmentselected", metadata: t3 }), "number" == typeof e8.timestampOffset && (this.isPendingTimestampOffset_ = false, this.timelineChangeController_.pendingTimelineChange({ type: this.loaderType_, from: this.currentTimeline_, to: e8.timeline })), this.loadSegment_(e8);
  }
  isEndOfStream_(e8 = this.mediaIndex, t3 = this.playlist_, i6 = this.partIndex) {
    if (!t3 || !this.mediaSource_) return false;
    const s6 = "number" == typeof e8 && t3.segments[e8], n5 = e8 + 1 === t3.segments.length, r4 = !s6 || !s6.parts || i6 + 1 === s6.parts.length;
    return t3.endList && "open" === this.mediaSource_.readyState && n5 && r4;
  }
  chooseNextRequest_() {
    const e8 = this.buffered_(), t3 = Nu(e8) || 0, i6 = Ru(e8, this.currentTime_()), s6 = !this.hasPlayed_() && i6 >= 1, n5 = i6 >= this.goalBufferLength_(), r4 = this.playlist_.segments;
    if (!r4.length || s6 || n5) return null;
    this.syncPoint_ = this.syncPoint_ || this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_(), this.loaderType_);
    const a6 = { partIndex: null, mediaIndex: null, startOfSegment: null, playlist: this.playlist_, isSyncRequest: Boolean(!this.syncPoint_) };
    if (a6.isSyncRequest) a6.mediaIndex = Ap(this.currentTimeline_, r4, t3), this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${a6.mediaIndex}`);
    else if (null !== this.mediaIndex) {
      const e9 = r4[this.mediaIndex], i7 = "number" == typeof this.partIndex ? this.partIndex : -1;
      a6.startOfSegment = e9.end ? e9.end : t3, e9.parts && e9.parts[i7 + 1] ? (a6.mediaIndex = this.mediaIndex, a6.partIndex = i7 + 1) : a6.mediaIndex = this.mediaIndex + 1;
    } else {
      let e9, i7, s7;
      const n6 = this.fetchAtBuffer_ ? t3 : this.currentTime_();
      if (this.mediaSequenceSync_ && this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${n6}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t3}
Fetch At Buffer: ${this.fetchAtBuffer_}
`, this.mediaSequenceSync_.diagnostics), this.mediaSequenceSync_ && this.mediaSequenceSync_.isReliable) {
        const t4 = this.getSyncInfoFromMediaSequenceSync_(n6);
        if (!t4) {
          const e10 = "No sync info found while using media sequence sync";
          return this.error({ message: e10, metadata: { errorType: du.Error.StreamingFailedToSelectNextSegment, error: new Error(e10) } }), this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"), null;
        }
        this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${t4.start} --> ${t4.end})`), e9 = t4.segmentIndex, i7 = t4.partIndex, s7 = t4.start;
      } else {
        this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");
        const t4 = id.getMediaInfoForTime({ exactManifestTimings: this.exactManifestTimings, playlist: this.playlist_, currentTime: n6, startingPartIndex: this.syncPoint_.partIndex, startingSegmentIndex: this.syncPoint_.segmentIndex, startTime: this.syncPoint_.time });
        e9 = t4.segmentIndex, i7 = t4.partIndex, s7 = t4.startTime;
      }
      a6.getMediaInfoForTime = this.fetchAtBuffer_ ? `bufferedEnd ${n6}` : `currentTime ${n6}`, a6.mediaIndex = e9, a6.startOfSegment = s7, a6.partIndex = i7, this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${a6.mediaIndex} `);
    }
    const o4 = r4[a6.mediaIndex];
    let l7 = o4 && "number" == typeof a6.partIndex && o4.parts && o4.parts[a6.partIndex];
    if (!o4 || "number" == typeof a6.partIndex && !l7) return null;
    "number" != typeof a6.partIndex && o4.parts && (a6.partIndex = 0, l7 = o4.parts[0]);
    const h2 = this.vhs_.playlists && this.vhs_.playlists.main && this.vhs_.playlists.main.independentSegments || this.playlist_.independentSegments;
    if (!i6 && l7 && !h2 && !l7.independent) if (0 === a6.partIndex) {
      const e9 = r4[a6.mediaIndex - 1], t4 = e9.parts && e9.parts.length && e9.parts[e9.parts.length - 1];
      t4 && t4.independent && (a6.mediaIndex -= 1, a6.partIndex = e9.parts.length - 1, a6.independent = "previous segment");
    } else o4.parts[a6.partIndex - 1].independent && (a6.partIndex -= 1, a6.independent = "previous part");
    const u5 = this.mediaSource_ && "ended" === this.mediaSource_.readyState;
    return a6.mediaIndex >= r4.length - 1 && u5 && !this.seeking_() ? null : (this.shouldForceTimestampOffsetAfterResync_ && (this.shouldForceTimestampOffsetAfterResync_ = false, a6.forceTimestampOffset = true, this.logger_("choose next request. Force timestamp offset after loader resync")), this.generateSegmentInfo_(a6));
  }
  getSyncInfoFromMediaSequenceSync_(e8) {
    if (!this.mediaSequenceSync_) return null;
    const t3 = Math.max(e8, this.mediaSequenceSync_.start);
    e8 !== t3 && this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e8} to ${t3}`);
    const i6 = this.mediaSequenceSync_.getSyncInfoForTime(t3);
    if (!i6) return null;
    if (!i6.isAppended) return i6;
    const s6 = this.mediaSequenceSync_.getSyncInfoForTime(i6.end);
    return s6 ? (s6.isAppended && this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"), s6) : null;
  }
  generateSegmentInfo_(e8) {
    const { independent: t3, playlist: i6, mediaIndex: s6, startOfSegment: n5, isSyncRequest: r4, partIndex: a6, forceTimestampOffset: o4, getMediaInfoForTime: l7 } = e8, h2 = i6.segments[s6], u5 = "number" == typeof a6 && h2.parts[a6], d2 = { requestId: "segment-loader-" + Math.random(), uri: u5 && u5.resolvedUri || h2.resolvedUri, mediaIndex: s6, partIndex: u5 ? a6 : null, isSyncRequest: r4, startOfSegment: n5, playlist: i6, bytes: null, encryptedBytes: null, timestampOffset: null, timeline: h2.timeline, duration: u5 && u5.duration || h2.duration, segment: h2, part: u5, byteLength: 0, transmuxer: this.transmuxer_, getMediaInfoForTime: l7, independent: t3 }, c6 = void 0 !== o4 ? o4 : this.isPendingTimestampOffset_;
    d2.timestampOffset = this.timestampOffsetForSegment_({ segmentTimeline: h2.timeline, currentTimeline: this.currentTimeline_, startOfSegment: n5, buffered: this.buffered_(), overrideCheck: c6 });
    const p6 = Nu(this.sourceUpdater_.audioBuffered());
    return "number" == typeof p6 && (d2.audioAppendStart = p6 - this.sourceUpdater_.audioTimestampOffset()), this.sourceUpdater_.videoBuffered().length && (d2.gopsToAlignWith = Cp(this.gopBuffer_, this.currentTime_() - this.sourceUpdater_.videoTimestampOffset(), this.timeMapping_)), d2;
  }
  timestampOffsetForSegment_(e8) {
    return Bp(e8);
  }
  earlyAbortWhenNeeded_(e8) {
    if (this.vhs_.tech_.paused() || !this.xhrOptions_.timeout || !this.playlist_.attributes.BANDWIDTH) return;
    if (Date.now() - (e8.firstBytesReceivedAt || Date.now()) < 1e3) return;
    const t3 = this.currentTime_(), i6 = e8.bandwidth, s6 = this.pendingSegment_.duration, n5 = id.estimateSegmentRequestTime(s6, i6, this.playlist_, e8.bytesReceived), r4 = Pu(this.buffered_(), t3, this.vhs_.tech_.playbackRate()) - 1;
    if (n5 <= r4) return;
    const a6 = dp({ main: this.vhs_.playlists.main, currentTime: t3, bandwidth: i6, duration: this.duration_(), segmentDuration: s6, timeUntilRebuffer: r4, currentTimeline: this.currentTimeline_, syncController: this.syncController_ });
    if (!a6) return;
    const o4 = n5 - r4 - a6.rebufferingImpact;
    let l7 = 0.5;
    r4 <= Eu && (l7 = 1), !a6.playlist || a6.playlist.uri === this.playlist_.uri || o4 < l7 || (this.bandwidth = a6.playlist.attributes.BANDWIDTH * yc.BANDWIDTH_VARIANCE + 1, this.trigger("earlyabort"));
  }
  handleAbort_(e8) {
    this.logger_(`Aborting ${Mp(e8)}`), this.mediaRequestsAborted += 1;
  }
  handleProgress_(e8, t3) {
    this.earlyAbortWhenNeeded_(t3.stats), this.checkForAbort_(t3.requestId) || this.trigger("progress");
  }
  handleTrackInfo_(e8, t3) {
    const { hasAudio: i6, hasVideo: s6 } = t3, n5 = { segmentInfo: Wp({ type: this.loaderType_, segment: e8 }), trackInfo: { hasAudio: i6, hasVideo: s6 } };
    this.trigger({ type: "segmenttransmuxingtrackinfoavailable", metadata: n5 }), this.earlyAbortWhenNeeded_(e8.stats), this.checkForAbort_(e8.requestId) || this.checkForIllegalMediaSwitch(t3) || (t3 = t3 || {}, xp(this.currentMediaInfo_, t3) || (this.appendInitSegment_ = { audio: true, video: true }, this.startingMediaInfo_ = t3, this.currentMediaInfo_ = t3, this.logger_("trackinfo update", t3), this.trigger("trackinfo")), this.checkForAbort_(e8.requestId) || (this.pendingSegment_.trackInfo = t3, this.hasEnoughInfoToAppend_() ? this.processCallQueue_() : $p(this)));
  }
  handleTimingInfo_(e8, t3, i6, s6) {
    if (this.earlyAbortWhenNeeded_(e8.stats), this.checkForAbort_(e8.requestId)) return;
    const n5 = this.pendingSegment_, r4 = Up(t3);
    n5[r4] = n5[r4] || {}, n5[r4][i6] = s6, this.logger_(`timinginfo: ${t3} - ${i6} - ${s6}`), this.hasEnoughInfoToAppend_() ? this.processCallQueue_() : $p(this);
  }
  handleCaptions_(e8, t3) {
    if (this.earlyAbortWhenNeeded_(e8.stats), this.checkForAbort_(e8.requestId)) return;
    if (0 === t3.length) return void this.logger_("SegmentLoader received no captions from a caption event");
    if (!this.pendingSegment_.hasAppendedData_) return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this, e8, t3));
    const i6 = null === this.sourceUpdater_.videoTimestampOffset() ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset(), s6 = {};
    t3.forEach((e9) => {
      s6[e9.stream] = s6[e9.stream] || { startTime: 1 / 0, captions: [], endTime: 0 };
      const t4 = s6[e9.stream];
      t4.startTime = Math.min(t4.startTime, e9.startTime + i6), t4.endTime = Math.max(t4.endTime, e9.endTime + i6), t4.captions.push(e9);
    }), Object.keys(s6).forEach((e9) => {
      const { startTime: t4, endTime: n5, captions: r4 } = s6[e9], a6 = this.inbandTextTracks_;
      this.logger_(`adding cues from ${t4} -> ${n5} for ${e9}`), gp(a6, this.vhs_.tech_, e9), Ep(t4, n5, a6[e9]), fp({ captionArray: r4, inbandTextTracks: a6, timestampOffset: i6 });
    }), this.transmuxer_ && this.transmuxer_.postMessage({ action: "clearParsedMp4Captions" });
  }
  handleId3_(e8, t3, i6) {
    if (this.earlyAbortWhenNeeded_(e8.stats), this.checkForAbort_(e8.requestId)) return;
    this.pendingSegment_.hasAppendedData_ ? this.addMetadataToTextTrack(i6, t3, this.duration_()) : this.metadataQueue_.id3.push(this.handleId3_.bind(this, e8, t3, i6));
  }
  processMetadataQueue_() {
    this.metadataQueue_.id3.forEach((e8) => e8()), this.metadataQueue_.caption.forEach((e8) => e8()), this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [];
  }
  processCallQueue_() {
    const e8 = this.callQueue_;
    this.callQueue_ = [], e8.forEach((e9) => e9());
  }
  processLoadQueue_() {
    const e8 = this.loadQueue_;
    this.loadQueue_ = [], e8.forEach((e9) => e9());
  }
  hasEnoughInfoToLoad_() {
    if ("audio" !== this.loaderType_) return true;
    const e8 = this.pendingSegment_;
    return !!e8 && (!this.getCurrentMediaInfo_() || !Fp({ timelineChangeController: this.timelineChangeController_, currentTimeline: this.currentTimeline_, segmentTimeline: e8.timeline, loaderType: this.loaderType_, audioDisabled: this.audioDisabled_ }));
  }
  getCurrentMediaInfo_(e8 = this.pendingSegment_) {
    return e8 && e8.trackInfo || this.currentMediaInfo_;
  }
  getMediaInfo_(e8 = this.pendingSegment_) {
    return this.getCurrentMediaInfo_(e8) || this.startingMediaInfo_;
  }
  getPendingSegmentPlaylist() {
    return this.pendingSegment_ ? this.pendingSegment_.playlist : null;
  }
  hasEnoughInfoToAppend_() {
    if (!this.sourceUpdater_.ready()) return false;
    if (this.waitingOnRemove_ || this.quotaExceededErrorRetryTimeout_) return false;
    const e8 = this.pendingSegment_, t3 = this.getCurrentMediaInfo_();
    if (!e8 || !t3) return false;
    const { hasAudio: i6, hasVideo: s6, isMuxed: n5 } = t3;
    return !(s6 && !e8.videoTimingInfo) && (!(i6 && !this.audioDisabled_ && !n5 && !e8.audioTimingInfo) && !Fp({ timelineChangeController: this.timelineChangeController_, currentTimeline: this.currentTimeline_, segmentTimeline: e8.timeline, loaderType: this.loaderType_, audioDisabled: this.audioDisabled_ }));
  }
  handleData_(e8, t3) {
    if (this.earlyAbortWhenNeeded_(e8.stats), this.checkForAbort_(e8.requestId)) return;
    if (this.callQueue_.length || !this.hasEnoughInfoToAppend_()) return $p(this), void this.callQueue_.push(this.handleData_.bind(this, e8, t3));
    const i6 = this.pendingSegment_;
    if (this.setTimeMapping_(i6.timeline), this.updateMediaSecondsLoaded_(i6.part || i6.segment), "closed" !== this.mediaSource_.readyState) {
      if (e8.map && (e8.map = this.initSegmentForMap(e8.map, true), i6.segment.map = e8.map), e8.key && this.segmentKey(e8.key, true), i6.isFmp4 = e8.isFmp4, i6.timingInfo = i6.timingInfo || {}, i6.isFmp4) this.trigger("fmp4"), i6.timingInfo.start = i6[Up(t3.type)].start;
      else {
        const e9 = this.getCurrentMediaInfo_(), t4 = "main" === this.loaderType_ && e9 && e9.hasVideo;
        let s6;
        t4 && (s6 = i6.videoTimingInfo.start), i6.timingInfo.start = this.trueSegmentStart_({ currentStart: i6.timingInfo.start, playlist: i6.playlist, mediaIndex: i6.mediaIndex, currentVideoTimestampOffset: this.sourceUpdater_.videoTimestampOffset(), useVideoTimingInfo: t4, firstVideoFrameTimeForData: s6, videoTimingInfo: i6.videoTimingInfo, audioTimingInfo: i6.audioTimingInfo });
      }
      if (this.updateAppendInitSegmentStatus(i6, t3.type), this.updateSourceBufferTimestampOffset_(i6), i6.isSyncRequest) {
        this.updateTimingInfoEnd_(i6), this.syncController_.saveSegmentTimingInfo({ segmentInfo: i6, shouldSaveTimelineMapping: "main" === this.loaderType_ });
        const e9 = this.chooseNextRequest_();
        if (e9.mediaIndex !== i6.mediaIndex || e9.partIndex !== i6.partIndex) return void this.logger_("sync segment was incorrect, not appending");
        this.logger_("sync segment was correct, appending");
      }
      i6.hasAppendedData_ = true, this.processMetadataQueue_(), this.appendData_(i6, t3);
    }
  }
  updateAppendInitSegmentStatus(e8, t3) {
    "main" !== this.loaderType_ || "number" != typeof e8.timestampOffset || e8.changedTimestampOffset || (this.appendInitSegment_ = { audio: true, video: true }), this.playlistOfLastInitSegment_[t3] !== e8.playlist && (this.appendInitSegment_[t3] = true);
  }
  getInitSegmentAndUpdateState_({ type: e8, initSegment: t3, map: i6, playlist: s6 }) {
    if (i6) {
      const e9 = Vd(i6);
      if (this.activeInitSegmentId_ === e9) return null;
      t3 = this.initSegmentForMap(i6, true).bytes, this.activeInitSegmentId_ = e9;
    }
    return t3 && this.appendInitSegment_[e8] ? (this.playlistOfLastInitSegment_[e8] = s6, this.appendInitSegment_[e8] = false, this.activeInitSegmentId_ = null, t3) : null;
  }
  handleQuotaExceededError_({ segmentInfo: e8, type: t3, bytes: i6 }, s6) {
    const n5 = this.sourceUpdater_.audioBuffered(), r4 = this.sourceUpdater_.videoBuffered();
    n5.length > 1 && this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: " + Lu(n5).join(", ")), r4.length > 1 && this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: " + Lu(r4).join(", "));
    const a6 = n5.length ? n5.start(0) : 0, o4 = n5.length ? n5.end(n5.length - 1) : 0, l7 = r4.length ? r4.start(0) : 0, h2 = r4.length ? r4.end(r4.length - 1) : 0;
    if (o4 - a6 <= Dp && h2 - l7 <= Dp) return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i6.byteLength}, audio buffer: ${Lu(n5).join(", ")}, video buffer: ${Lu(r4).join(", ")}, `), this.error({ message: "Quota exceeded error with append of a single segment of content", excludeUntil: 1 / 0 }), void this.trigger("error");
    this.waitingOnRemove_ = true, this.callQueue_.push(this.appendToSourceBuffer_.bind(this, { segmentInfo: e8, type: t3, bytes: i6 }));
    const u5 = this.currentTime_() - Dp;
    this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${u5}`), this.remove(0, u5, () => {
      this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Dp}s`), this.waitingOnRemove_ = false, this.quotaExceededErrorRetryTimeout_ = b4.setTimeout(() => {
        this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"), this.quotaExceededErrorRetryTimeout_ = null, this.processCallQueue_();
      }, 1e3 * Dp);
    }, true);
  }
  handleAppendError_({ segmentInfo: e8, type: t3, bytes: i6 }, s6) {
    s6 && (s6.code !== md ? (this.logger_("Received non QUOTA_EXCEEDED_ERR on append", s6), this.error({ message: `${t3} append of ${i6.length}b failed for segment #${e8.mediaIndex} in playlist ${e8.playlist.id}`, metadata: { errorType: du.Error.StreamingFailedToAppendSegment } }), this.trigger("appenderror")) : this.handleQuotaExceededError_({ segmentInfo: e8, type: t3, bytes: i6 }));
  }
  appendToSourceBuffer_({ segmentInfo: e8, type: t3, initSegment: i6, data: s6, bytes: n5 }) {
    if (!n5) {
      const e9 = [s6];
      let t4 = s6.byteLength;
      i6 && (e9.unshift(i6), t4 += i6.byteLength), n5 = pp({ bytes: t4, segments: e9 });
    }
    const r4 = { segmentInfo: Wp({ type: this.loaderType_, segment: e8 }) };
    this.trigger({ type: "segmentappendstart", metadata: r4 }), this.sourceUpdater_.appendBuffer({ segmentInfo: e8, type: t3, bytes: n5 }, this.handleAppendError_.bind(this, { segmentInfo: e8, type: t3, bytes: n5 }));
  }
  handleSegmentTimingInfo_(e8, t3, i6) {
    if (!this.pendingSegment_ || t3 !== this.pendingSegment_.requestId) return;
    const s6 = this.pendingSegment_.segment, n5 = `${e8}TimingInfo`;
    s6[n5] || (s6[n5] = {}), s6[n5].transmuxerPrependedSeconds = i6.prependedContentDuration || 0, s6[n5].transmuxedPresentationStart = i6.start.presentation, s6[n5].transmuxedDecodeStart = i6.start.decode, s6[n5].transmuxedPresentationEnd = i6.end.presentation, s6[n5].transmuxedDecodeEnd = i6.end.decode, s6[n5].baseMediaDecodeTime = i6.baseMediaDecodeTime;
  }
  appendData_(e8, t3) {
    const { type: i6, data: s6 } = t3;
    if (!s6 || !s6.byteLength) return;
    if ("audio" === i6 && this.audioDisabled_) return;
    const n5 = this.getInitSegmentAndUpdateState_({ type: i6, initSegment: t3.initSegment, playlist: e8.playlist, map: e8.isFmp4 ? e8.segment.map : null });
    this.appendToSourceBuffer_({ segmentInfo: e8, type: i6, initSegment: n5, data: s6 });
  }
  loadSegment_(e8) {
    if (this.state = "WAITING", this.pendingSegment_ = e8, this.trimBackBuffer_(e8), "number" == typeof e8.timestampOffset && this.transmuxer_ && this.transmuxer_.postMessage({ action: "clearAllMp4Captions" }), !this.hasEnoughInfoToLoad_()) return $p(this), void this.loadQueue_.push(() => {
      const t3 = Fe({}, e8, { forceTimestampOffset: true });
      Fe(e8, this.generateSegmentInfo_(t3)), this.isPendingTimestampOffset_ = false, this.updateTransmuxerAndRequestSegment_(e8);
    });
    this.updateTransmuxerAndRequestSegment_(e8);
  }
  updateTransmuxerAndRequestSegment_(e8) {
    this.shouldUpdateTransmuxerTimestampOffset_(e8.timestampOffset) && (this.gopBuffer_.length = 0, e8.gopsToAlignWith = [], this.timeMapping_ = 0, this.transmuxer_.postMessage({ action: "reset" }), this.transmuxer_.postMessage({ action: "setTimestampOffset", timestampOffset: e8.timestampOffset }));
    const t3 = this.createSimplifiedSegmentObj_(e8), i6 = this.isEndOfStream_(e8.mediaIndex, e8.playlist, e8.partIndex), s6 = null !== this.mediaIndex, n5 = e8.timeline !== this.currentTimeline_ && e8.timeline > 0, r4 = i6 || s6 && n5;
    this.logger_(`Requesting
${mp(e8.uri)}
${Mp(e8)}`), t3.map && !t3.map.bytes && (this.logger_("going to request init segment."), this.appendInitSegment_ = { video: true, audio: true }), e8.abortRequests = tp({ xhr: this.vhs_.xhr, xhrOptions: this.xhrOptions_, decryptionWorker: this.decrypter_, segment: t3, abortFn: this.handleAbort_.bind(this, e8), progressFn: this.handleProgress_.bind(this), trackInfoFn: this.handleTrackInfo_.bind(this), timingInfoFn: this.handleTimingInfo_.bind(this), videoSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, "video", e8.requestId), audioSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, "audio", e8.requestId), captionsFn: this.handleCaptions_.bind(this), isEndOfTimeline: r4, endedTimelineFn: () => {
      this.logger_("received endedtimeline callback");
    }, id3Fn: this.handleId3_.bind(this), dataFn: this.handleData_.bind(this), doneFn: this.segmentRequestFinished_.bind(this), onTransmuxerLog: ({ message: t4, level: i7, stream: s7 }) => {
      this.logger_(`${Mp(e8)} logged from transmuxer stream ${s7} as a ${i7}: ${t4}`);
    }, triggerSegmentEventFn: ({ type: e9, segment: t4, keyInfo: i7, trackInfo: s7, timingInfo: n6 }) => {
      const r5 = { segmentInfo: Wp({ segment: t4 }) };
      i7 && (r5.keyInfo = i7), s7 && (r5.trackInfo = s7), n6 && (r5.timingInfo = n6), this.trigger({ type: e9, metadata: r5 });
    } });
  }
  trimBackBuffer_(e8) {
    const t3 = Rp(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10);
    t3 > 0 && this.remove(0, t3);
  }
  createSimplifiedSegmentObj_(e8) {
    const t3 = e8.segment, i6 = e8.part, s6 = e8.segment.key || e8.segment.map && e8.segment.map.key, n5 = e8.segment.map && !e8.segment.map.bytes, r4 = { resolvedUri: i6 ? i6.resolvedUri : t3.resolvedUri, byterange: i6 ? i6.byterange : t3.byterange, requestId: e8.requestId, transmuxer: e8.transmuxer, audioAppendStart: e8.audioAppendStart, gopsToAlignWith: e8.gopsToAlignWith, part: e8.part, type: this.loaderType_, start: e8.startOfSegment, duration: e8.duration, isEncrypted: s6, isMediaInitialization: n5 }, a6 = e8.playlist.segments[e8.mediaIndex - 1];
    if (a6 && a6.timeline === t3.timeline && (a6.videoTimingInfo ? r4.baseStartTime = a6.videoTimingInfo.transmuxedDecodeEnd : a6.audioTimingInfo && (r4.baseStartTime = a6.audioTimingInfo.transmuxedDecodeEnd)), t3.key) {
      const i7 = t3.key.iv || new Uint32Array([0, 0, 0, e8.mediaIndex + e8.playlist.mediaSequence]);
      r4.key = this.segmentKey(t3.key), r4.key.iv = i7;
    }
    return t3.map && (r4.map = this.initSegmentForMap(t3.map)), r4;
  }
  saveTransferStats_(e8) {
    this.mediaRequests += 1, e8 && (this.mediaBytesTransferred += e8.bytesReceived, this.mediaTransferDuration += e8.roundTripTime);
  }
  saveBandwidthRelatedStats_(e8, t3) {
    if (this.pendingSegment_.byteLength = t3.bytesReceived, e8 < Op) return void this.logger_(`Ignoring segment's bandwidth because its duration of ${e8} is less than the min to record ${Op}`);
    const i6 = { bandwidthInfo: { from: this.bandwidth, to: t3.bandwidth } };
    this.trigger({ type: "bandwidthupdated", metadata: i6 }), this.bandwidth = t3.bandwidth, this.roundTrip = t3.roundTripTime;
  }
  handleTimeout_() {
    this.mediaRequestsTimedout += 1, this.bandwidth = 1, this.roundTrip = NaN, this.trigger("bandwidthupdate"), this.trigger("timeout");
  }
  segmentRequestFinished_(e8, t3, i6) {
    if (this.callQueue_.length) return void this.callQueue_.push(this.segmentRequestFinished_.bind(this, e8, t3, i6));
    if (this.saveTransferStats_(t3.stats), !this.pendingSegment_) return;
    if (t3.requestId !== this.pendingSegment_.requestId) return;
    if (e8) {
      if (this.pendingSegment_ = null, this.state = "READY", e8.code === Mc.ABORTED) return;
      return this.pause(), e8.code === Mc.TIMEOUT ? void this.handleTimeout_() : (this.mediaRequestsErrored += 1, this.error(e8), void this.trigger("error"));
    }
    const s6 = this.pendingSegment_;
    this.saveBandwidthRelatedStats_(s6.duration, t3.stats), s6.endOfAllRequests = t3.endOfAllRequests, i6.gopInfo && (this.gopBuffer_ = kp(this.gopBuffer_, i6.gopInfo, this.safeAppend_)), this.state = "APPENDING", this.trigger("appending"), this.waitForAppendsToComplete_(s6);
  }
  setTimeMapping_(e8) {
    const t3 = this.syncController_.mappingForTimeline(e8);
    null !== t3 && (this.timeMapping_ = t3);
  }
  updateMediaSecondsLoaded_(e8) {
    "number" == typeof e8.start && "number" == typeof e8.end ? this.mediaSecondsLoaded += e8.end - e8.start : this.mediaSecondsLoaded += e8.duration;
  }
  shouldUpdateTransmuxerTimestampOffset_(e8) {
    return null !== e8 && ("main" === this.loaderType_ && e8 !== this.sourceUpdater_.videoTimestampOffset() || !this.audioDisabled_ && e8 !== this.sourceUpdater_.audioTimestampOffset());
  }
  trueSegmentStart_({ currentStart: e8, playlist: t3, mediaIndex: i6, firstVideoFrameTimeForData: s6, currentVideoTimestampOffset: n5, useVideoTimingInfo: r4, videoTimingInfo: a6, audioTimingInfo: o4 }) {
    if (void 0 !== e8) return e8;
    if (!r4) return o4.start;
    const l7 = t3.segments[i6 - 1];
    return 0 !== i6 && l7 && void 0 !== l7.start && l7.end === s6 + n5 ? a6.start : s6;
  }
  waitForAppendsToComplete_(e8) {
    const t3 = this.getCurrentMediaInfo_(e8);
    if (!t3) return this.error({ message: "No starting media returned, likely due to an unsupported media format.", playlistExclusionDuration: 1 / 0 }), void this.trigger("error");
    const { hasAudio: i6, hasVideo: s6, isMuxed: n5 } = t3, r4 = "main" === this.loaderType_ && s6, a6 = !this.audioDisabled_ && i6 && !n5;
    if (e8.waitingOnAppends = 0, !e8.hasAppendedData_) return e8.timingInfo || "number" != typeof e8.timestampOffset || (this.isPendingTimestampOffset_ = true), e8.timingInfo = { start: 0 }, e8.waitingOnAppends++, this.isPendingTimestampOffset_ || (this.updateSourceBufferTimestampOffset_(e8), this.processMetadataQueue_()), void this.checkAppendsDone_(e8);
    r4 && e8.waitingOnAppends++, a6 && e8.waitingOnAppends++, r4 && this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this, e8)), a6 && this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this, e8));
  }
  checkAppendsDone_(e8) {
    this.checkForAbort_(e8.requestId) || (e8.waitingOnAppends--, 0 === e8.waitingOnAppends && this.handleAppendsDone_());
  }
  checkForIllegalMediaSwitch(e8) {
    const t3 = Np(this.loaderType_, this.getCurrentMediaInfo_(), e8);
    return !!t3 && (this.error({ message: t3, playlistExclusionDuration: 1 / 0 }), this.trigger("error"), true);
  }
  updateSourceBufferTimestampOffset_(e8) {
    if (null === e8.timestampOffset || "number" != typeof e8.timingInfo.start || e8.changedTimestampOffset || "main" !== this.loaderType_) return;
    let t3 = false;
    e8.timestampOffset -= this.getSegmentStartTimeForTimestampOffsetCalculation_({ videoTimingInfo: e8.segment.videoTimingInfo, audioTimingInfo: e8.segment.audioTimingInfo, timingInfo: e8.timingInfo }), e8.changedTimestampOffset = true, e8.timestampOffset !== this.sourceUpdater_.videoTimestampOffset() && (this.sourceUpdater_.videoTimestampOffset(e8.timestampOffset), t3 = true), e8.timestampOffset !== this.sourceUpdater_.audioTimestampOffset() && (this.sourceUpdater_.audioTimestampOffset(e8.timestampOffset), t3 = true), t3 && this.trigger("timestampoffset");
  }
  getSegmentStartTimeForTimestampOffsetCalculation_({ videoTimingInfo: e8, audioTimingInfo: t3, timingInfo: i6 }) {
    return this.useDtsForTimestampOffset_ ? e8 && "number" == typeof e8.transmuxedDecodeStart ? e8.transmuxedDecodeStart : t3 && "number" == typeof t3.transmuxedDecodeStart ? t3.transmuxedDecodeStart : i6.start : i6.start;
  }
  updateTimingInfoEnd_(e8) {
    e8.timingInfo = e8.timingInfo || {};
    const t3 = this.getMediaInfo_(), i6 = "main" === this.loaderType_ && t3 && t3.hasVideo && e8.videoTimingInfo ? e8.videoTimingInfo : e8.audioTimingInfo;
    i6 && (e8.timingInfo.end = "number" == typeof i6.end ? i6.end : i6.start + e8.duration);
  }
  handleAppendsDone_() {
    if (this.pendingSegment_) {
      const e9 = { segmentInfo: Wp({ type: this.loaderType_, segment: this.pendingSegment_ }) };
      this.trigger({ type: "appendsdone", metadata: e9 });
    }
    if (!this.pendingSegment_) return this.state = "READY", void (this.paused() || this.monitorBuffer_());
    const e8 = this.pendingSegment_;
    e8.part && e8.part.syncInfo ? e8.part.syncInfo.markAppended() : e8.segment.syncInfo && e8.segment.syncInfo.markAppended(), this.updateTimingInfoEnd_(e8), this.shouldSaveSegmentTimingInfo_ && this.syncController_.saveSegmentTimingInfo({ segmentInfo: e8, shouldSaveTimelineMapping: "main" === this.loaderType_ });
    const t3 = zp(e8, this.sourceType_);
    if (t3 && ("warn" === t3.severity ? du.log.warn(t3.message) : this.logger_(t3.message)), this.recordThroughput_(e8), this.pendingSegment_ = null, this.state = "READY", e8.isSyncRequest && (this.trigger("syncinfoupdate"), !e8.hasAppendedData_)) return void this.logger_(`Throwing away un-appended sync request ${Mp(e8)}`);
    this.logger_(`Appended ${Mp(e8)}`), this.addSegmentMetadataCue_(e8), this.fetchAtBuffer_ = true, this.currentTimeline_ !== e8.timeline && (this.timelineChangeController_.lastTimelineChange({ type: this.loaderType_, from: this.currentTimeline_, to: e8.timeline }), "main" !== this.loaderType_ || this.audioDisabled_ || this.timelineChangeController_.lastTimelineChange({ type: "audio", from: this.currentTimeline_, to: e8.timeline })), this.currentTimeline_ = e8.timeline, this.trigger("syncinfoupdate");
    const i6 = e8.segment, s6 = e8.part, n5 = i6.end && this.currentTime_() - i6.end > 3 * e8.playlist.targetDuration, r4 = s6 && s6.end && this.currentTime_() - s6.end > 3 * e8.playlist.partTargetDuration;
    if (n5 || r4) return this.logger_(`bad ${n5 ? "segment" : "part"} ${Mp(e8)}`), void this.resetEverything();
    null !== this.mediaIndex && this.trigger("bandwidthupdate"), this.trigger("progress"), this.mediaIndex = e8.mediaIndex, this.partIndex = e8.partIndex, this.isEndOfStream_(e8.mediaIndex, e8.playlist, e8.partIndex) && this.endOfStream(), this.trigger("appended"), e8.hasAppendedData_ && this.mediaAppends++, this.paused() || this.monitorBuffer_();
  }
  recordThroughput_(e8) {
    if (e8.duration < Op) return void this.logger_(`Ignoring segment's throughput because its duration of ${e8.duration} is less than the min to record ${Op}`);
    const t3 = this.throughput.rate, i6 = Date.now() - e8.endOfAllRequests + 1, s6 = Math.floor(e8.byteLength / i6 * 8 * 1e3);
    this.throughput.rate += (s6 - t3) / ++this.throughput.count;
  }
  addSegmentMetadataCue_(e8) {
    if (!this.segmentMetadataTrack_) return;
    const t3 = e8.segment, i6 = t3.start, s6 = t3.end;
    if (!Lp(i6) || !Lp(s6)) return;
    Ep(i6, s6, this.segmentMetadataTrack_);
    const n5 = b4.WebKitDataCue || b4.VTTCue, r4 = { custom: t3.custom, dateTimeObject: t3.dateTimeObject, dateTimeString: t3.dateTimeString, programDateTime: t3.programDateTime, bandwidth: e8.playlist.attributes.BANDWIDTH, resolution: e8.playlist.attributes.RESOLUTION, codecs: e8.playlist.attributes.CODECS, byteLength: e8.byteLength, uri: e8.uri, timeline: e8.timeline, playlist: e8.playlist.id, start: i6, end: s6 }, a6 = new n5(i6, s6, JSON.stringify(r4));
    a6.value = r4, this.segmentMetadataTrack_.addCue(a6);
  }
};
function Xp() {
}
var Kp = function(e8) {
  return "string" != typeof e8 ? e8 : e8.replace(/./, (e9) => e9.toUpperCase());
};
var Yp = ["video", "audio"];
var Qp = (e8, t3) => {
  const i6 = t3[`${e8}Buffer`];
  return i6 && i6.updating || t3.queuePending[e8];
};
var Jp = (e8, t3) => {
  for (let i6 = 0; i6 < t3.length; i6++) {
    const s6 = t3[i6];
    if ("mediaSource" === s6.type) return null;
    if (s6.type === e8) return i6;
  }
  return null;
};
var Zp = (e8, t3) => {
  if (0 === t3.queue.length) return;
  let i6 = 0, s6 = t3.queue[i6];
  if ("mediaSource" !== s6.type) {
    if ("mediaSource" !== e8 && t3.ready() && "closed" !== t3.mediaSource.readyState && !Qp(e8, t3)) {
      if (s6.type !== e8) {
        if (i6 = Jp(e8, t3.queue), null === i6) return;
        s6 = t3.queue[i6];
      }
      return t3.queue.splice(i6, 1), t3.queuePending[e8] = s6, s6.action(e8, t3), s6.doneFn ? void 0 : (t3.queuePending[e8] = null, void Zp(e8, t3));
    }
  } else t3.updating() || "closed" === t3.mediaSource.readyState || (t3.queue.shift(), s6.action(t3), s6.doneFn && s6.doneFn(), Zp("audio", t3), Zp("video", t3));
};
var em = (e8, t3) => {
  const i6 = t3[`${e8}Buffer`], s6 = Kp(e8);
  i6 && (i6.removeEventListener("updateend", t3[`on${s6}UpdateEnd_`]), i6.removeEventListener("error", t3[`on${s6}Error_`]), t3.codecs[e8] = null, t3[`${e8}Buffer`] = null);
};
var tm = (e8, t3) => e8 && t3 && -1 !== Array.prototype.indexOf.call(e8.sourceBuffers, t3);
var im = { appendBuffer: (e8, t3, i6) => (s6, n5) => {
  const r4 = n5[`${s6}Buffer`];
  if (tm(n5.mediaSource, r4)) {
    n5.logger_(`Appending segment ${t3.mediaIndex}'s ${e8.length} bytes to ${s6}Buffer`);
    try {
      r4.appendBuffer(e8);
    } catch (a6) {
      n5.logger_(`Error with code ${a6.code} ` + (a6.code === md ? "(QUOTA_EXCEEDED_ERR) " : "") + `when appending segment ${t3.mediaIndex} to ${s6}Buffer`), n5.queuePending[s6] = null, i6(a6);
    }
  }
}, remove: (e8, t3) => (i6, s6) => {
  const n5 = s6[`${i6}Buffer`];
  if (tm(s6.mediaSource, n5)) {
    s6.logger_(`Removing ${e8} to ${t3} from ${i6}Buffer`);
    try {
      n5.remove(e8, t3);
    } catch (r4) {
      s6.logger_(`Remove ${e8} to ${t3} from ${i6}Buffer failed`);
    }
  }
}, timestampOffset: (e8) => (t3, i6) => {
  const s6 = i6[`${t3}Buffer`];
  tm(i6.mediaSource, s6) && (i6.logger_(`Setting ${t3}timestampOffset to ${e8}`), s6.timestampOffset = e8);
}, callback: (e8) => (t3, i6) => {
  e8();
}, endOfStream: (e8) => (t3) => {
  if ("open" === t3.mediaSource.readyState) {
    t3.logger_(`Calling mediaSource endOfStream(${e8 || ""})`);
    try {
      t3.mediaSource.endOfStream(e8);
    } catch (i6) {
      du.log.warn("Failed to call media source endOfStream", i6);
    }
  }
}, duration: (e8) => (t3) => {
  t3.logger_(`Setting mediaSource duration to ${e8}`);
  try {
    t3.mediaSource.duration = e8;
  } catch (i6) {
    du.log.warn("Failed to set media source duration", i6);
  }
}, abort: () => (e8, t3) => {
  if ("open" !== t3.mediaSource.readyState) return;
  const i6 = t3[`${e8}Buffer`];
  if (tm(t3.mediaSource, i6)) {
    t3.logger_(`calling abort on ${e8}Buffer`);
    try {
      i6.abort();
    } catch (s6) {
      du.log.warn(`Failed to abort on ${e8}Buffer`, s6);
    }
  }
}, addSourceBuffer: (e8, t3) => (i6) => {
  const s6 = Kp(e8), n5 = ct(t3);
  i6.logger_(`Adding ${e8}Buffer with codec ${t3} to mediaSource`);
  const r4 = i6.mediaSource.addSourceBuffer(n5);
  r4.addEventListener("updateend", i6[`on${s6}UpdateEnd_`]), r4.addEventListener("error", i6[`on${s6}Error_`]), i6.codecs[e8] = t3, i6[`${e8}Buffer`] = r4;
}, removeSourceBuffer: (e8) => (t3) => {
  const i6 = t3[`${e8}Buffer`];
  if (em(e8, t3), tm(t3.mediaSource, i6)) {
    t3.logger_(`Removing ${e8}Buffer with codec ${t3.codecs[e8]} from mediaSource`);
    try {
      t3.mediaSource.removeSourceBuffer(i6);
    } catch (s6) {
      du.log.warn(`Failed to removeSourceBuffer ${e8}Buffer`, s6);
    }
  }
}, changeType: (e8) => (t3, i6) => {
  const s6 = i6[`${t3}Buffer`], n5 = ct(e8);
  if (!tm(i6.mediaSource, s6)) return;
  const r4 = e8.substring(0, e8.indexOf(".")), a6 = i6.codecs[t3];
  if (a6.substring(0, a6.indexOf(".")) === r4) return;
  const o4 = { codecsChangeInfo: { from: a6, to: e8 } };
  i6.trigger({ type: "codecschange", metadata: o4 }), i6.logger_(`changing ${t3}Buffer codec from ${a6} to ${e8}`);
  try {
    s6.changeType(n5), i6.codecs[t3] = e8;
  } catch (l7) {
    o4.errorType = du.Error.StreamingCodecsChangeError, o4.error = l7, l7.metadata = o4, i6.error_ = l7, i6.trigger("error"), du.log.warn(`Failed to changeType on ${t3}Buffer`, l7);
  }
} };
var sm = ({ type: e8, sourceUpdater: t3, action: i6, doneFn: s6, name: n5 }) => {
  t3.queue.push({ type: e8, action: i6, doneFn: s6, name: n5 }), Zp(e8, t3);
};
var nm = (e8, t3) => (i6) => {
  const s6 = Su(t3[`${e8}Buffered`]());
  if (t3.logger_(`received "updateend" event for ${e8} Source Buffer: `, s6), t3.queuePending[e8]) {
    const i7 = t3.queuePending[e8].doneFn;
    t3.queuePending[e8] = null, i7 && i7(t3[`${e8}Error_`]);
  }
  Zp(e8, t3);
};
var rm = class extends du.EventTarget {
  constructor(e8) {
    super(), this.mediaSource = e8, this.sourceopenListener_ = () => Zp("mediaSource", this), this.mediaSource.addEventListener("sourceopen", this.sourceopenListener_), this.logger_ = vu("SourceUpdater"), this.audioTimestampOffset_ = 0, this.videoTimestampOffset_ = 0, this.queue = [], this.queuePending = { audio: null, video: null }, this.delayedAudioAppendQueue_ = [], this.videoAppendQueued_ = false, this.codecs = {}, this.onVideoUpdateEnd_ = nm("video", this), this.onAudioUpdateEnd_ = nm("audio", this), this.onVideoError_ = (e9) => {
      this.videoError_ = e9;
    }, this.onAudioError_ = (e9) => {
      this.audioError_ = e9;
    }, this.createdSourceBuffers_ = false, this.initializedEme_ = false, this.triggeredReady_ = false;
  }
  initializedEme() {
    this.initializedEme_ = true, this.triggerReady();
  }
  hasCreatedSourceBuffers() {
    return this.createdSourceBuffers_;
  }
  hasInitializedAnyEme() {
    return this.initializedEme_;
  }
  ready() {
    return this.hasCreatedSourceBuffers() && this.hasInitializedAnyEme();
  }
  createSourceBuffers(e8) {
    this.hasCreatedSourceBuffers() || (this.addOrChangeSourceBuffers(e8), this.createdSourceBuffers_ = true, this.trigger("createdsourcebuffers"), this.triggerReady());
  }
  triggerReady() {
    this.ready() && !this.triggeredReady_ && (this.triggeredReady_ = true, this.trigger("ready"));
  }
  addSourceBuffer(e8, t3) {
    sm({ type: "mediaSource", sourceUpdater: this, action: im.addSourceBuffer(e8, t3), name: "addSourceBuffer" });
  }
  abort(e8) {
    sm({ type: e8, sourceUpdater: this, action: im.abort(e8), name: "abort" });
  }
  removeSourceBuffer(e8) {
    this.canRemoveSourceBuffer() ? sm({ type: "mediaSource", sourceUpdater: this, action: im.removeSourceBuffer(e8), name: "removeSourceBuffer" }) : du.log.error("removeSourceBuffer is not supported!");
  }
  canRemoveSourceBuffer() {
    return !du.browser.IS_FIREFOX && b4.MediaSource && b4.MediaSource.prototype && "function" == typeof b4.MediaSource.prototype.removeSourceBuffer;
  }
  static canChangeType() {
    return b4.SourceBuffer && b4.SourceBuffer.prototype && "function" == typeof b4.SourceBuffer.prototype.changeType;
  }
  canChangeType() {
    return this.constructor.canChangeType();
  }
  changeType(e8, t3) {
    this.canChangeType() ? sm({ type: e8, sourceUpdater: this, action: im.changeType(t3), name: "changeType" }) : du.log.error("changeType is not supported!");
  }
  addOrChangeSourceBuffers(e8) {
    if (!e8 || "object" != typeof e8 || 0 === Object.keys(e8).length) throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");
    Object.keys(e8).forEach((t3) => {
      const i6 = e8[t3];
      if (!this.hasCreatedSourceBuffers()) return this.addSourceBuffer(t3, i6);
      this.canChangeType() && this.changeType(t3, i6);
    });
  }
  appendBuffer(e8, t3) {
    const { segmentInfo: i6, type: s6, bytes: n5 } = e8;
    if (this.processedAppend_ = true, "audio" === s6 && this.videoBuffer && !this.videoAppendQueued_) return this.delayedAudioAppendQueue_.push([e8, t3]), void this.logger_(`delayed audio append of ${n5.length} until video append`);
    const r4 = t3;
    if (sm({ type: s6, sourceUpdater: this, action: im.appendBuffer(n5, i6 || { mediaIndex: -1 }, r4), doneFn: t3, name: "appendBuffer" }), "video" === s6) {
      if (this.videoAppendQueued_ = true, !this.delayedAudioAppendQueue_.length) return;
      const e9 = this.delayedAudioAppendQueue_.slice();
      this.logger_(`queuing delayed audio ${e9.length} appendBuffers`), this.delayedAudioAppendQueue_.length = 0, e9.forEach((e10) => {
        this.appendBuffer.apply(this, e10);
      });
    }
  }
  audioBuffered() {
    return tm(this.mediaSource, this.audioBuffer) && this.audioBuffer.buffered ? this.audioBuffer.buffered : Tu();
  }
  videoBuffered() {
    return tm(this.mediaSource, this.videoBuffer) && this.videoBuffer.buffered ? this.videoBuffer.buffered : Tu();
  }
  buffered() {
    const e8 = tm(this.mediaSource, this.videoBuffer) ? this.videoBuffer : null, t3 = tm(this.mediaSource, this.audioBuffer) ? this.audioBuffer : null;
    return t3 && !e8 ? this.audioBuffered() : e8 && !t3 ? this.videoBuffered() : Au(this.audioBuffered(), this.videoBuffered());
  }
  setDuration(e8, t3 = Xp) {
    sm({ type: "mediaSource", sourceUpdater: this, action: im.duration(e8), name: "duration", doneFn: t3 });
  }
  endOfStream(e8 = null, t3 = Xp) {
    "string" != typeof e8 && (e8 = void 0), sm({ type: "mediaSource", sourceUpdater: this, action: im.endOfStream(e8), name: "endOfStream", doneFn: t3 });
  }
  removeAudio(e8, t3, i6 = Xp) {
    this.audioBuffered().length && 0 !== this.audioBuffered().end(0) ? sm({ type: "audio", sourceUpdater: this, action: im.remove(e8, t3), doneFn: i6, name: "remove" }) : i6();
  }
  removeVideo(e8, t3, i6 = Xp) {
    this.videoBuffered().length && 0 !== this.videoBuffered().end(0) ? sm({ type: "video", sourceUpdater: this, action: im.remove(e8, t3), doneFn: i6, name: "remove" }) : i6();
  }
  updating() {
    return !(!Qp("audio", this) && !Qp("video", this));
  }
  audioTimestampOffset(e8) {
    return void 0 !== e8 && this.audioBuffer && this.audioTimestampOffset_ !== e8 && (sm({ type: "audio", sourceUpdater: this, action: im.timestampOffset(e8), name: "timestampOffset" }), this.audioTimestampOffset_ = e8), this.audioTimestampOffset_;
  }
  videoTimestampOffset(e8) {
    return void 0 !== e8 && this.videoBuffer && this.videoTimestampOffset_ !== e8 && (sm({ type: "video", sourceUpdater: this, action: im.timestampOffset(e8), name: "timestampOffset" }), this.videoTimestampOffset_ = e8), this.videoTimestampOffset_;
  }
  audioQueueCallback(e8) {
    this.audioBuffer && sm({ type: "audio", sourceUpdater: this, action: im.callback(e8), name: "callback" });
  }
  videoQueueCallback(e8) {
    this.videoBuffer && sm({ type: "video", sourceUpdater: this, action: im.callback(e8), name: "callback" });
  }
  dispose() {
    this.trigger("dispose"), Yp.forEach((e8) => {
      this.abort(e8), this.canRemoveSourceBuffer() ? this.removeSourceBuffer(e8) : this[`${e8}QueueCallback`](() => em(e8, this));
    }), this.videoAppendQueued_ = false, this.delayedAudioAppendQueue_.length = 0, this.sourceopenListener_ && this.mediaSource.removeEventListener("sourceopen", this.sourceopenListener_), this.off();
  }
};
var am = (e8) => decodeURIComponent(escape(String.fromCharCode.apply(null, e8)));
var om = (e8) => {
  const t3 = new Uint8Array(e8);
  return Array.from(t3).map((e9) => e9.toString(16).padStart(2, "0")).join("");
};
var lm = new Uint8Array("\n\n".split("").map((e8) => e8.charCodeAt(0)));
var hm = class extends Error {
  constructor() {
    super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.");
  }
};
var um = class extends Gp {
  constructor(e8, t3 = {}) {
    super(e8, t3), this.mediaSource_ = null, this.subtitlesTrack_ = null, this.featuresNativeTextTracks_ = e8.featuresNativeTextTracks, this.loadVttJs = e8.loadVttJs, this.shouldSaveSegmentTimingInfo_ = false;
  }
  buffered_() {
    if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues || !this.subtitlesTrack_.cues.length) return Tu();
    const e8 = this.subtitlesTrack_.cues;
    return Tu([[e8[0].startTime, e8[e8.length - 1].startTime]]);
  }
  initSegmentForMap(e8, t3 = false) {
    if (!e8) return null;
    const i6 = Vd(e8);
    let s6 = this.initSegments_[i6];
    if (t3 && !s6 && e8.bytes) {
      const t4 = lm.byteLength + e8.bytes.byteLength, n5 = new Uint8Array(t4);
      n5.set(e8.bytes), n5.set(lm, e8.bytes.byteLength), this.initSegments_[i6] = s6 = { resolvedUri: e8.resolvedUri, byterange: e8.byterange, bytes: n5 };
    }
    return s6 || e8;
  }
  couldBeginLoading_() {
    return this.playlist_ && this.subtitlesTrack_ && !this.paused();
  }
  init_() {
    return this.state = "READY", this.resetEverything(), this.monitorBuffer_();
  }
  track(e8) {
    return void 0 === e8 || (this.subtitlesTrack_ = e8, "INIT" === this.state && this.couldBeginLoading_() && this.init_()), this.subtitlesTrack_;
  }
  remove(e8, t3) {
    Ep(e8, t3, this.subtitlesTrack_);
  }
  fillBuffer_() {
    const e8 = this.chooseNextRequest_();
    if (e8) {
      if (null === this.syncController_.timestampOffsetForTimeline(e8.timeline)) {
        const e9 = () => {
          this.state = "READY", this.paused() || this.monitorBuffer_();
        };
        return this.syncController_.one("timestampoffset", e9), void (this.state = "WAITING_ON_TIMELINE");
      }
      this.loadSegment_(e8);
    }
  }
  timestampOffsetForSegment_() {
    return null;
  }
  chooseNextRequest_() {
    return this.skipEmptySegments_(super.chooseNextRequest_());
  }
  skipEmptySegments_(e8) {
    for (; e8 && e8.segment.empty; ) {
      if (e8.mediaIndex + 1 >= e8.playlist.segments.length) {
        e8 = null;
        break;
      }
      e8 = this.generateSegmentInfo_({ playlist: e8.playlist, mediaIndex: e8.mediaIndex + 1, startOfSegment: e8.startOfSegment + e8.duration, isSyncRequest: e8.isSyncRequest });
    }
    return e8;
  }
  stopForError(e8) {
    this.error(e8), this.state = "READY", this.pause(), this.trigger("error");
  }
  segmentRequestFinished_(e8, t3, i6) {
    if (!this.subtitlesTrack_) return void (this.state = "READY");
    if (this.saveTransferStats_(t3.stats), !this.pendingSegment_) return this.state = "READY", void (this.mediaRequestsAborted += 1);
    if (e8) return e8.code === Mc.TIMEOUT && this.handleTimeout_(), e8.code === Mc.ABORTED ? this.mediaRequestsAborted += 1 : this.mediaRequestsErrored += 1, void this.stopForError(e8);
    const s6 = this.pendingSegment_, n5 = i6.mp4VttCues && i6.mp4VttCues.length;
    n5 && (s6.mp4VttCues = i6.mp4VttCues), this.saveBandwidthRelatedStats_(s6.duration, t3.stats), t3.key && this.segmentKey(t3.key, true), this.state = "APPENDING", this.trigger("appending");
    const r4 = s6.segment;
    if (r4.map && (r4.map.bytes = t3.map.bytes), s6.bytes = t3.bytes, "function" != typeof b4.WebVTT && "function" == typeof this.loadVttJs) return this.state = "WAITING_ON_VTTJS", void this.loadVttJs().then(() => this.segmentRequestFinished_(e8, t3, i6), () => this.stopForError({ message: "Error loading vtt.js" }));
    r4.requested = true;
    try {
      this.parseVTTCues_(s6);
    } catch (a6) {
      return void this.stopForError({ message: a6.message, metadata: { errorType: du.Error.StreamingVttParserError, error: a6 } });
    }
    if (n5 || this.updateTimeMapping_(s6, this.syncController_.timelines[s6.timeline], this.playlist_), s6.cues.length ? s6.timingInfo = { start: s6.cues[0].startTime, end: s6.cues[s6.cues.length - 1].endTime } : s6.timingInfo = { start: s6.startOfSegment, end: s6.startOfSegment + s6.duration }, s6.isSyncRequest) return this.trigger("syncinfoupdate"), this.pendingSegment_ = null, void (this.state = "READY");
    s6.byteLength = s6.bytes.byteLength, this.mediaSecondsLoaded += r4.duration, s6.cues.forEach((e9) => {
      this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_ ? new b4.VTTCue(e9.startTime, e9.endTime, e9.text) : e9);
    }), wp(this.subtitlesTrack_), this.handleAppendsDone_();
  }
  handleData_(e8, t3) {
    const i6 = e8 && "vtt" === e8.type, s6 = t3 && "text" === t3.type;
    i6 && s6 && super.handleData_(e8, t3);
  }
  updateTimingInfoEnd_() {
  }
  parseMp4VttCues_(e8) {
    const t3 = null === this.sourceUpdater_.videoTimestampOffset() ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset();
    e8.mp4VttCues.forEach((i6) => {
      const s6 = i6.start + t3, n5 = i6.end + t3, r4 = new b4.VTTCue(s6, n5, i6.cueText);
      i6.settings && i6.settings.split(" ").forEach((e9) => {
        const t4 = e9.split(":"), i7 = t4[0], s7 = t4[1];
        r4[i7] = isNaN(s7) ? s7 : Number(s7);
      }), e8.cues.push(r4);
    });
  }
  parseVTTCues_(e8) {
    let t3, i6 = false;
    if ("function" != typeof b4.WebVTT) throw new hm();
    if (e8.cues = [], e8.timestampmap = { MPEGTS: 0, LOCAL: 0 }, e8.mp4VttCues) return void this.parseMp4VttCues_(e8);
    "function" == typeof b4.TextDecoder ? t3 = new b4.TextDecoder("utf8") : (t3 = b4.WebVTT.StringDecoder(), i6 = true);
    const s6 = new b4.WebVTT.Parser(b4, b4.vttjs, t3);
    if (s6.oncue = e8.cues.push.bind(e8.cues), s6.ontimestampmap = (t4) => {
      e8.timestampmap = t4;
    }, s6.onparsingerror = (e9) => {
      du.log.warn("Error encountered when parsing cues: " + e9.message);
    }, e8.segment.map) {
      let t4 = e8.segment.map.bytes;
      i6 && (t4 = am(t4)), s6.parse(t4);
    }
    let n5 = e8.bytes;
    i6 && (n5 = am(n5)), s6.parse(n5), s6.flush();
  }
  updateTimeMapping_(e8, t3, i6) {
    const s6 = e8.segment;
    if (!t3) return;
    if (!e8.cues.length) return void (s6.empty = true);
    const { MPEGTS: n5, LOCAL: r4 } = e8.timestampmap, a6 = n5 / sn.ONE_SECOND_IN_TS - r4 + t3.mapping;
    if (e8.cues.forEach((e9) => {
      const i7 = e9.endTime - e9.startTime, s7 = this.handleRollover_(e9.startTime + a6, t3.time);
      e9.startTime = Math.max(s7, 0), e9.endTime = Math.max(s7 + i7, 0);
    }), !i6.syncInfo) {
      const t4 = e8.cues[0].startTime, n6 = e8.cues[e8.cues.length - 1].startTime;
      i6.syncInfo = { mediaSequence: i6.mediaSequence + e8.mediaIndex, time: Math.min(t4, n6 - s6.duration) };
    }
  }
  handleRollover_(e8, t3) {
    if (null === t3) return e8;
    let i6 = e8 * sn.ONE_SECOND_IN_TS;
    const s6 = t3 * sn.ONE_SECOND_IN_TS;
    let n5;
    for (n5 = s6 < i6 ? -8589934592 : 8589934592; Math.abs(i6 - s6) > 4294967296; ) i6 += n5;
    return i6 / sn.ONE_SECOND_IN_TS;
  }
};
var dm = function(e8, t3) {
  const i6 = e8.cues;
  for (let s6 = 0; s6 < i6.length; s6++) {
    const e9 = i6[s6];
    if (t3 >= e9.adStartTime && t3 <= e9.adEndTime) return e9;
  }
  return null;
};
var cm = function(e8, t3, i6 = 0) {
  if (!e8.segments) return;
  let s6, n5 = i6;
  for (let r4 = 0; r4 < e8.segments.length; r4++) {
    const i7 = e8.segments[r4];
    if (s6 || (s6 = dm(t3, n5 + i7.duration / 2)), s6) {
      if ("cueIn" in i7) {
        s6.endTime = n5, s6.adEndTime = n5, n5 += i7.duration, s6 = null;
        continue;
      }
      if (n5 < s6.endTime) {
        n5 += i7.duration;
        continue;
      }
      s6.endTime += i7.duration;
    } else if ("cueOut" in i7 && (s6 = new b4.VTTCue(n5, n5 + i7.duration, i7.cueOut), s6.adStartTime = n5, s6.adEndTime = n5 + parseFloat(i7.cueOut), t3.addCue(s6)), "cueOutCont" in i7) {
      const [e9, r5] = i7.cueOutCont.split("/").map(parseFloat);
      s6 = new b4.VTTCue(n5, n5 + i7.duration, ""), s6.adStartTime = n5 - e9, s6.adEndTime = s6.adStartTime + r5, t3.addCue(s6);
    }
    n5 += i7.duration;
  }
};
var pm = class {
  constructor({ start: e8, end: t3, segmentIndex: i6, partIndex: s6 = null, appended: n5 = false }) {
    this.start_ = e8, this.end_ = t3, this.segmentIndex_ = i6, this.partIndex_ = s6, this.appended_ = n5;
  }
  isInRange(e8) {
    return e8 >= this.start && e8 < this.end;
  }
  markAppended() {
    this.appended_ = true;
  }
  resetAppendedStatus() {
    this.appended_ = false;
  }
  get isAppended() {
    return this.appended_;
  }
  get start() {
    return this.start_;
  }
  get end() {
    return this.end_;
  }
  get segmentIndex() {
    return this.segmentIndex_;
  }
  get partIndex() {
    return this.partIndex_;
  }
};
var mm = class {
  constructor(e8, t3 = []) {
    this.segmentSyncInfo_ = e8, this.partsSyncInfo_ = t3;
  }
  get segmentSyncInfo() {
    return this.segmentSyncInfo_;
  }
  get partsSyncInfo() {
    return this.partsSyncInfo_;
  }
  get hasPartsSyncInfo() {
    return this.partsSyncInfo_.length > 0;
  }
  resetAppendStatus() {
    this.segmentSyncInfo_.resetAppendedStatus(), this.partsSyncInfo_.forEach((e8) => e8.resetAppendedStatus());
  }
};
var gm = class {
  constructor() {
    this.storage_ = /* @__PURE__ */ new Map(), this.diagnostics_ = "", this.isReliable_ = false, this.start_ = -1 / 0, this.end_ = 1 / 0;
  }
  get start() {
    return this.start_;
  }
  get end() {
    return this.end_;
  }
  get diagnostics() {
    return this.diagnostics_;
  }
  get isReliable() {
    return this.isReliable_;
  }
  resetAppendedStatus() {
    this.storage_.forEach((e8) => e8.resetAppendStatus());
  }
  update(e8, t3) {
    const { mediaSequence: i6, segments: s6 } = e8;
    if (this.isReliable_ = this.isReliablePlaylist_(i6, s6), this.isReliable_) return this.updateStorage_(s6, i6, this.calculateBaseTime_(i6, s6, t3));
  }
  getSyncInfoForTime(e8) {
    for (const { segmentSyncInfo: t3, partsSyncInfo: i6 } of this.storage_.values()) if (i6.length) {
      for (const s6 of i6) if (s6.isInRange(e8)) return s6;
    } else if (t3.isInRange(e8)) return t3;
    return null;
  }
  getSyncInfoForMediaSequence(e8) {
    return this.storage_.get(e8);
  }
  updateStorage_(e8, t3, i6) {
    const s6 = /* @__PURE__ */ new Map();
    let n5 = "\n", r4 = i6, a6 = t3;
    this.start_ = r4, e8.forEach((e9, t4) => {
      const i7 = this.storage_.get(a6), o4 = r4, l7 = o4 + e9.duration, h2 = Boolean(i7 && i7.segmentSyncInfo && i7.segmentSyncInfo.isAppended), u5 = new pm({ start: o4, end: l7, appended: h2, segmentIndex: t4 });
      e9.syncInfo = u5;
      let d2 = r4;
      const c6 = (e9.parts || []).map((e10, s7) => {
        const r5 = d2, o5 = d2 + e10.duration, l8 = Boolean(i7 && i7.partsSyncInfo && i7.partsSyncInfo[s7] && i7.partsSyncInfo[s7].isAppended), h3 = new pm({ start: r5, end: o5, appended: l8, segmentIndex: t4, partIndex: s7 });
        return d2 = o5, n5 += `Media Sequence: ${a6}.${s7} | Range: ${r5} --> ${o5} | Appended: ${l8}
`, e10.syncInfo = h3, h3;
      });
      s6.set(a6, new mm(u5, c6)), n5 += `${mp(e9.resolvedUri)} | Media Sequence: ${a6} | Range: ${o4} --> ${l7} | Appended: ${h2}
`, a6++, r4 = l7;
    }), this.end_ = r4, this.storage_ = s6, this.diagnostics_ = n5;
  }
  calculateBaseTime_(e8, t3, i6) {
    if (!this.storage_.size) return 0;
    if (this.storage_.has(e8)) return this.storage_.get(e8).segmentSyncInfo.start;
    const s6 = Math.min(...this.storage_.keys());
    if (e8 < s6) {
      const i7 = s6 - e8;
      let n5 = this.storage_.get(s6).segmentSyncInfo.start;
      for (let e9 = 0; e9 < i7; e9++) {
        n5 -= t3[e9].duration;
      }
      return n5;
    }
    return i6;
  }
  isReliablePlaylist_(e8, t3) {
    return null != e8 && Array.isArray(t3) && t3.length;
  }
};
var fm = class extends gm {
  constructor(e8) {
    super(), this.parent_ = e8;
  }
  calculateBaseTime_(e8, t3, i6) {
    if (!this.storage_.size) {
      const t4 = this.parent_.getSyncInfoForMediaSequence(e8);
      return t4 ? t4.segmentSyncInfo.start : 0;
    }
    return super.calculateBaseTime_(e8, t3, i6);
  }
};
var ym = 86400;
var _m = [{ name: "VOD", run: (e8, t3, i6, s6, n5) => {
  if (i6 !== 1 / 0) {
    return { time: 0, segmentIndex: 0, partIndex: null };
  }
  return null;
} }, { name: "MediaSequence", run: (e8, t3, i6, s6, n5, r4) => {
  const a6 = e8.getMediaSequenceSync(r4);
  if (!a6) return null;
  if (!a6.isReliable) return null;
  const o4 = a6.getSyncInfoForTime(n5);
  return o4 ? { time: o4.start, partIndex: o4.partIndex, segmentIndex: o4.segmentIndex } : null;
} }, { name: "ProgramDateTime", run: (e8, t3, i6, s6, n5) => {
  if (!Object.keys(e8.timelineToDatetimeMappings).length) return null;
  let r4 = null, a6 = null;
  const o4 = Uu(t3);
  n5 = n5 || 0;
  for (let l7 = 0; l7 < o4.length; l7++) {
    const i7 = o4[t3.endList || 0 === n5 ? l7 : o4.length - (l7 + 1)], s7 = i7.segment, h2 = e8.timelineToDatetimeMappings[s7.timeline];
    if (!h2 || !s7.dateTimeObject) continue;
    let u5 = s7.dateTimeObject.getTime() / 1e3 + h2;
    if (s7.parts && "number" == typeof i7.partIndex) for (let e9 = 0; e9 < i7.partIndex; e9++) u5 += s7.parts[e9].duration;
    const d2 = Math.abs(n5 - u5);
    if (null !== a6 && (0 === d2 || a6 < d2)) break;
    a6 = d2, r4 = { time: u5, segmentIndex: i7.segmentIndex, partIndex: i7.partIndex };
  }
  return r4;
} }, { name: "Segment", run: (e8, t3, i6, s6, n5) => {
  let r4 = null, a6 = null;
  n5 = n5 || 0;
  const o4 = Uu(t3);
  for (let l7 = 0; l7 < o4.length; l7++) {
    const e9 = o4[t3.endList || 0 === n5 ? l7 : o4.length - (l7 + 1)], i7 = e9.segment, h2 = e9.part && e9.part.start || i7 && i7.start;
    if (i7.timeline === s6 && void 0 !== h2) {
      const t4 = Math.abs(n5 - h2);
      if (null !== a6 && a6 < t4) break;
      (!r4 || null === a6 || a6 >= t4) && (a6 = t4, r4 = { time: h2, segmentIndex: e9.segmentIndex, partIndex: e9.partIndex });
    }
  }
  return r4;
} }, { name: "Discontinuity", run: (e8, t3, i6, s6, n5) => {
  let r4 = null;
  if (n5 = n5 || 0, t3.discontinuityStarts && t3.discontinuityStarts.length) {
    let i7 = null;
    for (let s7 = 0; s7 < t3.discontinuityStarts.length; s7++) {
      const a6 = t3.discontinuityStarts[s7], o4 = t3.discontinuitySequence + s7 + 1, l7 = e8.discontinuities[o4];
      if (l7) {
        const e9 = Math.abs(n5 - l7.time);
        if (null !== i7 && i7 < e9) break;
        (!r4 || null === i7 || i7 >= e9) && (i7 = e9, r4 = { time: l7.time, segmentIndex: a6, partIndex: null });
      }
    }
  }
  return r4;
} }, { name: "Playlist", run: (e8, t3, i6, s6, n5) => {
  if (t3.syncInfo) {
    return { time: t3.syncInfo.time, segmentIndex: t3.syncInfo.mediaSequence - t3.mediaSequence, partIndex: null };
  }
  return null;
} }];
var vm = class extends du.EventTarget {
  constructor(e8 = {}) {
    super(), this.timelines = [], this.discontinuities = [], this.timelineToDatetimeMappings = {};
    const t3 = new gm(), i6 = new fm(t3), s6 = new fm(t3);
    this.mediaSequenceStorage_ = { main: t3, audio: i6, vtt: s6 }, this.logger_ = vu("SyncController");
  }
  getMediaSequenceSync(e8) {
    return this.mediaSequenceStorage_[e8] || null;
  }
  getSyncPoint(e8, t3, i6, s6, n5) {
    if (t3 !== 1 / 0) {
      return _m.find(({ name: e9 }) => "VOD" === e9).run(this, e8, t3);
    }
    const r4 = this.runStrategies_(e8, t3, i6, s6, n5);
    if (!r4.length) return null;
    for (const a6 of r4) {
      const { syncPoint: t4, strategy: i7 } = a6, { segmentIndex: n6, time: r5 } = t4;
      if (n6 < 0) continue;
      const o4 = r5, l7 = o4 + e8.segments[n6].duration;
      if (this.logger_(`Strategy: ${i7}. Current time: ${s6}. selected segment: ${n6}. Time: [${o4} -> ${l7}]}`), s6 >= o4 && s6 < l7) return this.logger_("Found sync point with exact match: ", t4), t4;
    }
    return this.selectSyncPoint_(r4, { key: "time", value: s6 });
  }
  getExpiredTime(e8, t3) {
    if (!e8 || !e8.segments) return null;
    const i6 = this.runStrategies_(e8, t3, e8.discontinuitySequence, 0);
    if (!i6.length) return null;
    const s6 = this.selectSyncPoint_(i6, { key: "segmentIndex", value: 0 });
    return s6.segmentIndex > 0 && (s6.time *= -1), Math.abs(s6.time + zu({ defaultDuration: e8.targetDuration, durationList: e8.segments, startIndex: s6.segmentIndex, endIndex: 0 }));
  }
  runStrategies_(e8, t3, i6, s6, n5) {
    const r4 = [];
    for (let a6 = 0; a6 < _m.length; a6++) {
      const o4 = _m[a6], l7 = o4.run(this, e8, t3, i6, s6, n5);
      l7 && (l7.strategy = o4.name, r4.push({ strategy: o4.name, syncPoint: l7 }));
    }
    return r4;
  }
  selectSyncPoint_(e8, t3) {
    let i6 = e8[0].syncPoint, s6 = Math.abs(e8[0].syncPoint[t3.key] - t3.value), n5 = e8[0].strategy;
    for (let r4 = 1; r4 < e8.length; r4++) {
      const a6 = Math.abs(e8[r4].syncPoint[t3.key] - t3.value);
      a6 < s6 && (s6 = a6, i6 = e8[r4].syncPoint, n5 = e8[r4].strategy);
    }
    return this.logger_(`syncPoint for [${t3.key}: ${t3.value}] chosen with strategy [${n5}]: [time:${i6.time}, segmentIndex:${i6.segmentIndex}` + ("number" == typeof i6.partIndex ? `,partIndex:${i6.partIndex}` : "") + "]"), i6;
  }
  saveExpiredSegmentInfo(e8, t3) {
    const i6 = t3.mediaSequence - e8.mediaSequence;
    if (i6 > ym) du.log.warn(`Not saving expired segment info. Media sequence gap ${i6} is too large.`);
    else for (let s6 = i6 - 1; s6 >= 0; s6--) {
      const i7 = e8.segments[s6];
      if (i7 && void 0 !== i7.start) {
        t3.syncInfo = { mediaSequence: e8.mediaSequence + s6, time: i7.start }, this.logger_(`playlist refresh sync: [time:${t3.syncInfo.time}, mediaSequence: ${t3.syncInfo.mediaSequence}]`), this.trigger("syncinfoupdate");
        break;
      }
    }
  }
  setDateTimeMappingForStart(e8) {
    if (this.timelineToDatetimeMappings = {}, e8.segments && e8.segments.length && e8.segments[0].dateTimeObject) {
      const t3 = e8.segments[0], i6 = t3.dateTimeObject.getTime() / 1e3;
      this.timelineToDatetimeMappings[t3.timeline] = -i6;
    }
  }
  saveSegmentTimingInfo({ segmentInfo: e8, shouldSaveTimelineMapping: t3 }) {
    const i6 = this.calculateSegmentTimeMapping_(e8, e8.timingInfo, t3), s6 = e8.segment;
    i6 && (this.saveDiscontinuitySyncInfo_(e8), e8.playlist.syncInfo || (e8.playlist.syncInfo = { mediaSequence: e8.playlist.mediaSequence + e8.mediaIndex, time: s6.start }));
    const n5 = s6.dateTimeObject;
    s6.discontinuity && t3 && n5 && (this.timelineToDatetimeMappings[s6.timeline] = -n5.getTime() / 1e3);
  }
  timestampOffsetForTimeline(e8) {
    return void 0 === this.timelines[e8] ? null : this.timelines[e8].time;
  }
  mappingForTimeline(e8) {
    return void 0 === this.timelines[e8] ? null : this.timelines[e8].mapping;
  }
  calculateSegmentTimeMapping_(e8, t3, i6) {
    const s6 = e8.segment, n5 = e8.part;
    let r4, a6, o4 = this.timelines[e8.timeline];
    if ("number" == typeof e8.timestampOffset) o4 = { time: e8.startOfSegment, mapping: e8.startOfSegment - t3.start }, i6 && (this.timelines[e8.timeline] = o4, this.trigger("timestampoffset"), this.logger_(`time mapping for timeline ${e8.timeline}: [time: ${o4.time}] [mapping: ${o4.mapping}]`)), r4 = e8.startOfSegment, a6 = t3.end + o4.mapping;
    else {
      if (!o4) return false;
      r4 = t3.start + o4.mapping, a6 = t3.end + o4.mapping;
    }
    return n5 && (n5.start = r4, n5.end = a6), (!s6.start || r4 < s6.start) && (s6.start = r4), s6.end = a6, true;
  }
  saveDiscontinuitySyncInfo_(e8) {
    const t3 = e8.playlist, i6 = e8.segment;
    if (i6.discontinuity) this.discontinuities[i6.timeline] = { time: i6.start, accuracy: 0 };
    else if (t3.discontinuityStarts && t3.discontinuityStarts.length) for (let s6 = 0; s6 < t3.discontinuityStarts.length; s6++) {
      const n5 = t3.discontinuityStarts[s6], r4 = t3.discontinuitySequence + s6 + 1, a6 = n5 - e8.mediaIndex, o4 = Math.abs(a6);
      if (!this.discontinuities[r4] || this.discontinuities[r4].accuracy > o4) {
        let s7;
        s7 = a6 < 0 ? i6.start - zu({ defaultDuration: t3.targetDuration, durationList: t3.segments, startIndex: e8.mediaIndex, endIndex: n5 }) : i6.end + zu({ defaultDuration: t3.targetDuration, durationList: t3.segments, startIndex: e8.mediaIndex + 1, endIndex: n5 }), this.discontinuities[r4] = { time: s7, accuracy: o4 };
      }
    }
  }
  dispose() {
    this.trigger("dispose"), this.off();
  }
};
var bm = class extends du.EventTarget {
  constructor() {
    super(), this.pendingTimelineChanges_ = {}, this.lastTimelineChanges_ = {};
  }
  clearPendingTimelineChange(e8) {
    this.pendingTimelineChanges_[e8] = null, this.trigger("pendingtimelinechange");
  }
  pendingTimelineChange({ type: e8, from: t3, to: i6 }) {
    return "number" == typeof t3 && "number" == typeof i6 && (this.pendingTimelineChanges_[e8] = { type: e8, from: t3, to: i6 }, this.trigger("pendingtimelinechange")), this.pendingTimelineChanges_[e8];
  }
  lastTimelineChange({ type: e8, from: t3, to: i6 }) {
    if ("number" == typeof t3 && "number" == typeof i6) {
      this.lastTimelineChanges_[e8] = { type: e8, from: t3, to: i6 }, delete this.pendingTimelineChanges_[e8];
      const s6 = { timelineChangeInfo: { from: t3, to: i6 } };
      this.trigger({ type: "timelinechange", metadata: s6 });
    }
    return this.lastTimelineChanges_[e8];
  }
  dispose() {
    this.trigger("dispose"), this.pendingTimelineChanges_ = {}, this.lastTimelineChanges_ = {}, this.off();
  }
};
var Tm = Sc(Ec(function() {
  var e8 = (function() {
    function e9() {
      this.listeners = {};
    }
    var t4 = e9.prototype;
    return t4.on = function(e10, t5) {
      this.listeners[e10] || (this.listeners[e10] = []), this.listeners[e10].push(t5);
    }, t4.off = function(e10, t5) {
      if (!this.listeners[e10]) return false;
      var i7 = this.listeners[e10].indexOf(t5);
      return this.listeners[e10] = this.listeners[e10].slice(0), this.listeners[e10].splice(i7, 1), i7 > -1;
    }, t4.trigger = function(e10) {
      var t5 = this.listeners[e10];
      if (t5) if (2 === arguments.length) for (var i7 = t5.length, s7 = 0; s7 < i7; ++s7) t5[s7].call(this, arguments[1]);
      else for (var n6 = Array.prototype.slice.call(arguments, 1), r5 = t5.length, a7 = 0; a7 < r5; ++a7) t5[a7].apply(this, n6);
    }, t4.dispose = function() {
      this.listeners = {};
    }, t4.pipe = function(e10) {
      this.on("data", function(t5) {
        e10.push(t5);
      });
    }, e9;
  })();
  function t3(e9) {
    return e9.subarray(0, e9.byteLength - e9[e9.byteLength - 1]);
  }
  const i6 = function() {
    const e9 = [[[], [], [], [], []], [[], [], [], [], []]], t4 = e9[0], i7 = e9[1], s7 = t4[4], n6 = i7[4];
    let r5, a7, o5;
    const l8 = [], h3 = [];
    let u6, d3, c7, p7, m7, g2;
    for (r5 = 0; r5 < 256; r5++) h3[(l8[r5] = r5 << 1 ^ 283 * (r5 >> 7)) ^ r5] = r5;
    for (a7 = o5 = 0; !s7[a7]; a7 ^= u6 || 1, o5 = h3[o5] || 1) for (p7 = o5 ^ o5 << 1 ^ o5 << 2 ^ o5 << 3 ^ o5 << 4, p7 = p7 >> 8 ^ 255 & p7 ^ 99, s7[a7] = p7, n6[p7] = a7, c7 = l8[d3 = l8[u6 = l8[a7]]], g2 = 16843009 * c7 ^ 65537 * d3 ^ 257 * u6 ^ 16843008 * a7, m7 = 257 * l8[p7] ^ 16843008 * p7, r5 = 0; r5 < 4; r5++) t4[r5][a7] = m7 = m7 << 24 ^ m7 >>> 8, i7[r5][p7] = g2 = g2 << 24 ^ g2 >>> 8;
    for (r5 = 0; r5 < 5; r5++) t4[r5] = t4[r5].slice(0), i7[r5] = i7[r5].slice(0);
    return e9;
  };
  let s6 = null;
  class n5 {
    constructor(e9) {
      let t4, n6, r5;
      s6 || (s6 = i6()), this._tables = [[s6[0][0].slice(), s6[0][1].slice(), s6[0][2].slice(), s6[0][3].slice(), s6[0][4].slice()], [s6[1][0].slice(), s6[1][1].slice(), s6[1][2].slice(), s6[1][3].slice(), s6[1][4].slice()]];
      const a7 = this._tables[0][4], o5 = this._tables[1], l8 = e9.length;
      let h3 = 1;
      if (4 !== l8 && 6 !== l8 && 8 !== l8) throw new Error("Invalid aes key size");
      const u6 = e9.slice(0), d3 = [];
      for (this._key = [u6, d3], t4 = l8; t4 < 4 * l8 + 28; t4++) r5 = u6[t4 - 1], (t4 % l8 === 0 || 8 === l8 && t4 % l8 === 4) && (r5 = a7[r5 >>> 24] << 24 ^ a7[r5 >> 16 & 255] << 16 ^ a7[r5 >> 8 & 255] << 8 ^ a7[255 & r5], t4 % l8 === 0 && (r5 = r5 << 8 ^ r5 >>> 24 ^ h3 << 24, h3 = h3 << 1 ^ 283 * (h3 >> 7))), u6[t4] = u6[t4 - l8] ^ r5;
      for (n6 = 0; t4; n6++, t4--) r5 = u6[3 & n6 ? t4 : t4 - 4], d3[n6] = t4 <= 4 || n6 < 4 ? r5 : o5[0][a7[r5 >>> 24]] ^ o5[1][a7[r5 >> 16 & 255]] ^ o5[2][a7[r5 >> 8 & 255]] ^ o5[3][a7[255 & r5]];
    }
    decrypt(e9, t4, i7, s7, n6, r5) {
      const a7 = this._key[1];
      let o5, l8, h3, u6 = e9 ^ a7[0], d3 = s7 ^ a7[1], c7 = i7 ^ a7[2], p7 = t4 ^ a7[3];
      const m7 = a7.length / 4 - 2;
      let g2, f4 = 4;
      const y3 = this._tables[1], _3 = y3[0], v3 = y3[1], b5 = y3[2], T2 = y3[3], S3 = y3[4];
      for (g2 = 0; g2 < m7; g2++) o5 = _3[u6 >>> 24] ^ v3[d3 >> 16 & 255] ^ b5[c7 >> 8 & 255] ^ T2[255 & p7] ^ a7[f4], l8 = _3[d3 >>> 24] ^ v3[c7 >> 16 & 255] ^ b5[p7 >> 8 & 255] ^ T2[255 & u6] ^ a7[f4 + 1], h3 = _3[c7 >>> 24] ^ v3[p7 >> 16 & 255] ^ b5[u6 >> 8 & 255] ^ T2[255 & d3] ^ a7[f4 + 2], p7 = _3[p7 >>> 24] ^ v3[u6 >> 16 & 255] ^ b5[d3 >> 8 & 255] ^ T2[255 & c7] ^ a7[f4 + 3], f4 += 4, u6 = o5, d3 = l8, c7 = h3;
      for (g2 = 0; g2 < 4; g2++) n6[(3 & -g2) + r5] = S3[u6 >>> 24] << 24 ^ S3[d3 >> 16 & 255] << 16 ^ S3[c7 >> 8 & 255] << 8 ^ S3[255 & p7] ^ a7[f4++], o5 = u6, u6 = d3, d3 = c7, c7 = p7, p7 = o5;
    }
  }
  class r4 extends e8 {
    constructor() {
      super(e8), this.jobs = [], this.delay = 1, this.timeout_ = null;
    }
    processJob_() {
      this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null;
    }
    push(e9) {
      this.jobs.push(e9), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay));
    }
  }
  const a6 = function(e9) {
    return e9 << 24 | (65280 & e9) << 8 | (16711680 & e9) >> 8 | e9 >>> 24;
  }, o4 = function(e9, t4, i7) {
    const s7 = new Int32Array(e9.buffer, e9.byteOffset, e9.byteLength >> 2), r5 = new n5(Array.prototype.slice.call(t4)), o5 = new Uint8Array(e9.byteLength), l8 = new Int32Array(o5.buffer);
    let h3, u6, d3, c7, p7, m7, g2, f4, y3;
    for (h3 = i7[0], u6 = i7[1], d3 = i7[2], c7 = i7[3], y3 = 0; y3 < s7.length; y3 += 4) p7 = a6(s7[y3]), m7 = a6(s7[y3 + 1]), g2 = a6(s7[y3 + 2]), f4 = a6(s7[y3 + 3]), r5.decrypt(p7, m7, g2, f4, l8, y3), l8[y3] = a6(l8[y3] ^ h3), l8[y3 + 1] = a6(l8[y3 + 1] ^ u6), l8[y3 + 2] = a6(l8[y3 + 2] ^ d3), l8[y3 + 3] = a6(l8[y3 + 3] ^ c7), h3 = p7, u6 = m7, d3 = g2, c7 = f4;
    return o5;
  };
  class l7 {
    constructor(e9, i7, s7, n6) {
      const o5 = l7.STEP, h3 = new Int32Array(e9.buffer), u6 = new Uint8Array(e9.byteLength);
      let d3 = 0;
      for (this.asyncStream_ = new r4(), this.asyncStream_.push(this.decryptChunk_(h3.subarray(d3, d3 + o5), i7, s7, u6)), d3 = o5; d3 < h3.length; d3 += o5) s7 = new Uint32Array([a6(h3[d3 - 4]), a6(h3[d3 - 3]), a6(h3[d3 - 2]), a6(h3[d3 - 1])]), this.asyncStream_.push(this.decryptChunk_(h3.subarray(d3, d3 + o5), i7, s7, u6));
      this.asyncStream_.push(function() {
        n6(null, t3(u6));
      });
    }
    static get STEP() {
      return 32e3;
    }
    decryptChunk_(e9, t4, i7, s7) {
      return function() {
        const n6 = o4(e9, t4, i7);
        s7.set(n6, e9.byteOffset);
      };
    }
  }
  var h2, u5 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
  h2 = "undefined" != typeof window ? window : void 0 !== u5 ? u5 : "undefined" != typeof self ? self : {};
  var d2 = function(e9) {
    return "function" === ArrayBuffer.isView ? ArrayBuffer.isView(e9) : e9 && e9.buffer instanceof ArrayBuffer;
  }, c6 = h2.BigInt || Number;
  c6("0x1"), c6("0x100"), c6("0x10000"), c6("0x1000000"), c6("0x100000000"), c6("0x10000000000"), c6("0x1000000000000"), c6("0x100000000000000"), c6("0x10000000000000000"), (function() {
    var e9 = new Uint16Array([65484]), t4 = new Uint8Array(e9.buffer, e9.byteOffset, e9.byteLength);
    255 === t4[0] || t4[0];
  })();
  const p6 = function(e9) {
    const t4 = {};
    return Object.keys(e9).forEach((i7) => {
      const s7 = e9[i7];
      d2(s7) ? t4[i7] = { bytes: s7.buffer, byteOffset: s7.byteOffset, byteLength: s7.byteLength } : t4[i7] = s7;
    }), t4;
  };
  self.onmessage = function(e9) {
    const t4 = e9.data, i7 = new Uint8Array(t4.encrypted.bytes, t4.encrypted.byteOffset, t4.encrypted.byteLength), s7 = new Uint32Array(t4.key.bytes, t4.key.byteOffset, t4.key.byteLength / 4), n6 = new Uint32Array(t4.iv.bytes, t4.iv.byteOffset, t4.iv.byteLength / 4);
    new l7(i7, s7, n6, function(e10, i8) {
      self.postMessage(p6({ source: t4.source, decrypted: i8 }), [i8.buffer]);
    });
  };
}));
var Sm = Tc(Tm);
var Em = (e8) => {
  let t3 = e8.default ? "main" : "alternative";
  return e8.characteristics && e8.characteristics.indexOf("public.accessibility.describes-video") >= 0 && (t3 = "main-desc"), t3;
};
var wm = (e8, t3) => {
  e8.abort(), e8.pause(), t3 && t3.activePlaylistLoader && (t3.activePlaylistLoader.pause(), t3.activePlaylistLoader = null);
};
var Cm = (e8, t3) => {
  t3.activePlaylistLoader = e8, e8.load();
};
var km = (e8, t3) => () => {
  const { segmentLoaders: { [e8]: i6, main: s6 }, mediaTypes: { [e8]: n5 } } = t3, r4 = n5.activeTrack(), a6 = n5.getActiveGroup(), o4 = n5.activePlaylistLoader, l7 = n5.lastGroup_;
  a6 && l7 && a6.id === l7.id || (n5.lastGroup_ = a6, n5.lastTrack_ = r4, wm(i6, n5), a6 && !a6.isMainPlaylist && (a6.playlistLoader ? (i6.resyncLoader(), Cm(a6.playlistLoader, n5)) : o4 && s6.resetEverything()));
};
var Im = (e8, t3) => () => {
  const { segmentLoaders: { [e8]: i6 }, mediaTypes: { [e8]: s6 } } = t3;
  s6.lastGroup_ = null, i6.abort(), i6.pause();
};
var xm = (e8, t3) => () => {
  const { mainPlaylistLoader: i6, segmentLoaders: { [e8]: s6, main: n5 }, mediaTypes: { [e8]: r4 } } = t3, a6 = r4.activeTrack(), o4 = r4.getActiveGroup(), l7 = r4.activePlaylistLoader, h2 = r4.lastTrack_;
  if ((!h2 || !a6 || h2.id !== a6.id) && (r4.lastGroup_ = o4, r4.lastTrack_ = a6, wm(s6, r4), o4)) {
    if (o4.isMainPlaylist) {
      if (!a6 || !h2 || a6.id === h2.id) return;
      const e9 = t3.vhs.playlistController_, s7 = e9.selectPlaylist();
      if (e9.media() === s7) return;
      return r4.logger_(`track change. Switching main audio from ${h2.id} to ${a6.id}`), i6.pause(), n5.resetEverything(), void e9.fastQualityChange_(s7);
    }
    if ("AUDIO" === e8) {
      if (!o4.playlistLoader) return n5.setAudio(true), void n5.resetEverything();
      s6.setAudio(true), n5.setAudio(false);
    }
    l7 !== o4.playlistLoader ? (s6.track && s6.track(a6), s6.resetEverything(), Cm(o4.playlistLoader, r4)) : Cm(o4.playlistLoader, r4);
  }
};
var Am = { AUDIO: (e8, t3) => () => {
  const { mediaTypes: { [e8]: i6 }, excludePlaylist: s6 } = t3, n5 = i6.activeTrack(), r4 = i6.activeGroup(), a6 = (r4.filter((e9) => e9.default)[0] || r4[0]).id, o4 = i6.tracks[a6];
  if (n5 !== o4) {
    du.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
    for (const e9 in i6.tracks) i6.tracks[e9].enabled = i6.tracks[e9] === o4;
    i6.onTrackChanged();
  } else s6({ error: { message: "Problem encountered loading the default audio track." } });
}, SUBTITLES: (e8, t3) => () => {
  const { mediaTypes: { [e8]: i6 } } = t3;
  du.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");
  const s6 = i6.activeTrack();
  s6 && (s6.mode = "disabled"), i6.onTrackChanged();
} };
var Dm = { AUDIO: (e8, t3, i6) => {
  if (!t3) return;
  const { tech: s6, requestOptions: n5, segmentLoaders: { [e8]: r4 } } = i6;
  t3.on("loadedmetadata", () => {
    const e9 = t3.media();
    r4.playlist(e9, n5), (!s6.paused() || e9.endList && "none" !== s6.preload()) && r4.load();
  }), t3.on("loadedplaylist", () => {
    r4.playlist(t3.media(), n5), s6.paused() || r4.load();
  }), t3.on("error", Am[e8](e8, i6));
}, SUBTITLES: (e8, t3, i6) => {
  const { tech: s6, requestOptions: n5, segmentLoaders: { [e8]: r4 }, mediaTypes: { [e8]: a6 } } = i6;
  t3.on("loadedmetadata", () => {
    const e9 = t3.media();
    r4.playlist(e9, n5), r4.track(a6.activeTrack()), (!s6.paused() || e9.endList && "none" !== s6.preload()) && r4.load();
  }), t3.on("loadedplaylist", () => {
    r4.playlist(t3.media(), n5), s6.paused() || r4.load();
  }), t3.on("error", Am[e8](e8, i6));
} };
var Pm = { AUDIO: (e8, t3) => {
  const { vhs: i6, sourceType: s6, segmentLoaders: { [e8]: n5 }, requestOptions: r4, main: { mediaGroups: a6 }, mediaTypes: { [e8]: { groups: o4, tracks: l7, logger_: h2 } }, mainPlaylistLoader: u5 } = t3, d2 = td(u5.main);
  a6[e8] && 0 !== Object.keys(a6[e8]).length || (a6[e8] = { main: { default: { default: true } } }, d2 && (a6[e8].main.default.playlists = u5.main.playlists));
  for (const c6 in a6[e8]) {
    o4[c6] || (o4[c6] = []);
    for (const n6 in a6[e8][c6]) {
      let p6, m7 = a6[e8][c6][n6];
      if (d2 ? (h2(`AUDIO group '${c6}' label '${n6}' is a main playlist`), m7.isMainPlaylist = true, p6 = null) : p6 = "vhs-json" === s6 && m7.playlists ? new Od(m7.playlists[0], i6, r4) : m7.resolvedUri ? new Od(m7.resolvedUri, i6, r4) : m7.playlists && "dash" === s6 ? new fc(m7.playlists[0], i6, r4, u5) : null, m7 = bu({ id: n6, playlistLoader: p6 }, m7), Dm[e8](e8, m7.playlistLoader, t3), o4[c6].push(m7), void 0 === l7[n6]) {
        const e9 = new du.AudioTrack({ id: n6, kind: Em(m7), enabled: false, language: m7.language, default: m7.default, label: n6 });
        l7[n6] = e9;
      }
    }
  }
  n5.on("error", Am[e8](e8, t3));
}, SUBTITLES: (e8, t3) => {
  const { tech: i6, vhs: s6, sourceType: n5, segmentLoaders: { [e8]: r4 }, requestOptions: a6, main: { mediaGroups: o4 }, mediaTypes: { [e8]: { groups: l7, tracks: h2 } }, mainPlaylistLoader: u5 } = t3;
  for (const d2 in o4[e8]) {
    l7[d2] || (l7[d2] = []);
    for (const r5 in o4[e8][d2]) {
      if (!s6.options_.useForcedSubtitles && o4[e8][d2][r5].forced) continue;
      let c6, p6 = o4[e8][d2][r5];
      if ("hls" === n5) c6 = new Od(p6.resolvedUri, s6, a6);
      else if ("dash" === n5) {
        if (!p6.playlists.filter((e9) => e9.excludeUntil !== 1 / 0).length) return;
        c6 = new fc(p6.playlists[0], s6, a6, u5);
      } else "vhs-json" === n5 && (c6 = new Od(p6.playlists ? p6.playlists[0] : p6.resolvedUri, s6, a6));
      if (p6 = bu({ id: r5, playlistLoader: c6 }, p6), Dm[e8](e8, p6.playlistLoader, t3), l7[d2].push(p6), void 0 === h2[r5]) {
        const e9 = i6.addRemoteTextTrack({ id: r5, kind: "subtitles", default: p6.default && p6.autoselect, language: p6.language, label: r5 }, false).track;
        h2[r5] = e9;
      }
    }
  }
  r4.on("error", Am[e8](e8, t3));
}, "CLOSED-CAPTIONS": (e8, t3) => {
  const { tech: i6, main: { mediaGroups: s6 }, mediaTypes: { [e8]: { groups: n5, tracks: r4 } } } = t3;
  for (const a6 in s6[e8]) {
    n5[a6] || (n5[a6] = []);
    for (const t4 in s6[e8][a6]) {
      const o4 = s6[e8][a6][t4];
      if (!/^(?:CC|SERVICE)/.test(o4.instreamId)) continue;
      const l7 = i6.options_.vhs && i6.options_.vhs.captionServices || {};
      let h2 = { label: t4, language: o4.language, instreamId: o4.instreamId, default: o4.default && o4.autoselect };
      if (l7[h2.instreamId] && (h2 = bu(h2, l7[h2.instreamId])), void 0 === h2.default && delete h2.default, n5[a6].push(bu({ id: t4 }, o4)), void 0 === r4[t4]) {
        const e9 = i6.addRemoteTextTrack({ id: h2.instreamId, kind: "captions", default: h2.default, language: h2.language, label: h2.label }, false).track;
        r4[t4] = e9;
      }
    }
  }
} };
var Lm = (e8, t3) => {
  for (let i6 = 0; i6 < e8.length; i6++) {
    if (Zu(t3, e8[i6])) return true;
    if (e8[i6].playlists && Lm(e8[i6].playlists, t3)) return true;
  }
  return false;
};
var Om = (e8, t3) => (i6) => {
  const { mainPlaylistLoader: s6, mediaTypes: { [e8]: { groups: n5 } } } = t3, r4 = s6.media();
  if (!r4) return null;
  let a6 = null;
  r4.attributes[e8] && (a6 = n5[r4.attributes[e8]]);
  const o4 = Object.keys(n5);
  if (!a6) if ("AUDIO" === e8 && o4.length > 1 && td(t3.main)) for (let e9 = 0; e9 < o4.length; e9++) {
    const t4 = n5[o4[e9]];
    if (Lm(t4, r4)) {
      a6 = t4;
      break;
    }
  }
  else n5.main ? a6 = n5.main : 1 === o4.length && (a6 = n5[o4[0]]);
  return void 0 === i6 ? a6 : null !== i6 && a6 && a6.filter((e9) => e9.id === i6.id)[0] || null;
};
var Nm = { AUDIO: (e8, t3) => () => {
  const { mediaTypes: { [e8]: { tracks: i6 } } } = t3;
  for (const e9 in i6) if (i6[e9].enabled) return i6[e9];
  return null;
}, SUBTITLES: (e8, t3) => () => {
  const { mediaTypes: { [e8]: { tracks: i6 } } } = t3;
  for (const e9 in i6) if ("showing" === i6[e9].mode || "hidden" === i6[e9].mode) return i6[e9];
  return null;
} };
var Rm = (e8, { mediaTypes: t3 }) => () => {
  const i6 = t3[e8].activeTrack();
  return i6 ? t3[e8].activeGroup(i6) : null;
};
var Mm = (e8) => {
  ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((t4) => {
    Pm[t4](t4, e8);
  });
  const { mediaTypes: t3, mainPlaylistLoader: i6, tech: s6, vhs: n5, segmentLoaders: { AUDIO: r4, main: a6 } } = e8;
  ["AUDIO", "SUBTITLES"].forEach((i7) => {
    t3[i7].activeGroup = Om(i7, e8), t3[i7].activeTrack = Nm[i7](i7, e8), t3[i7].onGroupChanged = km(i7, e8), t3[i7].onGroupChanging = Im(i7, e8), t3[i7].onTrackChanged = xm(i7, e8), t3[i7].getActiveGroup = Rm(i7, e8);
  });
  const o4 = t3.AUDIO.activeGroup();
  if (o4) {
    const e9 = (o4.filter((e10) => e10.default)[0] || o4[0]).id;
    t3.AUDIO.tracks[e9].enabled = true, t3.AUDIO.onGroupChanged(), t3.AUDIO.onTrackChanged();
    t3.AUDIO.getActiveGroup().playlistLoader ? (a6.setAudio(false), r4.setAudio(true)) : a6.setAudio(true);
  }
  i6.on("mediachange", () => {
    ["AUDIO", "SUBTITLES"].forEach((e9) => t3[e9].onGroupChanged());
  }), i6.on("mediachanging", () => {
    ["AUDIO", "SUBTITLES"].forEach((e9) => t3[e9].onGroupChanging());
  });
  const l7 = () => {
    t3.AUDIO.onTrackChanged(), s6.trigger({ type: "usage", name: "vhs-audio-change" });
  };
  s6.audioTracks().addEventListener("change", l7), s6.remoteTextTracks().addEventListener("change", t3.SUBTITLES.onTrackChanged), n5.on("dispose", () => {
    s6.audioTracks().removeEventListener("change", l7), s6.remoteTextTracks().removeEventListener("change", t3.SUBTITLES.onTrackChanged);
  }), s6.clearTracks("audio");
  for (const h2 in t3.AUDIO.tracks) s6.audioTracks().addTrack(t3.AUDIO.tracks[h2]);
};
var Um = () => {
  const e8 = {};
  return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((t3) => {
    e8[t3] = { groups: {}, tracks: {}, activePlaylistLoader: null, activeGroup: Xp, activeTrack: Xp, getActiveGroup: Xp, onGroupChanged: Xp, onTrackChanged: Xp, lastTrack_: null, logger_: vu(`MediaGroups[${t3}]`) };
  }), e8;
};
var Bm = class {
  constructor() {
    this.priority_ = [], this.pathwayClones_ = /* @__PURE__ */ new Map();
  }
  set version(e8) {
    1 === e8 && (this.version_ = e8);
  }
  set ttl(e8) {
    this.ttl_ = e8 || 300;
  }
  set reloadUri(e8) {
    e8 && (this.reloadUri_ = yu(this.reloadUri_, e8));
  }
  set priority(e8) {
    e8 && e8.length && (this.priority_ = e8);
  }
  set pathwayClones(e8) {
    e8 && e8.length && (this.pathwayClones_ = new Map(e8.map((e9) => [e9.ID, e9])));
  }
  get version() {
    return this.version_;
  }
  get ttl() {
    return this.ttl_;
  }
  get reloadUri() {
    return this.reloadUri_;
  }
  get priority() {
    return this.priority_;
  }
  get pathwayClones() {
    return this.pathwayClones_;
  }
};
var Fm = class extends du.EventTarget {
  constructor(e8, t3) {
    super(), this.currentPathway = null, this.defaultPathway = null, this.queryBeforeStart = false, this.availablePathways_ = /* @__PURE__ */ new Set(), this.steeringManifest = new Bm(), this.proxyServerUrl_ = null, this.manifestType_ = null, this.ttlTimeout_ = null, this.request_ = null, this.currentPathwayClones = /* @__PURE__ */ new Map(), this.nextPathwayClones = /* @__PURE__ */ new Map(), this.excludedSteeringManifestURLs = /* @__PURE__ */ new Set(), this.logger_ = vu("Content Steering"), this.xhr_ = e8, this.getBandwidth_ = t3;
  }
  assignTagProperties(e8, t3) {
    this.manifestType_ = t3.serverUri ? "HLS" : "DASH";
    const i6 = t3.serverUri || t3.serverURL;
    if (!i6) return this.logger_(`steering manifest URL is ${i6}, cannot request steering manifest.`), void this.trigger("error");
    i6.startsWith("data:") ? this.decodeDataUriManifest_(i6.substring(i6.indexOf(",") + 1)) : (this.steeringManifest.reloadUri = yu(e8, i6), this.defaultPathway = t3.pathwayId || t3.defaultServiceLocation, this.queryBeforeStart = t3.queryBeforeStart, this.proxyServerUrl_ = t3.proxyServerURL, this.defaultPathway && !this.queryBeforeStart && this.trigger("content-steering"));
  }
  requestSteeringManifest(e8) {
    const t3 = this.steeringManifest.reloadUri;
    if (!t3) return;
    const i6 = e8 ? t3 : this.getRequestURI(t3);
    if (!i6) return this.logger_("No valid content steering manifest URIs. Stopping content steering."), this.trigger("error"), void this.dispose();
    const s6 = { contentSteeringInfo: { uri: i6 } };
    this.trigger({ type: "contentsteeringloadstart", metadata: s6 }), this.request_ = this.xhr_({ uri: i6, requestType: "content-steering-manifest" }, (e9, t4) => {
      if (e9) {
        if (410 === t4.status) return this.logger_(`manifest request 410 ${e9}.`), this.logger_(`There will be no more content steering requests to ${i6} this session.`), void this.excludedSteeringManifestURLs.add(i6);
        if (429 === t4.status) {
          const i7 = t4.responseHeaders["retry-after"];
          return this.logger_(`manifest request 429 ${e9}.`), this.logger_(`content steering will retry in ${i7} seconds.`), void this.startTTLTimeout_(parseInt(i7, 10));
        }
        return this.logger_(`manifest failed to load ${e9}.`), void this.startTTLTimeout_();
      }
      let n5;
      this.trigger({ type: "contentsteeringloadcomplete", metadata: s6 });
      try {
        n5 = JSON.parse(this.request_.responseText);
      } catch (a6) {
        const e10 = { errorType: du.Error.StreamingContentSteeringParserError, error: a6 };
        this.trigger({ type: "error", metadata: e10 });
      }
      this.assignSteeringProperties_(n5);
      const r4 = { contentSteeringInfo: s6.contentSteeringInfo, contentSteeringManifest: { version: this.steeringManifest.version, reloadUri: this.steeringManifest.reloadUri, priority: this.steeringManifest.priority } };
      this.trigger({ type: "contentsteeringparsed", metadata: r4 }), this.startTTLTimeout_();
    });
  }
  setProxyServerUrl_(e8) {
    const t3 = new b4.URL(e8), i6 = new b4.URL(this.proxyServerUrl_);
    return i6.searchParams.set("url", encodeURI(t3.toString())), this.setSteeringParams_(i6.toString());
  }
  decodeDataUriManifest_(e8) {
    const t3 = JSON.parse(b4.atob(e8));
    this.assignSteeringProperties_(t3);
  }
  setSteeringParams_(e8) {
    const t3 = new b4.URL(e8), i6 = this.getPathway(), s6 = this.getBandwidth_();
    if (i6) {
      const e9 = `_${this.manifestType_}_pathway`;
      t3.searchParams.set(e9, i6);
    }
    if (s6) {
      const e9 = `_${this.manifestType_}_throughput`;
      t3.searchParams.set(e9, s6);
    }
    return t3.toString();
  }
  assignSteeringProperties_(e8) {
    if (this.steeringManifest.version = e8.VERSION, !this.steeringManifest.version) return this.logger_(`manifest version is ${e8.VERSION}, which is not supported.`), void this.trigger("error");
    this.steeringManifest.ttl = e8.TTL, this.steeringManifest.reloadUri = e8["RELOAD-URI"], this.steeringManifest.priority = e8["PATHWAY-PRIORITY"] || e8["SERVICE-LOCATION-PRIORITY"], this.steeringManifest.pathwayClones = e8["PATHWAY-CLONES"], this.nextPathwayClones = this.steeringManifest.pathwayClones, this.availablePathways_.size || (this.logger_("There are no available pathways for content steering. Ending content steering."), this.trigger("error"), this.dispose());
    const t3 = ((e9) => {
      for (const t4 of e9) if (this.availablePathways_.has(t4)) return t4;
      return [...this.availablePathways_][0];
    })(this.steeringManifest.priority);
    this.currentPathway !== t3 && (this.currentPathway = t3, this.trigger("content-steering"));
  }
  getPathway() {
    return this.currentPathway || this.defaultPathway;
  }
  getRequestURI(e8) {
    if (!e8) return null;
    const t3 = (e9) => this.excludedSteeringManifestURLs.has(e9);
    if (this.proxyServerUrl_) {
      const i7 = this.setProxyServerUrl_(e8);
      if (!t3(i7)) return i7;
    }
    const i6 = this.setSteeringParams_(e8);
    return t3(i6) ? null : i6;
  }
  startTTLTimeout_(e8 = this.steeringManifest.ttl) {
    const t3 = 1e3 * e8;
    this.ttlTimeout_ = b4.setTimeout(() => {
      this.requestSteeringManifest();
    }, t3);
  }
  clearTTLTimeout_() {
    b4.clearTimeout(this.ttlTimeout_), this.ttlTimeout_ = null;
  }
  abort() {
    this.request_ && this.request_.abort(), this.request_ = null;
  }
  dispose() {
    this.off("content-steering"), this.off("error"), this.abort(), this.clearTTLTimeout_(), this.currentPathway = null, this.defaultPathway = null, this.queryBeforeStart = null, this.proxyServerUrl_ = null, this.manifestType_ = null, this.ttlTimeout_ = null, this.request_ = null, this.excludedSteeringManifestURLs = /* @__PURE__ */ new Set(), this.availablePathways_ = /* @__PURE__ */ new Set(), this.steeringManifest = new Bm();
  }
  addAvailablePathway(e8) {
    e8 && this.availablePathways_.add(e8);
  }
  clearAvailablePathways() {
    this.availablePathways_.clear();
  }
  excludePathway(e8) {
    return this.availablePathways_.delete(e8);
  }
  didDASHTagChange(e8, t3) {
    return !t3 && this.steeringManifest.reloadUri || t3 && (yu(e8, t3.serverURL) !== this.steeringManifest.reloadUri || t3.defaultServiceLocation !== this.defaultPathway || t3.queryBeforeStart !== this.queryBeforeStart || t3.proxyServerURL !== this.proxyServerUrl_);
  }
  getAvailablePathways() {
    return this.availablePathways_;
  }
};
var qm = (e8, t3) => {
  let i6 = null;
  return (...s6) => {
    clearTimeout(i6), i6 = setTimeout(() => {
      e8.apply(null, s6);
    }, t3);
  };
};
var jm = 10;
var $m;
var Hm = ["mediaRequests", "mediaRequestsAborted", "mediaRequestsTimedout", "mediaRequestsErrored", "mediaTransferDuration", "mediaBytesTransferred", "mediaAppends"];
var Vm = function(e8) {
  return this.audioSegmentLoader_[e8] + this.mainSegmentLoader_[e8];
};
var zm = function({ currentPlaylist: e8, buffered: t3, currentTime: i6, nextPlaylist: s6, bufferLowWaterLine: n5, bufferHighWaterLine: r4, duration: a6, bufferBasedABR: o4, log: l7 }) {
  if (!s6) return du.log.warn("We received no playlist to switch to. Please check your stream."), false;
  const h2 = `allowing switch ${e8 && e8.id || "null"} -> ${s6.id}`;
  if (!e8) return l7(`${h2} as current playlist is not set`), true;
  if (s6.id === e8.id) return false;
  const u5 = Boolean(ku(t3, i6).length);
  if (!e8.endList) return u5 || "number" != typeof e8.partTargetDuration ? (l7(`${h2} as current playlist is live`), true) : (l7(`not ${h2} as current playlist is live llhls, but currentTime isn't in buffered.`), false);
  const d2 = Ru(t3, i6), c6 = o4 ? yc.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE : yc.MAX_BUFFER_LOW_WATER_LINE;
  if (a6 < c6) return l7(`${h2} as duration < max low water line (${a6} < ${c6})`), true;
  const p6 = s6.attributes.BANDWIDTH, m7 = e8.attributes.BANDWIDTH;
  if (p6 < m7 && (!o4 || d2 < r4)) {
    let e9 = `${h2} as next bandwidth < current bandwidth (${p6} < ${m7})`;
    return o4 && (e9 += ` and forwardBuffer < bufferHighWaterLine (${d2} < ${r4})`), l7(e9), true;
  }
  if ((!o4 || p6 > m7) && d2 >= n5) {
    let e9 = `${h2} as forwardBuffer >= bufferLowWaterLine (${d2} >= ${n5})`;
    return o4 && (e9 += ` and next bandwidth > current bandwidth (${p6} > ${m7})`), l7(e9), true;
  }
  return l7(`not ${h2} as no switching criteria met`), false;
};
var Wm = class extends du.EventTarget {
  constructor(e8) {
    super(), this.fastQualityChange_ = qm(this.fastQualityChange_.bind(this), 100);
    const { src: t3, withCredentials: i6, tech: s6, bandwidth: n5, externVhs: r4, useCueTags: a6, playlistExclusionDuration: o4, enableLowInitialPlaylist: l7, sourceType: h2, cacheEncryptionKeys: u5, bufferBasedABR: d2, leastPixelDiffSelector: c6, captionServices: p6, experimentalUseMMS: m7 } = e8;
    if (!t3) throw new Error("A non-empty playlist URL or JSON manifest string is required");
    let { maxPlaylistRetries: g2 } = e8;
    null == g2 && (g2 = 1 / 0), $m = r4, this.bufferBasedABR = Boolean(d2), this.leastPixelDiffSelector = Boolean(c6), this.withCredentials = i6, this.tech_ = s6, this.vhs_ = s6.vhs, this.player_ = e8.player_, this.sourceType_ = h2, this.useCueTags_ = a6, this.playlistExclusionDuration = o4, this.maxPlaylistRetries = g2, this.enableLowInitialPlaylist = l7, this.usingManagedMediaSource_ = false, this.useCueTags_ && (this.cueTagsTrack_ = this.tech_.addTextTrack("metadata", "ad-cues"), this.cueTagsTrack_.inBandMetadataTrackDispatchType = ""), this.requestOptions_ = { withCredentials: i6, maxPlaylistRetries: g2, timeout: null }, this.on("error", this.pauseLoading), this.mediaTypes_ = Um(), m7 && b4.ManagedMediaSource ? (this.tech_.el_.disableRemotePlayback = true, this.mediaSource = new b4.ManagedMediaSource(), this.usingManagedMediaSource_ = true, du.log("Using ManagedMediaSource")) : b4.MediaSource && (this.mediaSource = new b4.MediaSource()), this.handleDurationChange_ = this.handleDurationChange_.bind(this), this.handleSourceOpen_ = this.handleSourceOpen_.bind(this), this.handleSourceEnded_ = this.handleSourceEnded_.bind(this), this.load = this.load.bind(this), this.pause = this.pause.bind(this), this.mediaSource.addEventListener("durationchange", this.handleDurationChange_), this.mediaSource.addEventListener("sourceopen", this.handleSourceOpen_), this.mediaSource.addEventListener("sourceended", this.handleSourceEnded_), this.mediaSource.addEventListener("startstreaming", this.load), this.mediaSource.addEventListener("endstreaming", this.pause), this.seekable_ = Tu(), this.hasPlayed_ = false, this.syncController_ = new vm(e8), this.segmentMetadataTrack_ = s6.addRemoteTextTrack({ kind: "metadata", label: "segment-metadata" }, false).track, this.segmentMetadataTrack_.mode = "hidden", this.decrypter_ = new Sm(), this.sourceUpdater_ = new rm(this.mediaSource), this.inbandTextTracks_ = {}, this.timelineChangeController_ = new bm(), this.keyStatusMap_ = /* @__PURE__ */ new Map();
    const f4 = { vhs: this.vhs_, parse708captions: e8.parse708captions, useDtsForTimestampOffset: e8.useDtsForTimestampOffset, captionServices: p6, mediaSource: this.mediaSource, currentTime: this.tech_.currentTime.bind(this.tech_), seekable: () => this.seekable(), seeking: () => this.tech_.seeking(), duration: () => this.duration(), hasPlayed: () => this.hasPlayed_, goalBufferLength: () => this.goalBufferLength(), bandwidth: n5, syncController: this.syncController_, decrypter: this.decrypter_, sourceType: this.sourceType_, inbandTextTracks: this.inbandTextTracks_, cacheEncryptionKeys: u5, sourceUpdater: this.sourceUpdater_, timelineChangeController: this.timelineChangeController_, exactManifestTimings: e8.exactManifestTimings, addMetadataToTextTrack: this.addMetadataToTextTrack.bind(this) };
    this.mainPlaylistLoader_ = "dash" === this.sourceType_ ? new fc(t3, this.vhs_, bu(this.requestOptions_, { addMetadataToTextTrack: this.addMetadataToTextTrack.bind(this) })) : new Od(t3, this.vhs_, bu(this.requestOptions_, { addDateRangesToTextTrack: this.addDateRangesToTextTrack_.bind(this) })), this.setupMainPlaylistLoaderListeners_(), this.mainSegmentLoader_ = new Gp(bu(f4, { segmentMetadataTrack: this.segmentMetadataTrack_, loaderType: "main" }), e8), this.audioSegmentLoader_ = new Gp(bu(f4, { loaderType: "audio" }), e8), this.subtitleSegmentLoader_ = new um(bu(f4, { loaderType: "vtt", featuresNativeTextTracks: this.tech_.featuresNativeTextTracks, loadVttJs: () => new Promise((e9, t4) => {
      function i7() {
        s6.off("vttjserror", n6), e9();
      }
      function n6() {
        s6.off("vttjsloaded", i7), t4();
      }
      s6.one("vttjsloaded", i7), s6.one("vttjserror", n6), s6.addWebVttScript_();
    }) }), e8);
    const y3 = () => this.mainSegmentLoader_.bandwidth;
    this.contentSteeringController_ = new Fm(this.vhs_.xhr, y3), this.setupSegmentLoaderListeners_(), this.bufferBasedABR && (this.mainPlaylistLoader_.one("loadedplaylist", () => this.startABRTimer_()), this.tech_.on("pause", () => this.stopABRTimer_()), this.tech_.on("play", () => this.startABRTimer_())), Hm.forEach((e9) => {
      this[e9 + "_"] = Vm.bind(this, e9);
    }), this.logger_ = vu("pc"), this.triggeredFmp4Usage = false, "none" === this.tech_.preload() ? (this.loadOnPlay_ = () => {
      this.loadOnPlay_ = null, this.mainPlaylistLoader_.load();
    }, this.tech_.one("play", this.loadOnPlay_)) : this.mainPlaylistLoader_.load(), this.timeToLoadedData__ = -1, this.mainAppendsToLoadedData__ = -1, this.audioAppendsToLoadedData__ = -1;
    const _3 = "none" === this.tech_.preload() ? "play" : "loadstart";
    this.tech_.one(_3, () => {
      const e9 = Date.now();
      this.tech_.one("loadeddata", () => {
        this.timeToLoadedData__ = Date.now() - e9, this.mainAppendsToLoadedData__ = this.mainSegmentLoader_.mediaAppends, this.audioAppendsToLoadedData__ = this.audioSegmentLoader_.mediaAppends;
      });
    });
  }
  mainAppendsToLoadedData_() {
    return this.mainAppendsToLoadedData__;
  }
  audioAppendsToLoadedData_() {
    return this.audioAppendsToLoadedData__;
  }
  appendsToLoadedData_() {
    const e8 = this.mainAppendsToLoadedData_(), t3 = this.audioAppendsToLoadedData_();
    return -1 === e8 || -1 === t3 ? -1 : e8 + t3;
  }
  timeToLoadedData_() {
    return this.timeToLoadedData__;
  }
  checkABR_(e8 = "abr") {
    const t3 = this.selectPlaylist();
    t3 && this.shouldSwitchToMedia_(t3) && this.switchMedia_(t3, e8);
  }
  switchMedia_(e8, t3, i6) {
    const s6 = this.media(), n5 = s6 && (s6.id || s6.uri), r4 = e8 && (e8.id || e8.uri);
    if (n5 && n5 !== r4) {
      this.logger_(`switch media ${n5} -> ${r4} from ${t3}`);
      const i7 = { renditionInfo: { id: r4, bandwidth: e8.attributes.BANDWIDTH, resolution: e8.attributes.RESOLUTION, codecs: e8.attributes.CODECS }, cause: t3 };
      this.trigger({ type: "renditionselected", metadata: i7 }), this.tech_.trigger({ type: "usage", name: `vhs-rendition-change-${t3}` });
    }
    this.mainPlaylistLoader_.media(e8, i6);
  }
  switchMediaForDASHContentSteering_() {
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach((e8) => {
      const t3 = this.mediaTypes_[e8], i6 = t3 ? t3.activeGroup() : null, s6 = this.contentSteeringController_.getPathway();
      if (i6 && s6) {
        const t4 = (i6.length ? i6[0].playlists : i6.playlists).filter((e9) => e9.attributes.serviceLocation === s6);
        t4.length && this.mediaTypes_[e8].activePlaylistLoader.media(t4[0]);
      }
    });
  }
  startABRTimer_() {
    this.stopABRTimer_(), this.abrTimer_ = b4.setInterval(() => this.checkABR_(), 250);
  }
  stopABRTimer_() {
    this.tech_.scrubbing && this.tech_.scrubbing() || (b4.clearInterval(this.abrTimer_), this.abrTimer_ = null);
  }
  getAudioTrackPlaylists_() {
    const e8 = this.main(), t3 = e8 && e8.playlists || [];
    if (!e8 || !e8.mediaGroups || !e8.mediaGroups.AUDIO) return t3;
    const i6 = e8.mediaGroups.AUDIO, s6 = Object.keys(i6);
    let n5;
    if (Object.keys(this.mediaTypes_.AUDIO.groups).length) n5 = this.mediaTypes_.AUDIO.activeTrack();
    else {
      const e9 = i6.main || s6.length && i6[s6[0]];
      for (const t4 in e9) if (e9[t4].default) {
        n5 = { label: t4 };
        break;
      }
    }
    if (!n5) return t3;
    const r4 = [];
    for (const a6 in i6) if (i6[a6][n5.label]) {
      const t4 = i6[a6][n5.label];
      if (t4.playlists && t4.playlists.length) r4.push.apply(r4, t4.playlists);
      else if (t4.uri) r4.push(t4);
      else if (e8.playlists.length) for (let i7 = 0; i7 < e8.playlists.length; i7++) {
        const t5 = e8.playlists[i7];
        t5.attributes && t5.attributes.AUDIO && t5.attributes.AUDIO === a6 && r4.push(t5);
      }
    }
    return r4.length ? r4 : t3;
  }
  setupMainPlaylistLoaderListeners_() {
    this.mainPlaylistLoader_.on("loadedmetadata", () => {
      const e8 = this.mainPlaylistLoader_.media(), t3 = 1.5 * e8.targetDuration * 1e3;
      Ju(this.mainPlaylistLoader_.main, this.mainPlaylistLoader_.media()) ? this.requestOptions_.timeout = 0 : this.requestOptions_.timeout = t3, e8.endList && "none" !== this.tech_.preload() && (this.mainSegmentLoader_.playlist(e8, this.requestOptions_), this.mainSegmentLoader_.load()), Mm({ sourceType: this.sourceType_, segmentLoaders: { AUDIO: this.audioSegmentLoader_, SUBTITLES: this.subtitleSegmentLoader_, main: this.mainSegmentLoader_ }, tech: this.tech_, requestOptions: this.requestOptions_, mainPlaylistLoader: this.mainPlaylistLoader_, vhs: this.vhs_, main: this.main(), mediaTypes: this.mediaTypes_, excludePlaylist: this.excludePlaylist.bind(this) }), this.triggerPresenceUsage_(this.main(), e8), this.setupFirstPlay(), !this.mediaTypes_.AUDIO.activePlaylistLoader || this.mediaTypes_.AUDIO.activePlaylistLoader.media() ? this.trigger("selectedinitialmedia") : this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata", () => {
        this.trigger("selectedinitialmedia");
      });
    }), this.mainPlaylistLoader_.on("loadedplaylist", () => {
      this.loadOnPlay_ && this.tech_.off("play", this.loadOnPlay_);
      let e8 = this.mainPlaylistLoader_.media();
      if (!e8) {
        let t3;
        if (this.attachContentSteeringListeners_(), this.initContentSteeringController_(), this.excludeUnsupportedVariants_(), this.enableLowInitialPlaylist && (t3 = this.selectInitialPlaylist()), t3 || (t3 = this.selectPlaylist()), !t3 || !this.shouldSwitchToMedia_(t3)) return;
        this.initialMedia_ = t3, this.switchMedia_(this.initialMedia_, "initial");
        if (!("vhs-json" === this.sourceType_ && this.initialMedia_.segments)) return;
        e8 = this.initialMedia_;
      }
      this.handleUpdatedMediaPlaylist(e8);
    }), this.mainPlaylistLoader_.on("error", () => {
      const e8 = this.mainPlaylistLoader_.error;
      this.excludePlaylist({ playlistToExclude: e8.playlist, error: e8 });
    }), this.mainPlaylistLoader_.on("mediachanging", () => {
      this.mainSegmentLoader_.abort(), this.mainSegmentLoader_.pause();
    }), this.mainPlaylistLoader_.on("mediachange", () => {
      const e8 = this.mainPlaylistLoader_.media(), t3 = 1.5 * e8.targetDuration * 1e3;
      Ju(this.mainPlaylistLoader_.main, this.mainPlaylistLoader_.media()) ? this.requestOptions_.timeout = 0 : this.requestOptions_.timeout = t3, "dash" === this.sourceType_ && this.mainPlaylistLoader_.isPaused && this.mainPlaylistLoader_.load(), this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.playlist(e8, this.requestOptions_), this.waitingForFastQualityPlaylistReceived_ ? this.runFastQualitySwitch_() : this.mainSegmentLoader_.load(), this.tech_.trigger({ type: "mediachange", bubbles: true });
    }), this.mainPlaylistLoader_.on("playlistunchanged", () => {
      const e8 = this.mainPlaylistLoader_.media();
      if ("playlist-unchanged" === e8.lastExcludeReason_) return;
      this.stuckAtPlaylistEnd_(e8) && (this.excludePlaylist({ error: { message: "Playlist no longer updating.", reason: "playlist-unchanged" } }), this.tech_.trigger("playliststuck"));
    }), this.mainPlaylistLoader_.on("renditiondisabled", () => {
      this.tech_.trigger({ type: "usage", name: "vhs-rendition-disabled" });
    }), this.mainPlaylistLoader_.on("renditionenabled", () => {
      this.tech_.trigger({ type: "usage", name: "vhs-rendition-enabled" });
    });
    ["manifestrequeststart", "manifestrequestcomplete", "manifestparsestart", "manifestparsecomplete", "playlistrequeststart", "playlistrequestcomplete", "playlistparsestart", "playlistparsecomplete", "renditiondisabled", "renditionenabled"].forEach((e8) => {
      this.mainPlaylistLoader_.on(e8, (e9) => {
        this.player_.trigger(Fe({}, e9));
      });
    });
  }
  handleUpdatedMediaPlaylist(e8) {
    this.useCueTags_ && this.updateAdCues_(e8), this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.playlist(e8, this.requestOptions_), this.waitingForFastQualityPlaylistReceived_ && this.runFastQualitySwitch_(), this.updateDuration(!e8.endList), this.tech_.paused() || (this.mainSegmentLoader_.load(), this.audioSegmentLoader_ && this.audioSegmentLoader_.load());
  }
  triggerPresenceUsage_(e8, t3) {
    const i6 = e8.mediaGroups || {};
    let s6 = true;
    const n5 = Object.keys(i6.AUDIO);
    for (const r4 in i6.AUDIO) for (const e9 in i6.AUDIO[r4]) {
      i6.AUDIO[r4][e9].uri || (s6 = false);
    }
    s6 && this.tech_.trigger({ type: "usage", name: "vhs-demuxed" }), Object.keys(i6.SUBTITLES).length && this.tech_.trigger({ type: "usage", name: "vhs-webvtt" }), $m.Playlist.isAes(t3) && this.tech_.trigger({ type: "usage", name: "vhs-aes" }), n5.length && Object.keys(i6.AUDIO[n5[0]]).length > 1 && this.tech_.trigger({ type: "usage", name: "vhs-alternate-audio" }), this.useCueTags_ && this.tech_.trigger({ type: "usage", name: "vhs-playlist-cue-tags" });
  }
  shouldSwitchToMedia_(e8) {
    const t3 = this.mainPlaylistLoader_.media() || this.mainPlaylistLoader_.pendingMedia_, i6 = this.tech_.currentTime(), s6 = this.bufferLowWaterLine(), n5 = this.bufferHighWaterLine(), r4 = this.tech_.buffered();
    return zm({ buffered: r4, currentTime: i6, currentPlaylist: t3, nextPlaylist: e8, bufferLowWaterLine: s6, bufferHighWaterLine: n5, duration: this.duration(), bufferBasedABR: this.bufferBasedABR, log: this.logger_ });
  }
  setupSegmentLoaderListeners_() {
    this.mainSegmentLoader_.on("bandwidthupdate", () => {
      this.checkABR_("bandwidthupdate"), this.tech_.trigger("bandwidthupdate");
    }), this.mainSegmentLoader_.on("timeout", () => {
      this.bufferBasedABR && this.mainSegmentLoader_.load();
    }), this.bufferBasedABR || this.mainSegmentLoader_.on("progress", () => {
      this.trigger("progress");
    }), this.mainSegmentLoader_.on("error", () => {
      const e9 = this.mainSegmentLoader_.error();
      this.excludePlaylist({ playlistToExclude: e9.playlist, error: e9 });
    }), this.mainSegmentLoader_.on("appenderror", () => {
      this.error = this.mainSegmentLoader_.error_, this.trigger("error");
    }), this.mainSegmentLoader_.on("syncinfoupdate", () => {
      this.onSyncInfoUpdate_();
    }), this.mainSegmentLoader_.on("timestampoffset", () => {
      this.tech_.trigger({ type: "usage", name: "vhs-timestamp-offset" });
    }), this.audioSegmentLoader_.on("syncinfoupdate", () => {
      this.onSyncInfoUpdate_();
    }), this.audioSegmentLoader_.on("appenderror", () => {
      this.error = this.audioSegmentLoader_.error_, this.trigger("error");
    }), this.mainSegmentLoader_.on("ended", () => {
      this.logger_("main segment loader ended"), this.onEndOfStream();
    }), this.timelineChangeController_.on("audioTimelineBehind", () => {
      const e9 = this.audioSegmentLoader_.pendingSegment_;
      if (!e9 || !e9.segment || !e9.segment.syncInfo) return;
      const t3 = e9.segment.syncInfo.end + 0.01;
      this.tech_.setCurrentTime(t3);
    }), this.timelineChangeController_.on("fixBadTimelineChange", () => {
      this.logger_("Fix bad timeline change. Restarting al segment loaders..."), this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.resetEverything(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.pause(), this.audioSegmentLoader_.resetEverything()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.pause(), this.subtitleSegmentLoader_.resetEverything()), this.load();
    }), this.mainSegmentLoader_.on("earlyabort", (e9) => {
      this.bufferBasedABR || (this.delegateLoaders_("all", ["abort"]), this.excludePlaylist({ error: { message: "Aborted early because there isn't enough bandwidth to complete the request without rebuffering." }, playlistExclusionDuration: jm }));
    });
    const e8 = () => {
      if (!this.sourceUpdater_.hasCreatedSourceBuffers()) return this.tryToCreateSourceBuffers_();
      const e9 = this.getCodecsOrExclude_();
      e9 && this.sourceUpdater_.addOrChangeSourceBuffers(e9);
    };
    this.mainSegmentLoader_.on("trackinfo", e8), this.audioSegmentLoader_.on("trackinfo", e8), this.mainSegmentLoader_.on("fmp4", () => {
      this.triggeredFmp4Usage || (this.tech_.trigger({ type: "usage", name: "vhs-fmp4" }), this.triggeredFmp4Usage = true);
    }), this.audioSegmentLoader_.on("fmp4", () => {
      this.triggeredFmp4Usage || (this.tech_.trigger({ type: "usage", name: "vhs-fmp4" }), this.triggeredFmp4Usage = true);
    }), this.audioSegmentLoader_.on("ended", () => {
      this.logger_("audioSegmentLoader ended"), this.onEndOfStream();
    });
    ["segmentselected", "segmentloadstart", "segmentloaded", "segmentkeyloadstart", "segmentkeyloadcomplete", "segmentdecryptionstart", "segmentdecryptioncomplete", "segmenttransmuxingstart", "segmenttransmuxingcomplete", "segmenttransmuxingtrackinfoavailable", "segmenttransmuxingtiminginfoavailable", "segmentappendstart", "appendsdone", "bandwidthupdated", "timelinechange", "codecschange"].forEach((e9) => {
      this.mainSegmentLoader_.on(e9, (e10) => {
        this.player_.trigger(Fe({}, e10));
      }), this.audioSegmentLoader_.on(e9, (e10) => {
        this.player_.trigger(Fe({}, e10));
      }), this.subtitleSegmentLoader_.on(e9, (e10) => {
        this.player_.trigger(Fe({}, e10));
      });
    });
  }
  mediaSecondsLoaded_() {
    return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded);
  }
  load() {
    this.mainSegmentLoader_.load(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.load(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.load();
  }
  pause() {
    this.mainSegmentLoader_.pause(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.pause(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.pause();
  }
  fastQualityChange_(e8 = this.selectPlaylist()) {
    e8 && e8 === this.mainPlaylistLoader_.media() ? this.logger_("skipping fastQualityChange because new media is same as old") : (this.switchMedia_(e8, "fast-quality"), this.waitingForFastQualityPlaylistReceived_ = true);
  }
  runFastQualitySwitch_() {
    this.waitingForFastQualityPlaylistReceived_ = false, this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.resetEverything(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.pause(), this.audioSegmentLoader_.resetEverything()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.pause(), this.subtitleSegmentLoader_.resetEverything()), this.load();
  }
  play() {
    if (this.setupFirstPlay()) return;
    this.tech_.ended() && this.tech_.setCurrentTime(0), this.hasPlayed_ && this.load();
    const e8 = this.tech_.seekable();
    return this.tech_.duration() === 1 / 0 && this.tech_.currentTime() < e8.start(0) ? this.tech_.setCurrentTime(e8.end(e8.length - 1)) : void 0;
  }
  setupFirstPlay() {
    const e8 = this.mainPlaylistLoader_.media();
    if (!e8 || this.tech_.paused() || this.hasPlayed_) return false;
    if (!e8.endList || e8.start) {
      const t3 = this.seekable();
      if (!t3.length) return false;
      const i6 = t3.end(0);
      let s6 = i6;
      if (e8.start) {
        const n5 = e8.start.timeOffset;
        s6 = n5 < 0 ? Math.max(i6 + n5, t3.start(0)) : Math.min(i6, n5);
      }
      this.trigger("firstplay"), this.tech_.setCurrentTime(s6);
    }
    return this.hasPlayed_ = true, this.load(), true;
  }
  handleSourceOpen_() {
    if (this.tryToCreateSourceBuffers_(), this.tech_.autoplay()) {
      const e8 = this.tech_.play();
      void 0 !== e8 && "function" == typeof e8.then && e8.then(null, (e9) => {
      });
    }
    this.trigger("sourceopen");
  }
  handleSourceEnded_() {
    if (!this.inbandTextTracks_.metadataTrack_) return;
    const e8 = this.inbandTextTracks_.metadataTrack_.cues;
    if (!e8 || !e8.length) return;
    const t3 = this.duration();
    e8[e8.length - 1].endTime = isNaN(t3) || Math.abs(t3) === 1 / 0 ? Number.MAX_VALUE : t3;
  }
  handleDurationChange_() {
    this.tech_.trigger("durationchange");
  }
  onEndOfStream() {
    let e8 = this.mainSegmentLoader_.ended_;
    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {
      const t3 = this.mainSegmentLoader_.getCurrentMediaInfo_();
      e8 = !t3 || t3.hasVideo ? e8 && this.audioSegmentLoader_.ended_ : this.audioSegmentLoader_.ended_;
    }
    e8 && (this.stopABRTimer_(), this.sourceUpdater_.endOfStream());
  }
  stuckAtPlaylistEnd_(e8) {
    if (!this.seekable().length) return false;
    const t3 = this.syncController_.getExpiredTime(e8, this.duration());
    if (null === t3) return false;
    const i6 = $m.Playlist.playlistEnd(e8, t3), s6 = this.tech_.currentTime(), n5 = this.tech_.buffered();
    if (!n5.length) return i6 - s6 <= wu;
    const r4 = n5.end(n5.length - 1);
    return r4 - s6 <= wu && i6 - r4 <= wu;
  }
  excludePlaylist({ playlistToExclude: e8 = this.mainPlaylistLoader_.media(), error: t3 = {}, playlistExclusionDuration: i6 }) {
    if (e8 = e8 || this.mainPlaylistLoader_.media(), i6 = i6 || t3.playlistExclusionDuration || this.playlistExclusionDuration, !e8) return this.error = t3, void ("open" !== this.mediaSource.readyState ? this.trigger("error") : this.sourceUpdater_.endOfStream("network"));
    e8.playlistErrors_++;
    const s6 = this.mainPlaylistLoader_.main.playlists, n5 = s6.filter(Ku), r4 = 1 === n5.length && n5[0] === e8;
    if (1 === s6.length && i6 !== 1 / 0) return du.log.warn(`Problem encountered with playlist ${e8.id}. Trying again since it is the only playlist.`), this.tech_.trigger("retryplaylist"), this.mainPlaylistLoader_.load(r4);
    if (r4) {
      if (this.main().contentSteering) {
        const t5 = this.pathwayAttribute_(e8), i7 = 1e3 * this.contentSteeringController_.steeringManifest.ttl;
        return this.contentSteeringController_.excludePathway(t5), this.excludeThenChangePathway_(), void setTimeout(() => {
          this.contentSteeringController_.addAvailablePathway(t5);
        }, i7);
      }
      let t4 = false;
      s6.forEach((i7) => {
        if (i7 === e8) return;
        const s7 = i7.excludeUntil;
        void 0 !== s7 && s7 !== 1 / 0 && (t4 = true, delete i7.excludeUntil);
      }), t4 && (du.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."), this.tech_.trigger("retryplaylist"));
    }
    let a6;
    a6 = e8.playlistErrors_ > this.maxPlaylistRetries ? 1 / 0 : Date.now() + 1e3 * i6, e8.excludeUntil = a6, t3.reason && (e8.lastExcludeReason_ = t3.reason), this.tech_.trigger("excludeplaylist"), this.tech_.trigger({ type: "usage", name: "vhs-rendition-excluded" });
    const o4 = this.selectPlaylist();
    if (!o4) return this.error = "Playback cannot continue. No available working or supported playlists.", void this.trigger("error");
    const l7 = t3.internal ? this.logger_ : du.log.warn, h2 = t3.message ? " " + t3.message : "";
    l7(`${t3.internal ? "Internal problem" : "Problem"} encountered with playlist ${e8.id}.${h2} Switching to playlist ${o4.id}.`), o4.attributes.AUDIO !== e8.attributes.AUDIO && this.delegateLoaders_("audio", ["abort", "pause"]), o4.attributes.SUBTITLES !== e8.attributes.SUBTITLES && this.delegateLoaders_("subtitle", ["abort", "pause"]), this.delegateLoaders_("main", ["abort", "pause"]);
    const u5 = o4.targetDuration / 2 * 1e3 || 5e3, d2 = "number" == typeof o4.lastRequest && Date.now() - o4.lastRequest <= u5;
    return this.switchMedia_(o4, "exclude", r4 || d2);
  }
  pauseLoading() {
    this.delegateLoaders_("all", ["abort", "pause"]), this.stopABRTimer_();
  }
  delegateLoaders_(e8, t3) {
    const i6 = [], s6 = "all" === e8;
    (s6 || "main" === e8) && i6.push(this.mainPlaylistLoader_);
    const n5 = [];
    (s6 || "audio" === e8) && n5.push("AUDIO"), (s6 || "subtitle" === e8) && (n5.push("CLOSED-CAPTIONS"), n5.push("SUBTITLES")), n5.forEach((e9) => {
      const t4 = this.mediaTypes_[e9] && this.mediaTypes_[e9].activePlaylistLoader;
      t4 && i6.push(t4);
    }), ["main", "audio", "subtitle"].forEach((t4) => {
      const s7 = this[`${t4}SegmentLoader_`];
      !s7 || e8 !== t4 && "all" !== e8 || i6.push(s7);
    }), i6.forEach((e9) => t3.forEach((t4) => {
      "function" == typeof e9[t4] && e9[t4]();
    }));
  }
  setCurrentTime(e8) {
    const t3 = ku(this.tech_.buffered(), e8);
    return this.mainPlaylistLoader_ && this.mainPlaylistLoader_.media() && this.mainPlaylistLoader_.media().segments ? t3 && t3.length ? e8 : (this.mainSegmentLoader_.pause(), this.mainSegmentLoader_.resetEverything(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.pause(), this.audioSegmentLoader_.resetEverything()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.pause(), this.subtitleSegmentLoader_.resetEverything()), void this.load()) : 0;
  }
  duration() {
    if (!this.mainPlaylistLoader_) return 0;
    const e8 = this.mainPlaylistLoader_.media();
    return e8 ? e8.endList ? this.mediaSource ? this.mediaSource.duration : $m.Playlist.duration(e8) : 1 / 0 : 0;
  }
  seekable() {
    return this.seekable_;
  }
  getSeekableRange_(e8, t3) {
    const i6 = e8.media();
    if (!i6) return null;
    const s6 = this.syncController_.getMediaSequenceSync(t3);
    if (s6 && s6.isReliable) {
      const e9 = s6.start, t4 = s6.end;
      if (!isFinite(e9) || !isFinite(t4)) return null;
      const n6 = $m.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main, i6);
      return Tu([[e9, Math.max(e9, t4 - n6)]]);
    }
    const n5 = this.syncController_.getExpiredTime(i6, this.duration());
    if (null === n5) return null;
    const r4 = $m.Playlist.seekable(i6, n5, $m.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main, i6));
    return r4.length ? r4 : null;
  }
  computeFinalSeekable_(e8, t3) {
    if (!t3) return e8;
    const i6 = e8.start(0), s6 = e8.end(0), n5 = t3.start(0), r4 = t3.end(0);
    return n5 > s6 || i6 > r4 ? e8 : Tu([[Math.max(i6, n5), Math.min(s6, r4)]]);
  }
  onSyncInfoUpdate_() {
    if (!this.mainPlaylistLoader_) return;
    const e8 = this.getSeekableRange_(this.mainPlaylistLoader_, "main");
    if (!e8) return;
    let t3;
    if (this.mediaTypes_.AUDIO.activePlaylistLoader && (t3 = this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader, "audio"), !t3)) return;
    const i6 = this.seekable_;
    if (this.seekable_ = this.computeFinalSeekable_(e8, t3), !this.seekable_) return;
    if (i6 && i6.length && this.seekable_.length && i6.start(0) === this.seekable_.start(0) && i6.end(0) === this.seekable_.end(0)) return;
    this.logger_(`seekable updated [${Du(this.seekable_)}]`);
    const s6 = { seekableRanges: this.seekable_ };
    this.trigger({ type: "seekablerangeschanged", metadata: s6 }), this.tech_.trigger("seekablechanged");
  }
  updateDuration(e8) {
    if (this.updateDuration_ && (this.mediaSource.removeEventListener("sourceopen", this.updateDuration_), this.updateDuration_ = null), "open" !== this.mediaSource.readyState) return this.updateDuration_ = this.updateDuration.bind(this, e8), void this.mediaSource.addEventListener("sourceopen", this.updateDuration_);
    if (e8) {
      const e9 = this.seekable();
      if (!e9.length) return;
      return void ((isNaN(this.mediaSource.duration) || this.mediaSource.duration < e9.end(e9.length - 1)) && this.sourceUpdater_.setDuration(e9.end(e9.length - 1)));
    }
    const t3 = this.tech_.buffered();
    let i6 = $m.Playlist.duration(this.mainPlaylistLoader_.media());
    t3.length > 0 && (i6 = Math.max(i6, t3.end(t3.length - 1))), this.mediaSource.duration !== i6 && this.sourceUpdater_.setDuration(i6);
  }
  dispose() {
    this.trigger("dispose"), this.decrypter_.terminate(), this.mainPlaylistLoader_.dispose(), this.mainSegmentLoader_.dispose(), this.contentSteeringController_.dispose(), this.keyStatusMap_.clear(), this.loadOnPlay_ && this.tech_.off("play", this.loadOnPlay_), ["AUDIO", "SUBTITLES"].forEach((e8) => {
      const t3 = this.mediaTypes_[e8].groups;
      for (const i6 in t3) t3[i6].forEach((e9) => {
        e9.playlistLoader && e9.playlistLoader.dispose();
      });
    }), this.audioSegmentLoader_.dispose(), this.subtitleSegmentLoader_.dispose(), this.sourceUpdater_.dispose(), this.timelineChangeController_.dispose(), this.stopABRTimer_(), this.updateDuration_ && this.mediaSource.removeEventListener("sourceopen", this.updateDuration_), this.mediaSource.removeEventListener("durationchange", this.handleDurationChange_), this.mediaSource.removeEventListener("sourceopen", this.handleSourceOpen_), this.mediaSource.removeEventListener("sourceended", this.handleSourceEnded_), this.off();
  }
  main() {
    return this.mainPlaylistLoader_.main;
  }
  media() {
    return this.mainPlaylistLoader_.media() || this.initialMedia_;
  }
  areMediaTypesKnown_() {
    const e8 = !!this.mediaTypes_.AUDIO.activePlaylistLoader, t3 = !!this.mainSegmentLoader_.getCurrentMediaInfo_(), i6 = !e8 || !!this.audioSegmentLoader_.getCurrentMediaInfo_();
    return !(!t3 || !i6);
  }
  getCodecsOrExclude_() {
    const e8 = { main: this.mainSegmentLoader_.getCurrentMediaInfo_() || {}, audio: this.audioSegmentLoader_.getCurrentMediaInfo_() || {} }, t3 = this.mainSegmentLoader_.getPendingSegmentPlaylist() || this.media();
    e8.video = e8.main;
    const i6 = Sd(this.main(), t3), s6 = {}, n5 = !!this.mediaTypes_.AUDIO.activePlaylistLoader;
    if (e8.main.hasVideo && (s6.video = i6.video || e8.main.videoCodec || ft), e8.main.isMuxed && (s6.video += `,${i6.audio || e8.main.audioCodec || gt}`), (e8.main.hasAudio && !e8.main.isMuxed || e8.audio.hasAudio || n5) && (s6.audio = i6.audio || e8.main.audioCodec || e8.audio.audioCodec || gt, e8.audio.isFmp4 = e8.main.hasAudio && !e8.main.isMuxed ? e8.main.isFmp4 : e8.audio.isFmp4), !s6.audio && !s6.video) return void this.excludePlaylist({ playlistToExclude: t3, error: { message: "Could not determine codecs for playlist." }, playlistExclusionDuration: 1 / 0 });
    const r4 = (e9, t4) => e9 ? pt(t4, this.usingManagedMediaSource_) : mt(t4), a6 = {};
    let o4;
    if (["video", "audio"].forEach(function(t4) {
      if (s6.hasOwnProperty(t4) && !r4(e8[t4].isFmp4, s6[t4])) {
        const i7 = e8[t4].isFmp4 ? "browser" : "muxer";
        a6[i7] = a6[i7] || [], a6[i7].push(s6[t4]), "audio" === t4 && (o4 = i7);
      }
    }), n5 && o4 && t3.attributes.AUDIO) {
      const e9 = t3.attributes.AUDIO;
      this.main().playlists.forEach((i7) => {
        (i7.attributes && i7.attributes.AUDIO) === e9 && i7 !== t3 && (i7.excludeUntil = 1 / 0);
      }), this.logger_(`excluding audio group ${e9} as ${o4} does not support codec(s): "${s6.audio}"`);
    }
    if (Object.keys(a6).length) {
      const e9 = Object.keys(a6).reduce((e10, t4) => (e10 && (e10 += ", "), e10 += `${t4} does not support codec(s): "${a6[t4].join(",")}"`), "") + ".";
      return void this.excludePlaylist({ playlistToExclude: t3, error: { internal: true, message: e9 }, playlistExclusionDuration: 1 / 0 });
    }
    if (this.sourceUpdater_.hasCreatedSourceBuffers() && !this.sourceUpdater_.canChangeType()) {
      const e9 = [];
      if (["video", "audio"].forEach((t4) => {
        const i7 = (lt(this.sourceUpdater_.codecs[t4] || "")[0] || {}).type, n6 = (lt(s6[t4] || "")[0] || {}).type;
        i7 && n6 && i7.toLowerCase() !== n6.toLowerCase() && e9.push(`"${this.sourceUpdater_.codecs[t4]}" -> "${s6[t4]}"`);
      }), e9.length) return void this.excludePlaylist({ playlistToExclude: t3, error: { message: `Codec switching not supported: ${e9.join(", ")}.`, internal: true }, playlistExclusionDuration: 1 / 0 });
    }
    return s6;
  }
  tryToCreateSourceBuffers_() {
    if ("open" !== this.mediaSource.readyState || this.sourceUpdater_.hasCreatedSourceBuffers()) return;
    if (!this.areMediaTypesKnown_()) return;
    const e8 = this.getCodecsOrExclude_();
    if (!e8) return;
    this.sourceUpdater_.createSourceBuffers(e8);
    const t3 = [e8.video, e8.audio].filter(Boolean).join(",");
    this.excludeIncompatibleVariants_(t3);
  }
  excludeUnsupportedVariants_() {
    const e8 = this.main().playlists, t3 = [];
    Object.keys(e8).forEach((i6) => {
      const s6 = e8[i6];
      if (-1 !== t3.indexOf(s6.id)) return;
      t3.push(s6.id);
      const n5 = Sd(this.main, s6), r4 = [];
      !n5.audio || mt(n5.audio) || pt(n5.audio, this.usingManagedMediaSource_) || r4.push(`audio codec ${n5.audio}`), !n5.video || mt(n5.video) || pt(n5.video, this.usingManagedMediaSource_) || r4.push(`video codec ${n5.video}`), n5.text && "stpp.ttml.im1t" === n5.text && r4.push(`text codec ${n5.text}`), r4.length && (s6.excludeUntil = 1 / 0, this.logger_(`excluding ${s6.id} for unsupported: ${r4.join(", ")}`));
    });
  }
  excludeIncompatibleVariants_(e8) {
    const t3 = [], i6 = this.main().playlists, s6 = bd(lt(e8)), n5 = Td(s6), r4 = s6.video && lt(s6.video)[0] || null, a6 = s6.audio && lt(s6.audio)[0] || null;
    Object.keys(i6).forEach((e9) => {
      const s7 = i6[e9];
      if (-1 !== t3.indexOf(s7.id) || s7.excludeUntil === 1 / 0) return;
      t3.push(s7.id);
      const o4 = [], l7 = Sd(this.mainPlaylistLoader_.main, s7), h2 = Td(l7);
      if (l7.audio || l7.video) {
        if (h2 !== n5 && o4.push(`codec count "${h2}" !== "${n5}"`), !this.sourceUpdater_.canChangeType()) {
          const e10 = l7.video && lt(l7.video)[0] || null, t4 = l7.audio && lt(l7.audio)[0] || null;
          e10 && r4 && e10.type.toLowerCase() !== r4.type.toLowerCase() && o4.push(`video codec "${e10.type}" !== "${r4.type}"`), t4 && a6 && t4.type.toLowerCase() !== a6.type.toLowerCase() && o4.push(`audio codec "${t4.type}" !== "${a6.type}"`);
        }
        o4.length && (s7.excludeUntil = 1 / 0, this.logger_(`excluding ${s7.id}: ${o4.join(" && ")}`));
      }
    });
  }
  updateAdCues_(e8) {
    let t3 = 0;
    const i6 = this.seekable();
    i6.length && (t3 = i6.start(0)), cm(e8, this.cueTagsTrack_, t3);
  }
  goalBufferLength() {
    const e8 = this.tech_.currentTime(), t3 = yc.GOAL_BUFFER_LENGTH, i6 = yc.GOAL_BUFFER_LENGTH_RATE, s6 = Math.max(t3, yc.MAX_GOAL_BUFFER_LENGTH);
    return Math.min(t3 + e8 * i6, s6);
  }
  bufferLowWaterLine() {
    const e8 = this.tech_.currentTime(), t3 = yc.BUFFER_LOW_WATER_LINE, i6 = yc.BUFFER_LOW_WATER_LINE_RATE, s6 = Math.max(t3, yc.MAX_BUFFER_LOW_WATER_LINE), n5 = Math.max(t3, yc.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);
    return Math.min(t3 + e8 * i6, this.bufferBasedABR ? n5 : s6);
  }
  bufferHighWaterLine() {
    return yc.BUFFER_HIGH_WATER_LINE;
  }
  addDateRangesToTextTrack_(e8) {
    Sp(this.inbandTextTracks_, "com.apple.streaming", this.tech_), Tp({ inbandTextTracks: this.inbandTextTracks_, dateRanges: e8 });
  }
  addMetadataToTextTrack(e8, t3, i6) {
    const s6 = this.sourceUpdater_.videoBuffer ? this.sourceUpdater_.videoTimestampOffset() : this.sourceUpdater_.audioTimestampOffset();
    Sp(this.inbandTextTracks_, e8, this.tech_), _p({ inbandTextTracks: this.inbandTextTracks_, metadataArray: t3, timestampOffset: s6, videoDuration: i6 });
  }
  pathwayAttribute_(e8) {
    return e8.attributes["PATHWAY-ID"] || e8.attributes.serviceLocation;
  }
  initContentSteeringController_() {
    const e8 = this.main();
    if (e8.contentSteering) {
      for (const t3 of e8.playlists) this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t3));
      this.contentSteeringController_.assignTagProperties(e8.uri, e8.contentSteering), this.contentSteeringController_.queryBeforeStart ? this.contentSteeringController_.requestSteeringManifest(true) : this.tech_.one("canplay", () => {
        this.contentSteeringController_.requestSteeringManifest();
      });
    }
  }
  resetContentSteeringController_() {
    this.contentSteeringController_.clearAvailablePathways(), this.contentSteeringController_.dispose(), this.initContentSteeringController_();
  }
  attachContentSteeringListeners_() {
    this.contentSteeringController_.on("content-steering", this.excludeThenChangePathway_.bind(this));
    ["contentsteeringloadstart", "contentsteeringloadcomplete", "contentsteeringparsed"].forEach((e8) => {
      this.contentSteeringController_.on(e8, (e9) => {
        this.trigger(Fe({}, e9));
      });
    }), "dash" === this.sourceType_ && this.mainPlaylistLoader_.on("loadedplaylist", () => {
      const e8 = this.main();
      (this.contentSteeringController_.didDASHTagChange(e8.uri, e8.contentSteering) || (() => {
        const t3 = this.contentSteeringController_.getAvailablePathways(), i6 = [];
        for (const s6 of e8.playlists) {
          const e9 = s6.attributes.serviceLocation;
          if (e9 && (i6.push(e9), !t3.has(e9))) return true;
        }
        return !(i6.length || !t3.size);
      })()) && this.resetContentSteeringController_();
    });
  }
  excludeThenChangePathway_() {
    const e8 = this.contentSteeringController_.getPathway();
    if (!e8) return;
    this.handlePathwayClones_();
    const t3 = this.main().playlists, i6 = /* @__PURE__ */ new Set();
    let s6 = false;
    Object.keys(t3).forEach((n5) => {
      const r4 = t3[n5], a6 = this.pathwayAttribute_(r4), o4 = a6 && e8 !== a6;
      r4.excludeUntil === 1 / 0 && "content-steering" === r4.lastExcludeReason_ && !o4 && (delete r4.excludeUntil, delete r4.lastExcludeReason_, s6 = true);
      const l7 = !r4.excludeUntil && r4.excludeUntil !== 1 / 0;
      !i6.has(r4.id) && o4 && l7 && (i6.add(r4.id), r4.excludeUntil = 1 / 0, r4.lastExcludeReason_ = "content-steering", this.logger_(`excluding ${r4.id} for ${r4.lastExcludeReason_}`));
    }), "DASH" === this.contentSteeringController_.manifestType_ && Object.keys(this.mediaTypes_).forEach((t4) => {
      const i7 = this.mediaTypes_[t4];
      if (i7.activePlaylistLoader) {
        const t5 = i7.activePlaylistLoader.media_;
        t5 && t5.attributes.serviceLocation !== e8 && (s6 = true);
      }
    }), s6 && this.changeSegmentPathway_();
  }
  handlePathwayClones_() {
    const e8 = this.main().playlists, t3 = this.contentSteeringController_.currentPathwayClones, i6 = this.contentSteeringController_.nextPathwayClones;
    if (t3 && t3.size || i6 && i6.size) {
      for (const [e9, s6] of t3.entries()) {
        i6.get(e9) || (this.mainPlaylistLoader_.updateOrDeleteClone(s6), this.contentSteeringController_.excludePathway(e9));
      }
      for (const [s6, n5] of i6.entries()) {
        const i7 = t3.get(s6);
        if (!i7) {
          e8.filter((e9) => e9.attributes["PATHWAY-ID"] === n5["BASE-ID"]).forEach((e9) => {
            this.mainPlaylistLoader_.addClonePathway(n5, e9);
          }), this.contentSteeringController_.addAvailablePathway(s6);
          continue;
        }
        this.equalPathwayClones_(i7, n5) || (this.mainPlaylistLoader_.updateOrDeleteClone(n5, true), this.contentSteeringController_.addAvailablePathway(s6));
      }
      this.contentSteeringController_.currentPathwayClones = new Map(JSON.parse(JSON.stringify([...i6])));
    }
  }
  equalPathwayClones_(e8, t3) {
    if (e8["BASE-ID"] !== t3["BASE-ID"] || e8.ID !== t3.ID || e8["URI-REPLACEMENT"].HOST !== t3["URI-REPLACEMENT"].HOST) return false;
    const i6 = e8["URI-REPLACEMENT"].PARAMS, s6 = t3["URI-REPLACEMENT"].PARAMS;
    for (const n5 in i6) if (i6[n5] !== s6[n5]) return false;
    for (const n5 in s6) if (i6[n5] !== s6[n5]) return false;
    return true;
  }
  changeSegmentPathway_() {
    const e8 = this.selectPlaylist();
    this.pauseLoading(), "DASH" === this.contentSteeringController_.manifestType_ && this.switchMediaForDASHContentSteering_(), this.switchMedia_(e8, "content-steering");
  }
  excludeNonUsablePlaylistsByKeyId_() {
    if (!this.mainPlaylistLoader_ || !this.mainPlaylistLoader_.main) return;
    let e8 = 0;
    const t3 = "non-usable";
    this.mainPlaylistLoader_.main.playlists.forEach((i6) => {
      const s6 = this.mainPlaylistLoader_.getKeyIdSet(i6);
      s6 && s6.size && s6.forEach((s7) => {
        const n5 = "usable", r4 = this.keyStatusMap_.has(s7) && this.keyStatusMap_.get(s7) === n5, a6 = i6.lastExcludeReason_ === t3 && i6.excludeUntil === 1 / 0;
        r4 ? r4 && a6 && (delete i6.excludeUntil, delete i6.lastExcludeReason_, this.logger_(`enabling playlist ${i6.id} because key ID ${s7} is ${n5}`)) : (i6.excludeUntil !== 1 / 0 && i6.lastExcludeReason_ !== t3 && (i6.excludeUntil = 1 / 0, i6.lastExcludeReason_ = t3, this.logger_(`excluding playlist ${i6.id} because the key ID ${s7} doesn't exist in the keyStatusMap or is not ${n5}`)), e8++);
      });
    }), e8 >= this.mainPlaylistLoader_.main.playlists.length && this.mainPlaylistLoader_.main.playlists.forEach((e9) => {
      const i6 = e9 && e9.attributes && e9.attributes.RESOLUTION && e9.attributes.RESOLUTION.height < 720, s6 = e9.excludeUntil === 1 / 0 && e9.lastExcludeReason_ === t3;
      i6 && s6 && (delete e9.excludeUntil, du.log.warn(`enabling non-HD playlist ${e9.id} because all playlists were excluded due to ${t3} key IDs`));
    });
  }
  addKeyStatus_(e8, t3) {
    const i6 = ("string" == typeof e8 ? e8 : om(e8)).slice(0, 32).toLowerCase();
    this.logger_(`KeyStatus '${t3}' with key ID ${i6} added to the keyStatusMap`), this.keyStatusMap_.set(i6, t3);
  }
  updatePlaylistByKeyStatus(e8, t3) {
    this.addKeyStatus_(e8, t3), this.waitingForFastQualityPlaylistReceived_ || this.excludeNonUsableThenChangePlaylist_(), this.mainPlaylistLoader_.off("loadedplaylist", this.excludeNonUsableThenChangePlaylist_.bind(this)), this.mainPlaylistLoader_.on("loadedplaylist", this.excludeNonUsableThenChangePlaylist_.bind(this));
  }
  excludeNonUsableThenChangePlaylist_() {
    this.excludeNonUsablePlaylistsByKeyId_(), this.fastQualityChange_();
  }
};
var Gm = (e8, t3, i6) => (s6) => {
  const n5 = e8.main.playlists[t3], r4 = Xu(n5), a6 = Ku(n5);
  if (void 0 === s6) return a6;
  s6 ? delete n5.disabled : n5.disabled = true;
  const o4 = { renditionInfo: { id: t3, bandwidth: n5.attributes.BANDWIDTH, resolution: n5.attributes.RESOLUTION, codecs: n5.attributes.CODECS }, cause: "fast-quality" };
  return s6 === a6 || r4 || (s6 ? (i6(n5), e8.trigger({ type: "renditionenabled", metadata: o4 })) : e8.trigger({ type: "renditiondisabled", metadata: o4 })), s6;
};
var Xm = class {
  constructor(e8, t3, i6) {
    const { playlistController_: s6 } = e8, n5 = s6.fastQualityChange_.bind(s6);
    if (t3.attributes) {
      const e9 = t3.attributes.RESOLUTION;
      this.width = e9 && e9.width, this.height = e9 && e9.height, this.bandwidth = t3.attributes.BANDWIDTH, this.frameRate = t3.attributes["FRAME-RATE"];
    }
    this.codecs = Sd(s6.main(), t3), this.playlist = t3, this.id = i6, this.enabled = Gm(e8.playlists, t3.id, n5);
  }
};
var Km = function(e8) {
  e8.representations = () => {
    const t3 = e8.playlistController_.main(), i6 = td(t3) ? e8.playlistController_.getAudioTrackPlaylists_() : t3.playlists;
    return i6 ? i6.filter((e9) => !Xu(e9)).map((t4, i7) => new Xm(e8, t4, t4.id)) : [];
  };
};
var Ym = ["seeking", "seeked", "pause", "playing", "error"];
var Qm = class extends du.EventTarget {
  constructor(e8) {
    super(), this.playlistController_ = e8.playlistController, this.tech_ = e8.tech, this.seekable = e8.seekable, this.allowSeeksWithinUnsafeLiveWindow = e8.allowSeeksWithinUnsafeLiveWindow, this.liveRangeSafeTimeDelta = e8.liveRangeSafeTimeDelta, this.media = e8.media, this.playedRanges_ = [], this.consecutiveUpdates = 0, this.lastRecordedTime = null, this.checkCurrentTimeTimeout_ = null, this.logger_ = vu("PlaybackWatcher"), this.logger_("initialize");
    const t3 = () => this.monitorCurrentTime_(), i6 = () => this.monitorCurrentTime_(), s6 = () => this.techWaiting_(), n5 = () => this.resetTimeUpdate_(), r4 = this.playlistController_, a6 = ["main", "subtitle", "audio"], o4 = {};
    a6.forEach((e9) => {
      o4[e9] = { reset: () => this.resetSegmentDownloads_(e9), updateend: () => this.checkSegmentDownloads_(e9) }, r4[`${e9}SegmentLoader_`].on("appendsdone", o4[e9].updateend), r4[`${e9}SegmentLoader_`].on("playlistupdate", o4[e9].reset), this.tech_.on(["seeked", "seeking"], o4[e9].reset);
    });
    const l7 = (e9) => {
      ["main", "audio"].forEach((t4) => {
        r4[`${t4}SegmentLoader_`][e9]("appended", this.seekingAppendCheck_);
      });
    };
    this.seekingAppendCheck_ = () => {
      this.fixesBadSeeks_() && (this.consecutiveUpdates = 0, this.lastRecordedTime = this.tech_.currentTime(), l7("off"));
    }, this.clearSeekingAppendCheck_ = () => l7("off"), this.watchForBadSeeking_ = () => {
      this.clearSeekingAppendCheck_(), l7("on");
    }, this.tech_.on("seeked", this.clearSeekingAppendCheck_), this.tech_.on("seeking", this.watchForBadSeeking_), this.tech_.on("waiting", s6), this.tech_.on(Ym, n5), this.tech_.on("canplay", i6), this.tech_.one("play", t3), this.dispose = () => {
      this.clearSeekingAppendCheck_(), this.logger_("dispose"), this.tech_.off("waiting", s6), this.tech_.off(Ym, n5), this.tech_.off("canplay", i6), this.tech_.off("play", t3), this.tech_.off("seeking", this.watchForBadSeeking_), this.tech_.off("seeked", this.clearSeekingAppendCheck_), a6.forEach((e9) => {
        r4[`${e9}SegmentLoader_`].off("appendsdone", o4[e9].updateend), r4[`${e9}SegmentLoader_`].off("playlistupdate", o4[e9].reset), this.tech_.off(["seeked", "seeking"], o4[e9].reset);
      }), this.checkCurrentTimeTimeout_ && b4.clearTimeout(this.checkCurrentTimeTimeout_), this.resetTimeUpdate_();
    };
  }
  monitorCurrentTime_() {
    this.checkCurrentTime_(), this.checkCurrentTimeTimeout_ && b4.clearTimeout(this.checkCurrentTimeTimeout_), this.checkCurrentTimeTimeout_ = b4.setTimeout(this.monitorCurrentTime_.bind(this), 250);
  }
  resetSegmentDownloads_(e8) {
    const t3 = this.playlistController_[`${e8}SegmentLoader_`];
    this[`${e8}StalledDownloads_`] > 0 && this.logger_(`resetting possible stalled download count for ${e8} loader`), this[`${e8}StalledDownloads_`] = 0, this[`${e8}Buffered_`] = t3.buffered_();
  }
  checkSegmentDownloads_(e8) {
    const t3 = this.playlistController_, i6 = t3[`${e8}SegmentLoader_`], s6 = i6.buffered_(), n5 = Ou(this[`${e8}Buffered_`], s6);
    if (this[`${e8}Buffered_`] = s6, n5) {
      const i7 = { bufferedRanges: s6 };
      return t3.trigger({ type: "bufferedrangeschanged", metadata: i7 }), void this.resetSegmentDownloads_(e8);
    }
    this[`${e8}StalledDownloads_`]++, this.logger_(`found #${this[`${e8}StalledDownloads_`]} ${e8} appends that did not increase buffer (possible stalled download)`, { playlistId: i6.playlist_ && i6.playlist_.id, buffered: Lu(s6) }), this[`${e8}StalledDownloads_`] < 10 || (this.logger_(`${e8} loader stalled download exclusion`), this.resetSegmentDownloads_(e8), this.tech_.trigger({ type: "usage", name: `vhs-${e8}-download-exclusion` }), "subtitle" !== e8 && t3.excludePlaylist({ error: { message: `Excessive ${e8} segment downloading detected.` }, playlistExclusionDuration: 1 / 0 }));
  }
  checkCurrentTime_() {
    if (this.tech_.paused() || this.tech_.seeking()) return;
    const e8 = this.tech_.currentTime(), t3 = this.tech_.buffered();
    if (this.lastRecordedTime === e8 && (!t3.length || e8 + wu >= t3.end(t3.length - 1))) return this.techWaiting_();
    if (this.consecutiveUpdates >= 5 && e8 === this.lastRecordedTime) this.consecutiveUpdates++, this.waiting_();
    else if (e8 === this.lastRecordedTime) this.consecutiveUpdates++;
    else {
      this.playedRanges_.push(Tu([this.lastRecordedTime, e8]));
      const t4 = { playedRanges: this.playedRanges_ };
      this.playlistController_.trigger({ type: "playedrangeschanged", metadata: t4 }), this.consecutiveUpdates = 0, this.lastRecordedTime = e8;
    }
  }
  resetTimeUpdate_() {
    this.consecutiveUpdates = 0;
  }
  fixesBadSeeks_() {
    if (!this.tech_.seeking()) return false;
    const e8 = this.seekable(), t3 = this.tech_.currentTime();
    let i6;
    if (this.afterSeekableWindow_(e8, t3, this.media(), this.allowSeeksWithinUnsafeLiveWindow)) {
      i6 = e8.end(e8.length - 1);
    }
    if (this.beforeSeekableWindow_(e8, t3)) {
      const t4 = e8.start(0);
      i6 = t4 + (t4 === e8.end(0) ? 0 : wu);
    }
    if (void 0 !== i6) return this.logger_(`Trying to seek outside of seekable at time ${t3} with seekable range ${Du(e8)}. Seeking to ${i6}.`), this.tech_.setCurrentTime(i6), true;
    const s6 = this.playlistController_.sourceUpdater_, n5 = this.tech_.buffered(), r4 = s6.audioBuffer ? s6.audioBuffered() : null, a6 = s6.videoBuffer ? s6.videoBuffered() : null, o4 = this.media(), l7 = o4.partTargetDuration ? o4.partTargetDuration : 2 * (o4.targetDuration - Eu), h2 = [r4, a6];
    for (let d2 = 0; d2 < h2.length; d2++) {
      if (!h2[d2]) continue;
      if (Ru(h2[d2], t3) < l7) return false;
    }
    const u5 = Iu(n5, t3);
    return 0 !== u5.length && (i6 = u5.start(0) + wu, this.logger_(`Buffered region starts (${u5.start(0)})  just beyond seek point (${t3}). Seeking to ${i6}.`), this.tech_.setCurrentTime(i6), true);
  }
  waiting_() {
    if (this.techWaiting_()) return;
    const e8 = this.tech_.currentTime(), t3 = this.tech_.buffered(), i6 = ku(t3, e8);
    return i6.length && e8 + 3 <= i6.end(0) ? (this.resetTimeUpdate_(), this.tech_.setCurrentTime(e8), this.logger_(`Stopped at ${e8} while inside a buffered region [${i6.start(0)} -> ${i6.end(0)}]. Attempting to resume playback by seeking to the current time.`), void this.tech_.trigger({ type: "usage", name: "vhs-unknown-waiting" })) : void 0;
  }
  techWaiting_() {
    const e8 = this.seekable(), t3 = this.tech_.currentTime();
    if (this.tech_.seeking()) return true;
    if (this.beforeSeekableWindow_(e8, t3)) {
      const i7 = e8.end(e8.length - 1);
      return this.logger_(`Fell out of live window at time ${t3}. Seeking to live point (seekable end) ${i7}`), this.resetTimeUpdate_(), this.tech_.setCurrentTime(i7), this.tech_.trigger({ type: "usage", name: "vhs-live-resync" }), true;
    }
    const i6 = this.tech_.vhs.playlistController_.sourceUpdater_, s6 = this.tech_.buffered();
    if (this.videoUnderflow_({ audioBuffered: i6.audioBuffered(), videoBuffered: i6.videoBuffered(), currentTime: t3 })) return this.resetTimeUpdate_(), this.tech_.setCurrentTime(t3), this.tech_.trigger({ type: "usage", name: "vhs-video-underflow" }), true;
    const n5 = Iu(s6, t3);
    return n5.length > 0 && (this.logger_(`Stopped at ${t3} and seeking to ${n5.start(0)}`), this.resetTimeUpdate_(), this.skipTheGap_(t3), true);
  }
  afterSeekableWindow_(e8, t3, i6, s6 = false) {
    if (!e8.length) return false;
    let n5 = e8.end(e8.length - 1) + wu;
    const r4 = !i6.endList, a6 = "number" == typeof i6.partTargetDuration;
    return r4 && (a6 || s6) && (n5 = e8.end(e8.length - 1) + 3 * i6.targetDuration), t3 > n5;
  }
  beforeSeekableWindow_(e8, t3) {
    return !!(e8.length && e8.start(0) > 0 && t3 < e8.start(0) - this.liveRangeSafeTimeDelta);
  }
  videoUnderflow_({ videoBuffered: e8, audioBuffered: t3, currentTime: i6 }) {
    if (!e8) return;
    let s6;
    if (e8.length && t3.length) {
      const n5 = ku(e8, i6 - 3), r4 = ku(e8, i6), a6 = ku(t3, i6);
      a6.length && !r4.length && n5.length && (s6 = { start: n5.end(0), end: a6.end(0) });
    } else {
      Iu(e8, i6).length || (s6 = this.gapFromVideoUnderflow_(e8, i6));
    }
    return !!s6 && (this.logger_(`Encountered a gap in video from ${s6.start} to ${s6.end}. Seeking to current time ${i6}`), true);
  }
  skipTheGap_(e8) {
    const t3 = this.tech_.buffered(), i6 = this.tech_.currentTime(), s6 = Iu(t3, i6);
    if (this.resetTimeUpdate_(), 0 === s6.length || i6 !== e8) return;
    this.logger_("skipTheGap_:", "currentTime:", i6, "scheduled currentTime:", e8, "nextRange start:", s6.start(0)), this.tech_.setCurrentTime(s6.start(0) + Eu);
    const n5 = { gapInfo: { from: i6, to: s6.start(0) } };
    this.playlistController_.trigger({ type: "gapjumped", metadata: n5 }), this.tech_.trigger({ type: "usage", name: "vhs-gap-skip" });
  }
  gapFromVideoUnderflow_(e8, t3) {
    const i6 = xu(e8);
    for (let s6 = 0; s6 < i6.length; s6++) {
      const e9 = i6.start(s6), n5 = i6.end(s6);
      if (t3 - e9 < 4 && t3 - e9 > 2) return { start: e9, end: n5 };
    }
    return null;
  }
};
var Jm = { errorInterval: 30, getSource(e8) {
  return e8(this.tech({ IWillNotUseThisInPlugins: true }).currentSource_ || this.currentSource());
} };
var Zm = function(e8, t3) {
  let i6 = 0, s6 = 0;
  const n5 = bu(Jm, t3);
  e8.ready(() => {
    e8.trigger({ type: "usage", name: "vhs-error-reload-initialized" });
  });
  const r4 = function() {
    s6 && e8.currentTime(s6);
  }, a6 = function(t4) {
    null != t4 && (s6 = e8.duration() !== 1 / 0 && e8.currentTime() || 0, e8.one("loadedmetadata", r4), e8.src(t4), e8.trigger({ type: "usage", name: "vhs-error-reload" }), e8.play());
  }, o4 = function() {
    if (Date.now() - i6 < 1e3 * n5.errorInterval) e8.trigger({ type: "usage", name: "vhs-error-reload-canceled" });
    else {
      if (n5.getSource && "function" == typeof n5.getSource) return i6 = Date.now(), n5.getSource.call(e8, a6);
      du.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");
    }
  }, l7 = function() {
    e8.off("loadedmetadata", r4), e8.off("error", o4), e8.off("dispose", l7);
  }, h2 = function(t4) {
    l7(), Zm(e8, t4);
  };
  e8.on("error", o4), e8.on("dispose", l7), e8.reloadSourceOnError = h2;
};
var eg = function(e8) {
  Zm(this, e8);
};
var tg = "3.17.0";
var ig = "7.1.0";
var sg = "1.3.1";
var ng = "7.2.0";
var rg = "4.0.2";
var ag = { PlaylistLoader: Od, Playlist: id, utils: Kd, STANDARD_PLAYLIST_SELECTOR: hp, INITIAL_PLAYLIST_SELECTOR: cp, lastBandwidthSelector: hp, movingAverageBandwidthSelector: up, comparePlaylistBandwidth: ap, comparePlaylistResolution: op, xhr: Ud() };
Object.keys(yc).forEach((e8) => {
  Object.defineProperty(ag, e8, { get: () => (du.log.warn(`using Vhs.${e8} is UNSAFE be sure you know what you are doing`), yc[e8]), set(t3) {
    du.log.warn(`using Vhs.${e8} is UNSAFE be sure you know what you are doing`), "number" != typeof t3 || t3 < 0 ? du.log.warn(`value of Vhs.${e8} must be greater than or equal to 0`) : yc[e8] = t3;
  } });
});
var og = "videojs-vhs";
var lg = function(e8, t3) {
  const i6 = t3.media();
  let s6 = -1;
  for (let n5 = 0; n5 < e8.length; n5++) if (e8[n5].id === i6.id) {
    s6 = n5;
    break;
  }
  e8.selectedIndex_ = s6, e8.trigger({ selectedIndex: s6, type: "change" });
};
var hg = function(e8, t3) {
  t3.representations().forEach((t4) => {
    e8.addQualityLevel(t4);
  }), lg(e8, t3.playlists);
};
ag.canPlaySource = function() {
  return du.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.");
};
var ug = (e8, t3, i6) => {
  if (!e8) return e8;
  let s6 = {};
  t3 && t3.attributes && t3.attributes.CODECS && (s6 = bd(lt(t3.attributes.CODECS))), i6 && i6.attributes && i6.attributes.CODECS && (s6.audio = i6.attributes.CODECS);
  const n5 = ct(s6.video), r4 = ct(s6.audio), a6 = {};
  for (const o4 in e8) a6[o4] = {}, r4 && (a6[o4].audioContentType = r4), n5 && (a6[o4].videoContentType = n5), t3.contentProtection && t3.contentProtection[o4] && t3.contentProtection[o4].pssh && (a6[o4].pssh = t3.contentProtection[o4].pssh), "string" == typeof e8[o4] && (a6[o4].url = e8[o4]);
  return bu(e8, a6);
};
var dg = (e8, t3) => e8.reduce((e9, i6) => {
  if (!i6.contentProtection) return e9;
  const s6 = t3.reduce((e10, t4) => {
    const s7 = i6.contentProtection[t4];
    return s7 && s7.pssh && (e10[t4] = { pssh: s7.pssh }), e10;
  }, {});
  return Object.keys(s6).length && e9.push(s6), e9;
}, []);
var cg = ({ player: e8, sourceKeySystems: t3, audioMedia: i6, mainPlaylists: s6 }) => {
  if (!e8.eme.initializeMediaKeys) return Promise.resolve();
  const n5 = i6 ? s6.concat([i6]) : s6, r4 = dg(n5, Object.keys(t3)), a6 = [], o4 = [];
  return r4.forEach((t4) => {
    o4.push(new Promise((t5, i7) => {
      e8.tech_.one("keysessioncreated", t5);
    })), a6.push(new Promise((i7, s7) => {
      e8.eme.initializeMediaKeys({ keySystems: t4 }, (e9) => {
        e9 ? s7(e9) : i7();
      });
    }));
  }), Promise.race([Promise.all(a6), Promise.race(o4)]);
};
var pg = ({ player: e8, sourceKeySystems: t3, media: i6, audioMedia: s6 }) => {
  const n5 = ug(t3, i6, s6);
  return !!n5 && (e8.currentSource().keySystems = n5, !(n5 && !e8.eme) || (du.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"), false));
};
var mg = () => {
  if (!b4.localStorage) return null;
  const e8 = b4.localStorage.getItem(og);
  if (!e8) return null;
  try {
    return JSON.parse(e8);
  } catch (t3) {
    return null;
  }
};
var gg = (e8) => {
  if (!b4.localStorage) return false;
  let t3 = mg();
  t3 = t3 ? bu(t3, e8) : e8;
  try {
    b4.localStorage.setItem(og, JSON.stringify(t3));
  } catch (i6) {
    return false;
  }
  return t3;
};
var fg = (e8) => 0 === e8.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,") ? JSON.parse(e8.substring(e8.indexOf(",") + 1)) : e8;
var yg = (e8, t3) => {
  e8._requestCallbackSet || (e8._requestCallbackSet = /* @__PURE__ */ new Set()), e8._requestCallbackSet.add(t3);
};
var _g = (e8, t3) => {
  e8._responseCallbackSet || (e8._responseCallbackSet = /* @__PURE__ */ new Set()), e8._responseCallbackSet.add(t3);
};
var vg = (e8, t3) => {
  e8._requestCallbackSet && (e8._requestCallbackSet.delete(t3), e8._requestCallbackSet.size || delete e8._requestCallbackSet);
};
var bg = (e8, t3) => {
  e8._responseCallbackSet && (e8._responseCallbackSet.delete(t3), e8._responseCallbackSet.size || delete e8._responseCallbackSet);
};
ag.supportsNativeHls = (function() {
  if (!ae || !ae.createElement) return false;
  const e8 = ae.createElement("video");
  if (!du.getTech("Html5").isSupported()) return false;
  return ["application/vnd.apple.mpegurl", "audio/mpegurl", "audio/x-mpegurl", "application/x-mpegurl", "video/x-mpegurl", "video/mpegurl", "application/mpegurl"].some(function(t3) {
    return /maybe|probably/i.test(e8.canPlayType(t3));
  });
})(), ag.supportsNativeDash = !!(ae && ae.createElement && du.getTech("Html5").isSupported()) && /maybe|probably/i.test(ae.createElement("video").canPlayType("application/dash+xml")), ag.supportsTypeNatively = (e8) => "hls" === e8 ? ag.supportsNativeHls : "dash" === e8 && ag.supportsNativeDash, ag.isSupported = function() {
  return du.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.");
}, ag.xhr.onRequest = function(e8) {
  yg(ag.xhr, e8);
}, ag.xhr.onResponse = function(e8) {
  _g(ag.xhr, e8);
}, ag.xhr.offRequest = function(e8) {
  vg(ag.xhr, e8);
}, ag.xhr.offResponse = function(e8) {
  bg(ag.xhr, e8);
};
var Tg = du.getComponent("Component");
var Sg = class extends Tg {
  constructor(e8, t3, i6) {
    if (super(t3, i6.vhs), "number" == typeof i6.initialBandwidth && (this.options_.bandwidth = i6.initialBandwidth), this.logger_ = vu("VhsHandler"), t3.options_ && t3.options_.playerId) {
      const e9 = du.getPlayer(t3.options_.playerId);
      this.player_ = e9;
    }
    if (this.tech_ = t3, this.source_ = e8, this.stats = {}, this.ignoreNextSeekingEvent_ = false, this.setOptions_(), this.options_.overrideNative && t3.overrideNativeAudioTracks && t3.overrideNativeVideoTracks) t3.overrideNativeAudioTracks(true), t3.overrideNativeVideoTracks(true);
    else if (this.options_.overrideNative && (t3.featuresNativeVideoTracks || t3.featuresNativeAudioTracks)) throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");
    this.on(ae, ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"], (e9) => {
      const t4 = ae.fullscreenElement || ae.webkitFullscreenElement || ae.mozFullScreenElement || ae.msFullscreenElement;
      t4 && t4.contains(this.tech_.el()) ? this.playlistController_.fastQualityChange_() : this.playlistController_.checkABR_();
    }), this.on(this.tech_, "seeking", function() {
      this.ignoreNextSeekingEvent_ ? this.ignoreNextSeekingEvent_ = false : this.setCurrentTime(this.tech_.currentTime());
    }), this.on(this.tech_, "error", function() {
      this.tech_.error() && this.playlistController_ && this.playlistController_.pauseLoading();
    }), this.on(this.tech_, "play", this.play);
  }
  setOptions_(e8 = {}) {
    if (this.options_ = bu(this.options_, e8), this.options_.withCredentials = this.options_.withCredentials || false, this.options_.limitRenditionByPlayerDimensions = false !== this.options_.limitRenditionByPlayerDimensions, this.options_.useDevicePixelRatio = this.options_.useDevicePixelRatio || false, this.options_.usePlayerObjectFit = this.options_.usePlayerObjectFit || false, this.options_.useBandwidthFromLocalStorage = void 0 !== this.source_.useBandwidthFromLocalStorage ? this.source_.useBandwidthFromLocalStorage : this.options_.useBandwidthFromLocalStorage || false, this.options_.useForcedSubtitles = this.options_.useForcedSubtitles || false, this.options_.useNetworkInformationApi = void 0 === this.options_.useNetworkInformationApi || this.options_.useNetworkInformationApi, this.options_.useDtsForTimestampOffset = this.options_.useDtsForTimestampOffset || false, this.options_.customTagParsers = this.options_.customTagParsers || [], this.options_.customTagMappers = this.options_.customTagMappers || [], this.options_.cacheEncryptionKeys = this.options_.cacheEncryptionKeys || false, this.options_.llhls = false !== this.options_.llhls, this.options_.bufferBasedABR = this.options_.bufferBasedABR || false, "number" != typeof this.options_.playlistExclusionDuration && (this.options_.playlistExclusionDuration = 60), "number" != typeof this.options_.bandwidth && this.options_.useBandwidthFromLocalStorage) {
      const e9 = mg();
      e9 && e9.bandwidth && (this.options_.bandwidth = e9.bandwidth, this.tech_.trigger({ type: "usage", name: "vhs-bandwidth-from-local-storage" })), e9 && e9.throughput && (this.options_.throughput = e9.throughput, this.tech_.trigger({ type: "usage", name: "vhs-throughput-from-local-storage" }));
    }
    "number" != typeof this.options_.bandwidth && (this.options_.bandwidth = yc.INITIAL_BANDWIDTH), this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === yc.INITIAL_BANDWIDTH, ["withCredentials", "useDevicePixelRatio", "usePlayerObjectFit", "customPixelRatio", "limitRenditionByPlayerDimensions", "bandwidth", "customTagParsers", "customTagMappers", "cacheEncryptionKeys", "playlistSelector", "initialPlaylistSelector", "bufferBasedABR", "liveRangeSafeTimeDelta", "llhls", "useForcedSubtitles", "useNetworkInformationApi", "useDtsForTimestampOffset", "exactManifestTimings", "leastPixelDiffSelector"].forEach((e9) => {
      void 0 !== this.source_[e9] && (this.options_[e9] = this.source_[e9]);
    }), this.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions, this.useDevicePixelRatio = this.options_.useDevicePixelRatio, this.usePlayerObjectFit = this.options_.usePlayerObjectFit;
    const t3 = this.options_.customPixelRatio;
    "number" == typeof t3 && t3 >= 0 && (this.customPixelRatio = t3);
  }
  setOptions(e8 = {}) {
    this.setOptions_(e8);
  }
  src(e8, t3) {
    if (!e8) return;
    this.setOptions_(), this.options_.src = fg(this.source_.src), this.options_.tech = this.tech_, this.options_.externVhs = ag, this.options_.sourceType = vt(t3), this.options_.seekTo = (e9) => {
      this.tech_.setCurrentTime(e9);
    }, this.options_.player_ = this.player_, this.playlistController_ = new Wm(this.options_);
    const i6 = bu({ liveRangeSafeTimeDelta: wu }, this.options_, { seekable: () => this.seekable(), media: () => this.playlistController_.media(), playlistController: this.playlistController_ });
    this.playbackWatcher_ = new Qm(i6), this.attachStreamingEventListeners_(), this.playlistController_.on("error", () => {
      const e9 = du.players[this.tech_.options_.playerId];
      let t4 = this.playlistController_.error;
      "object" != typeof t4 || t4.code ? "string" == typeof t4 && (t4 = { message: t4, code: 3 }) : t4.code = 3, e9.error(t4);
    });
    const s6 = this.options_.bufferBasedABR ? ag.movingAverageBandwidthSelector(0.55) : ag.STANDARD_PLAYLIST_SELECTOR;
    this.playlistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : s6.bind(this), this.playlistController_.selectInitialPlaylist = ag.INITIAL_PLAYLIST_SELECTOR.bind(this), this.playlists = this.playlistController_.mainPlaylistLoader_, this.mediaSource = this.playlistController_.mediaSource, Object.defineProperties(this, { selectPlaylist: { get() {
      return this.playlistController_.selectPlaylist;
    }, set(e9) {
      this.playlistController_.selectPlaylist = e9.bind(this);
    } }, throughput: { get() {
      return this.playlistController_.mainSegmentLoader_.throughput.rate;
    }, set(e9) {
      this.playlistController_.mainSegmentLoader_.throughput.rate = e9, this.playlistController_.mainSegmentLoader_.throughput.count = 1;
    } }, bandwidth: { get() {
      let e9 = this.playlistController_.mainSegmentLoader_.bandwidth;
      const t4 = b4.navigator.connection || b4.navigator.mozConnection || b4.navigator.webkitConnection, i7 = 1e7;
      if (this.options_.useNetworkInformationApi && t4) {
        const s7 = 1e3 * t4.downlink * 1e3;
        e9 = s7 >= i7 && e9 >= i7 ? Math.max(e9, s7) : s7;
      }
      return e9;
    }, set(e9) {
      this.playlistController_.mainSegmentLoader_.bandwidth = e9, this.playlistController_.mainSegmentLoader_.throughput = { rate: 0, count: 0 };
    } }, systemBandwidth: { get() {
      const e9 = 1 / (this.bandwidth || 1);
      let t4;
      t4 = this.throughput > 0 ? 1 / this.throughput : 0;
      return Math.floor(1 / (e9 + t4));
    }, set() {
      du.log.error('The "systemBandwidth" property is read-only');
    } } }), this.options_.bandwidth && (this.bandwidth = this.options_.bandwidth), this.options_.throughput && (this.throughput = this.options_.throughput), Object.defineProperties(this.stats, { bandwidth: { get: () => this.bandwidth || 0, enumerable: true }, mediaRequests: { get: () => this.playlistController_.mediaRequests_() || 0, enumerable: true }, mediaRequestsAborted: { get: () => this.playlistController_.mediaRequestsAborted_() || 0, enumerable: true }, mediaRequestsTimedout: { get: () => this.playlistController_.mediaRequestsTimedout_() || 0, enumerable: true }, mediaRequestsErrored: { get: () => this.playlistController_.mediaRequestsErrored_() || 0, enumerable: true }, mediaTransferDuration: { get: () => this.playlistController_.mediaTransferDuration_() || 0, enumerable: true }, mediaBytesTransferred: { get: () => this.playlistController_.mediaBytesTransferred_() || 0, enumerable: true }, mediaSecondsLoaded: { get: () => this.playlistController_.mediaSecondsLoaded_() || 0, enumerable: true }, mediaAppends: { get: () => this.playlistController_.mediaAppends_() || 0, enumerable: true }, mainAppendsToLoadedData: { get: () => this.playlistController_.mainAppendsToLoadedData_() || 0, enumerable: true }, audioAppendsToLoadedData: { get: () => this.playlistController_.audioAppendsToLoadedData_() || 0, enumerable: true }, appendsToLoadedData: { get: () => this.playlistController_.appendsToLoadedData_() || 0, enumerable: true }, timeToLoadedData: { get: () => this.playlistController_.timeToLoadedData_() || 0, enumerable: true }, buffered: { get: () => Lu(this.tech_.buffered()), enumerable: true }, currentTime: { get: () => this.tech_.currentTime(), enumerable: true }, currentSource: { get: () => this.tech_.currentSource_, enumerable: true }, currentTech: { get: () => this.tech_.name_, enumerable: true }, duration: { get: () => this.tech_.duration(), enumerable: true }, main: { get: () => this.playlists.main, enumerable: true }, playerDimensions: { get: () => this.tech_.currentDimensions(), enumerable: true }, seekable: { get: () => Lu(this.tech_.seekable()), enumerable: true }, timestamp: { get: () => Date.now(), enumerable: true }, videoPlaybackQuality: { get: () => this.tech_.getVideoPlaybackQuality(), enumerable: true } }), this.tech_.one("canplay", this.playlistController_.setupFirstPlay.bind(this.playlistController_)), this.tech_.on("bandwidthupdate", () => {
      this.options_.useBandwidthFromLocalStorage && gg({ bandwidth: this.bandwidth, throughput: Math.round(this.throughput) });
    }), this.playlistController_.on("selectedinitialmedia", () => {
      Km(this);
    }), this.playlistController_.sourceUpdater_.on("createdsourcebuffers", () => {
      this.setupEme_();
    }), this.on(this.playlistController_, "progress", function() {
      this.tech_.trigger("progress");
    }), this.on(this.playlistController_, "firstplay", function() {
      this.ignoreNextSeekingEvent_ = true;
    }), this.setupQualityLevels_(), this.tech_.el() && (this.mediaSourceUrl_ = b4.URL.createObjectURL(this.playlistController_.mediaSource), (du.browser.IS_ANY_SAFARI || du.browser.IS_IOS) && this.options_.overrideNative && "hls" === this.options_.sourceType && "function" == typeof this.tech_.addSourceElement ? (this.tech_.addSourceElement(this.mediaSourceUrl_), this.tech_.addSourceElement(this.source_.src)) : this.tech_.src(this.mediaSourceUrl_));
  }
  createKeySessions_() {
    const e8 = this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;
    this.logger_("waiting for EME key session creation"), cg({ player: this.player_, sourceKeySystems: this.source_.keySystems, audioMedia: e8 && e8.media(), mainPlaylists: this.playlists.main.playlists }).then(() => {
      this.logger_("created EME key session"), this.playlistController_.sourceUpdater_.initializedEme();
    }).catch((e9) => {
      this.logger_("error while creating EME key session", e9), this.player_.error({ message: "Failed to initialize media keys for EME", code: 3 });
    });
  }
  handleWaitingForKey_() {
    this.logger_("waitingforkey fired, attempting to create any new key sessions"), this.createKeySessions_();
  }
  setupEme_() {
    const e8 = this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader, t3 = pg({ player: this.player_, sourceKeySystems: this.source_.keySystems, media: this.playlists.media(), audioMedia: e8 && e8.media() });
    this.player_.tech_.on("keystatuschange", (e9) => {
      this.playlistController_.updatePlaylistByKeyStatus(e9.keyId, e9.status);
    }), this.handleWaitingForKey_ = this.handleWaitingForKey_.bind(this), this.player_.tech_.on("waitingforkey", this.handleWaitingForKey_), t3 ? this.createKeySessions_() : this.playlistController_.sourceUpdater_.initializedEme();
  }
  setupQualityLevels_() {
    const e8 = du.players[this.tech_.options_.playerId];
    e8 && e8.qualityLevels && !this.qualityLevels_ && (this.qualityLevels_ = e8.qualityLevels(), this.playlistController_.on("selectedinitialmedia", () => {
      hg(this.qualityLevels_, this);
    }), this.playlists.on("mediachange", () => {
      lg(this.qualityLevels_, this.playlists);
    }));
  }
  static version() {
    return { "@videojs/http-streaming": tg, "mux.js": ig, "mpd-parser": sg, "m3u8-parser": ng, "aes-decrypter": rg };
  }
  version() {
    return this.constructor.version();
  }
  canChangeType() {
    return rm.canChangeType();
  }
  play() {
    this.playlistController_.play();
  }
  setCurrentTime(e8) {
    this.playlistController_.setCurrentTime(e8);
  }
  duration() {
    return this.playlistController_.duration();
  }
  seekable() {
    return this.playlistController_.seekable();
  }
  dispose() {
    this.playbackWatcher_ && this.playbackWatcher_.dispose(), this.playlistController_ && this.playlistController_.dispose(), this.qualityLevels_ && this.qualityLevels_.dispose(), this.tech_ && this.tech_.vhs && delete this.tech_.vhs, this.mediaSourceUrl_ && b4.URL.revokeObjectURL && (b4.URL.revokeObjectURL(this.mediaSourceUrl_), this.mediaSourceUrl_ = null), this.tech_ && this.tech_.off("waitingforkey", this.handleWaitingForKey_), super.dispose();
  }
  convertToProgramTime(e8, t3) {
    return sc({ playlist: this.playlistController_.media(), time: e8, callback: t3 });
  }
  seekToProgramTime(e8, t3, i6 = true, s6 = 2) {
    return nc({ programTime: e8, playlist: this.playlistController_.media(), retryCount: s6, pauseAfterSeek: i6, seekTo: this.options_.seekTo, tech: this.options_.tech, callback: t3 });
  }
  setupXhrHooks_() {
    this.xhr.onRequest = (e8) => {
      yg(this.xhr, e8);
    }, this.xhr.onResponse = (e8) => {
      _g(this.xhr, e8);
    }, this.xhr.offRequest = (e8) => {
      vg(this.xhr, e8);
    }, this.xhr.offResponse = (e8) => {
      bg(this.xhr, e8);
    }, this.player_.trigger("xhr-hooks-ready");
  }
  attachStreamingEventListeners_() {
    const e8 = ["gapjumped", "playedrangeschanged"];
    ["seekablerangeschanged", "bufferedrangeschanged", "contentsteeringloadstart", "contentsteeringloadcomplete", "contentsteeringparsed"].forEach((e9) => {
      this.playlistController_.on(e9, (e10) => {
        this.player_.trigger(Fe({}, e10));
      });
    }), e8.forEach((e9) => {
      this.playbackWatcher_.on(e9, (e10) => {
        this.player_.trigger(Fe({}, e10));
      });
    });
  }
};
var Eg = { name: "videojs-http-streaming", VERSION: tg, canHandleSource(e8, t3 = {}) {
  const i6 = bu(du.options, t3);
  return !(!i6.vhs.experimentalUseMMS && !pt("avc1.4d400d,mp4a.40.2", false)) && Eg.canPlayType(e8.type, i6);
}, handleSource(e8, t3, i6 = {}) {
  const s6 = bu(du.options, i6);
  return t3.vhs = new Sg(e8, t3, s6), t3.vhs.xhr = Ud(), t3.vhs.setupXhrHooks_(), t3.vhs.src(e8.src, e8.type), t3.vhs;
}, canPlayType(e8, t3) {
  const i6 = vt(e8);
  if (!i6) return "";
  const s6 = Eg.getOverrideNative(t3);
  return !ag.supportsTypeNatively(i6) || s6 ? "maybe" : "";
}, getOverrideNative(e8 = {}) {
  const { vhs: t3 = {} } = e8, i6 = !(du.browser.IS_ANY_SAFARI || du.browser.IS_IOS), { overrideNative: s6 = i6 } = t3;
  return s6;
} };
(() => pt("avc1.4d400d,mp4a.40.2", true))() && du.getTech("Html5").registerSourceHandler(Eg, 0), du.VhsHandler = Sg, du.VhsSourceHandler = Eg, du.Vhs = ag, du.use || du.registerComponent("Vhs", ag), du.options.vhs = du.options.vhs || {}, du.getPlugin && du.getPlugin("reloadSourceOnError") || du.registerPlugin("reloadSourceOnError", eg);
var wg = class extends b {
  constructor() {
    super(...arguments), this._controllerConfigs = { autoplay: false, autoSetup: false, controls: false, defaultVolume: 0.3, disablePictureInPicture: true, enableDocumentPictureInPicture: false, enableSmoothSeeking: true, html5: { nativeAudioTracks: false, nativeVideoTracks: false, vhs: { llhls: true, overrideNative: true } }, inactivityTimeout: 0, liveTracker: { liveTolerance: 10, trackingThreshold: 15 }, loop: false, muted: false, nativeControlsForTouch: false, normalizeAutoplay: true, preload: "auto" }, this._prevPlayingState = false, this._retryCount = 0, this._qualityLevels = [], this.autoplay = false, this.currentMetadata = null, this.element = null, this.isLive = false, this.mimeType = null, this.sensorModel = null, this.started = false, this.state = "not-ready", this.waitingTimestamp = null, this._initController = async () => {
      if (!this._controller && this.playerUrl) try {
        const e8 = { ...this._controllerConfigs };
        this.element = document.createElement("video"), du.log.level("off"), this._controller = du(this.element, e8), this._controller.muted(this.muted), this._controller.loop(this.loop), this._controller.playbackRate(this.rate);
        this._controller.qualityLevels().on("addqualitylevel", (e9) => this._handleQualityLevel(e9)), this._controller.ready(this._handleReady), this._controller.one("play", this._handleFirstPlay), this._controller.on("canplay", this._handleCanPlay), this._controller.on("durationchange", this._handleDurationChange), this._controller.on("ended", this._handleEnded), this._controller.on("error", this._handleError), this._controller.on("loadeddata", this._handleDataLoaded), this._controller.on("loadedmetadata", this._handleLoadedMetadata), this._controller.on("loadstart", this._handleLoadStart), this._controller.on("play", this._handlePlay), this._controller.on("playing", this._handlePlaying), this._controller.on("stalled", this._handleStalled), this._controller.on("timeupdate", this._handleTimeUpdate), this._controller.on("waiting", this._handleWaiting), this._controller.on("xhr-hooks-ready", this._handleXHRhooksReady), this._controller?.liveTracker.on("seekableendchange", () => this.notifyChange("livestreamStatus")), this._controller?.liveTracker.on("liveedgechange", () => this.notifyChange("livestreamStatus"));
      } catch (e8) {
        i.getLogger(this).error("Unable to initialize the player."), this._controller && this._controller.dispose();
      }
    }, this._handleQualityLevel = (e8) => {
      if (!e8?.qualityLevel) return;
      const t3 = e8.qualityLevel;
      this._qualityLevels.push(t3), t3?.enabled && (this._set("videoWidth", t3?.width ?? 0), this._set("videoHeight", t3?.height ?? 0));
    }, this._handleReady = () => {
      this.state = "ready";
    }, this._handleFirstPlay = () => {
      this._set("started", true);
    }, this._handleCanPlay = async () => {
      if (this._prevPlayingState = "playing" === this.state, this.state = "can-play", this.autoplay && !this.started) try {
        this.muted = true, await this.play();
      } catch (e8) {
        i.getLogger(this).info("Unable to auto start playback. Blocked by the browser.");
      }
    }, this._handleCueChange = () => {
      if (!this.subtitleTrack?.activeCues?.length) return;
      const e8 = this.subtitleTrack?.activeCues, t3 = f3(e8);
      if (!t3?.length) return;
      const i6 = /* @__PURE__ */ new Map();
      for (const s6 of t3) {
        if (Array.isArray(s6.value)) if (90064 === s6.tagId) i6.set(s6.tagId, s6);
        else {
          s6.value.forEach((e9) => {
            i6.set(e9.tagId, e9);
          });
        }
        else i6.set(s6.tagId, s6);
      }
      i6.set(d.EsriVideoWidth, { name: "Video Width", tagId: d.EsriVideoWidth, value: this._controller?.videoWidth() }), i6.set(d.EsriVideoHeight, { name: "Video Height", tagId: d.EsriVideoHeight, value: this._controller?.videoHeight() }), this.currentMetadata = new Map(i6);
    }, this._handleDataLoaded = () => {
      this._set("videoWidth", this._controller?.videoWidth()), this._set("videoHeight", this._controller?.videoHeight());
    }, this._handleDurationChange = () => {
      0 !== this._controller?.duration() && (this.notifyChange("duration"), this.isLive = this._controller?.duration() === 1 / 0 || false, this._setLivestreamStatus(), this.started && this._controller?.duration() === this._controller?.currentTime() && this._controller?.trigger("ended"));
    }, this._handleEnded = () => {
      this._controller?.ended() && this.notifyChange("ended");
    }, this._handleError = () => {
      const e8 = this._controller?.error() ?? null;
      if ("number" == typeof e8?.code && e8?.code < 3 && 0 === this._retryCount) this._retryCount++, setTimeout(() => {
        this._controller?.src({ type: this.mimeType, src: this.playerUrl }), this._controller?.load();
      }, 2e3);
      else {
        const t3 = new s("Media Error", e8?.message ?? "");
        i.getLogger(this).error(t3), this.reset();
      }
    }, this._handleLoadStart = () => {
      this.state = "can-play";
    }, this._handleLoadedMetadata = () => {
      this.state = "can-play", this.notifyChange("buffered"), this.notifyChange("subtitleTrack");
    }, this._handlePlay = () => {
      this.notifyChange("ended");
    }, this._handlePlaying = () => {
      this.state = "playing", this._retryCount = 0, this.notifyChange("ended");
    }, this._handleStalled = () => {
      i.getLogger(this).warn("Playback is stalled and awaiting data");
    }, this._handleTimeUpdate = () => {
      this._setLivestreamStatus(), this.notifyChange("currentTime"), this.notifyChange("buffered"), this.notifyChange("bufferedPercent"), this._set("videoWidth", this._controller?.videoWidth()), this._set("videoHeight", this._controller?.videoHeight());
    }, this._handleWaiting = () => {
      this.waitingTimestamp = this._controller?.currentTime(), this.state = "waiting";
    }, this._handleXHRhooksReady = () => {
      const e8 = (e9) => (e9.xhr = new s5(), e9);
      this._controller?.tech(true)?.vhs.xhr.onRequest(e8);
    }, this._updateSensorModel = () => {
      this.currentMetadata?.size && (this.sensorModel ? this.sensorModel.updateSensorModel(this.currentMetadata) : this.sensorModel = new V({ videoMetadata: this.currentMetadata }));
    }, this._setLivestreamStatus = () => {
      if (!this.isLive) return void (this.livestreamStatus = null);
      this._controller?.liveTracker.isTracking() || this._controller?.liveTracker.startTracking();
      const e8 = { atLiveEdge: this._controller?.liveTracker.atLiveEdge() ?? null, behindLiveEdge: this._controller?.liveTracker.behindLiveEdge() ?? null, liveCurrentTime: this._controller?.liveTracker?.liveCurrentTime() ?? null, liveWindow: this._controller?.liveTracker?.liveWindow() ?? null, pastSeekEnd: this._controller?.liveTracker?.pastSeekEnd() ?? null, seekableEnd: this._controller?.liveTracker?.seekableEnd() ?? null, seekableStart: this._controller?.liveTracker?.seekableStart() ?? null };
      this.livestreamStatus = { ...e8 }, this.notifyChange("livestreamStatus"), this._controller?.liveTracker.handlePlay(), this._controller?.liveTracker.handleFirstTimeupdate();
    };
  }
  initialize() {
    this.addHandles([l(() => this.playerUrl, (e8) => {
      e8 && this._initController().then(() => {
        this.mimeType = E(e8), this._controller?.src({ src: this.playerUrl, type: this.mimeType });
      });
    }, h), l(() => this.subtitleTrack, () => {
      this.subtitleTrack && (this.subtitleTrack.mode = "showing");
    }, h), l(() => this.isLive, async (e8) => {
      e8 && (this._controller?.liveTracker.startTracking(), this.autoplay && (this.muted = true, await this.play()));
    }), l(() => this.currentMetadata, () => this._updateSensorModel())]), this.addHandles(a2(() => this.subtitleTrack, "cuechange", this._handleCueChange), h);
  }
  destroy() {
    this.removeAllHandles(), this._controller?.dispose();
  }
  get buffered() {
    return this._controller?.bufferedEnd() ?? 0;
  }
  get bufferedPercent() {
    return this._controller?.bufferedPercent() ?? 0;
  }
  get crossOrigin() {
    return this._controller?.crossOrigin() ?? this._get("crossOrigin");
  }
  set crossOrigin(e8) {
    this._controller?.crossOrigin(e8), this._set("crossOrigin", e8);
  }
  get currentTime() {
    return this._controller?.currentTime() ?? 0;
  }
  get duration() {
    return this._controller?.duration() ?? 0;
  }
  get ended() {
    return this._controller?.ended() ?? this._get("ended") ?? true;
  }
  set ended(e8) {
    this._controller?.trigger("ended"), this._set("ended", e8);
  }
  get loop() {
    return this._controller?.loop() ?? this._get("loop") ?? false;
  }
  set loop(e8) {
    this._controller?.loop(e8), this._set("loop", e8);
  }
  get muted() {
    return this._controller?.muted() ?? this._get("muted") ?? false;
  }
  set muted(e8) {
    this._controller?.muted(e8), this._set("muted", e8);
  }
  get playerUrl() {
    return this._controller?.src() || "";
  }
  set playerUrl(e8) {
    this._set("playerUrl", e8);
  }
  get playing() {
    return !this.ended && ("can-play" === this.state ? this._prevPlayingState : "playing" === this.state);
  }
  get playsInline() {
    const e8 = this._controller?.playsinline();
    return e8 ?? this._get("playsInline") ?? false;
  }
  set playsInline(e8) {
    this._controller?.playsinline(e8), this._set("playsInline", e8);
  }
  get rate() {
    return this._controller?.playbackRate() ?? this._get("rate") ?? 1;
  }
  set rate(e8) {
    this._controller?.playbackRate(e8), this._set("rate", e8);
  }
  get subtitleTrack() {
    const e8 = this._controller?.textTracks();
    return e8?.length ? Array.from(e8).find((e9) => "subtitles" === e9.kind) : null;
  }
  get volume() {
    return this._controller?.volume() ?? 0;
  }
  set volume(e8) {
    const t3 = r2(e8, 0, 1);
    isNaN(t3) || this._controller?.volume(t3);
  }
  get waiting() {
    return !this.waitingTimestamp && (this.waitingTimestamp === this.currentTime || (this.waitingTimestamp = null, false));
  }
  pause() {
    this._controller?.pause(), this.state = "paused";
  }
  async play() {
    try {
      !this.started && this.isLive && this._controller?.muted(true), await this._controller?.play(), this.state = "playing";
    } catch (e8) {
    }
  }
  reset() {
    this._controller && (this._prevPlayingState = false, this._retryCount = 0, this._set("started", false), this.setCurrentTime(0), this.notifyChange("buffered"), this.notifyChange("currentTime"), this.notifyChange("duration"), this.notifyChange("waiting"), this._controller?.trigger("can-play"), this.autoplay || this._controller?.pause());
  }
  seekToLiveEdge() {
    this.isLive ? "playing" === this.state && this._controller?.liveTracker.isTracking() && this._controller?.liveTracker.seekToLiveEdge() : i.getLogger(this).info("seekToLiveEdge method is only available for livestream playback.");
  }
  setCurrentTime(e8) {
    const t3 = r2(e8, 0, this.duration);
    this._controller?.currentTime(t3), this.notifyChange("currentTime");
  }
};
__decorate([m()], wg.prototype, "autoplay", void 0), __decorate([m()], wg.prototype, "buffered", null), __decorate([m()], wg.prototype, "bufferedPercent", null), __decorate([m()], wg.prototype, "crossOrigin", null), __decorate([m({ readOnly: true })], wg.prototype, "currentTime", null), __decorate([m()], wg.prototype, "currentMetadata", void 0), __decorate([m({ readOnly: true })], wg.prototype, "duration", null), __decorate([m()], wg.prototype, "element", void 0), __decorate([m({ readOnly: true })], wg.prototype, "ended", null), __decorate([m()], wg.prototype, "isLive", void 0), __decorate([m()], wg.prototype, "livestreamStatus", void 0), __decorate([m()], wg.prototype, "loop", null), __decorate([m()], wg.prototype, "mimeType", void 0), __decorate([m()], wg.prototype, "muted", null), __decorate([m()], wg.prototype, "playerUrl", null), __decorate([m({ readOnly: true })], wg.prototype, "playing", null), __decorate([m()], wg.prototype, "playsInline", null), __decorate([m()], wg.prototype, "rate", null), __decorate([m()], wg.prototype, "sensorModel", void 0), __decorate([m({ readOnly: true })], wg.prototype, "started", void 0), __decorate([m()], wg.prototype, "state", void 0), __decorate([m()], wg.prototype, "subtitleTrack", null), __decorate([m({ readOnly: true })], wg.prototype, "videoHeight", void 0), __decorate([m({ readOnly: true })], wg.prototype, "videoWidth", void 0), __decorate([m()], wg.prototype, "volume", null), __decorate([m({ readOnly: true })], wg.prototype, "waiting", null), __decorate([m()], wg.prototype, "waitingTimestamp", void 0), wg = __decorate([a("esri.layers.video.VideoController")], wg);

// node_modules/@arcgis/core/layers/VideoLayer.js
function Y2(e8, t3) {
  return { ignoreOrigin: this.originIdOf(t3) < 3 };
}
var ee2 = new u2([255, 127, 0]);
var te2 = new u2([0, 0, 0, 0.05]);
var re2 = new u3({ angle: 0, color: ee2, size: 10, style: "cross" });
var oe2 = new m3({ color: te2, outline: new m2({ color: ee2, width: 2 }) });
var ie2 = new m2({ color: ee2, width: 1 });
var se2 = new u3({ angle: 0, color: ee2, outline: { color: [255, 255, 255], width: 1.33 }, size: 10, style: "circle" });
var le2 = new m2({ color: ee2, width: 1 });
var ne2 = { types: { base: c4, key: "type", typeMap: { "simple-marker": u3, "picture-marker": a3, cim: n4 } }, json: { name: "drawingInfo.sensorSymbol", write: { writer: i3, overridePolicy: Y2 } } };
function ae2(e8, t3) {
  return { type: t3, json: { name: e8, write: { overridePolicy: Y2 } } };
}
var pe2 = class extends p2(t2(l5(b2(j2(l2(s2(b3))))))) {
  constructor(e8) {
    super(e8), this._trailPoints = [], this.cameraInfo = null, this.capabilities = null, this.codecs = null, this.connectionInfo = null, this.controller = new wg(), this.copyright = null, this.created = null, this.customParameters = null, this.description = null, this.elevationSource = null, this.frame = null, this.frameCenterSymbol = re2.clone(), this.frameCount = null, this.frameEffect = null, this.frameOpacity = 1, this.frameOutlineSymbol = oe2.clone(), this.fullExtent = null, this.fullTimeExtent = null, this.initialExtent = null, this.layerId = null, this.operationalLayerType = "ArcGISVideoLayer", this.playbackInfo = null, this.posterUrl = null, this.qualities = null, this.sensorSymbolOrientation = { source: "platformHeading", symbolOffset: 0 }, this.sensorSymbol = se2.clone(), this.sensorSightLineSymbol = ie2.clone(), this.sensorTrailSymbol = le2.clone(), this.serviceItemId = null, this.sourceJSON = null, this.sourceQuality = null, this.sourceType = null, this.spatialReference = f2.WGS84, this.start = 0, this.telemetryDisplay = new p4(), this.type = "video", this.url = null, this.version = null, this.videoLayersInfo = null;
  }
  initialize() {
    this.addHandles([l(() => this.metadata, () => {
      this.notifyChange("telemetry"), this.notifyChange("groundControlPoints"), this.notifyChange("frameHorizonPoints");
    }), l(() => this.telemetry?.sensorLocation, (e8) => this._setSensorTrail(e8), h)]), j(() => this.loaded && "can-play" === this.state && this.duration > 0).then(() => {
      this.start >= 0 && this.start <= this.duration && this.setCurrentTime(this.start);
    });
  }
  destroy() {
    this.removeAllHandles(), this.controller && this.controller.destroy();
  }
  load(e8) {
    const t3 = null != e8 ? e8.signal : null, r4 = this.loadFromPortal({ supportedTypes: ["Video Service"], supportsData: false }, e8).catch(f).then(() => this._fetchService(t3));
    return this.addResolvingPromise(r4), Promise.resolve(this);
  }
  get autoplay() {
    return this.controller?.autoplay ?? false;
  }
  set autoplay(e8) {
    this.controller.autoplay = e8;
  }
  get buffered() {
    return this.controller.buffered;
  }
  readCapabilitiesFromService(e8, t3) {
    return S(t3);
  }
  readConnectionInfo(e8, t3) {
    const r4 = Object.values(t3.connectionUrl);
    return r4?.length && (this.controller.playerUrl = r4[0]), t3.connectionUrl;
  }
  get currentTime() {
    return this.controller.currentTime;
  }
  get duration() {
    return this.controller.duration;
  }
  get ended() {
    return this.controller.ended;
  }
  get frameHorizonPoints() {
    return c5(this.metadata);
  }
  get groundControlPoints() {
    return L(this.metadata);
  }
  get isLive() {
    return this.controller?.isLive ?? false;
  }
  get livestreamStatus() {
    return this.controller?.livestreamStatus;
  }
  get loop() {
    return this.controller.loop;
  }
  set loop(e8) {
    this.controller.loop = e8;
  }
  get metadata() {
    return this.controller?.currentMetadata;
  }
  get mimeType() {
    return this.controller?.mimeType;
  }
  get muted() {
    return this.controller.muted;
  }
  set muted(e8) {
    this.controller.muted = e8;
  }
  get parsedUrl() {
    return s3(this);
  }
  get playbackRate() {
    return this.controller.rate;
  }
  set playbackRate(e8) {
    this.controller.rate = e8;
  }
  get playerUrl() {
    return this.controller.playerUrl;
  }
  get playing() {
    return this.controller.playing;
  }
  get started() {
    return this.controller?.started ?? false;
  }
  get state() {
    return this.controller.state;
  }
  get telemetry() {
    return C(this.metadata);
  }
  readTitleFromService(e8, { name: t3 }) {
    return this.url ? w(this.url, t3) : t3;
  }
  get videoElement() {
    return this.controller?.element;
  }
  get videoHeight() {
    return this.controller?.videoHeight;
  }
  readLayerInfosFromService(e8, t3) {
    return p5(t3);
  }
  get videoTimeExtent() {
    return c(i.getLogger(this), "videoTimeExtent", { replacement: "fullTimeExtent", version: "4.33", warnOnce: true }), this.fullTimeExtent;
  }
  get videoWidth() {
    return this.controller?.videoWidth;
  }
  get volume() {
    return this.controller?.volume ?? 0;
  }
  set volume(e8) {
    this.controller.volume = e8;
  }
  get waiting() {
    return this.controller.waiting;
  }
  play() {
    this.controller.play();
  }
  pause() {
    this.controller.pause();
  }
  reset() {
    this._trailPoints = [], this.controller.reset();
  }
  setCurrentTime(e8) {
    if (this.duration < 0) return;
    const t3 = r2(e8, 0, this.duration);
    this.controller.setCurrentTime(t3);
  }
  toGround(e8, t3) {
    return this.controller?.sensorModel?.metadataSupportsTransforms ? this.controller.sensorModel.transformImageToGeo(e8, t3) : null;
  }
  toVideo(e8) {
    if (!this.controller?.sensorModel?.metadataSupportsTransforms) return null;
    const t3 = this.controller.sensorModel.transformGeoToImage(e8.x, e8.y, e8.z);
    return { x: t3[0], y: t3[1] };
  }
  updateTelemetryColor(e8) {
    this.frameCenterSymbol = v(this.frameCenterSymbol, e8) ?? re2, this.frameOutlineSymbol = v(this.frameOutlineSymbol, e8, te2) ?? oe2, this.sensorSightLineSymbol = v(this.sensorSightLineSymbol, e8) ?? ie2, this.sensorTrailSymbol = v(this.sensorTrailSymbol, e8) ?? le2, this.sensorSymbol = v(this.sensorSymbol, e8) ?? se2;
  }
  write(e8, t3) {
    return null == this.layerId ? (t3?.messages?.push(new s("layer:unsupported", `Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' cannot be saved to a web map, web scene, or portal item. The ArcGIS server version must be greater than 11.2.`)), null) : super.write(e8, t3);
  }
  async _fetchService(e8) {
    if (this.sourceJSON) return void this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl });
    const { data: t3, ssl: o4 } = await H(this.url, { query: { f: "json", ...this.parsedUrl.query, ...this.customParameters }, signal: e8 });
    if (o4 && (this.url = this.url.replace(/^http:/i, "https:")), !t3?.currentVersion) return t3.currentVersion = "11.2", this.sourceJSON = t3, void this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl });
    if (this.layerId ??= t3.layers?.[0]?.id ?? null, null == this.layerId) throw new s("arcgis-layers:url-mismatch", "The url is not a valid arcgis resource");
    const { data: s6 } = await H(this.parsedUrl.path, { query: { f: "json", ...this.customParameters }, signal: e8 });
    this.sourceJSON = { ...t3, ...s6 }, this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl });
  }
  _setSensorTrail(e8) {
    if (!e8) return;
    const t3 = m5(e8, this._trailPoints);
    this._trailPoints = [...t3];
    const r4 = this._trailPoints.map((e9) => e9.toArray()), o4 = new y({ hasZ: e8.hasZ, paths: [r4] });
    this.telemetry.sensorTrail = o4.clone();
  }
};
__decorate([m({ type: Boolean, json: { write: { ignoreOrigin: true } } })], pe2.prototype, "autoplay", null), __decorate([m({ readOnly: true })], pe2.prototype, "buffered", null), __decorate([m({ readOnly: true })], pe2.prototype, "cameraInfo", void 0), __decorate([m({ readOnly: true, json: { read: false } })], pe2.prototype, "capabilities", void 0), __decorate([o("service", "capabilities", ["supportsAppend", "supportsCoverageQuery", "supportsExportClip", "supportsExportFrameset", "supportsMensuration", "supportsPreviews", "supportsUpdate"])], pe2.prototype, "readCapabilitiesFromService", null), __decorate([m({ readOnly: true })], pe2.prototype, "codecs", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "connectionInfo", void 0), __decorate([o("connectionInfo", ["connectionUrl"])], pe2.prototype, "readConnectionInfo", null), __decorate([m()], pe2.prototype, "controller", void 0), __decorate([m({ type: String })], pe2.prototype, "copyright", void 0), __decorate([m({ readOnly: true, type: Date })], pe2.prototype, "created", void 0), __decorate([m({ type: Number })], pe2.prototype, "currentTime", null), __decorate([m({ json: { write: false } })], pe2.prototype, "customParameters", void 0), __decorate([m({ type: String })], pe2.prototype, "description", void 0), __decorate([m({ type: Number })], pe2.prototype, "duration", null), __decorate([m({ readOnly: true })], pe2.prototype, "elevationSource", void 0), __decorate([m({ type: Boolean })], pe2.prototype, "ended", null), __decorate([m({ type: a5 })], pe2.prototype, "frame", void 0), __decorate([m(ae2("drawingInfo.frameCenterSymbol", u3))], pe2.prototype, "frameCenterSymbol", void 0), __decorate([m({ readOnly: true, type: x })], pe2.prototype, "frameCount", void 0), __decorate([m(l3)], pe2.prototype, "frameEffect", void 0), __decorate([m(w2)], pe2.prototype, "frameOpacity", void 0), __decorate([m(ae2("drawingInfo.frameOutlineSymbol", m3))], pe2.prototype, "frameOutlineSymbol", void 0), __decorate([m({ type: z })], pe2.prototype, "fullExtent", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "frameHorizonPoints", null), __decorate([m({ readOnly: true, json: { read: { reader: g, source: "time" } }, type: a4 })], pe2.prototype, "fullTimeExtent", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "groundControlPoints", null), __decorate([m(u4)], pe2.prototype, "id", void 0), __decorate([m({ type: z })], pe2.prototype, "initialExtent", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "isLive", null), __decorate([m({ type: x, json: { read: false, origins: { service: { read: { source: "id" } } } } })], pe2.prototype, "layerId", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "livestreamStatus", null), __decorate([m({ type: Boolean })], pe2.prototype, "loop", null), __decorate([m({ readOnly: true })], pe2.prototype, "metadata", null), __decorate([m({ readOnly: true })], pe2.prototype, "mimeType", null), __decorate([m({ type: Boolean, json: { write: { ignoreOrigin: true } } })], pe2.prototype, "muted", null), __decorate([m({ type: ["ArcGISVideoLayer"] })], pe2.prototype, "operationalLayerType", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "parsedUrl", null), __decorate([m({ type: i5 })], pe2.prototype, "playbackInfo", void 0), __decorate([m({ type: Number })], pe2.prototype, "playbackRate", null), __decorate([m({ readOnly: true, type: String })], pe2.prototype, "playerUrl", null), __decorate([m({ readOnly: true })], pe2.prototype, "playing", null), __decorate([m({ readOnly: true, json: { read: { source: "poster" } } })], pe2.prototype, "posterUrl", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "qualities", void 0), __decorate([m()], pe2.prototype, "sensorSymbolOrientation", void 0), __decorate([m(ne2)], pe2.prototype, "sensorSymbol", void 0), __decorate([m(ae2("drawingInfo.sensorSightLineSymbol", m2))], pe2.prototype, "sensorSightLineSymbol", void 0), __decorate([m(ae2("drawingInfo.sensorTrailSymbol", m2))], pe2.prototype, "sensorTrailSymbol", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "serviceItemId", void 0), __decorate([m()], pe2.prototype, "sourceJSON", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "sourceQuality", void 0), __decorate([m({ readOnly: true, json: { name: "serviceType" } })], pe2.prototype, "sourceType", void 0), __decorate([m()], pe2.prototype, "spatialReference", void 0), __decorate([m({ json: { write: true } })], pe2.prototype, "start", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "started", null), __decorate([m({ readOnly: true, type: String })], pe2.prototype, "state", null), __decorate([m({ readOnly: true, type: m4 })], pe2.prototype, "telemetry", null), __decorate([m({ type: p4, nonNullable: true, json: { write: { ignoreOrigin: true } } })], pe2.prototype, "telemetryDisplay", void 0), __decorate([o("service", "title", ["name"])], pe2.prototype, "readTitleFromService", null), __decorate([m({ readOnly: true })], pe2.prototype, "type", void 0), __decorate([m(i4())], pe2.prototype, "url", void 0), __decorate([m({ readOnly: true, type: Number, json: { read: { source: "currentVersion" } } })], pe2.prototype, "version", void 0), __decorate([m({ readOnly: true })], pe2.prototype, "videoElement", null), __decorate([m({ readOnly: true })], pe2.prototype, "videoHeight", null), __decorate([m({ readOnly: true, json: { read: false } })], pe2.prototype, "videoLayersInfo", void 0), __decorate([o("service", "videoLayersInfo", ["id", "name", "poster", "serviceType", "type"])], pe2.prototype, "readLayerInfosFromService", null), __decorate([m({ type: a4, readOnly: true })], pe2.prototype, "videoTimeExtent", null), __decorate([m({ readOnly: true })], pe2.prototype, "videoWidth", null), __decorate([m()], pe2.prototype, "volume", null), __decorate([m({ readOnly: true })], pe2.prototype, "waiting", null), pe2 = __decorate([a("esri.layers.VideoLayer")], pe2);
var ye2 = pe2;
export {
  ye2 as default
};
//# sourceMappingURL=VideoLayer-DGLXALIV.js.map
