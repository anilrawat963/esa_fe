import {
  e as e12
} from "./chunk-4YQFF2F7.js";
import {
  B,
  f as f14,
  h as h10,
  h2 as h11,
  i as i9,
  m as m8,
  p as p9,
  r as r17,
  s as s14
} from "./chunk-Z4LDNBNJ.js";
import "./chunk-EXLKWVG4.js";
import {
  J as J5,
  W as W2,
  a as a14,
  d as d10,
  l2 as l13,
  o as o13,
  u as u11
} from "./chunk-Q4G6BRR7.js";
import {
  e as e14,
  s as s15,
  s2 as s16
} from "./chunk-6DHLEI74.js";
import {
  e as e13,
  i as i10,
  p as p10
} from "./chunk-V622TPWA.js";
import {
  i as i11
} from "./chunk-L7AHSCRH.js";
import "./chunk-RGS3EXFB.js";
import {
  b as b13
} from "./chunk-DNNDZJZ6.js";
import "./chunk-6TUGFZ4F.js";
import {
  u as u12
} from "./chunk-U7PSVAHB.js";
import {
  f as f13
} from "./chunk-BMWB4LU6.js";
import "./chunk-2NWCGDTW.js";
import "./chunk-XT4FPCQ7.js";
import "./chunk-MGOPGTLA.js";
import "./chunk-RA5BGY5F.js";
import "./chunk-FCCU7SSP.js";
import "./chunk-ZP5CSWYG.js";
import "./chunk-BLCKE43G.js";
import "./chunk-TCP5RDVE.js";
import "./chunk-4R2LU43U.js";
import {
  c as c13,
  m as m7
} from "./chunk-PLLKRMGV.js";
import {
  q as q7,
  y as y8
} from "./chunk-MPG2MOXA.js";
import "./chunk-PBFXKJNR.js";
import {
  A as A2,
  A2 as A3,
  D as D2,
  M as M5,
  M2 as M7,
  R as R6,
  S as S2,
  S2 as S4,
  T as T2,
  U as U5,
  V as V2,
  c as c12,
  f as f11,
  f2 as f12,
  g as g4,
  l as l12,
  m as m6,
  p as p8,
  q as q6,
  r as r16,
  v as v7,
  z as z5
} from "./chunk-7YU4QEOZ.js";
import "./chunk-QMZNFXS2.js";
import {
  F as F4,
  M as M4,
  M2 as M6,
  Q as Q3,
  U as U4,
  e as e11,
  g as g3,
  h as h9,
  j as j7,
  k as k7,
  r as r14
} from "./chunk-K5ZF6G4K.js";
import {
  d as d9,
  y as y7,
  z as z4
} from "./chunk-6AWERJZ7.js";
import {
  C2 as C,
  F2 as F3,
  H2 as H3,
  R as R5,
  V,
  k as k6,
  r as r15,
  z as z3
} from "./chunk-MLUR3X6U.js";
import {
  e as e10
} from "./chunk-I7PJIK77.js";
import {
  l as l11
} from "./chunk-Y2GQGUGW.js";
import {
  S as S3
} from "./chunk-SUOIQXQ3.js";
import "./chunk-TNKZDDMZ.js";
import {
  i as i8
} from "./chunk-M6NE6PU7.js";
import {
  p as p7
} from "./chunk-Z3EPMK46.js";
import "./chunk-VHCNEAMV.js";
import "./chunk-2XEDAAX5.js";
import "./chunk-H6PLTW7B.js";
import "./chunk-36YQJD5W.js";
import "./chunk-BQ6DEXWK.js";
import {
  I as I3,
  s3 as s13,
  v as v6,
  y as y6
} from "./chunk-3SCRAN3E.js";
import {
  N as N3,
  b as b12,
  j as j6,
  q as q5
} from "./chunk-NTNXXNRP.js";
import "./chunk-QCJFPBRP.js";
import "./chunk-X4ZPIDID.js";
import "./chunk-7LPDSYJP.js";
import "./chunk-V4S4W4OB.js";
import {
  a as a13,
  c as c10,
  d as d7,
  m as m5,
  v as v5
} from "./chunk-IGRCAVBL.js";
import {
  h as h8
} from "./chunk-BTFBYI67.js";
import "./chunk-D3G5WIRR.js";
import "./chunk-Q3JOE7TC.js";
import "./chunk-O53GWXXZ.js";
import {
  E as E5,
  U as U3,
  b as b11,
  c as c9,
  d as d6,
  h as h7,
  i as i7,
  k as k5,
  s as s12,
  u as u10,
  v as v4,
  x as x3
} from "./chunk-GD72EK2J.js";
import "./chunk-FHDNFE7V.js";
import {
  At,
  Mt,
  at,
  f as f8,
  ft,
  gt,
  ie,
  lt,
  mt,
  w as w5,
  wt,
  yt
} from "./chunk-KDOWKZ3H.js";
import {
  c as c5,
  o as o9,
  s as s8,
  u as u9
} from "./chunk-NH6F2I5R.js";
import {
  k as k4,
  u as u8,
  x as x2
} from "./chunk-6WSJV2UJ.js";
import {
  G,
  J as J4,
  z as z2
} from "./chunk-2EBLSEHZ.js";
import {
  a as a9,
  a2 as a10,
  a3 as a11,
  b as b9,
  b2 as b10,
  c2 as c7,
  d as d5,
  e2 as e9,
  f as f10,
  h2 as h6,
  i2 as i5,
  i3 as i6,
  j as j4,
  l as l10,
  m as m2,
  m2 as m3,
  p as p6,
  q as q4,
  s as s9,
  s2 as s10,
  t as t13,
  z
} from "./chunk-VIIQX37N.js";
import "./chunk-BRGWF4BT.js";
import {
  M as M3
} from "./chunk-UR6CZJPX.js";
import "./chunk-JS3I6GIR.js";
import {
  r as r13
} from "./chunk-QTS3W27E.js";
import "./chunk-3RABUJDL.js";
import "./chunk-IFKJBQCK.js";
import {
  o as o11
} from "./chunk-KEMYAF6M.js";
import {
  a as a12,
  j as j5,
  m as m4,
  s as s11,
  t as t12,
  tt
} from "./chunk-CYVJEU2B.js";
import "./chunk-7YJLACUB.js";
import "./chunk-HETHJJO6.js";
import "./chunk-KOVWXXQR.js";
import "./chunk-ECKVUXN3.js";
import "./chunk-CHC4AAHW.js";
import "./chunk-S2SKSSUG.js";
import {
  T,
  _ as _6,
  d as d4,
  l as l9,
  r as r12
} from "./chunk-FDSAQJ3R.js";
import "./chunk-KDGDF37U.js";
import {
  e as e8,
  f as f9,
  o as o10,
  t as t10,
  t2 as t11
} from "./chunk-I4DSU5MJ.js";
import "./chunk-6HNBANDZ.js";
import "./chunk-MCWHCMX6.js";
import "./chunk-HAR63DI2.js";
import "./chunk-A3JORY5L.js";
import "./chunk-JNASI2YX.js";
import "./chunk-P355ISZZ.js";
import "./chunk-FCDWKXLA.js";
import "./chunk-AUP2E2QB.js";
import "./chunk-NDWECAKM.js";
import "./chunk-KTMKDXZP.js";
import "./chunk-F43BIMML.js";
import "./chunk-CT7HOWYG.js";
import "./chunk-CW4AXF3Q.js";
import {
  o2 as o12
} from "./chunk-BZBDEPRV.js";
import "./chunk-MXP2VO3L.js";
import "./chunk-OWSUTT7E.js";
import "./chunk-WNQORCSA.js";
import "./chunk-CIIRREHX.js";
import "./chunk-COMSADUT.js";
import "./chunk-66Y6I5GR.js";
import "./chunk-U5J3MCMX.js";
import "./chunk-D7KJNSAT.js";
import {
  c as c6
} from "./chunk-BZV32YR7.js";
import "./chunk-IT62DCG6.js";
import "./chunk-SZ5DGQ75.js";
import "./chunk-3PAAA3FK.js";
import "./chunk-EGPAQBOO.js";
import "./chunk-W6L6ZQPE.js";
import "./chunk-6GHQTYW5.js";
import "./chunk-WJ3E33GQ.js";
import "./chunk-YOYO2XMY.js";
import "./chunk-SZTZNZQW.js";
import "./chunk-AJG2ZYEA.js";
import "./chunk-CFXCM2NO.js";
import {
  n as n9
} from "./chunk-B3BLJNSM.js";
import {
  t as t9
} from "./chunk-ALKEERWI.js";
import "./chunk-F75XORHS.js";
import {
  t as t8
} from "./chunk-ME5HHRVQ.js";
import "./chunk-ZP6KSK4N.js";
import {
  R as R4,
  a as a8,
  b as b8,
  p as p5,
  y as y5
} from "./chunk-6KSMNSLR.js";
import {
  M as M2,
  b as b6,
  d as d3,
  h as h5,
  l as l8,
  p as p4,
  v as v3
} from "./chunk-JBTWCDRR.js";
import {
  S,
  b as b7,
  k as k3,
  w as w4
} from "./chunk-U6CJFTOF.js";
import "./chunk-FHCV4NTV.js";
import "./chunk-C7T2CCN3.js";
import "./chunk-M5JMVUW2.js";
import {
  K as K2,
  R as R3,
  U as U2,
  j2 as j3,
  k as k2
} from "./chunk-2JMKFI2D.js";
import {
  c as c4,
  e as e7,
  f2 as f7,
  o as o8,
  t as t7
} from "./chunk-QYAMBIRP.js";
import "./chunk-EOQ2S5UA.js";
import {
  w as w3,
  y as y4
} from "./chunk-WBXDB33U.js";
import {
  D,
  F as F2,
  H as H2,
  I as I2,
  L,
  P as P3,
  Q as Q2
} from "./chunk-XTEXJOLG.js";
import "./chunk-YE4E5JCT.js";
import "./chunk-SXZO7ULH.js";
import {
  R as R2
} from "./chunk-GVMCGYZ6.js";
import "./chunk-JHV6OBEB.js";
import "./chunk-VNSHGTPN.js";
import "./chunk-NHFKDWOM.js";
import {
  Q,
  t as t5
} from "./chunk-2AOVWXAQ.js";
import "./chunk-ALR6N4CF.js";
import "./chunk-4X4BOGIG.js";
import "./chunk-Y4O7HJXV.js";
import "./chunk-7QPS6ATI.js";
import "./chunk-YYXR3KOD.js";
import {
  i as i4
} from "./chunk-WHHIH5YU.js";
import {
  n as n8
} from "./chunk-MEDXVTKR.js";
import "./chunk-5LMH6D7V.js";
import {
  t as t6
} from "./chunk-BZLHV37L.js";
import "./chunk-V6V3WWJF.js";
import {
  f as f6,
  o as o7
} from "./chunk-NDFIZYZY.js";
import {
  s as s7
} from "./chunk-TLTSPUO7.js";
import "./chunk-EK7HOTRR.js";
import {
  r as r9,
  t as t4,
  u as u5
} from "./chunk-ZVTEFYZX.js";
import {
  E as E3,
  a as a6
} from "./chunk-LPUPM55U.js";
import "./chunk-RORL5XZJ.js";
import "./chunk-E64QZ35H.js";
import "./chunk-FXT57D73.js";
import "./chunk-CJCWAWMZ.js";
import "./chunk-TCIOA3WX.js";
import "./chunk-5IXGYDQ3.js";
import "./chunk-RKVVFTIZ.js";
import "./chunk-WJ5RYEGC.js";
import "./chunk-7TAAMEZT.js";
import "./chunk-4POFO7MP.js";
import "./chunk-257FD5T2.js";
import "./chunk-ZNI54T6D.js";
import "./chunk-EKZRA6TO.js";
import "./chunk-M5SP6ZBM.js";
import "./chunk-SJ2OBYX2.js";
import {
  c as c11,
  d as d8
} from "./chunk-4VQDBNTM.js";
import "./chunk-3BNOOWTA.js";
import "./chunk-AIJLLSRB.js";
import "./chunk-VX2NEBRT.js";
import "./chunk-T3SYSTKO.js";
import "./chunk-HOJHSMLY.js";
import "./chunk-QSGJ3ECU.js";
import "./chunk-U55FA2EK.js";
import "./chunk-GBN36VHC.js";
import "./chunk-52SEOH5H.js";
import "./chunk-7HTU7ZUX.js";
import {
  _ as _5
} from "./chunk-QNVJVDYZ.js";
import {
  n as n7,
  r as r11
} from "./chunk-WDTGOP77.js";
import {
  A,
  E as E4,
  H,
  I,
  J as J3,
  K,
  N as N2,
  P as P2,
  W,
  _ as _4,
  c as c3,
  g as g2,
  j as j2,
  o as o6,
  p as p3,
  q as q3,
  r as r10,
  s as s6,
  u as u6,
  v as v2,
  y as y3
} from "./chunk-VYMBX5H5.js";
import {
  h as h4
} from "./chunk-BPTFV5VM.js";
import "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import "./chunk-XDLV73DB.js";
import "./chunk-ARTU4L55.js";
import "./chunk-6VL5D5UP.js";
import "./chunk-6QHY54HZ.js";
import "./chunk-GXJJY3ND.js";
import {
  a as a7,
  s as s5
} from "./chunk-5ONGWFJ3.js";
import "./chunk-PLNHHGHL.js";
import "./chunk-BBYMM7CM.js";
import {
  r as r3
} from "./chunk-EM7Y2JZC.js";
import "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import "./chunk-MUBG7EZN.js";
import "./chunk-TMVLBQMP.js";
import "./chunk-6IHS6RYH.js";
import "./chunk-OJBEN6CV.js";
import "./chunk-TU5E6NPS.js";
import "./chunk-RKNCTZBL.js";
import "./chunk-36OXW4YN.js";
import "./chunk-PEL3D3ZN.js";
import "./chunk-Q5KWD3VQ.js";
import "./chunk-BUQC3CLV.js";
import "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import {
  c as c8
} from "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import "./chunk-TJTOV6JD.js";
import "./chunk-C3FRY5U4.js";
import "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import {
  O as O2,
  P,
  b as b5,
  q as q2,
  s as s4,
  u as u4
} from "./chunk-HWUOAPTX.js";
import {
  e as e6
} from "./chunk-QHCKOBU7.js";
import {
  e as e5,
  n as n6,
  r as r8
} from "./chunk-K2OZ6WVC.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import {
  d
} from "./chunk-XL5QPCXN.js";
import {
  $,
  J as J2
} from "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import {
  J,
  o as o5
} from "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-6KDQMJAI.js";
import "./chunk-UDHS2MGH.js";
import "./chunk-QF7FRVN6.js";
import {
  f
} from "./chunk-ENINOZUZ.js";
import "./chunk-P6IKJIMO.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import {
  R,
  _ as _2,
  b as b3,
  c as c2,
  d as d2,
  f as f5,
  h as h2,
  i as i3,
  l as l5,
  n as n4,
  o as o3,
  p as p2,
  q,
  r as r6,
  x
} from "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import {
  s as s2
} from "./chunk-ONXWBTTM.js";
import {
  l as l6
} from "./chunk-T7F6Q6JJ.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import {
  a as a5,
  n as n3,
  r as r5,
  t as t3
} from "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import {
  y3 as y2
} from "./chunk-PZ5RULLK.js";
import {
  h as h3
} from "./chunk-OPJX4KXH.js";
import {
  n as n5
} from "./chunk-LTPHDYPK.js";
import {
  e as e4
} from "./chunk-3OVERDFX.js";
import {
  E as E2,
  k
} from "./chunk-FPMLKIDB.js";
import {
  _ as _3,
  b as b4,
  e as e3,
  l as l7,
  o as o4,
  r as r7,
  u as u3,
  v
} from "./chunk-AZXJIEZ6.js";
import {
  e as e2
} from "./chunk-Q75WYS7K.js";
import "./chunk-H74Q4SYB.js";
import {
  U,
  a as a3,
  f as f2,
  h,
  l as l3,
  w as w2
} from "./chunk-2OFHDVO5.js";
import {
  i as i2,
  l as l2
} from "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import {
  b as b2
} from "./chunk-YY5PITIH.js";
import {
  u as u7
} from "./chunk-CCQFL76O.js";
import {
  a as a4,
  f as f4,
  g,
  l as l4,
  p,
  y
} from "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import {
  M,
  r as r4,
  s as s3
} from "./chunk-SMWUT52Z.js";
import {
  _
} from "./chunk-AXZMNHTN.js";
import {
  f as f3
} from "./chunk-5T3MJDSR.js";
import {
  E,
  ae,
  ne,
  re
} from "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import {
  s
} from "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import {
  n as n2
} from "./chunk-XXLHAM2M.js";
import {
  b,
  i3 as i,
  m,
  r2 as r
} from "./chunk-5EI5H4QX.js";
import {
  a,
  a2,
  w
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import {
  F
} from "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  c,
  e,
  l2 as l,
  o,
  o2,
  r2,
  t,
  t2,
  u,
  u2
} from "./chunk-GNMPGHLQ.js";
import "./chunk-QY7XKUIV.js";
import {
  N,
  has,
  j,
  n
} from "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/libs/maquette/h.js
var e15 = (e23) => ({ vnodeSelector: "", properties: void 0, children: void 0, text: e23.toString(), domNode: null });
var r18 = (t26, o20, n23) => {
  for (let l25 = 0, i23 = o20.length; l25 < i23; l25++) {
    let i24 = o20[l25];
    Array.isArray(i24) ? r18(t26, i24, n23) : null != i24 && false !== i24 && ("string" == typeof i24 && (i24 = e15(i24)), n23.push(i24));
  }
};
function t14(e23, t26, o20) {
  if (Array.isArray(t26)) o20 = t26, t26 = void 0;
  else if (t26 && ("string" == typeof t26 || t26.hasOwnProperty("vnodeSelector")) || o20 && ("string" == typeof o20 || o20.hasOwnProperty("vnodeSelector"))) throw new Error("h called with invalid arguments");
  let n23, l25;
  return o20 && 1 === o20.length && "string" == typeof o20[0] ? n23 = o20[0] : o20 && (l25 = [], r18(e23, o20, l25), 0 === l25.length && (l25 = void 0)), { vnodeSelector: e23, properties: t26, children: l25, text: "" === n23 ? void 0 : n23, domNode: null };
}

// node_modules/@arcgis/core/views/overlay/TextOverlayItem.js
var l14 = { bottom: "esri-text-overlay-item-anchor-bottom", "bottom-right": "esri-text-overlay-item-anchor-bottom-right", "bottom-left": "esri-text-overlay-item-anchor-bottom-left", top: "esri-text-overlay-item-anchor-top", "top-right": "esri-text-overlay-item-anchor-top-right", "top-left": "esri-text-overlay-item-anchor-top-left", center: "esri-text-overlay-item-anchor-center", right: "esri-text-overlay-item-anchor-right", left: "esri-text-overlay-item-anchor-left" };
var n10 = class extends b {
  get position() {
    return [this.x, this.y];
  }
  set position(t26) {
    this._set("x", t26[0]), this._set("y", t26[1]);
  }
  get _textShadowColor() {
    const { textColor: t26, backgroundColor: e23 } = this, o20 = e23.clone();
    return o20.a *= t26.a, o20;
  }
  get _textShadow() {
    const t26 = this._textShadowColor.toCss(true);
    return `0 0 ${this._textShadowSize}px ${t26}`;
  }
  get padding() {
    return 0.5 * this.fontSize;
  }
  get borderRadius() {
    return this.padding;
  }
  set borderRadius(t26) {
    this._overrideIfSome("borderRadius", t26);
  }
  constructor(t26) {
    super(t26), this.x = 0, this.y = 0, this.text = "-", this.fontSize = 14, this.anchor = "center", this.visible = true, this.isDecoration = true, this.backgroundColor = new u7([0, 0, 0, 0.6]), this.textColor = new u7([255, 255, 255]), this._textShadowSize = 1;
  }
  render() {
    return t14("div", { classes: this._cssClasses(), styles: { left: Math.floor(this.x) + "px", top: Math.floor(this.y) + "px", visibility: this.visible ? "visible" : "hidden", fontSize: this.fontSize + "px", lineHeight: this.fontSize + "px", backgroundColor: this.backgroundColor.toCss(true), color: this.textColor.toCss(true), padding: this.padding + "px", borderRadius: this.borderRadius + "px", textShadow: this._textShadow } }, [this.text]);
  }
  renderCanvas(t26) {
    if (!this.visible) return;
    const e23 = t26.font.replace(/^(.*?)px/, "");
    t26.font = `${this.fontSize}px ${e23}`;
    const { padding: o20, borderRadius: i23 } = this, r27 = t26.measureText(this.text).width, s21 = "" !== this.text ? this.fontSize : 0, l25 = h12[this.anchor];
    t26.textAlign = "center", t26.textBaseline = "middle";
    const n23 = r27 + 2 * o20, a28 = s21 + 2 * o20, x13 = this.x + l25.x * n23, d21 = this.y + l25.y * a28;
    this._roundedRect(t26, x13, d21, n23, a28, i23), t26.fillStyle = this.backgroundColor.toCss(true), t26.fill();
    const p18 = this.x + (l25.x + 0.5) * n23, c25 = this.y + (l25.y + 0.5) * a28;
    this._renderTextShadow(t26, this.text, p18, c25), t26.fillStyle = this.textColor.toCss(true), t26.fillText(this.text, p18, c25);
  }
  _renderTextShadow(t26, e23, o20, i23) {
    t26.lineJoin = "miter", t26.fillStyle = `rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1 / a15.length})`;
    const r27 = this._textShadowSize;
    for (const [s21, l25] of a15) t26.fillText(e23, o20 + r27 * s21, i23 + r27 * l25);
  }
  _roundedRect(t26, e23, o20, i23, r27, s21) {
    s21 = Math.min(s21, r27 / 2, i23 / 2), t26.beginPath(), t26.moveTo(e23, o20 + s21), t26.arcTo(e23, o20, e23 + s21, o20, s21), t26.lineTo(e23 + i23 - s21, o20), t26.arcTo(e23 + i23, o20, e23 + i23, o20 + s21, s21), t26.lineTo(e23 + i23, o20 + r27 - s21), t26.arcTo(e23 + i23, o20 + r27, e23 + i23 - s21, o20 + r27, s21), t26.lineTo(e23 + s21, o20 + r27), t26.arcTo(e23, o20 + r27, e23, o20 + r27 - s21, s21), t26.closePath();
  }
  _cssClasses() {
    const t26 = { "esri-text-overlay-item": true };
    let e23;
    for (e23 in l14) t26[l14[e23]] = this.anchor === e23;
    return t26;
  }
};
__decorate([m()], n10.prototype, "x", void 0), __decorate([m()], n10.prototype, "y", void 0), __decorate([m()], n10.prototype, "position", null), __decorate([m()], n10.prototype, "text", void 0), __decorate([m()], n10.prototype, "fontSize", void 0), __decorate([m()], n10.prototype, "anchor", void 0), __decorate([m()], n10.prototype, "visible", void 0), __decorate([m()], n10.prototype, "isDecoration", void 0), __decorate([m()], n10.prototype, "backgroundColor", void 0), __decorate([m()], n10.prototype, "textColor", void 0), __decorate([m()], n10.prototype, "_textShadowSize", void 0), __decorate([m()], n10.prototype, "_textShadowColor", null), __decorate([m()], n10.prototype, "_textShadow", null), __decorate([m()], n10.prototype, "padding", null), __decorate([m()], n10.prototype, "borderRadius", null), n10 = __decorate([a2("esri.views.overlay.TextOverlayItem")], n10);
var h12 = { bottom: { x: -0.5, y: -1, textAlign: "center", textBaseline: "bottom" }, "bottom-left": { x: 0, y: -1, textAlign: "left", textBaseline: "bottom" }, "bottom-right": { x: -1, y: -1, textAlign: "right", textBaseline: "bottom" }, center: { x: -0.5, y: -0.5, textAlign: "center", textBaseline: "middle" }, left: { x: 0, y: -0.5, textAlign: "left", textBaseline: "middle" }, right: { x: -1, y: -0.5, textAlign: "right", textBaseline: "middle" }, top: { x: -0.5, y: 0, textAlign: "center", textBaseline: "top" }, "top-left": { x: 0, y: 0, textAlign: "left", textBaseline: "top" }, "top-right": { x: -1, y: 0, textAlign: "right", textBaseline: "top" } };
var a15 = [];
{
  const t26 = 16;
  for (let e23 = 0; e23 < 360; e23 += 360 / t26) a15.push([Math.cos(Math.PI * e23 / 180), Math.sin(Math.PI * e23 / 180)]);
}

// node_modules/@arcgis/core/views/interactive/SegmentLabels.js
var T3 = 3025;
var O3 = { default: 15, far: 25 };
var P4 = class extends b {
  constructor(t26) {
    super(t26), this.context = null, this.stagedVertex = null, this.visible = true, this.edgeDistance = "default", this._messageUnitsTask = null, this._labelInfos = [], this._nextLabelIndex = 0;
  }
  initialize() {
    this.addHandles([l3(() => [null != this.context && this.getCameraOrExtent(this.context), this.visible, this._edgeDistancePixels, this.stagedVertex, this._messagesUnits], () => this._update()), ...["vertex-add", "vertex-update", "vertex-remove"].map((t26) => a3(() => this.context?.editGeometryOperations, t26, () => this._update())), l3(() => this._colors, (t26) => this._updateStyle(t26)), b2(() => this._refreshMessages()), e(() => this._messageUnitsTask?.abort())]), this._refreshMessages();
  }
  destroy() {
    for (this._nextLabelIndex = 0; this._labelInfos.length; ) this._destroyLabel(this._labelInfos.pop());
  }
  get updating() {
    return null == this._messagesUnits;
  }
  get test() {
  }
  get _messagesUnits() {
    return this._messageUnitsTask?.value;
  }
  get _edgeDistancePixels() {
    return O3[this.edgeDistance];
  }
  get _colors() {
    const t26 = this.context?.view.effectiveTheme.textColor ?? u7.fromArray([255, 255, 255]);
    return { textColor: t26, backgroundColor: D(I2(t26, 160), 0.6) };
  }
  _update() {
    if (this.destroyed) return;
    this._nextLabelIndex = 0;
    const { context: t26, stagedVertex: e23 } = this;
    if (!t26) return this._destroyUnusedLabels();
    const { editGeometryOperations: s21 } = t26, { parts: o20, geometry: r27, coordinateHelper: i23 } = s21.data;
    if (!r27) return this._destroyUnusedLabels();
    const n23 = o20.length;
    for (let a28 = 0; a28 < n23; ++a28) {
      const o21 = V3(r27, s21, e23, i23, a28);
      if (o21.length < 2 || !G2(o21, t26.view, t26.elevationInfo, i23.spatialReference)) continue;
      const l25 = 1 === n23 && !h3(o21);
      let c25 = z6, h24 = F5;
      this.toScreenPointArray(t26, o21[0], c25);
      for (let e24 = 1; e24 < o21.length; ++e24) {
        const s22 = o21[e24 - 1], r28 = o21[e24];
        this.toScreenPointArray(t26, r28, h24), this._addLabel(t26, s22, c25, r28, h24, l25), [c25, h24] = [h24, c25];
      }
    }
    this._destroyUnusedLabels();
  }
  _updateStyle({ textColor: t26, backgroundColor: e23 }) {
    const s21 = this._nextLabelIndex, o20 = this._labelInfos;
    for (let r27 = 0; r27 < s21; ++r27) {
      const { label: s22 } = o20[r27];
      s22.textColor = t26, s22.backgroundColor = e23;
    }
  }
  _addLabel(t26, e23, s21, o20, r27, i23) {
    const { label: n23 } = this._getOrCreateLabel(t26);
    if (!this.visible || b4(s21, r27) < T3) return void (n23.visible = false);
    const { spatialReference: a28 } = t26.editGeometryOperations.data, c25 = t26.automaticLengthMeasurementUtils.autoDistance2D(e23, o20, a28), h24 = this._messagesUnits, p18 = e10(t26.view);
    n23.text = null != h24 && null != c25 ? k6(h24, c25, p18) : "", n23.visible = true;
    const m15 = r27[0] - s21[0], d21 = r27[1] - s21[1];
    i23 ? o4(R7, -d21, m15) : o4(R7, d21, -m15), v(R7, R7), l7(R7, R7, this._edgeDistancePixels), _3(q8, s21, r27, 0.5), u3(q8, q8, R7), n23.position = [q8[0], q8[1]], Math.abs(R7[0]) > Math.abs(R7[1]) ? n23.anchor = R7[0] > 0 ? "left" : "right" : n23.anchor = -R7[1] < 0 ? "top" : "bottom";
  }
  _getOrCreateLabel(t26) {
    const e23 = this._labelInfos.length > this._nextLabelIndex, { textColor: s21, backgroundColor: o20 } = this._colors;
    if (e23) {
      const t27 = this._labelInfos[this._nextLabelIndex++], { label: e24 } = t27;
      return e24.textColor = s21, e24.backgroundColor = o20, t27;
    }
    const r27 = new n10({ anchor: "center", fontSize: 8, textColor: s21, backgroundColor: o20 });
    t26.view.overlay?.items.add(r27);
    const i23 = { label: r27 };
    return this._labelInfos.push(i23), this._nextLabelIndex = this._labelInfos.length, i23;
  }
  _destroyUnusedLabels() {
    for (; this._labelInfos.length > this._nextLabelIndex; ) this._destroyLabel(this._labelInfos.pop());
  }
  _destroyLabel({ label: t26 }) {
    this.context?.view.overlay?.items.remove(t26), t26.destroy();
  }
  _refreshMessages() {
    this._messageUnitsTask?.abort(), this._messageUnitsTask = d(() => f("esri/core/t9n/Units"));
  }
};
function V3(t26, e23, s21, o20, r27) {
  const i23 = [];
  for (const l25 of e23.data.parts[r27].iterateVertices()) i23.push(o20.toXYZ(l25.pos, c4.get()));
  if (0 === r27 && null != s21 && i23.push(o20.toXYZ(s21, c4.get())), i23.length < 2) return i23;
  const n23 = i23[0], a28 = i23[i23.length - 1];
  return "polygon" === t26.type && i23.length > 2 && !J3(n23, a28) && i23.push(n23), i23;
}
function G2(t26, e23, s21, o20) {
  if ("2d" === e23.type) return true;
  const r27 = re(o20) ?? 1, i23 = ne(o20), n23 = (t27) => b11(e23, t27, o20, s21, U3) ?? 0;
  for (let a28 = 1; a28 < t26.length; ++a28) {
    const e24 = t26[a28 - 1], s22 = t26[a28], o21 = (s22[0] - e24[0]) * r27, l25 = (s22[1] - e24[1]) * r27, c25 = (n23(s22) - n23(e24)) * i23;
    if (Math.abs(c25) / Math.sqrt(o21 * o21 + l25 * l25) > A4) return false;
  }
  return true;
}
__decorate([m()], P4.prototype, "context", void 0), __decorate([m()], P4.prototype, "stagedVertex", void 0), __decorate([m()], P4.prototype, "visible", void 0), __decorate([m()], P4.prototype, "edgeDistance", void 0), __decorate([m()], P4.prototype, "updating", null), __decorate([m()], P4.prototype, "_messageUnitsTask", void 0), __decorate([m()], P4.prototype, "_messagesUnits", null), __decorate([m()], P4.prototype, "_edgeDistancePixels", null), __decorate([m()], P4.prototype, "_colors", null), P4 = __decorate([a2("esri.views.interactive.SegmentLabels")], P4);
var A4 = s3(5);
var R7 = n7();
var q8 = n7();
var z6 = f4();
var F5 = f4();

// node_modules/@arcgis/core/views/3d/interactive/SegmentLabels3D.js
var a16 = class extends P4 {
  getCameraOrExtent({ view: e23 }) {
    return e23.state.camera;
  }
  toScreenPointArray({ view: e23, elevationInfo: t26, editGeometryOperations: o20 }, i23, a28 = f4()) {
    const { spatialReference: m15 } = o20.data.coordinateHelper;
    return i8(i23, m15, t26, e23, c14), e23.state.camera.projectToScreen(c14, a28), a28;
  }
};
a16 = __decorate([a2("esri.views.3d.interactive.SegmentLabels3D")], a16);
var c14 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/DrapedVisualElementResources.js
var i12 = class {
  constructor(e23) {
    this._resourceFactory = e23, this._resources = null, this._visible = true, this._attached = false, this._renderGroup = 2;
  }
  destroy() {
    this._destroyResources();
  }
  get resources() {
    return this._resources?.external;
  }
  get visible() {
    return this._visible;
  }
  set visible(e23) {
    e23 !== this._visible && (this._visible = e23, this._syncGeometriesToRenderer());
  }
  get attached() {
    return this._attached;
  }
  set attached(e23) {
    e23 !== this._attached && (this._attached = e23, this._createOrDestroyResources());
  }
  get renderGroup() {
    return this._renderGroup;
  }
  set renderGroup(e23) {
    this._renderGroup = e23;
    const r27 = this._resources?.layerView;
    r27 && (r27.renderGroup = e23);
  }
  recreate() {
    this.attached && this._createResources();
  }
  recreateGeometry() {
    this._resourceFactory.recreateGeometry ? null != this._resources && (this._ensureRenderGeometriesRemoved(), this._resourceFactory.recreateGeometry(this._resources.external), this._syncGeometriesToRenderer()) : this.recreate();
  }
  forEachMaterial(e23) {
    this._resources && this._resourceFactory.forEachMaterial(this._resources.external, e23);
  }
  _createOrDestroyResources() {
    this._attached ? null == this._resources && this._createResources() : this._destroyResources();
  }
  _createResources() {
    this._destroyResources();
    const e23 = this._resourceFactory.createResources(), r27 = new c15({ view: this._resourceFactory.view, renderGroup: this._renderGroup }), s21 = this._resourceFactory.view.overlayManager;
    this._resources = { layerView: r27, external: e23, geometriesAdded: false }, s21 && (this._resources.drapeSourceRenderer = s21.registerGeometryDrapeSource(r27)), this._syncGeometriesToRenderer();
  }
  _destroyResources() {
    if (null == this._resources) return;
    this._ensureRenderGeometriesRemoved();
    const e23 = this._resourceFactory.view.overlayManager;
    e23 && e23.unregisterDrapeSource(this._resources.layerView), this._resourceFactory.destroyResources(this._resources.external), this._resources = null;
  }
  _syncGeometriesToRenderer() {
    this._visible ? this._ensureRenderGeometriesAdded() : this._ensureRenderGeometriesRemoved();
  }
  _ensureRenderGeometriesRemoved() {
    if (null == this._resources?.drapeSourceRenderer) return;
    if (!this._resources.geometriesAdded) return;
    this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries, 1), this._resources.geometriesAdded = false;
  }
  _ensureRenderGeometriesAdded() {
    if (null == this._resources?.drapeSourceRenderer) return;
    if (this._resources.geometriesAdded) return;
    this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries, 1), this._resources.geometriesAdded = true;
  }
};
var c15 = class extends s2(b) {
  constructor(e23) {
    super(e23), this.drapeSourceType = 1, this.updatePolicy = 1, this.renderGroup = 2;
  }
};
__decorate([m({ constructOnly: true })], c15.prototype, "view", void 0), __decorate([m({ readOnly: true })], c15.prototype, "drapeSourceType", void 0), __decorate([m()], c15.prototype, "renderGroup", void 0), c15 = __decorate([a2("esri.views.3d.interactive.visualElements.DrapedVisualElementResources")], c15);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js
var t15 = class {
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e23) {
    this._isDecoration = e23, this.forEachMaterial((t26) => t26?.setParameters({ isDecoration: e23 }));
  }
  constructor(t26) {
    this._isDecoration = false, this._attached = false, this._resourcesCreated = false, this._visible = true, this.view = t26.view, this._handle = l3(() => t26.view.ready, (e23) => {
      this._resourcesCreated && (e23 ? this._createResources() : this._destroyResources());
    });
  }
  applyProperties(e23) {
    let t26 = false;
    for (const s21 in e23) s21 in this && ("attached" === s21 ? t26 = !!e23[s21] : this[s21] = e23[s21]);
    this.attached = t26;
  }
  destroy() {
    this.attached = false, this._handle.remove();
  }
  get attached() {
    return this._attached;
  }
  set attached(e23) {
    e23 !== this._attached && this.view.stage && (this._attached = e23, this._attached && !this._resourcesCreated ? this._createResources() : !this._attached && this._resourcesCreated && this._destroyResources(), this.onAttachedChange(e23));
  }
  onAttachedChange(e23) {
  }
  get visible() {
    return this._visible;
  }
  set visible(e23) {
    e23 !== this._visible && (this._visible = e23, this.attached && this.updateVisibility(e23));
  }
  _createResources() {
    this.createResources(), this._resourcesCreated = true, this.updateVisibility(this.visible);
  }
  _destroyResources() {
    this.destroyResources(), this._resourcesCreated = false;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js
var c16 = class {
  constructor(e23) {
    this._resourceFactory = e23, this._resources = null, this._visible = true, this._attached = false;
  }
  destroy() {
    this._destroyResources();
  }
  get object() {
    return null != this._resources ? this._resources.object : null;
  }
  get resources() {
    return null != this._resources ? this._resources.external : null;
  }
  get visible() {
    return this._visible;
  }
  set visible(e23) {
    e23 !== this._visible && (this._visible = e23, this._syncVisible());
  }
  get attached() {
    return this._attached;
  }
  set attached(e23) {
    e23 !== this._attached && (this._attached = e23, this._createOrDestroyResources());
  }
  recreate() {
    this.attached && this._createResources();
  }
  recreateGeometry() {
    if (!this._resourceFactory.recreateGeometry) return void this.recreate();
    const e23 = this._resourceFactory.view.stage;
    if (null == this._resources || !e23) return;
    const s21 = this._resources.object;
    s21.removeAllGeometries(), this._resourceFactory.recreateGeometry(this._resources.external, s21, this._resources.layer);
  }
  forEachMaterial(e23) {
    this._resources && this._resourceFactory.forEachMaterial(this._resources.external, e23);
  }
  _createOrDestroyResources() {
    this._attached ? this._resources || this._createResources() : this._destroyResources();
  }
  _createResources() {
    this._destroyResources();
    const c25 = this._resourceFactory, i23 = c25.view, o20 = i23.stage;
    if (!o20) return;
    const a28 = new d10(o20, { pickable: false, updatePolicy: 1 }), h24 = new W2({ castShadow: false }), u22 = c25.createResources(h24, a28);
    a28.add(h24);
    const l25 = c25.cameraChanged, _12 = l25 ? l3(() => i23.state.camera, (e23) => l25(e23), h) : null;
    this._resources = { layer: a28, object: h24, external: u22, cameraHandle: _12 }, this._syncVisible();
  }
  _destroyResources() {
    null != this._resources && (this._resources.layer.destroy(), this._resources.object.dispose(), this._resources.cameraHandle?.remove(), this._resourceFactory.destroyResources(this._resources.external), this._resources = null);
  }
  _syncVisible() {
    null != this._resources && (this._resources.object.visible = this._visible);
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/EngineVisualElement.js
var t16 = class extends t15 {
  constructor(s21) {
    super(s21), this._isDraped = false, this.object3dResources = new c16(this.createObject3DResourceFactory(s21.view)), this.drapedResources = new i12(this.createDrapedResourceFactory(s21.view)), this.isDraped = s21.isDraped ?? false;
  }
  get isDraped() {
    return this._isDraped;
  }
  set isDraped(e23) {
    e23 !== this._isDraped && (this._isDraped = e23, this.object3dResources.attached = this.attached && !e23, this.drapedResources.attached = this.attached && e23);
  }
  get renderGroup() {
    return this.drapedResources.renderGroup;
  }
  set renderGroup(e23) {
    this.drapedResources.renderGroup = e23;
  }
  createResources() {
    this.object3dResources.attached = !this._isDraped, this.drapedResources.attached = this._isDraped;
  }
  destroyResources() {
    this.object3dResources.attached = false, this.drapedResources.attached = false;
  }
  recreate() {
    this.object3dResources.recreate(), this.drapedResources.recreate();
  }
  recreateGeometry() {
    this.object3dResources.recreateGeometry(), this.drapedResources.recreateGeometry();
  }
  destroy() {
    this.object3dResources.destroy(), this.drapedResources.destroy(), super.destroy();
  }
  updateVisibility(e23) {
    this.object3dResources.visible = e23, this.drapedResources.visible = e23;
  }
  forEachMaterial(e23) {
    this.object3dResources?.forEachMaterial(e23), this.drapedResources?.forEachMaterial(e23);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CompositingTechnique.js
var c17 = class extends m4 {
  constructor(r27, s21) {
    super(r27, s21, new t12(c13, () => import("./Compositing.glsl-IZXYWFSW.js")), s11);
  }
  initializePipeline(e23) {
    const { blitMode: r27, blitEmissiveMode: o20 } = e23, i23 = o20 ? 1 : 0;
    switch (r27) {
      case 0:
      case 3:
        return T({ colorWrite: d4, drawBuffers: d5(0, i23) });
      case 1:
        return T({ blending: r12, colorWrite: d4, drawBuffers: d5(0, i23) });
      default:
        return T({ blending: l9, colorWrite: d4, drawBuffers: d5(0, i23) });
    }
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CompositingTechniqueConfiguration.js
var e16 = class extends a9 {
  constructor() {
    super(...arguments), this.blitMode = 0, this.blitEmissiveMode = 0, this.hasOpacityFactor = false;
  }
};
__decorate([i5({ count: 4 })], e16.prototype, "blitMode", void 0), __decorate([i5({ count: 4 })], e16.prototype, "blitEmissiveMode", void 0), __decorate([i5()], e16.prototype, "hasOpacityFactor", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/blit/Blit.js
var r19 = class {
  constructor(r27, s21 = 0) {
    this._techniques = r27, this._parameters = new m7(), this._configuration = new e16(), this._configuration.blitMode = s21, r27.precompile(c17, this._configuration), this._configuration.hasOpacityFactor = true, r27.precompile(c17, this._configuration), this._configuration.hasOpacityFactor = false;
  }
  blit(t26, i23, e23, r27) {
    this.blitTexture(t26, i23.getTexture(), e23, r27);
  }
  blitTexture(t26, e23, r27, s21) {
    t26.bindFramebuffer(r27.fbo), t26.setClearColor(0, 0, 0, 1), t26.clear(16384), this._parameters.texture = e23;
    const o20 = this._techniques.get(c17, this._configuration);
    t26.bindTechnique(o20, s21, this._parameters), t26.screen.draw();
  }
  blend(t26, e23, r27, s21, o20 = 1) {
    this._configuration.hasOpacityFactor = o20 < 1;
    const n23 = this._techniques.get(c17, this._configuration);
    return !!n23.compiled && (t26.bindFramebuffer(r27.fbo), this._parameters.texture = e23.getTexture(), this._parameters.opacity = o20, t26.bindTechnique(n23, s21, this._parameters), t26.screen.draw(), true);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js
var a17 = class {
  constructor(e23) {
    this._renderCoordsHelper = e23, this._origin = n3(), this._dirty = false, this._count = 0;
  }
  set vertices(e23) {
    const t26 = e6(3 * e23.length);
    let r27 = 0;
    for (const s21 of e23) t26[r27++] = s21[0], t26[r27++] = s21[1], t26[r27++] = s21[2];
    this.buffers = [t26];
  }
  set buffers(t26) {
    if (this._buffers = t26, this._buffers.length > 0) {
      const t27 = this._buffers[0], r27 = 3 * Math.floor(t27.length / 3 / 2);
      o6(this._origin, t27[r27], t27[r27 + 1], t27[r27 + 2]);
    } else o6(this._origin, 0, 0, 0);
    this._dirty = true;
  }
  get origin() {
    return this._origin;
  }
  draw(e23) {
    const t26 = this._ensureVAO(e23);
    null != t26 && (e23.bindVAO(t26), e23.drawArrays(_5.TRIANGLES, 0, this._count));
  }
  dispose() {
    null != this._vao && this._vao.dispose();
  }
  get _layout() {
    return 1 === this._renderCoordsHelper.viewingMode ? _7 : d11;
  }
  _ensureVAO(e23) {
    return null == this._buffers ? null : (this._vao ??= this._createVAO(e23, this._buffers), this._ensureVertexData(this._vao, this._buffers), this._vao);
  }
  _createVAO(e23, t26) {
    const r27 = this._createDataBuffer(t26);
    return this._dirty = false, new r17(e23, new r13(e23, t5(this._layout), r27));
  }
  _ensureVertexData(e23, t26) {
    if (!this._dirty) return;
    const r27 = this._createDataBuffer(t26);
    e23.buffer()?.setData(r27), this._dirty = false;
  }
  _createDataBuffer(r27) {
    const s21 = r27.reduce((e23, t26) => e23 + l15(t26), 0);
    this._count = s21;
    const o20 = this._layout.createBuffer(s21), i23 = this._origin;
    let f20 = 0, n23 = 0;
    const u22 = "startUp" in o20 ? this._setUpVectors.bind(this, o20) : void 0;
    for (const a28 of r27) {
      for (let r28 = 0; r28 < a28.length; r28 += 3) {
        const s22 = o6(h13, a28[r28], a28[r28 + 1], a28[r28 + 2]);
        0 === r28 ? n23 = this._renderCoordsHelper.getAltitude(s22) : this._renderCoordsHelper.setAltitude(s22, n23);
        const l25 = f20 + 2 * r28;
        u22?.(r28, l25, a28, s22);
        const c25 = c3(h13, s22, i23);
        if (r28 < a28.length - 3) {
          for (let e23 = 0; e23 < 6; e23++) o20.start.setVec(l25 + e23, c25);
          o20.extrude.setValues(l25, 0, -1), o20.extrude.setValues(l25 + 1, 1, -1), o20.extrude.setValues(l25 + 2, 1, 1), o20.extrude.setValues(l25 + 3, 0, -1), o20.extrude.setValues(l25 + 4, 1, 1), o20.extrude.setValues(l25 + 5, 0, 1);
        }
        if (r28 > 0) for (let e23 = -6; e23 < 0; e23++) o20.end.setVec(l25 + e23, c25);
      }
      f20 += l15(a28);
    }
    return o20.buffer;
  }
  _setUpVectors(e23, t26, r27, s21, o20) {
    const i23 = this._renderCoordsHelper.worldUpAtPosition(o20, c18);
    if (t26 < s21.length - 3) for (let f20 = 0; f20 < 6; f20++) e23.startUp.setVec(r27 + f20, i23);
    if (t26 > 0) for (let f20 = -6; f20 < 0; f20++) e23.endUp.setVec(r27 + f20, i23);
  }
};
function l15(e23) {
  return 3 * (2 * (e23.length / 3 - 1));
}
var c18 = n3();
var h13 = n3();
var _7 = Q().vec3f("start").vec3f("end").vec2f("extrude").vec3f("startUp").vec3f("endUp");
var d11 = Q().vec3f("start").vec3f("end").vec2f("extrude");

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js
var h14 = class extends c6 {
  constructor() {
    super(...arguments), this.innerColor = r5(1, 1, 1), this.innerWidth = 1, this.glowColor = r5(1, 0.5, 0), this.glowWidth = 8, this.glowFalloff = 8, this.globalAlpha = 0.75, this.globalAlphaContrastBoost = 2, this.angleCutoff = s3(6), this.pointDistanceOrigin = n3(), this.pointDistanceTarget = n3(), this.lineVerticalPlaneSegment = v3(), this.intersectsLineSegment = v3(), this.intersectsLineRadius = 3, this.heightManifoldTarget = n3(), this.lineStartWorld = n3(), this.lineEndWorld = n3();
  }
};
var m9 = class extends m4 {
  constructor(e23, t26) {
    super(e23, t26, new t12(q7, () => import("./Laserlines.glsl-JCAOVUXU.js")), s11);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js
var a18 = class extends h14 {
  constructor() {
    super(...arguments), this.origin = n3();
  }
};
var i13 = class extends m4 {
  constructor(e23, s21) {
    super(e23, s21, new t12(f13, () => import("./LaserlinePath.glsl-CDMOA6NP.js")), n11);
  }
};
var n11 = /* @__PURE__ */ new Map([["start", 0], ["end", 1], ["extrude", 2], ["startUp", 3], ["endUp", 4]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js
var e17 = class extends a9 {
  constructor() {
    super(...arguments), this.contrastControlEnabled = false, this.spherical = false;
  }
};
__decorate([i5()], e17.prototype, "contrastControlEnabled", void 0), __decorate([i5()], e17.prototype, "spherical", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js
var n12 = class extends e17 {
  constructor() {
    super(...arguments), this.heightManifoldEnabled = false, this.pointDistanceEnabled = false, this.lineVerticalPlaneEnabled = false, this.intersectsLineEnabled = false;
  }
};
__decorate([i5()], n12.prototype, "heightManifoldEnabled", void 0), __decorate([i5()], n12.prototype, "pointDistanceEnabled", void 0), __decorate([i5()], n12.prototype, "lineVerticalPlaneEnabled", void 0), __decorate([i5()], n12.prototype, "intersectsLineEnabled", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js
var V4 = class extends a12 {
  constructor(e23) {
    super(e23), this.isDecoration = true, this.produces = j5.LASERLINES, this.consumes = { required: [j5.LASERLINES, "normals"] }, this.requireGeometryDepth = true, this._configuration = new n12(), this._pathTechniqueConfiguration = new e17(), this._heightManifoldEnabled = false, this._pointDistanceEnabled = false, this._lineVerticalPlaneEnabled = false, this._intersectsLineEnabled = false, this._intersectsLineInfinite = false, this._pathVerticalPlaneEnabled = false, this._passParameters = new a18();
    const t26 = e23.view.stage.renderView.techniques, i23 = new e17();
    i23.contrastControlEnabled = e23.contrastControlEnabled, t26.precompile(i13, i23);
  }
  initialize() {
    this._passParameters.renderCoordsHelper = this.view.renderCoordsHelper, this._pathTechniqueConfiguration.spherical = 1 === this.view.state.viewingMode, this._pathTechniqueConfiguration.contrastControlEnabled = this.contrastControlEnabled, this._techniques.precompile(i13, this._pathTechniqueConfiguration), this._blit = new r19(this._techniques, 2);
  }
  destroy() {
    this._pathVerticalPlaneData = r2(this._pathVerticalPlaneData), this._blit = null;
  }
  get _techniques() {
    return this.view.stage.renderView.techniques;
  }
  get heightManifoldEnabled() {
    return this._heightManifoldEnabled;
  }
  set heightManifoldEnabled(e23) {
    this._heightManifoldEnabled !== e23 && (this._heightManifoldEnabled = e23, this.requestRender(1));
  }
  get heightManifoldTarget() {
    return this._passParameters.heightManifoldTarget;
  }
  set heightManifoldTarget(e23) {
    s6(this._passParameters.heightManifoldTarget, e23), this.requestRender(1);
  }
  get pointDistanceEnabled() {
    return this._pointDistanceEnabled;
  }
  set pointDistanceEnabled(e23) {
    e23 !== this._pointDistanceEnabled && (this._pointDistanceEnabled = e23, this.requestRender(1));
  }
  get pointDistanceTarget() {
    return this._passParameters.pointDistanceTarget;
  }
  set pointDistanceTarget(e23) {
    s6(this._passParameters.pointDistanceTarget, e23), this.requestRender(1);
  }
  get pointDistanceOrigin() {
    return this._passParameters.pointDistanceOrigin;
  }
  set pointDistanceOrigin(e23) {
    s6(this._passParameters.pointDistanceOrigin, e23), this.requestRender(1);
  }
  get lineVerticalPlaneEnabled() {
    return this._lineVerticalPlaneEnabled;
  }
  set lineVerticalPlaneEnabled(e23) {
    e23 !== this._lineVerticalPlaneEnabled && (this._lineVerticalPlaneEnabled = e23, this.requestRender(1));
  }
  get lineVerticalPlaneSegment() {
    return this._passParameters.lineVerticalPlaneSegment;
  }
  set lineVerticalPlaneSegment(e23) {
    p4(e23, this._passParameters.lineVerticalPlaneSegment), this.requestRender(1);
  }
  get intersectsLineEnabled() {
    return this._intersectsLineEnabled;
  }
  set intersectsLineEnabled(e23) {
    e23 !== this._intersectsLineEnabled && (this._intersectsLineEnabled = e23, this.requestRender(1));
  }
  get intersectsLineSegment() {
    return this._passParameters.intersectsLineSegment;
  }
  set intersectsLineSegment(e23) {
    p4(e23, this._passParameters.intersectsLineSegment), this.requestRender(1);
  }
  get intersectsLineInfinite() {
    return this._intersectsLineInfinite;
  }
  set intersectsLineInfinite(e23) {
    e23 !== this._intersectsLineInfinite && (this._intersectsLineInfinite = e23, this.requestRender(1));
  }
  get pathVerticalPlaneEnabled() {
    return this._pathVerticalPlaneEnabled;
  }
  set pathVerticalPlaneEnabled(e23) {
    e23 !== this._pathVerticalPlaneEnabled && (this._pathVerticalPlaneEnabled = e23, null != this._pathVerticalPlaneData && this.requestRender(1));
  }
  set pathVerticalPlaneVertices(e23) {
    null == this._pathVerticalPlaneData && (this._pathVerticalPlaneData = new a17(this._passParameters.renderCoordsHelper)), this._pathVerticalPlaneData.vertices = e23, this.pathVerticalPlaneEnabled && this.requestRender(1);
  }
  set pathVerticalPlaneBuffers(e23) {
    null == this._pathVerticalPlaneData && (this._pathVerticalPlaneData = new a17(this._passParameters.renderCoordsHelper)), this._pathVerticalPlaneData.buffers = e23, this.pathVerticalPlaneEnabled && this.requestRender(1);
  }
  setParameters(e23) {
    o11(this._passParameters, e23) && this.requestRender(1);
  }
  precompile() {
    this._acquireTechnique();
  }
  render(e23) {
    const t26 = e23.find(({ name: e24 }) => e24 === this.produces);
    if (this.isDecoration && !this.bindParameters.decorations || null == this._blit) return t26;
    const i23 = this.renderingContext, n23 = e23.find(({ name: e24 }) => "normals" === e24);
    this._passParameters.normals = n23?.getTexture();
    const s21 = () => {
      (this.heightManifoldEnabled || this.pointDistanceEnabled || this.lineVerticalPlaneSegment || this.intersectsLineEnabled) && this._renderUnified(), this.pathVerticalPlaneEnabled && this._renderPath();
    };
    if (!this.contrastControlEnabled) return i23.bindFramebuffer(t26.fbo), s21(), t26;
    this._passParameters.colors = t26.getTexture();
    const r27 = this.fboCache.acquire(t26.fbo.width, t26.fbo.height, "laser lines");
    return i23.bindFramebuffer(r27.fbo), i23.setClearColor(0, 0, 0, 0), i23.clear(16640), s21(), i23.unbindTexture(t26.getTexture()), this._blit.blend(i23, r27, t26, this.bindParameters) || this.requestRender(1), r27.release(), t26;
  }
  _acquireTechnique() {
    return this._configuration.heightManifoldEnabled = this.heightManifoldEnabled, this._configuration.lineVerticalPlaneEnabled = this.lineVerticalPlaneEnabled, this._configuration.pointDistanceEnabled = this.pointDistanceEnabled, this._configuration.intersectsLineEnabled = this.intersectsLineEnabled, this._configuration.contrastControlEnabled = this.contrastControlEnabled, this._configuration.spherical = 1 === this.view.state.viewingMode, this._techniques.get(m9, this._configuration);
  }
  _renderUnified() {
    if (!this._updatePassParameters()) return;
    const e23 = this._acquireTechnique();
    if (e23.compiled) {
      const t26 = this.renderingContext;
      t26.bindTechnique(e23, this.bindParameters, this._passParameters), t26.screen.draw();
    } else this.requestRender(1);
  }
  _renderPath() {
    if (null == this._pathVerticalPlaneData) return;
    const e23 = this._techniques.get(i13, this._pathTechniqueConfiguration);
    if (e23.compiled) {
      const t26 = this.renderingContext;
      this._passParameters.origin = this._pathVerticalPlaneData.origin, t26.bindTechnique(e23, this.bindParameters, this._passParameters), this._pathVerticalPlaneData.draw(t26);
    } else this.requestRender(1);
  }
  _updatePassParameters() {
    if (!this._intersectsLineEnabled) return true;
    const e23 = this.bindParameters.camera, t26 = this._passParameters;
    if (this._intersectsLineInfinite) {
      if (y5(k3(t26.intersectsLineSegment.origin, t26.intersectsLineSegment.vector), D3), D3.c0 = -Number.MAX_VALUE, !R4(e23.frustum, D3)) return false;
      p5(D3, t26.lineStartWorld), b8(D3, t26.lineEndWorld);
    } else s6(t26.lineStartWorld, t26.intersectsLineSegment.origin), u6(t26.lineEndWorld, t26.intersectsLineSegment.origin, t26.intersectsLineSegment.vector);
    return true;
  }
  get test() {
  }
};
__decorate([m({ constructOnly: true })], V4.prototype, "contrastControlEnabled", void 0), __decorate([m()], V4.prototype, "isDecoration", void 0), __decorate([m()], V4.prototype, "produces", void 0), __decorate([m()], V4.prototype, "consumes", void 0), V4 = __decorate([a2("esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer")], V4);
var D3 = a8();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js
var c19 = class extends t15 {
  constructor(e23) {
    super(e23), this._angleCutoff = y8, this._style = {}, this._heightManifoldTarget = n3(), this._heightManifoldEnabled = false, this._intersectsLine = v3(), this._intersectsLineEnabled = false, this._intersectsLineInfinite = false, this._lineVerticalPlaneSegment = null, this._pathVerticalPlaneBuffers = null, this._pointDistanceLine = null, this.applyProperties(e23);
  }
  get testData() {
  }
  createResources() {
    this._ensureRenderer();
  }
  destroyResources() {
    this._disposeRenderer();
  }
  updateVisibility() {
    this._syncRenderer(), this._syncHeightManifold(), this._syncIntersectsLine(), this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance();
  }
  get angleCutoff() {
    return this._angleCutoff;
  }
  set angleCutoff(e23) {
    this._angleCutoff !== e23 && (this._angleCutoff = e23, this._syncAngleCutoff());
  }
  get style() {
    return this._style;
  }
  set style(e23) {
    this._style = e23, this._syncStyle();
  }
  get heightManifoldTarget() {
    return this._heightManifoldEnabled ? this._heightManifoldTarget : null;
  }
  set heightManifoldTarget(t26) {
    null != t26 ? (s6(this._heightManifoldTarget, t26), this._heightManifoldEnabled = true) : this._heightManifoldEnabled = false, this._syncRenderer(), this._syncHeightManifold();
  }
  set intersectsWorldUpAtLocation(e23) {
    if (null == e23) return void (this.intersectsLine = null);
    const t26 = this.view.renderCoordsHelper.worldUpAtPosition(e23, _8);
    this.intersectsLine = h5(e23, t26), this.intersectsLineInfinite = true;
  }
  get intersectsLine() {
    return this._intersectsLineEnabled ? this._intersectsLine : null;
  }
  set intersectsLine(e23) {
    null != e23 ? (p4(e23, this._intersectsLine), this._intersectsLineEnabled = true) : this._intersectsLineEnabled = false, this._syncIntersectsLine(), this._syncRenderer();
  }
  get intersectsLineInfinite() {
    return this._intersectsLineInfinite;
  }
  set intersectsLineInfinite(e23) {
    this._intersectsLineInfinite = e23, this._syncIntersectsLineInfinite();
  }
  get lineVerticalPlaneSegment() {
    return this._lineVerticalPlaneSegment;
  }
  set lineVerticalPlaneSegment(e23) {
    this._lineVerticalPlaneSegment = null != e23 ? p4(e23) : null, this._syncLineVerticalPlane(), this._syncRenderer();
  }
  get pathVerticalPlane() {
    return this._pathVerticalPlaneBuffers;
  }
  set pathVerticalPlane(e23) {
    this._pathVerticalPlaneBuffers = e23, this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance(), this._syncRenderer();
  }
  get pointDistanceLine() {
    return this._pointDistanceLine;
  }
  set pointDistanceLine(e23) {
    this._pointDistanceLine = null != e23 ? { origin: t3(e23.origin), target: e23.target ? t3(e23.target) : null } : null, this._syncPointDistance(), this._syncRenderer();
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e23) {
    this._isDecoration = e23, this._renderer && (this._renderer.isDecoration = e23);
  }
  _syncRenderer() {
    this.attached && this.visible && (this._intersectsLineEnabled || this._heightManifoldEnabled || null != this._pointDistanceLine || null != this._pathVerticalPlaneBuffers) ? this._ensureRenderer() : this._disposeRenderer();
  }
  _ensureRenderer() {
    null == this._renderer && (this._renderer = new V4({ view: this.view, contrastControlEnabled: true, isDecoration: this.isDecoration }), this._syncStyle(), this._syncHeightManifold(), this._syncIntersectsLine(), this._syncIntersectsLineInfinite(), this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance(), this._syncAngleCutoff());
  }
  _syncStyle() {
    null != this._renderer && this._renderer.setParameters(this._style);
  }
  _syncAngleCutoff() {
    this._renderer?.setParameters({ angleCutoff: this._angleCutoff });
  }
  _syncHeightManifold() {
    null != this._renderer && (this._renderer.heightManifoldEnabled = this._heightManifoldEnabled && this.visible, this._heightManifoldEnabled && (this._renderer.heightManifoldTarget = this._heightManifoldTarget));
  }
  _syncIntersectsLine() {
    null != this._renderer && (this._renderer.intersectsLineEnabled = this._intersectsLineEnabled && this.visible, this._intersectsLineEnabled && (this._renderer.intersectsLineSegment = this._intersectsLine));
  }
  _syncIntersectsLineInfinite() {
    null != this._renderer && (this._renderer.intersectsLineInfinite = this._intersectsLineInfinite);
  }
  _syncPathVerticalPlane() {
    null != this._renderer && (this._renderer.pathVerticalPlaneEnabled = null != this._pathVerticalPlaneBuffers && this.visible, null != this._pathVerticalPlaneBuffers && (this._renderer.pathVerticalPlaneBuffers = this._pathVerticalPlaneBuffers));
  }
  _syncLineVerticalPlane() {
    null != this._renderer && (this._renderer.lineVerticalPlaneEnabled = null != this._lineVerticalPlaneSegment && this.visible, null != this._lineVerticalPlaneSegment && (this._renderer.lineVerticalPlaneSegment = this._lineVerticalPlaneSegment));
  }
  _syncPointDistance() {
    if (null == this._renderer) return;
    const e23 = this._pointDistanceLine, t26 = null != e23;
    this._renderer.pointDistanceEnabled = t26 && null != e23.target && this.visible, t26 && (this._renderer.pointDistanceOrigin = e23.origin, null != e23.target && (this._renderer.pointDistanceTarget = e23.target));
  }
  _disposeRenderer() {
    null != this._renderer && this.view.stage && (this._renderer.destroy(), this._renderer = null);
  }
  forEachMaterial() {
  }
};
var _8 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/ExtendedLineVisualElement.js
var G3 = class extends t16 {
  constructor(e23) {
    super(e23), this._ray = b7(), this._isWorldDown = false, this._start = n3(), this._end = r5(1, 0, 0), this._width = 1, this._color = r9(1, 0, 1, 1), this._polygonOffset = false, this._writeDepthEnabled = true, this._innerWidth = 0, this._innerColor = r9(1, 1, 1, 1), this._stipplePattern = null, this._stippleOffColor = null, this._stipplePreferContinuous = true, this._falloff = 0, this._extensionType = 0, this._laserlineStyle = null, this._laserlineEnabled = false, this._renderOccluded = 4, this._fadedExtensions = A5, this._laserline = new c19({ view: this.view, isDecoration: e23.isDecoration }), this.applyProperties(e23);
  }
  destroy() {
    this._laserline.destroy(), super.destroy();
  }
  createObject3DResourceFactory(e23) {
    return { view: e23, createResources: (e24) => this._createObject3DResources(e24), destroyResources: x4, recreateGeometry: (e24, t26) => this._recreateObject3DGeometry(e24, t26), cameraChanged: () => this._updateGeometry(), forEachMaterial: (e24, t26) => t26(e24.material) };
  }
  createDrapedResourceFactory(e23) {
    return { view: e23, createResources: () => this._createDrapedResources(), destroyResources: x4, recreateGeometry: (e24) => this._recreateDrapedGeometry(e24), forEachMaterial: (e24, t26) => t26(e24.material) };
  }
  updateVisibility(e23) {
    super.updateVisibility(e23), this._laserline.visible = e23;
  }
  onAttachedChange() {
    this._laserline.attached = this._laserlineAttached;
  }
  setStartEndFromWorldDownAtLocation(r27) {
    this._isWorldDown = true, s6(this._start, r27), this.view.renderCoordsHelper.worldUpAtPosition(r27, this._end), c3(this._end, r27, this._end), S(this._start, this._end, this._ray), this._updateGeometry();
  }
  get start() {
    return this._start;
  }
  set start(t26) {
    this._isWorldDown = false, H(this._start, t26) || (s6(this._start, t26), S(this._start, this._end, this._ray), this._updateGeometry());
  }
  get end() {
    return this._end;
  }
  set end(t26) {
    this._isWorldDown = false, H(this._end, t26) || (s6(this._end, t26), S(this._start, this._end, this._ray), this._updateGeometry());
  }
  get width() {
    return this._width;
  }
  set width(e23) {
    e23 !== this._width && (this._width = e23, this._updateMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e23) {
    E3(e23, this._color) || (a6(this._color, e23), this._updateMaterial());
  }
  get polygonOffset() {
    return this._polygonOffset;
  }
  set polygonOffset(e23) {
    e23 !== this._polygonOffset && (this._polygonOffset = e23, this._updateMaterial());
  }
  get writeDepthEnabled() {
    return this._writeDepthEnabled;
  }
  set writeDepthEnabled(e23) {
    this._writeDepthEnabled !== e23 && (this._writeDepthEnabled = e23, this._updateMaterial());
  }
  get innerWidth() {
    return this._innerWidth;
  }
  set innerWidth(e23) {
    e23 !== this._innerWidth && (this._innerWidth = e23, this._updateMaterial());
  }
  get innerColor() {
    return this._innerColor;
  }
  set innerColor(e23) {
    E3(e23, this._innerColor) || (a6(this._innerColor, e23), this._updateMaterial());
  }
  get stipplePattern() {
    return this._stipplePattern;
  }
  set stipplePattern(e23) {
    const t26 = null != e23 != (null != this._stipplePattern);
    this._stipplePattern = e23, t26 ? this.recreate() : this._updateMaterial();
  }
  get stippleOffColor() {
    return this._stippleOffColor;
  }
  set stippleOffColor(e23) {
    null != e23 && null != this._stippleOffColor && E3(e23, this._stippleOffColor) || (this._stippleOffColor = null != e23 ? t4(e23) : null, this._updateMaterial());
  }
  get stipplePreferContinuous() {
    return this._stipplePreferContinuous;
  }
  set stipplePreferContinuous(e23) {
    e23 !== this._stipplePreferContinuous && (this._stipplePreferContinuous = e23, this._updateMaterial());
  }
  get falloff() {
    return this._falloff;
  }
  set falloff(e23) {
    e23 !== this._falloff && (this._falloff = e23, this._updateMaterial());
  }
  get extensionType() {
    return this._extensionType;
  }
  set extensionType(e23) {
    e23 !== this._extensionType && (this._extensionType = e23, this.recreateGeometry());
  }
  get _laserlineAttached() {
    return this._laserlineEnabled && null != this._laserlineStyle && this.attached && !this.isDraped;
  }
  get laserlineStyle() {
    return this._laserlineStyle;
  }
  set laserlineStyle(e23) {
    this._laserlineStyle = e23, this._laserline.attached = this._laserlineAttached, null != e23 && (this._laserline.style = e23);
  }
  get laserlineEnabled() {
    return this._laserlineEnabled;
  }
  set laserlineEnabled(e23) {
    this._laserlineEnabled !== e23 && (this._laserlineEnabled = e23, this._laserline.attached = this._laserlineAttached);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e23) {
    e23 !== this._renderOccluded && (this._renderOccluded = e23, this._updateMaterial());
  }
  get _normalizedRenderOccluded() {
    return this.isDraped && 8 === this._renderOccluded ? 4 : this._renderOccluded;
  }
  get fadedExtensions() {
    return this._fadedExtensions;
  }
  set fadedExtensions(e23) {
    this._fadedExtensions = e23 ?? A5, this.recreateGeometry();
  }
  _updateMaterial() {
    const { materialParameters: e23 } = this;
    this.object3dResources.resources?.material.setParameters(e23), this.drapedResources.resources?.material.setParameters(e23);
  }
  get materialParameters() {
    return { width: this._width, color: this._color, stippleOffColor: this._stippleOffColor, stipplePattern: this._stipplePattern, stipplePreferContinuous: this._stipplePreferContinuous, innerWidth: this._innerWidth, innerColor: this._innerColor, falloff: this._falloff, hasPolygonOffset: this._polygonOffset, renderOccluded: this._normalizedRenderOccluded, isDecoration: this.isDecoration, writeDepth: this._writeDepthEnabled };
  }
  _createObject3DResources(e23) {
    const t26 = new J5(this.materialParameters, this.view.state.isGlobal), r27 = new Array();
    return this._createObject3DGeometry(t26, e23, r27), { material: t26, geometries: r27 };
  }
  _recreateObject3DGeometry(e23, t26) {
    e23.geometries.length = 0, this._createObject3DGeometry(e23.material, t26, e23.geometries);
  }
  _createObject3DGeometry(e23, t26, r27) {
    const i23 = this._createGeometry(e23);
    r27.push(i23), t26.addGeometry(i23), this._updateVerticesObject3D(t26);
  }
  _createDrapedResources() {
    const e23 = new J5(this.materialParameters, this.view.state.isGlobal);
    return { material: e23, geometries: [this._createDrapedGeometry(e23)] };
  }
  _recreateDrapedGeometry(e23) {
    e23.geometries = [this._createDrapedGeometry(e23.material)];
  }
  _createDrapedGeometry(e23) {
    const t26 = this._createGeometry(e23);
    return this._updateVerticesDraped(t26), new h10(t26);
  }
  _createGeometry(e23) {
    const t26 = 3 === this.extensionType, r27 = t26 ? [n3(), n3(), n3(), n3()] : [n3(), n3()];
    return Mt(e23, r27, null, t26 ? [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0] : null);
  }
  _updateGeometry() {
    if (this.isDraped) this.drapedResources.recreateGeometry();
    else {
      const e23 = this.object3dResources.object;
      e23 && this._updateVerticesObject3D(e23);
    }
  }
  _updateVerticesObject3D(e23) {
    const t26 = this._lineSegment;
    this._updateVertexAttributesObject3D(e23, t26), this._laserline.intersectsLine = t26;
  }
  _updateVerticesDraped(e23) {
    this._updateVertexAttributesDraped(e23, this._lineSegment);
  }
  get _lineSegment() {
    return 3 === this._extensionType ? this._updateLineSegmentFinite(M8) : this._updateLineSegmentInfinite(this._extensionType, M8);
  }
  _updateLineSegmentFinite(e23) {
    return b6(this._start, this._end, e23);
  }
  _updateLineSegmentInfinite(e23, t26) {
    const r27 = this.view.state.camera;
    switch (y5(this._ray, P5), e23) {
      case 0:
        P5.c0 = -Number.MAX_VALUE;
        break;
      case 1:
      case 2: {
        const e24 = this._ray.origin, t27 = this.view.elevationProvider.getElevation(e24[0], e24[1], e24[2], this.view.renderCoordsHelper.spatialReference, "ground") ?? 0, r28 = this.view.renderCoordsHelper.getAltitude(e24);
        this._isWorldDown && r28 < t27 && y3(P5.ray.direction, P5.ray.direction), 2 === this._extensionType && null != t27 && (P5.c1 = Math.abs(r28 - t27));
        break;
      }
    }
    if (!R4(r27.frustum, P5)) return this._updateLineSegmentFinite(t26);
    const s21 = p5(P5, v8), n23 = b8(P5, R8);
    return b6(s21, n23, t26);
  }
  _updateVertexAttributesObject3D(e23, t26) {
    const r27 = e23.geometries[0].getMutableAttribute("position")?.data;
    if (!r27) return;
    let i23 = 0;
    for (const s21 of this._lineVertices(t26)) r27[i23++] = s21[0], r27[i23++] = s21[1], r27[i23++] = s21[2];
    e23.geometryVertexAttributeUpdated(e23.geometries[0], "position");
  }
  _updateVertexAttributesDraped(e23, t26) {
    const r27 = e23.getMutableAttribute("position")?.data;
    if (!r27) return;
    let i23 = 0;
    for (const s21 of this._lineVertices(t26)) r27[i23++] = s21[0], r27[i23++] = s21[1], r27[i23++] = B;
    e23.invalidateBoundingInfo();
  }
  *_lineVertices(e23) {
    3 === this.extensionType ? (yield l8(e23, -this.fadedExtensions.start, v8), yield l8(e23, 0, v8), yield l8(e23, 1, v8), yield l8(e23, 1 + this.fadedExtensions.end, v8)) : (yield l8(e23, 0, v8), yield l8(e23, 1, v8));
  }
};
function x4(e23) {
  e23.geometries = [];
}
var P5 = a8();
var v8 = n3();
var R8 = n3();
var M8 = v3();
var V5 = 1 / 3;
var A5 = { start: V5, end: V5 };

// node_modules/@arcgis/core/views/3d/interactive/visualElements/ParallelLineVisualElement.js
var O4 = class extends t16 {
  constructor(e23) {
    super(e23), this._location = n3(), this._direction = r5(1, 0, 0), this._width = 1, this._offset = 1, this._length = 18, this._color = r9(1, 0, 1, 1), this._renderOccluded = 4, this.applyProperties(e23);
  }
  createObject3DResourceFactory(e23) {
    return { view: e23, createResources: (e24) => this._createObject3DResources(e24), destroyResources: V6, recreateGeometry: (e24, t26) => this._recreateObject3DGeometry(e24, t26), cameraChanged: () => this._updateGeometry(), forEachMaterial: (e24, t26) => t26(e24.material) };
  }
  createDrapedResourceFactory(e23) {
    return { view: e23, createResources: () => this._createDrapedResources(), destroyResources: M9, recreateGeometry: (e24) => this._recreateDrapedGeometry(e24), forEachMaterial: (e24, t26) => t26(e24.material) };
  }
  get location() {
    return this._location;
  }
  set location(e23) {
    H(this._location, e23) || (s6(this._location, e23), this._updateGeometry());
  }
  get direction() {
    return this._direction;
  }
  set direction(e23) {
    H(this._direction, e23) || (s6(this._direction, e23), this._updateGeometry());
  }
  setDirectionFromPoints(e23, t26) {
    A(this._direction, c3(this._direction, t26, e23)), this._updateGeometry();
  }
  get width() {
    return this._width;
  }
  set width(e23) {
    e23 !== this._width && (this._width = e23, this._updateMaterial());
  }
  get offset() {
    return this._offset;
  }
  set offset(e23) {
    e23 !== this._offset && (this._offset = e23, this._updateGeometry());
  }
  get length() {
    return this._length;
  }
  set length(e23) {
    e23 !== this._length && (this._length = e23, this._updateGeometry());
  }
  get color() {
    return this._color;
  }
  set color(e23) {
    E3(e23, this._color) || (a6(this._color, e23), this._updateMaterial());
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e23) {
    e23 !== this._renderOccluded && (this._renderOccluded = e23, this._updateMaterial());
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e23) {
    this._isDecoration = e23, this._updateMaterial();
  }
  _createObject3DResources(e23) {
    const t26 = new J5(this.materialParameters, this.view.state.isGlobal), r27 = new Array();
    return this._createObject3DGeometry(t26, e23, r27), { material: t26, geometries: r27 };
  }
  _recreateObject3DGeometry(e23, t26) {
    e23.geometries.length = 0, this._createObject3DGeometry(e23.material, t26, e23.geometries);
  }
  _createObject3DGeometry(e23, t26, r27) {
    const [i23, s21] = v9(e23);
    t26.addGeometry(i23), t26.addGeometry(s21), r27.push(i23), r27.push(s21), this._updateVerticesObject3D(t26);
  }
  _createDrapedResources() {
    const t26 = new J5(this.materialParameters, this.view.state.isGlobal), r27 = l3(() => this.view.state.contentPixelRatio, () => this.drapedResources.recreateGeometry());
    return { material: t26, geometries: this._createDrapedGeometry(t26), pixelRatioHandle: r27 };
  }
  _recreateDrapedGeometry(e23) {
    e23.geometries = this._createDrapedGeometry(e23.material);
  }
  _createDrapedGeometry(e23) {
    const t26 = v9(e23);
    return this._updateVerticesDraped(t26), t26.map((e24) => new h10(e24));
  }
  _updateMaterial() {
    const { materialParameters: e23 } = this;
    this.object3dResources.resources?.material.setParameters(e23), this.drapedResources.resources?.material.setParameters(e23);
  }
  get materialParameters() {
    return { width: this._width, color: this._color, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateGeometry() {
    if (this.isDraped) this.drapedResources.recreateGeometry();
    else {
      const e23 = this.object3dResources.object;
      e23 && this._updateVerticesObject3D(e23);
    }
  }
  _updateVerticesObject3D(e23) {
    const t26 = this.view.state.camera;
    t26.projectToScreen(this.location, U6), u6(P6, this.location, this.direction), t26.projectToScreen(P6, E6), v(E6, e3(E6, E6, U6)), this._updateVertexAttributesObject3D(t26, e23, 0, U6, E6, 1), this._updateVertexAttributesObject3D(t26, e23, 1, U6, E6, -1);
  }
  _updateVertexAttributesObject3D(e23, t26, i23, s21, o20, a28) {
    const c25 = t26.geometries[i23], n23 = c25.getMutableAttribute("position")?.data;
    if (!n23) return;
    const { start: d21, end: h24 } = x5(o20, s21, a28, this.offset, this.width, this.length);
    e23.unprojectFromScreen(a4(d21), P6), n23[0] = P6[0], n23[1] = P6[1], n23[2] = P6[2], e23.unprojectFromScreen(a4(h24), P6), n23[3] = P6[0], n23[4] = P6[1], n23[5] = P6[2], t26.geometryVertexAttributeUpdated(c25, "position");
  }
  _updateVerticesDraped(e23) {
    const { view: { overlayManager: t26, state: { contentPixelRatio: r27 } } } = this, { location: i23, width: s21, length: o20, offset: a28 } = this, c25 = k8;
    c25.spatialReference = t26.spatialReference, c25.x = i23[0], c25.y = i23[1];
    const n23 = this.view.overlayPixelSizeInMapUnits(c25) * r27, d21 = s21 * n23, h24 = o20 * n23, l25 = a28 * n23;
    this._updateVertexAttributesDraped(e23[0], d21, h24, l25, -1), this._updateVertexAttributesDraped(e23[1], d21, h24, l25, 1);
  }
  _updateVertexAttributesDraped(e23, t26, r27, i23, s21) {
    const o20 = e23.getMutableAttribute("position")?.data;
    if (!o20) return;
    const { location: a28, direction: c25 } = this, { start: n23, end: d21 } = x5(c25, a28, s21, i23, t26, r27);
    o20[0] = n23[0], o20[1] = n23[1], o20[2] = B, o20[3] = d21[0], o20[4] = d21[1], o20[5] = B, e23.invalidateBoundingInfo();
  }
};
function v9(e23) {
  return [Mt(e23, [n3(), n3()]), Mt(e23, [n3(), n3()])];
}
function x5(e23, t26, r27, i23, s21, n23) {
  const d21 = l7(A6, o4(A6, e23[1] * r27, e23[0] * -r27), i23 + s21 / 2), h24 = u3(F6, u3(F6, u3(F6, t26, l7(F6, e23, n23 / 2)), d21), d21);
  return { start: h24, end: u3(S5, h24, l7(S5, e23, -n23)) };
}
function V6(e23) {
  e23.geometries.length = 0;
}
function M9(e23) {
  e23.pixelRatioHandle.remove(), e23.geometries = [];
}
var P6 = n3();
var A6 = n7();
var F6 = n7();
var S5 = n7();
var U6 = f4();
var E6 = f4();
var k8 = t9(0, 0, void 0, null);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js
var o14 = class extends t15 {
  constructor(e23) {
    super(e23), this._resources = null, this._transform = e5();
  }
  get object() {
    return null != this._resources ? this._resources.object : null;
  }
  get transform() {
    return this._transform;
  }
  set transform(s21) {
    n4(this._transform, s21), null != this._resources && (this._resources.object.transformation = this._transform);
  }
  recreate() {
    this.attached && this.createResources();
  }
  recreateGeometry() {
    if (null == this._resources) return;
    const e23 = this._resources.object;
    e23.removeAllGeometries(), this.createGeometries(e23), e23.visible = this.visible;
  }
  createResources() {
    this.destroyResources();
    const e23 = this.view.stage;
    if (!e23) return;
    const s21 = new d10(e23, { pickable: false, updatePolicy: 1 }), r27 = new W2({ castShadow: false });
    r27.transformation = this._transform, this.createExternalResources(), this.createGeometries(r27), s21.add(r27), r27.visible = this.visible, this._resources = { layer: s21, object: r27 };
  }
  destroyResources() {
    const e23 = this.view.stage;
    null != this._resources && e23 && (this._resources.layer.destroy(), this._resources.object.dispose(), this.destroyExternalResources(), this._resources = null);
  }
  updateVisibility(e23) {
    null != this._resources && (this._resources.object.visible = e23);
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/PointVisualElement.js
var x6 = class extends o14 {
  constructor(e23) {
    super(e23), this._material = null, this._texture = null, this._geometry = null, this._size = 3, this._color = r9(1, 0, 1, 1), this._pixelSnappingEnabled = true, this._primitive = "square", this._outlineSize = 1, this._outlineColor = r9(1, 1, 1, 1), this._elevationInfo = null, this.applyProperties(e23);
  }
  get geometry() {
    return this._geometry;
  }
  set geometry(e23) {
    this._geometry = e23, this.recreateGeometry();
  }
  get size() {
    return this._size;
  }
  set size(e23) {
    if (e23 !== this._size) {
      const t26 = this._preferredTextureSize;
      this._size = e23, t26 < this._preferredTextureSize ? this.recreate() : this._updateSizeAttribute();
    }
  }
  get color() {
    return this._color;
  }
  set color(e23) {
    E3(e23, this._color) || (a6(this._color, e23), this._updateMaterial());
  }
  get pixelSnappingEnabled() {
    return this._pixelSnappingEnabled;
  }
  set pixelSnappingEnabled(e23) {
    this._pixelSnappingEnabled !== e23 && (this._pixelSnappingEnabled = e23, this._updateMaterial());
  }
  get primitive() {
    return this._primitive;
  }
  set primitive(e23) {
    this._primitive !== e23 && (this._primitive = e23, this.recreate());
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e23) {
    e23 !== this._outlineSize && (this._outlineSize = e23, this._updateMaterial());
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e23) {
    E3(e23, this._outlineColor) || (a6(this._outlineColor, e23), this._updateMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e23) {
    this._elevationInfo = e23, this.recreateGeometry();
  }
  _updateMaterial() {
    this._material?.setParameters(this._materialParameters);
  }
  _updateSizeAttribute() {
    const e23 = this.object;
    if (null == e23) return;
    const t26 = e23.geometries[0];
    if (null == t26) return;
    const i23 = t26.getMutableAttribute("size").data, r27 = this._geometrySize;
    i23[0] = r27, i23[1] = r27, e23.geometryVertexAttributeUpdated(e23.geometries[0], "size");
  }
  get _materialParameters() {
    return { color: this._color, textureIsSignedDistanceField: true, sampleSignedDistanceFieldTexelCenter: s8(this._primitive), distanceFieldBoundingBox: u9, occlusionTest: false, outlineColor: this._outlineColor, outlineSize: this._outlineSize, textureId: this._texture?.id, polygonOffset: false, shaderPolygonOffset: 0, drawAsLabel: true, depthEnabled: false, pixelSnappingEnabled: this.pixelSnappingEnabled, isDecoration: this.isDecoration };
  }
  get _geometrySize() {
    return this._size / o9;
  }
  createExternalResources() {
    this._texture = c5(this._primitive, this._preferredTextureSize), this._material = new ie(this._materialParameters, 1 === this.view.state.viewingMode);
    const e23 = this.view.stage;
    this._texture.load(e23.renderView.renderingContext), e23.addTexture(this._texture);
  }
  destroyExternalResources() {
    if (this._texture) {
      this.view.stage.removeTexture(this._texture), this._texture.dispose(), this._texture = null;
    }
    this._material = null;
  }
  createGeometries(e23) {
    const t26 = this._createRenderGeometry();
    null != t26 && e23.addGeometry(t26);
  }
  forEachMaterial(e23) {
    e23(this._material);
  }
  get _preferredTextureSize() {
    return r4(2 * this._geometrySize, 16, 128);
  }
  calculateMapBounds(e23) {
    const t26 = this.object?.geometries[0];
    if (!t26) return false;
    const i23 = t26.attributes.get("position").data;
    return n9(i23, this.view.renderCoordsHelper.spatialReference, v10, this.view.spatialReference), s4(e23, v10), true;
  }
  _createRenderGeometry() {
    const { geometry: e23, _material: i23 } = this;
    if (null == e23 || null == i23) return null;
    const { renderCoordsHelper: r27, elevationProvider: s21 } = this.view, o20 = u11(e23, s21, o13.fromElevationInfo(this.elevationInfo), r27), a28 = o6(c4.get(), e23.x, e23.y, o20), u22 = c4.get();
    n9(a28, e23.spatialReference, u22, r27.spatialReference);
    const m15 = this._geometrySize;
    return at(i23, { position: u22, size: [m15, m15], centerOffsetAndDistance: [0, 0, 0, 1] });
  }
};
var v10 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js
var w6 = class extends t16 {
  constructor(e23) {
    super(e23), this._maxSize = 0, this._position = n3(), this._up = n3(), this._right = n3(), this._renderOccluded = 4, this._color = r9(1, 0, 0, 1), this._outlineColor = r9(0, 0, 0, 1), this._outlineSize = 0, this._size = 32, this._outlineRenderOccluded = 16, this.applyProperties(e23);
  }
  createObject3DResourceFactory(e23) {
    return { view: e23, createResources: (e24) => this._createObject3DResources(e24), destroyResources: () => {
    }, cameraChanged: () => this._updateTransformObject3D(), forEachMaterial: (e24, t26) => {
      t26(e24.outlineMaterial), t26(e24.quadMaterial);
    } };
  }
  createDrapedResourceFactory(e23) {
    return { view: e23, createResources: () => this._createDrapedResources(), destroyResources: z7, forEachMaterial: (e24, t26) => {
      t26(e24.outlineMaterial), t26(e24.quadMaterial);
    } };
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e23) {
    e23 !== this._renderOccluded && (this._renderOccluded = e23, this._updateQuadMaterial());
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e23) {
    this._isDecoration = e23, this._updateOutlineMaterial(), this._updateQuadMaterial();
  }
  get color() {
    return this._color;
  }
  set color(e23) {
    a6(this._color, e23), this._updateQuadMaterial();
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e23) {
    a6(this._outlineColor, e23), this._updateOutlineMaterial();
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e23) {
    const t26 = 0 === this._outlineSize != (0 === e23);
    this._outlineSize = e23, t26 ? this.recreateGeometry() : this._updateOutlineMaterial();
  }
  get size() {
    return this._size;
  }
  set size(e23) {
    e23 !== this._size && (this._size = e23, this._updateTransform());
  }
  get outlineRenderOccluded() {
    return this._outlineRenderOccluded;
  }
  set outlineRenderOccluded(e23) {
    this._outlineRenderOccluded = e23, this._updateOutlineMaterial();
  }
  set geometry({ previous: e23, center: t26, next: r27 }) {
    this._maxSize = Math.min(p3(t26, e23), p3(t26, r27)) / 3, A(this._up, c3(this._up, e23, t26)), A(this._right, c3(this._right, r27, t26)), s6(this._position, t26), this.recreateGeometry();
  }
  _createObject3DResources(e23) {
    const t26 = new m8(this._quadMaterialParameters), r27 = 0 === this._outlineSize ? void 0 : new J5(this._outlineMaterialParameters, this.view.state.isGlobal);
    return this._createObject3DGeometries(e23, t26, r27), { quadMaterial: t26, outlineMaterial: r27 };
  }
  _createObject3DGeometries(e23, t26, r27) {
    if (H(this._up, a5) && H(this._right, a5)) return;
    const i23 = this._createGeometries(t26, r27);
    for (const s21 of i23) e23.addGeometry(s21);
    this._updateTransformObject3D(e23);
  }
  _createDrapedResources() {
    const t26 = new m8(this._quadMaterialParameters), r27 = 0 === this._outlineSize ? void 0 : new J5(this._outlineMaterialParameters, this.view.state.isGlobal), i23 = this._createGeometries(t26, r27).map((e23) => new h10(e23));
    this._setTransformDraped(i23);
    return { quadMaterial: t26, outlineMaterial: r27, geometries: i23, pixelRatioHandle: l3(() => this.view.state.contentPixelRatio, () => this.drapedResources.recreateGeometry()) };
  }
  _createGeometries(e23, t26) {
    const { up: r27, right: i23, corner: s21 } = this._getVertices(), a28 = v11(r27, i23, s21, e23);
    if (!t26) return [a28];
    return [a28, Mt(t26, [r27, s21, i23])];
  }
  _getVertices() {
    let e23 = this._up, t26 = this._right;
    const r27 = u6(c4.get(), e23, t26);
    return this.isDraped && (e23 = s6(c4.get(), e23), t26 = s6(c4.get(), t26), e23[2] = 0, t26[2] = 0, r27[2] = 0), { up: e23, right: t26, corner: r27 };
  }
  _updateTransform() {
    this.isDraped ? this.drapedResources.recreateGeometry() : this._updateTransformObject3D();
  }
  _updateTransformObject3D(e23 = this.object3dResources.object) {
    if (!e23) return;
    const i23 = this.view.state.camera, s21 = this._size * i23.computeScreenPixelSizeAt(this._position), a28 = Math.min(this._maxSize, s21);
    q(y9, this._position), f5(y9, y9, [a28, a28, a28]), e23.transformation = y9;
  }
  _setTransformDraped(e23) {
    if (0 === e23.length) return;
    const { view: { overlayManager: i23, state: { contentPixelRatio: s21 } } } = this, { _position: a28, _size: o20 } = this, c25 = s6(c4.get(), a28);
    c25[2] = B;
    const l25 = P7;
    l25.spatialReference = i23.spatialReference, l25.x = c25[0], l25.y = c25[1];
    const u22 = o20 * (this.view.overlayPixelSizeInMapUnits(l25) * s21), h24 = Math.min(this._maxSize, u22);
    q(y9, c25), f5(y9, y9, [h24, h24, 1]);
    for (const t26 of e23) t26.transformation = y9;
  }
  get _quadMaterialParameters() {
    return { color: this._color, forceTransparentMode: true, writeDepth: false, polygonOffset: true, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateQuadMaterial() {
    this.object3dResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters), this.drapedResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters);
  }
  get _outlineMaterialParameters() {
    return { color: this._outlineColor, width: this._outlineSize, renderOccluded: this._outlineRenderOccluded, isDecoration: this.isDecoration };
  }
  _updateOutlineMaterial() {
    this.object3dResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters), this.drapedResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters);
  }
};
function z7(e23) {
  e23.pixelRatioHandle.remove(), e23.geometries = [];
}
function v11(e23, t26, r27, i23) {
  return new m2(i23, [["position", new t8([0, 0, 0, ...t26, ...e23, ...r27], [0, 1, 2, 1, 2, 3], 3, true)]]);
}
var y9 = e5();
var P7 = t9(0, 0, void 0, null);

// node_modules/@arcgis/core/views/3d/interactive/SnappingVisualizer3D.js
var w7 = class extends r14 {
  sortUniqueHints(e23) {
    return e23.sort((e24, i23) => (i23 instanceof s13 ? i23.length : 0) - (e24 instanceof s13 ? e24.length : 0));
  }
  visualizeIntersectionPoint(e23, i23) {
    const { spatialReference: t26, view: o20 } = i23, r27 = j8(i23);
    return c(new x6({ view: o20, primitive: "circle", geometry: y6(e23.intersectionPoint, t26), elevationInfo: e23.isDraped ? k5 : U3, size: 20, outlineSize: 2, color: r27.intersectionPointColor, outlineColor: r27.intersectionPointOutlineColor, pixelSnappingEnabled: false, isDecoration: true, attached: true }));
  }
  visualizePoint(e23, i23) {
    const { view: t26, spatialReference: o20 } = i23, r27 = j8(i23), l25 = E7(e23.point, e23.domain, i23);
    return c(new x6({ view: t26, primitive: "circle", geometry: y6(l25, o20), elevationInfo: x7(e23), size: 20, outlineSize: 2, color: r27.pointColor, outlineColor: r27.pointOutlineColor, pixelSnappingEnabled: false, isDecoration: true, attached: true }));
  }
  visualizeLine(e23, i23) {
    const { view: t26, spatialReference: o20 } = i23, r27 = j8(i23), l25 = E7(e23.lineStart, e23.domain, i23), a28 = E7(e23.lineEnd, e23.domain, i23);
    return c(D4(e23.type, l25, a28, o20, x7(e23), t26, r27, e23.isDraped, e23.fadeLeft, e23.fadeRight));
  }
  visualizeParallelSign(e23, i23) {
    const { view: o20, spatialReference: r27 } = i23, l25 = j8(i23), { isDraped: a28 } = e23, s21 = x7(e23), c25 = E7(e23.lineStart, e23.domain, i23), d21 = E7(e23.lineEnd, e23.domain, i23), u22 = S6(c25, r27, s21, o20, a28), m15 = S6(d21, r27, s21, o20, a28), f20 = I(m15, u22, m15, 0.5), g15 = new O4({ view: o20, attached: false, offset: p7.parallelLineHintOffset, length: p7.parallelLineHintLength, width: p7.parallelLineHintWidth, color: l25.parallelSignColor, location: f20, renderOccluded: a28 ? 4 : 16, isDraped: a28, renderGroup: 3, isDecoration: true });
    return g15.setDirectionFromPoints(u22, f20), g15.attached = true, c(g15);
  }
  visualizeRightAngleQuad(e23, i23) {
    const { view: t26, spatialReference: o20 } = i23, r27 = j8(i23), l25 = x7(e23), { isDraped: a28 } = e23, s21 = E7(e23.previousVertex, e23.domain, i23), c25 = E7(e23.centerVertex, e23.domain, i23), p18 = E7(e23.nextVertex, e23.domain, i23), d21 = S6(s21, o20, l25, t26, a28), m15 = S6(c25, o20, l25, t26, a28), f20 = S6(p18, o20, l25, t26, a28);
    return c(new w6({ view: t26, attached: true, color: a28 ? r27.rightAngleColorDraped : r27.rightAngleColor, renderOccluded: a28 ? 4 : 2, outlineRenderOccluded: a28 ? 4 : 16, outlineColor: r27.rightAngleOutlineColor, outlineSize: p7.rightAngleHintOutlineSize, size: p7.rightAngleHintSize, isDraped: a28, geometry: { previous: d21, center: m15, next: f20 }, renderGroup: 3, isDecoration: true }));
  }
};
function j8(n23) {
  const { effectiveTheme: t26 } = n23.view, o20 = u7.toUnitRGBA(t26.accentColor), r27 = [0, 0, 0, 0];
  return { intersectionPointColor: r27, intersectionPointOutlineColor: o20, pointColor: r27, pointOutlineColor: o20, lineColor: o20, lineOutlineColor: void 0, parallelSignColor: o20, rightAngleColor: o20, rightAngleColorDraped: u7.toUnitRGBA(D(t26.accentColor, 0.5)), rightAngleOutlineColor: o20 };
}
function E7(e23, i23, { selfSnappingZ: n23, view: t26, spatialReference: o20 }) {
  return 2 & i23 && v6(e23) && null != n23 ? I3(e23, n23, t26, o20) : e23;
}
function x7(e23) {
  return e23.isDraped ? k5 : U3;
}
function D4(e23, i23, n23, t26, o20, r27, l25, a28 = false, s21 = true, p18 = true) {
  const d21 = S6(i23, t26, o20, r27, a28), u22 = S6(n23, t26, o20, r27, a28), m15 = new G3({ view: r27, extensionType: 3, start: d21, end: u22, isDraped: a28, color: l25.lineColor, renderOccluded: a28 ? 4 : 16, renderGroup: 3, isDecoration: true });
  switch (e23) {
    case 0:
      m15.width = p7.lineHintWidthTarget, m15.fadedExtensions = { start: 0, end: p7.lineHintFadedExtensions };
      break;
    case 2:
      m15.width = p7.lineHintWidthReference, m15.fadedExtensions = { start: 0, end: 0 };
      break;
    case 1:
      m15.width = p7.lineHintWidthReference, m15.fadedExtensions = { start: s21 ? p7.lineHintFadedExtensions : 0, end: p18 ? p7.lineHintFadedExtensions : 0 };
  }
  return m15.attached = true, m15;
}
function S6(e23, i23, n23, t26, l25) {
  const a28 = n3();
  if (l25) {
    const n24 = t26.overlayManager.spatialReference;
    n9(e23, i23, a28, n24);
  } else i8(e23, i23, n23, t26, a28);
  return a28;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/meshFastUpdateUtils.js
function r20(r27) {
  const e23 = r27.graphic;
  return e23 ? [l3(() => "visible" in r27 ? r27.visible : r27.displaying, (i23) => {
    i23 && e23.notifyMeshTransformChanged({ action: 0 });
  }, { ...w2 }), e(() => e23.notifyMeshTransformChanged({ action: 1 }))] : [];
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/settings.js
var a19 = 0.3;
function p11(o20, t26) {
  t26 && Object.assign(o20, t26);
}
var d12 = class {
  constructor(o20) {
    this.height = 90, this.coneHeight = 40, this.coneWidth = 23, this.width = 3, this.renderOccluded = 16, this.color = o20.accent;
  }
};
var u13 = class {
  constructor({ colors: o20, ...t26 }) {
    this.size = 11, this.outlineSize = 1, this.collisionPadding = 9, this.color = o20.accent, this.outlineColor = o20.outline, this.renderOccluded = 16, this.hoverOutlineColor = o20.selectedOutline, p11(this, t26);
  }
  applyColor(o20) {
    this._apply(this.color, o20);
  }
  applyOutline(o20) {
    this._apply(this.outlineColor, o20);
  }
  applyHoverOutline(o20) {
    this._apply(this.hoverOutlineColor, o20);
  }
  _apply(o20, t26) {
    t26.setParameters({ color: H2(o20), renderOccluded: this.renderOccluded });
  }
};
var g5 = class {
  constructor({ colors: o20, ...t26 }) {
    this.size = 40, this.height = 0.2, this.offset = 0.25, this.collisionPadding = 2, this.renderOccluded = 2, this.minSquaredEdgeLength = 900, this.color = D(o20.accent, 0.5), this.hoverColor = o20.accent, p11(this, t26);
  }
  applyColor(o20) {
    this._apply(this.color, o20);
  }
  applyHover(o20) {
    this._apply(this.hoverColor, o20);
  }
  _apply(o20, t26) {
    t26.setParameters({ color: H2(o20), renderOccluded: this.renderOccluded });
  }
};
var f15 = class {
  constructor(o20) {
    this.vertex = new u13({ colors: o20, color: o20.accent, outlineColor: o20.outline }), this.edge = new u13({ colors: o20, color: F2(D(o20.accent, 2 / 3), 0.5), outlineColor: D(o20.outline, 0.5), size: 8, collisionPadding: 8 }), this.selected = new u13({ colors: o20, color: o20.selected, outlineColor: o20.outline }), this.edgeOffset = new g5({ colors: o20 });
  }
};
var C2 = class {
  constructor({ colors: o20, ...t26 }) {
    this.width = 1.5, this.stipplePattern = h11(3.3), this.falloff = 0, this.innerWidth = 1.5, this.renderOccluded = 4, this.color = o20.selected, this.stippleOffColor = o20.outline, this.innerColor = o20.selected, p11(this, t26);
  }
  apply(o20) {
    o20.color = H2(this.color), o20.width = this.width, o20.stipplePattern = this.stipplePattern, o20.stippleOffColor = H2(this.stippleOffColor), o20.falloff = this.falloff, o20.innerWidth = this.innerWidth, o20.innerColor = H2(this.innerColor), o20.renderOccluded = this.renderOccluded;
  }
};
var w8 = class {
  constructor({ colors: o20, ...t26 }) {
    this.size = 4, this.outlineSize = 1, this.shape = "square", this.color = o20.selected, this.outlineColor = o20.outline, p11(this, t26);
  }
  apply(o20) {
    o20.color = H2(this.color), o20.size = this.size, o20.outlineSize = this.outlineSize, o20.outlineColor = H2(this.outlineColor), o20.primitive = this.shape;
  }
};
var m10 = class {
  constructor({ colors: o20, ...t26 }) {
    this.innerWidth = 1, this.glowWidth = 8, this.glowFalloff = 8, this.globalAlpha = a19, this.globalAlphaContrastBoost = 1.5, this.radius = 3, this.innerColor = o20.selected, this.glowColor = o20.accent, this.heightFillColor = o20.accent, p11(this, t26);
  }
  apply(o20, e23 = 1) {
    const l25 = { glowColor: u7.toUnitRGB(this.glowColor), glowFalloff: this.glowFalloff, glowWidth: this.glowWidth, innerColor: u7.toUnitRGB(this.innerColor), innerWidth: this.innerWidth, globalAlpha: this.globalAlpha * e23 * this.glowColor.a, globalAlphaContrastBoost: this.globalAlphaContrastBoost, intersectsLineRadius: this.radius };
    "style" in o20 ? o20.style = l25 : o20.laserlineStyle = l25;
  }
};
var y10 = class {
  constructor(o20) {
    this.outline = new C2({ colors: o20, color: o20.stippleOff, renderOccluded: 8, stippleOffColor: o20.stippleOn, innerWidth: 0 }), this.staged = new C2({ colors: o20, color: o20.stippleOn, renderOccluded: 8, innerColor: o20.stagedSolid, stippleOffColor: o20.stippleOff }), this.shadowStyle = new m10({ colors: o20, globalAlpha: a19, glowColor: o20.accent, glowFalloff: 8, glowWidth: 8, innerColor: o20.selected, innerWidth: 1 });
  }
};
var O5 = class {
  constructor(o20) {
    this.outline = new w8({ colors: o20, color: o20.selected, outlineColor: o20.outline, outlineSize: 1, shape: "circle", size: 4 }), this.shadowStyle = new m10({ colors: o20, globalAlpha: a19, glowColor: o20.accent, glowFalloff: 1.5, glowWidth: 6, innerColor: o20.selected, innerWidth: 1, radius: 2 });
  }
};
var A7 = class extends C2 {
  constructor({ colors: o20, ...t26 }) {
    super({ colors: o20 }), this.extensionType = 2, p11(this, t26);
  }
};
var W3 = class {
  constructor(o20) {
    this.laserlineAlphaMultiplier = 1.5, this.heightPlaneAngleCutoff = 20, this.lineObjects = new y10(o20), this.pointObjects = new O5(o20), this.heightPlane = new m10({ colors: o20, globalAlpha: a19, glowColor: o20.accent, glowFalloff: 8, glowWidth: 8, innerColor: o20.selected, innerWidth: 1 }), this.heightBox = new m10({ colors: o20, globalAlpha: a19, glowColor: o20.accent, glowFalloff: 8, glowWidth: 8, innerColor: o20.selected, innerWidth: 0, heightFillColor: o20.accent }), this.zVerticalLine = new A7({ colors: o20, color: D(o20.accent, 5 * a19 / 3), falloff: 2, innerColor: D(o20.selected, 0), renderOccluded: 4, stipplePattern: null, width: 5, extensionType: 2 });
  }
};
var b14 = class extends b {
  constructor(o20) {
    super(o20);
  }
  get colors() {
    const o20 = this.getTheme().accentColor, e23 = o20.a;
    return { accent: o20, contrast: I2(o20), selected: u7.fromArray([255, 255, 255, e23]), selectedOutline: u7.fromArray([255, 255, 255, e23]), staged: u7.fromArray([12, 207, 255, e23]), stagedSolid: u7.fromArray([12, 207, 255, 1]), outline: u7.fromArray([0, 0, 0, 0.5 * e23]), stippleOn: u7.fromArray([255, 255, 255, 1]), stippleOff: u7.fromArray([0, 0, 0, 0.5]) };
  }
  get visualElements() {
    return new W3(this.colors);
  }
  get manipulators() {
    return new f15(this.colors);
  }
  get zManipulator() {
    return new d12(this.colors);
  }
};
__decorate([m()], b14.prototype, "colors", null), __decorate([m()], b14.prototype, "visualElements", null), __decorate([m()], b14.prototype, "manipulators", null), __decorate([m()], b14.prototype, "zManipulator", null), __decorate([m()], b14.prototype, "getTheme", void 0), b14 = __decorate([a2("esri.views.3d.interactive.editingTools.settings")], b14);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/OutlineVisualElement.js
var R9 = class extends t16 {
  constructor(t26) {
    super(t26), this._attachmentOrigin = t9(0, 0, 0, null), this._attachmentOriginDirty = true, this.events = new i2(), this._geometry = null, this._width = 1, this._color = r9(1, 0, 1, 1), this._innerWidth = 0, this._innerColor = r9(1, 1, 1, 1), this._stipplePattern = null, this._stippleOffColor = null, this._falloff = 0, this._elevationInfo = null, this._laserlineStyle = null, this._laserlineEnabled = false, this._renderOccluded = 8, this._attachmentOrigin.spatialReference = t26.view.spatialReference, this._laserline = new c19({ view: t26.view, isDecoration: t26.isDecoration }), this.applyProperties(t26), this.attached = t26.attached ?? true;
  }
  destroy() {
    this._laserline.destroy(), super.destroy();
  }
  createObject3DResourceFactory(e23) {
    return { view: e23, createResources: (e24) => this._createObject3DResources(e24), destroyResources: b15, recreateGeometry: (e24, t26) => {
      e24.geometries.length = 0, this._recreateGeometry(t26, e24.material, e24.geometries);
    }, forEachMaterial: (e24, t26) => t26(e24.material) };
  }
  createDrapedResourceFactory(e23) {
    return { view: e23, createResources: () => this._createDrapedResources(), destroyResources: b15, recreateGeometry: (e24) => {
      e24.geometries = this._createRenderGeometriesDraped(e24.material), this._attachmentOriginChanged();
    }, forEachMaterial: (e24, t26) => t26(e24.material) };
  }
  get _laserlineAttached() {
    return this.attached && this.visible && null != this._laserlineStyle && !this.isDraped && this.laserlineEnabled;
  }
  onAttachedChange(e23) {
    this._laserline.attached = this._laserlineAttached, e23 && this._attachmentOriginChanged();
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e23) {
    this._isDecoration = e23, this._updateMaterial();
  }
  get geometry() {
    return this._geometry;
  }
  set geometry(e23) {
    const t26 = this._isClosed;
    this._geometry = e23, this.recreateGeometry(), t26 !== this._isClosed && this._updateMaterial();
  }
  get width() {
    return this._width;
  }
  set width(e23) {
    e23 !== this._width && (this._width = e23, this._updateMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e23) {
    E3(e23, this._color) || (a6(this._color, e23), this._updateMaterial());
  }
  get innerWidth() {
    return this._innerWidth;
  }
  set innerWidth(e23) {
    e23 !== this._innerWidth && (this._innerWidth = e23, this._updateMaterial());
  }
  get innerColor() {
    return this._innerColor;
  }
  set innerColor(e23) {
    E3(e23, this._innerColor) || (a6(this._innerColor, e23), this._updateMaterial());
  }
  get stipplePattern() {
    return this._stipplePattern;
  }
  set stipplePattern(e23) {
    const t26 = null != e23 != (null != this._stipplePattern);
    this._stipplePattern = e23, t26 ? this.recreate() : this._updateMaterial();
  }
  get stippleOffColor() {
    return this._stippleOffColor;
  }
  set stippleOffColor(e23) {
    e23 && this._stippleOffColor && E3(e23, this._stippleOffColor) || (this._stippleOffColor = e23 ? t4(e23) : null, this._updateMaterial());
  }
  get falloff() {
    return this._falloff;
  }
  set falloff(e23) {
    e23 !== this._falloff && (this._falloff = e23, this._updateMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e23) {
    this._elevationInfo = e23, this.recreateGeometry();
  }
  get laserlineStyle() {
    return this._laserlineStyle;
  }
  set laserlineStyle(e23) {
    this._laserlineStyle = e23, this._laserline.attached = this._laserlineAttached, null != e23 && (this._laserline.style = e23);
  }
  get laserlineEnabled() {
    return this._laserlineEnabled;
  }
  set laserlineEnabled(e23) {
    this._laserlineEnabled !== e23 && (this._laserlineEnabled = e23, this._laserline.attached = this._laserlineAttached);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e23) {
    e23 !== this._renderOccluded && (this._renderOccluded = e23, this._updateMaterial());
  }
  get attachmentOrigin() {
    if (!this._attachmentOriginDirty) return this._attachmentOrigin;
    const e23 = this.object3dResources.resources?.geometries;
    if (!e23 || 0 === e23.length) return null;
    o6(D5, 0, 0, 0);
    let s21 = 0;
    for (const t26 of e23) t26.computeAttachmentOrigin(j9) && (u6(D5, D5, j9), s21++);
    return 0 === s21 ? null : (g2(D5, D5, 1 / s21), this.view.renderCoordsHelper.fromRenderCoords(D5, this._attachmentOrigin), this._attachmentOriginDirty = false, this._attachmentOrigin);
  }
  _updateMaterial() {
    this.object3dResources.resources?.material.setParameters(this._materialParameters), this.drapedResources.resources?.material.setParameters(this._materialParameters);
  }
  get _isClosed() {
    return null != this.geometry && "polygon" === this.geometry.type;
  }
  get _materialParameters() {
    return { width: this._width, color: this._color, stippleOffColor: this._stippleOffColor, stipplePattern: this._stipplePattern, stipplePreferContinuous: false, isClosed: this._isClosed, falloff: this._falloff, innerColor: this._innerColor, innerWidth: this._innerWidth, join: "round", hasPolygonOffset: true, renderOccluded: this._normalizedRenderOccluded, isDecoration: this.isDecoration };
  }
  get _normalizedRenderOccluded() {
    return this.isDraped && 8 === this._renderOccluded ? 4 : this._renderOccluded;
  }
  _recreateGeometry(e23, t26, r27) {
    this._createRenderGeometries(t26, r27);
    for (const i23 of r27) e23.addGeometry(i23);
    this._attachmentOriginChanged();
  }
  _attachmentOriginChanged() {
    this._attachmentOriginDirty = true, this.events.emit("attachment-origin-changed");
  }
  _createObject3DResources(e23) {
    const t26 = new J5(this._materialParameters, this.view.state.isGlobal), r27 = new Array();
    return this._recreateGeometry(e23, t26, r27), { material: t26, geometries: r27 };
  }
  _createDrapedResources() {
    const e23 = new J5(this._materialParameters, this.view.state.isGlobal);
    return { material: e23, geometries: this._createRenderGeometriesDraped(e23) };
  }
  _createRenderGeometriesDraped(e23) {
    const { geometry: t26, view: r27 } = this, i23 = r27.basemapTerrain.spatialReference;
    if (null == t26 || null == i23) return [];
    return p9(t26, i23).lines.map(({ position: t27 }) => {
      const s21 = { overlayInfo: { spatialReference: i23, renderCoordsHelper: r27.renderCoordsHelper }, attributeData: { position: t27 }, removeDuplicateStartEnd: this._isClosed };
      return new h10(f8(e23, s21));
    });
  }
  calculateMapBounds(e23) {
    if (null == this.object3dResources.resources) return false;
    const t26 = this.view.renderCoordsHelper;
    for (const r27 of this.object3dResources.resources.geometries) {
      const i23 = r27.attributes.get("position"), s21 = e6(i23.data.length);
      o5(i23.data, t26.spatialReference, 0, s21, this.view.spatialReference, 0), s4(e23, s21);
    }
    return true;
  }
  _createRenderGeometries(e23, t26) {
    const r27 = this.geometry;
    if (null == r27) return;
    const i23 = s14(r27, this.view.elevationProvider, this.view.renderCoordsHelper, o13.fromElevationInfo(this.elevationInfo ?? new c8({ mode: s12(r27, null) }))), s21 = new Array();
    for (const { position: a28, mapPositions: o20 } of i23.lines) {
      const r28 = { mapPositions: o20, attributeData: { position: a28 }, removeDuplicateStartEnd: this._isClosed };
      t26.push(f8(e23, r28)), s21.push(a28);
    }
    this._laserline.pathVerticalPlane = s21;
  }
};
function b15(e23) {
  e23.geometries = [];
}
var j9 = n3();
var D5 = n3();

// node_modules/@arcgis/core/views/3d/support/renderInfoUtils/point.js
function o15(o20, n23, r27, s21, i23) {
  const l25 = e6(3 * o20.length), p18 = e6(l25.length);
  o20.forEach((t26, e23) => {
    l25[3 * e23] = t26[0], l25[3 * e23 + 1] = t26[1], l25[3 * e23 + 2] = t26.length > 2 ? t26[2] : 0;
  });
  const c25 = l13(l25, n23, 0, p18, 0, l25, 0, l25.length / 3, r27, s21, i23), m15 = null != c25;
  return { numVertices: o20.length, position: l25, mapPositions: p18, projectionSuccess: m15, sampledElevation: c25 };
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js
var p12 = class extends m4 {
  constructor(e23, r27) {
    super(e23, r27, new t12(b13, () => import("./ShadedColorMaterial.glsl-XWV7DY66.js")), f16(r27).locations);
  }
  initializePipeline(e23) {
    const { oitPass: o20, output: t26, transparent: l25, cullFace: p18, shadingEnabled: f20 } = e23, m15 = 0 === o20, h24 = 2 === o20;
    return T({ blending: o10(t26) && l25 ? a11(o20) : null, culling: _6(p18), depthTest: { func: h24 ? 513 : f20 ? 515 : 513 }, depthWrite: i6(e23), drawBuffers: d5(o20, t26), colorWrite: d4, polygonOffset: m15 || h24 ? null : b9 });
  }
};
function f16(r27) {
  const o20 = Q().vec3f("position").vec3f("normal");
  return r27.screenSizeEnabled && o20.vec3f("offset"), o20;
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechniqueConfiguration.js
var r21 = class extends e9 {
  constructor() {
    super(...arguments), this.cullFace = 0, this.transparent = false, this.writeDepth = true, this.screenSizeEnabled = true, this.shadingEnabled = true, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.textureCoordinateType = 0, this.emissionSource = 0, this.occlusionPass = false, this.olidColorInstanced = false, this.draped = false, this.overlayEnabled = false, this.snowCover = false;
  }
  get discardInvisibleFragments() {
    return this.transparent;
  }
};
__decorate([i5({ count: 3 })], r21.prototype, "cullFace", void 0), __decorate([i5()], r21.prototype, "transparent", void 0), __decorate([i5()], r21.prototype, "writeDepth", void 0), __decorate([i5()], r21.prototype, "screenSizeEnabled", void 0), __decorate([i5()], r21.prototype, "shadingEnabled", void 0), __decorate([i5()], r21.prototype, "terrainDepthTest", void 0), __decorate([i5()], r21.prototype, "cullAboveTerrain", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js
var x8 = class extends s9 {
  constructor(e23) {
    super(e23, D6), this._configuration = new r21(), this.supportsEdges = true, this._pp0 = r5(0, 0, 1), this._pp1 = r5(0, 0, 0), this.produces = /* @__PURE__ */ new Map([[2, (e24) => 9 === e24 || f9(e24) && !this.parameters.transparent], [4, (e24) => f9(e24) && this.parameters.transparent && this.parameters.writeDepth], [8, (e24) => f9(e24) && this.parameters.transparent && !this.parameters.writeDepth]]);
  }
  getConfiguration(e23, t26) {
    return super.getConfiguration(e23, t26, this._configuration), this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.screenSizeEnabled = this.parameters.screenSizeEnabled, this._configuration.shadingEnabled = this.parameters.shadingEnabled, this._configuration.oitPass = t26.oitPass, this._configuration.terrainDepthTest = t26.terrainDepthTest && o10(e23), this._configuration.cullAboveTerrain = t26.cullAboveTerrain, this._configuration;
  }
  get visible() {
    return this.parameters.color[3] >= o12;
  }
  intersect(e23, t26, r27, s21, i23, a28) {
    this._intersect(e23, r27, s21, i23, a28);
  }
  intersectDraped(e23, t26, r27, s21) {
    return this._pp0[0] = this._pp1[0] = r27[0], this._pp0[1] = this._pp1[1] = r27[1], this._intersect(e23, t26, this._pp0, this._pp1, s21);
  }
  _intersect(e23, i23, a28, n23, c25) {
    if (this.parameters.screenSizeEnabled) {
      const h24 = e23.attributes.get("offset"), l25 = { applyToVertex: (e24, a29, n24, o20) => {
        const p18 = o6(E8, h24.data[3 * o20], h24.data[3 * o20 + 1], h24.data[3 * o20 + 2]), c26 = o6(M10, e24, a29, n24);
        return g2(p18, p18, this.parameters.screenSizeScale * (i23.camera?.computeScreenPixelSizeAt(p18) ?? 1)), u6(c26, c26, p18), [c26[0], c26[1], c26[2]];
      }, applyToAabb: (e24) => {
        const t26 = b5(e24, E8);
        return O2(e24, this.parameters.screenSizeScale * (i23.camera?.computeScreenPixelSizeAt(t26) ?? 1));
      } };
      h6(e23, i23, a28, n23, l25, c25);
    } else h6(e23, i23, a28, n23, void 0, c25);
  }
  createGLMaterial(e23) {
    return new z8(e23);
  }
  createBufferWriter() {
    return new y11(f16(this.parameters));
  }
};
var z8 = class extends t11 {
  beginSlot(e23) {
    return this.getTechnique(p12, e23);
  }
};
var D6 = class extends a10 {
  constructor() {
    super(...arguments), this.color = r9(1, 1, 1, 1), this.shadingTint = r9(0, 0, 0, 0.25), this.shadingDirection = A(n3(), [0.5, -0.5, -0.5]), this.screenSizeScale = 14, this.forceTransparentMode = false, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = 0, this.screenSizeEnabled = false, this.shadingEnabled = true;
  }
  get transparent() {
    return this.color[3] < 1 || this.forceTransparentMode;
  }
};
var y11 = class {
  constructor(e23) {
    this.layout = e23;
  }
  elementCount(e23) {
    return e23.get("position").indices.length;
  }
  write(e23, t26, r27, s21, i23, a28) {
    const n23 = j4(r27, s21, this.layout, e23, t26, i23, a28), o20 = i23.getField("offset", o7);
    if (o20 && r27.has("offset")) {
      const e24 = r27.get("offset");
      s7(3 === e24.size), z(e24, t26, o20, a28);
    }
    return n23;
  }
};
var E8 = n3();
var M10 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VerticesVisualElement.js
var h15 = class extends o14 {
  constructor(e23) {
    super(e23), this.view = null, this._renderOccluded = 4, this._vertices = null, this._spatialReference = null, this._color = u5([1, 127 / 255, 0, 1]), this._size = 11, this._outlineColor = u5([0, 0, 0, 0.5]), this._outlineSize = 1, this._elevationInfo = null, this.applyProperties(e23);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e23) {
    e23 !== this._renderOccluded && (this._renderOccluded = e23, this._updateMaterial(), this._updateOutlineMaterial());
  }
  get vertices() {
    return this._vertices;
  }
  set vertices(e23) {
    this._vertices = e23, this.recreateGeometry();
  }
  get spatialReference() {
    return this._spatialReference;
  }
  set spatialReference(e23) {
    this._spatialReference = e23, this.recreateGeometry();
  }
  get color() {
    return this._color;
  }
  set color(e23) {
    E3(e23, this._color) || (a6(this._color, e23), this._updateMaterial());
  }
  get size() {
    return this._size;
  }
  set size(e23) {
    e23 !== this._size && (this._size = e23, this._updateMaterial());
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e23) {
    E3(e23, this._outlineColor) || (a6(this._outlineColor, e23), this._updateOutlineMaterial());
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e23) {
    e23 !== this._outlineSize && (this._outlineSize = e23, this._updateOutlineMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e23) {
    this._elevationInfo = e23, this.recreateGeometry();
  }
  get _vertexMaterialParameters() {
    return { color: this._color, screenSizeScale: this.size, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  get _vertexOutlineMaterialParameters() {
    return { color: this._outlineColor, screenSizeScale: this.size + 2 * this.outlineSize, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateMaterial() {
    this.attached && this._vertexMaterial.setParameters(this._vertexMaterialParameters);
  }
  _updateOutlineMaterial() {
    this.attached && this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters);
  }
  _createRenderGeometries() {
    const t26 = this.vertices;
    if (null == t26 || 0 === t26.length) return [];
    const r27 = 0.5, i23 = 0.5, s21 = o15(t26, this.spatialReference, this.view.elevationProvider, this.view.renderCoordsHelper, o13.fromElevationInfo(this.elevationInfo)), a28 = [], n23 = s21.numVertices, c25 = s21.position;
    for (let l25 = 0; l25 < n23; ++l25) {
      const t27 = o6(u14, c25[3 * l25], c25[3 * l25 + 1], c25[3 * l25 + 2]), s22 = d13(this._vertexMaterial, r27, t27), o20 = d13(this._vertexOutlineMaterial, i23, t27);
      a28.push({ vertexGeometry: s22, vertexOutlineGeometry: o20 });
    }
    return a28;
  }
  createGeometries(e23) {
    const t26 = this._createRenderGeometries();
    for (const { vertexGeometry: r27, vertexOutlineGeometry: i23 } of t26) e23.addGeometry(r27), e23.addGeometry(i23);
  }
  createExternalResources() {
    this._vertexMaterial = new x8({ ...this._vertexMaterialParameters, writeDepth: true, cullFace: 2, screenSizeEnabled: true }), this._vertexOutlineMaterial = new x8({ ...this._vertexOutlineMaterialParameters, forceTransparentMode: true, writeDepth: true, cullFace: 1, screenSizeEnabled: true, shadingEnabled: false });
  }
  destroyExternalResources() {
    this._vertexMaterial = null, this._vertexOutlineMaterial = null;
  }
  forEachMaterial(e23) {
    e23(this._vertexMaterial), e23(this._vertexOutlineMaterial);
  }
};
var u14 = n3();
function d13(e23, t26, r27) {
  return lt(e23, t26, 16, 16, { offset: r27 });
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/draw/DrawGraphicTool3D.js
var b16 = class extends A2 {
  constructor(e23) {
    super(e23), this._activeVertexVisualElement = null, this._createGraphicState = null, this._outlineVisualElement = null, this._verticesVisualElement = null, this._verticalLineVisualElement = null, this._settings = new b14({ getTheme: () => this.view.effectiveTheme }), this.geometryType = null, this.type = "draw-3d";
  }
  initialize() {
    const { mode: e23, offset: t26, unit: i23, featureExpressionInfo: r27 } = this.elevationInfo;
    this.internalGraphicsLayer.elevationInfo = new c8({ mode: e23, offset: t26, unit: i23, featureExpressionInfo: r27 });
  }
  normalizeCtorArgs(e23) {
    if (!e23.elevationInfo) {
      const t26 = e23.hasZ ?? true;
      return { ...e23, elevationInfo: i7(t26) };
    }
    return e23;
  }
  initializeGraphic(e23) {
    const { view: t26 } = this, r27 = this._createGraphicState = new e13({ graphic: e23 });
    return t([t26.maskOccludee(e23), t26.trackGraphicState(r27), l3(() => ({ element: this._outlineVisualElement, isDraped: r27.isDraped }), ({ element: e24, isDraped: t27 }) => {
      e24 && (e24.isDraped = t27);
    }, w2), i(() => {
      z3(this.tooltipInfos.mesh, this.geometryToPlace);
    }), this._setupLoadingIndicator(r27), ...r20(r27)]);
  }
  makeDrawOperation() {
    const { geometryType: e23 } = this, t26 = "circle" !== e23 && "rectangle" !== e23;
    return new A3({ view: this.view, manipulators: this.manipulators, geometryType: M5(e23), drawingMode: this.mode, hasZ: this.hasZ, defaultZ: this.defaultZ, snapToSceneEnabled: this.snapToScene, drawSurface: new l12(this.view, this.elevationInfo, [this.internalGraphicsLayer]), elevationDrawSurface: new c12(this.elevationInfo, this.defaultZ, this.view, this.internalGraphicsLayer), hasM: false, elevationInfo: this.elevationInfo, snappingManager: this.snappingManager, snappingVisualizer: new w7(), segmentLabels: t26 ? new a16() : null, labelOptions: this.sketchOptions.labels, isDraped: this._createGraphicState ? this._createGraphicState.isDraped : "on-the-ground" === u10(this.hasZ, this.elevationInfo), cursor: this.cursor, constraintsEnabled: true, automaticLengthMeasurementUtils: this.automaticLengthMeasurementUtils });
  }
  onActiveVertexChanged(e23) {
    const { view: n23 } = this;
    if (this._activeVertexVisualElement) return this._activeVertexVisualElement.vertices = [e23], this._activeVertexVisualElement.recreate(), this._updateVerticalLineVisualElement(e23), e();
    const l25 = this._settings, c25 = l25.manipulators.vertex, m15 = new h15({ view: n23, spatialReference: n23.spatialReference, vertices: [e23], elevationInfo: this.internalGraphicsLayer.elevationInfo, size: c25.size, outlineSize: c25.outlineSize, renderOccluded: c25.renderOccluded, attached: false, isDecoration: true });
    this._activeVertexVisualElement = m15;
    const p18 = l25.visualElements.zVerticalLine, h24 = new G3({ view: n23, extensionType: p18.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: 4, isDecoration: true });
    this._verticalLineVisualElement = h24;
    const u22 = t([l3(() => l25.visualElements.zVerticalLine, (e24) => e24.apply(h24), h), l3(() => ({ selectedColor: H2(l25.colors.selected), outlineColor: H2(l25.manipulators.vertex.outlineColor) }), ({ selectedColor: e24, outlineColor: t26 }) => {
      m15.color = e24, m15.outlineColor = t26;
    }, h), e(() => {
      this._activeVertexVisualElement = u2(this._activeVertexVisualElement), this._verticalLineVisualElement = u2(this._verticalLineVisualElement);
    })]);
    return m15.attached = true, this._updateVerticalLineVisualElement(e23), u22;
  }
  _updateVerticalLineVisualElement(e23) {
    const t26 = this._verticalLineVisualElement;
    if (!t26) return;
    const { renderCoordsHelper: i23, elevationProvider: r27 } = this.view;
    o6(U7, e23[0], e23[1], e23[2]), z9.setFromElevationInfo(this.elevationInfo), U7[2] = u11(U7, r27, z9, i23);
    i23.toRenderCoords(U7, this.view.spatialReference, U7) ? (t26.setStartEndFromWorldDownAtLocation(U7), t26.attached = true) : t26.attached = false;
  }
  onOutlineChanged(e23) {
    if (this._outlineVisualElement) return this._outlineVisualElement.geometry = e23, e();
    const t26 = this.internalGraphicsLayer.elevationInfo, { view: n23 } = this, l25 = this._settings, c25 = new R9({ view: n23, geometry: e23, elevationInfo: t26, isDraped: this._createGraphicState ? this._createGraphicState.isDraped : "on-the-ground" === u10(this.hasZ, t26), attached: false, isDecoration: true });
    this._outlineVisualElement = c25;
    const m15 = t([l3(() => l25.visualElements.lineObjects.outline, (e24) => e24.apply(c25), h), l3(() => l25.visualElements.lineObjects.shadowStyle, (e24) => e24.apply(c25), h), e(() => {
      this._outlineVisualElement = u2(this._outlineVisualElement);
    })]);
    return c25.attached = true, c25.laserlineEnabled = true, m15;
  }
  onRegularVerticesChanged(e23) {
    if (this._verticesVisualElement) return this._verticesVisualElement.vertices = e23, e();
    const { view: n23 } = this, l25 = this._settings, c25 = l25.manipulators.vertex, m15 = new h15({ view: n23, spatialReference: n23.spatialReference, vertices: e23, elevationInfo: this.internalGraphicsLayer.elevationInfo, size: c25.size, outlineSize: c25.outlineSize, renderOccluded: c25.renderOccluded, attached: false, isDecoration: true }), p18 = t([l3(() => ({ color: H2(l25.manipulators.vertex.color), outlineColor: H2(l25.manipulators.vertex.outlineColor) }), ({ color: e24, outlineColor: t26 }) => {
      m15.color = e24, m15.outlineColor = t26;
    }, h), e(() => {
      this._verticesVisualElement = u2(this._verticesVisualElement);
    })]);
    return m15.attached = true, this._verticesVisualElement = m15, p18;
  }
  updateGraphicGeometry(e23) {
    if ("mesh" === this.geometryType && "point" === e23?.type) {
      const t26 = this.geometryToPlace;
      t26?.centerAt(e23), z3(this.tooltipInfos.mesh, t26);
      const i23 = this._graphic;
      return void (t26 && i23.geometry === t26 || (i23.geometry = t26));
    }
    super.updateGraphicGeometry(e23);
  }
  _setupLoadingIndicator(e23) {
    const { drawOperation: t26 } = this;
    if (!this.geometryToPlace || e23.displaying) return t26.loading = false, null;
    t26.loading = true;
    const s21 = e(() => {
      t26.loading = false;
    });
    let o20;
    const a28 = () => {
      o20 && cancelAnimationFrame(o20);
    };
    return t([f2(() => e23.displaying, () => {
      a28(), o20 = requestAnimationFrame(() => s21.remove());
    }, { ...w2, once: true }), e(a28), s21]);
  }
};
__decorate([m({ constructOnly: true })], b16.prototype, "elevationInfo", void 0), __decorate([m({ constructOnly: true })], b16.prototype, "geometryType", void 0), __decorate([m()], b16.prototype, "type", void 0), __decorate([m({ constructOnly: true })], b16.prototype, "view", void 0), b16 = __decorate([a2("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")], b16);
var z9 = new o13();
var U7 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/geometryUtils.js
function n13(o20) {
  const n23 = r22(o20);
  return r11(Math.cos(n23), Math.sin(n23));
}
function r22(t26) {
  if (null == t26 || "polyline" !== t26.type && "polygon" !== t26.type) return 0;
  const n23 = "polyline" === t26.type ? t26.paths : t26.rings, r27 = e2();
  for (const o20 of n23) for (let t27 = 0; t27 < o20.length - 1; t27++) {
    const n24 = o20[t27], e23 = o20[t27 + 1], i23 = n24[0] - e23[0], l25 = n24[1] - e23[1];
    if (i23 * i23 + l25 * l25 > r27) return Math.atan2(e23[1] - n24[1], e23[0] - n24[0]);
  }
  return 0;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatedObjectUtils.js
function t17(t26) {
  return t26?.operations?.data.geometry;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatorUtils.js
function o16(e23, n23) {
  return t18(e23?.data.coordinateHelper.hasZ(), n23);
}
function t18(e23, o20) {
  return !!e23 && "on-the-ground" !== o20.mode && !d6(o20);
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/tooltipUtils3D.js
function f17(o20, e23, c25) {
  function l25() {
    const t26 = c25(), o21 = t26.sketchOptions.tooltips.effectiveEnabled ? t26.activeTooltipInfo : null;
    return { ...t26, activeTooltipInfo: o21 };
  }
  let u22 = false;
  function p18(t26) {
    u22 || (u22 = true, t26(), u22 = false);
  }
  function f20({ activeTooltipInfo: t26, sketchOptions: i23, scaleRotateTransform: n23 }) {
    p18(() => {
      t26 && (t26.sketchOptions = i23, d14(t26, e23), y12(t26, n23)), o20.info = t26;
    });
  }
  return t([l3(l25, f20, w2), l3(() => {
    const t26 = l25(), { activeTooltipInfo: o21 } = t26;
    if (o21) return { context: t26, activeTooltipInfo: o21, key: o21.key, geometry: t17(e23) };
  }, (t26, o21) => {
    t26 && o21 && o21.key !== t26.key && p18(() => m11(e23, t26.context));
  }, U), e23.on("committed", () => {
    queueMicrotask(() => f20(l25()));
  }), C(o20, { onBeforePaste: () => {
    u22 = true;
  }, onAfterPaste: () => {
    m11(e23, l25()), u22 = false;
  } })]);
}
function m11(t26, { activeTooltipInfo: o20, callbacks: e23 }) {
  if (!o20) return;
  e23.onBeforeUpdate();
  const i23 = t17(t26);
  switch (i23?.type) {
    case "mesh":
      v12(o20, i23.origin, t26, e23), "orientation" in o20 && "scale" in o20 && z3(o20, i23, e23);
      break;
    case "point":
      v12(o20, i23, t26, e23);
  }
}
function v12(t26, o20, e23, i23) {
  const { dx: n23, dy: a28, dz: s21 } = F3(t26, o20);
  0 === n23 && 0 === a28 && 0 === s21 || (i23.onMoveStart(), e23.operations?.move(n23, a28, s21, 0), i23.onMove(n23, a28, s21), i23.onMoveStop());
}
function d14(t26, o20) {
  const e23 = t17(o20), i23 = e23?.type;
  if (!t26 || !e23 || "mesh" !== i23 && "point" !== i23) return;
  const n23 = "mesh" === i23, a28 = n23 ? e23.origin : e23;
  t26.setLocationFromPoint(a28), h16(t26, a28, o20), "transform-mesh" === t26.type && n23 && V(t26, e23), t26.clearInputValues();
}
function h16(t26, o20, e23) {
  t26.elevation.actual = y7(o20), t26.elevation.visible = !!e23.operations?.data.coordinateHelper.hasZ(), t26.elevation.readOnly = false, t26.elevation.showAsZ = true;
}
function y12(t26, i23) {
  if ("transform-point" !== t26?.type) return;
  if (!i23) return t26.orientation.actual = void 0, t26.size.actual = void 0, t26.orientation.visible = false, void (t26.size.visible = false);
  const n23 = i23.mode, { size: a28, orientationClockwise: s21 } = i23.adapter, { visualVariables: r27 } = t26.sketchOptions.tooltips, c25 = r27?.rotation, l25 = null != s21 && (null == n23 || "rotate" === n23), u22 = "geographic";
  t26.orientation.actual = l25 ? c10(s21, "radians", u22) : void 0, t26.orientation.precision = k9(c25?.valueType), t26.orientation.visible = l25;
  const p18 = r27?.size, f20 = null != a28 && (null == n23 || "scale" === n23);
  t26.size.actual = f20 ? a13(a28, p18?.unit ?? "meters") : void 0, t26.size.precision = k9(p18?.valueType), t26.size.visible = f20;
}
function k9(t26) {
  switch (t26) {
    case "integer":
    case "long":
      return 0;
    default:
      return null;
  }
}

// node_modules/@arcgis/core/views/3d/support/geometryUtils/ray.js
function l16(r27, n23, o20 = b7()) {
  return m12(r27, g(n23), o20), A(o20.direction, o20.direction), o20;
}
function m12(e23, n23, t26) {
  return g6(e23, e23.screenToRender(n23, p(c4.get())), t26);
}
function g6(e23, t26, i23) {
  if (null == t26) return null;
  const c25 = p(r7(c4.get(), t26));
  if (c25[2] = 0, !e23.unprojectFromRenderScreen(c25, i23.origin)) return null;
  const u22 = p(r7(c4.get(), t26));
  u22[2] = 1;
  const l25 = e23.unprojectFromRenderScreen(u22, c4.get());
  return null == l25 ? null : (c3(i23.direction, l25, i23.origin), i23);
}

// node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js
var Y = class {
  constructor(e23) {
    this.metadata = void 0, this._camera = new tt(), this._elevation = { offset: 0, override: null }, this.collisionType = { type: "point" }, this.collisionPriority = 0, this._renderObjects = new Array(), this.autoScaleRenderObjects = true, this._available = true, this._noDisplayCount = 0, this._radius = 10, this._worldSized = false, this.focusMultiplier = 2, this.touchMultiplier = 2.5, this.worldOriented = false, this._modelTransform = e5(), this._worldFrame = null, this._renderLocation = n3(), this._renderLocationDirty = true, this._location = new _({ x: 0, y: 0, z: 0 }), this._elevationAlignedLocation = new _(), this._elevationAlignedLocationDirty = true, this.interactive = true, this.selectable = false, this.grabbable = true, this.consumesClicks = true, this.cursor = null, this.grabCursor = null, this._grabbing = false, this.dragging = false, this._hovering = false, this._selected = false, this._state = 0, this._focused = false, this.events = new i2(), this._screenLocation = { screenPointArray: f4(), renderScreenPointArray: y(), pixelSize: 0 }, this._screenLocationDirty = true, this._engineResourcesAddedToStage = false, this._attached = false, this._location.spatialReference = e23.view.spatialReference, Object.assign(this, e23);
    const i23 = this.view.state?.camera;
    i23 && this._camera.copyFrom(i23);
  }
  destroy() {
    this._applyObjectTransform = ge, this._removeResourcesFromStage(), this._engineResources = null, this.view = null, this._camera = null;
  }
  get _stage() {
    return this.view?.stage;
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e23) {
    this._elevationInfo = e23, this._elevationAlignedLocationDirty = true, this._renderLocationDirty = true, this._updateEngineObject();
  }
  get renderObjects() {
    return this._renderObjects;
  }
  set renderObjects(e23) {
    this._removeResourcesFromStage(), this._engineResources = null, this._renderObjects = e23.slice(), this._updateEngineObject();
  }
  set available(e23) {
    e23 !== this._available && (this._available = e23, this._updateEngineObject());
  }
  get available() {
    return this._available;
  }
  disableDisplay() {
    return this._noDisplayCount++, 1 === this._noDisplayCount && this._updateEngineObject(), e(() => {
      this._noDisplayCount--, 0 === this._noDisplayCount && this._updateEngineObject();
    });
  }
  set radius(e23) {
    e23 !== this._radius && (this._radius = e23, this._updateEngineObject());
  }
  get radius() {
    return this._radius;
  }
  set worldSized(e23) {
    e23 !== this._worldSized && (this._worldSized = e23, this._updateEngineObject());
  }
  get worldSized() {
    return this._worldSized;
  }
  get modelTransform() {
    return this._modelTransform;
  }
  set modelTransform(e23) {
    Z(e23) && (this._screenLocationDirty = true), n4(this._modelTransform, e23), this._updateEngineObject();
  }
  get renderLocation() {
    return this._renderLocationDirty && (this._renderLocationDirty = false, this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation, this._renderLocation), this.worldOriented ? (this._worldFrame || (this._worldFrame = e5()), $2(this.view, this._renderLocation, this._worldFrame)) : this._worldFrame && (this._worldFrame = null)), this._renderLocation;
  }
  set renderLocation(e23) {
    this.view.renderCoordsHelper.fromRenderCoords(e23, this._location), this.elevationAlignedLocation = this._location;
  }
  get location() {
    return this._location;
  }
  set location(e23) {
    x2(e23, this._location), this._notifyLocationChanged();
  }
  _notifyLocationChanged() {
    this._renderLocationDirty = true, this._screenLocationDirty = true, this._elevationAlignedLocationDirty = true, this._updateEngineObject(), this.events.emit("location-update", { location: this._location });
  }
  get elevationAlignedLocation() {
    return this._elevationAlignedLocationDirty ? (this._evaluateElevationAlignment(), this._updateElevationAlignedLocation(), this._elevationAlignedLocation) : this._elevationAlignedLocation;
  }
  set elevationAlignedLocation(e23) {
    x2(e23, this._location), this._evaluateElevationAlignment(), this._location.z -= this._elevation.offset, this._updateElevationAlignedLocation(), this._updateEngineObject(), this.events.emit("location-update", { location: this._location });
  }
  _updateElevationAlignedLocation() {
    const e23 = null != this._elevation.override ? this._elevation.override : this.location.z || 0;
    this._elevationAlignedLocation.x = this.location.x, this._elevationAlignedLocation.y = this.location.y, this._elevationAlignedLocation.z = e23 + this._elevation.offset, this._elevationAlignedLocation.spatialReference = k4(this.location.spatialReference), this._renderLocationDirty = true, this._screenLocationDirty = true, this._elevationAlignedLocationDirty = false;
  }
  grabbableForEvent() {
    return true;
  }
  get grabbing() {
    return this._grabbing;
  }
  set grabbing(e23) {
    e23 !== this._grabbing && (this._grabbing = e23, this._setFocused(this._hovering || this._grabbing), this._updateEngineObject());
  }
  get hovering() {
    return this._hovering;
  }
  set hovering(e23) {
    e23 !== this._hovering && (this._hovering = e23, this._setFocused(this._hovering || this._grabbing), this._updateEngineObject());
  }
  get selected() {
    return this._selected;
  }
  set selected(e23) {
    e23 !== this._selected && (this._selected = e23, this._updateEngineObject(), this.events.emit("select-changed", { action: e23 ? "select" : "deselect" }));
  }
  get state() {
    return this._state;
  }
  set state(e23) {
    e23 !== this._state && (this._state = e23, this._updateEngineObject());
  }
  updateStateEnabled(e23, t26) {
    t26 ? this.state |= e23 : this.state &= ~e23;
  }
  _setFocused(e23) {
    e23 !== this._focused && (this._focused = e23, this.events.emit("focus-changed", { action: true === e23 ? "focus" : "unfocus" }));
  }
  get focused() {
    return this._focused;
  }
  get screenLocation() {
    return this._ensureScreenLocation(), this._screenLocation;
  }
  _ensureScreenLocation() {
    if (!this._screenLocationDirty) return;
    this._screenLocation.pixelSize = this._camera.computeScreenPixelSizeAt(this.renderLocation), this._screenLocationDirty = false;
    let e23;
    if (Z(this._modelTransform)) {
      const t26 = this._calculateModelTransformOffset(_e);
      e23 = u6(t26, t26, this.renderLocation);
    } else e23 = this.renderLocation;
    this._camera.projectToRenderScreen(e23, this._screenLocation.renderScreenPointArray), this._camera.renderToScreen(this._screenLocation.renderScreenPointArray, this._screenLocation.screenPointArray);
  }
  get applyObjectTransform() {
    return this._applyObjectTransform;
  }
  set applyObjectTransform(e23) {
    this._applyObjectTransform = e23, this._screenLocationDirty = true, this._updateEngineObject();
  }
  get attached() {
    return this._attached;
  }
  intersectionDistance(t26, i23) {
    if (!this.available) return null;
    const s21 = g(t26, ee), o20 = this._getCollisionRadius(i23), r27 = -1 * this.collisionPriority;
    switch (this.collisionType.type) {
      case "point":
        if (b4(this.screenLocation.screenPointArray, s21) < o20 * o20) return this.screenLocation.renderScreenPointArray[2] + r27;
        break;
      case "line": {
        const e23 = this.collisionType.paths, t27 = this._getWorldToScreenObjectScale(), i24 = this._calculateObjectTransform(t27, re2), n23 = o20 * this.screenLocation.pixelSize, a28 = m12(this._camera, s21, ie2);
        if (null == a28) return null;
        for (const s22 of e23) {
          if (0 === s22.length) continue;
          const e24 = E4(ae2, s22[0], i24);
          for (let t28 = 1; t28 < s22.length; t28++) {
            const o21 = E4(ce, s22[t28], i24), l25 = d3(b6(e24, o21, te), a28);
            if (null != l25 && l25 < n23 * n23) {
              const t29 = u6(c4.get(), e24, o21);
              g2(t29, t29, 0.5);
              const i25 = l4(c4.get());
              if (this._camera.projectToRenderScreen(t29, i25)) return i25[2] + r27;
            }
            s6(e24, o21);
          }
        }
        break;
      }
      case "disc": {
        const e23 = this.collisionType.direction, t27 = this.collisionType.offset ?? a5, i24 = this._getWorldToScreenObjectScale(), n23 = this._calculateObjectTransform(i24, re2), a28 = o20 * this.screenLocation.pixelSize, c25 = m12(this._camera, s21, ie2);
        if (null == c25) return null;
        const h24 = n5(se, n23), d21 = N2(he, e23, h24), _12 = E4(de, t27, n23);
        U2(_12, d21, ne2);
        const u22 = le;
        if (K2(ne2, c25, u22) && v2(u22, _12) < a28 * a28) return this.screenLocation.renderScreenPointArray[2] + r27;
        break;
      }
      case "ribbon": {
        const { paths: e23, direction: t27 } = this.collisionType, i24 = this._getWorldToScreenObjectScale(), n23 = this._calculateObjectTransform(i24, re2), a28 = o20 * this._camera.computeScreenPixelSizeAt(this.renderLocation), h24 = m12(this._camera, s21, ie2);
        if (null == h24) return null;
        const d21 = n5(se, n23), _12 = N2(he, t27, d21), u22 = this._calculateModelTransformPosition(de);
        U2(u22, _12, ne2);
        const g15 = le;
        if (!K2(ne2, h24, g15)) break;
        for (const s22 of e23) {
          if (0 === s22.length) continue;
          const e24 = E4(ae2, s22[0], n23);
          for (let t28 = 1; t28 < s22.length; t28++) {
            const i25 = E4(ce, s22[t28], n23), o21 = M2(b6(e24, i25, te), g15);
            if (null != o21 && o21 < a28 * a28) {
              const t29 = u6(c4.get(), e24, i25);
              g2(t29, t29, 0.5);
              const s23 = l4(c4.get());
              if (this._camera.projectToRenderScreen(t29, s23)) return s23[2] + r27;
            }
            s6(e24, i25);
          }
        }
        break;
      }
      default:
        n(this.collisionType);
    }
    return null;
  }
  attach(e23 = { manipulator3D: {} }) {
    const t26 = this._stage;
    if (!t26) return;
    const i23 = e23.manipulator3D;
    null == i23.engineLayerId ? (this._engineLayer = new d10(t26, { pickable: false, updatePolicy: 1 }), i23.engineLayerId = this._engineLayer.id) : t26?.getLayer && (this._engineLayer = t26.getLayer(i23.engineLayerId)), i23.engineLayerReferences = (i23.engineLayerReferences || 0) + 1, this._camera.copyFrom(this.view.state.camera), this._attached = true, this._updateEngineObject(), J2(this._location.spatialReference, this.view.spatialReference) || (this.location = new _({ x: 0, y: 0, z: 0, spatialReference: this.view.spatialReference }));
  }
  detach(e23 = { manipulator3D: {} }) {
    const t26 = e23.manipulator3D;
    t26.engineLayerReferences--;
    const i23 = 0 === t26.engineLayerReferences;
    this._removeResourcesFromStage(), i23 && (t26.engineLayerId = null, u2(this._engineLayer)), this._engineResources = null, this._engineLayer = null, this._attached = false;
  }
  onViewChange() {
    this._camera.copyFrom(this.view.state.camera), this._screenLocationDirty = true, this._updateEngineObject();
  }
  onElevationChange(e23) {
    $(this.location, ue, e23.spatialReference) && k(e23.extent, ue) && this._notifyLocationChanged();
  }
  _evaluateElevationAlignment() {
    if (null == this.elevationInfo) return;
    let e23 = null, t26 = 0;
    const i23 = h7(this.elevationInfo, this.location.spatialReference ?? this.view.elevationProvider.spatialReference);
    switch (this.elevationInfo.mode) {
      case "on-the-ground":
        e23 = a14(this.view.elevationProvider, this.location, "ground") ?? 0;
        break;
      case "relative-to-ground":
        t26 = (a14(this.view.elevationProvider, this.location, "ground") ?? 0) + i23;
        break;
      case "relative-to-scene":
        t26 = (a14(this.view.elevationProvider, this.location, "scene") ?? 0) + i23;
        break;
      case "absolute-height":
        t26 = i23;
    }
    return t26 !== this._elevation.offset || e23 !== this._elevation.override ? (this._elevation.offset = t26, void (this._elevation.override = e23)) : void 0;
  }
  _updateEngineObject() {
    if (!this._attached) return;
    if (!this.available) return void this._removeResourcesFromStage();
    const e23 = this._getWorldToScreenObjectScale(), t26 = re2;
    if (true === this.autoScaleRenderObjects) {
      const i24 = this._getFocusedSize(this._radius, this.focused) * e23;
      this._calculateObjectTransform(i24, t26);
    } else this._calculateObjectTransform(e23, t26);
    const { objectsByState: i23 } = this._ensureEngineResources(), s21 = (this.focused ? 2 : 1) | (this.selected ? 8 : 4), o20 = this._noDisplayCount > 0;
    for (const { stateMask: r27, objects: n23 } of i23) {
      if (o20) {
        for (const e25 of n23) e25.visible = false;
        continue;
      }
      const e24 = !!!(15 & r27) || (s21 & r27) === (15 & r27), i24 = !!!(65520 & r27) || (this.state & r27) === (65520 & r27);
      if (e24 && i24) for (const s22 of n23) s22.visible = true, s22.transformation = t26;
      else for (const t27 of n23) t27.visible = false;
    }
  }
  _ensureEngineResources() {
    if (null == this._engineResources) {
      const e23 = this._engineLayer, t26 = [], i23 = /* @__PURE__ */ new Set();
      this.renderObjects.forEach(({ geometry: { material: e24 } }) => {
        i23.has(e24) || (t26.push(e24), i23.add(e24));
      });
      const s21 = /* @__PURE__ */ new Map();
      this._renderObjects.forEach((e24) => {
        const t27 = new W2({ castShadow: false, geometries: [e24.geometry] }), i24 = s21.get(e24.stateMask) || [];
        i24.push(t27), s21.set(e24.stateMask, i24);
      });
      const o20 = [];
      s21.forEach((e24, t27) => o20.push({ stateMask: t27, objects: e24 })), this._engineResources = { objectsByState: o20, layer: e23, materials: t26 };
    }
    return this._addResourcesToStage(), this._engineResources;
  }
  _addResourcesToStage() {
    const e23 = this._stage;
    if (this._engineResourcesAddedToStage || null == this._engineResources || !e23) return;
    const { objectsByState: t26, layer: i23 } = this._engineResources;
    t26.forEach(({ objects: e24 }) => i23.addMany(e24)), this._engineResourcesAddedToStage = true;
  }
  _removeResourcesFromStage() {
    const e23 = this._stage;
    if (!this._engineResourcesAddedToStage || null == this._engineResources || !e23) return;
    const { objectsByState: t26, layer: i23 } = this._engineResources;
    t26.forEach(({ objects: e24 }) => i23.removeMany(e24)), this._engineResourcesAddedToStage = false;
  }
  _getCollisionRadius(e23) {
    return this._getFocusedSize(this.radius, true) * ("touch" === e23 ? this.touchMultiplier : 1);
  }
  _getFocusedSize(e23, t26) {
    return e23 * (t26 ? this.focusMultiplier : 1);
  }
  _getWorldToScreenObjectScale() {
    return this._worldSized ? 1 : this.screenLocation.pixelSize;
  }
  _calculateModelTransformPosition(e23) {
    const t26 = this._getWorldToScreenObjectScale(), i23 = this._calculateObjectTransform(t26, oe);
    return o6(e23, i23[12], i23[13], i23[14]);
  }
  _calculateModelTransformOffset(e23) {
    const t26 = this._calculateModelTransformPosition(e23);
    return c3(e23, t26, this.renderLocation);
  }
  _calculateObjectTransform(e23, t26) {
    return r6(t26, e23, 0, 0, 0, 0, e23, 0, 0, 0, 0, e23, 0, 0, 0, 0, 1), this._worldFrame && c2(t26, t26, this._worldFrame), c2(t26, t26, this._modelTransform), t26[12] += this.renderLocation[0], t26[13] += this.renderLocation[1], t26[14] += this.renderLocation[2], t26[15] = 1, null != this._applyObjectTransform && this._applyObjectTransform(t26), t26;
  }
  get test() {
  }
};
function Z(e23) {
  return 0 !== e23[12] || 0 !== e23[13] || 0 !== e23[14];
}
function $2(e23, t26, i23) {
  switch (e23.viewingMode) {
    case "local":
      return o3(i23), true;
    case "global": {
      const o20 = E(e23.renderCoordsHelper.spatialReference);
      return J(t26, 0, ae2, 0, o20.radius), n8(s3(ae2[0]), s3(ae2[1]), i23), true;
    }
  }
}
var ee = f4();
var te = v3();
var ie2 = b7();
var se = e4();
var oe = e5();
var re2 = e5();
var ne2 = j3();
var ae2 = n3();
var ce = n3();
var le = n3();
var he = n3();
var de = n3();
var _e = n3();
var ue = new _({ x: 0, y: 0, z: 0, spatialReference: null });
var ge = () => {
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorState.js
var i14 = class {
  constructor() {
    this.grabbingState = 0, this.zManipulator = null, this.firstSelected = null, this.numSelected = 0, this.firstGrabbedXY = null;
  }
  update(i23) {
    this.grabbingState = 0, this.zManipulator = null, this.numSelected = 0, this.firstSelected = null, this.firstGrabbedXY = null, i23.forEachManipulator((i24, e23) => {
      if (0 === e23 && (this.zManipulator = i24), i24 instanceof Y && (i24.selected && (0 === this.numSelected && (this.firstSelected = i24), this.numSelected++), null == this.firstGrabbedXY && i24.grabbing && 1 === e23 && (this.firstGrabbedXY = i24)), i24.grabbing) switch (this.grabbingState |= 1, e23) {
        case 0:
          this.grabbingState |= 2;
          break;
        case 1:
          this.grabbingState |= 4;
      }
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/lineObjectVisualElementUtils.js
function E9(t26) {
  const { object: n23 } = t26, a28 = j10(t26), l25 = [a28, w9(t26, a28.visualElement)];
  return n23.maskOccludee && l25.push(n23.maskOccludee()), { visualElement: a28.visualElement, remove: () => o(l25) };
}
function j10(e23) {
  const { view: a28, object: l25 } = e23, s21 = t17(l25), r27 = new R9({ view: a28, geometry: M11(s21) ? s21 : null, elevationInfo: l25.elevationInfo, attached: false, isDecoration: true }), c25 = new b14({ getTheme: () => a28.effectiveTheme }), u22 = () => {
    r27.attached = l25.visible;
  }, h24 = t([l3(() => c25.visualElements.lineObjects.outline, (e24) => e24.apply(r27), h), l3(() => c25.visualElements.lineObjects.shadowStyle, (e24) => e24.apply(r27), h), l3(() => l25.visible, u22), l3(() => l25.isDraped, (e24) => {
    r27.isDraped = e24;
  }, h), l25.on("committed", () => {
    const e24 = t17(l25);
    r27.geometry = M11(e24) ? e24 : null;
  }), c(r27)]);
  return u22(), { visualElement: r27, remove: () => h24.remove() };
}
function w9(r27, c25) {
  const { object: u22, view: h24 } = r27, m15 = [], b23 = u22.elevationInfo, E13 = "on-the-ground" === b23.mode || !b23.offset && "absolute-height" !== b23.mode, j16 = new i14(), w14 = new b14({ getTheme: () => h24.effectiveTheme }), O11 = w14.visualElements, D13 = new G3({ view: h24, extensionType: O11.zVerticalLine.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: 4, isDecoration: true }), T7 = s3(O11.heightPlaneAngleCutoff), L6 = new c19({ view: h24, attached: false, angleCutoff: T7, isDecoration: true }), x13 = r3(1);
  m15.push(l3(() => ({ lineShadowStyle: w14.visualElements.lineObjects.shadowStyle, pointShadowStyle: w14.visualElements.pointObjects.shadowStyle, alpha: x13.value }), ({ lineShadowStyle: e23, pointShadowStyle: t26, alpha: n23 }) => {
    e23.apply(c25, n23), t26.apply(D13, n23);
  }, h));
  const C6 = r3(1);
  m15.push(l3(() => ({ heightPlane: w14.visualElements.heightPlane, alpha: C6.value }), ({ heightPlane: e23, alpha: t26 }) => e23.apply(L6, t26), h));
  const V8 = () => {
    j16.update(r27);
    const e23 = t17(u22);
    if (!u22.visible || E13 && (u22.isDraped || !M11(e23) || !e23.hasZ)) return c25.laserlineEnabled = false, D13.attached = false, void (L6.attached = false);
    c25.laserlineEnabled = true;
    const t26 = 4 & j16.grabbingState ? O11.laserlineAlphaMultiplier : 1;
    x13.value = t26;
    const n23 = 2 & j16.grabbingState ? O11.laserlineAlphaMultiplier : 1;
    C6.value = n23, y13(D13, j16), S7(r27, c25, L6, j16);
  };
  m15.push(l3(() => w14.visualElements.zVerticalLine, (e23) => e23.apply(D13), h)), m15.push(u22.on("committed", V8), l3(() => u22.visible, V8), c25.events.on("attachment-origin-changed", V8), c(D13), c(L6));
  const A12 = [], P12 = () => {
    o(A12), A12.length = 0, r27.forEachManipulator((e23) => A12.push(e23.events.on("grab-changed", V8))), r27.forEachManipulator((e23) => A12.push(e23.events.on("select-changed", V8))), V8();
  };
  return P12(), m15.push(r27.onManipulatorsChanged(P12), u(() => t(A12))), t(m15);
}
function y13(e23, t26) {
  const n23 = 1 === t26.numSelected ? t26.firstSelected : t26.numSelected > 1 && null != t26.firstGrabbedXY ? t26.firstGrabbedXY : null;
  null != n23 ? (e23.setStartEndFromWorldDownAtLocation(n23.renderLocation), e23.attached = true) : e23.attached = false;
}
function S7(e23, t26, n23, a28) {
  if (a28.numSelected > 0) {
    o6(O6, 0, 0, 0);
    let t27 = 0;
    e23.forEachManipulator((e24, n24) => {
      1 === n24 && e24.selected && e24 instanceof Y && (u6(O6, O6, e24.renderLocation), t27++);
    }), t27 > 0 ? (n23.heightManifoldTarget = g2(O6, O6, 1 / t27), n23.attached = true) : n23.attached = false;
  } else {
    const a29 = t26.attachmentOrigin;
    null != a29 && e23.view.renderCoordsHelper.toRenderCoords(a29, O6) ? (n23.heightManifoldTarget = O6, n23.attached = true) : n23.attached = false;
  }
}
function M11(e23) {
  return null != e23 && ("polygon" === e23.type || "polyline" === e23.type);
}
var O6 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/originGeometryVisualElementUtils.js
function D7(t26) {
  const o20 = [], n23 = T4(t26, o20);
  return P8(t26, o20, n23), { visualElement: n23, remove: () => o(o20) };
}
function P8(e23, o20, r27) {
  const { view: c25, object: u22 } = e23, f20 = new b14({ getTheme: () => c25.effectiveTheme }), b23 = new G3({ view: c25, extensionType: f20.visualElements.zVerticalLine.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: 4, isDecoration: true });
  o20.push(l3(() => f20.visualElements.zVerticalLine, (e24) => e24.apply(b23), h));
  const D13 = new c19({ view: c25, intersectsLineInfinite: true, attached: false, isDecoration: true }), P12 = s3(f20.visualElements.heightPlaneAngleCutoff), T7 = new c19({ view: c25, attached: false, angleCutoff: P12, isDecoration: true }), V8 = u22.elevationInfo, L6 = o13.fromElevationInfo(V8), S13 = "on-the-ground" === V8.mode || !V8.offset && "absolute-height" !== V8.mode, C6 = new i14(), M16 = r3(1);
  o20.push(l3(() => ({ heightPlane: f20.visualElements.heightPlane, alpha: M16.value }), ({ heightPlane: e24, alpha: t26 }) => e24.apply(T7, t26), h));
  const R14 = r3(1);
  o20.push(l3(() => ({ shadowStyle: f20.visualElements.pointObjects.shadowStyle, alpha: R14.value }), ({ shadowStyle: e24, alpha: t26 }) => e24.apply(D13, t26), h));
  const z14 = () => {
    C6.update(e23);
    let t26 = I4(t17(u22));
    const o21 = S13 && (u22.isDraped || null == t26 || !t26.hasZ);
    let n23 = true;
    if (o21 || null == t26) n23 = false;
    else {
      v4(u22.elevationInfo) && (t26 = t26.clone(), t26.z = 0);
      const e24 = u11(t26, c25.elevationProvider, L6, c25.renderCoordsHelper);
      o6(U8, t26.x, t26.y, e24), n9(U8, t26.spatialReference, U8, c25.renderCoordsHelper.spatialReference), b23.setStartEndFromWorldDownAtLocation(U8), D13.intersectsWorldUpAtLocation = U8;
    }
    const i23 = 2 & C6.grabbingState ? f20.visualElements.laserlineAlphaMultiplier : 1;
    M16.value = i23;
    const l25 = q2(A8);
    !o21 && u22.visible && r27.calculateMapBounds(l25) && n9(P(l25, U8), c25.spatialReference, U8, c25.renderCoordsHelper.spatialReference) ? (T7.heightManifoldTarget = U8, T7.attached = true) : T7.attached = false;
    const s21 = 4 & C6.grabbingState ? f20.visualElements.laserlineAlphaMultiplier : 1;
    R14.value = s21;
    const g15 = n23 && u22.visible && !o21;
    D13.attached = g15, b23.attached = g15;
  };
  o20.push(l3(() => [u22.visible, u22.isDraped], z14), u22.on("committed", z14)), e23.forEachManipulator((e24) => {
    o20.push(e24.events.on("grab-changed", z14));
  }), o20.push(c(D13)), o20.push(c(b23)), o20.push(c(T7)), z14();
}
function T4(e23, o20) {
  const { view: n23, object: i23 } = e23, l25 = new x6({ view: n23, geometry: I4(t17(i23)), elevationInfo: i23.elevationInfo, isDecoration: true });
  return V7(e23, l25, o20), o20.push(c(l25)), l25;
}
function I4(e23) {
  return null == e23 ? null : "point" === e23.type ? e23 : "mesh" === e23.type ? e23.origin.clone() : null;
}
function V7(e23, t26, o20) {
  const { view: n23, object: s21 } = e23, a28 = () => {
    t26.attached = s21.visible;
  }, r27 = new b14({ getTheme: () => n23.effectiveTheme });
  L2(e23, t26, o20), r27.visualElements.pointObjects.outline.apply(t26), o20.push(l3(() => s21.visible, a28, h));
}
function L2(e23, t26, n23) {
  const { view: i23, object: l25 } = e23;
  let s21 = null;
  const a28 = (e24) => {
    null != s21 && (s21.remove(), s21 = null), l25.isDraped && null != e24 && (s21 = S8(i23, e24, () => {
      t26.geometry = e24;
    }));
  }, r27 = () => {
    const e24 = I4(t17(l25));
    null != e24 && v4(l25.elevationInfo) && (e24.z = 0), a28(e24), t26.geometry = e24;
  };
  n23.push(l25.on("committed", r27), u(() => s21)), r27();
}
function S8(e23, t26, o20) {
  const n23 = e23.elevationProvider.spatialReference;
  i4(t26, U8, n23);
  const i23 = U8[0], l25 = U8[1];
  return e23.elevationProvider.on("elevation-change", (e24) => {
    E2(e24.extent, i23, l25) && o20();
  });
}
var U8 = n3();
var A8 = u4();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/visualElementUtils.js
function l17(l25) {
  switch (t17(l25.object)?.type) {
    case "point":
    case "mesh":
      return D7(l25);
    case "polygon":
    case "polyline":
      return E9(l25);
    default:
      return null;
  }
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/config.js
var t19 = 128;
var a20 = 70;
var e18 = 80;
var h17 = 0.02;
var M12 = 54;
var c20 = 100;
var o17 = Math.ceil(a20 / 3 * 2);
var I5 = 160;
var P9 = 0.5;
var i15 = 24;
var l18 = 9;
var n14 = I5 + 30;
var p13 = I5 + 53;
var r23 = 60;
var s17 = 23;
var x9 = 5 * Math.PI / 12;
var b17 = 1 * Math.PI / 3;
var d15 = 10;
var f18 = 0.2;
var g7 = 30;
var j11 = 53;
var k10 = 0.2;
var m13 = 0.3;
var q9 = 200;
var u15 = 3;
var v13 = 1e6;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/Manipulation.js
var t20 = class {
  constructor() {
    this._available = true;
  }
  set location(a28) {
    this._forEachManipulator3D((t26) => t26.location = a28);
  }
  set elevationAlignedLocation(a28) {
    this._forEachManipulator3D((t26) => t26.elevationAlignedLocation = a28);
  }
  set elevationInfo(a28) {
    this._forEachManipulator3D((t26) => t26.elevationInfo = a28);
  }
  get renderLocation() {
    let a28;
    return this._forEachManipulator3D((t26) => {
      a28 || (a28 = t26.renderLocation);
    }), a28;
  }
  set renderLocation(a28) {
    this._forEachManipulator3D((t26) => t26.renderLocation = a28);
  }
  get available() {
    return this._available;
  }
  set available(a28) {
    this._available = a28, this._forEachManipulator3D((t26) => t26.available = a28);
  }
  get hovering() {
    return this.someManipulator((a28) => a28.hovering);
  }
  get grabbing() {
    return this.someManipulator((a28) => a28.grabbing);
  }
  get dragging() {
    return this.someManipulator((a28) => a28.dragging);
  }
  get selected() {
    return this.someManipulator((a28) => a28.selected);
  }
  hasManipulator(a28) {
    return this.someManipulator((t26) => t26 === a28);
  }
  someManipulator(a28) {
    let t26 = false;
    return this.forEachManipulator((o20) => {
      !t26 && a28(o20) && (t26 = true);
    }), t26;
  }
  _forEachManipulator3D(t26) {
    this.forEachManipulator((o20, e23) => {
      o20 instanceof Y && t26(o20, e23);
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/InteractiveManipulation.js
var i16 = class extends t20 {
  constructor() {
    super(...arguments), this._interactive = true;
  }
  get interactive() {
    return this._interactive;
  }
  set interactive(t26) {
    this._interactive !== t26 && (this._interactive = t26), this._updateManipulatorInteractivity();
  }
  _updateManipulatorInteractivity() {
    const t26 = !this.grabbing && this._interactive;
    this.forEachManipulator((i23) => {
      i23.interactive = t26 || i23.grabbing;
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/RenderObject.js
var t21 = class {
  constructor(t26, s21 = 0) {
    this.geometry = t26, this.stateMask = s21;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/dragEventPipeline3D.js
function P10(e23, n23) {
  return U9(e23, () => n23);
}
function R10(e23) {
  return U9(e23, (e24) => e24.plane);
}
function U9(e23, t26) {
  const o20 = n3(), l25 = n3();
  let s21 = false;
  return (c25) => {
    const a28 = t26(c25);
    if ("start" === c25.action) {
      const t27 = g(c25.screenStart, a4(t7.get())), l26 = m12(e23.state.camera, t27, K3);
      null != l26 && (s21 = K2(a28, l26, o20));
    }
    if (!s21) return null;
    const i23 = g(c25.screenEnd, a4(t7.get())), u22 = m12(e23.state.camera, i23, K3);
    return null == u22 ? null : K2(a28, u22, l25) ? { ...c25, renderStart: o20, renderEnd: l25, plane: a28, ray: u22 } : null;
  };
}
function h18(n23, r27, t26 = 0, o20 = null, l25 = null) {
  let s21 = null;
  return (c25) => {
    if ("start" === c25.action && (s21 = n23.sceneIntersectionHelper.intersectElevationFromScreen(f4(c25.screenStart.x, c25.screenStart.y), r27, t26, l25), null != s21 && null != o20 && !$(s21, s21, o20))) return null;
    if (null == s21) return null;
    const a28 = n23.sceneIntersectionHelper.intersectElevationFromScreen(f4(c25.screenEnd.x, c25.screenEnd.y), r27, t26, l25);
    return null != a28 && (null == o20 || $(a28, a28, o20)) ? { ...c25, mapStart: s21, mapEnd: a28 } : null;
  };
}
function M14(e23, n23, r27, t26 = null, o20 = null) {
  return h18(e23, r27, x3(n23, e23, r27), t26, o20);
}
function k11(e23, n23, r27, t26) {
  const o20 = r27.toMap(e23.screenStart);
  return null != o20 ? M14(n23, o20, r27.elevationInfo, t26) : null;
}
function F7(e23, n23) {
  const r27 = B2, t26 = J6, s21 = j3();
  e23.renderCoordsHelper.worldUpAtPosition(n23, r27);
  const c25 = _4(k2(s21), r27, c3(t26, n23, e23.state.camera.eye));
  return _4(c25, c25, r27), U2(n23, c25, s21);
}
function T5(e23, n23, r27) {
  let t26 = null;
  const o20 = new D2();
  return o20.next(P10(e23, F7(e23, n23))).next(A9(e23, n23)).next(q10(e23, r27)).next((e24) => {
    e24.mapEnd.x = e24.mapStart.x, e24.mapEnd.y = e24.mapStart.y, t26 = e24;
  }), (e24) => (t26 = null, o20.execute(e24), t26);
}
function A9(e23, n23) {
  const r27 = n3(), t26 = r10(n23);
  e23.renderCoordsHelper.worldUpAtPosition(n23, r27);
  const o20 = n3(), m15 = n3(), d21 = (o21) => {
    if (c3(o21, o21, n23), e7(r27, o21, o21), "global" === e23.viewingMode) {
      r10(o21) * Math.sign(P2(r27, o21)) < 1e-3 - t26 && c3(o21, g2(o21, r27, 1e-3), n23);
    }
    return u6(o21, o21, n23), o21;
  };
  return (e24) => (e24.renderStart = d21(s6(o20, e24.renderStart)), e24.renderEnd = d21(s6(m15, e24.renderEnd)), e24);
}
function q10(e23, n23) {
  const r27 = e23.renderCoordsHelper;
  return (e24) => {
    const t26 = r27.fromRenderCoords(e24.renderStart, new _({ spatialReference: n23 })), o20 = r27.fromRenderCoords(e24.renderEnd, new _({ spatialReference: n23 }));
    return null != t26 && null != o20 ? { ...e24, mapStart: t26, mapEnd: o20 } : null;
  };
}
var z10 = n7();
var B2 = n3();
var J6 = n3();
var K3 = b7();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/moveUtils.js
function n15(n23, a28, r27) {
  const c25 = (t26, e23) => {
    a28({ action: t26, object: n23, dxScreen: e23.screenDeltaX, dyScreen: e23.screenDeltaY });
  };
  return r27((a29, r28, s21) => (r28.next((t26) => ("start" === t26.action && c25("start", t26), t26)).next(f11(n23)).next((t26) => {
    switch (t26.action) {
      case "start":
      case "update":
        (t26.translationX || t26.translationY || t26.translationZ) && c25("update", t26);
        break;
      case "end":
        c25("end", t26);
    }
    return t26;
  }), { steps: r28, cancel: s21 = s21.next(g4(n23)).next((t26) => (c25("end", { screenDeltaX: 0, screenDeltaY: 0 }), t26)) }));
}
function a21(t26) {
  if (null == t26?.axis) return 1;
  const { mapStart: e23, mapEnd: n23, axis: a28 } = t26, r27 = [n23.x - e23.x, n23.y - e23.y];
  return r27[0] * a28[0] + r27[1] * a28[1] > 0 ? 1 : -1;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYAxisManipulation.js
var R11 = class extends t20 {
  constructor(t26) {
    super(), this._handles = new r(), this._arrowManipulatorInfos = new Array(), this._angle = 0, this._scale = 1, this._radius = a20, this._updateAfterDrag = false, this.events = new i2(), this._tool = t26.tool, this._view = t26.view, this._opaqueMaterial = this._createMaterial(), this._transparentMaterial = this._createMaterial(0.5), null != t26.radius && (this._radius = t26.radius), this._createManipulators(), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  set orthogonalAvailable(t26) {
    this._arrowManipulatorInfos.length >= 3 && (this._arrowManipulatorInfos[1].manipulator.available = t26, this._arrowManipulatorInfos[3].manipulator.available = t26);
  }
  destroy() {
    this._handles = u2(this._handles), this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    }), this._tool = null, this._view = null, this._arrowManipulatorInfos.length = 0;
  }
  forEachManipulator(t26) {
    for (const { manipulator: a28 } of this._arrowManipulatorInfos) t26(a28, 1);
  }
  createManipulatedObjectDragPipeline(t26, a28, r27) {
    if (!a28.operations) return e();
    const i23 = a28.operations.data.spatialReference, o20 = a28.graphic;
    return n15(a28, r27, (r28) => this.createDragPipeline((a29, e23, i24, o21, s21) => ({ steps: e23, cancel: i24 } = t26(a29, e23, i24, o21, s21), r28(a29, e23, i24)), a28.elevationInfo, i23, o20));
  }
  createDragPipeline(t26, a28, r27, e23) {
    return t(this._arrowManipulatorInfos.map(({ manipulator: i23 }, o20) => p8(i23, (i24, s21, n23, l25, p18) => {
      const u22 = s21.next((t27) => ({ ...t27, manipulatorType: 1 })).next(R6(this._view, i24.elevationAlignedLocation)).next(M14(this._view, i24.elevationAlignedLocation, a28, r27, e23)).next(m6(i24.location, this.angle + (o20 + 1) * Math.PI * 0.5)).next(M7());
      t26(i24, u22, n23, l25, p18);
    })));
  }
  get angle() {
    return this._angle;
  }
  set angle(t26) {
    this._angle = t26, this.dragging ? this._updateAfterDrag = true : this._updateManipulatorTransform();
  }
  get displayScale() {
    return this._scale;
  }
  set displayScale(t26) {
    this._scale = t26, this._updateManipulatorTransform();
  }
  get radius() {
    return this._radius;
  }
  set radius(t26) {
    this._radius !== t26 && (this._radius = t26, this._updateManipulators());
  }
  _updateManipulators() {
    for (let t26 = 0; t26 < this._arrowManipulatorInfos.length; t26++) this._updateArrowManipulator(this._arrowManipulatorInfos[t26], t26);
    this._updateManipulatorTransform();
  }
  _updateArrowManipulator({ manipulator: t26, transform: a28 }, r27) {
    const e23 = this._radius / a20, i23 = M12 * e23, o20 = i23 * Math.sqrt(3) / 2, s21 = At(this._opaqueMaterial, o20, i23 / 2, i23 / 2, h17);
    yt(s21, q(f7.get(), o6(c4.get(), 0, -o20 / 3, 0))), t26.renderObjects = [new t21(s21, 2), new t21(s21.instantiate({ material: this._transparentMaterial }), 1)], t26.radius = o20 / 3 * 2 * 1.2;
    const n23 = R(f7.get(), r27 * Math.PI / 2), h24 = q(f7.get(), o6(c4.get(), 0, c20 * e23, 0));
    c2(a28, n23, h24);
  }
  _createManipulators() {
    for (let t26 = 0; t26 < 4; t26++) {
      const a28 = this._createArrowManipulator(t26);
      this._arrowManipulatorInfos.push(a28);
    }
    this._updateManipulatorTransform();
  }
  _updateManipulatorTransform() {
    const t26 = this.angle, a28 = p2(f7.get(), t26, r5(0, 0, 1));
    if (null == a28) return;
    const r27 = d2(f7.get(), o6(c4.get(), this.displayScale, this.displayScale, this.displayScale)), e23 = c2(f7.get(), r27, a28);
    for (const i23 of this._arrowManipulatorInfos) {
      const t27 = c2(f7.get(), e23, i23.transform);
      i23.manipulator.modelTransform = t27;
    }
  }
  _createArrowManipulator(t26) {
    const a28 = new Y({ view: this._view, autoScaleRenderObjects: false, worldOriented: true, focusMultiplier: 1, touchMultiplier: 1, collisionType: { type: "disc", direction: r5(0, 0, 1) } }), r27 = { manipulator: a28, transform: e5() };
    return this._updateArrowManipulator(r27, t26), this._handles.add(a28.events.on("drag", (t27) => {
      this._updateAfterDrag && "end" === t27.action && !this.dragging && (this._updateManipulatorTransform(), this._updateAfterDrag = false);
    })), r27;
  }
  _createMaterial(a28 = 1) {
    const r27 = new m8({ cullFace: 2, renderOccluded: 2, isDecoration: true });
    return this._handles.add(l3(() => u7.toUnitRGBA(this._view.effectiveTheme.accentColor), (t26) => {
      t26[3] *= a28, r27.setParameters({ color: t26 });
    }, h)), r27;
  }
  get test() {
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/snapping/SnapToScene.js
var e19 = class {
  constructor() {
    this._view = null, this._elevationInfo = null, this._lastDragEvent = null, this._next = null, this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t26) {
    if (this._enabled !== t26 && null != this._lastDragEvent && null != this._next) {
      const n23 = this._lastDragEvent.mapEnd, e23 = this._snap(this._lastDragEvent.screenEnd);
      if (null != e23) {
        const s21 = { action: "update", mapStart: this._lastDragEvent.mapStart, mapEnd: true === t26 ? e23 : n23, screenStart: this._lastDragEvent.screenEnd, screenEnd: this._lastDragEvent.screenEnd };
        this._next.execute(s21);
      }
    }
    this._enabled = t26;
  }
  _snap(n23) {
    const e23 = null != this._view ? this._view.toMap(n23, { exclude: [] }) : null;
    return null != e23 && null != this._view && (e23.z = x3(e23, this._view, this._elevationInfo)), e23;
  }
  createDragEventPipelineStep(t26, e23) {
    this._view = t26, this._elevationInfo = e23, this._lastDragEvent = null;
    const s21 = new D2();
    this._next = s21;
    return [(t27) => {
      if (this._lastDragEvent = "end" !== t27.action ? { ...t27 } : null, this._enabled) {
        const n23 = this._snap(t27.screenEnd);
        return null != n23 ? { action: t27.action, mapStart: t27.mapStart, mapEnd: n23, screenStart: t27.screenStart, screenEnd: t27.screenEnd } : null;
      }
      return { action: t27.action, mapStart: t27.mapStart, mapEnd: t27.mapEnd, screenStart: t27.screenStart, screenEnd: t27.screenEnd };
    }, s21];
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYDiscManipulation.js
var D8 = class extends t20 {
  constructor(t26) {
    super(), this._handles = new r(), this._snapToScene = new e19(), this._scale = 1, this._radius = a20, this._view = t26.view, this._tool = t26.tool, this._discMaterial = this._createMaterial(), this._discMaterialTransparent = this._createMaterial(0.5), null != t26.snapToScene && (this.snapToScene = t26.snapToScene), null != t26.radius && (this._radius = t26.radius), this._createManipulator(), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  destroy() {
    this._handles = u2(this._handles), this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    }), this._tool = null, this._view = null, this._manipulator = null;
  }
  forEachManipulator(t26) {
    t26(this._manipulator, 1);
  }
  get displayScale() {
    return this._scale;
  }
  set displayScale(t26) {
    this._scale = t26, this._updateManipulatorTransform();
  }
  get snapToScene() {
    return this._snapToScene.enabled;
  }
  set snapToScene(t26) {
    this._snapToScene.enabled = t26;
  }
  get radius() {
    return this._radius;
  }
  set radius(t26) {
    t26 !== this._radius && (this._radius = t26, this._updateManipulator());
  }
  get discManipulator() {
    return this._manipulator;
  }
  createManipulatedObjectDragPipeline(t26, e23, a28) {
    if (!e23.operations) return e();
    const r27 = e23.graphic, s21 = e23.elevationInfo, o20 = e23.operations.data.spatialReference;
    return n15(e23, a28, (e24) => this.createDragPipeline((i23, a29, r28, s22, o21) => ({ steps: a29, cancel: r28 } = t26(i23, a29, r28, s22, o21), e24(i23, a29, r28)), s21, o20, r27));
  }
  createDragPipeline(t26, e23, i23, a28) {
    const r27 = this._view;
    return p8(this._manipulator, (s21, o20, n23, l25, p18) => {
      const c25 = o20.next(R6(r27, s21.elevationAlignedLocation)).next(M14(r27, s21.elevationAlignedLocation, e23, i23, a28)).next(...this._snapToScene.createDragEventPipelineStep(r27, e23)).next((t27) => ({ ...t27, manipulatorType: 1 })).next(M7());
      t26(s21, c25, n23, l25, p18);
    });
  }
  _updateManipulatorTransform() {
    const t26 = d2(f7.get(), o6(c4.get(), this.displayScale, this.displayScale, this.displayScale));
    this._manipulator.modelTransform = t26;
  }
  _createManipulator() {
    const t26 = this._view;
    this._manipulator = new Y({ view: t26, worldSized: false, autoScaleRenderObjects: false, focusMultiplier: 1, touchMultiplier: 1, collisionType: { type: "disc", direction: r5(0, 0, 1) }, worldOriented: true }), this._updateManipulator();
  }
  _updateManipulator() {
    const t26 = wt(this._discMaterial, h17, 1, t19, r5(0, 0, 1), r5(0, 0, 0));
    t26.transformation = d2(e5(), r5(this._radius, this._radius, this._radius)), this._manipulator.renderObjects = [new t21(t26, 2), new t21(t26.instantiate({ material: this._discMaterialTransparent }), 1)], this._manipulator.radius = e18 * (this._radius / a20);
  }
  _createMaterial(e23 = 1) {
    const i23 = new m8({ cullFace: 2, renderOccluded: 2, isDecoration: true });
    return this._handles.add(l3(() => u7.toUnitRGBA(this._view.effectiveTheme.accentColor), (t26) => {
      t26[3] *= e23, i23.setParameters({ color: t26 });
    }, h)), i23;
  }
  get test() {
  }
};

// node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js
function g8(t26, r27 = 4, o20 = true) {
  const i23 = L(t26), n23 = !(t26[3] < 1);
  return o20 ? new x8({ color: i23, writeDepth: n23, cullFace: 2, renderOccluded: r27, isDecoration: true }) : new m8({ color: i23, writeDepth: n23, cullFace: 2, renderOccluded: r27, isDecoration: true });
}
function d16(t26, r27 = 4) {
  const o20 = L(t26);
  return new m8({ color: o20, writeDepth: true, cullFace: 1, renderOccluded: r27, isDecoration: true });
}
var f19 = Object.freeze({ calloutLength: 40, calloutWidth: 1, discRadius: 27, focusMultiplier: 1.1 });
var h19 = Object.freeze({ autoScaleRenderObjects: false, worldSized: true });
function j12(e23, n23, a28, s21) {
  const u22 = c3(c4.get(), e23, a28), m15 = w11(u22, _4(c4.get(), s21, u22), a28, f7.get());
  h2(m15, m15);
  const p18 = E4(c4.get(), n23, m15);
  return Math.atan2(p18[1], p18[0]);
}
function w11(e23, t26, r27, i23) {
  const l25 = A(c4.get(), e23), a28 = A(c4.get(), t26), s21 = _4(c4.get(), l25, a28);
  return i23[0] = l25[0], i23[1] = l25[1], i23[2] = l25[2], i23[3] = 0, i23[4] = a28[0], i23[5] = a28[1], i23[6] = a28[2], i23[7] = 0, i23[8] = s21[0], i23[9] = s21[1], i23[10] = s21[2], i23[11] = 0, i23[12] = r27[0], i23[13] = r27[1], i23[14] = r27[2], i23[15] = 1, i23;
}
function O7(e23, t26) {
  const r27 = e23.getViewForGraphic(t26);
  return null != r27 && "computeAttachmentOrigin" in r27 ? r27.computeAttachmentOrigin(t26, e23.spatialReference) : null;
}
function b18(e23, t26) {
  const r27 = t26.origin;
  null == r27 ? D9(e23, t17(t26)) : e23.elevationAlignedLocation = r27;
}
function D9(e23, t26) {
  if (null == t26) return;
  const r27 = "mesh" === t26.type ? t26.origin : w5(t26);
  null != r27 && (e23.location = u8(r27));
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveZManipulation.js
var F8 = class extends t20 {
  constructor(t26) {
    super(), this._radius = a20, this.events = new i2(), this._tool = t26.tool, this._view = t26.view;
    const e23 = new b14({ getTheme: () => this._view.effectiveTheme });
    this._settings = e23, null != t26.radius && (this._radius = t26.radius);
    const r27 = this._view.effectiveTheme.accentColor;
    this._materials = { materialUnfocused: g8(C3(r27, 1, 0.25), 1), materialFocused: g8(C3(r27, 1, 0), 1), materialOccludedUnfocused: g8(C3(r27, 0.7, 0), e23.zManipulator.renderOccluded), materialOccludedFocused: g8(C3(r27, 0.85, 0), e23.zManipulator.renderOccluded) }, this._themeHandle = l3(() => this._view.effectiveTheme.accentColor, (t27) => {
      const e24 = C3(t27, 1, 0.25), i23 = C3(t27, 1, 0), r28 = C3(t27, 0.7, 0), a28 = C3(t27, 0.85, 0), { materialUnfocused: o20, materialFocused: s21, materialOccludedUnfocused: n23, materialOccludedFocused: l25 } = this._materials;
      o20.setParameters({ color: e24 }), s21.setParameters({ color: i23 }), n23.setParameters({ color: r28 }), l25.setParameters({ color: a28 });
    }), this._createManipulator(), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  destroy() {
    this._themeHandle = l(this._themeHandle), this._manipulator.applyObjectTransform = R12, this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    });
  }
  forEachManipulator(t26) {
    t26(this._manipulator, 0);
  }
  createManipulatedObjectDragPipeline(t26, e23, i23) {
    if (!e23.operations) return e();
    const a28 = e23.operations.data.spatialReference;
    return n15(e23, i23, (e24) => this.createDragPipeline((i24, r27, a29, o20, s21) => ({ steps: r27, cancel: a29 } = t26(i24, r27, a29, o20, s21), e24(i24, r27, a29)), a28));
  }
  createDragPipeline(t26, e23) {
    const i23 = this._view;
    return p8(this._manipulator, (r27, a28, o20, s21, n23) => {
      const l25 = a28.next((t27) => ({ ...t27, manipulatorType: 0 })).next(T5(i23, r27.renderLocation, e23)).next(M7());
      t26(r27, l25, o20, s21, n23);
    });
  }
  get radius() {
    return this._radius;
  }
  set radius(t26) {
    t26 !== this._radius && (this._radius = t26, this._updateManipulator());
  }
  _updateManipulator() {
    const t26 = this._settings, e23 = this._radius / a20, i23 = t26.zManipulator.height * e23, r27 = t26.zManipulator.coneHeight * e23, a28 = t26.zManipulator.coneWidth * e23, o20 = t26.zManipulator.width * e23, s21 = [r5(0, 0, 0), r5(0, 0, i23)], m15 = [r5(0, 0, 0), r5(0, 0, i23 + r27)], d21 = (() => {
      const t27 = e5();
      return i3(t27, t27, [0, 0, i23]), l5(t27, t27, Math.PI / 2), t27;
    })(), { materialUnfocused: u22, materialFocused: p18, materialOccludedUnfocused: h24, materialOccludedFocused: f20 } = this._materials, j16 = gt(u22, s21, o20 / 2, 16, false), w14 = ft(u22, r27, a28 / 2, 16, false);
    w14.transformation = d21, this._manipulator.renderObjects = [new t21(w14, 1), new t21(j16, 1), new t21(w14.instantiate({ material: p18 }), 2), new t21(j16.instantiate({ material: p18 }), 2), new t21(w14.instantiate({ material: h24 }), 1), new t21(j16.instantiate({ material: h24 }), 1), new t21(w14.instantiate({ material: f20 }), 2), new t21(j16.instantiate({ material: f20 }), 2)], this._manipulator.radius = o20 / 2 + 2, this._manipulator.collisionType = { type: "line", paths: [m15] };
  }
  _createManipulator() {
    const t26 = this._view, e23 = new Y({ view: t26, autoScaleRenderObjects: false, worldSized: false, selectable: false, cursor: "ns-resize", elevationInfo: this.elevationInfo, worldOriented: true, collisionPriority: 1.6 });
    e23.applyObjectTransform = (e24) => {
      const i23 = t26.state.camera, r27 = D10;
      t26.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation, r27);
      const o20 = W(i23.eye, r27), s21 = i23.computeRenderPixelSizeAtDist(o20), n23 = c3(E10, r27, i23.eye);
      A(n23, n23);
      const l25 = H4;
      t26.renderCoordsHelper.worldUpAtPosition(D10, l25);
      const c25 = Math.abs(P2(n23, l25)), _12 = _4(E10, n23, l25), j16 = _4(E10, _12, l25), w14 = r4(c25, 0.01, 1), v17 = 1 - Math.sqrt(1 - w14 * w14) / w14 / i23.fullWidth, g15 = this._settings, M16 = this._radius / a20, O11 = g15.zManipulator.width * M16;
      g2(j16, A(j16, j16), (1 / v17 - 1) * o20 + s21 * O11), e24[12] -= E10[0], e24[13] -= E10[1], e24[14] -= E10[2];
    }, this._manipulator = e23, this._updateManipulator();
  }
  get test() {
  }
};
function C3(i23, r27, a28) {
  const o20 = P3(i23, a28);
  return o20.a *= r27, u7.toUnitRGBA(o20);
}
var D10 = n3();
var E10 = n3();
var H4 = n3();
var R12 = () => {
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveManipulation.js
var p14 = class extends i16 {
  constructor(a28) {
    super(), this._handles = new r();
    const { tool: t26, view: n23, snapToScene: e23, radius: s21 } = a28;
    this._view = n23, this.xyManipulation = new D8({ tool: t26, view: n23, snapToScene: e23, radius: s21 }), this.xyAxisManipulation = new R11({ tool: t26, view: n23, radius: s21 }), this.zManipulation = new F8({ tool: t26, view: n23, radius: s21 }), this.xyManipulation.available = a28.xyAvailable, this.xyAxisManipulation.available = a28.xyAxisAvailable, this.zManipulation.available = a28.zAvailable, this._autoHideXYAxis(), this.forEachManipulator((i23) => this._handles.add(i23.events.on("grab-changed", () => this._updateManipulatorInteractivity())));
  }
  destroy() {
    this._handles.destroy(), this.xyManipulation.destroy(), this.xyAxisManipulation.destroy(), this.zManipulation.destroy();
  }
  createManipulatedObjectDragPipeline(i23, t26, n23) {
    return t([this.xyManipulation.createManipulatedObjectDragPipeline((a28, t27, n24, e23, s21) => i23(0, a28, t27, n24, e23, s21), t26, n23), this.xyAxisManipulation.createManipulatedObjectDragPipeline((a28, t27, n24, e23, s21) => i23(1, a28, t27, n24, e23, s21), t26, n23), this.zManipulation.createManipulatedObjectDragPipeline((a28, t27, n24, e23, s21) => i23(2, a28, t27, n24, e23, s21), t26, n23)]);
  }
  createDragPipeline(i23, t26, n23, e23) {
    return t([this.xyManipulation.createDragPipeline((a28, t27, n24, e24, s21) => i23(0, a28, t27, n24, e24, s21), t26, n23, e23), this.xyAxisManipulation.createDragPipeline((a28, t27, n24, e24, s21) => i23(1, a28, t27, n24, e24, s21), t26, n23, e23), this.zManipulation.createDragPipeline((a28, t27, n24, e24, s21) => i23(2, a28, t27, n24, e24, s21), n23)]);
  }
  set snapToScene(i23) {
    this.xyManipulation.snapToScene = i23;
  }
  set angle(i23) {
    this.xyAxisManipulation.angle = i23;
  }
  set radius(i23) {
    this.xyAxisManipulation.radius = i23, this.xyManipulation.radius = i23, this.zManipulation.radius = i23;
  }
  set displayScale(i23) {
    this.xyManipulation.displayScale = i23, this.xyAxisManipulation.displayScale = i23;
  }
  forEachManipulator(i23) {
    this.xyManipulation.forEachManipulator((a28) => i23(a28, 1)), this.xyAxisManipulation.forEachManipulator((a28) => i23(a28, 1)), this.zManipulation.forEachManipulator((a28) => i23(a28, 0));
  }
  get _xyAxisVisible() {
    const i23 = this.xyManipulation.someManipulator((i24) => i24.focused) || this.xyAxisManipulation.someManipulator((i24) => i24.focused);
    return this._view.inputManager && "touch" === this._view.inputManager.latestPointerInfo?.type || i23;
  }
  _autoHideXYAxis() {
    const i23 = this.xyAxisManipulation, a28 = this.xyManipulation;
    if (has("esri-mobile")) return;
    const n23 = [];
    a28.forEachManipulator((i24) => n23.push(i24)), i23.forEachManipulator((i24) => n23.push(i24));
    const e23 = () => {
      const a29 = [];
      this._xyAxisVisible || i23.forEachManipulator((i24) => a29.push(i24.disableDisplay())), this._handles.remove(u17), this._handles.add(a29, u17);
    };
    for (const t26 of n23) this._handles.add(t26.events.on("focus-changed", e23));
    this._view.inputManager && this._handles.add(f2(() => this._view.inputManager?.latestPointerInfo?.type, e23)), e23();
  }
  static radiusForSymbol(i23) {
    const a28 = null != i23 && "point-3d" === i23.type && i23.symbolLayers;
    return !!a28 && a28.some((i24) => "icon" === i24.type) ? o17 : a20;
  }
};
var u17 = "disable-xy-axis-display";

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYObjectManipulation.js
var n16 = class extends t20 {
  constructor(t26) {
    super(), this._view = t26.view, this._tool = t26.tool, this._object = t26.object, this._manipulator = this._object.createManipulator?.({ selectable: true, cursor: "move" }), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  destroy() {
    this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    }), this._tool = null, this._view = null, this._manipulator = null;
  }
  forEachManipulator(t26) {
    this._manipulator && t26(this._manipulator, 1);
  }
  createManipulatedObjectDragPipeline(t26) {
    return n15(this._object, t26, (t27) => this.createDragPipeline(t27));
  }
  createDragPipeline(e23) {
    if (!this._manipulator) return e();
    const o20 = this._view;
    return p8(this._manipulator, (t26, r27, n23, l25, p18) => {
      const h24 = this._object.operations?.data.spatialReference, c25 = r27.next((t27) => h24 ? t27 : null).next(k11(p18, o20, this._object, h24)).next(z5()).next(M7());
      e23(t26, c25, n23, l25, p18);
    });
  }
};

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateXYTooltipInfo.js
var i17 = class extends r15 {
  constructor(o20) {
    super(o20), this.type = "translate-xy", this.distance = d7;
  }
};
__decorate([m()], i17.prototype, "type", void 0), __decorate([m()], i17.prototype, "distance", void 0), i17 = __decorate([a2("esri.views.interactive.tooltip.infos.TranslateXYTooltipInfo")], i17);

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateZTooltipInfo.js
var i18 = class extends r15 {
  constructor(o20) {
    super(o20), this.type = "translate-z", this.distance = d7;
  }
  clear() {
    this.distance = d7;
  }
};
__decorate([m()], i18.prototype, "type", void 0), __decorate([m()], i18.prototype, "distance", void 0), i18 = __decorate([a2("esri.views.interactive.tooltip.infos.TranslateZTooltipInfo")], i18);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/move/MoveTool3D.js
var B3 = class {
  constructor(t26) {
    this.objects = t26, this.type = "move-start";
  }
};
var G4 = class {
  constructor(t26, o20, e23) {
    this.dx = t26, this.dy = o20, this.objects = e23, this.type = "move";
  }
};
var L3 = class {
  constructor(t26) {
    this.objects = t26, this.type = "move-stop";
  }
};
var N4 = Symbol("manipulators");
var q11 = Symbol("tooltips");
var J7 = class extends r16 {
  constructor(t26) {
    super(t26), this._infos = /* @__PURE__ */ new Map(), this.events = new i2(), this.objects = new O(), this.enableZ = true, this.sketchOptions = new l11(), this.type = "move-3d", this._latestTooltipInfo = null, this._translateTooltipInfo = null, this._translateXYTooltipInfo = null, this._translateZTooltipInfo = null, this._updatingHandles = new h4(), this._moveManipulation = null;
  }
  initialize() {
    const { view: t26 } = this;
    this.tooltip = R5(() => ({ view: t26, options: this.sketchOptions.tooltips })), this.addHandles([this.objects.on("change", (t27) => {
      t27.removed.forEach((t28) => this.removeHandles(t28)), this._updateObjectInfos(t27), this._setupFastTransformUpdates(t27.added), this._refreshManipulators();
    }), this.objects.on("change", () => this._connectTooltips())]);
    const o20 = this.objects.toArray();
    this._updateObjectInfos({ added: o20, removed: [] }), this._setupFastTransformUpdates(o20), this._refreshManipulators(), this._connectTooltips(), this.finishToolCreation();
  }
  destroy() {
    this.tooltip = u2(this.tooltip), this._moveManipulation = u2(this._moveManipulation), this._set("view", null), this._updatingHandles.destroy();
  }
  onInputEvent(t26) {
    if (!this.destroyed && !H3(t26, this.tooltip)) return super.onInputEvent(t26);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get _shouldShowMovePointTooltip() {
    const { objects: t26 } = this;
    if (1 !== t26.length) return false;
    const o20 = t17(t26.at(0))?.type;
    return "point" === o20 || "mesh" === o20;
  }
  get activeTooltipInfo() {
    return this._shouldShowMovePointTooltip ? this._movePointTooltipInfo : this._latestTooltipInfo;
  }
  reset() {
  }
  _updateObjectInfos({ added: t26, removed: o20 }) {
    for (const e23 of t26) {
      if (0 !== e12(e23)) continue;
      const t27 = new Q4(e23);
      this._infos.set(e23, t27);
    }
    for (const e23 of o20) this._infos.delete(e23);
  }
  _setupFastTransformUpdates(t26) {
    for (const o20 of t26) {
      const t27 = this._infos.get(o20);
      this.addHandles(r20(t27.object), o20);
    }
  }
  _refreshManipulators() {
    if (this.removeHandles(N4), this._moveManipulation = u2(this._moveManipulation), this.manipulators.removeAll(), 0 === this._infos.size) return;
    const t26 = Array.from(this._infos.values());
    this._createManipulators(t26), this._createVisualElements(t26), this._updateMoveManipulation(t26);
  }
  _createManipulators(t26) {
    for (const o20 of t26) {
      const e23 = o20.object;
      o20.manipulationXY = new n16({ tool: this, view: this.view, object: e23 }), o20.manipulationXY.forEachManipulator((t27) => {
        this.addHandles([t27.events.on("immediate-click", (t28) => {
          this.events.emit("immediate-click", { ...t28, object: e23 }), t28.stopPropagation();
        }), t27.events.on("grab-changed", ({ action: t28 }) => {
          "start" === t28 ? this._showTooltip(0) : this._hideTooltip();
        })], N4);
      }), this.addHandles(o20.manipulationXY.createDragPipeline((o21, e24, i23, n23) => this._buildDragEventPipeline(t26, 0, o21, e24, i23, n23)), N4);
    }
    this._createMoveManipulation(t26);
  }
  _createMoveManipulation(t26) {
    const o20 = new p14({ tool: this, view: this.view, snapToScene: false, xyAvailable: true, xyAxisAvailable: true, zAvailable: true, radius: 1 === t26.length ? p14.radiusForSymbol(t26[0].object.graphic?.symbol) : a20 });
    this._moveManipulation = o20, o20.elevationInfo = { mode: "absolute-height", offset: 0 }, o20.forEachManipulator((t27) => {
      this.addHandles(t27.events.on("immediate-click", (e24) => {
        const i24 = this.objects.at(0);
        !o20.zManipulation.hasManipulator(t27) && 1 === this.objects.length && i24 && this.events.emit("immediate-click", { ...e24, object: i24 }), e24.stopPropagation();
      }), N4);
    });
    const e23 = (t27) => (o21) => {
      this.addHandles([o21.events.on("focus-changed", ({ action: o22 }) => {
        "focus" === o22 ? this._showTooltip(t27) : this._hideTooltip();
      }), o21.events.on("grab-changed", () => {
        this._latestTooltipInfo && (this._latestTooltipInfo.distance = d7);
      })], N4);
    };
    this._moveManipulation.xyManipulation.forEachManipulator(e23(0)), this._moveManipulation.xyAxisManipulation.forEachManipulator(e23(1)), this._moveManipulation.zManipulation.forEachManipulator(e23(2));
    const i23 = () => this._updateMoveManipulation(t26);
    for (const a28 of t26) this.addHandles([a28.object.on("committed", i23), l3(() => a28.object.visible, i23)], N4);
    const n23 = t26[t26.length - 1];
    this.addHandles(n23.object.on("committed", () => this._updateMoveManipulationAngle(n23)), N4);
    const { object: s21 } = n23, { operations: l25 } = s21;
    if (l25) {
      const e24 = s21.graphic;
      this.addHandles(o20.createDragPipeline((o21, e25, i24, n24, s22) => this._buildDragEventPipeline(t26, o21, e25, i24, n24, s22), s21.elevationInfo, l25.data.spatialReference, e24), N4);
    }
    this._updateMoveManipulationAngle(n23);
  }
  _createVisualElements(t26) {
    for (const o20 of t26) {
      const e23 = o20.object, i23 = l17({ view: this.view, object: e23, forEachManipulator: (t27) => {
        o20.manipulationXY?.forEachManipulator(t27), this._moveManipulation?.forEachManipulator(t27);
      }, onManipulatorsChanged: () => e() });
      null != i23 && (o20.geometryRepresentation = i23.visualElement, o20.geometryRepresentation instanceof R9 && this.addHandles([o20.geometryRepresentation.events.on("attachment-origin-changed", () => {
        o20.object.isDraped || this._updateMoveManipulation(t26);
      }), l3(() => o20.object.isDraped, () => this._updateMoveManipulation(t26))], N4), this.addHandles(i23, N4));
    }
  }
  _updateMoveManipulationAngle(t26) {
    this._moveManipulation && (this._moveManipulation.angle = r22(t17(t26.object)));
  }
  _updateMoveManipulation(t26) {
    const o20 = t9(0, 0, 0, this.view.spatialReference);
    let e23 = 0, i23 = false;
    const n23 = this._moveManipulation;
    if (n23) {
      for (const n24 of t26) {
        if (!n24.object.visible) continue;
        this.enableZ && o16(n24.object.operations, n24.object.elevationInfo) && (i23 = true);
        const t27 = n24.geometryRepresentation instanceof R9 && !n24.object.isDraped ? n24.geometryRepresentation.attachmentOrigin : n24.object.origin;
        if (null != t27) {
          const { x: i24, y: n25, z: s21 } = t27;
          o20.x += i24, o20.y += n25, s21 && (o20.z ??= 0, o20.z += s21), e23++;
        }
      }
      e23 > 0 ? (o20.x /= e23, o20.y /= e23, o20.z ??= 0, o20.z /= e23, n23.location = o20, n23.xyManipulation.available = true, n23.xyAxisManipulation.available = true, n23.zManipulation.available = i23) : n23.available = false;
    }
  }
  _buildDragEventPipeline(t26, o20, e23, i23, n23, s21) {
    const a28 = [], l25 = [];
    let r27 = null, p18 = null;
    const c25 = () => {
      for (const t27 of a28) t27.dragging = false;
      a28.length = 0, l25.length = 0, r27 = null, p18 = null, this._moveManipulation && (this._moveManipulation.interactive = true);
    };
    if (1 === t26.length && 0 === o20) {
      const o21 = t26[0].object;
      ({ steps: i23, cancel: n23 } = this._buildSnappingPipelineSteps(o21, o21.elevationInfo, i23, n23, s21));
    }
    return n23 = n23.next((t27) => p18?.(t27)).next(() => (l25.length && this.events.emit("move-stop", new L3(l25)), this.destroyed || c25(), null)), { steps: i23 = i23.next((o21) => {
      if ("start" === o21.action) {
        a28.length = 0, l25.length = 0;
        for (const o22 of t26) o22.dragging || !o22.manipulationXY?.hasManipulator(e23) && o22.manipulationXY?.grabbing || (a28.push(o22), l25.push(o22.object), o22.dragging = true);
        if (0 !== l25.length && (this._moveManipulation && (this._moveManipulation.interactive = false), r27 = S2(l25), p18 = v7(l25), this._emitRecordUndo(), this.events.emit("move-start", new B3(l25)), this.destroyed)) return null;
      }
      return 0 !== l25.length ? o21 : null;
    }).next((t27) => r27?.(t27)).next((t27) => (this._updateMoveTooltip(o20, t27), t27)).next((t27) => {
      switch (t27.action) {
        case "start":
        case "update":
          if (t27.translationX || t27.translationY || t27.translationZ) {
            const o21 = this.view.toScreen(t27.mapStart), e24 = this.view.toScreen(t27.mapEnd);
            if (!o21 || !e24) return null;
            const i24 = e24.x - o21.x, n24 = e24.y - o21.y;
            if (this.events.emit("move", new G4(i24, n24, l25)), this.destroyed) return null;
          }
          break;
        case "end":
          if (this.events.emit("move-stop", new L3(l25)), this.destroyed) return null;
          c25();
      }
      return null;
    }), cancel: n23 };
  }
  _connectTooltips() {
    let t26;
    if (this.removeHandles(q11), this._shouldShowMovePointTooltip) {
      const o20 = this.objects.at(0), { events: e23 } = this;
      this._movePointTooltipInfo ??= new i10({ viewType: this.view.type, sketchOptions: this.sketchOptions });
      const i23 = { onBeforeUpdate: () => this.endDrag(), onMoveStart: () => {
        this._emitRecordUndo(), e23.emit("move-start", new B3([o20]));
      }, onMove: () => e23.emit("move", new G4(0, 0, [o20])), onMoveStop: () => e23.emit("move-stop", new L3([o20])), onRotateStart: () => {
      }, onRotate: () => {
      }, onRotateStop: () => {
      }, onScaleStart: () => {
      }, onScale: () => {
      }, onScaleStop: () => {
      } };
      t26 = f17(this.tooltip, o20, () => ({ sketchOptions: this.sketchOptions, activeTooltipInfo: this._movePointTooltipInfo, callbacks: i23 }));
    } else t26 = l3(() => this.sketchOptions.tooltips.effectiveEnabled ? this._latestTooltipInfo : null, (t27) => {
      this.tooltip.info = t27;
    }, w2);
    this.addHandles(t26, q11);
  }
  _showTooltip(t26) {
    this._shouldShowMovePointTooltip || this._updateMoveTooltip(t26);
  }
  _hideTooltip() {
    this._shouldShowMovePointTooltip || (this.tooltip?.clear(), this._latestTooltipInfo = null);
  }
  _updateMoveTooltip(t26, o20) {
    if (this._shouldShowMovePointTooltip) return;
    const { sketchOptions: e23, autoLengthMeasurementUtils: i23 } = this;
    switch (t26) {
      case 0:
        this._latestTooltipInfo = this._translateTooltipInfo ??= new i11({ sketchOptions: e23 }), W4(this._latestTooltipInfo, o20, (t27, o21) => i23.autoDistanceBetweenPoints2D(K4(t27), K4(o21)));
        break;
      case 1:
        this._latestTooltipInfo = this._translateXYTooltipInfo ??= new i17({ sketchOptions: e23 }), W4(this._latestTooltipInfo, o20, (t27, e24) => m5(i23.autoDistanceBetweenPoints2D(K4(t27), K4(e24)), a21(o20)));
        break;
      case 2:
        this._latestTooltipInfo = this._translateZTooltipInfo ??= new i18({ sketchOptions: e23 }), W4(this._latestTooltipInfo, o20, z4);
    }
    this._latestTooltipInfo.sketchOptions = e23;
  }
  _emitRecordUndo() {
    const t26 = this.objects.toArray().map((t27) => t27.createUndoRecord?.()).filter(N);
    t26.length > 0 && this.events.emit("record-undo", { updates: t26 });
  }
  _buildSnappingPipelineSteps(t26, o20, e23, i23, n23) {
    const s21 = t17(t26);
    if (null == s21 || "point" !== s21.type && "mesh" !== s21.type) return { steps: e23, cancel: i23 };
    const a28 = ("point" === s21.type ? s21 : s21.origin).clone(), l25 = new e11({ elevationInfo: o20, pointer: n23, editGeometryOperations: g3.fromGeometry(a28, this.view.state.viewingMode), visualizer: new w7(), excludeFeature: t26.graphic }), r27 = this.snappingManager, { snappingStep: p18, cancelSnapping: c25 } = f12({ snappingContext: l25, snappingManager: r27, updatingHandles: this._updatingHandles });
    return i23 = i23.next(c25), { steps: e23 = e23.next((o21) => {
      a28.z = E5(this.view, a28, t26.elevationInfo, { mode: "absolute-height", offset: 0 });
      return { ...o21, snapOrigin: l25.coordinateHelper.pointToVector(a28) };
    }).next(...p18), cancel: i23 };
  }
};
__decorate([m({ constructOnly: true, nonNullable: true })], J7.prototype, "view", void 0), __decorate([m({ constructOnly: true })], J7.prototype, "autoLengthMeasurementUtils", void 0), __decorate([m()], J7.prototype, "objects", void 0), __decorate([m({ constructOnly: true, nonNullable: true })], J7.prototype, "enableZ", void 0), __decorate([m({ constructOnly: true, type: l11 })], J7.prototype, "sketchOptions", void 0), __decorate([m({ constructOnly: true })], J7.prototype, "snappingManager", void 0), __decorate([m()], J7.prototype, "type", void 0), __decorate([m()], J7.prototype, "updating", null), __decorate([m()], J7.prototype, "_latestTooltipInfo", void 0), __decorate([m()], J7.prototype, "_shouldShowMovePointTooltip", null), __decorate([m()], J7.prototype, "activeTooltipInfo", null), J7 = __decorate([a2("esri.views.3d.interactive.editingTools.move.MoveTool3D")], J7);
var K4 = w(_);
var Q4 = class {
  constructor(t26) {
    this.object = t26, this.geometryRepresentation = null, this.manipulationXY = null, this.dragging = false;
  }
};
function W4(t26, o20, e23) {
  if (null == o20 || "end" === o20.action) return void (t26.distance = d7);
  const { mapStart: i23, mapEnd: n23 } = o20, s21 = e23(i23, n23);
  t26.distance = null != s21 ? s21 : d7;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/edgeOffsetUtils.js
function U10(e23, r27, o20) {
  const t26 = "on-the-ground" === o20.mode ? 1 : 0;
  return new M6(e23, t26, r27, 0);
}
function H5(e23, r27, o20) {
  const t26 = n3();
  if (!e23.renderCoordsHelper.toRenderCoords(r27, t26)) return null;
  const n23 = w12(e23, r27, k2(o20.plane)), i23 = w12(e23, r27, o20.edgeDirection);
  if (null == n23 || null == i23) return null;
  const c25 = _4(n3(), n23, i23);
  return U2(t26, c25, j3());
}
function w12(e23, r27, o20) {
  const t26 = t9(r27.x + o20[0], r27.y + o20[1], r27.z + o20[2], r27.spatialReference), n23 = n3(), s21 = n3();
  return e23.renderCoordsHelper.toRenderCoords(r27, n23) && e23.renderCoordsHelper.toRenderCoords(t26, s21) ? K(s21, n23, s21) : null;
}
function T6(e23, r27, o20) {
  const t26 = k2(e23), c25 = K(n3(), r27, o20), l25 = _4(n3(), c25, t26), a28 = _4(n3(), c25, l25);
  return n6(c25[0], c25[1], c25[2], 0, l25[0], l25[1], l25[2], 0, a28[0], a28[1], a28[2], 0, 0, 0, 0, 1);
}
function q12(e23, r27, t26) {
  const n23 = t26.projectToRenderScreen(e23, y()), s21 = t26.projectToRenderScreen(r27, y());
  return null != n23 && null != s21 ? j2(c3(n23, n23, s21)) : 0;
}
function A10(e23, o20, t26, n23) {
  const { elevationInfo: s21, operations: i23 } = t26;
  if (!i23 || !e23) return null;
  const c25 = n23.manipulator.elevationAlignedLocation, l25 = x3(c25, o20, s21), a28 = o20.sceneIntersectionHelper.intersectElevationFromScreen(f4(e23.x, e23.y), s21, l25);
  return a28 && $(a28, a28, i23.data.spatialReference) ? a28 : null;
}
function E11(r27, o20, n23, { data: { coordinateHelper: s21, spatialReference: i23 } }) {
  const c25 = v5(r27, "meters"), l25 = ae(i23), m15 = Math.sign(c25 * n23.selectedArrow), h24 = N3(i23), R14 = k2(n23.plane), v17 = s21.pointToXYZ(o20), x13 = n3();
  q3(x13, v17, R14, m15 * (I6 / l25));
  const C6 = c25 * n23.selectedArrow / l25;
  if (!h24 || !n9(v17, i23, v17, h24) || !n9(x13, i23, x13, h24)) return C6;
  const U14 = new b12();
  if (q5(U14, v17, x13, h24), j6(x13, v17, U14.azimuth, c25, h24), !n9(x13, h24, x13, i23)) return C6;
  const H8 = x13[0] - o20.x, w14 = x13[1] - o20.y, T7 = Math.sqrt(H8 * H8 + w14 * w14) * m15, [q15, A12] = R14, E13 = Math.sqrt(q15 * q15 + A12 * A12);
  return 0 === E13 ? 0 : T7 / E13;
}
var I6 = 10;

// node_modules/@arcgis/core/views/interactive/tooltip/infos/ReshapeEdgeOffsetTooltipInfo.js
var a22 = class extends r15 {
  constructor(t26) {
    super(t26), this.type = "reshape-edge-offset", this.distance = F4({ lockable: false }), this.area = Q3({ visible: false }), this.totalLength = U4({ visible: false });
  }
  get allFields() {
    return [this.distance, this.area, this.totalLength];
  }
};
__decorate([m()], a22.prototype, "type", void 0), __decorate([m()], a22.prototype, "distance", void 0), __decorate([m()], a22.prototype, "area", void 0), __decorate([m()], a22.prototype, "totalLength", void 0), __decorate([m()], a22.prototype, "allFields", null), a22 = __decorate([a2("esri.views.interactive.tooltip.infos.ReshapeEdgeOffsetTooltipInfo")], a22);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/reshapeTooltipUtils3D.js
function j13(t26, e23) {
  const o20 = e23?.type;
  return { edgeOffset: new a22({ sketchOptions: t26, viewType: o20 }), movePoint: new i10({ sketchOptions: t26, viewType: o20 }), selectedVertex: new p10({ sketchOptions: t26, viewType: o20 }), translate: new i11({ sketchOptions: t26, viewType: o20 }), translateXY: new i17({ sketchOptions: t26, viewType: o20 }), translateZ: new i18({ sketchOptions: t26, viewType: o20 }) };
}
function I7(e23, o20, s21) {
  function r27() {
    const t26 = s21(), e24 = t26.sketchOptions.tooltips.effectiveEnabled ? t26.activeTooltipInfo : null;
    return { ...t26, activeTooltipInfo: e24 };
  }
  let c25 = false;
  function p18(t26) {
    c25 || (c25 = true, t26(), c25 = false);
  }
  function f20(t26) {
    p18(() => {
      D11(o20, t26), e23.info = t26.activeTooltipInfo;
    });
  }
  return t([l3(r27, f20, w2), l3(() => {
    const t26 = r27(), { activeTooltipInfo: e24 } = t26;
    if (e24 && "key" in e24) return { context: t26, activeTooltipInfo: e24, key: e24.key, geometry: t17(o20) };
  }, (t26, e24) => {
    t26 && e24 && e24.key !== t26.key && p18(() => O8(o20, t26.context));
  }, U), o20.on("committed", () => f20(r27())), C(e23, { onBeforePaste: () => {
    c25 = true;
  }, onAfterPaste: () => {
    O8(o20, r27()), c25 = false;
  } })]);
}
function O8(t26, { activeTooltipInfo: e23, selectedVertexManipulatorInfo: o20, callbacks: n23 }) {
  if (!e23) return;
  n23.onBeforeReshape();
  const i23 = t17(t26);
  switch (i23?.type) {
    case "mesh":
      "move-point" === e23.type && v12(e23, i23.origin, t26, n23);
      break;
    case "point":
      "move-point" === e23.type && v12(e23, i23, t26, n23);
      break;
    case "polyline":
    case "polygon":
      "selected-vertex" === e23.type && b19(e23, o20, t26, n23);
  }
}
function b19(t26, e23, o20, n23) {
  if (!e23) return;
  const { dx: i23, dy: a28, dz: s21 } = F3(t26, e23.manipulator.location);
  0 === i23 && 0 === a28 && 0 === s21 || (n23.onReshapeStart(), o20.operations?.moveVertices([e23.handle], i23, a28, s21, 0), n23.onReshape(), n23.onReshapeStop());
}
function D11(t26, e23) {
  const { activeTooltipInfo: o20, selectedVertexManipulatorInfo: n23, sketchOptions: i23 } = e23;
  if (o20) switch (o20.sketchOptions = i23, o20?.type) {
    case "move-point":
      d14(o20, t26);
      break;
    case "selected-vertex":
      L4(o20, n23, t26, e23);
  }
}
function L4(t26, e23, o20, { automaticAreaMeasurementUtils: n23, automaticLengthMeasurementUtils: i23 }) {
  if (!t26 || "selected-vertex" !== t26.type) return;
  const a28 = e23?.manipulator.location;
  t26.setLocationFromPoint(a28), h16(t26, a28, o20);
  const s21 = o20.operations?.data.geometry;
  switch (s21?.type) {
    case "polygon":
      t26.geometryType = "polygon", t26.totalLength.visible = false, t26.area.actual = n23.autoArea2D(s21);
      break;
    case "polyline":
      t26.geometryType = "polyline", t26.totalLength.actual = i23.autoLength2D(s21), t26.area.visible = false;
  }
}
var U11 = w(_);
function x10(t26, o20, { sketchOptions: n23, tooltipInfos: i23, automaticLengthMeasurementUtils: a28 }) {
  let s21 = null;
  switch (t26) {
    case 0:
      s21 = i23.translate, M15(s21, o20, (t27, e23) => a28.autoDistanceBetweenPoints2D(U11(t27), U11(e23)));
      break;
    case 1:
      s21 = i23.translateXY, M15(s21, o20, (t27, n24) => m5(a28.autoDistanceBetweenPoints2D(U11(t27), U11(n24)), a21(o20)));
      break;
    case 2:
      s21 = i23.translateZ, M15(s21, o20, z4);
  }
  return s21.sketchOptions = n23, s21;
}
function M15(t26, e23, n23) {
  if (null != e23 && "end" !== e23.action) {
    const { mapStart: i23, mapEnd: a28 } = e23, s21 = n23(i23, a28);
    t26.distance = null != s21 ? s21 : d7;
  } else t26.distance = d7;
}
function P11({ operations: t26 }, n23, { sketchOptions: i23, tooltipInfos: a28, automaticAreaMeasurementUtils: s21, automaticLengthMeasurementUtils: r27 }) {
  const l25 = a28.edgeOffset;
  if (l25.distance.committed = null, null != n23 && null != n23.signedDistance && "end" !== n23.action && null != t26) {
    const o20 = t26.data.coordinateHelper, { start: i24, end: a29 } = n23.operation.clampedStartAndEnd(n23.mapEnd), s22 = r27.autoDistance2D(i24, a29, o20.spatialReference), c26 = Math.sign(n23.signedDistance * n23.operation.selectedArrow);
    l25.distance.actual = null != s22 ? m5(s22, c26) : null;
  } else l25.distance.actual = d7;
  const c25 = t26?.data.geometry;
  switch (l25.area.actual = null, l25.area.visible = false, l25.totalLength.actual = null, l25.totalLength.visible = false, c25?.type) {
    case "polygon":
      l25.area.actual = s21.autoArea2D(c25), l25.area.visible = true;
      break;
    case "polyline":
      l25.totalLength.actual = r27.autoLength2D(c25), l25.totalLength.visible = true;
  }
  return l25.sketchOptions = i23, l25;
}

// node_modules/@arcgis/core/views/input/IViewEvents.js
var d17 = { Left: 0, Middle: 1, Right: 2, Back: 3, Forward: 4, Undefined: -1 };

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeOperation.js
var xe = Symbol();
var ye = class extends b {
  get _operations() {
    return this.object.operations;
  }
  constructor(e23) {
    super(e23), this._selectedIndex = 0, this._manipulatorHandles = new r(), this._manipulatorInfos = [], this._numGrabbing = 0, this._numDragging = 0, this._reshapeEventState = 0, this._pendingEdgeOffsetInfo = null, this._updatingHandles = new h4(), this._recreatingManipulators = false, this._settings = new b14({ getTheme: () => this.view.effectiveTheme }), this.events = new i2(), this.activeTooltipInfo = null, this._vertexLaserLineVisualElement = null, this._tooltipCallbacks = { onBeforeReshape: () => this.tool.endDrag(), onReshapeStart: () => this._updateEventState(2), onReshape: () => this.events.emit("reshape", { type: "reshape", object: this.object }), onReshapeStop: () => this._updateEventState(0, { forceEnd: true }), onMoveStart: () => this._updateEventState(1), onMove: () => this.events.emit("move", { type: "move", object: this.object, dx: 0, dy: 0 }), onMoveStop: () => this._updateEventState(0, { forceEnd: true }) };
  }
  initialize() {
    const { view: e23 } = this, t26 = this._settings.manipulators, i23 = t26.vertex;
    this.tooltipInfos = j13(this._sketchOptions, e23), this._vertexManipulatorMaterial = g8(H2(i23.color), i23.renderOccluded), this._vertexManipulatorOutlineMaterial = d16(H2(i23.outlineColor), i23.renderOccluded), this._vertexManipulatorHoverOutlineMaterial = d16(H2(i23.hoverOutlineColor), i23.renderOccluded);
    const n23 = t26.edge;
    this._edgeManipulatorMaterial = g8(H2(n23.color), n23.renderOccluded), this._edgeManipulatorOutlineMaterial = d16(H2(n23.outlineColor), n23.renderOccluded);
    const o20 = t26.edgeOffset;
    this._edgeOffsetManipulatorMaterial = g8(H2(o20.color), o20.renderOccluded, false), this._edgeOffsetManipulatorHoverMaterial = g8(H2(o20.hoverColor), o20.renderOccluded, false);
    const s21 = t26.selected;
    this._selectedManipulatorMaterial = g8(H2(s21.color), s21.renderOccluded), this._selectedManipulatorOutlineMaterial = d16(H2(s21.outlineColor), s21.renderOccluded), this._selectedManipulatorHoverOutlineMaterial = d16(H2(s21.hoverOutlineColor), s21.renderOccluded), this.tooltip = R5(() => ({ view: e23, options: this._sketchOptions.tooltips })), this.addHandles([l3(() => {
      const e24 = this._settings.manipulators;
      return { vertexSettings: e24.vertex, edgeSettings: e24.edge, edgeOffsetSettings: e24.edgeOffset, selectedSettings: e24.selected };
    }, ({ vertexSettings: e24, edgeSettings: t27, edgeOffsetSettings: i24, selectedSettings: a28 }) => {
      e24.applyColor(this._vertexManipulatorMaterial), e24.applyOutline(this._vertexManipulatorOutlineMaterial), e24.applyHoverOutline(this._vertexManipulatorHoverOutlineMaterial), t27.applyColor(this._edgeManipulatorMaterial), t27.applyOutline(this._edgeManipulatorOutlineMaterial), i24.applyColor(this._edgeOffsetManipulatorMaterial), i24.applyHover(this._edgeOffsetManipulatorHoverMaterial), a28.applyColor(this._selectedManipulatorMaterial), a28.applyOutline(this._selectedManipulatorOutlineMaterial), a28.applyHoverOutline(this._selectedManipulatorHoverOutlineMaterial);
    }), l3(() => this.object.visible, (e24) => {
      for (const t27 of this._manipulatorInfos) t27.manipulator.available = e24, Se(t27) && (t27.edgeManipulator.available = e24);
    }), l3(() => this._numGrabbing + this._numDragging === 0, (e24) => this._toggleAutoHideManipulators(e24)), l3(() => ({ labels: this._segmentLabels, enabled: this._sketchOptions.labels.enabled, edgeOffsetEnabled: this.enableEdgeOffset }), ({ labels: e24, enabled: t27, edgeOffsetEnabled: i24 }) => {
      null != e24 && (e24.visible = t27, e24.edgeDistance = i24 ? "far" : "default");
    }, h), I7(this.tooltip, this.object, () => this._tooltipsContext), l3(() => this.tooltip.mode, (e24, t27) => {
      "input" === t27 && "input" !== e24 && this._resetTooltip();
    }), a3(() => this._operations, "vertex-update", (e24) => this._updateManipulatorPositions(e24.vertices), { onListenerAdd: () => this._recreateManipulators() }), a3(() => this._operations?.data, "change", (e24) => {
      "undo" !== e24.operation && "redo" !== e24.operation || this._recreateManipulators();
    })]);
  }
  destroy() {
    this._removeManipulators(), this._updatingHandles.destroy(), this._segmentLabels = u2(this._segmentLabels), this.tooltip = u2(this.tooltip);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get manipulators() {
    return this.tool.manipulators;
  }
  get view() {
    return this.tool.view;
  }
  get automaticAreaMeasurementUtils() {
    return this.tool.automaticAreaMeasurementUtils;
  }
  get automaticLengthMeasurementUtils() {
    return this.tool.automaticLengthMeasurementUtils;
  }
  get object() {
    return this.tool.object;
  }
  get enableZShape() {
    return this.tool.enableZShape;
  }
  get enableDeleteVertices() {
    return this.tool.enableDeleteVertices;
  }
  get enableZVertex() {
    return this.tool.enableZVertex;
  }
  get autoHideManipulators() {
    return this.tool.autoHideManipulators;
  }
  get enableMoveObject() {
    return this.tool.enableMoveObject;
  }
  get enableMidpoints() {
    return this.tool.enableMidpoints;
  }
  get enableEdgeOffset() {
    return this.tool.enableEdgeOffset;
  }
  get _sketchOptions() {
    return this.tool.sketchOptions;
  }
  get _accentColor() {
    return this.view.effectiveTheme.accentColor;
  }
  enterInputModeIfAvailable(e23) {
    return "key-down" === e23.type && e23.key === d8.enterInputMode && ("reshape-edge-offset" === this.activeTooltipInfo?.type ? this._enterInputModeDuringEdgeOffset(e23) : !!H3(e23, this.tooltip) && (this.tool.endDrag(), true));
  }
  removeSelectedVertices() {
    const e23 = this._manipulatorInfos.filter((e24) => e24.manipulator.selected && "vertex" === e24.type);
    return this._removeVertices(e23), e23.length;
  }
  onManipulatorSelectionChanged() {
    this.events.emit("manipulators-changed");
  }
  _removeManipulators() {
    this._manipulatorHandles.removeAll(), this._moveManipulation = u2(this._moveManipulation), this._objectMoveManipulation = u2(this._objectMoveManipulation), this.manipulators.removeAll(), this._manipulatorInfos = [], this._numGrabbing = 0, this._numDragging = 0;
  }
  _createManipulators(e23) {
    if (null == this._operations) return;
    const t26 = this.object.elevationInfo;
    for (const { vertices: i23, segments: a28, index: n23 } of this._operations.data.parts) {
      const o20 = e23?.byPartIndex.get(n23);
      for (const e24 of i23) {
        const i24 = o20?.has(e24.index);
        this._createVertexOrEdgeManipulator(e24, t26, i24);
      }
      for (const e24 of a28) "line" === e24.type && this._createVertexOrEdgeManipulator(e24, t26);
    }
    this._createObjectMoveManipulation(), this._createMoveManipulation(t26), this._createVisualElements();
  }
  recordUndo(e23) {
    this._operations?.recordUndo(e23);
  }
  get canRedo() {
    return this._operations?.canRedo ?? false;
  }
  get canUndo() {
    return this._operations?.canUndo ?? false;
  }
  redo() {
    return this._operations?.redo();
  }
  undo() {
    return this.events.emit("undo"), this._operations?.undo();
  }
  _recreateManipulators() {
    if (!this._recreatingManipulators) {
      if (this._recreatingManipulators = true, this._removeManipulators(), this._resetTooltip(), this._operations && this._segmentLabels?.context?.editGeometryOperations === this._operations || (this._segmentLabels = u2(this._segmentLabels)), this._createManipulators(), !this._segmentLabels && this._operations) {
        const e23 = this._sketchOptions.labels;
        this._segmentLabels = new a16({ context: { view: this.view, editGeometryOperations: this._operations, elevationInfo: this.object.elevationInfo, labelOptions: e23, automaticLengthMeasurementUtils: this.automaticLengthMeasurementUtils }, visible: e23.enabled });
      }
      this._recreatingManipulators = false;
    }
  }
  _perObjectManipulatorDragAction(e23, t26) {
    if ("end" === t26.action) return t26;
    let i23 = 0;
    const a28 = [], n23 = this._manipulatorInfos.some((e24) => "vertex" === e24.type && e24.manipulator.selected), o20 = 1 === e23 && n23;
    for (const s21 of this._manipulatorInfos) "vertex" === s21.type && (s21.manipulator.grabbing || o20 && !s21.manipulator.selected || a28.push(s21), i23++);
    this._moveVertices(a28, t26);
    if (a28.length === i23) {
      if (this._updateEventState(1), this.destroyed) return t26;
      this.events.emit("move", { type: "move", dx: t26.screenDeltaX, dy: t26.screenDeltaY, object: this.object });
    } else {
      if (this._updateEventState(2), this.destroyed) return t26;
      this.events.emit("reshape", { type: "reshape", object: this.object });
    }
    return t26;
  }
  _toggleAutoHideManipulators(e23) {
    this.autoHideManipulators && (e23 ? this.removeHandles(xe) : this.tool.manipulators.forEach(({ manipulator: e24 }) => {
      const t26 = e24.disableDisplay?.();
      t26 && this.addHandles(t26, xe);
    }));
  }
  _isMultiVertexSelection() {
    return this._manipulatorInfos.reduce((e23, t26) => "vertex" === t26.type && t26.manipulator.selected ? e23 + 1 : e23, 0) > 1;
  }
  _perVertexManipulatorDragAction(e23) {
    if (this._updateEventState(2), this.destroyed) return;
    const { mapDeltaX: t26, mapDeltaY: i23, mapDeltaZ: a28 } = e23;
    if (!t26 && !i23 && !a28) return;
    const n23 = [];
    for (const o20 of this._manipulatorInfos) "vertex" === o20.type && (o20.manipulator.selected && !o20.manipulator.grabbing || o20 === e23.info) && n23.push(o20);
    this._moveVertices(n23, e23, 1), this.events.emit("reshape", { type: "reshape", object: this.object });
  }
  _updateEventState(e23, t26 = {}) {
    if (e23 === this._reshapeEventState) return false;
    switch (e23) {
      case 0:
        if (!t26.forceEnd && (0 !== this._numGrabbing || 0 !== this._numDragging)) return false;
        switch (this._reshapeEventState) {
          case 1:
            this.events.emit("move", { type: "move-stop", dx: 0, dy: 0, object: this.object });
            break;
          case 2:
            this.events.emit("reshape", { type: "reshape-stop", object: this.object });
        }
        break;
      case 1:
        switch (this._reshapeEventState) {
          case 0:
            this.events.emit("move", { type: "move-start", dx: 0, dy: 0, object: this.object });
            break;
          case 2:
            this.events.emit("reshape", { type: "reshape-stop", object: this.object }), this.destroyed || this.events.emit("move", { type: "move-start", dx: 0, dy: 0, object: this.object });
        }
        break;
      case 2:
        switch (this._reshapeEventState) {
          case 0:
            this.events.emit("reshape", { type: "reshape-start", object: this.object });
            break;
          case 1:
            this.events.emit("move", { type: "move-stop", dx: 0, dy: 0, object: this.object }), this.destroyed || this.events.emit("reshape", { type: "reshape-start", object: this.object });
        }
    }
    if (this.destroyed) return false;
    const i23 = this._reshapeEventState !== e23;
    return this._reshapeEventState = e23, i23;
  }
  _createObjectMoveManipulation() {
    const { tool: e23, view: t26, object: i23, _operations: a28 } = this;
    if (a28) {
      if (this._objectMoveManipulation = new n16({ tool: e23, view: t26, object: i23 }), this.enableMoveObject) {
        let e24 = null;
        this._manipulatorHandles.add(this._objectMoveManipulation.createDragPipeline((t27, i24, n23) => {
          i24.next((e25) => this._trackNumDragging(e25)).next((t28) => ("start" === t28.action && (e24 = a28.createUndoGroup()), t28)).next((e25) => this._perObjectManipulatorDragAction(0, e25)).next((e25) => (this._updateTranslateObjectTooltip(0, e25), e25)).next((t28) => {
            "end" === t28.action && (this._resetTooltip(), e24 = l(e24));
          }), n23.next(() => this._onDragCancel(true, () => e24 = l(e24)));
        })), this._objectMoveManipulation.forEachManipulator((e25) => this._manipulatorHandles.add(this._watchAndUpdateGrabState(e25, false)));
      } else this._objectMoveManipulation.forEachManipulator((e24) => {
        e24.grabbable = false, e24.cursor = null;
      });
      this._objectMoveManipulation.forEachManipulator((e24) => this._manipulatorHandles.add(e24.events.on("immediate-click", (e25) => {
        this._manipulatorInfos.some((e26) => e26.manipulator.selected) ? this._clearSelection() : this.events.emit("immediate-click", { ...e25, object: this.object }), e25.stopPropagation();
      })));
    }
  }
  _createMoveManipulation(e23) {
    const { object: t26, tool: i23, view: a28, _operations: n23 } = this;
    if (!n23) return;
    this._moveManipulation = new p14({ tool: i23, view: a28, xyAvailable: true, xyAxisAvailable: true, zAvailable: this.enableZShape && o16(t26.operations, t26.elevationInfo), snapToScene: false, radius: p14.radiusForSymbol(t26.graphic?.symbol) }), this._moveManipulation.forEachManipulator((e24) => this.addHandles([e24.events.on("immediate-click", (t27) => {
      this._moveManipulation.zManipulation.hasManipulator(e24) || this._manipulatorInfos.some((e25) => e25.manipulator.selected) || this.events.emit("immediate-click", { ...t27, object: this.object }), t27.stopPropagation();
    }), this._watchAndUpdateGrabState(e24, false)]));
    const o20 = (e24) => (t27) => {
      this.addHandles([t27.events.on("focus-changed", ({ action: t28 }) => {
        "focus" === t28 ? this._updateTranslateTooltip(e24) : this._resetTooltip();
      })]);
    };
    this._moveManipulation.xyManipulation.forEachManipulator(o20(0)), this._moveManipulation.xyAxisManipulation.forEachManipulator(o20(1)), this._moveManipulation.zManipulation.forEachManipulator(o20(2)), this._moveManipulation.elevationInfo = { mode: "absolute-height", offset: 0 };
    const s21 = n23.data.spatialReference;
    this.addHandles([this._moveManipulation.createDragPipeline((a29, o21, s22, r27, l25) => {
      const { snappingStep: p18, cancelSnapping: h24 } = f12({ predicate: (e24) => !!e24.info, snappingManager: i23.snappingManager, snappingContext: new e11({ editGeometryOperations: n23, elevationInfo: e23, pointer: l25, excludeFeature: t26.graphic, visualizer: new w7() }), updatingHandles: this._updatingHandles, useZ: false });
      return r27 = r27.next((e24) => (this._onDragCancel(), e24)).next(h24), { steps: s22 = s22.next((e24) => this._trackNumDragging(e24)).next((e24) => {
        const t27 = this._manipulatorInfos.filter((e25) => "vertex" === e25.type && e25.manipulator.selected);
        return 1 === e24.manipulatorType && 1 === t27.length ? { ...e24, info: t27[0], snapOrigin: t27[0].handle.pos } : e24;
      }).next(U5(this.view, e23, t26.graphic ?? void 0)).next(...p18).next(z5()).next((e24) => this._perObjectManipulatorDragAction(1, e24)).next((e24) => (this._updateTranslateTooltip(a29, e24), e24)), cancel: r27 };
    }, e23, s21, t26.graphic), l3(() => t26.visible, () => this._updateMoveManipulationPosition(), h), t26.on("committed", () => {
      this._recreatingManipulators || this._updateMoveManipulationPosition();
    }), l3(() => t26.isDraped, (e24) => {
      this._updateMoveManipulationPosition();
      const t27 = "align-move-manipulation";
      e24 ? this.addHandles(this.view.elevationProvider.on("elevation-change", () => this._updateMoveManipulationPosition()), t27) : this.removeHandles(t27);
    }, h)]);
  }
  _createVisualElements() {
    const { object: e23, view: t26 } = this, i23 = l17({ view: t26, object: e23, forEachManipulator: (e24) => {
      if (!this.destroyed && !this._recreatingManipulators) {
        this._objectMoveManipulation.forEachManipulator(e24), this._moveManipulation.forEachManipulator(e24);
        for (const t27 of this._manipulatorInfos) e24(t27.manipulator, 1);
      }
    }, onManipulatorsChanged: (e24) => this.events.on("manipulators-changed", e24) });
    null != i23 && (this._outlineVisualElement = i23.visualElement instanceof R9 ? i23.visualElement : null);
    const a28 = this._outlineVisualElement;
    if (null != a28) {
      const t27 = () => {
        e23.isDraped || this._updateMoveManipulationPosition();
      };
      this._manipulatorHandles.add(a3(() => a28.events, "attachment-origin-changed", t27, { onListenerAdd: t27 }));
    }
    this._manipulatorHandles.add(i23);
  }
  _createEdgeOffsetManipulator(e23, t26 = this.object.elevationInfo) {
    const i23 = this.view, a28 = this._operations;
    if (e23.part.vertices.length <= 2 || !a28) return null;
    const n23 = a28.data.spatialReference, o20 = this._settings.manipulators.edgeOffset, r27 = o20.size / 2, l25 = r27 + o20.collisionPadding, p18 = r27 / l25, h24 = p18 / 2, d21 = p18 * Math.sqrt(3) / 2, { height: u22, offset: c25 } = o20, m15 = this._edgeOffsetManipulatorMaterial;
    if (!this._edgeOffsetManipulatorGeometryInside) {
      const e24 = At(m15, d21, h24, h24, u22, c25);
      this._edgeOffsetManipulatorGeometryInside = e24;
    }
    if (!this._edgeOffsetManipulatorGeometryOutside) {
      const e24 = At(m15, -d21, h24, h24, u22, -c25);
      this._edgeOffsetManipulatorGeometryOutside = e24;
    }
    const g15 = [new t21(this._edgeOffsetManipulatorGeometryInside.instantiate(), 1), new t21(this._edgeOffsetManipulatorGeometryInside.instantiate({ material: this._edgeOffsetManipulatorHoverMaterial }), 2), new t21(this._edgeOffsetManipulatorGeometryOutside.instantiate(), 1), new t21(this._edgeOffsetManipulatorGeometryOutside.instantiate({ material: this._edgeOffsetManipulatorHoverMaterial }), 2)], f20 = new Y({ view: i23, renderObjects: g15, elevationInfo: "on-the-ground" !== t26.mode || h8(this.object.graphic?.symbol) ? { mode: "absolute-height", offset: 0 } : t26, worldOriented: false, focusMultiplier: 1, radius: l25, available: this.object.visible, collisionType: { type: "disc", direction: r5(0, 0, 1) }, collisionPriority: 1, metadata: { deleting: false }, location: Ie(n23) }), _12 = new Y({ view: i23, worldSized: true, worldOriented: false, available: this.object.visible, collisionPriority: -10, cursor: this.enableMoveObject ? "move" : "default", metadata: { deleting: false }, location: Ie(n23) }), v17 = { manipulator: f20, handle: e23, locationUpdateHandle: null, type: "edge", selectedIndex: 0, edgeManipulator: _12, visibilityHandle: null };
    this._autoHideEdgeOffsetManipulator(v17, o20.minSquaredEdgeLength);
    const M16 = () => this._updateEdgeOffsetManipulator(v17);
    M16(), v17.locationUpdateHandle = t([e23.leftVertex, e23.rightVertex].map((e24) => {
      const t27 = this._getManipulatorInfoFromHandle(e24);
      return t27?.manipulator.events.on("location-update", M16);
    }));
    const b23 = (e24) => {
      this._manipulatorInfos.some((e25) => e25.manipulator.selected) ? this._clearSelection() : this.events.emit("immediate-click", { ...e24, object: this.object }), e24.stopPropagation();
    };
    return this._manipulatorHandles.add([v17.locationUpdateHandle, this._watchAndUpdateGrabState(f20, true), this._watchAndUpdateGrabState(_12, true), p8(f20, this._createEdgeOffsetPipeline(v17, t26, a28)), p8(_12, this._createEdgePipeline(v17, t26, a28)), _12.events.on("immediate-click", b23), f20.events.on("immediate-click", b23), f20.events.on("focus-changed", () => this._resetTooltip()), f20.events.on("grab-changed", ({ screenPoint: e24, action: t27 }) => {
      v17.grabMapPoint = "start" === t27 ? A10(e24, this.view, this.object, v17) : null;
    })], f20), this._manipulatorInfos.push(v17), this.manipulators.addMany([f20, _12]), this.events.emit("manipulators-changed"), v17;
  }
  _autoHideEdgeOffsetManipulator(e23, t26) {
    const i23 = e23.manipulator, a28 = e23.edgeManipulator, n23 = () => {
      e23.visibilityHandle = l(e23.visibilityHandle);
      const n24 = this._getManipulatorInfoFromHandle(e23.handle.leftVertex), o20 = this._getManipulatorInfoFromHandle(e23.handle.rightVertex), l25 = null != n24 && null != o20 && q12(n24.manipulator.renderLocation, o20.manipulator.renderLocation, this.view.state.camera) < t26;
      (!i23.focused && !a28.focused || l25) && (i23.grabbable = !l25, a28.grabbable = !l25, e23.visibilityHandle = t([i23.disableDisplay(), e(() => {
        i23.grabbable = true, a28.grabbable = this.enableMoveObject;
      })]));
    };
    this._manipulatorHandles.add([i23.events.on("focus-changed", n23), a28.events.on("focus-changed", n23), e(() => {
      l(e23.visibilityHandle), a28.metadata.deleting = true, this.manipulators.remove(a28);
    })], i23), n23();
  }
  _updateEdgeOffsetManipulator(e23) {
    if (!this._operations) return;
    this._updateManipulatorPosition(e23);
    const { coordinateHelper: t26 } = this._operations.data, i23 = H5(this.view, e23.manipulator.elevationAlignedLocation, U10(t26, e23.handle, e23.manipulator.elevationInfo)), a28 = this._getManipulatorInfoFromHandle(e23.handle.leftVertex), n23 = this._getManipulatorInfoFromHandle(e23.handle.rightVertex);
    if (null == a28 || null == n23) return;
    const o20 = a28.manipulator.renderLocation, s21 = n23.manipulator.renderLocation, r27 = null != i23 ? T6(i23, o20, s21) : r8;
    e23.manipulator.modelTransform = r27, e23.edgeManipulator.elevationAlignedLocation = e23.manipulator.elevationAlignedLocation, e23.edgeManipulator.modelTransform = r27;
    const l25 = r10(c3(He, o20, s21)) / 2;
    e23.edgeManipulator.collisionType = { type: "line", paths: [[[-l25, 0, 0], [l25, 0, 0]]] };
  }
  _createEdgePipeline(e23, t26, i23) {
    return (a28, n23, o20, s21) => {
      if ("touch" === s21) {
        this._createEdgeOffsetPipeline(e23, t26, i23)(a28, n23, o20);
      } else if (this.enableMoveObject) {
        const e24 = this.object.graphic, s22 = i23.data.spatialReference, { elevationAlignedLocation: r27 } = a28;
        n23.next((e25) => this._trackNumDragging(e25)).next(R6(this.view, r27)).next(M14(this.view, r27, t26, s22, e24)).next(M7()).next(z5()).next((e25) => this._perObjectManipulatorDragAction(0, e25)).next((e25) => (this._updateTranslateObjectTooltip(0, e25), e25)).next((e25) => {
          "end" === e25.action && this._resetTooltip();
        }), o20.next(() => this._onDragCancel(!a28.metadata.deleting));
      }
    };
  }
  _createEdgeOffsetPipeline(e23, t26, i23) {
    return (a28, n23, o20) => {
      const s21 = this._pendingEdgeOffsetInfo;
      if (s21?.manipulatorInfo === e23 && "drag" !== s21.mode) return void o20.execute({ action: "cancel" });
      this._clearSelection();
      const { initializeStep: r27, cleanup: l25 } = this._initializeEdgeOffset(e23, t26, i23, o20), p18 = this._applyEdgeOffsetStep(e23);
      n23.next((e24) => this._trackNumDragging(e24)).next(R6(this.view, a28.elevationAlignedLocation)).next(r27).next(R10(this.view)).next(q10(this.view, i23.data.spatialReference)).next(z5()).next(Oe()).next((e24) => this._pendingEdgeOffsetInfo ? e24 : p18(e24)).next((e24) => {
        "end" !== e24.action || this._pendingEdgeOffsetInfo || l25();
      }), o20.next(() => {
        this._exitEdgeOffsetInputMode(), a28.metadata.deleting || (l25(), this._onDragCancel());
      });
    };
  }
  _initializeEdgeOffset(e23, t26, i23, a28) {
    const { view: n23, object: o20 } = this, r27 = U10(i23.data.coordinateHelper, e23.handle, t26), l25 = i23.createUndoGroup(), p18 = H5(n23, e23.manipulator.elevationAlignedLocation, r27);
    let d21;
    this._splitEdgesBeforeEdgeOffset(e23, r27), this._selectEdgeOffsetArrow(e23, r27);
    const u22 = () => {
      this._cleanEdgeOffsetCollapsedEdges(e23, i23), d21 = l(d21);
    }, c25 = this.events.on("undo", u22);
    return d21 = t([this._initializeEdgeOffsetVisualElement(e23, o20, t26, i23), l25, c25, this._connectEdgeOffsetTooltip(e23, r27, i23, () => {
      a28.execute({ action: "cancel" });
    })]), { initializeStep: (e24) => null == r27 || null == p18 ? (u22(), null) : { ...e24, operation: r27, plane: p18 }, cleanup: u22 };
  }
  _initializeEdgeOffsetVisualElement(e23, t26, i23, n23) {
    const o20 = () => new y2({ paths: [[e23.handle.leftVertex.pos, e23.handle.rightVertex.pos]], spatialReference: n23.data.spatialReference }), r27 = new R9({ view: this.view, isDraped: t26.isDraped, geometry: o20(), elevationInfo: i23, width: this._settings.visualElements.lineObjects.outline.width, attached: false, isDecoration: true }), p18 = t([l3(() => ({ color: this._accentColor, draped: t26.isDraped }), ({ color: e24, draped: t27 }) => {
      r27.color = H2(e24), r27.isDraped = t27;
    }, w2), t26.on("committed", () => {
      r27.geometry = o20();
    }), c(r27)]);
    return r27.attached = true, p18;
  }
  _applyEdgeOffsetStep(e23) {
    return (t26) => (this.destroyed || null == t26.operation || !this._operations || (this._updateEventState(2), null == t26.signedDistance ? this._resetTooltip() : ((t26.mapDeltaX || t26.mapDeltaY || t26.mapDeltaZ) && (this._offsetEdge(e23, t26.operation, t26.signedDistance), this.events.emit("reshape", { type: "reshape", object: this.object })), this._updateEdgeOffsetTooltip(t26))), t26);
  }
  _cleanEdgeOffsetCollapsedEdges(e23, t26) {
    const i23 = e23.handle.leftVertex.leftSegment?.leftVertex, a28 = e23.handle.leftVertex, n23 = e23.handle.rightVertex.rightSegment?.rightVertex, o20 = e23.handle.rightVertex, s21 = t26.data.coordinateHelper, r27 = this.view.pixelSizeAt(s21.vectorToDehydratedPoint(a28.pos), s21.spatialReference), l25 = [];
    if (i23 && s21.distance(i23.pos, a28.pos) < Ve) {
      const e24 = this._getManipulatorInfoFromHandle(a28);
      null != e24 && l25.push(e24);
    }
    if (s21.distance(a28.pos, o20.pos) < r27 || n23 && s21.distance(n23.pos, o20.pos) < Ve) {
      const e24 = this._getManipulatorInfoFromHandle(o20);
      null != e24 && l25.push(e24);
    }
    l25.length && this._removeVertices(l25);
  }
  _enterInputModeDuringEdgeOffset(e23) {
    const t26 = this._findActiveEdgeOffsetManipulatorInfo();
    return !!t26 && (!!H3(e23, this.tooltip) && (t26.manipulator.dragging ? (this._pendingEdgeOffsetInfo = { manipulatorInfo: t26, mode: "drag" }, true) : (this._clearSelection(), this._pendingEdgeOffsetInfo = { manipulatorInfo: t26, mode: "hover" }, this._connectEdgeOffsetTooltipOnHover(t26), true)));
  }
  _exitEdgeOffsetInputMode() {
    this.tooltip && (this._pendingEdgeOffsetInfo = null, this._resetTooltip(), this.tooltip.exitInputMode());
  }
  _findActiveEdgeOffsetManipulatorInfo() {
    return this._manipulatorInfos.filter(Se).find(({ manipulator: e23 }) => e23.hovering || e23.grabbing || e23.dragging);
  }
  _connectEdgeOffsetTooltipOnHover(e23) {
    const { _operations: t26, object: i23 } = this;
    if (!t26) return;
    const { elevationInfo: a28 } = i23, n23 = U10(t26.data.coordinateHelper, e23.handle, a28);
    this._selectEdgeOffsetArrow(e23, n23), this.addHandles([this._initializeEdgeOffsetVisualElement(e23, i23, a28, t26), this._connectEdgeOffsetTooltip(e23, n23, t26, () => {
      this.removeHandles(n23), this._exitEdgeOffsetInputMode();
    })], n23);
  }
  _splitEdgesBeforeEdgeOffset(e23, t26) {
    if (t26.requiresSplitEdgeLeft) {
      const t27 = this._getManipulatorInfoFromHandle(e23.handle.leftVertex.leftSegment);
      null != t27 && this._splitEdgeManipulator(t27, 1);
    }
    if (t26.requiresSplitEdgeRight) {
      const t27 = this._getManipulatorInfoFromHandle(e23.handle.rightVertex.rightSegment);
      null != t27 && this._splitEdgeManipulator(t27, 0);
    }
  }
  _selectEdgeOffsetArrow(e23, t26) {
    const i23 = e23.grabMapPoint ?? A10(this.view.inputManager?.latestPointerInfo?.location, this.view, this.object, e23);
    i23 && t26.selectArrowFromStartPoint(i23);
  }
  _connectEdgeOffsetTooltip(e23, t26, i23, a28) {
    const n23 = () => this.tooltipInfos.edgeOffset.distance.actual, o20 = (n24) => {
      a28(), queueMicrotask(() => {
        this.view.focus();
        const a29 = i23.createUndoGroup();
        this._tooltipCallbacks.onReshapeStart?.(), this._splitEdgesBeforeEdgeOffset(e23, t26), this._offsetEdge(e23, t26, E11(n24, e23.manipulator.location, t26, i23)), this._tooltipCallbacks.onReshape?.(), this._tooltipCallbacks.onReshapeStop?.(), this._cleanEdgeOffsetCollapsedEdges(e23, i23), a29.remove();
      });
    }, r27 = () => {
      const e24 = n23();
      null != e24 ? o20(e24) : a28();
    };
    return t([f2(() => this.tooltip && !this.tooltip.focused, () => r27(), U), this.tooltip.on("discard", a28), this.tooltip.on("commit", (e24) => {
      "commit-and-exit" === e24.type && r27();
    })]);
  }
  _createVertexOrEdgeManipulator(e23, t26 = this.object.elevationInfo, i23 = false) {
    const a28 = this.view, n23 = this._operations, o20 = this._settings;
    if (!n23) return null;
    const r27 = n23.data.type, l25 = n23.data.spatialReference;
    if ("line" === e23.type) {
      if (this.enableEdgeOffset) return this._createEdgeOffsetManipulator(e23, t26);
      if (!this.enableMidpoints) return null;
    }
    if (null == this._vertexManipulatorGeometry || null == this._vertexManipulatorOutlineGeometry) {
      const { size: e24, outlineSize: t27 } = Ee(o20.manipulators.vertex);
      this._vertexManipulatorGeometry = lt(this._vertexManipulatorMaterial, e24, 16, 16), this._vertexManipulatorOutlineGeometry = lt(this._vertexManipulatorOutlineMaterial, t27, 16, 16);
    }
    if (null == this._edgeManipulatorGeometry || null == this._edgeManipulatorOutlineGeometry) {
      const { size: e24, outlineSize: t27 } = Ee(o20.manipulators.edge);
      this._edgeManipulatorGeometry = lt(this._edgeManipulatorMaterial, e24, 16, 16), this._edgeManipulatorOutlineGeometry = lt(this._edgeManipulatorOutlineMaterial, t27, 16, 16);
    }
    const p18 = "point" === r27 || "mesh" === r27 ? [] : [new t21(this._vertexManipulatorGeometry.instantiate(), 4 | De), new t21(this._vertexManipulatorOutlineGeometry.instantiate(), 5 | De), new t21(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._vertexManipulatorHoverOutlineMaterial }), 6 | De), new t21(this._vertexManipulatorGeometry.instantiate({ material: this._selectedManipulatorMaterial }), 8), new t21(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._selectedManipulatorOutlineMaterial }), 9), new t21(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._selectedManipulatorHoverOutlineMaterial }), 10)];
    this.enableMidpoints && p18.push(new t21(this._edgeManipulatorGeometry.instantiate({ material: this._vertexManipulatorMaterial }), 6 | Te), new t21(this._edgeManipulatorOutlineGeometry.instantiate({ material: this._vertexManipulatorHoverOutlineMaterial }), 6 | Te), new t21(this._edgeManipulatorGeometry.instantiate(), 5 | Te), new t21(this._edgeManipulatorOutlineGeometry.instantiate(), 5 | Te));
    const d21 = new Y({ view: a28, renderObjects: p18, elevationInfo: t26, focusMultiplier: 1, touchMultiplier: 1, available: this.object.visible, metadata: { deleting: false }, location: Ie(l25) });
    d21.selected = i23, this._setTypeSpecificManipulatorSettings(d21, e23, t26);
    const u22 = "vertex" === e23.type ? { manipulator: d21, handle: e23, type: "vertex", selectedIndex: 0 } : { manipulator: d21, handle: e23, locationUpdateHandle: null, type: "edge", selectedIndex: 0 };
    if (this._manipulatorInfos.push(u22), this.manipulators.add(d21), this._updateManipulatorPosition(u22), "edge" === u22.type) {
      const e24 = [];
      for (const t27 of [u22.handle.leftVertex, u22.handle.rightVertex]) {
        const i24 = this._getManipulatorInfoFromHandle(t27);
        null != i24 && e24.push(i24.manipulator.events.on("location-update", () => this._updateManipulatorPosition(u22)));
      }
      u22.locationUpdateHandle = t(e24), this._manipulatorHandles.add(u22.locationUpdateHandle, d21);
    }
    this._manipulatorHandles.add(this._watchAndUpdateGrabState(d21, true), d21);
    const c25 = p8(d21, (e24, i24, o21, s21) => {
      let r28 = null;
      const { snappingStep: p19, cancelSnapping: d22 } = f12({ predicate: () => !this._isMultiVertexSelection(), snappingManager: this.tool.snappingManager, snappingContext: new e11({ editGeometryOperations: n23, elevationInfo: t26, pointer: s21, excludeFeature: this.object.graphic, visualizer: new w7() }), updatingHandles: this._updatingHandles, useZ: false });
      o21 = o21.next((t27) => (this._onDragCancel(!e24.metadata.deleting, () => r28 = l(r28)), t27)).next(d22);
      const { elevationAlignedLocation: c26 } = e24, m15 = this.object.graphic ?? void 0;
      i24.next((e25) => this._trackNumDragging(e25)).next((e25) => {
        if ("start" === e25.action && n23 && (r28 = n23.createUndoGroup()), "edge" === u22.type) {
          const t27 = this._splitEdgeManipulator(u22);
          return { ...e25, info: t27, snapOrigin: t27.handle.pos };
        }
        return { ...e25, info: u22, snapOrigin: u22.handle.pos };
      }).next(R6(a28, c26)).next(M14(a28, c26, t26, l25, m15)).next(U5(a28, t26, m15)).next(...p19).next(z5()).next((e25) => {
        this._perVertexManipulatorDragAction(e25), "end" === e25.action && (r28 = l(r28)), this._resetTooltip();
      });
    });
    return this._manipulatorHandles.add([c25, d21.events.on("immediate-click", (e24) => this._manipulatorClickCallback(e24, u22)), d21.events.on("select-changed", () => {
      u22.selectedIndex = ++this._selectedIndex, this._updateMoveManipulationPosition(), this._resetTooltip();
    }), d21.events.on("focus-changed", () => {
      this._resetTooltip();
    })], d21), this.events.emit("manipulators-changed"), u22;
  }
  _trackNumDragging(e23) {
    switch (e23.action) {
      case "start":
        this._numDragging++;
        break;
      case "end":
        this._numDragging--;
    }
    return e23;
  }
  _onDragCancel(e23 = true, t26) {
    switch (this._numDragging--, e23 && this.undo(), this.tool.snappingManager?.doneSnapping(), this._resetTooltip(), this._reshapeEventState) {
      case 0:
        break;
      case 1:
        this.events.emit("move", { type: "move", dx: 0, dy: 0, object: this.object });
        break;
      case 2:
        this.events.emit("reshape", { type: "reshape", object: this.object });
    }
    t26?.(), this.destroyed || this._updateEventState(0);
  }
  _setTypeSpecificManipulatorSettings(e23, t26, i23) {
    const a28 = this._settings;
    switch (t26.type) {
      case "vertex": {
        e23.state = De, e23.selectable = true, e23.cursor = "move", e23.collisionPriority = 2;
        const { size: t27, collisionPadding: n23 } = a28.manipulators.vertex;
        e23.radius = t27 / 2 + n23, e23.elevationInfo = i23;
        const o20 = this._operations?.data.type;
        e23.interactive = null != o20 && "point" !== o20 && "mesh" !== o20;
        break;
      }
      case "line": {
        e23.state = Te, e23.selectable = false, e23.cursor = "copy", e23.collisionPriority = -1;
        const { size: t27, collisionPadding: n23 } = a28.manipulators.edge;
        e23.radius = t27 / 2 + n23, e23.elevationInfo = "on-the-ground" !== i23.mode || h8(this.object.graphic?.symbol) ? { mode: "absolute-height", offset: 0 } : i23;
        break;
      }
    }
  }
  _watchAndUpdateGrabState(e23, t26) {
    return e23.events.on("grab-changed", (i23) => {
      this._onGrabStateChanged(e23, t26, i23.action, i23.pointerType);
    });
  }
  _onGrabStateChanged(e23, t26, i23, a28 = "mouse") {
    if (!this._recreatingManipulators) {
      if ("start" === i23) t26 && this._updateSelection(e23), this._numGrabbing++;
      else if (this._numGrabbing--, this._updateEventState(0), this.destroyed) return;
      this._moveManipulation.interactive = !this._numGrabbing, ("touch" !== a28 || this.enableEdgeOffset) && (this._manipulatorInfos.forEach((e24) => {
        const { manipulator: t27 } = e24, i24 = this._operations?.data.type;
        t27.interactive = t27.grabbing || !this._numGrabbing && null != i24 && "point" !== i24 && "mesh" !== i24, Se(e24) && (e24.edgeManipulator.interactive = e24.edgeManipulator.grabbing || !this._numGrabbing);
      }), this._objectMoveManipulation.forEachManipulator((e24) => {
        e24.interactive = e24.grabbing || !this._numGrabbing;
      }));
    }
  }
  _clearSelection() {
    for (const e23 of this._manipulatorInfos) e23.manipulator.grabbing || (e23.manipulator.selected = false);
    this._pendingEdgeOffsetInfo = null;
  }
  _updateSelection(e23) {
    e23.grabbing && !e23.selected && e23.selectable && (this._clearSelection(), e23.selected = true, this.events.emit("manipulators-changed"));
  }
  _removeManipulator(e23) {
    null != e23 && (e23.manipulator.metadata.deleting = true, this.manipulators.remove(e23.manipulator), this._manipulatorHandles.remove(e23.manipulator), j(this._manipulatorInfos, e23), this.events.emit("manipulators-changed"), this._resetTooltip());
  }
  _getManipulatorInfoFromHandle(e23) {
    return this._manipulatorInfos.find((t26) => t26.handle === e23);
  }
  _updateManipulatorPositions(e23) {
    for (const t26 of e23) this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(t26));
  }
  _updateManipulatorPosition(e23) {
    const t26 = this._operations;
    if (null != e23 && t26) {
      if ("vertex" === e23.type) e23.manipulator.location = t26.data.coordinateHelper.vectorToDehydratedPoint(e23.handle.pos, we), e23.manipulator.grabbing && null != this._vertexLaserLineVisualElement && (this._vertexLaserLineVisualElement.visualElement.intersectsWorldUpAtLocation = e23.manipulator.renderLocation);
      else if ("edge" === e23.type) {
        const i23 = this._getManipulatorInfoFromHandle(e23.handle.leftVertex), a28 = this._getManipulatorInfoFromHandle(e23.handle.rightVertex);
        if (null == i23 || null == a28) return;
        const n23 = i23.manipulator, o20 = a28.manipulator;
        if ("on-the-ground" === e23.manipulator.elevationInfo?.mode) {
          const i24 = n23.location, a29 = o20.location, s21 = 0.5, r27 = i24.x + s21 * (a29.x - i24.x), l25 = i24.y + s21 * (a29.y - i24.y), p18 = i24.hasZ && a29.hasZ ? 0 : void 0;
          e23.manipulator.location = t9(r27, l25, p18, t26.data.spatialReference);
        } else I(He, n23.renderLocation, o20.renderLocation, 0.5), e23.manipulator.renderLocation = He;
      }
    }
  }
  _splitEdgeManipulator(e23, t26 = 0.5) {
    const i23 = this._operations, a28 = i23.splitSegment(e23.handle, t26).createdVertex;
    e23.locationUpdateHandle = l(e23.locationUpdateHandle);
    const n23 = this.object.elevationInfo;
    let o20;
    this.enableEdgeOffset ? (this._removeManipulator(e23), o20 = this._createVertexOrEdgeManipulator(a28)) : (o20 = e23, o20.handle = a28, o20.type = "vertex", this._setTypeSpecificManipulatorSettings(e23.manipulator, e23.handle, n23)), a28.leftSegment && "line" === a28.leftSegment.type && this._createVertexOrEdgeManipulator(a28.leftSegment), a28.rightSegment && "line" === a28.rightSegment.type && this._createVertexOrEdgeManipulator(a28.rightSegment), this._updateManipulatorPosition(o20), this.enableEdgeOffset || this._resetTooltip(), this._updateSelection(e23.manipulator);
    const s21 = this._updateEventState(2), r27 = i23.data.coordinateHelper.vectorToArray(o20.handle.pos), l25 = i23.data.parts.indexOf(a28.part);
    return this.events.emit("vertex-add", { type: "vertex-add", object: this.object, vertices: [{ coordinates: r27, componentIndex: l25, vertexIndex: a28.index }], added: r27 }), s21 && this._updateEventState(0), o20;
  }
  _updateMoveManipulationPosition() {
    const e23 = o6(He, 0, 0, 0);
    let t26 = 0, i23 = false, a28 = null, n23 = null;
    for (const r27 of this._manipulatorInfos) "vertex" === r27.type && (r27.manipulator.selected ? (t26++, u6(e23, e23, r27.manipulator.renderLocation), null == a28 || r27.selectedIndex > a28.selectedIndex ? (n23 = a28, a28 = r27) : (null == n23 || r27.selectedIndex > n23.selectedIndex) && (n23 = r27)) : i23 = true);
    const o20 = this.object, s21 = this._operations?.data.geometry;
    if (0 === t26) {
      const e24 = o20.visible && this.enableMoveObject;
      this._moveManipulation.xyManipulation.available = e24, this._moveManipulation.xyAxisManipulation.available = e24, this._moveManipulation.xyAxisManipulation.orthogonalAvailable = e24, this._moveManipulation.zManipulation.available = e24 && this.enableZShape && o16(this._operations, o20.elevationInfo), this._moveManipulation.angle = r22(s21), this._moveManipulation.radius = p14.radiusForSymbol(o20.graphic?.symbol);
    } else {
      const e24 = o20.visible;
      this._moveManipulation.xyManipulation.available = e24, this._moveManipulation.xyAxisManipulation.available = e24, this._moveManipulation.zManipulation.available = e24 && this.enableZVertex && o16(this._operations, this.object.elevationInfo), this._moveManipulation.xyAxisManipulation.orthogonalAvailable = e24 && 1 !== t26;
      let i24 = 0;
      if (null != a28) {
        const e25 = a28.handle.pos, t27 = null != n23 ? n23.handle.pos : a28.handle.leftSegment?.leftVertex ? a28.handle.leftSegment.leftVertex.pos : null, o21 = null == n23 && a28.handle.rightSegment?.rightVertex ? a28.handle.rightSegment.rightVertex.pos : null;
        t27 && o21 ? this._moveManipulation.xyAxisManipulation.available = false : t27 ? i24 = je(t27, e25) : o21 && (i24 = je(e25, o21));
      }
      this._moveManipulation.angle = i24, this._moveManipulation.radius = o17;
    }
    0 !== t26 && i23 ? (g2(e23, e23, 1 / t26), we.spatialReference = this._operations.data.spatialReference, we.hasZ = true, this.view.renderCoordsHelper.fromRenderCoords(e23, we), this._moveManipulation.elevationAlignedLocation = we) : null == this._outlineVisualElement || this.object.isDraped || null == this._outlineVisualElement.attachmentOrigin ? b18(this._moveManipulation, this.object) : this._moveManipulation.elevationAlignedLocation = this._outlineVisualElement.attachmentOrigin;
  }
  _removeVertices(e23) {
    const t26 = new Array(), i23 = this._operations;
    if (i23) {
      for (const a28 of e23) {
        const e24 = a28.handle.part;
        if ("vertex" === a28.type && i23.canRemoveVertex(e24)) {
          t26.push(a28.handle), this._removeManipulator(a28), this._removeManipulator(this._getManipulatorInfoFromHandle(a28.handle.leftSegment)), this._removeManipulator(this._getManipulatorInfoFromHandle(a28.handle.rightSegment));
          const n23 = i23.removeVertices([a28.handle]), o20 = n23.removedVertices?.[0].createdSegment;
          o20 && "line" === o20.type ? this._createVertexOrEdgeManipulator(o20) : this.enableEdgeOffset && e24.vertices.length <= 2 && this._removeManipulator(this._getManipulatorInfoFromHandle(e24.segments[0]));
        }
      }
      if (t26.length > 0) {
        const e24 = t26.map((e25) => {
          const t27 = i23.data.parts.indexOf(e25.part);
          return { coordinates: i23.data.coordinateHelper.vectorToArray(e25.pos), componentIndex: t27, vertexIndex: e25.index };
        }), a28 = this._updateEventState(2);
        if (this.destroyed) return;
        if (this.events.emit("vertex-remove", { type: "vertex-remove", object: this.object, removed: e24.map((e25) => e25.coordinates), vertices: e24 }), this.destroyed) return;
        if (a28 && (this._updateEventState(0), this.destroyed)) return;
        this._updateMoveManipulationPosition();
      }
    }
  }
  _moveVertices(e23, t26, i23 = "start" === t26.action ? 0 : 1) {
    const a28 = this._operations;
    if (a28) {
      e23.length > 0 && a28.moveVertices(e23.map((e24) => e24.handle), t26.mapDeltaX, t26.mapDeltaY, t26.mapDeltaZ, i23);
      for (const t27 of e23) this._updateManipulatorPosition(t27);
    }
  }
  _offsetEdge(e23, t26, i23) {
    if (!this._operations) return;
    const a28 = t26.clone();
    a28.distance = i23, this._operations.updateVertices([e23.handle.leftVertex, e23.handle.rightVertex], a28), this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e23.handle.leftVertex)), this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e23.handle.rightVertex));
  }
  _manipulatorClickCallback(e23, t26) {
    e23.shiftKey || this._clearSelection(), "vertex" === t26.type && (t26.manipulator.selected = !t26.manipulator.selected, this.enableDeleteVertices && e23.button === d17.Right && this._removeVertices([t26])), "edge" === t26.type && e23.button === d17.Left && this._splitEdgeManipulator(t26), e23.stopPropagation();
  }
  _updateTranslateTooltip(e23, t26) {
    null != this._defaultTooltipInfo ? this._resetTooltip() : this._updateTranslateObjectTooltip(e23, t26);
  }
  _updateTranslateObjectTooltip(e23, t26) {
    this._pendingEdgeOffsetInfo || (this.activeTooltipInfo = x10(e23, t26, this._tooltipsContext));
  }
  _updateEdgeOffsetTooltip(e23) {
    this._pendingEdgeOffsetInfo || (this.activeTooltipInfo = P11(this.object, e23, this._tooltipsContext));
  }
  _resetTooltip() {
    const e23 = this.activeTooltipInfo;
    if (this._pendingEdgeOffsetInfo && "reshape-edge-offset" === e23?.type) return;
    let t26 = null;
    t26 = this._pendingEdgeOffsetInfo || null != this._findActiveEdgeOffsetManipulatorInfo() ? P11(this.object, null, this._tooltipsContext) : this._defaultTooltipInfo, t26 !== e23 && (null != e23 && null != t26 && "input" === this.tooltip.mode || (this.activeTooltipInfo = t26));
  }
  get _defaultTooltipInfo() {
    const e23 = this._operations?.data.type;
    switch (e23) {
      case "polyline":
      case "polygon":
        return this._selectedVertexManipulatorInfo ? this.tooltipInfos.selectedVertex : null;
      case "point":
      case "mesh":
        return this.tooltipInfos.movePoint;
      default:
        return null;
    }
  }
  get _selectedVertexManipulatorInfo() {
    const e23 = this._manipulatorInfos.filter((e24) => "vertex" === e24.type && e24.manipulator.selected);
    return 1 === e23.length ? e23[0] : null;
  }
  get _tooltipsContext() {
    const { tooltipInfos: e23, activeTooltipInfo: t26, automaticAreaMeasurementUtils: i23, automaticLengthMeasurementUtils: a28 } = this;
    return { sketchOptions: this._sketchOptions, tooltipInfos: e23, activeTooltipInfo: t26, selectedVertexManipulatorInfo: this._selectedVertexManipulatorInfo, callbacks: this._tooltipCallbacks, automaticAreaMeasurementUtils: i23, automaticLengthMeasurementUtils: a28 };
  }
  get test() {
  }
};
function Oe() {
  return (e23) => {
    const { operation: t26, mapEnd: i23 } = e23;
    return null == t26 || null == i23 ? e23 : { ...e23, signedDistance: t26.signedDistanceToPoint(i23) };
  };
}
function Ee(e23) {
  const t26 = e23.size / 2, i23 = t26 + e23.collisionPadding;
  return { size: t26 / i23, outlineSize: (t26 + e23.outlineSize) / i23 };
}
function je(e23, t26) {
  return Math.atan2(t26[1] - e23[1], t26[0] - e23[0]) + Math.PI / 2;
}
function Ie(e23) {
  return new _({ x: 0, y: 0, z: 0, spatialReference: e23 });
}
function Se(e23) {
  return "edge" === e23.type && "edgeManipulator" in e23;
}
__decorate([m()], ye.prototype, "_numGrabbing", void 0), __decorate([m()], ye.prototype, "_numDragging", void 0), __decorate([m()], ye.prototype, "_pendingEdgeOffsetInfo", void 0), __decorate([m()], ye.prototype, "_operations", null), __decorate([m()], ye.prototype, "_segmentLabels", void 0), __decorate([m({ constructOnly: true })], ye.prototype, "tool", void 0), __decorate([m()], ye.prototype, "tooltip", void 0), __decorate([m()], ye.prototype, "activeTooltipInfo", void 0), __decorate([m({ readOnly: true })], ye.prototype, "updating", null), __decorate([m()], ye.prototype, "manipulators", null), __decorate([m()], ye.prototype, "view", null), __decorate([m()], ye.prototype, "automaticAreaMeasurementUtils", null), __decorate([m()], ye.prototype, "automaticLengthMeasurementUtils", null), __decorate([m()], ye.prototype, "object", null), __decorate([m()], ye.prototype, "enableZShape", null), __decorate([m()], ye.prototype, "enableDeleteVertices", null), __decorate([m()], ye.prototype, "enableZVertex", null), __decorate([m()], ye.prototype, "autoHideManipulators", null), __decorate([m()], ye.prototype, "enableMoveObject", null), __decorate([m()], ye.prototype, "enableMidpoints", null), __decorate([m()], ye.prototype, "enableEdgeOffset", null), __decorate([m()], ye.prototype, "_sketchOptions", null), __decorate([m()], ye.prototype, "_accentColor", null), __decorate([m()], ye.prototype, "_tooltipsContext", null), ye = __decorate([a2("esri.views.3d.interactive.editingTools.reshape.ReshapeOperation")], ye);
var we = t9(0, 0, void 0, f3.WGS84);
var He = n3();
var Ve = 1e-6;
var De = 16;
var Te = 32;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeTool3D.js
var h20 = class extends r16 {
  constructor(e23) {
    super(e23), this._reshapeOperation = null, this.events = new i2(), this.enableZShape = true, this.enableZVertex = true, this.enableMoveObject = true, this.enableDeleteVertices = true, this.autoHideManipulators = false, this.enableMidpoints = true, this.enableEdgeOffset = false, this.type = "reshape-3d", this.sketchOptions = new l11(), this.snappingManager = null, this.automaticManipulatorSelection = false;
  }
  initialize() {
    const e23 = this._reshapeOperation = new ye({ tool: this });
    this.addHandles([e23.events.on("reshape", (e24) => this.events.emit("reshape", e24)), e23.events.on("move", (e24) => this.events.emit("move", e24)), e23.events.on("vertex-add", (e24) => this.events.emit("vertex-add", e24)), e23.events.on("vertex-remove", (e24) => this.events.emit("vertex-remove", e24)), e23.events.on("immediate-click", (e24) => this.events.emit("immediate-click", { ...e24, object: this.object })), this.view.on("pointer-down", ["Shift"], (e24) => e24.stopPropagation())]), this.finishToolCreation();
  }
  destroy() {
    this._reshapeOperation = u2(this._reshapeOperation);
  }
  get updating() {
    return ((this.object.updating ?? false) || this._reshapeOperation?.updating || this.snappingManager?.updating) ?? false;
  }
  get activeTooltipInfo() {
    return this._reshapeOperation?.activeTooltipInfo ?? null;
  }
  get tooltip() {
    return this._reshapeOperation?.tooltip ?? null;
  }
  onManipulatorSelectionChanged() {
    this._reshapeOperation?.onManipulatorSelectionChanged();
  }
  recordUndo(e23, t26) {
    this._reshapeOperation?.recordUndo({ apply: e23, undo: t26, accumulate: () => false });
  }
  get canUndo() {
    return this._reshapeOperation?.canUndo ?? false;
  }
  undo() {
    this.snappingManager?.doneSnapping(), this._reshapeOperation?.undo();
  }
  get canRedo() {
    return this._reshapeOperation?.canRedo ?? false;
  }
  redo() {
    this.snappingManager?.doneSnapping(), this._reshapeOperation?.redo();
  }
  onInputEvent(e23) {
    const t26 = this._reshapeOperation;
    if (t26 && !t26.enterInputModeIfAvailable(e23) && this.enableDeleteVertices && "key-down" === e23.type && c11.delete.includes(e23.key)) {
      t26.removeSelectedVertices() > 0 && e23.stopPropagation();
    }
  }
  reset() {
  }
};
__decorate([m()], h20.prototype, "_reshapeOperation", void 0), __decorate([m({ constructOnly: true })], h20.prototype, "view", void 0), __decorate([m({ constructOnly: true })], h20.prototype, "automaticAreaMeasurementUtils", void 0), __decorate([m({ constructOnly: true })], h20.prototype, "automaticLengthMeasurementUtils", void 0), __decorate([m({ constructOnly: true })], h20.prototype, "object", void 0), __decorate([m()], h20.prototype, "enableZShape", void 0), __decorate([m()], h20.prototype, "enableZVertex", void 0), __decorate([m()], h20.prototype, "enableMoveObject", void 0), __decorate([m()], h20.prototype, "enableDeleteVertices", void 0), __decorate([m()], h20.prototype, "autoHideManipulators", void 0), __decorate([m()], h20.prototype, "enableMidpoints", void 0), __decorate([m()], h20.prototype, "enableEdgeOffset", void 0), __decorate([m()], h20.prototype, "type", void 0), __decorate([m({ type: l11 })], h20.prototype, "sketchOptions", void 0), __decorate([m()], h20.prototype, "snappingManager", void 0), __decorate([m()], h20.prototype, "updating", null), __decorate([m()], h20.prototype, "activeTooltipInfo", null), __decorate([m()], h20.prototype, "tooltip", null), __decorate([m()], h20.prototype, "automaticManipulatorSelection", void 0), h20 = __decorate([a2("esri.views.3d.interactive.editingTools.reshape.ReshapeTool3D")], h20);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateMeshAdapter.js
var g9 = class extends b {
  constructor(t26) {
    super(t26), this._interactionState = null;
  }
  initialize() {
    this.addHandles([f2(() => {
      const t26 = this._interactionState;
      return t26 && t26.angle !== t26.previousAngle ? { interactionState: t26, angle: t26.state.angle } : null;
    }, ({ interactionState: t26 }) => {
      this._updateMeshRotation(t26);
    }, U), f2(() => {
      const t26 = this._interactionState;
      return t26 && t26.scale !== t26.previousScale ? { interactionState: t26, scale: t26.state.scale } : null;
    }, ({ interactionState: t26 }) => {
      this._updateMeshSize(t26);
    }, U)]);
  }
  get geometry() {
    const t26 = t17(this.object);
    return "mesh" === t26?.type ? t26 : null;
  }
  get initialAngle() {
    return this._interactionState?.initialAngle ?? 0;
  }
  get angle() {
    const t26 = this.geometry?.transform;
    if (null == t26) return this._interactionState?.angle ?? 0;
    const e23 = w3(t26.rotation)[2];
    return Math.abs(e23) > 0.999999 ? s3(y4(t26.rotation)) * Math.sign(e23) : 0;
  }
  get angleClockwise() {
    return -this.angle;
  }
  get relativeAngle() {
    return this.angle - this.initialAngle;
  }
  get relativeAngleClockwise() {
    return -this.relativeAngle;
  }
  get scale() {
    return this._interactionState?.scale ?? 1;
  }
  startInteraction() {
    const t26 = new u18({ angle: this.angle });
    this._interactionState = t26;
    const e23 = () => {
      this._interactionState = null;
    };
    return { state: t26, done: e23, cancel: () => {
      t26.cancel(), e23();
    } };
  }
  createUndoRecord() {
    return this.object.createUndoRecord();
  }
  _updateMeshRotation(t26) {
    const { geometry: e23 } = this;
    if (null == e23) return;
    const { angle: o20, previousAngle: n23 } = t26;
    t26.previousAngle = o20;
    const r27 = M(o20 - n23);
    e23.rotate(0, 0, r27);
  }
  _updateMeshSize(t26) {
    const { geometry: e23 } = this;
    if (null == e23) return;
    const { scale: o20, previousScale: i23 } = t26;
    t26.previousScale = o20;
    const n23 = o20 / i23;
    e23.scale(n23);
  }
};
__decorate([m({ constructOnly: true })], g9.prototype, "object", void 0), __decorate([m()], g9.prototype, "geometry", null), __decorate([m({ constructOnly: true })], g9.prototype, "viewingMode", void 0), __decorate([m()], g9.prototype, "initialAngle", null), __decorate([m()], g9.prototype, "angle", null), __decorate([m()], g9.prototype, "angleClockwise", null), __decorate([m()], g9.prototype, "relativeAngle", null), __decorate([m()], g9.prototype, "relativeAngleClockwise", null), __decorate([m()], g9.prototype, "scale", null), __decorate([m()], g9.prototype, "_interactionState", void 0), g9 = __decorate([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter")], g9);
var u18 = class extends b {
  get state() {
    const { angle: t26, scale: e23 } = this;
    return { angle: t26, scale: e23 };
  }
  constructor(t26) {
    super(t26), this.angle = 0, this.initialAngle = 0, this.previousAngle = 0, this.previousScale = 1, this.scale = 1, this.initialAngle = t26.angle, this.previousAngle = t26.angle;
  }
  cancel() {
    this.angle = this.initialAngle, this.scale = 1;
  }
};
__decorate([m()], u18.prototype, "angle", void 0), __decorate([m()], u18.prototype, "initialAngle", void 0), __decorate([m()], u18.prototype, "previousAngle", void 0), __decorate([m()], u18.prototype, "previousScale", void 0), __decorate([m()], u18.prototype, "scale", void 0), __decorate([m()], u18.prototype, "state", null), u18 = __decorate([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState")], u18);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateObjectSymbol3DAdapter.js
var a23 = class extends b {
  constructor(t26) {
    super(t26), this.sizeAxis = null, this._interactionState = null;
  }
  initialize() {
    this.addHandles(f2(() => null != this._interactionState ? this._interactionState.state : null, (t26) => {
      this._updateSymbol(t26);
    }, U));
  }
  get initialAngle() {
    return this._interactionState?.initialAngle ?? 0;
  }
  get angle() {
    return null != this._interactionState ? this._interactionState.angle : null != this._orientationReferenceSymbolLayer ? c21(this._orientationReferenceSymbolLayer.heading ?? 0) : 0;
  }
  get angleClockwise() {
    return -this.angle;
  }
  get orientation() {
    return this.angle;
  }
  get orientationClockwise() {
    return this.angleClockwise;
  }
  get relativeAngle() {
    return this.angle - this.initialAngle;
  }
  get relativeAngleClockwise() {
    return -this.relativeAngle;
  }
  get scale() {
    return this._interactionState?.scale ?? 1;
  }
  get size() {
    const t26 = this._sizeReferenceSymbolLayer;
    if (null == t26) return null;
    const e23 = this.findLayerView(), i23 = this._graphicSymbol;
    if (null == e23 || null == i23 || "point-3d" !== i23.type) return null;
    const l25 = e23.getSymbolLayerSize(i23, t26);
    if ("size" in l25 && null != l25.size) return l25.size;
    const n23 = this.sizeAxis;
    return !("width" in l25) || null == l25.width || null != n23 && "width" !== n23 && "all" !== n23 && "width-and-depth" !== n23 ? !("depth" in l25) || null == t26.depth || null != n23 && "depth" !== n23 && "all" !== n23 && "width-and-depth" !== n23 ? !("height" in l25) || null == t26.height || null != n23 && "height" !== n23 && "all" !== n23 ? null : l25.height : l25.depth : l25.width;
  }
  get _sizeReferenceSymbolLayer() {
    const t26 = this._graphicSymbol;
    return null == t26 || 0 === t26.symbolLayers.length ? null : t26.symbolLayers.find((t27) => "object" === t27.type);
  }
  get _orientationReferenceSymbolLayer() {
    const t26 = this._graphicSymbol;
    return null == t26 || 0 === t26.symbolLayers.length ? null : t26.symbolLayers.find((t27) => "object" === t27.type && null != t27.heading);
  }
  get _graphicSymbol() {
    return null != this.graphic?.symbol && "point-3d" === this.graphic.symbol.type ? this.graphic.symbol : null;
  }
  set _graphicSymbol(t26) {
    this.graphic.symbol = t26;
  }
  startInteraction() {
    const t26 = this._graphicSymbol, e23 = this.findLayerView();
    if (null != this._interactionState || null == t26 || null == e23) return h21;
    const i23 = t26.symbolLayers.map((i24) => "object" === i24.type ? e23.getSymbolLayerSize(t26, i24) : null).toArray(), l25 = t26.clone(), n23 = this.angle, o20 = new p15({ originalSymbol: l25, angle: n23, initialSizes: i23 });
    this._interactionState = o20;
    const r27 = () => {
      this._interactionState = null;
    };
    return { state: o20, done: r27, cancel: () => {
      this._graphicSymbol = l25, r27();
    } };
  }
  createUndoRecord() {
    let t26 = this.graphic.symbol, e23 = null;
    return { undo: (i23) => {
      e23 = i23.symbol, i23.symbol = t26;
    }, redo: (i23) => {
      t26 = i23.symbol, i23.symbol = e23;
    } };
  }
  _updateSymbol({ scale: t26, angle: e23, originalSymbol: l25, initialSizes: n23 }) {
    const o20 = this._graphicSymbol;
    if (null == o20 || "point-3d" !== o20.type) return;
    const r27 = o20.clone(), s21 = -M(e23 - this.initialAngle);
    let a28 = false;
    this._forEachObjectSymbolLayerPair(l25, r27, (e24, i23, l26) => {
      const o21 = (e24.heading ?? 0) + s21;
      i23.heading !== o21 && (i23.heading = o21, a28 = true);
      const r28 = n23[l26];
      if (null != r28 && "width" in r28) {
        r28.width = this.sizeFilter(r28.width), r28.height = this.sizeFilter(r28.height), r28.depth = this.sizeFilter(r28.depth);
        const e25 = r28.width * t26;
        i23.width !== e25 && (i23.width = e25, a28 = true);
        const l27 = r28.depth * t26;
        i23.depth !== l27 && (i23.depth = l27, a28 = true);
        const n24 = r28.height * t26;
        i23.height !== n24 && (i23.height = n24, a28 = true);
      }
    }), a28 && (this._graphicSymbol = r27);
  }
  _forEachObjectSymbolLayerPair(t26, e23, i23) {
    t26.symbolLayers.forEach((t27, l25) => {
      const n23 = e23.symbolLayers.at(l25);
      "object" === t27.type && "object" === n23.type && i23(t27, n23, l25);
    });
  }
};
function c21(t26) {
  return -s3(t26);
}
__decorate([m()], a23.prototype, "initialAngle", null), __decorate([m()], a23.prototype, "angle", null), __decorate([m()], a23.prototype, "angleClockwise", null), __decorate([m()], a23.prototype, "orientation", null), __decorate([m()], a23.prototype, "orientationClockwise", null), __decorate([m()], a23.prototype, "relativeAngle", null), __decorate([m()], a23.prototype, "relativeAngleClockwise", null), __decorate([m()], a23.prototype, "scale", null), __decorate([m()], a23.prototype, "size", null), __decorate([m()], a23.prototype, "sizeAxis", void 0), __decorate([m({ constructOnly: true })], a23.prototype, "graphic", void 0), __decorate([m()], a23.prototype, "_interactionState", void 0), __decorate([m({ constructOnly: true })], a23.prototype, "findLayerView", void 0), __decorate([m({ constructOnly: true })], a23.prototype, "sizeFilter", void 0), __decorate([m()], a23.prototype, "_sizeReferenceSymbolLayer", null), __decorate([m()], a23.prototype, "_orientationReferenceSymbolLayer", null), __decorate([m()], a23.prototype, "_graphicSymbol", null), a23 = __decorate([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter")], a23);
var h21 = { state: { angle: 0, scale: 0 }, done: () => {
}, cancel: () => {
} };
var p15 = class extends b {
  get state() {
    const { originalSymbol: t26, angle: e23, initialAngle: i23, scale: l25, initialSizes: n23 } = this;
    return { originalSymbol: t26, angle: e23, initialAngle: i23, scale: l25, initialSizes: n23 };
  }
  constructor(t26) {
    super(t26), this.angle = 0, this.initialAngle = 0, this.scale = 1, this.initialAngle = t26.angle;
  }
};
__decorate([m()], p15.prototype, "originalSymbol", void 0), __decorate([m()], p15.prototype, "angle", void 0), __decorate([m()], p15.prototype, "initialAngle", void 0), __decorate([m()], p15.prototype, "initialSizes", void 0), __decorate([m()], p15.prototype, "scale", void 0), __decorate([m()], p15.prototype, "state", null), p15 = __decorate([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter.InteractionState")], p15);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateTransform.js
var ct = { ScaleIn: 32, ScaleOut: 64, RotateLeft: 128, RotateRight: 256, Unlocked: 1024, DelayedFocused: 2048 };
var dt = class extends b {
  get angle() {
    return this.adapter.angle;
  }
  get scale() {
    return this.adapter.scale;
  }
  set location(t26) {
    this._ringManipulator.location = t26;
  }
  set elevationAlignedLocation(t26) {
    this._ringManipulator.elevationAlignedLocation = t26;
  }
  get grabbing() {
    return this._ringManipulator.grabbing;
  }
  set interactive(t26) {
    this._ringManipulator.interactive = t26;
  }
  get updating() {
    return !!this._activeAnimation;
  }
  constructor(t26) {
    super(t26), this.mode = null, this._scaleRotateDragData = null, this._activeAnimation = null, this._ringIndicatorDelayMs = q9, this.events = new i2(), this.getFocused = () => this._ringManipulator.focused, this.getScale = () => "scale" === this._scaleRotateDragData?.mode ? this.adapter.scale : 1;
  }
  initialize() {
    this._createManipulator(), this._updateDragState(), this._updateManipulatorTransform(), this.addHandles([l3(() => {
      const { adapter: t26 } = this;
      return [t26.angle, t26.scale];
    }, () => this._updateManipulatorTransform())]);
  }
  destroy() {
    this._activeAnimation?.frameTask.remove(), this._activeAnimation = null, this.tool.manipulators.remove(this._ringManipulator), this._ringManipulator = null;
  }
  startAnimation(t26) {
    this.cancelActiveAnimation(), t26.start();
    const e23 = F({ update: ({ deltaTime: e24 }) => {
      t26.update(e24) && this.cancelActiveAnimation();
    } });
    this._activeAnimation = { ...t26, frameTask: e23 };
  }
  cancelActiveAnimation() {
    this._activeAnimation?.frameTask.remove(), this._activeAnimation = u2(this._activeAnimation);
  }
  forEachManipulator(t26) {
    t26(this._ringManipulator, 4);
  }
  _createManipulator() {
    const t26 = this._createRingManipulator();
    this._ringManipulator = t26, this.tool.manipulators.add(t26);
    const e23 = this.tool.object, a28 = p8(t26, (t27, a29, i23) => {
      this._scaleRotateDragData = null;
      const n23 = this.adapter.startInteraction(), l25 = { mode: "none", origin: t3(t27.renderLocation), initialAngle: this.adapter.angle, angle: 0, angleDir: 0, scaleDir: 0 };
      this._scaleRotateDragData = l25, this._updateDragState();
      const c25 = c4.get();
      this.tool.view.renderCoordsHelper.worldUpAtPosition(t27.renderLocation, c25), a29.next(P10(this.tool.view, U2(t27.renderLocation, c25, j3()))).next((t28) => {
        const a30 = k2(t28.plane), i24 = j12(t28.renderStart, t28.renderEnd, l25.origin, a30), c26 = s5.shortestSignedDiff(l25.angle, i24);
        l25.angleDir = r4(l25.angleDir + c26, -0.3, m13), l25.angle = i24;
        const d21 = ht(l25, t28), h24 = d21 - this.adapter.scale;
        if (l25.scaleDir = r4(l25.scaleDir + h24, -0.2, k10), this._onScaleChanged(), "none" === l25.mode) {
          const a31 = this.mode || pt(t28, t28.plane, l25.origin, this.tool.view.state.camera);
          if (null != a31) {
            switch (a31) {
              case "rotate":
                this.tool.events.emit("rotate-start", { object: e23, angle: 0 }), this.tool.events.emit("record-undo", { updates: [this.adapter.createUndoRecord()] });
                break;
              case "scale":
                this.tool.events.emit("scale-start", { object: e23, xScale: 1, yScale: 1 }), this.tool.events.emit("record-undo", { updates: [this.adapter.createUndoRecord()] });
            }
            l25.mode = a31;
          }
        }
        switch (l25.mode) {
          case "rotate":
            n23.state.angle = l25.initialAngle + i24;
            break;
          case "scale":
            n23.state.scale = d21, this._onScaleChanged();
        }
        switch (this._updateDragState(), this._updateManipulatorTransform(), t28.action) {
          case "start":
          case "update":
            switch (l25.mode) {
              case "rotate":
                this.tool.events.emit("rotate", { object: e23, angle: M(l25.angle) });
                break;
              case "scale":
                this.tool.events.emit("scale", { object: e23, xScale: d21, yScale: d21 });
            }
            break;
          case "end":
            switch (l25.mode) {
              case "rotate":
                this.tool.events.emit("rotate-stop", { object: e23, angle: M(l25.angle) });
                break;
              case "scale":
                this.tool.events.emit("scale-stop", { object: e23, xScale: d21, yScale: d21 });
            }
        }
        return "end" === t28.action && (this.startAnimation(gt2(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState(), n23.done()), t28;
      }), i23.next(() => {
        if (n23.cancel(), null != this._scaleRotateDragData) {
          switch (this._scaleRotateDragData.mode) {
            case "none":
              break;
            case "rotate":
              this.tool.events.emit("rotate-stop", { object: e23, angle: 0 });
              break;
            case "scale":
              this.tool.events.emit("scale-stop", { object: e23, xScale: 1, yScale: 1 });
          }
          this.startAnimation(gt2(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState();
        }
      });
    });
    this.addHandles([a28, t26.events.on("focus-changed", (t27) => {
      "focus" === t27.action ? this.startAnimation(mt2(this, () => this._updateDelayedFocusedState(), { delayMs: this._ringIndicatorDelayMs })) : this._updateDelayedFocusedState();
    }), t26.events.on("immediate-click", (t27) => {
      t27.stopPropagation();
    }), l3(() => this.tool.object.visible, (t27) => this._ringManipulator.available = t27, h)]);
  }
  _onScaleChanged() {
    this.events.emit("scale-changed"), this._updateManipulatorTransform();
  }
  _updateDelayedFocusedState() {
    this._ringManipulator.updateStateEnabled(ct.DelayedFocused, this.getFocused());
  }
  _updateDragState() {
    if (this._ringManipulator.updateStateEnabled(ct.Unlocked, !(null != this._scaleRotateDragData && "none" !== this._scaleRotateDragData?.mode)), null != this._scaleRotateDragData) switch (this._scaleRotateDragData.mode) {
      case "rotate":
        this._ringManipulator.updateStateEnabled(ct.ScaleIn | ct.ScaleOut, false), this._ringManipulator.updateStateEnabled(ct.RotateLeft, this._scaleRotateDragData.angleDir < 0), this._ringManipulator.updateStateEnabled(ct.RotateRight, this._scaleRotateDragData.angleDir >= 0);
        break;
      case "scale":
        this._ringManipulator.updateStateEnabled(ct.RotateLeft | ct.RotateRight, false), this._ringManipulator.updateStateEnabled(ct.ScaleIn, this._scaleRotateDragData.scaleDir < 0), this._ringManipulator.updateStateEnabled(ct.ScaleOut, this._scaleRotateDragData.scaleDir >= 0);
    }
    else this._ringManipulator.updateStateEnabled(ct.ScaleIn | ct.ScaleOut | ct.RotateLeft | ct.RotateRight, false);
  }
  _updateManipulatorTransform() {
    const t26 = p2(f7.get(), this.adapter.angle, r5(0, 0, 1));
    if (null == t26) return;
    const e23 = this.getScale(), a28 = d2(f7.get(), o6(c4.get(), e23, e23, e23));
    this._ringManipulator.modelTransform = c2(f7.get(), a28, t26);
  }
  _createRingManipulator() {
    const t26 = (t27, e24, a29) => {
      const o21 = [], i24 = Math.ceil(t19 * (e24 - t27) / (2 * Math.PI));
      for (let r28 = 0; r28 < i24 + 1; r28++) {
        const s22 = t27 + r28 * (e24 - t27) / i24;
        o21.push(r5(a29 * Math.cos(s22), a29 * Math.sin(s22), 0));
      }
      return o21;
    }, e23 = (e24) => t26(0, 2 * Math.PI, e24), a28 = (t27) => [[-t27 / 2, 0], [t27 / 2, 0], [t27 / 2, P9 / 2], [-t27 / 2, P9 / 2]], o20 = this._createMaterial(1), i23 = (t27, e24, i24 = o20) => mt(i24, a28(e24), t27, [], [], false), r27 = e23(I5), s21 = i23(r27, i15), n23 = { left: new Array(), right: new Array() }, l25 = [];
    for (let w14 = 0; w14 < 2; w14++) {
      const e24 = w14 * Math.PI - Math.PI / 4, a29 = Math.PI / 2 - x9, r28 = e24 + a29, s22 = e24 + Math.PI / 2 - a29, c26 = t26(r28, s22, n14), d22 = i23(c26, l18);
      l25.push(c26), l25.push(t26(r28, s22, p13 - i15 / 2)), n23.left.push(d22), n23.right.push(d22.instantiate());
      for (let t27 = 0; t27 < 2; t27++) {
        const e25 = 0 === t27, a30 = e5();
        if (e25) {
          f5(a30, a30, [1, -1, 1]), b3(a30, a30, -r28, [0, 0, 1]);
          const t28 = Math.round(f18 * (c26.length - 1));
          a30[12] = c26[t28][0], a30[13] = c26[t28][1], a30[14] = c26[t28][2];
        } else {
          b3(a30, a30, s22, [0, 0, 1]);
          const t28 = Math.round((1 - f18) * (c26.length - 1));
          a30[12] = c26[t28][0], a30[13] = c26[t28][1], a30[14] = c26[t28][2];
        }
        const i24 = At(o20, r23, 0, s17, P9);
        yt(i24, a30), (e25 ? n23.left : n23.right).push(i24);
      }
    }
    const c25 = [];
    for (let _12 = 0; _12 < 2; _12++) {
      const e24 = _12 * Math.PI - Math.PI / 4, a29 = Math.PI / 2 - b17, o21 = e24 + a29, r28 = e24 + Math.PI / 2 - a29, s22 = t26(o21, r28, p13);
      c25.push(i23(s22, l18));
    }
    const d21 = this._createMaterial(0.66), h24 = this._createMaterial(0.5), p18 = this._createMaterial(0.33), u22 = e23(I5 + g7), g15 = e23(I5 + j11), m15 = i23(u22, l18, d21), f20 = i23(g15, l18, p18), v17 = e23(I5 - g7), S13 = e23(I5 - j11), b23 = i23(v17, l18, d21), y14 = i23(S13, l18, p18);
    let j16 = [new t21(s21, ct.DelayedFocused), new t21(s21.instantiate({ material: h24 }), 0)];
    this.mode && "scale" !== this.mode || (j16 = j16.concat([...c25.map((t27) => new t21(t27, ct.DelayedFocused | ct.Unlocked)), new t21(m15, ct.DelayedFocused | ct.ScaleIn), new t21(f20, ct.DelayedFocused | ct.ScaleIn), new t21(b23, ct.DelayedFocused | ct.ScaleOut), new t21(y14, ct.DelayedFocused | ct.ScaleOut)])), this.mode && "rotate" !== this.mode || (j16 = j16.concat([...n23.right.map((t27) => new t21(t27.instantiate(), ct.DelayedFocused | ct.Unlocked)), ...n23.left.map((t27) => new t21(t27, ct.DelayedFocused | ct.RotateLeft)), ...n23.right.map((t27) => new t21(t27, ct.DelayedFocused | ct.RotateRight))]));
    const R14 = [r27, ...l25];
    return new Y({ view: this.tool.view, renderObjects: j16, autoScaleRenderObjects: false, worldOriented: true, radius: i15, focusMultiplier: 1, touchMultiplier: 1.5, elevationInfo: this.tool.object.elevationInfo, collisionType: { type: "ribbon", paths: R14, direction: r5(0, 0, 1) } });
  }
  _createMaterial(t26) {
    const e23 = new m8({ cullFace: 2, renderOccluded: 2, isDecoration: true });
    return this.addHandles(l3(() => Q2(this.tool.view.effectiveTheme.accentColor, t26), (t27) => e23.setParameters({ color: t27 }), h)), e23;
  }
  get test() {
  }
};
function ht(t26, e23) {
  const a28 = c3(c4.get(), e23.renderStart, t26.origin), o20 = c3(c4.get(), e23.renderEnd, t26.origin), i23 = r10(a28), r27 = r10(o20);
  return 0 === i23 ? 0 : r27 / i23;
}
function pt(t26, e23, a28, o20) {
  const { renderStart: i23, renderEnd: r27 } = t26, s21 = ut(i23, o20, c4.get()), n23 = ut(r27, o20, c4.get());
  if (v2(s21, n23) < d15 * d15) return null;
  const l25 = c3(c4.get(), i23, a28), c25 = _4(c4.get(), l25, k2(e23)), d21 = i23, h24 = u6(c4.get(), d21, c25), p18 = ut(a28, o20, c4.get()), u22 = s21, g15 = ut(h24, o20, c4.get()), m15 = c3(c4.get(), g15, u22), f20 = c3(c4.get(), s21, p18), _12 = k3(u22, m15), D13 = k3(p18, f20);
  return w4(_12, n23) < w4(D13, n23) ? "rotate" : "scale";
}
function ut(t26, e23, a28) {
  return e23.projectToScreen(t26, ft2), o6(a28, ft2[0], ft2[1], 0);
}
function gt2(t26, e23) {
  let a28 = null, o20 = 1;
  const i23 = () => o20;
  return { start: () => {
    o20 = t26.getScale(), a28 = t26.getScale, t26.getScale = i23, e23();
  }, update: (t27) => (o20 += ((o20 + 1) / 2 - o20) * Math.min(t27 * u15, 1), e23(), Math.abs(o20 - 1) < 0.01 ? 1 : 0), destroy: () => {
    a28 && (t26.getScale = a28), e23();
  } };
}
function mt2(t26, e23, a28) {
  let o20 = 0, i23 = null;
  const r27 = () => false;
  return { start: () => {
    i23 = t26.getFocused, t26.getFocused = r27, o20 = 0, e23();
  }, update: (t27) => (o20 += t27, !i23?.() || o20 >= a28.delayMs ? 1 : 0), destroy: () => {
    i23 && (t26.getFocused = i23), e23();
  } };
}
__decorate([m({ constructOnly: true })], dt.prototype, "tool", void 0), __decorate([m({ constructOnly: true })], dt.prototype, "adapter", void 0), __decorate([m({ constructOnly: true })], dt.prototype, "sketchOptions", void 0), __decorate([m()], dt.prototype, "mode", void 0), __decorate([m()], dt.prototype, "_activeAnimation", void 0), __decorate([m()], dt.prototype, "updating", null), dt = __decorate([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateTransform")], dt);
var ft2 = f4();

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformMeshTooltipInfo.js
var l19 = class extends h9(r15) {
  constructor(t26) {
    super(t26), this.type = "transform-mesh", this.orientation = M4(), this.scale = j7(), this.allFields.forEach((t27) => {
      t27.lockable = false, t27.setActual(null);
    });
  }
  get key() {
    return { longitude: this.longitude.actual, latitude: this.latitude.actual, x: this.x.actual, y: this.y.actual, elevation: this.elevation.actual, geographic: this.geographic, orientation: this.orientation.actual, scale: this.scale.actual };
  }
  get allFields() {
    return [this.longitude, this.latitude, this.x, this.y, this.elevation, this.orientation, this.scale];
  }
};
__decorate([m()], l19.prototype, "key", null), __decorate([m()], l19.prototype, "allFields", null), l19 = __decorate([a2("esri.views.interactive.tooltip.infos.TransformMeshTooltipInfo")], l19);

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformPointTooltipInfo.js
var p16 = class extends h9(r15) {
  constructor(o20) {
    super(o20), this.type = "transform-point", this.orientation = M4({ readOnly: true }), this.size = k7({ readOnly: true }), this.allFields.forEach((o21) => {
      o21.lockable = false, o21.setActual(null);
    });
  }
  get allFields() {
    return [this.longitude, this.latitude, this.x, this.y, this.elevation, this.orientation, this.size];
  }
};
__decorate([m()], p16.prototype, "allFields", null), p16 = __decorate([a2("esri.views.interactive.tooltip.infos.TransformPointTooltipInfo")], p16);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/TransformTool3D.js
var E12 = class extends r16 {
  constructor(t26) {
    super(t26), this.events = new i2(), this.enableZ = true, this.enableRotation = true, this.enableScaling = true, this.sketchOptions = new l11(), this.type = "transform-3d", this._updatingHandles = new h4(), this._scaleRotate = null;
  }
  initialize() {
    const { events: t26, object: o20, view: a28 } = this;
    this.tooltip = R5(() => ({ view: a28, options: this.sketchOptions.tooltips })), this._moveManipulation = new p14({ tool: this, view: a28, snapToScene: this.snapToScene, xyAvailable: true, xyAxisAvailable: true, zAvailable: this.enableZ && o16(o20.operations, o20.elevationInfo), radius: p14.radiusForSymbol(o20.graphic?.symbol) }), this._moveManipulation.forEachManipulator((e23) => this.addHandles(e23.events.on("immediate-click", (e24) => {
      t26.emit("immediate-click", { ...e24, object: this.object }), e24.stopPropagation();
    })));
    const s21 = o20.elevationInfo;
    if (this._moveManipulation.elevationInfo = s21, this.addHandles(r20(o20)), this._moveManipulation.createManipulatedObjectDragPipeline((t27, e23, i23, n23, r28) => {
      if (0 === t27) {
        const { snappingStep: t28, cancelSnapping: e24 } = f12({ snappingContext: new e11({ elevationInfo: s21, pointer: r28, editGeometryOperations: g3.fromGeometry(new _({ spatialReference: o20.operations?.data.spatialReference }), a28.state.viewingMode), visualizer: new w7(), excludeFeature: o20.graphic }), snappingManager: this.snappingManager, updatingHandles: this._updatingHandles, useZ: false });
        n23 = n23.next(e24), i23 = i23.next(q6(this.view, s21)).next(...t28);
      }
      return { steps: i23, cancel: n23 };
    }, o20, (e23) => {
      const { action: o21, object: i23, dxScreen: a29, dyScreen: n23 } = e23, s22 = { object: i23, dxScreen: a29, dyScreen: n23 };
      switch (o21) {
        case "start":
          this._emitRecordUndo(), t26.emit("translate-start", s22);
          break;
        case "update":
          t26.emit("translate", s22);
          break;
        case "end":
          t26.emit("translate-stop", s22);
      }
    }), this._moveManipulation.angle = null != this._scaleRotate ? this._scaleRotate.angle : 0, this._scaleRotateAdapter = this._createScaleRotateAdapter(), this.addHandles(l3(() => this._scaleRotateAdapter.angle, () => this._updateMoveAngle())), this.enableScaling || this.enableRotation) {
      const t27 = this.enableScaling && this.enableRotation ? null : this.enableScaling ? "scale" : "rotate";
      this._scaleRotate = new dt({ tool: this, mode: t27, adapter: this._scaleRotateAdapter, sketchOptions: this.sketchOptions }), this.addHandles(this._scaleRotate.events.on("scale-changed", () => this._onScaleChanged()));
    }
    this.addHandles([l17({ view: this.view, object: o20, forEachManipulator: (t27) => this._forEachManipulator(t27), onManipulatorsChanged: () => e() }), o20.on("committed", () => this._onGeometryChanged()), this._hideManipulatorsForObjectState(), l3(() => a28.scale, () => this._updateMoveAngle())].filter(N)), this._onGeometryChanged(), this._updateMoveAngle(), this._forEachManipulator((t27) => {
      t27 instanceof Y && this.addHandles(t27.events.on("grab-changed", () => this._updateManipulatorsInteractive()));
    });
    const r27 = a28?.type, { sketchOptions: l25 } = this;
    this._meshTooltipInfo = new l19({ viewType: r27, sketchOptions: l25 }), this._pointTooltipInfo = new p16({ viewType: r27, sketchOptions: l25 });
    const h24 = { object: o20, dxScreen: 0, dyScreen: 0 }, d21 = { onBeforeUpdate: () => this.endDrag(), onMoveStart: () => {
      this._emitRecordUndo(), t26.emit("translate-start", { ...h24 });
    }, onMove: () => t26.emit("translate", { ...h24 }), onMoveStop: () => t26.emit("translate-stop", { ...h24 }), onRotateStart: (e23) => {
      this._emitRecordUndo(), t26.emit("rotate-start", { object: o20, angle: e23 });
    }, onRotate: (e23) => t26.emit("rotate", { object: o20, angle: e23 }), onRotateStop: (e23) => t26.emit("rotate-stop", { object: o20, angle: e23 }), onScaleStart: (e23, i23) => {
      this._emitRecordUndo(), t26.emit("scale-start", { object: o20, xScale: e23, yScale: i23 });
    }, onScale: (e23, i23) => t26.emit("scale", { object: o20, xScale: e23, yScale: i23 }), onScaleStop: (e23, i23) => t26.emit("scale-stop", { object: o20, xScale: e23, yScale: i23 }) };
    this.addHandles(f17(this.tooltip, this.object, () => ({ sketchOptions: this.sketchOptions, activeTooltipInfo: this.activeTooltipInfo, callbacks: d21, scaleRotateTransform: this._scaleRotate }))), this.finishToolCreation();
  }
  destroy() {
    this.tooltip.destroy(), this._moveManipulation.destroy(), this._scaleRotate = u2(this._scaleRotate), this._scaleRotateAdapter = u2(this._scaleRotateAdapter), this._updatingHandles.destroy(), this._set("view", null), this._set("object", null);
  }
  onInputEvent(t26) {
    if (!this.destroyed && !H3(t26, this.tooltip)) return super.onInputEvent(t26);
  }
  _updateManipulatorsInteractive() {
    null != this._scaleRotate && (this._scaleRotate.interactive = !this._moveManipulation.grabbing, this._moveManipulation.interactive = !this._scaleRotate.grabbing);
  }
  _createScaleRotateAdapter() {
    const t26 = t17(this.object);
    return "mesh" === t26?.type ? new g9({ object: this.object, viewingMode: this.view.state.viewingMode }) : new a23({ graphic: this.object.graphic, sizeFilter: (t27) => this._enforceNonZeroSize(t27), findLayerView: () => this.view.allLayerViews.find((t27) => t27.layer === this.object.graphic?.layer), sizeAxis: this.sketchOptions?.tooltips?.visualVariables?.size?.axis ?? null });
  }
  _forEachManipulator(t26) {
    this._moveManipulation?.forEachManipulator(t26), this._scaleRotate?.forEachManipulator(t26);
  }
  _hideManipulatorsForObjectState() {
    return l3(() => this.object.visible, (t26) => {
      this._forEachManipulator((e23) => e23.available = t26), this._moveManipulation.zManipulation.available = t26 && this.enableZ && o16(this.object.operations, this.object.elevationInfo);
    });
  }
  _emitRecordUndo() {
    this.events.emit("record-undo", { updates: [this.object.createUndoRecord()] });
  }
  set snapToScene(t26) {
    this._moveManipulation && (this._moveManipulation.snapToScene = t26), this._set("snapToScene", t26);
  }
  get updating() {
    return this._updatingHandles.updating || !!this._scaleRotate?.updating;
  }
  get activeTooltipInfo() {
    return "mesh" === t17(this.object)?.type ? this._meshTooltipInfo : this._pointTooltipInfo;
  }
  set location(t26) {
    this._moveManipulation.location = t26, this._scaleRotate && (this._scaleRotate.location = t26);
  }
  set elevationAlignedLocation(t26) {
    this._moveManipulation.elevationAlignedLocation = t26, this._scaleRotate && (this._scaleRotate.elevationAlignedLocation = t26);
  }
  reset() {
  }
  onHide() {
    this._scaleRotate?.cancelActiveAnimation();
  }
  _onScaleChanged() {
    null != this._scaleRotate && (this._moveManipulation.displayScale = this._scaleRotate.getScale());
  }
  _updateMoveAngle() {
    const { view: t26 } = this, e23 = 2 === t26.state.viewingMode || t26.scale < v13;
    this._moveManipulation.angle = e23 ? this._scaleRotateAdapter.angle : 0;
  }
  _onGeometryChanged() {
    b18(this, this.object);
  }
  _enforceNonZeroSize(t26) {
    return t26 || this.view.state.camera.computeRenderPixelSizeAt(this._moveManipulation.renderLocation);
  }
  get test() {
  }
};
__decorate([m({ constructOnly: true, nonNullable: true })], E12.prototype, "view", void 0), __decorate([m({ constructOnly: true, nonNullable: true })], E12.prototype, "object", void 0), __decorate([m({ constructOnly: true, nonNullable: true })], E12.prototype, "enableZ", void 0), __decorate([m()], E12.prototype, "enableRotation", void 0), __decorate([m()], E12.prototype, "enableScaling", void 0), __decorate([m({ constructOnly: true, type: l11 })], E12.prototype, "sketchOptions", void 0), __decorate([m({ value: false })], E12.prototype, "snapToScene", null), __decorate([m({ constructOnly: true })], E12.prototype, "snappingManager", void 0), __decorate([m({ readOnly: true })], E12.prototype, "type", void 0), __decorate([m({ readOnly: true })], E12.prototype, "updating", null), __decorate([m()], E12.prototype, "activeTooltipInfo", null), E12 = __decorate([a2("esri.views.3d.interactive.editingTools.transform.TransformTool3D")], E12);

// node_modules/@arcgis/core/analysis/SlicePlane.js
var l20 = class extends l6(n2) {
  constructor(e23) {
    super(e23), this.type = "plane", this.position = null, this.heading = 0, this.tilt = 0, this.width = 10, this.height = 10;
  }
  equals(e23) {
    return this.heading === e23.heading && this.tilt === e23.tilt && this.width === e23.width && this.height === e23.height && o2(this.position, e23.position);
  }
};
__decorate([m({ type: ["plane"], readOnly: true, json: { read: false, write: { isRequired: true } } })], l20.prototype, "type", void 0), __decorate([m({ type: _, json: { write: { isRequired: true } } })], l20.prototype, "position", void 0), __decorate([m({ type: Number, nonNullable: true, range: { min: 0, max: 360 }, json: { write: { isRequired: true } } }), s((e23) => a7.normalize(a(e23), 0, true))], l20.prototype, "heading", void 0), __decorate([m({ type: Number, nonNullable: true, range: { min: 0, max: 360 }, json: { write: { isRequired: true } } }), s((e23) => a7.normalize(a(e23), 0, true))], l20.prototype, "tilt", void 0), __decorate([m({ type: Number, nonNullable: true, range: { min: 0 }, json: { write: { isRequired: true } } })], l20.prototype, "width", void 0), __decorate([m({ type: Number, nonNullable: true, range: { min: 0 }, json: { write: { isRequired: true } } })], l20.prototype, "height", void 0), l20 = __decorate([a2("esri.analysis.SlicePlane")], l20);

// node_modules/@arcgis/core/views/3d/analysis/Slice/settings.js
var t22 = r9(0, 0, 0, 0.04);

// node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolConfig.js
var t23 = has("mac") ? "Meta" : "Control";
var s18 = 2;
var a24 = 1.15;
var c22 = 1.15;
var e20 = Math.cos(s3(45));
var i19 = Math.cos(s3(5));
var l21 = 3;
var n17 = 11;
var x11 = 22.5;
var C4 = 40;
var S9 = 48;
var U12 = 2.25;
var b20 = 4;
var d18 = 1;
var g10 = 0.3;
var k12 = 6;
var q13 = 4;

// node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js
var d19 = e5();

// node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolUtils.js
function si(i23, e23) {
  return w11(i23.basis1, i23.basis2, i23.origin, e23);
}
function ri(i23, e23, t26, n23) {
  const o20 = e23.worldUpAtPosition(i23.origin, c4.get()), s21 = c4.get();
  switch (t26) {
    case 1:
      s6(s21, o20);
      break;
    case 2:
      s6(s21, i23.basis1);
  }
  return U2(i23.origin, s21, n23);
}
function li(i23, e23, t26, n23) {
  const o20 = r10(n23.basis1), c25 = r10(n23.basis2), l25 = pi(n23), p18 = fi(n23), f20 = o6(c4.get(), 0, 0, 0);
  u6(f20, g2(c4.get(), n23.basis1, e23.direction[0]), g2(c4.get(), n23.basis2, e23.direction[1])), u6(f20, n23.origin, f20);
  let b23 = 0, h24 = 1;
  if (bi(e23)) 1 === e23.direction[0] && -1 === e23.direction[1] ? b23 = Ai : 1 === e23.direction[0] && 1 === e23.direction[1] ? b23 = Math.PI : -1 === e23.direction[0] && 1 === e23.direction[1] && (b23 = 3 * Math.PI / 2), h24 = p18;
  else {
    const i24 = 0 !== e23.direction[0] ? 1 : 2;
    b23 = 1 === i24 ? Ai : 0, h24 = (1 === i24 ? c25 : o20) - l25;
  }
  const j16 = R(f7.get(), b23);
  f5(j16, j16, o6(c4.get(), h24, h24, h24)), c2(j16, t26, j16), j16[12] = 0, j16[13] = 0, j16[14] = 0, i23.modelTransform = j16, i23.renderLocation = f20;
}
function pi(i23) {
  const e23 = r10(i23.basis1), t26 = r10(i23.basis2);
  return g10 * Math.min(e23, t26);
}
function fi(i23) {
  return pi(i23);
}
function bi(i23) {
  return 0 !== i23.direction[0] && 0 !== i23.direction[1];
}
var xi = 16;
var Si = 32;
var Ti = b7();
var Ai = Math.PI / 2;
var Ci = 16;
var ki = 32;

// node_modules/@arcgis/core/views/3d/analysis/Slice/ShiftManipulator.js
var _9 = class extends Y {
  constructor(a28, i23) {
    const s21 = new J5({ width: 1, renderOccluded: 4, isDecoration: true }, a28.state.isGlobal), n23 = new m8({ cullFace: 2, renderOccluded: 16, isDecoration: true }), c25 = new m8({ cullFace: 2, renderOccluded: 16, isDecoration: true }), l25 = new m8({ cullFace: 2, renderOccluded: 16, isDecoration: true }), m15 = new m8({ writeDepth: false, cullFace: 1, renderOccluded: 2, isDecoration: true });
    super({ view: a28, ...q14({ offsetMode: i23, tubeMaterial: n23, tipMaterial: c25, capMaterial: l25, outlineMaterial: m15, calloutMaterial: s21 }) }), this._themeHandle = l3(() => a28.effectiveTheme.accentColor, (o20) => {
      const r27 = I2(o20), a29 = u7.toUnitRGBA(o20), i24 = u7.toUnitRGBA(r27), p18 = u7.toUnitRGBA(u7.blendColors(r27, o20, 0.4)), u22 = u7.toUnitRGBA(u7.blendColors(r27, o20, 0.14));
      s21.setParameters({ color: a29 }), n23.setParameters({ color: u22 }), c25.setParameters({ color: i24 }), l25.setParameters({ color: p18 }), m15.setParameters({ color: a29 });
    }, h);
  }
  destroy() {
    this._themeHandle.remove(), super.destroy();
  }
};
function q14({ offsetMode: t26, tubeMaterial: e23, tipMaterial: o20, capMaterial: r27, outlineMaterial: a28, calloutMaterial: i23 }) {
  const s21 = 0 === t26 ? C4 : 0, n23 = [r5(s21, 0, -S9 / 2), r5(s21, 0, S9 / 2)], c25 = z12(n23), l25 = I9({ vertices: n23, padding: 0, materials: { tube: e23, tip: o20, cap: r27 } }), m15 = I9({ vertices: n23, padding: U12, materials: { tube: a28, tip: a28, cap: a28 } }), p18 = Mt(i23, [[s21, 0, 0], [s21 - C4, 0, 0]]), u22 = Mt(i23, [[s21, 0, 0], [s21 - C4, 0, 0]]);
  return { renderObjects: [...l25.normal.map((t27) => new t21(t27, 1 | xi)), ...m15.normal.map((t27) => new t21(t27, 1 | xi)), new t21(p18, 1 | xi | Si), ...l25.focused.map((t27) => new t21(t27, 2 | xi)), ...m15.focused.map((t27) => new t21(t27, 2 | xi)), new t21(u22, 2 | xi | Si)], autoScaleRenderObjects: false, collisionType: { type: "line", paths: [c25] }, collisionPriority: 1, radius: n17, state: xi };
}
function I9({ vertices: t26, padding: e23, materials: o20 }) {
  const r27 = (r28) => {
    const v17 = t26.slice(), y14 = c3(c4.get(), v17[0], v17[1]);
    A(y14, y14);
    const D13 = c3(c4.get(), v17[v17.length - 1], v17[v17.length - 2]);
    if (A(D13, D13), e23 > 0) {
      const t27 = g2(n3(), D13, -e23);
      v17[v17.length - 1] = u6(t27, t27, v17[v17.length - 1]);
      const o21 = g2(n3(), y14, -e23);
      v17[0] = u6(o21, o21, v17[0]);
    }
    const C6 = r28 ? c22 : 1, G5 = x11 * C6, A12 = n17 * C6, B4 = o3(f7.get());
    if (e23 > 0) {
      const t27 = G5 / 4, o21 = o6(c4.get(), 0, t27, 0), r29 = 1 + e23 / t27;
      i3(B4, B4, o21), f5(B4, B4, o6(c4.get(), r29, r29, r29)), i3(B4, B4, g2(o21, o21, -1 / r29));
    }
    const F10 = o3(e5()), k14 = r5(0, 1, 0), H8 = _2(e5(), R2(o8.get(), k14, D13));
    H8[12] = v17[v17.length - 1][0], H8[13] = v17[v17.length - 1][1], H8[14] = v17[v17.length - 1][2], c2(H8, H8, B4);
    const S13 = o20.tube, _12 = L5(l21 * (r28 ? a24 : 1) + e23, v17, S13);
    _12.transformation = F10;
    const q15 = [_12], I13 = o20.tip, z14 = ft(I13, G5, A12, 24, false, false, true);
    z14.transformation = H8, q15.push(z14);
    const E13 = o20.cap, J8 = ft(E13, G5, A12, 24, false, true, false);
    J8.transformation = H8, q15.push(J8);
    const K5 = _2(e5(), R2(o8.get(), k14, y14));
    return K5[12] = v17[0][0], K5[13] = v17[0][1], K5[14] = v17[0][2], c2(K5, K5, B4), q15.push(z14.instantiate({ transformation: K5 })), q15.push(J8.instantiate({ transformation: K5 })), q15;
  };
  return { normal: r27(false), focused: r27(true) };
}
function L5(t26, e23, o20) {
  const r27 = [], a28 = 12;
  for (let i23 = 0; i23 < a28; i23++) {
    const e24 = i23 / a28 * 2 * Math.PI;
    r27.push([Math.cos(e24) * t26, Math.sin(e24) * t26]);
  }
  return mt(o20, r27, e23, [], [], false);
}
function z12(t26, e23) {
  const o20 = c3(n3(), t26[t26.length - 1], t26[t26.length - 2]);
  A(o20, o20), g2(o20, o20, x11), u6(o20, o20, t26[t26.length - 1]);
  {
    const e24 = c3(n3(), t26[0], t26[1]);
    return A(e24, e24), g2(e24, e24, x11), u6(e24, e24, t26[0]), [e24, ...t26, o20];
  }
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentMove.js
var _10 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  constructor(t26, e23, o20) {
    this._tool = t26, this._bounds = e23, this._automaticLengthMeasurementUtils = o20, this._moveXYTooltipInfo = null, this._moveZTooltipInfo = null;
    const i23 = this._tool, n23 = i23.view;
    this.moveXYObjectManipulation = new n16({ view: n23, tool: i23, object: this._object }), i23.addHandles(this._createMoveXYObjectDragPipeline()), this.moveZManipulator = new _9(n23, 0), this.moveZManipulator.state |= Si, i23.manipulators.add(this.moveZManipulator), i23.addHandles(this._createMoveZDragPipeline()), i23.addHandles(i23.events.on("translate-stop", () => {
      this._moveXYTooltipInfo = null, this._moveZTooltipInfo = null;
    }));
  }
  destroy() {
    this.moveXYObjectManipulation.destroy(), this._tool.manipulators.remove(this.moveZManipulator), this.moveZManipulator.destroy();
  }
  forEachManipulator(t26) {
    this.moveXYObjectManipulation.forEachManipulator(t26), t26(this.moveZManipulator, 0);
  }
  updateManipulators(t26, e23) {
    const n23 = this.moveZManipulator, r27 = x(f7.get(), t26, Math.PI);
    r27[12] = 0, r27[13] = 0, r27[14] = 0, n23.modelTransform = r27, n23.renderLocation = c3(c4.get(), e23.origin, e23.basis1);
  }
  getUpdatedTooltipInfo() {
    return this.moveXYObjectManipulation.grabbing || this.moveXYObjectManipulation.dragging ? this._computeMoveXYTooltipInfo() : this.moveZManipulator.focused ? this._computeMoveZTooltipInfo() : null;
  }
  _computeMoveXYTooltipInfo() {
    const t26 = this._tool, o20 = this._moveXYTooltipInfo ??= new i11({ sketchOptions: t26.sketchOptions });
    if (this.moveXYObjectManipulation.dragging) {
      const e23 = this._bounds, i23 = e23.mapBoundsStart.origin, n23 = e23.mapBounds.origin, { renderSpatialReference: a28 } = t26.view;
      if (!a28) return null;
      const s21 = this._automaticLengthMeasurementUtils.autoDistance2D(i23, n23, a28);
      if (null == s21) return null;
      o20.distance = s21;
    } else o20.distance = d7;
    return o20;
  }
  _computeMoveZTooltipInfo() {
    const t26 = this._tool, o20 = this._moveZTooltipInfo ??= new i18({ sketchOptions: t26.sketchOptions });
    if (this.moveZManipulator.dragging) {
      const e23 = this._bounds, i23 = e23.mapBoundsStart.origin, n23 = e23.mapBounds.origin, { renderSpatialReference: a28 } = t26.view;
      if (!a28) return null;
      const s21 = d9(i23, n23, a28);
      if (null == s21) return null;
      o20.distance = s21;
    } else o20.distance = d7;
    return o20;
  }
  _createMoveXYObjectDragPipeline() {
    return this.moveXYObjectManipulation.createDragPipeline((t26, e23, o20) => this._buildMoveDragPipeline(e23, o20));
  }
  _createMoveZDragPipeline() {
    if (!this._operations) return e();
    const e23 = this._operations.data.spatialReference;
    return p8(this.moveZManipulator, (t26, o20, i23) => {
      const a28 = t3(t26.renderLocation), s21 = o20.next(T5(this._tool.view, a28, e23)).next(M7());
      this._buildMoveDragPipeline(s21, i23);
    });
  }
  _buildMoveDragPipeline(t26, e23) {
    const { _tool: o20, _object: i23 } = this;
    t26.next((t27) => ("start" === t27.action && (o20.inputState = { type: "move" }, this._bounds.backupMapBounds(), o20.events.emit("translate-start", { object: i23, dxScreen: t27.screenDeltaX, dyScreen: t27.screenDeltaY })), t27)).next(z5()).next(this._updateGeometry()).next((t27) => {
      const e24 = { object: i23, dxScreen: t27.screenDeltaX, dyScreen: t27.screenDeltaY };
      switch (t27.action) {
        case "start":
        case "update":
          (t27.mapEnd.x - t27.mapStart.x || t27.mapEnd.y - t27.mapStart.y || (t27.mapEnd.z ?? 0) - (t27.mapStart.z ?? 0)) && o20.events.emit("translate", e24);
          break;
        case "end":
          o20.inputState = null, o20.events.emit("translate-stop", e24);
      }
      return t27;
    }), e23.next(() => {
      null != o20.inputState && o20.events.emit("translate-stop", { object: i23, dxScreen: 0, dyScreen: 0 }), o20.cancelDrag();
    });
  }
  _updateGeometry() {
    const t26 = this._tool;
    return (e23) => {
      if (null == t26.inputState || "move" !== t26.inputState.type) return e23;
      const o20 = "start" === e23.action ? 0 : 1;
      if (this._operations) {
        const t27 = this._operations.move(e23.mapDeltaX, e23.mapDeltaY, e23.mapDeltaZ, o20);
        this._bounds.updateMapBoundsFromOperation(t27);
      }
      return e23;
    };
  }
};

// node_modules/@arcgis/core/views/3d/analysis/images/generateTextures.js
var t24 = "theme-style";
function e22(t26, e23) {
  return a25(r25(n19(o18(t26), e23)), e23.size);
}
function n19(e23, { accentColor: n23, contrastColor: o20 }) {
  const r27 = n23.toHex(), a28 = n23.a, s21 = o20.toHex(), i23 = o20.a, c25 = e23.getElementsByTagNameNS("http://www.w3.org/2000/svg", "style").namedItem(t24);
  return c25 && (c25.innerHTML = `
      .contrast-fill { fill: ${s21}; fill-opacity: ${i23}; }
      .contrast-stroke { stroke: ${s21}; stroke-opacity: ${i23};  }
      .accent-fill { fill: ${r27}; fill-opacity: ${a28}; }
      .accent-stroke { stroke: ${r27}; stroke-opacity:  ${a28}; }`), e23;
}
function o18(t26) {
  const e23 = t26.split(",")[1], n23 = atob(e23);
  return new DOMParser().parseFromString(n23, "image/svg+xml");
}
function r25(t26) {
  const e23 = new XMLSerializer().serializeToString(t26);
  return `data:image/svg+xml;base64,${btoa(e23)}`;
}
function a25(t26, e23) {
  const n23 = new Image(e23, e23);
  return n23.src = t26, n23;
}

// node_modules/@arcgis/core/views/3d/analysis/images/heading-rotate-svg.js
var I10 = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSI+PHN0eWxlIGlkPSJ0aGVtZS1zdHlsZSI+LmNvbnRyYXN0LWZpbGx7ZmlsbDojZmZmfS5jb250cmFzdC1zdHJva2V7c3Ryb2tlOiNmZmZ9LmFjY2VudC1maWxse2ZpbGw6I2ZmN2YwMDtmaWxsLW9wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBkPSJNMjggMGEyOCAyOCAwIDEgMSAwIDU2IDI4IDI4IDAgMCAxIDAtNTYiIGNsYXNzPSJhY2NlbnQtZmlsbCIvPjxwYXRoIHN0cm9rZS13aWR0aD0iNC45OSIgZD0iTTIwLjA1IDQwLjg2YTE1LjA1IDE1LjA1IDAgMCAwIDE3LjE0LTEuNSAxNS4wNSAxNS4wNSAwIDAgMCA0LjQ3LTE2LjY1IDE1LjA1IDE1LjA1IDAgMCAwLTIyLjcyLTcuMTUgMTUuMDUgMTUuMDUgMCAwIDAtNS41IDcuMTUiIGNsYXNzPSJjb250cmFzdC1zdHJva2UiLz48cGF0aCBkPSJtMTAuOTcgMzUuNTcgNS4zOCAxMi4wNyA3Ljc5LTEzLjQ3eiIgY2xhc3M9ImNvbnRyYXN0LWZpbGwiLz48L3N2Zz4=";

// node_modules/@arcgis/core/views/3d/analysis/images/Factory.js
var a26 = 64;
function l22(r27, l25) {
  const { accentColor: n23, contrastColor: c25, preMultiplyAlpha: i23 } = l25;
  return r27.fromData(`heading-rotate:[accent:${n23},contrast:${c25},size:${a26}]`, () => new M3(e22(I10, { accentColor: n23, contrastColor: c25, size: a26 }), { mipmap: true, reloadable: true, preMultiplyAlpha: i23 }));
}

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/ITexture.js
function t25(t26) {
  return !!t26.update;
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js
var g12 = class extends m4 {
  constructor(e23, i23) {
    super(e23, i23, new t12(u12, () => import("./ImageMaterial.glsl-UGFK7MQU.js")), j15(i23).locations);
  }
  _getPipelineState(t26, i23) {
    const { oitPass: u22, output: d21, hasOccludees: g15, cullFace: j16 } = t26;
    return T({ blending: o10(d21) ? a11(u22, true) : null, culling: _6(j16), depthTest: { func: p6(u22) }, depthWrite: i6(t26), drawBuffers: d5(u22, d21), colorWrite: d4, stencilWrite: g15 ? f10 : null, stencilTest: g15 ? i23 ? t13 : c7 : null, polygonOffset: m3(t26) });
  }
  initializePipeline(e23) {
    return this._occludeePipeline = this._getPipelineState(e23, true), this._getPipelineState(e23, false);
  }
  getPipeline(e23) {
    return e23 ? this._occludeePipeline : super.getPipeline();
  }
};
function j15(e23) {
  let t26 = f14;
  return e23.perspectiveInterpolation && (t26 = t26.clone().f32("perspectiveDivide")), t26;
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechniqueConfiguration.js
var i21 = class extends e9 {
  constructor(e23) {
    super(), this.draped = e23, this.cullFace = 0, this.enableOffset = true, this.writeDepth = true, this.hasOccludees = false, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.perspectiveInterpolation = true, this.textureCoordinateType = 0, this.emissionSource = 0, this.discardInvisibleFragments = true, this.occlusionPass = false, this.olidColorInstanced = false, this.snowCover = false;
  }
};
__decorate([i5({ count: 3 })], i21.prototype, "cullFace", void 0), __decorate([i5()], i21.prototype, "enableOffset", void 0), __decorate([i5()], i21.prototype, "writeDepth", void 0), __decorate([i5()], i21.prototype, "hasOccludees", void 0), __decorate([i5()], i21.prototype, "terrainDepthTest", void 0), __decorate([i5()], i21.prototype, "cullAboveTerrain", void 0), __decorate([i5()], i21.prototype, "perspectiveInterpolation", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js
var g13 = class extends i9 {
  constructor(e23) {
    super(e23, _11), this.supportsEdges = true, this.produces = /* @__PURE__ */ new Map([[2, (e24) => t10(e24)], [4, (e24) => e8(e24) && this.parameters.writeDepth], [8, (e24) => e8(e24) && !this.parameters.writeDepth], [18, (e24) => e8(e24) || t10(e24)]]), this._configuration = new i21(e23.draped);
  }
  dispose() {
    this.setParameters({ texture: void 0 });
  }
  getConfiguration(e23, t26) {
    return super.getConfiguration(e23, t26, this._configuration), this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.hasOccludees = t26.hasOccludees, this._configuration.oitPass = t26.oitPass, this._configuration.enableOffset = t26.camera.relativeElevation < l10, this._configuration.terrainDepthTest = t26.terrainDepthTest, this._configuration.cullAboveTerrain = t26.cullAboveTerrain, this._configuration.perspectiveInterpolation = this.parameters.perspectiveInterpolation, this._configuration;
  }
  get visible() {
    return true;
  }
  createGLMaterial(e23) {
    return new d20(e23);
  }
  createBufferWriter() {
    return new x12(j15(this.parameters));
  }
};
var d20 = class extends t11 {
  constructor(e23) {
    super({ ...e23, ...e23.material.parameters }), this.parameters = e23;
    const t26 = this._material.parameters.texture;
    t25(t26) && e23.textures.updater.add(t26);
  }
  dispose() {
    this.parameters.textures.updater.remove(this._material.parameters.texture);
  }
  beginSlot(e23) {
    return this.getTechnique(g12, e23);
  }
};
var x12 = class extends s10 {
  write(t26, r27, i23, s21, a28, o20) {
    for (const u22 of this.layout.fields.keys()) {
      const s22 = i23.get(u22);
      if (s22) if ("perspectiveDivide" === u22) {
        s7(1 === s22.size);
        const t27 = a28.getField(u22, f6);
        t27 && b10(s22, t27, o20);
      } else q4(u22, s22, t26, r27, a28, o20);
    }
    return null;
  }
};
var _11 = class extends a10 {
  constructor(e23, t26) {
    super(), this.texture = e23, this.draped = t26, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = 0, this.opacity = 1, this.perspectiveInterpolation = false;
  }
  get glTexture() {
    return this.texture.glTexture;
  }
};

// node_modules/@arcgis/core/views/3d/analysis/Slice/RotateManipulator.js
var h22 = class extends Y {
  constructor(i23, l25) {
    const a28 = D(i23.effectiveTheme.accentColor, 0.5), c25 = I2(i23.effectiveTheme.accentColor), m15 = l25(a28, c25), u22 = new g13({ draped: false, texture: m15.texture, writeDepth: false, renderOccluded: 16, isDecoration: true }), d21 = f19.calloutWidth, h24 = new J5({ width: d21, renderOccluded: 4, isDecoration: true }, i23.state.isGlobal);
    super({ view: i23, ...w13({ imageMaterial: u22, calloutMaterial: h24 }) }), this._material = u22, this._textureHandle = m15, this._themeHandle = l3(() => i23.effectiveTheme.accentColor, (i24) => {
      const o20 = D(i24, 0.5), s21 = I2(i24), a29 = this._textureHandle;
      this._textureHandle = l25(o20, s21), u22.setParameters({ texture: this._textureHandle.texture }), a29?.release(), h24.setParameters({ color: u7.toUnitRGBA(i24) });
    }, h);
  }
  destroy() {
    this._textureHandle = t2(this._textureHandle), this._themeHandle.remove(), this._material.dispose(), super.destroy();
  }
};
function w13({ imageMaterial: e23, calloutMaterial: t26 }) {
  const { focusMultiplier: r27, calloutLength: i23, discRadius: o20 } = f19, s21 = o20 * r27, a28 = (e24, t27) => {
    const r28 = [0, 1, 2, 2, 3, 0];
    return new m2(t27, [["position", new t8([i23 - e24, -e24, 0, i23 + e24, -e24, 0, i23 + e24, e24, 0, i23 - e24, e24, 0], r28, 3, true)], ["uv0", new t8([0, 0, 1, 0, 1, 1, 0, 1], r28, 2, true)]]);
  }, p18 = Mt(t26, [[0, 0, 0], [i23 - o20, 0, 0]]), f20 = Mt(t26, [[0, 0, 0], [i23 - s21, 0, 0]]), h24 = xi;
  return { autoScaleRenderObjects: false, collisionPriority: 1, collisionType: { type: "disc", direction: [0, 0, 1], offset: [i23, 0, 0] }, focusMultiplier: r27, radius: o20, renderObjects: [new t21(a28(o20, e23), 1 | h24), new t21(p18, 1 | h24), new t21(a28(s21, e23), 2 | h24), new t21(f20, 2 | h24)], state: h24 };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentRotate.js
var v16 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  constructor(t26, e23, o20) {
    this._tool = t26, this._bounds = e23, this._snapRotation = o20, this._rotateTooltipInfo = null, this._startAngle = 0, this._endAngle = 0;
    const r27 = this._tool, a28 = r27.view, n23 = !a28.stage?.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result;
    this.rotateManipulator = new h22(a28, (t27, e24) => l22(a28.stage.textures, { accentColor: t27, contrastColor: e24, preMultiplyAlpha: n23 })), r27.addHandles([this.rotateManipulator.events.on("grab-changed", (t27) => this._onGrabChanged(t27)), this._createRotateDragPipeline(this.rotateManipulator)]), r27.manipulators.add(this.rotateManipulator), r27.addHandles([r27.events.on("rotate-start", (t27) => this._startAngle = t27.angle), r27.events.on("rotate", (t27) => this._endAngle = t27.angle), r27.events.on("rotate-stop", () => {
      this._startAngle = 0, this._endAngle = 0;
    })]);
  }
  destroy() {
    this._tool.manipulators.remove(this.rotateManipulator), this.rotateManipulator.destroy();
  }
  forEachManipulator(t26) {
    t26(this.rotateManipulator, 3);
  }
  updateManipulators(t26, r27) {
    const a28 = this._bounds.mapBounds.plane[2] < 0 ? Math.PI : 0, n23 = l5(f7.get(), t26, a28);
    n23[12] = 0, n23[13] = 0, n23[14] = 0, this.rotateManipulator.modelTransform = n23, this.rotateManipulator.renderLocation = u6(c4.get(), r27.origin, r27.basis1);
  }
  getUpdatedTooltipInfo() {
    return this.rotateManipulator.focused ? this._computeRotateTooltipInfo() : null;
  }
  _computeRotateTooltipInfo() {
    const t26 = this._rotateTooltipInfo ??= new s15({ sketchOptions: this._tool.sketchOptions });
    return t26.angle = this._startAngle - this._endAngle, t26;
  }
  _onGrabChanged({ action: t26, screenPoint: e23 }) {
    const o20 = this._tool, r27 = this._bounds;
    if ("start" !== t26 || !e23) return;
    const a28 = ri(r27.displayBounds, o20.view.renderCoordsHelper, 1, j3()), n23 = l16(o20.view.state.camera, e23);
    K2(a28, n23, c4.get()) && (r27.backupMapBounds(), o20.inputState = { type: "rotate", rotatePlane: a28 });
  }
  _createRotateDragPipeline(e23) {
    const { _tool: o20, _object: r27 } = this;
    return p8(e23, (e24, a28, n23) => {
      const s21 = o20.inputState;
      null != s21 && (a28.next((t26) => ("start" === t26.action && o20.events.emit("rotate-start", { object: r27, angle: 0 }), t26)).next(P10(o20.view, s21.rotatePlane)).next(this._renderPlaneToAngle()).next(...this._snapRotation()).next(this._updateGeometry()).next((e25) => {
        const a29 = { object: r27, angle: M(e25.rotateAngle) };
        switch (e25.action) {
          case "start":
          case "update":
            o20.events.emit("rotate", a29);
            break;
          case "end":
            o20.inputState = null, o20.events.emit("rotate-stop", a29);
        }
        return e25;
      }), n23.next(() => {
        null != o20.inputState && o20.events.emit("rotate-stop", { object: r27, angle: 0 }), o20.cancelDrag();
      }));
    });
  }
  _renderPlaneToAngle() {
    return (t26) => {
      const e23 = j12(t26.renderStart, t26.renderEnd, this._bounds.displayBounds.origin, k2(t26.plane));
      return { ...t26, rotateAngle: e23 };
    };
  }
  _updateGeometry() {
    const t26 = this._bounds;
    return (e23) => {
      const o20 = s6(n3(), t26.mapBoundsStart.origin), s21 = "start" === e23.action ? 0 : 1;
      if (this._operations) {
        const r27 = this._operations.rotate(o20, e23.rotateAngle, s21, 1);
        G(t26.mapBoundsStart, t26.mapBounds), t26.updateMapBoundsFromOperation(r27);
      }
      return e23;
    };
  }
};

// node_modules/@arcgis/core/views/3d/analysis/Slice/ResizeManipulator.js
var b21 = class extends Y {
  constructor(o20, l25) {
    const n23 = bi(l25), m15 = n23 ? b20 : d18, f20 = m15 * s18, d21 = d18, u22 = { renderOccluded: 4, isDecoration: true }, j16 = new J5({ ...u22, width: m15 }, o20.state.isGlobal), b23 = new J5({ ...u22, width: f20 }, o20.state.isGlobal), v17 = new J5({ ...u22, width: d21 }, o20.state.isGlobal);
    super({ view: o20, ...h19, ...h23({ isCorner: n23, unfocusedMaterial: j16, focusedMaterial: b23, outlineMaterial: v17 }) }), this._themeHandle = l3(() => o20.effectiveTheme.accentColor, (t26) => {
      const r27 = u7.toUnitRGBA(t26);
      j16.setParameters({ color: r27 }), b23.setParameters({ color: r27 }), v17.setParameters({ color: r27 });
    }, h);
  }
  destroy() {
    this._themeHandle.remove(), super.destroy();
  }
};
function h23({ isCorner: e23, unfocusedMaterial: t26, focusedMaterial: r27, outlineMaterial: i23 }) {
  const s21 = e23 ? [r5(1, 0, 0), r5(0, 0, 0), r5(0, 1, 0)] : [r5(1, 0, 0), r5(-1, 0, 0)];
  return { renderObjects: [new t21(Mt(t26, s21), 1 | Ci), new t21(Mt(r27, s21), 2 | Ci), new t21(Mt(i23, s21), ki)], collisionType: { type: "line", paths: [s21] }, radius: e23 ? k12 : q13, state: Ci };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/extentUtils.js
var C5 = class {
  constructor(t26, i23) {
    this._tool = t26, this.mapBounds = z2(), this.mapBoundsStart = z2(), this.displayBounds = z2(), t26.addHandles(a3(() => t26.object, "modified-externally", () => this._resetMapBounds(), { onListenerAdd: () => this._resetMapBounds() })), this._onDisplayBoundsChanged = i23;
  }
  get displayBoundsMargin() {
    const { view: s21, object: t26 } = this._tool, i23 = t17(t26), o20 = s21.pointsOfInterest?.centerOnSurfaceFrequent.location ?? i23?.extent?.center;
    return o20 ? D12 * s21.pixelSizeAt(o20) : 0;
  }
  backupMapBounds() {
    G(this.mapBounds, this.mapBoundsStart);
  }
  updateDisplayBounds() {
    this._calculateDisplayBounds(), this._onDisplayBoundsChanged?.();
  }
  updateMapBoundsFromOperation(s21) {
    V2(s21, this.mapBounds), this.updateDisplayBounds();
  }
  updateMapBoundsFromOperationInverse(s21) {
    T2(s21, this.mapBounds), this.updateDisplayBounds();
  }
  _resetMapBounds() {
    this._calculateMapBounds(), this.updateDisplayBounds();
  }
  _calculateMapBounds() {
    const { view: s21, attachmentOrigin: i23, object: o20 } = this._tool, a28 = o20.operations?.data;
    if (!a28) return;
    const e23 = a28.geometry;
    this.spatialReference = e23.spatialReference;
    const n23 = n13(e23);
    l7(n23, n23, -1);
    const r27 = i23 ? s21.pixelSizeAt(i23, e23.spatialReference) : 0, p18 = O9 * r27, d21 = a28.coordinateHelper.hasZ() && "on-the-ground" !== o20.elevationInfo.mode;
    S4(n23, a28, p18, this.mapBounds, d21);
  }
  _calculateDisplayBounds() {
    const { view: s21, attachmentOrigin: t26 } = this._tool, i23 = t26?.z ?? u11(this.mapBounds.origin, s21.elevationProvider, o13.fromElevationInfo(this._tool.object.elevationInfo), s21.renderCoordsHelper);
    U13(this.mapBounds, i23 ?? 0, s21.renderCoordsHelper, this.spatialReference, this.displayBoundsMargin, this.displayBounds);
  }
};
var D12 = 10;
var O9 = 80;
function U13(s21, t26, c25, l25, m15 = 0, B4) {
  B4 || (B4 = z2());
  const M16 = c4.get();
  u6(M16, s21.origin, s21.basis1), u6(M16, M16, s21.basis2), c25.toRenderCoords(M16, l25, M16);
  const y14 = c4.get();
  u6(y14, s21.origin, s21.basis1), c3(y14, y14, s21.basis2), c25.toRenderCoords(y14, l25, y14);
  const j16 = c4.get();
  c3(j16, s21.origin, s21.basis1), c3(j16, j16, s21.basis2), c25.toRenderCoords(j16, l25, j16);
  const v17 = c4.get();
  c3(v17, s21.origin, s21.basis1), u6(v17, v17, s21.basis2), c25.toRenderCoords(v17, l25, v17), u6(B4.origin, M16, y14), u6(B4.origin, B4.origin, j16), u6(B4.origin, B4.origin, v17), g2(B4.origin, B4.origin, 0.25), c3(M16, M16, B4.origin), c3(y14, y14, B4.origin), c3(j16, j16, B4.origin), c3(v17, v17, B4.origin);
  const _12 = I(c4.get(), M16, y14, 0.5), R14 = I(c4.get(), j16, v17, 0.5);
  g2(R14, R14, -1), I(B4.basis1, _12, R14, 0.5);
  const x13 = I(c4.get(), M16, v17, 0.5), C6 = I(c4.get(), y14, j16, 0.5);
  g2(C6, C6, -1), I(B4.basis2, x13, C6, 0.5);
  const D13 = _4(c4.get(), B4.basis1, B4.basis2);
  _4(B4.basis2, D13, B4.basis1), A(B4.basis1, B4.basis1);
  const O11 = Math.max(Math.abs(P2(B4.basis1, M16)), Math.abs(P2(B4.basis1, y14)), Math.abs(P2(B4.basis1, j16)), Math.abs(P2(B4.basis1, v17)));
  A(B4.basis2, B4.basis2);
  const U14 = Math.max(Math.abs(P2(B4.basis2, M16)), Math.abs(P2(B4.basis2, y14)), Math.abs(P2(B4.basis2, j16)), Math.abs(P2(B4.basis2, v17)));
  g2(B4.basis1, B4.basis1, O11 + m15), g2(B4.basis2, B4.basis2, U14 + m15);
  const S13 = s6(c4.get(), s21.origin);
  return S13[2] = t26, c25.toRenderCoords(S13, l25, S13), U2(S13, D13, B4.plane), R3(B4.plane, B4.origin, B4.origin), J4(B4), B4;
}
function S11(s21, t26, i23, a28) {
  return c3(H7, c3(H7, s21.origin, s21.basis1), s21.basis2), q3(A11, H7, s21.basis1, 2), q3(k13, A11, s21.basis2, 2), q3(I12, H7, s21.basis2, 2), H7[2] = A11[2] = k13[2] = I12[2] = t26, e14({ topLeft: I12, topRight: k13, bottomRight: A11, bottomLeft: H7, spatialReference: i23, automaticLengthMeasurementUtils: a28 });
}
var I12 = n3();
var k13 = n3();
var A11 = n3();
var H7 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentScale.js
var b22 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  get zMax() {
    if (!this._zMaxDirty || !this._operations) return this._zMax;
    const t26 = this._operations.data;
    if (t26.geometry.hasZ) {
      const e23 = t26.coordinateHelper;
      this._zMax = Number.NEGATIVE_INFINITY;
      for (const s21 of t26.parts) for (const t27 of s21.vertices) {
        const s22 = e23.getZ(t27.pos) ?? 0;
        this._zMax = Math.max(s22, this._zMax);
      }
    } else this._zMax = 0;
    return this._zMaxDirty = false, this._zMax;
  }
  constructor(t26, e23, s21) {
    this._tool = t26, this._bounds = e23, this._preserveAspectRatioStep = s21, this._resizeHandles = [{ direction: [1, 0] }, { direction: [1, 1] }, { direction: [0, 1] }, { direction: [-1, 1] }, { direction: [-1, 0] }, { direction: [-1, -1] }, { direction: [0, -1] }, { direction: [1, -1] }], this._displayBoundsStart = z2(), this._displayBoundsMarginStart = 0, this._zMax = 0, this._zMaxDirty = true;
    const a28 = this._tool, i23 = a28.view;
    this.resizeManipulators = this._resizeHandles.map((t27) => {
      const e24 = new b21(i23, t27);
      return a28.addHandles([e24.events.on("grab-changed", (t28) => this._onGrabChanged(t28)), this._createResizeDragPipeline(e24, t27)]), e24;
    }), a28.manipulators.addMany(this.resizeManipulators), this._operations && a28.addHandles(this._operations.data.on("change", () => {
      "resize" !== a28.inputState?.type && (this._zMaxDirty = true);
    }));
  }
  destroy() {
    this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    });
  }
  forEachManipulator(t26) {
    this.resizeManipulators.forEach((e23) => t26(e23, 2));
  }
  updateManipulators(t26, e23) {
    this.resizeManipulators.forEach((s21, a28) => {
      li(s21, this._resizeHandles[a28], t26, e23);
    });
  }
  getUpdatedTooltipInfo() {
    if (!this.resizeManipulators.some((t27) => t27.focused)) return null;
    const t26 = this._tooltipInfo ??= new s16({ sketchOptions: this._tool.sketchOptions }), e23 = S11(this._bounds.mapBounds, this.zMax, this._bounds.spatialReference, this._tool.automaticLengthMeasurementUtils);
    return e23 && (t26.xSize = e23.xSize, t26.ySize = e23.ySize), this.resizeManipulators.some((t27) => t27.dragging) || (t26.xScale = 1, t26.yScale = 1), t26;
  }
  _onGrabChanged({ action: t26, screenPoint: e23 }) {
    const s21 = this._tool, a28 = this._bounds;
    if ("start" !== t26 || !e23) return;
    const i23 = l16(s21.view.state.camera, e23);
    K2(a28.displayBounds.plane, i23, c4.get()) && (a28.backupMapBounds(), G(a28.displayBounds, this._displayBoundsStart), this._displayBoundsMarginStart = a28.displayBoundsMargin, s21.inputState = { type: "resize" });
  }
  _createResizeDragPipeline(t26, e23) {
    const { _tool: s21, _object: a28 } = this;
    return p8(t26, (t27, i23, o20) => {
      null != s21.inputState && (i23.next((t28) => ("start" === t28.action && s21.events.emit("scale-start", { object: a28, xScale: 1, yScale: 1 }), { ...t28, handle: e23 })).next(P10(s21.view, this._displayBoundsStart.plane)).next(this._renderPlaneToFactors()).next(...this._preserveAspectRatioStep()).next(this._updateGeometry()).next((t28) => {
        const e24 = this._tooltipInfo;
        e24 && (e24.xScale = t28.factor1, e24.yScale = t28.factor2);
        const i24 = { object: a28, xScale: t28.factor1, yScale: t28.factor2 };
        switch (t28.action) {
          case "start":
          case "update":
            s21.events.emit("scale", i24);
            break;
          case "end":
            s21.inputState = null, s21.events.emit("scale-stop", i24);
        }
        return t28;
      }), o20.next(() => {
        null != s21.inputState && s21.events.emit("scale-stop", { object: a28, xScale: 1, yScale: 1 }), s21.cancelDrag();
      }));
    });
  }
  _renderPlaneToFactors() {
    const t26 = this._bounds;
    return (e23) => {
      const s21 = this._displayBoundsStart, c25 = e23.handle.direction, p18 = t26.displayBoundsMargin, l25 = this._displayBoundsMarginStart, d21 = s6(c4.get(), s21.origin);
      q3(d21, d21, s21.basis1, -c25[0]), q3(d21, d21, s21.basis2, -c25[1]);
      const u22 = c3(c4.get(), e23.renderEnd, d21), m15 = c3(c4.get(), e23.renderStart, d21), S13 = bi(e23.handle), g15 = fi(s21), y14 = fi(t26.displayBounds) / g15, x13 = (t27, e24) => {
        if (0 === t27) return 1;
        let s22 = r10(e24), a28 = 0.5 * t27 * P2(e24, u22) / s22;
        const i23 = a28 < 0 ? -1 : 1;
        if (S13) {
          a28 += (s22 - 0.5 * t27 * P2(e24, m15) / s22) * i23 * y14;
        }
        const o20 = s22 < 1.5 * l25 ? 1 : z13;
        return s22 = Math.max(s22 - l25, z13), i23 > 0 && (a28 -= p18), i23 * Math.max(i23 * (a28 / s22), o20);
      };
      return { ...e23, factor1: x13(c25[0], s21.basis1), factor2: x13(c25[1], s21.basis2) };
    };
  }
  _updateGeometry() {
    const o20 = this._bounds;
    return (r27) => {
      const n23 = s6(n3(), o20.mapBoundsStart.origin);
      q3(n23, n23, o20.mapBoundsStart.basis1, -r27.handle.direction[0]), q3(n23, n23, o20.mapBoundsStart.basis2, -r27.handle.direction[1]);
      const p18 = o4(n7(), o20.mapBoundsStart.basis1[0], o20.mapBoundsStart.basis1[1]);
      v(p18, p18);
      const d21 = "start" === r27.action ? 0 : 1;
      if (this._operations) {
        const t26 = this._operations.scale(n23, p18, r27.factor1, r27.factor2, d21, 1);
        G(o20.mapBoundsStart, o20.mapBounds), o20.updateMapBoundsFromOperation(t26);
      }
      return r27;
    };
  }
};
var z13 = 1e-6;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/PreserveAspectRatio.js
var a27 = class {
  constructor() {
    this._lastDragEvent = null, this._next = null, this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t26) {
    if (this._enabled !== t26 && null != this._lastDragEvent && null != this._next) {
      const e23 = { ...this._lastDragEvent, action: "update" };
      t26 && n20(e23), this._next.execute(e23);
    }
    this._enabled = t26;
  }
  createDragEventPipelineStep() {
    this._lastDragEvent = null;
    const t26 = new D2();
    return this._next = t26, [(t27) => (this._lastDragEvent = "end" !== t27.action ? { ...t27 } : null, this._enabled && n20(t27), t27), t26];
  }
  get test() {
  }
};
function n20(e23) {
  const a28 = bi(e23.handle) ? Math.max(Math.abs(e23.factor1), Math.abs(e23.factor2)) : 0 === e23.handle.direction[0] ? Math.abs(e23.factor2) : Math.abs(e23.factor1);
  e23.factor1 = e23.factor1 < 0 ? -a28 : a28, e23.factor2 = e23.factor2 < 0 ? -a28 : a28;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/SnapRotation.js
var n21 = class {
  constructor() {
    this._lastDragEvent = null, this._next = null, this.incrementRadians = s3(5), this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t26) {
    if (this._enabled !== t26 && null != this._lastDragEvent && null != this._next) {
      const e23 = { ...this._lastDragEvent, action: "update" };
      t26 && this._adjustRotation(e23), this._next.execute(e23);
    }
    this._enabled = t26;
  }
  createDragEventPipelineStep() {
    this._lastDragEvent = null;
    const t26 = new D2();
    return this._next = t26, [(t27) => (this._lastDragEvent = "end" !== t27.action ? { ...t27 } : null, this._enabled && this._adjustRotation(t27), t27), t26];
  }
  _adjustRotation(t26) {
    t26.rotateAngle = Math.round(t26.rotateAngle / this.incrementRadians) * this.incrementRadians;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ExtentTransformTool.js
var O10 = class extends r16 {
  get updating() {
    return !!this.object.updating;
  }
  constructor(t26) {
    super(t26), this.events = new i2(), this.enableZ = true, this.enableScaling = true, this.enableRotation = true, this.sketchOptions = new l11(), this._preserveAspectRatio = new a27(), this._snapRotation = new n21(), this.grabbing = false, this.inputState = null, this._attachmentOrigin = null, this.type = "transform-3d", this._outlineVisualElement = null;
  }
  initialize() {
    const { view: t26, object: e23 } = this, n23 = this._bounds = new C5(this, () => this._updateManipulators());
    this._extentMove = new _10(this, n23, this.automaticLengthMeasurementUtils), this._extentScale = new b22(this, n23, () => this._preserveAspectRatio.createDragEventPipelineStep()), this._extentRotate = new v16(this, n23, () => this._snapRotation.createDragEventPipelineStep()), this.addHandles([l3(() => this.enableZ, () => this._updateManipulatorAvailability(this._extentMove.moveZManipulator, 0)), l3(() => this.enableScaling, () => this._extentScale.forEachManipulator((t27) => this._updateManipulatorAvailability(t27, 2))), l3(() => this.enableRotation, () => this._updateManipulatorAvailability(this._extentRotate.rotateManipulator, 3))]), this._updateManipulators(), this._updateAllManipulatorAvailability();
    const s21 = l17({ view: t26, object: e23, forEachManipulator: (t27) => this._forEachManipulator(t27), onManipulatorsChanged: () => e() });
    if (null != s21) {
      const { visualElement: t27 } = s21;
      t27 instanceof R9 && (this._outlineVisualElement = t27, this.addHandles(t27.events.on("attachment-origin-changed", () => this._bounds.updateDisplayBounds()))), this.addHandles(s21);
    }
    this.addHandles([e23.on("committed", () => this._onGeometryChanged()), l3(() => this.object.visible, () => this._updateAllManipulatorAvailability()), l3(() => this.object.isDraped, () => this._graphicDrapedChanged(), h), l3(() => t26.pointsOfInterest?.centerOnSurfaceFrequent.location, () => n23.updateDisplayBounds())]);
    const r27 = (t27) => {
      this.addHandles(t27.events.on("grab-changed", () => {
        this.grabbing = t27.grabbing, this._updateAllManipulatorAvailability();
      }));
    };
    this._forEachManipulator(r27);
    const l25 = (t27, i23) => {
      this.addHandles(t27.events.on("immediate-click", (t28) => {
        1 === i23 && this.events.emit("immediate-click", { ...t28, object: e23 }), t28.stopPropagation();
      }));
    };
    this._forEachManipulator(l25), this._initializeTooltip(), this.finishToolCreation();
  }
  destroy() {
    this._extentMove.destroy(), this._extentScale.destroy(), this._extentRotate.destroy(), this.tooltip.destroy(), this._set("view", null), this._set("object", null);
  }
  _initializeTooltip() {
    const { view: t26 } = this;
    this.tooltip = R5(() => ({ view: t26, options: this.sketchOptions.tooltips }));
    const e23 = () => {
      this.tooltip.info = this._getUpdatedTooltipInfo();
    };
    this.addHandles([l3(() => this.sketchOptions.tooltips.effectiveEnabled, e23), l3(() => this.preserveAspectRatio, e23)]), this._forEachManipulator((t27) => {
      this.addHandles([t27.events.on(["focus-changed", "grab-changed"], e23), t27.events.on("drag", (t28) => {
        "cancel" === t28.action ? this.tooltip.clear() : e23();
      })]);
    });
  }
  _getUpdatedTooltipInfo() {
    return this.sketchOptions.tooltips.effectiveEnabled ? this._extentMove.getUpdatedTooltipInfo() ?? this._extentScale.getUpdatedTooltipInfo() ?? this._extentRotate.getUpdatedTooltipInfo() : null;
  }
  _onGeometryChanged() {
    this._bounds.updateDisplayBounds();
  }
  _graphicDrapedChanged() {
    this.removeHandles(S12), this._bounds.updateDisplayBounds(), this.object.isDraped && this.addHandles(this.view.elevationProvider.on("elevation-change", (t26) => {
      null != this._attachmentOrigin && E2(t26.extent, this._attachmentOrigin.x, this._attachmentOrigin.y) && this._bounds.updateDisplayBounds();
    }), S12);
  }
  _updateManipulators() {
    if (!this.visible) return;
    const t26 = this._bounds.displayBounds, e23 = si(t26, f7.get());
    this._extentMove.updateManipulators(e23, t26), this._extentScale.updateManipulators(e23, t26), this._extentRotate.updateManipulators(e23, t26);
  }
  _updateAllManipulatorAvailability() {
    this._forEachManipulator((t26, e23) => this._updateManipulatorAvailability(t26, e23));
  }
  _updateManipulatorAvailability(t26, e23) {
    const i23 = this.grabbing && !t26.grabbing;
    if (t26.interactive = !i23, t26 instanceof Y) {
      const o20 = this.object.visible, a28 = this.enableZ && o16(this.object.operations, this.object.elevationInfo);
      switch (e23) {
        case 3:
          t26.available = o20 && this.enableRotation;
          break;
        case 2:
          t26.available = o20 && (this.enableScaling || this.enableRotation || a28), t26.interactive = !i23 && this.enableScaling, t26.state = this.enableScaling ? Ci : ki;
          break;
        case 0:
          t26.available = o20 && a28;
          break;
        default:
          t26.available = o20;
      }
    }
  }
  _forEachManipulator(t26) {
    this._extentMove.forEachManipulator(t26), this._extentScale.forEachManipulator(t26), this._extentRotate.forEachManipulator(t26);
  }
  get preserveAspectRatio() {
    return this._preserveAspectRatio.enabled;
  }
  set preserveAspectRatio(t26) {
    this._preserveAspectRatio.enabled = t26, this._set("preserveAspectRatio", t26);
  }
  get snapRotation() {
    return this._snapRotation.enabled;
  }
  set snapRotation(t26) {
    this._snapRotation.enabled = t26, this._set("snapRotation", t26);
  }
  get attachmentOrigin() {
    const t26 = this.object.isDraped ? null : this._outlineVisualElement?.attachmentOrigin;
    return this._attachmentOrigin = t26 ?? this.object.origin ?? t17(this.object)?.extent?.center, this._attachmentOrigin;
  }
  reset() {
  }
  cancelDrag() {
    if (this.canUndo) {
      const t26 = this.object.operations?.undo();
      t26 && this._bounds.updateMapBoundsFromOperationInverse(t26);
    }
    this.inputState = null;
  }
  get canUndo() {
    return !!this.object.operations?.canUndo;
  }
  undo() {
    if (null != this.inputState) this.view.activeTool = null;
    else if (this.canUndo) {
      const t26 = this.object.operations?.undo();
      t26 && this._bounds.updateMapBoundsFromOperationInverse(t26);
    }
  }
  get canRedo() {
    return !!this.object.operations?.canRedo;
  }
  redo() {
    if (this.canRedo) {
      const t26 = this.object.operations?.redo();
      t26 && this._bounds.updateMapBoundsFromOperation(t26);
    }
  }
  get test() {
  }
};
__decorate([m()], O10.prototype, "updating", null), __decorate([m({ constructOnly: true, nonNullable: true })], O10.prototype, "view", void 0), __decorate([m({ constructOnly: true })], O10.prototype, "automaticLengthMeasurementUtils", void 0), __decorate([m({ constructOnly: true, nonNullable: true })], O10.prototype, "object", void 0), __decorate([m()], O10.prototype, "enableZ", void 0), __decorate([m()], O10.prototype, "enableScaling", void 0), __decorate([m()], O10.prototype, "enableRotation", void 0), __decorate([m({ constructOnly: true, type: l11 })], O10.prototype, "sketchOptions", void 0), __decorate([m()], O10.prototype, "preserveAspectRatio", null), __decorate([m()], O10.prototype, "snapRotation", null), __decorate([m()], O10.prototype, "grabbing", void 0), __decorate([m()], O10.prototype, "inputState", void 0), __decorate([m({ readOnly: true })], O10.prototype, "type", void 0), __decorate([m()], O10.prototype, "tooltip", void 0), O10 = __decorate([a2("esri.views.3d.interactive.editingTools.transform.ExtentTransformTool")], O10);
var S12 = "draped-elevation-changes";

// node_modules/@arcgis/core/views/3d/interactive/editingTools/undoRecords.js
function r26(e23) {
  return null != e23 && "mesh" === e23.type ? o19(e23) : n22(e23);
}
function o19(e23) {
  return t6(e23.vertexSpace) ? i22(e23, e23.transform, e23.vertexSpace) : l23(e23);
}
function n22(e23) {
  let t26 = e23, r27 = null;
  return { undo(e24) {
    r27 = e24.geometry, e24.geometry = t26;
  }, redo(e24) {
    t26 = e24.geometry, e24.geometry = r27;
  } };
}
function i22(t26, r27, o20) {
  let n23 = r27?.clone(), i23 = t3(o20.origin), l25 = null, u22 = null;
  return { undo: () => {
    l25 = t26.transform?.clone(), u22 = t3(o20.origin), t26.transform = n23, t26.vertexSpace.origin = i23;
  }, redo: () => {
    n23 = t26.transform?.clone(), i23 = t3(o20.origin), t26.transform = l25, t26.vertexSpace.origin = u22;
  } };
}
function l23(e23) {
  let t26, r27 = e23.vertexAttributes.clonePositional();
  return { undo: () => {
    t26 = e23.vertexAttributes.clonePositional(), e23.vertexAttributes = r27;
  }, redo: () => {
    r27 = e23.vertexAttributes.clonePositional(), e23.vertexAttributes = t26;
  } };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatedObject3DGraphic.js
var g14 = Symbol();
var l24 = class extends l2 {
  get operations() {
    return this._operations;
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get elevationInfo() {
    return c9(this.graphic);
  }
  get visible() {
    return this._graphicState.displaying;
  }
  get isDraped() {
    return this._graphicState.isDraped;
  }
  get origin() {
    return O7(this.view, this.graphic);
  }
  constructor(t26) {
    super(t26), this._updatingHandles = new h4();
  }
  destroy() {
    this._operations = u2(this._operations), this._updatingHandles.destroy();
  }
  initialize() {
    this._graphicState = new e13({ graphic: this.graphic }), this._graphicState.on("changed", () => this.emit("committed")), this.addHandles(this.view.trackGraphicState(this._graphicState)), this.addHandles(this._updatingHandles.add(() => this.graphic.geometry, (t26) => {
      const e23 = this._operations?.data.geometry;
      if (t26 !== e23) {
        if (!t26 || "multipoint" === t26?.type || "extent" === t26?.type) return u2(this._operations), this.removeHandles(g14), void (this._operations = null);
        if (this._operations?.trySetGeometry(t26)) this.emit("modified-externally");
        else {
          u2(this._operations), this.removeHandles(g14);
          const e24 = g3.fromGeometry(t26, this.view.state.viewingMode);
          this._operations = e24, this.addHandles(e24.data.on("change", () => this.graphic.geometry = e24.data.geometry), g14);
        }
      }
    }, w2));
  }
  createManipulator(t26) {
    return new S3({ view: this.view, graphic: this.graphic, ...t26 });
  }
  maskOccludee() {
    return this.view.maskOccludee(this.graphic);
  }
  endInteraction() {
    const t26 = this.graphic.geometry;
    "mesh" === t26?.type && this.graphic.notifyMeshTransformChanged({ action: 2 });
  }
  toMap(t26) {
    return this.view.toMap(t26, { include: [this.graphic] });
  }
  createUndoRecord() {
    const { graphic: { geometry: t26 } } = this;
    return r26(t26);
  }
};
__decorate([m({ constructOnly: true })], l24.prototype, "view", void 0), __decorate([m({ constructOnly: true })], l24.prototype, "graphic", void 0), __decorate([m()], l24.prototype, "_operations", void 0), __decorate([m()], l24.prototype, "operations", null), __decorate([m()], l24.prototype, "updating", null), l24 = __decorate([a2("esri.views.3d.interactive.editingTools.ManipulatedObject3DGraphic")], l24);
export {
  b16 as DrawGraphicTool3D,
  O10 as ExtentTransformTool,
  l24 as ManipulatedObject3DGraphic,
  J7 as MoveTool3D,
  h20 as ReshapeTool3D,
  E12 as TransformTool3D
};
//# sourceMappingURL=editingTools-WAH3GP4C.js.map
