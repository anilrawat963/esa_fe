{
  "version": 3,
  "sources": ["../../@arcgis/core/libs/parquet/loadParquetModule.js", "../../@arcgis/core/libs/parquet/parquet.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";let n=null;async function s(){return n||(n=a()),n}async function a(){const n=await import(\"../../chunks/bundle.js\");return await n.default({module_or_path:t(\"esri/libs/parquet/pkg/bundle_bg.wasm\")}),n}export{s as loadParquetModule};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import\"../../core/has.js\";import{QueueProcessor as r}from\"../../core/QueueProcessor.js\";import{isBlobProtocol as n}from\"../../core/urlUtils.js\";import{loadParquetModule as o}from\"./loadParquetModule.js\";import{MultiscaleGeometryField as a,GeometryInfo as s,GeometryType as i,PrimaryGeometryField as u}from\"../../chunks/bundle.js\";const c=new r({concurrency:8,process:async t=>{const{data:r}=await e(t.url,t.options);return r}}),l=e=>async function(t,r,n,o){const a=e?.(),s=a??{};return await c.push({url:t,options:{responseType:\"array-buffer\",query:s,headers:{range:`bytes=${r}-${n}`}}})},p=t=>async function(r){if(n(r)){const{data:t}=await e(r,{responseType:\"blob\"});return t.size}const{data:o}=await e(r,{responseType:\"native\",method:\"head\",query:t?.()}),a=o.headers.get(\"Content-Length\");if(null==a)throw new Error(\"Unable to parse content length\");return parseInt(a,10)};function m(e){switch(e){case\"esriGeometryPoint\":return i.Point;case\"esriGeometryPolygon\":return i.Polygon;case\"esriGeometryPolyline\":return i.Polyline;case\"esriGeometryMultipoint\":return i.Multipoint;default:throw new t(\"parquet\",`Found unexpected GeometryType: ${e}`)}}function f(e){switch(e.encoding.type){case\"wkb\":return u.fromWkb(e.encoding.field);case\"location\":{const{yField:t,xField:r}=e.encoding;return u.fromLocation(t,r)}}}function y(e,r){const n=e.spatialReference.wkid,o=r.wkid;if(!n||!o)throw new t(\"parquet\",\"Unable to create ParquetFile, in and out wkid must be specified\");const i=m(e.geometryType),u=f(e),c=[];if(\"xz\"===e.displayOptimization?.mode){const t=e.displayOptimization.multiscale;for(const e of t.levels??[]){const[t,r]=e.transform.translate,[n,o]=e.transform.scale,s=new Float64Array([t,r]),i=new Float64Array([n,o]);c.push(a.new(e.level,e.column,s,i))}}return s.new(i,n,o,u,c)}async function d(e,t={}){const{ParquetFile:r}=await o(),n=l(t.getCustomParameters),a=p(t.getCustomParameters),s=t.geometryInfo?y(t.geometryInfo,t.outSpatialReference??t.geometryInfo.spatialReference):null;return r.fromUrl(e,n,a,s)}function w(e){const t=e.keyValueMetadata(\"geo\");return null!=t?JSON.parse(t):null}function g(e){const t=e.keyValueMetadata(\"esri\");return null!=t?JSON.parse(t):null}export{d as createParquetFile,g as readEsriMetadata,w as readGeoMetadata};\n"],
  "mappings": "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",
  "names": ["n", "s", "n", "a", "s", "t", "c", "e", "r", "o", "i"]
}
