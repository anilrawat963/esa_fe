{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/ParquetEncodingBase.js", "../../@arcgis/core/layers/support/ParquetEncodingLocation.js", "../../@arcgis/core/layers/support/ParquetEncodingWkb.js", "../../@arcgis/core/layers/support/parquetUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{ClonableMixin as r}from\"../../core/Clonable.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends(r(e)){constructor(o){super(o),this.type=null}};o([s({type:[\"wkb\",\"location\"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],p.prototype,\"type\",void 0),p=o([t(\"esri.layers.support.ParquetEncodingBase\")],p);export{p as ParquetEncodingBase};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{ParquetEncodingBase as r}from\"./ParquetEncodingBase.js\";let i=class extends r{constructor(e){super(e),this.type=\"location\",this.latitudeFieldName=null,this.longitudeFieldName=null}};e([o({type:[\"location\"]})],i.prototype,\"type\",void 0),e([o({type:String,json:{name:\"yField\",write:{isRequired:!0}}})],i.prototype,\"latitudeFieldName\",void 0),e([o({type:String,json:{name:\"xField\",write:{isRequired:!0}}})],i.prototype,\"longitudeFieldName\",void 0),i=e([t(\"esri.layers.support.ParquetEncodingLocation\")],i);export{i as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import{ParquetEncodingBase as t}from\"./ParquetEncodingBase.js\";let s=class extends t{constructor(r){super(r),this.type=\"wkb\",this.primaryFieldName=null}};r([o({type:[\"wkb\"]})],s.prototype,\"type\",void 0),r([o({type:[\"counter-clockwise\"],json:{write:!0}})],s.prototype,\"orientation\",void 0),r([o({type:String,json:{name:\"field\",write:{isRequired:!0}}})],s.prototype,\"primaryFieldName\",void 0),s=r([e(\"esri.layers.support.ParquetEncodingWkb\")],s);export{s as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import t from\"../../core/Error.js\";import{JSONMap as o}from\"../../core/jsonMap.js\";import n from\"../../geometry/SpatialReference.js\";import i from\"./Field.js\";import{inferLocationInfo as r}from\"./locationUtils.js\";import l from\"./ParquetEncodingLocation.js\";import s from\"./ParquetEncodingWkb.js\";import{createParquetFile as a,readGeoMetadata as u,readEsriMetadata as m}from\"../../libs/parquet/parquet.js\";const c=new o({esriGeometryPoint:\"point\",esriGeometryPolygon:\"polygon\",esriGeometryPolyline:\"polyline\",esriGeometryMultipoint:\"multipoint\"});function p(e){return c.toJSON(e)}function f(e){return c.fromJSON(e)}function d(t,o={}){return y({urls:new e(t)},o)}async function y(e,o={}){if(e.urls.length<1)throw new t(\"parquet:bad-input\",\"At least one url must be specified\",e);if(e.geometryType&&e.spatialReference&&e.encoding&&e.fields)return e;const r=await a(e.urls.getItemAt(0),{getCustomParameters:()=>o.customParameters}),l=u(r),s={...e,file:r};null==s.fields&&(s.fields=r.fields().map(e=>i.fromJSON({name:e.name,alias:e.name,type:e.type}))),null==s.encoding&&(s.encoding=g(l,s.fields));const c=m(r);if(c)switch(c.mode){case\"z\":s.displayOptimization={mode:\"z\"};break;case\"xz\":{const e=c.multiscale;if(!e)throw new t(\"parquet:bad-format\",\"XZ display optimization requires multiscale geometries\");s.displayOptimization={mode:\"xz\",multiscale:e};break}}if(!s.encoding)return s;switch(s.encoding.type){case\"location\":null==s.spatialReference&&(s.spatialReference=n.WGS84),null==s.geometryType&&(s.geometryType=\"point\");break;case\"wkb\":{if(!l)return s;const e=l.primary_column,t=l.columns[e];if(s.geometryType||(s.geometryType=P(t)),s.spatialReference||(s.spatialReference=b(t)),s.fields)for(const o of Object.keys(l.columns))s.fields=s.fields.filter(e=>e.name!==o)}}return s}function g(e,t){if(null!=e){const t=e.primary_column,o=e.columns[t];return new s({primaryFieldName:t,orientation:\"counterclockwise\"===o.orientation?\"counter-clockwise\":null})}const o=r(t.map(e=>e.name));return o.latitudeFieldName&&o.longitudeFieldName?new l({latitudeFieldName:o.latitudeFieldName,longitudeFieldName:o.longitudeFieldName}):null}function w(e){switch(e){case\"Point\":return\"point\";case\"Polygon\":case\"MultiPolygon\":return\"polygon\";case\"LineString\":return\"polyline\";case\"MultiPoint\":return\"multipoint\";default:return null}}function P(e){const{geometry_types:o}=e,n=new Set;for(const t of o){const e=w(t);e&&n.add(e)}if(n.size>1)throw new t(\"parquet:unsupported\",\"Parquet mixed geometry types are not supported\",{geometryTypes:n});return 1===n.size?n.values().next().value:void 0}function b(e){const t=e.crs?.id?.code;return t&&\"number\"==typeof t?new n({wkid:t}):void 0}export{y as completeParquetLayerInfo,f as fromParquetJSONGeometryType,d as getParquetLayerInfo,c as parquetGeometryTypeKebabDict,p as toParquetJSONGeometryType};\n"],
  "mappings": "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",
  "names": ["o", "s", "p", "f", "o", "l", "s", "e", "m", "g", "c", "t", "n", "w"]
}
