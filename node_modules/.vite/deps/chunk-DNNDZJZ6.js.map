{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js", "../../@arcgis/core/chunks/ShadedColorMaterial.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{addCameraPosition as e}from\"./util/View.glsl.js\";import{FloatBindUniform as r}from\"../shaderModules/FloatBindUniform.js\";import{FloatPassUniform as i}from\"../shaderModules/FloatPassUniform.js\";import{glsl as o}from\"../shaderModules/glsl.js\";function n(n,c){if(!c.screenSizeEnabled)return;const t=n.vertex;e(t,c),t.uniforms.add(new r(\"perScreenPixelRatio\",e=>e.camera.perScreenPixelRatio),new i(\"screenSizeScale\",e=>e.screenSizeScale)).code.add(o`float computeRenderPixelSizeAt( vec3 pWorld ){\nvec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\nfloat viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));\nreturn viewDirectionDistance * perScreenPixelRatio;\n}\nvec3 screenSizeScaling(vec3 position, vec3 anchor){\nreturn position * screenSizeScale * computeRenderPixelSizeAt(anchor) + anchor;\n}`)}export{n as ScreenSizeScaling};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ScreenSizeScaling as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{SliceDraw as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{terrainDepthTest as n}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as s,addViewNormal as a}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{If as c,glsl as g}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{outputColorHighlightOID as m}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as v}from\"../views/webgl/ShaderBuilder.js\";function w(e){const w=new v;w.include(i),w.include(o,e),w.fragment.include(r,e),w.include(m,e),w.include(n,e);const{vertex:u,fragment:b}=w;return b.include(l),s(u,e),b.uniforms.add(new t(\"uColor\",e=>e.color)),w.attributes.add(\"position\",\"vec3\"),w.varyings.add(\"vWorldPosition\",\"vec3\"),e.screenSizeEnabled&&w.attributes.add(\"offset\",\"vec3\"),e.shadingEnabled&&(a(u),w.attributes.add(\"normal\",\"vec3\"),w.varyings.add(\"vViewNormal\",\"vec3\"),b.uniforms.add(new d(\"shadingDirection\",e=>e.shadingDirection)),b.uniforms.add(new t(\"shadedColor\",e=>f(e.shadingTint,e.color)))),u.main.add(g`\n    vWorldPosition = ${e.screenSizeEnabled?g`screenSizeScaling(offset, position)`:g`position`};\n    ${c(e.shadingEnabled,g`vec3 worldNormal = normal;\n           vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`)}\n    forwardViewPosDepth((view * vec4(vWorldPosition, 1.0)).xyz);\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  `),b.main.add(g`\n      discardBySlice(vWorldPosition);\n      discardByTerrainDepth();\n      ${e.shadingEnabled?g`vec3 viewNormalNorm = normalize(vViewNormal);\n             float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\n             vec4 finalColor = mix(uColor, shadedColor, shadingFactor);`:g`vec4 finalColor = uColor;`}\n      outputColorHighlightOID(finalColor, vWorldPosition, finalColor.rgb);`),w}function f(e,o){const r=1-e[3],i=e[3]+o[3]*r;return 0===i?(u[3]=i,u):(u[0]=(e[0]*e[3]+o[0]*o[3]*r)/i,u[1]=(e[1]*e[3]+o[1]*o[3]*r)/i,u[2]=(e[2]*e[3]+o[2]*o[3]*r)/i,u[3]=o[3],u)}const u=e(),b=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:\"Module\"}));export{b as S,w as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIwP,SAASA,GAAEA,IAAE,GAAE;AAAC,MAAG,CAAC,EAAE,kBAAkB;AAAO,QAAMC,KAAED,GAAE;AAAO,IAAEC,IAAE,CAAC,GAAEA,GAAE,SAAS,IAAI,IAAI,EAAE,uBAAsB,CAAAC,OAAGA,GAAE,OAAO,mBAAmB,GAAE,IAAIC,GAAE,mBAAkB,CAAAD,OAAGA,GAAE,eAAe,CAAC,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOjc;AAAC;;;ACP2nC,SAAS,EAAEE,IAAE;AAAC,QAAMC,KAAE,IAAI;AAAE,EAAAA,GAAE,QAAQ,CAAC,GAAEA,GAAE,QAAQC,IAAEF,EAAC,GAAEC,GAAE,SAAS,QAAQ,GAAED,EAAC,GAAEC,GAAE,QAAQC,IAAEF,EAAC,GAAEC,GAAE,QAAQ,GAAED,EAAC;AAAE,QAAK,EAAC,QAAOG,IAAE,UAASC,GAAC,IAAEH;AAAE,SAAOG,GAAE,QAAQJ,EAAC,GAAE,EAAEG,IAAEH,EAAC,GAAEI,GAAE,SAAS,IAAI,IAAIJ,GAAE,UAAS,CAAAA,OAAGA,GAAE,KAAK,CAAC,GAAEC,GAAE,WAAW,IAAI,YAAW,MAAM,GAAEA,GAAE,SAAS,IAAI,kBAAiB,MAAM,GAAED,GAAE,qBAAmBC,GAAE,WAAW,IAAI,UAAS,MAAM,GAAED,GAAE,mBAAiBK,GAAEF,EAAC,GAAEF,GAAE,WAAW,IAAI,UAAS,MAAM,GAAEA,GAAE,SAAS,IAAI,eAAc,MAAM,GAAEG,GAAE,SAAS,IAAI,IAAI,EAAE,oBAAmB,CAAAJ,OAAGA,GAAE,gBAAgB,CAAC,GAAEI,GAAE,SAAS,IAAI,IAAIJ,GAAE,eAAc,CAAAA,OAAGM,GAAEN,GAAE,aAAYA,GAAE,KAAK,CAAC,CAAC,IAAGG,GAAE,KAAK,IAAI;AAAA,uBACvqDH,GAAE,oBAAkB,yCAAuC,WAAW;AAAA,MACvFE,GAAEF,GAAE,gBAAe;AAAA,kEACyC,CAAC;AAAA;AAAA;AAAA,GAGhE,GAAEI,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA,QAGRJ,GAAE,iBAAe;AAAA;AAAA,2EAEgD,4BAA4B;AAAA,2EAC1B,GAAEC;AAAC;AAAC,SAASK,GAAEN,IAAEO,IAAE;AAAC,QAAMC,KAAE,IAAER,GAAE,CAAC,GAAES,KAAET,GAAE,CAAC,IAAEO,GAAE,CAAC,IAAEC;AAAE,SAAO,MAAIC,MAAG,EAAE,CAAC,IAAEA,IAAE,MAAI,EAAE,CAAC,KAAGT,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEO,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEC,MAAGC,IAAE,EAAE,CAAC,KAAGT,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEO,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEC,MAAGC,IAAE,EAAE,CAAC,KAAGT,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEO,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEC,MAAGC,IAAE,EAAE,CAAC,IAAEF,GAAE,CAAC,GAAE;AAAE;AAAC,IAAM,IAAE,EAAE;AAAV,IAAY,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["n", "t", "e", "r", "e", "w", "n", "u", "b", "p", "f", "o", "r", "i"]
}
