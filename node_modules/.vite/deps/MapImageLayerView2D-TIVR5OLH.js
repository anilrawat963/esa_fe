import {
  P,
  i as i4
} from "./chunk-VAWLO3Y4.js";
import {
  r
} from "./chunk-QCJFPBRP.js";
import {
  o
} from "./chunk-GD2WNXFD.js";
import "./chunk-KRLDYUK3.js";
import {
  O
} from "./chunk-UQ4NKDVH.js";
import {
  i as i5
} from "./chunk-VEW6BMSK.js";
import {
  r as r2
} from "./chunk-ZS4Q4DJE.js";
import "./chunk-6SXRWZMX.js";
import "./chunk-N3OIGAM3.js";
import "./chunk-E77VVW2C.js";
import "./chunk-PG3227VO.js";
import {
  M
} from "./chunk-FNGWHAZ7.js";
import {
  s
} from "./chunk-QHEXZ62Z.js";
import "./chunk-62W3XEE6.js";
import "./chunk-2XM57LB5.js";
import {
  i as i3
} from "./chunk-UXLDVCDU.js";
import "./chunk-JGWZMI5Q.js";
import "./chunk-43423NKQ.js";
import {
  b
} from "./chunk-T5PAMHK6.js";
import {
  d as d2
} from "./chunk-PZZ55S55.js";
import "./chunk-ALLCMCHO.js";
import "./chunk-NNZE65VM.js";
import "./chunk-RZOWZMPW.js";
import "./chunk-7LPDSYJP.js";
import "./chunk-MJIAJDWR.js";
import "./chunk-XQWYTOXM.js";
import "./chunk-RRK2YVM5.js";
import "./chunk-VIDAPS4J.js";
import {
  y
} from "./chunk-OVY2L7EL.js";
import "./chunk-INJCHY4H.js";
import "./chunk-G7FTSXBC.js";
import "./chunk-QTS3W27E.js";
import "./chunk-3RABUJDL.js";
import "./chunk-WJ3E33GQ.js";
import "./chunk-U3B7YMY7.js";
import "./chunk-F75XORHS.js";
import "./chunk-2U5X5TIX.js";
import "./chunk-2GRS3IMC.js";
import "./chunk-GVFNGMIY.js";
import "./chunk-RQGBRVDD.js";
import "./chunk-JPZOLUPV.js";
import "./chunk-DRHU543D.js";
import "./chunk-F7RQDGE7.js";
import "./chunk-GG4AQJJO.js";
import "./chunk-OGWYK5MD.js";
import "./chunk-4V63WUXV.js";
import "./chunk-TWE24CRT.js";
import "./chunk-Y3GEZC7J.js";
import "./chunk-U5TTP5E5.js";
import "./chunk-CXUJAI27.js";
import "./chunk-QENBEP2X.js";
import "./chunk-VZQ643XD.js";
import "./chunk-SMJWJAIA.js";
import "./chunk-WFCLXKCE.js";
import "./chunk-FHCV4NTV.js";
import "./chunk-M5JMVUW2.js";
import "./chunk-SIUG2XLL.js";
import "./chunk-XTEXJOLG.js";
import "./chunk-NH6FXYCM.js";
import "./chunk-YE4E5JCT.js";
import "./chunk-SXZO7ULH.js";
import "./chunk-VNSHGTPN.js";
import "./chunk-S5ZM63JC.js";
import "./chunk-XHNYLMJC.js";
import "./chunk-NHFKDWOM.js";
import "./chunk-ALR6N4CF.js";
import "./chunk-4X4BOGIG.js";
import "./chunk-EK7HOTRR.js";
import "./chunk-ODQ5APZK.js";
import "./chunk-BA6HYZ35.js";
import "./chunk-VGXUPJSS.js";
import "./chunk-ZVTEFYZX.js";
import "./chunk-LPUPM55U.js";
import "./chunk-IRBX64M6.js";
import "./chunk-2HGIYEIL.js";
import "./chunk-XX3OKYJS.js";
import "./chunk-OTCNIJ2H.js";
import "./chunk-JGA5YJWL.js";
import "./chunk-GCI4MA3M.js";
import "./chunk-SJ2OBYX2.js";
import "./chunk-MDJNYPVI.js";
import "./chunk-Z6VKIQV2.js";
import "./chunk-4PXNA4MD.js";
import "./chunk-VX2NEBRT.js";
import "./chunk-IXRRTVLJ.js";
import "./chunk-EKM7KERW.js";
import "./chunk-WKTI47FV.js";
import "./chunk-T3SYSTKO.js";
import "./chunk-LQPKVYW2.js";
import "./chunk-U55FA2EK.js";
import "./chunk-7CDU3B2L.js";
import "./chunk-B5A4L35M.js";
import "./chunk-52SEOH5H.js";
import "./chunk-JUZ3H47H.js";
import "./chunk-UYMV6HXW.js";
import "./chunk-AJGINJLG.js";
import "./chunk-JE2NJSBU.js";
import "./chunk-7HTU7ZUX.js";
import "./chunk-QNVJVDYZ.js";
import "./chunk-WDTGOP77.js";
import "./chunk-VYMBX5H5.js";
import "./chunk-BPTFV5VM.js";
import "./chunk-YP3WVJP3.js";
import "./chunk-M24KZOVI.js";
import "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import "./chunk-6VL5D5UP.js";
import "./chunk-6QHY54HZ.js";
import "./chunk-GXJJY3ND.js";
import "./chunk-5ONGWFJ3.js";
import "./chunk-PLNHHGHL.js";
import "./chunk-DFK6QMLO.js";
import "./chunk-4WTOIJXV.js";
import "./chunk-BBYMM7CM.js";
import "./chunk-EM7Y2JZC.js";
import "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import "./chunk-BUQC3CLV.js";
import "./chunk-63LDVRFI.js";
import {
  i as i2
} from "./chunk-TJTOV6JD.js";
import "./chunk-C3FRY5U4.js";
import "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-UDHS2MGH.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import "./chunk-T7F6Q6JJ.js";
import "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import "./chunk-H74Q4SYB.js";
import {
  l
} from "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import "./chunk-XXLHAM2M.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  d,
  e
} from "./chunk-GNMPGHLQ.js";
import {
  i3 as i
} from "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/views/layers/MapImageLayerView.js
var i6 = (i7) => {
  const p = i7;
  let a2 = class extends p {
    initialize() {
      this.exportImageParameters = new y({ layer: this.layer });
    }
    destroy() {
      this.exportImageParameters.destroy(), this.exportImageParameters = null;
    }
    get floors() {
      return this.view?.floors ?? null;
    }
    get exportImageVersion() {
      return this.exportImageParameters?.commitProperty("version"), this.commitProperty("timeExtent"), this.commitProperty("floors"), (this._get("exportImageVersion") || 0) + 1;
    }
    get timeExtent() {
      return i5(this.layer, this.view?.timeExtent, this._get("timeExtent"));
    }
    canResume() {
      return !!super.canResume() && !this.timeExtent?.isEmpty;
    }
  };
  return __decorate([m()], a2.prototype, "exportImageParameters", void 0), __decorate([m({ readOnly: true })], a2.prototype, "floors", null), __decorate([m({ readOnly: true })], a2.prototype, "exportImageVersion", null), __decorate([m()], a2.prototype, "layer", void 0), __decorate([m()], a2.prototype, "suspended", void 0), __decorate([m({ readOnly: true })], a2.prototype, "timeExtent", null), a2 = __decorate([a("esri.views.layers.MapImageLayerView")], a2), a2;
};

// node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js
var w = class extends i6(i3(b(d2))) {
  constructor() {
    super(...arguments), this._highlightGraphics = new i2(), this._updateHash = "";
  }
  fetchPopupFeaturesAtLocation(t, i7) {
    return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(t, i7);
  }
  update(t) {
    const i7 = `${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;
    this._updateHash !== i7 && (this._updateHash = i7, this.strategy.update(t).catch((t2) => {
      d(t2) || i.getLogger(this).error(t2);
    }), t.stationary && this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)), this._highlightView.processUpdate(t);
  }
  attach() {
    const { imageMaxWidth: t, imageMaxHeight: i7, version: e2 } = this.layer, r3 = e2 >= 10.3, h = e2 >= 10;
    this._bitmapContainer = new s(), this.container.addChild(this._bitmapContainer), this._highlightView = new O({ view: this.view, graphics: this._highlightGraphics, requestUpdateCallback: () => this.requestUpdate(), container: new o(this.view.featuresTilingScheme), defaultPointSymbolEnabled: false }), this.container.addChild(this._highlightView.container), this._popupHighlightHelper = new P({ createFetchPopupFeaturesQueryGeometry: (t2, i8) => r(t2, i8, this.view), highlightGraphics: this._highlightGraphics, highlightGraphicUpdated: ({ graphic: t2, property: i8 }) => this._highlightView.graphicUpdateHandler({ graphic: t2, property: i8 }), layerView: this, updatingHandles: this._updatingHandles }), this.strategy = new M({ container: this._bitmapContainer, fetchSource: this.fetchImageBitmap.bind(this), requestUpdate: this.requestUpdate.bind(this), imageMaxWidth: t, imageMaxHeight: i7, imageRotationSupported: r3, imageNormalizationSupported: h, hidpi: true }), this.addAttachHandles(l(() => this.exportImageVersion, () => this.requestUpdate())), this.requestUpdate();
  }
  detach() {
    this.strategy.destroy(), this.container.removeAllChildren(), this._bitmapContainer.removeAllChildren(), this._highlightView.destroy(), this._popupHighlightHelper.destroy();
  }
  viewChange() {
  }
  moveEnd() {
    this.requestUpdate();
  }
  supportsSpatialReference(t) {
    return this.layer.serviceSupportsSpatialReference(t);
  }
  async doRefresh() {
    this._updateHash = "", this.requestUpdate();
  }
  isUpdating() {
    return this.strategy.updating || this.updateRequested;
  }
  fetchImage(t, i7, e2, r3) {
    return this.layer.fetchImage(t, i7, e2, { timeExtent: this.timeExtent, floors: this.floors, ...r3 });
  }
  fetchImageBitmap(t, i7, e2, r3) {
    return this.layer.fetchImageBitmap(t, i7, e2, { timeExtent: this.timeExtent, floors: this.floors, ...r3 });
  }
  highlight(t, e2) {
    const r3 = i4(t);
    if (0 === r3.length) return e();
    const s2 = r2(e2);
    return this._addHighlightGraphics(r3, s2), e(() => !this.destroyed && this._removeHighlightGraphics(r3, s2));
  }
  _processHighlight() {
    const t = this._getHighlights();
    this._highlightView?.setHighlight(t);
  }
  _addHighlightGraphics(t, i7) {
    this._highlightGraphics.addMany(t), this._addHighlights(t.map((t2) => t2.uid), i7);
  }
  _removeHighlightGraphics(t, i7) {
    this._highlightGraphics.removeMany(t), this._removeHighlights(t.map((t2) => t2.uid), i7);
  }
};
__decorate([m()], w.prototype, "strategy", void 0), w = __decorate([a("esri.views.2d.layers.MapImageLayerView2D")], w);
var j = w;
export {
  j as default
};
//# sourceMappingURL=MapImageLayerView2D-TIVR5OLH.js.map
