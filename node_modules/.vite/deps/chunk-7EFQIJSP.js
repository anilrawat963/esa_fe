import {
  a as a2,
  r as r2,
  u as u2
} from "./chunk-YJPRACXY.js";
import {
  c
} from "./chunk-WCWUUHUV.js";
import {
  l
} from "./chunk-T7F6Q6JJ.js";
import {
  u
} from "./chunk-CCQFL76O.js";
import {
  h,
  m as m3
} from "./chunk-V2H77UEV.js";
import {
  o
} from "./chunk-XWE6BM2U.js";
import {
  r
} from "./chunk-SOIZOFSB.js";
import {
  n
} from "./chunk-XXLHAM2M.js";
import {
  m as m2
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a,
  m
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";

// node_modules/@arcgis/core/geometry/support/MeshTexture.js
var m4;
var u3 = /* @__PURE__ */ new WeakMap();
var h2 = 0;
var _a;
var g = (_a = class extends l(n) {
  constructor(t) {
    super(t), this.wrap = "repeat";
  }
  get url() {
    return this._get("url") || null;
  }
  set url(t) {
    this._set("url", t), t && this._set("data", null);
  }
  get data() {
    return this._get("data") || null;
  }
  set data(t) {
    this._set("data", t), t && this._set("url", null);
  }
  writeData(t, e, a3, r3) {
    if (t instanceof HTMLImageElement) {
      const s = { type: "image-element", src: m3(t.src, r3), crossOrigin: t.crossOrigin };
      e[a3] = s;
    } else if (t instanceof HTMLCanvasElement) {
      const r4 = { type: "canvas-element", imageData: f(t.getContext("2d").getImageData(0, 0, t.width, t.height)) };
      e[a3] = r4;
    } else if (t instanceof HTMLVideoElement) {
      const s = { type: "video-element", src: m3(t.src, r3), autoplay: t.autoplay, loop: t.loop, muted: t.muted, crossOrigin: t.crossOrigin, preload: t.preload };
      e[a3] = s;
    } else if (t instanceof ImageData) {
      const r4 = { type: "image-data", imageData: f(t) };
      e[a3] = r4;
    }
  }
  readData(t) {
    switch (t.type) {
      case "image-element": {
        const e = new Image();
        return e.src = t.src, e.crossOrigin = t.crossOrigin, e;
      }
      case "canvas-element": {
        const e = w(t.imageData), a3 = document.createElement("canvas");
        return a3.width = e.width, a3.height = e.height, a3.getContext("2d").putImageData(e, 0, 0), a3;
      }
      case "image-data":
        return w(t.imageData);
      case "video-element": {
        const e = document.createElement("video");
        return e.src = t.src, e.crossOrigin = t.crossOrigin, e.autoplay = t.autoplay, e.loop = t.loop, e.muted = t.muted, e.preload = t.preload, e;
      }
      default:
        return;
    }
  }
  get transparent() {
    const { data: t, url: e } = this, a3 = (t2) => t2?.toLowerCase().endsWith(".png") || t2?.toLocaleLowerCase().startsWith("data:image/png;");
    return t instanceof HTMLCanvasElement ? y(t.getContext("2d").getImageData(0, 0, t.width, t.height)) : t instanceof ImageData ? y(t) : !(!e || !a3(e)) || !!(t instanceof HTMLImageElement && a3(t.src));
  }
  set transparent(t) {
    this._overrideIfSome("transparent", t);
  }
  get contentHash() {
    const t = "string" == typeof this.wrap ? this.wrap : "object" == typeof this.wrap ? `${this.wrap.horizontal}/${this.wrap.vertical}` : "", e = (e2 = "") => `d:${e2},t:${this.transparent},w:${t}`;
    return null != this.url ? e(this.url) : null != this.data ? this.data instanceof HTMLImageElement || this.data instanceof HTMLVideoElement ? e(this.data.src) : (u3.has(this.data) || u3.set(this.data, ++h2), e(u3.get(this.data))) : e();
  }
  get memoryUsage() {
    let t = 0;
    if (t += null != this.url ? this.url.length : 0, null != this.data) {
      const e = this.data;
      "data" in e ? t += e.data.byteLength : e instanceof HTMLImageElement ? t += e.naturalWidth * e.naturalHeight * 3 : e instanceof HTMLCanvasElement && (t += e.width * e.height * 3);
    }
    return t;
  }
  clone(t) {
    const e = u2(t), a3 = e?.textureMap?.get(this);
    if (a3) return a3;
    const r3 = super.clone(t);
    return e?.textureMap?.set(this, r3), r3;
  }
  static from(t) {
    return "string" == typeof t ? new m4({ url: t }) : t instanceof HTMLImageElement || t instanceof HTMLCanvasElement || t instanceof ImageData || t instanceof HTMLVideoElement ? new m4({ data: t }) : m(m4, t);
  }
}, m4 = _a, _a);
function f(t) {
  let e = "";
  for (let a3 = 0; a3 < t.data.length; a3++) e += String.fromCharCode(t.data[a3]);
  return { data: btoa(e), width: t.width, height: t.height };
}
function w(t) {
  const e = atob(t.data), r3 = new Uint8ClampedArray(e.length);
  for (let a3 = 0; a3 < e.length; a3++) r3[a3] = e.charCodeAt(a3);
  return c(r3, t.width, t.height);
}
function y(t) {
  for (let e = 3; e < t.data.length; e += 4) if (255 !== t.data[e]) return true;
  return false;
}
__decorate([m2({ type: String, json: { write: h } })], g.prototype, "url", null), __decorate([m2({ clonable: "reference", json: { write: { overridePolicy() {
  return { enabled: !this.url };
} } } })], g.prototype, "data", null), __decorate([r("data")], g.prototype, "writeData", null), __decorate([o("data")], g.prototype, "readData", null), __decorate([m2({ type: Boolean, json: { write: { overridePolicy() {
  return { enabled: this._isOverridden("transparent") };
} } } })], g.prototype, "transparent", null), __decorate([m2({ json: { write: true } })], g.prototype, "wrap", void 0), __decorate([m2({ readOnly: true })], g.prototype, "contentHash", null), g = m4 = __decorate([a("esri.geometry.support.MeshTexture")], g);

// node_modules/@arcgis/core/geometry/support/MeshTextureTransform.js
var p = class extends l(n) {
  constructor(o2) {
    super(o2), this.offset = [0, 0], this.rotation = 0, this.scale = [1, 1];
  }
};
__decorate([m2({ type: [Number], nonNullable: true, json: { write: true } })], p.prototype, "offset", void 0), __decorate([m2({ type: Number, nonNullable: true, json: { write: true } })], p.prototype, "rotation", void 0), __decorate([m2({ type: [Number], nonNullable: true, json: { write: true } })], p.prototype, "scale", void 0), p = __decorate([a("esri.geometry.support.MeshTextureTransform")], p);

// node_modules/@arcgis/core/geometry/support/MeshMaterial.js
var n2 = class extends l(n) {
  constructor(o2) {
    super(o2), this.color = null, this.colorTexture = null, this.colorTextureTransform = null, this.normalTexture = void 0, this.normalTextureTransform = void 0, this.alphaMode = "auto", this.alphaCutoff = 0.5, this.doubleSided = true;
  }
  clone(o2) {
    const r3 = r2(o2), e = r3?.materialMap?.get(this);
    if (e) return e;
    const t = super.clone(a2(o2));
    return r3?.materialMap?.set(this, t), t;
  }
  get memoryUsage() {
    return this.getMemoryUsage();
  }
  getMemoryUsage() {
    let o2 = 0;
    return o2 += null != this.color ? 16 : 0, null != this.colorTexture && (o2 += this.colorTexture.memoryUsage), o2 += null != this.colorTextureTransform ? 20 : 0, null != this.normalTexture && (o2 += this.normalTexture.memoryUsage), o2 += null != this.normalTextureTransform ? 20 : 0, o2;
  }
};
__decorate([m2({ type: u, json: { write: true } })], n2.prototype, "color", void 0), __decorate([m2({ type: g, json: { write: true } })], n2.prototype, "colorTexture", void 0), __decorate([m2({ type: p, json: { write: true } })], n2.prototype, "colorTextureTransform", void 0), __decorate([m2({ type: g, json: { write: true } })], n2.prototype, "normalTexture", void 0), __decorate([m2({ type: p, json: { write: true } })], n2.prototype, "normalTextureTransform", void 0), __decorate([m2({ nonNullable: true, json: { write: true } })], n2.prototype, "alphaMode", void 0), __decorate([m2({ nonNullable: true, json: { write: true } })], n2.prototype, "alphaCutoff", void 0), __decorate([m2({ nonNullable: true, json: { write: true } })], n2.prototype, "doubleSided", void 0), n2 = __decorate([a("esri.geometry.support.MeshMaterial")], n2);

// node_modules/@arcgis/core/geometry/support/MeshMaterialMetallicRoughness.js
var u4 = class extends n2 {
  constructor(e) {
    super(e), this.emissiveColor = null, this.emissiveTexture = null, this.emissiveTextureTransform = void 0, this.occlusionTexture = null, this.occlusionTextureTransform = void 0, this.metallic = 1, this.roughness = 1, this.metallicRoughnessTexture = null, this.metallicRoughnessTextureTransform = void 0;
  }
  getMemoryUsage() {
    let e = super.getMemoryUsage();
    return e += null != this.emissiveColor ? 16 : 0, null != this.emissiveTexture && (e += this.emissiveTexture.memoryUsage), e += null != this.emissiveTextureTransform ? 20 : 0, null != this.occlusionTexture && (e += this.occlusionTexture.memoryUsage), e += null != this.occlusionTextureTransform ? 20 : 0, null != this.metallicRoughnessTexture && (e += this.metallicRoughnessTexture.memoryUsage), e += null != this.metallicRoughnessTextureTransform ? 20 : 0, e;
  }
};
__decorate([m2({ type: u, json: { write: true } })], u4.prototype, "emissiveColor", void 0), __decorate([m2({ type: g, json: { write: true } })], u4.prototype, "emissiveTexture", void 0), __decorate([m2({ type: p, json: { write: true } })], u4.prototype, "emissiveTextureTransform", void 0), __decorate([m2({ type: g, json: { write: true } })], u4.prototype, "occlusionTexture", void 0), __decorate([m2({ type: p, json: { write: true } })], u4.prototype, "occlusionTextureTransform", void 0), __decorate([m2({ type: Number, nonNullable: true, json: { write: true }, range: { min: 0, max: 1 } })], u4.prototype, "metallic", void 0), __decorate([m2({ type: Number, nonNullable: true, json: { write: true }, range: { min: 0, max: 1 } })], u4.prototype, "roughness", void 0), __decorate([m2({ type: g, json: { write: true } })], u4.prototype, "metallicRoughnessTexture", void 0), __decorate([m2({ type: p, json: { write: true } })], u4.prototype, "metallicRoughnessTextureTransform", void 0), u4 = __decorate([a("esri.geometry.support.MeshMaterialMetallicRoughness")], u4);

export {
  g,
  p,
  n2 as n,
  u4 as u
};
//# sourceMappingURL=chunk-7EFQIJSP.js.map
