{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodResources.js", "../../@arcgis/core/views/3d/layers/graphics/primitiveObjectSymbolUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{unique as e}from\"../../../../../core/arrayUtils.js\";import{estimateNumberArrayMemory as t,baseTypedArrayMemory as r}from\"../../../../../core/memoryEstimations.js\";import{IntersectorResult as s}from\"../IntersectorResult.js\";import{LodTarget as n}from\"./Intersector.js\";class i{constructor(e,t,r,s){this.material=e,this.buffer=t,this.numVertices=r,this.boundingInfo=s,this.bufferWriter=e.createBufferWriter()}get layout(){return this.bufferWriter.layout}get numTriangles(){return this.numVertices/3}computeUsedMemory(){return this.buffer.byteLength+r}get renderGeometry(){return this}intersect(e,t,r,s,n,i,o,m){const a=this.bufferWriter,c=this.buffer;a.intersect(c,this.material.parameters,null,e,r,s,(r,s,a)=>u(r,s,a,e,t,i,o,n,m))}}class o{constructor(e){this.engineGeometry=e;const t=this.material,r=this.engineGeometry,s=r.attributes,n=r.boundingInfo,o=t.createBufferWriter(),u=o.layout,m=o.elementCount(s),a=u.createBuffer(m);o.write(null,null,s,null,a,0),this.renderGeometry=new i(t,a.buffer,m,n)}get material(){return this.engineGeometry.material}get numVertices(){return this.engineGeometry.indexCount}get numTriangles(){return this.numVertices/3}get boundingInfo(){return this.engineGeometry.boundingInfo}computeUsedMemory(){return Array.from(this.engineGeometry.attributes.values()).reduce((e,r)=>e+t(r.data,r.indices),0)}intersect(e,t,r,s,n,i,o,m){const a=this.engineGeometry;this.material.intersect(a,e.transform.transform,e,r,s,(r,s,a)=>u(r,s,a,e,t,i,o,n,m))}}function u(e,t,r,i,o,u,m,a,c){if(e<0)return;if(o&&!o(i.rayBegin,i.rayEnd,e))return;const l=new n(u.layerViewUid,u.graphicUid(a),r,m,c);if((null==i.results.min.distance||e<i.results.min.distance)&&i.results.min.set(3,l,e,t,i.transform.transform),(null==i.results.max.distance||e>i.results.max.distance)&&i.results.max.set(3,l,e,t,i.transform.transform),2===i.options.store){const r=new s(i.results.min.ray);r.set(3,l,e,t,i.transform.transform),i.results.all.push(r)}}class m{constructor(e,t=null){this.geometry=e,this.textures=t}get material(){return this.geometry.material}get numTriangles(){return this.geometry.numTriangles}}class a{constructor(t,r,s){this.components=t,this.minScreenSpaceRadius=r,this.pivotOffset=s;const n=e(this.components.map(e=>e.geometry));this.numVertices=n.reduce((e,t)=>e+t.numVertices,0)}}class c{constructor(e){this.levels=e,this.levels.sort((e,t)=>e.minScreenSpaceRadius===t.minScreenSpaceRadius?e.numVertices-t.numVertices:e.minScreenSpaceRadius-t.minScreenSpaceRadius)}get materialParameters(){return this.levels[0].components[0].geometry.material.parameters}getMaterials(){const t=[];return this.levels.forEach(e=>e.components.forEach(e=>t.push(e.geometry.material))),e(t)}getTextures(){const t=new Array;return this.levels.forEach(e=>e.components.forEach(e=>{null!=e.textures&&t.push(...e.textures)})),e(t)}getGeometries(){const t=new Array;return this.levels.forEach(e=>e.components.forEach(e=>{t.push(e.geometry)})),e(t)}getEngineGeometries(){return this.getGeometries().map(e=>e.engineGeometry).filter(e=>null!=e)}computeUsedMemory(){const e=this.getGeometries(),t=this.getTextures(),r=e.reduce((e,t)=>e+t.computeUsedMemory(),0);return t.reduce((e,t)=>e+t.usedMemory,0)+r}}export{o as LodComponentEngineGeometry,i as LodComponentRenderGeometry,m as LodComponentResources,a as LodLevelResources,c as LodResources};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{cgToGIS as e,createDiamondGeometry as n,createTetrahedronGeometry as s,createCylinderGeometry as a,createConeGeometry as c,createBoxGeometry as i,createPolySphereGeometry as t}from\"../../webgl-engine/lib/GeometryUtil.js\";import{LodResources as r,LodLevelResources as o,LodComponentResources as u,LodComponentEngineGeometry as d}from\"../../webgl-engine/lib/lodRendering/LodResources.js\";function S(e){switch(e){case\"sphere\":case\"cube\":case\"diamond\":case\"cylinder\":case\"cone\":case\"inverted-cone\":case\"tetrahedron\":return!0}return!1}function l(S,l){const p=(n,s,a=!1)=>new r(n.map(n=>{const c=s(n.tesselation);return a&&e(c),new o([new u(new d(c))],n.minScreenSpaceRadius)}));switch(S){case\"sphere\":return p([{tesselation:0,minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],e=>t(l,.5,e,!0));case\"cube\":return p([{tesselation:0,minScreenSpaceRadius:0}],()=>i(l,1));case\"cone\":return p(m,e=>c(l,1,.5,e,!1),!0);case\"inverted-cone\":return p(m,e=>c(l,1,.5,e,!0),!0);case\"cylinder\":return p(m,e=>a(l,1,.5,e,[0,0,1],[0,0,.5]));case\"tetrahedron\":return p([{tesselation:0,minScreenSpaceRadius:0}],()=>s(l,1),!0);case\"diamond\":return p([{tesselation:0,minScreenSpaceRadius:0}],()=>n(l,1),!0);default:return}}const m=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];export{S as isValidPrimitive,l as primitiveLodResources};\n"],
  "mappings": "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",
  "names": ["i", "e", "o", "m", "a", "c", "r", "s", "u", "l", "t", "e", "S", "l", "a", "c", "n", "m"]
}
