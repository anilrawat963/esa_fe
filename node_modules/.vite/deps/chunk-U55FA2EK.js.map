{
  "version": 3,
  "sources": ["../../@arcgis/core/views/webgl/checkWebGLError.js", "../../@arcgis/core/views/webgl/Util.js", "../../@arcgis/core/views/webgl/TextureDescriptor.js", "../../@arcgis/core/views/webgl/textureUtils.js", "../../@arcgis/core/views/webgl/ValidatedTextureDescriptor.js", "../../@arcgis/core/views/webgl/Texture.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import has from\"../../core/has.js\";import r from\"../../core/Logger.js\";const n=()=>r.getLogger(\"esri.views.webgl.checkWebGLError\");function t(e){switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return\"Invalid Enum. An unacceptable value has been specified for an enumerated argument.\";case e.INVALID_VALUE:return\"Invalid Value. A numeric argument is out of range.\";case e.INVALID_OPERATION:return\"Invalid Operation. The specified command is not allowed for the current state.\";case e.INVALID_FRAMEBUFFER_OPERATION:return\"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.\";case e.OUT_OF_MEMORY:return\"Out of memory. Not enough memory is left to execute the command.\";case e.CONTEXT_LOST_WEBGL:return\"WebGL context has been lost\";default:return\"Unknown error\"}}const o=!!has(\"enable-feature:webgl-debug\");function a(){return o}function c(){return o}function u(r,o=a()){if(o){const o=t(r);if(o){const r=(new Error).stack;n().error(new e(\"webgl-error\",\"WebGL error occurred\",{message:o,stack:r}))}}}export{u as checkWebGLError,t as getErrorMessage,o as hasFeatureFlagWebGLDebug,a as webglDebugEnabled,c as webglValidateShadersEnabled};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{webglDebugEnabled as e,getErrorMessage as s}from\"./checkWebGLError.js\";import{CompressedTextureFormat as c,SizedPixelFormat as a,SizedDepthStencilFormat as r,SizedDepthFormat as t}from\"./enums.js\";function R(c,a,r,t=0){const R=c.gl;c.bindBuffer(r);for(const n of r.layout){const r=a.get(n.name);if(null==r){console.warn(`There is no location for vertex attribute '${n.name}' defined.`);continue}const _=t*n.stride;if(n.count<=4)R.vertexAttribPointer(r,n.count,n.type,n.normalized,n.stride,n.offset+_),R.enableVertexAttribArray(r),n.divisor>0&&R.vertexAttribDivisor(r,n.divisor);else if(9===n.count)for(let e=0;e<3;e++)R.vertexAttribPointer(r+e,3,n.type,n.normalized,n.stride,n.offset+12*e+_),R.enableVertexAttribArray(r+e),n.divisor>0&&R.vertexAttribDivisor(r+e,n.divisor);else if(16===n.count)for(let e=0;e<4;e++)R.vertexAttribPointer(r+e,4,n.type,n.normalized,n.stride,n.offset+16*e+_),R.enableVertexAttribArray(r+e),n.divisor>0&&R.vertexAttribDivisor(r+e,n.divisor);else console.error(\"Unsupported vertex attribute element count: \"+n.count);if(e()){const e=s(c.gl);e&&console.error(`Unable to bind vertex attribute \"${n.name}\" with baseInstanceOffset ${_}:`,e,n)}}}function n(e){switch(e){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function _(e){switch(e){case 6406:case 6409:case 6403:case 36244:case a.R8:case a.R8I:case a.R8UI:case a.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case a.RGBA4:case a.R16F:case a.R16I:case a.R16UI:case a.RG8:case a.RG8I:case a.RG8UI:case a.RG8_SNORM:case a.RGB565:case a.RGB5_A1:case t.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case a.RGB8:case a.RGB8I:case a.RGB8UI:case a.RGB8_SNORM:case a.SRGB8:case t.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case a.RGBA8:case a.R32F:case a.R11F_G11F_B10F:case a.RG16F:case a.R32I:case a.R32UI:case a.RG16I:case a.RG16UI:case a.RGBA8I:case a.RGBA8UI:case a.RGBA8_SNORM:case a.SRGB8_ALPHA8:case a.RGB9_E5:case a.RGB10_A2UI:case a.RGB10_A2:case t.DEPTH_COMPONENT32F:case r.DEPTH24_STENCIL8:return 4;case r.DEPTH32F_STENCIL8:return 5;case a.RGB16F:case a.RGB16I:case a.RGB16UI:return 6;case a.RG32F:case a.RG32I:case a.RG32UI:case a.RGBA16F:case a.RGBA16I:case a.RGBA16UI:return 8;case a.RGB32F:case a.RGB32I:case a.RGB32UI:return 12;case a.RGBA32F:case a.RGBA32I:case a.RGBA32UI:return 16;case c.COMPRESSED_RGB_S3TC_DXT1_EXT:case c.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case c.COMPRESSED_RGBA_S3TC_DXT3_EXT:case c.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case c.COMPRESSED_R11_EAC:case c.COMPRESSED_SIGNED_R11_EAC:case c.COMPRESSED_RGB8_ETC2:case c.COMPRESSED_SRGB8_ETC2:case c.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case c.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case c.COMPRESSED_RG11_EAC:case c.COMPRESSED_SIGNED_RG11_EAC:case c.COMPRESSED_RGBA8_ETC2_EAC:case c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}export{R as bindVertexBufferLayout,_ as getFormatBytesPerElement,n as getFormatComponents};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{PixelType as t}from\"./enums.js\";import{getFormatBytesPerElement as i}from\"./Util.js\";class h{constructor(i=0,h=i){this.width=i,this.height=h,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=t.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}}function s(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(null==t.internalFormat?4:i(t.internalFormat))*(34067===t.target?6:1))}export{h as TextureDescriptor,s as estimateMemory};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import e from\"../../core/Logger.js\";import{hasValue as r}from\"../../core/object.js\";import{PixelType as n,SizedPixelFormat as o,SizedDepthStencilFormat as i,SizedDepthFormat as u,CompressedTextureFormat as a,sizedPixelFormatValues as l}from\"./enums.js\";const c=()=>e.getLogger(\"esri/views/webgl/textureUtils\");function s(t){const{width:e,height:r,depth:n}=t;(null!=e&&e<0||null!=r&&r<0||null!=n&&n<0)&&c().error(\"Negative dimension parameters are not allowed!\");const{internalFormat:o}=t;if(o&&(m(o)||p(o))){const{linearFilterDepth:e,compareEnabled:r,samplingMode:n,hasMipmap:o}=t;o&&c().error(\"Depth textures cannot have mipmaps\"),e?9729!==n&&9728!==n&&c().error(\"Depth textures cannot sample mipmaps\"):(9728!==n&&c().error(\"Depth textures without filtering must use NEAREST filtering\"),r&&c().error(\"Depth textures without filtering cannot use compare function\"))}}function h(t){return l.includes(t)}function m(t){return r(u,t)}function p(t){return r(i,t)}function f(t){return null!=t&&r(a,t)}function d(t){return null!=t&&\"type\"in t&&\"compressed\"===t.type}function g(t){return null!=t&&\"byteLength\"in t}function w(t){return null!=t&&!d(t)&&!g(t)}function x(t){return 32879===t||35866===t}function F(t,e,r,n=1){let o=Math.max(e,r);return 32879===t&&(o=Math.max(o,n)),Math.floor(Math.log2(o))+1}function E(e){if(null!=e.internalFormat)return e.internalFormat;switch(e.dataType){case n.FLOAT:switch(e.pixelFormat){case 6408:return o.RGBA32F;case 6407:return o.RGB32F;default:throw new t(\"texture:unknown-format\",\"Unable to derive format\")}case n.UNSIGNED_BYTE:switch(e.pixelFormat){case 6408:return o.RGBA8;case 6407:return o.RGB8}}const{pixelFormat:r}=e;return e.internalFormat=34041===r?i.DEPTH24_STENCIL8:6402===r?u.DEPTH_COMPONENT24:r,e.internalFormat}function T(t){let e=\"width\"in t?t.width:t.codedWidth,r=\"height\"in t?t.height:t.codedHeight;const n=1;return t instanceof HTMLVideoElement&&(e=t.videoWidth,r=t.videoHeight),{width:e,height:r,depth:n}}export{F as calcMipmapLevels,E as deriveInternalFormat,T as getDimensions,x as is3DTarget,g as isArrayBufferView,d as isCompressedData,f as isCompressedFormat,m as isSizedDepthFormat,p as isSizedDepthStencilFormat,h as isSizedPixelFormat,w as isTexImageSource,s as validateTexture};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{SizedPixelFormat as s}from\"./enums.js\";import{TextureDescriptor as e}from\"./TextureDescriptor.js\";class t extends e{constructor(e,t){switch(super(),this.context=e,Object.assign(this,t),this.internalFormat){case s.R16F:case s.R32F:case s.R8_SNORM:case s.R8:this.pixelFormat=6403;break;case s.R8I:case s.R8UI:case s.R16I:case s.R16UI:case s.R32I:case s.R32UI:this.pixelFormat=36244}}static validate(s,e){return new t(s,e)}}export{t as ValidatedTextureDescriptor};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import has from\"../../core/has.js\";import e from\"../../core/Logger.js\";import{abortMaybe as i}from\"../../core/maybe.js\";import{hasValue as r}from\"../../core/object.js\";import{throwIfAborted as s,isAbortError as o}from\"../../core/promiseUtils.js\";import{checkWebGLError as a}from\"./checkWebGLError.js\";import{ResourceType as n,CompressedTextureFormat as p}from\"./enums.js\";import{estimateMemory as l}from\"./TextureDescriptor.js\";import{isCompressedData as m,deriveInternalFormat as h,isTexImageSource as d,is3DTarget as c,validateTexture as _,isCompressedFormat as u,getDimensions as g,calcMipmapLevels as x,isSizedPixelFormat as T,isSizedDepthFormat as M,isSizedDepthStencilFormat as b}from\"./textureUtils.js\";import{ValidatedTextureDescriptor as f}from\"./ValidatedTextureDescriptor.js\";const w=null,D=!!has(\"esri-tests-disable-gpu-memory-measurements\"),E=()=>e.getLogger(\"esri/views/webgl/Texture\");let A=class e{static{this.TEXTURE_UNIT_FOR_UPDATES=0}static{this.compressionWorkerHandle=null}constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,\"context\"in e)this._descriptor=e,r=i;else{const r=f.validate(e,i);if(!r)throw new t(\"texture:invalid-descriptor\",\"Texture descriptor invalid\");this._descriptor=r}34067===this._descriptor.target?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return D?0:l(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(n.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new t(\"texture:immutable-resize\",\"Immutable textures can't be resized!\");r.width=e,r.height=i,34067===this._descriptor.target?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.compress=t}disableCompression(){this._descriptor.compress=void 0}setData(t){this.abortCompression(),!m(t)&&this._descriptor.internalFormat&&r(p,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(t),!m(t)&&this._descriptor.compress&&this._compressOnWorker(t)}updateData(i,r,s,o,a,n,p=0){n||E().error(\"An attempt to use uninitialized data!\"),this.hasWebGLTextureObject||E().error(\"An attempt to update uninitialized texture!\");const l=this._descriptor;l.internalFormat=h(l);const{context:c,pixelFormat:_,dataType:u,target:g,isImmutable:x}=l;if(x&&!this._wasImmutablyAllocated)throw new t(\"texture:uninitialized\",\"Cannot update immutable texture before allocation!\");const T=c.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||s<0||r+o>l.width||s+a>l.height)&&E().error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:M}=c;p&&(o&&a||E().warn(\"Must pass width and height if `UNPACK_SKIP_ROWS` is used\"),M.pixelStorei(M.UNPACK_SKIP_ROWS,p)),d(n)?M.texSubImage2D(g,i,r,s,o,a,_,u,n):m(n)?M.compressedTexSubImage2D(g,i,r,s,o,a,l.internalFormat,n.levels[i]):M.texSubImage2D(g,i,r,s,o,a,_,u,n),p&&M.pixelStorei(M.UNPACK_SKIP_ROWS,0),c.bindTexture(T,e.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(i,r,s,o,a,n,p,l){l||E().error(\"An attempt to use uninitialized data!\"),this.hasWebGLTextureObject||E().error(\"An attempt to update an uninitialized texture!\");const d=this._descriptor;d.internalFormat=h(d);const{context:_,pixelFormat:u,dataType:g,isImmutable:x,target:T}=d;if(x&&!this._wasImmutablyAllocated)throw new t(\"texture:uninitialized\",\"Cannot update immutable texture before allocation!\");c(T)||E().warn(\"Attempting to set 3D texture data on a non-3D texture\");const M=_.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);_.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),(r<0||s<0||o<0||r+a>d.width||s+n>d.height||o+p>d.depth)&&E().error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:b}=_;if(m(l))l=l.levels[i],b.compressedTexSubImage3D(T,i,r,s,o,a,n,p,d.internalFormat,l);else{const t=l;b.texSubImage3D(T,i,r,s,o,a,n,p,u,g,t)}_.bindTexture(M,e.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const i=this._descriptor;if(0===i.width||0===i.height)return;if(!i.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"texture:immutable-change\",\"Cannot add mipmaps to immutable texture after allocation\");i.hasMipmap=!0,this._samplingModeDirty=!0,_(i)}9729===i.samplingMode?(this._samplingModeDirty=!0,i.samplingMode=9985):9728===i.samplingMode&&(this._samplingModeDirty=!0,i.samplingMode=9984);const r=this._descriptor.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(i.target),this._descriptor.context.bindTexture(r,e.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"texture:immutable-change\",\"Cannot delete mipmaps to immutable texture after allocation\");e.hasMipmap=!1,this._samplingModeDirty=!0,_(e)}9985===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9729):9984===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,_(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(t){t!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=t,this.setSamplingMode(t?9729:9728),_(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=i(this._compressionAbortController)}_setData(i,r){const s=this._descriptor,o=s.context?.gl;if(!o)return;a(o),this.hasWebGLTextureObject||(this._glName=o.createTexture(),s.context.instanceCounter.increment(n.Texture,this)),_(s);const p=s.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);s.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),a(o);const l=r??s.target,g=c(l);if(d(i))this._setDataFromTexImageSource(i,l);else{const{width:e,height:r,depth:n}=s;if(null==e||null==r)throw new t(\"texture:missing-size\",\"Width and height must be specified!\");if(g&&null==n)throw new t(\"texture:missing-depth\",\"Depth must be specified!\");if(s.internalFormat=h(s),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(l,s.internalFormat,s.hasMipmap,e,r,n),m(i)){if(!u(s.internalFormat))throw new t(\"texture:format-mismatch\",\"Attempting to use compressed data with an uncompressed format!\");this._setDataFromCompressedSource(i,s.internalFormat,l)}else this._texImage(l,0,s.internalFormat,e,r,n,i),a(o),s.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),a(o),s.context.bindTexture(p,e.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let e=34069;e<=34074;e++)this._setData(t,e)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:e,flipped:i,preMultiplyAlpha:r}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_setDataFromTexImageSource(t,e){const{gl:i}=this._descriptor.context,r=this._descriptor;r.internalFormat=h(r);const s=c(e),{width:o,height:n,depth:p}=g(t);r.width&&r.height,r.width||(r.width=o),r.height||(r.height=n),s&&r.depth,s&&(r.depth=p),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(e,r.internalFormat,r.hasMipmap,o,n,p),this._texImage(e,0,r.internalFormat,o,n,p,t),a(i),r.hasMipmap&&(this.generateMipmap(),a(i))}_setDataFromCompressedSource(t,e,i){const r=this._descriptor,{width:s,height:o,depth:a}=r,n=t.levels,p=x(i,s,o,a),l=Math.min(p,n.length)-1;this._descriptor.context.gl.texParameteri(r.target,33085,l),this._forEachMipmapLevel((t,r,s,o)=>{const a=n[Math.min(t,n.length-1)];this._compressedTexImage(i,t,e,r,s,o,a)},l)}_texStorage(e,i,r,s,o,a){const{gl:n}=this._descriptor.context;if(!T(i)&&!M(i)&&!b(i))throw new t(\"texture:missing-format\",\"Immutable textures must have a sized internal format\");if(!this._descriptor.isImmutable)return;const p=r?x(e,s,o,a):1;if(c(e)){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");n.texStorage3D(e,p,i,s,o,a)}else n.texStorage2D(e,p,i,s,o);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,o,a,n){const p=this._descriptor.context.gl,l=c(e),{isImmutable:m,pixelFormat:h,dataType:d}=this._descriptor;if(m){if(null!=n){const r=n;if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.texSubImage3D(e,i,0,0,0,s,o,a,h,d,r)}else p.texSubImage2D(e,i,0,0,s,o,h,d,r)}}else{const m=n;if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.texImage3D(e,i,r,s,o,a,0,h,d,m)}else p.texImage2D(e,i,r,s,o,0,h,d,m)}}_compressedTexImage(e,i,r,s,o,a,n){const p=this._descriptor.context.gl,l=c(e);if(this._descriptor.isImmutable){if(null!=n)if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.compressedTexSubImage3D(e,i,0,0,0,s,o,a,r,n)}else p.compressedTexSubImage2D(e,i,0,0,s,o,r,n)}else if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.compressedTexImage3D(e,i,r,s,o,a,0,n)}else p.compressedTexImage2D(e,i,r,s,o,0,n)}async _compressOnWorker(t){const{width:i,height:r,context:a,flipped:n,preMultiplyAlpha:p,hasMipmap:l}=this._descriptor,m=this._descriptor.compress?.compressionTracker,h=this._descriptor.compress?.compressionCallback,{compressedTextureETC:d,compressedTextureS3TC:c}=a.capabilities;if(!e.compressionWorkerHandle?.isCompressible(t,this._descriptor)||!d&&!c)return;this.abortCompression();const _=new AbortController;let u;this._compressionAbortController=_,m?.increment();try{t instanceof Uint8Array?u=t.buffer:(u=await createImageBitmap(t,{imageOrientation:n?\"flipY\":\"none\"}),s(_));const o={data:u,width:i,height:r,needsFlip:t instanceof Uint8Array&&this.descriptor.flipped,components:6408===this._descriptor.pixelFormat?4:3,preMultiplyAlpha:p,hasMipmap:l,hasETC:!!d,hasS3TC:!!c},a=await e.compressionWorkerHandle.invoke(o,_.signal,\"low\");if(s(_),a.compressedTexture&&this.hasWebGLTextureObject){const t=this.usedMemory;this._descriptor.internalFormat=a.internalFormat,this._setData(a.compressedTexture),h?.(t-this.usedMemory)}}catch(g){o(g)||E().error(\"Texture compression failed!\")}finally{m?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),u instanceof ImageBitmap&&u.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:o,hasMipmap:a,target:n}=this._descriptor;const p=32879===n;if(null==r||null==s||p&&null==o)throw new t(\"texture:missing-size\",\"Missing texture dimensions for mipmap calculation\");for(let t=0;e(t,r,s,o),a&&(1!==r||1!==s||p&&1!==o)&&!(t>=i);++t)r=Math.max(1,r>>1),s=Math.max(1,s>>1),p&&(o=Math.max(1,o>>1))}_applySamplingMode(){const t=this._descriptor,e=t.context?.gl;let i=t.samplingMode,r=t.samplingMode;9985===i||9987===i?(i=9729,t.hasMipmap||(r=9729)):9984!==i&&9986!==i||(i=9728,t.hasMipmap||(r=9728)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}_applyWrapMode(){const t=this._descriptor,e=t.context?.gl;\"number\"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}_applyShadowMode(){const t=this._descriptor,e=t.context?.gl,i=t.compareEnabled?e.COMPARE_REF_TO_TEXTURE:e.NONE;e.texParameteri(t.target,e.TEXTURE_COMPARE_MODE,i),t.compareEnabled&&e.texParameteri(t.target,e.TEXTURE_COMPARE_FUNC,e.GREATER),a(e)}_applyAnisotropicFilteringParameters(){const t=this._descriptor,e=t.context.capabilities.textureFilterAnisotropic;if(!e)return;t.context.gl.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};export{A as Texture,w as tracer};\n"],
  "mappings": "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",
  "names": ["e", "o", "r", "c", "a", "t", "R", "n", "r", "_", "e", "i", "h", "s", "t", "c", "s", "t", "e", "n", "o", "r", "h", "d", "E", "T", "t", "e", "s", "E", "e", "i", "r", "t", "s", "d", "o", "a", "n", "p", "l", "c", "_", "u", "g", "x", "T", "h", "m"]
}
