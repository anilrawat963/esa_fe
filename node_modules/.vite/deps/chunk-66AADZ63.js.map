{
  "version": 3,
  "sources": ["../../@arcgis/core/chunks/SSAOBlur.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{FloatPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DDrawUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as s}from\"../views/webgl/ShaderBuilder.js\";const d=4;function i(){const i=new s,f=i.fragment;i.include(e);const u=(d+1)/2,c=1/(2*u*u);return f.include(r),f.uniforms.add(new n(\"depthMap\",e=>e.depthTexture),new l(\"tex\",e=>e.colorTexture),new t(\"blurSize\",e=>e.blurSize),new o(\"projScale\",(e,r)=>{const t=r.camera.distance;return t>5e4?Math.max(0,e.projScale-(t-5e4)):e.projScale})),f.code.add(a`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${a.float(c)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),i.outputs.add(\"fragBlur\",\"float\"),f.main.add(a`\n    float b = 0.0;\n    float w_total = 0.0;\n\n    float center_d = linearDepthFromTexture(depthMap, uv);\n\n    float sharpness = -0.05 * projScale / center_d;\n    for (int r = -${a.int(d)}; r <= ${a.int(d)}; ++r) {\n      float rf = float(r);\n      vec2 uvOffset = uv + rf * blurSize;\n      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n    }\n    fragBlur = b / w_total;`),i}const f=Object.freeze(Object.defineProperty({__proto__:null,build:i},Symbol.toStringTag,{value:\"Module\"}));export{f as S,i as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAIgvB,IAAM,IAAE;AAAE,SAAS,IAAG;AAAC,QAAMA,KAAE,IAAI,KAAEC,KAAED,GAAE;AAAS,EAAAA,GAAE,QAAQ,CAAC;AAAE,QAAM,KAAG,IAAE,KAAG,GAAE,IAAE,KAAG,IAAE,IAAE;AAAG,SAAOC,GAAE,QAAQ,CAAC,GAAEA,GAAE,SAAS,IAAI,IAAI,EAAE,YAAW,CAAAC,OAAGA,GAAE,YAAY,GAAE,IAAIA,GAAE,OAAM,CAAAA,OAAGA,GAAE,YAAY,GAAE,IAAIA,GAAE,YAAW,CAAAA,OAAGA,GAAE,QAAQ,GAAE,IAAI,EAAE,aAAY,CAACA,IAAEC,OAAI;AAAC,UAAMC,KAAED,GAAE,OAAO;AAAS,WAAOC,KAAE,MAAI,KAAK,IAAI,GAAEF,GAAE,aAAWE,KAAE,IAAI,IAAEF,GAAE;AAAA,EAAS,CAAC,CAAC,GAAED,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAO7iC,EAAE,MAAM,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,GAItC,GAAED,GAAE,QAAQ,IAAI,YAAW,OAAO,GAAEC,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAO9B,EAAE,IAAI,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,4BAKlB,GAAED;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["i", "f", "e", "r", "t"]
}
