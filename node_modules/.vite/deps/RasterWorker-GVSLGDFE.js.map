{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/rasterTransforms/IdentityTransform.js", "../../@arcgis/core/layers/support/rasterTransforms/utils.js", "../../@arcgis/core/layers/support/RasterWorker.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{enumeration as o}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./BaseRasterTransform.js\";var e;let p=e=class extends s{constructor(){super(...arguments),this.type=\"identity\"}clone(){return new e}};r([o({IdentityXform:\"identity\"})],p.prototype,\"type\",void 0),p=e=r([t(\"esri.layers.support.rasterTransforms.IdentityTransform\")],p);export{p as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport r from\"./GCSShiftTransform.js\";import o from\"./IdentityTransform.js\";import t from\"./PolynomialTransform.js\";const n={GCSShiftXform:r,IdentityXform:o,PolynomialXform:t};function f(r){const o=r?.type;if(!o)return null;const t=n[r?.type];if(t){const o=new t;return o.read(r),o}return null}export{f as readTransform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../geometry/Extent.js\";import r from\"../../geometry/Point.js\";import t from\"../../geometry/operators/support/GeographicTransformation.js\";import s from\"./PixelBlock.js\";import{decode as o}from\"./rasterFormats/RasterCodec.js\";import{convertPixelBlockToFeatures as i,highlightPixels as n,split as l,clipTile as a,mosaic as m,approximateTransform as c,getLocalArithmeticNorthRotations as f}from\"./rasterFunctions/pixelUtils.js\";import{create as p}from\"./rasterFunctions/rasterFunctionHelper.js\";import{load as u,getProjectionOffsetGrid as S}from\"./rasterFunctions/rasterProjectionHelper.js\";import{computeStatisticsHistograms as d,estimateStatisticsHistograms as x}from\"./rasterFunctions/stretchUtils.js\";import{convertVectorFieldData as h,convertToLocalDirections as g}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as y}from\"./rasterTransforms/utils.js\";import O from\"../../renderers/support/RasterSymbolizer.js\";import{createFlowMesh as k}from\"../../views/2d/engine/flow/dataUtils.js\";function B(e){if(!e)return{result:null,transferList:[]};const{pixelBlock:r,transferList:t}=e.getTransferableObject();return{result:r,transferList:t}}class N{convertVectorFieldData(e){const r=s.fromJSON(e.pixelBlock),t=B(h(r,e.type));return Promise.resolve(t)}convertPixelBlockToFeatures(r){const t=i({pixelBlock:s.fromJSON(r.pixelBlock),extent:e.fromJSON(r.extent),fieldNames:r.fieldNames,skipFactor:r.skipFactor,skipSpatialReference:!0,pixelIdOffset:r.pixelIdOffset,imageRowSize:r.imageRowSize});return Promise.resolve(t)}computeStatisticsHistograms(e){const r=s.fromJSON(e.pixelBlock),t=d(r,{histogramSize:e.histogramSize,includeSkewnessKurtosis:e.includeSkewnessKurtosis});return Promise.resolve(t)}async decode(e){return B(await o(e.data,e.options))}symbolize(r){r.pixelBlock=s.fromJSON(r.pixelBlock),r.extent=r.extent?e.fromJSON(r.extent):null;const t=B(this.symbolizer.symbolize(r));return Promise.resolve(t)}highlightPixels(e){const r=s.fromJSON(e.pixelBlock),t=s.fromJSON(e.renderedPixelBlock);return n(r,t,e.highlightOptions),Promise.resolve(t.toJSON())}async updateSymbolizer(e){this.symbolizer=O.fromJSON(e.symbolizerJSON),e.histograms&&\"rasterStretch\"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=e.histograms)}async updateRasterFunction(e){this.rasterFunction=p(e.rasterFunctionJSON)}async process(t){return B(this.rasterFunction.process({extent:e.fromJSON(t.extent),primaryPixelBlocks:t.primaryPixelBlocks.map(e=>null!=e?s.fromJSON(e):null),primaryPixelSizes:t.primaryPixelSizes?.map(e=>null!=e?r.fromJSON(e):null),primaryRasterIds:t.primaryRasterIds}))}stretch(e){const r=B(this.symbolizer.simpleStretch(s.fromJSON(e.srcPixelBlock),e.stretchParams));return Promise.resolve(r)}estimateStatisticsHistograms(e){const r=x(s.fromJSON(e.srcPixelBlock));return Promise.resolve(r)}split(e){const r=l(s.fromJSON(e.srcPixelBlock),e.tileSize,e.maximumPyramidLevel??0,!1===e.useBilinear),t=[];let o;return r&&(o=new Map,r.forEach((e,r)=>{if(e){const{pixelBlock:s,transferList:i}=e.getTransferableObject();o.set(r,s),i.forEach(e=>{t.includes(e)||t.push(e)})}})),Promise.resolve({result:o,transferList:t})}clipTile(e){const r=s.fromJSON(e.pixelBlock),t=B(a({...e,pixelBlock:r}));return Promise.resolve(t)}async mosaicAndTransform(e){const r=e.srcPixelBlocks.map(e=>e?new s(e):null),t=m(r,e.srcMosaicSize,{blockWidths:e.blockWidths,alignmentInfo:e.alignmentInfo,clipOffset:e.clipOffset,clipSize:e.clipSize});let o,i=t;e.coefs&&(i=c(t,e.destDimension,e.coefs,e.sampleSpacing,e.interpolation)),e.projectDirections&&e.gcsGrid&&(o=f(e.destDimension,e.gcsGrid),i=g(i,e.isUV?\"vector-uv\":\"vector-magdir\",o));const{result:n,transferList:l}=B(i);return{result:{pixelBlock:n,localNorthDirections:o},transferList:l}}async createFlowMesh(e,r){const t={data:new Float32Array(e.flowData.buffer),mask:new Uint8Array(e.flowData.maskBuffer),width:e.flowData.width,height:e.flowData.height},{vertexData:s,indexData:o}=await k(e.meshType,e.simulationSettings,t,r.signal);return{result:{vertexBuffer:s.buffer,indexBuffer:o.buffer},transferList:[s.buffer,o.buffer]}}async getProjectionOffsetGrid(r){const s=e.fromJSON(r.projectedExtent),o=e.fromJSON(r.srcBufferExtent);let i=null;r.datumTransformationSteps?.length&&(i=new t({steps:r.datumTransformationSteps})),await u();const n=r.rasterTransform?y(r.rasterTransform):null;return S({...r,projectedExtent:s,srcBufferExtent:o,datumTransformation:i,rasterTransform:n})}}export{N as default};\n"],
  "mappings": "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",
  "names": ["n", "u", "f", "r", "t", "o", "e", "r", "t", "N", "c", "T", "u", "n", "j", "f"]
}
