import {
  de
} from "./chunk-UTFQHSO2.js";
import "./chunk-F5JN6VXH.js";
import "./chunk-4YQFF2F7.js";
import "./chunk-Y2DYCFJT.js";
import "./chunk-HUA6ZZZG.js";
import "./chunk-UP6PVI7I.js";
import "./chunk-6AWERJZ7.js";
import "./chunk-Y2GQGUGW.js";
import "./chunk-GGINWBRK.js";
import "./chunk-IJG47UFZ.js";
import "./chunk-M6NE6PU7.js";
import "./chunk-Z3EPMK46.js";
import "./chunk-2XEDAAX5.js";
import "./chunk-BCL23HLU.js";
import "./chunk-H6PLTW7B.js";
import "./chunk-ZG2JXORT.js";
import "./chunk-OL6EYE44.js";
import "./chunk-36YQJD5W.js";
import "./chunk-BQ6DEXWK.js";
import "./chunk-3SCRAN3E.js";
import "./chunk-NTNXXNRP.js";
import "./chunk-IGRCAVBL.js";
import {
  S,
  T,
  d,
  h as h3
} from "./chunk-GB62XN32.js";
import "./chunk-GD72EK2J.js";
import "./chunk-43UUQEW5.js";
import "./chunk-BRGWF4BT.js";
import "./chunk-B3BLJNSM.js";
import "./chunk-ALKEERWI.js";
import "./chunk-JBTWCDRR.js";
import "./chunk-U6CJFTOF.js";
import "./chunk-M5JMVUW2.js";
import "./chunk-2JMKFI2D.js";
import "./chunk-QYAMBIRP.js";
import "./chunk-JHV6OBEB.js";
import "./chunk-WHHIH5YU.js";
import "./chunk-5LMH6D7V.js";
import "./chunk-ZVTEFYZX.js";
import "./chunk-LPUPM55U.js";
import "./chunk-VATXM3AM.js";
import "./chunk-PRKYHOVW.js";
import "./chunk-E7PJOFGP.js";
import "./chunk-4VQDBNTM.js";
import "./chunk-3BNOOWTA.js";
import "./chunk-AIJLLSRB.js";
import "./chunk-VX2NEBRT.js";
import "./chunk-T3SYSTKO.js";
import "./chunk-7HTU7ZUX.js";
import "./chunk-WDTGOP77.js";
import "./chunk-VYMBX5H5.js";
import {
  h as h2
} from "./chunk-BPTFV5VM.js";
import "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import "./chunk-BBYMM7CM.js";
import "./chunk-EM7Y2JZC.js";
import "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import {
  n
} from "./chunk-36OXW4YN.js";
import "./chunk-PEL3D3ZN.js";
import "./chunk-Q5KWD3VQ.js";
import "./chunk-BUQC3CLV.js";
import "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import "./chunk-TJTOV6JD.js";
import "./chunk-C3FRY5U4.js";
import "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import "./chunk-6Z5KSPPF.js";
import "./chunk-CNYNCKEV.js";
import "./chunk-XL5QPCXN.js";
import "./chunk-2LC2762W.js";
import "./chunk-W6HOAVT4.js";
import "./chunk-DTZUXJMD.js";
import "./chunk-YLAGKT2D.js";
import "./chunk-6YRQYUCY.js";
import "./chunk-P6IKJIMO.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import "./chunk-T7F6Q6JJ.js";
import "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import "./chunk-H74Q4SYB.js";
import {
  h,
  l
} from "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import "./chunk-XWE6BM2U.js";
import "./chunk-SOIZOFSB.js";
import "./chunk-XXLHAM2M.js";
import {
  b,
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  c,
  u2 as u
} from "./chunk-GNMPGHLQ.js";
import "./chunk-QY7XKUIV.js";
import "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/views/2d/layers/support/RouteLayerInteraction.js
function g(e, r) {
  e.networkFeature = r;
}
function u2(e) {
  const r = w(e.graphic);
  return { ...e, networkFeature: r };
}
function b2(e) {
  const r = e.graphics.map((e2) => w(e2));
  return { ...e, networkFeatures: r };
}
function w(e) {
  return e.networkFeature;
}
function k(e) {
  return "point" === e?.type || "polyline" === e?.type || "polygon" === e?.type;
}
var _ = class extends b {
  constructor(e) {
    super(e), this._createMode = null, this._graphicsLayer = new n({ internal: true, listMode: "hide", title: "RouteLayerInteraction layer" }), this._updatingHandles = new h2(), this.enabled = true, this._handleSketchViewModelEvents = async (e2) => {
      switch (e2.type) {
        case "update":
          switch (e2.state) {
            case "active":
            case "complete":
              for (const r of e2.graphics) {
                w(r).geometry = k(r.geometry) ? r.geometry.clone() : null;
              }
          }
          break;
        case "undo":
        case "redo":
          break;
        case "delete":
          for (const r of e2.graphics) {
            const e3 = w(r);
            this._removeNetworkFeature(e3);
          }
          break;
        case "create":
          if (e2.graphic && "complete" === e2.state && this._createMode) {
            const r = e2.graphic.geometry?.clone(), t = e2.graphic.symbol?.clone();
            if (!r) break;
            switch (this._createMode) {
              case "stop": {
                if ("point" !== r.type) break;
                const { stops: t2 } = this.layer;
                if (t2.length > 0 && t2.every(({ geometry: e3 }) => !e3)) {
                  t2.at(0).geometry = r;
                  break;
                }
                if (t2.length > 1 && t2.filter((e3, r2) => 0 !== r2).every(({ geometry: e3 }) => !e3)) {
                  t2.at(1).geometry = r;
                  break;
                }
                const o = new S({ geometry: r });
                t2.add(o), g(e2.graphic, o);
                break;
              }
              case "point-barrier": {
                if ("point" !== r.type) break;
                const o = new T({ geometry: r, symbol: t });
                this.layer.pointBarriers.add(o), g(e2.graphic, o);
                break;
              }
              case "polyline-barrier": {
                if ("polyline" !== r.type) break;
                const o = new d({ geometry: r, symbol: t });
                this.layer.polylineBarriers.add(o), g(e2.graphic, o);
                break;
              }
              case "polygon-barrier": {
                if ("polygon" !== r.type) break;
                const o = new h3({ geometry: r, symbol: t });
                this.layer.polygonBarriers.add(o), g(e2.graphic, o);
                break;
              }
            }
          }
      }
      (await this.view.whenLayerView(this.layer)).emit(e2.type, "create" === e2.type ? u2(e2) : b2(e2));
    };
  }
  initialize() {
    this._sketchViewModel = new de({ layer: this._graphicsLayer, view: this.view }), this.addHandles([l(() => this.enabled, (e) => {
      e ? this._activate() : this._deactivate();
    }, h), l(() => {
      const { stops: e, pointBarriers: r, polylineBarriers: t, polygonBarriers: o } = this.layer;
      return { stops: e, pointBarriers: r, polylineBarriers: t, polygonBarriers: o };
    }, () => {
      this.enabled && this._loadClonedGraphics();
    }), this._sketchViewModel.on(["create", "delete", "redo", "undo", "update"], this._handleSketchViewModelEvents), c(this._updatingHandles)]);
  }
  destroy() {
    this.view.map.remove(this._graphicsLayer), this._graphicsLayer.removeAll(), this._graphicsLayer = u(this._graphicsLayer), this._sketchViewModel = u(this._sketchViewModel);
  }
  get selectedNetworkFeatures() {
    return this._sketchViewModel.updateGraphics.map((e) => w(e));
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  create(e) {
    switch (this._createMode = e, e) {
      case "stop":
        this.layer.defaultSymbols.stops?.unlocated && (this._sketchViewModel.pointSymbol = this.layer.defaultSymbols.stops.unlocated.clone());
        break;
      case "point-barrier":
        this.layer.defaultSymbols.pointBarriers && (this._sketchViewModel.pointSymbol = this.layer.defaultSymbols.pointBarriers.clone());
        break;
      case "polyline-barrier":
        this.layer.defaultSymbols.polylineBarriers && (this._sketchViewModel.polylineSymbol = this.layer.defaultSymbols.polylineBarriers.clone());
        break;
      case "polygon-barrier":
        this.layer.defaultSymbols.polygonBarriers && (this._sketchViewModel.polygonSymbol = this.layer.defaultSymbols.polygonBarriers.clone());
    }
    switch (e) {
      case "stop":
      case "point-barrier":
        return this._sketchViewModel.create("point");
      case "polyline-barrier":
        return this._sketchViewModel.create("polyline");
      case "polygon-barrier":
        return this._sketchViewModel.create("polygon");
    }
  }
  remove(e) {
    const r = this._graphicsLayer.graphics.find((r2) => w(r2) === e);
    r && this._graphicsLayer.remove(r), this._removeNetworkFeature(e);
  }
  _activate() {
    this._loadClonedGraphics(), this.view.map.add(this._graphicsLayer);
  }
  _deactivate() {
    this._sketchViewModel.cancel(), this.view.map?.remove(this._graphicsLayer), this._graphicsLayer.removeAll();
  }
  _loadClonedGraphics() {
    const e = [this.layer.stops, this.layer.pointBarriers, this.layer.polylineBarriers, this.layer.polygonBarriers].flatMap((e2) => e2.toArray().map((e3) => {
      const r = e3.toGraphic();
      return r.networkFeature = e3, r;
    }));
    this._graphicsLayer.removeAll().addMany(e);
  }
  _removeNetworkFeature(e) {
    switch (e.type) {
      case "stop":
        this.layer.stops.remove(e);
        break;
      case "point-barrier":
        this.layer.pointBarriers.remove(e);
        break;
      case "polyline-barrier":
        this.layer.polylineBarriers.remove(e);
        break;
      case "polygon-barrier":
        this.layer.polygonBarriers.remove(e);
    }
  }
};
__decorate([m()], _.prototype, "enabled", void 0), __decorate([m({ constructOnly: true })], _.prototype, "layer", void 0), __decorate([m({ readOnly: true })], _.prototype, "selectedNetworkFeatures", null), __decorate([m()], _.prototype, "updating", null), __decorate([m({ constructOnly: true })], _.prototype, "view", void 0), _ = __decorate([a("esri.views.2d.layers.support.RouteLayerInteraction")], _);
export {
  _ as RouteLayerInteraction
};
//# sourceMappingURL=RouteLayerInteraction-TZUIXDTG.js.map
