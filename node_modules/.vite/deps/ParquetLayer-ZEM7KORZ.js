import {
  c as c2,
  i as i2,
  p as p3,
  p2 as p4,
  s as s6
} from "./chunk-ZOIMNPWT.js";
import {
  f as f2
} from "./chunk-QPBITBUR.js";
import "./chunk-PJJUVY7C.js";
import "./chunk-7VJQTJLO.js";
import {
  c
} from "./chunk-SQ4OSZIG.js";
import "./chunk-MA6OR5A6.js";
import "./chunk-RCHRSC54.js";
import {
  a as a2
} from "./chunk-ZEI5DZXH.js";
import {
  s as s5
} from "./chunk-RGWH5UES.js";
import "./chunk-2U5X5TIX.js";
import {
  p as p2
} from "./chunk-5D65KWSM.js";
import "./chunk-ABHLEPDK.js";
import {
  a as a3
} from "./chunk-4FQUAV7M.js";
import {
  A,
  l as l5
} from "./chunk-EVZ7KLPS.js";
import {
  l as l4
} from "./chunk-JSH3APTG.js";
import "./chunk-WQT2KLDB.js";
import {
  d
} from "./chunk-UVDECGZC.js";
import {
  o as o2,
  s as s3
} from "./chunk-VKFTCFFM.js";
import {
  s as s4
} from "./chunk-ZETARPSI.js";
import {
  b2,
  d as d2,
  l as l6,
  p as p6
} from "./chunk-CZOYDK6P.js";
import {
  m as m4
} from "./chunk-RS755KXS.js";
import "./chunk-TMUM75KQ.js";
import "./chunk-KY5OS6CK.js";
import "./chunk-3U5UUY3S.js";
import "./chunk-UOYGMZIS.js";
import "./chunk-RXH2WNPA.js";
import "./chunk-TWU3GKHX.js";
import "./chunk-BGIBV6LL.js";
import "./chunk-UQXJMFRI.js";
import "./chunk-DY7N5RAZ.js";
import {
  l as l2
} from "./chunk-NP2TBOXH.js";
import "./chunk-7EPCZHGM.js";
import "./chunk-WBYRWTBX.js";
import "./chunk-WFCLXKCE.js";
import "./chunk-WX3525ER.js";
import "./chunk-FHCV4NTV.js";
import {
  g
} from "./chunk-HCTBVF3W.js";
import "./chunk-NH6FXYCM.js";
import "./chunk-YE4E5JCT.js";
import "./chunk-SXZO7ULH.js";
import "./chunk-JCMADXBT.js";
import "./chunk-QTRET3PG.js";
import "./chunk-FMOL5XMB.js";
import "./chunk-VNSHGTPN.js";
import "./chunk-OEBAFVQK.js";
import "./chunk-76V6RN4F.js";
import "./chunk-5XLI5DPS.js";
import "./chunk-EK7HOTRR.js";
import "./chunk-GCTH5LET.js";
import "./chunk-TTLSEJNG.js";
import "./chunk-ZVTEFYZX.js";
import "./chunk-LPUPM55U.js";
import "./chunk-IRBX64M6.js";
import "./chunk-EKZRA6TO.js";
import "./chunk-M5SP6ZBM.js";
import "./chunk-2HGIYEIL.js";
import "./chunk-MDJNYPVI.js";
import "./chunk-Z6VKIQV2.js";
import "./chunk-4PXNA4MD.js";
import {
  p as p5
} from "./chunk-ZCI5A4FF.js";
import "./chunk-2D47RURG.js";
import "./chunk-7HTU7ZUX.js";
import {
  b
} from "./chunk-647DAMHU.js";
import "./chunk-O6G3PPOK.js";
import "./chunk-ZKNZTIAS.js";
import "./chunk-OJMISN3F.js";
import "./chunk-EFV6H5NA.js";
import "./chunk-4WTOIJXV.js";
import "./chunk-BBYMM7CM.js";
import "./chunk-EM7Y2JZC.js";
import {
  m as m3
} from "./chunk-QZQPB5XR.js";
import "./chunk-AQFRVV3U.js";
import {
  p
} from "./chunk-PEL3D3ZN.js";
import "./chunk-Q5KWD3VQ.js";
import "./chunk-BUQC3CLV.js";
import {
  t
} from "./chunk-W5S3VUFT.js";
import "./chunk-7YH7T6CS.js";
import "./chunk-3T4IXPP4.js";
import "./chunk-XTZAIV4X.js";
import "./chunk-63LDVRFI.js";
import {
  n
} from "./chunk-C3FRY5U4.js";
import {
  n2,
  q
} from "./chunk-JNJX34GB.js";
import "./chunk-3STJRSDT.js";
import "./chunk-67Q6KVC6.js";
import "./chunk-23NJHA5Q.js";
import "./chunk-4LA6K4VI.js";
import "./chunk-KEZCWFAR.js";
import "./chunk-JZUJ34RR.js";
import "./chunk-PMGS7UDU.js";
import "./chunk-3GHCGAH2.js";
import "./chunk-HWUOAPTX.js";
import "./chunk-QHCKOBU7.js";
import "./chunk-K2OZ6WVC.js";
import {
  F,
  y2 as y
} from "./chunk-MC6NAKKX.js";
import "./chunk-TF6255HN.js";
import "./chunk-GD4FJL3C.js";
import "./chunk-C5OQVQZF.js";
import "./chunk-F7DKSAOI.js";
import "./chunk-4SOQWNPG.js";
import "./chunk-LTULADK2.js";
import "./chunk-35ST7YRB.js";
import "./chunk-EDA5QFHZ.js";
import "./chunk-JW6DU3OK.js";
import "./chunk-CNYNCKEV.js";
import "./chunk-XL5QPCXN.js";
import "./chunk-6KDQMJAI.js";
import "./chunk-UDHS2MGH.js";
import "./chunk-QF7FRVN6.js";
import "./chunk-ENINOZUZ.js";
import {
  b as b3
} from "./chunk-P6IKJIMO.js";
import "./chunk-MHV23XAQ.js";
import "./chunk-V2X4OKYI.js";
import "./chunk-LPZUGJNG.js";
import "./chunk-XLOINTMG.js";
import "./chunk-MA3QDRC3.js";
import "./chunk-W6J7XCPU.js";
import "./chunk-ONXWBTTM.js";
import {
  l as l3
} from "./chunk-T7F6Q6JJ.js";
import {
  O
} from "./chunk-YDTPM7OQ.js";
import "./chunk-75XOUSSS.js";
import "./chunk-TH4EQWJJ.js";
import "./chunk-7P2ANHQ3.js";
import {
  u
} from "./chunk-XCKT47LJ.js";
import "./chunk-3FUHCAX3.js";
import "./chunk-PZ5RULLK.js";
import "./chunk-OPJX4KXH.js";
import "./chunk-LTPHDYPK.js";
import "./chunk-3OVERDFX.js";
import "./chunk-FPMLKIDB.js";
import "./chunk-AZXJIEZ6.js";
import "./chunk-Q75WYS7K.js";
import {
  z
} from "./chunk-H74Q4SYB.js";
import {
  l
} from "./chunk-2OFHDVO5.js";
import "./chunk-TFJXG32O.js";
import "./chunk-DDOCCRD4.js";
import "./chunk-5UPBUJPC.js";
import "./chunk-THQO67BJ.js";
import "./chunk-4YDOPHTZ.js";
import "./chunk-YY5PITIH.js";
import "./chunk-CCQFL76O.js";
import "./chunk-CSMCPN64.js";
import "./chunk-GY6YF4EN.js";
import "./chunk-7H3U4IJR.js";
import "./chunk-SMWUT52Z.js";
import "./chunk-AXZMNHTN.js";
import {
  f
} from "./chunk-5T3MJDSR.js";
import "./chunk-NMQNUPE4.js";
import "./chunk-6KIXN4DJ.js";
import "./chunk-7DGJB37R.js";
import "./chunk-234CIOHE.js";
import {
  m as m2
} from "./chunk-V2H77UEV.js";
import "./chunk-WRA2WBYC.js";
import {
  o
} from "./chunk-XWE6BM2U.js";
import {
  r
} from "./chunk-SOIZOFSB.js";
import "./chunk-XXLHAM2M.js";
import {
  m
} from "./chunk-5EI5H4QX.js";
import {
  a2 as a
} from "./chunk-ZIE53VIV.js";
import {
  __decorate
} from "./chunk-SS5CLIUY.js";
import "./chunk-R54Q5TGA.js";
import "./chunk-6SSZNBOK.js";
import "./chunk-LZ2XTYP2.js";
import "./chunk-45CFSCQX.js";
import "./chunk-A5XN2VFT.js";
import "./chunk-65HD3WXL.js";
import "./chunk-4DGC7CBY.js";
import {
  s as s2
} from "./chunk-GNMPGHLQ.js";
import {
  e,
  i3 as i,
  s2 as s
} from "./chunk-QY7XKUIV.js";
import {
  has
} from "./chunk-AL6YUTZM.js";
import "./chunk-G26ADAPQ.js";

// node_modules/@arcgis/core/graphic/isParquetGraphicOrigin.js
var i3 = Symbol("isParquetGraphicOrigin");

// node_modules/@arcgis/core/graphic/ParquetGraphicOrigin.js
var o3;
var a4 = class extends s3 {
  get [(o3 = i3, n2)]() {
    return this.layer;
  }
  get [n]() {
    return this.layer;
  }
  get [o2]() {
    return this.layer;
  }
  constructor(r2) {
    super(), this[o3] = true, this.type = "parquet", this.layer = r2;
  }
  get id() {
    return this.layer.id;
  }
};

// node_modules/@arcgis/core/layers/graphics/sources/ParquetSource.js
var c3 = class extends u {
  constructor(t2) {
    super(t2), this.type = "parquet";
  }
  load(t2) {
    const e2 = null != t2 ? t2.signal : null;
    return this.addResolvingPromise(this._initialize(e2)), Promise.resolve(this);
  }
  destroy() {
    this._connection?.destroy();
  }
  setCustomParameters(t2) {
    this._proxy.setCustomParameters(t2).catch(() => {
      i.getLogger(this).warn("Failed to update customParameters");
    });
  }
  async updateFiles(t2) {
    await this._proxy.updateFiles(t2);
  }
  async queryFeaturesJSON(t2, e2 = {}) {
    return await this.load(e2), this._proxy.queryFeatures(t2.toJSON(), { signal: e2?.signal });
  }
  async queryFeatures(t2, e2 = {}) {
    const r2 = await this.queryFeaturesJSON(t2, { signal: e2?.signal });
    return g.fromJSON(r2);
  }
  async queryObjectIds(t2, e2) {
    return await this._proxy.queryObjectIds(t2.toJSON(), { signal: e2?.signal });
  }
  async queryFeatureCount(t2, e2) {
    return this._proxy.queryFeatureCount(t2.toJSON(), { signal: e2?.signal });
  }
  async queryExtent(t2, e2) {
    if (null == this.layer.encoding) return i.getLogger(this).warn("Tried to queryExtent, but source does not have a geometry. Returning null extent."), { count: 0, extent: null };
    const s7 = await this._proxy.queryExtent(t2.toJSON(), { signal: e2?.signal });
    return { count: s7.count, extent: z.fromJSON(s7.extent) };
  }
  async _initialize(t2) {
    this._connection = await p5("ParquetSourceWorker", { strategy: "dedicated", signal: t2, registryTarget: this }), s2(t2), this._proxy = this._connection.createInvokeProxy();
    const { layerDefinition: e2, capabilities: r2 } = await this._proxy.load({ urls: this.layer.urls.items, fields: this.layer.fields?.map((t3) => t3.toJSON()), geometryType: this.layer.geometryType ? p4(this.layer.geometryType) : null, spatialReference: this.layer.spatialReference?.toJSON(), encoding: this.layer.encoding?.toJSON(), displayOptimization: this.layer.displayOptimization, customParameters: this.layer.customParameters });
    s2(t2), this.sourceJSON = e2, this.capabilities = r2;
  }
};
__decorate([m()], c3.prototype, "type", void 0), __decorate([m({ constructOnly: true })], c3.prototype, "layer", void 0), __decorate([m()], c3.prototype, "sourceJSON", void 0), __decorate([m()], c3.prototype, "capabilities", void 0), c3 = __decorate([a("esri.layers.graphics.sources.ParquetSource")], c3);

// node_modules/@arcgis/core/layers/ParquetLayer.js
var N = s5();
var V = "__OBJECTID";
var W = { types: { key: "type", base: p3, typeMap: { wkb: s6, location: i2 } }, json: { name: "layerDefinition.geometryEncoding", write: { ignoreOrigin: true, isRequired: true }, origins: { service: { read: { source: "geometryEncoding" } } } } };
var H = class extends a2(f2(c(p(p2(l4(t(b2(l2(s4(l3(b3))))))))))) {
  constructor(e2) {
    super(e2), this.copyright = null, this.displayOptimization = null, this.fields = null, this.fieldsIndex = null, this.encoding = null, this.fullExtent = null, this.geometryType = null, this.graphicOrigin = new a4(this), this.labelsVisible = true, this.labelingInfo = null, this.objectIdField = V, this.operationalLayerType = "ParquetLayer", this.outFields = null, this.persistenceEnabled = !!has("parquetlayer-persistence-enabled"), this.popupTemplate = null, this.source = null, this.spatialReference = null, this.templates = null, this.title = "Parquet", this.type = "parquet", this.urls = new O();
  }
  destroy() {
    this.source?.destroy();
  }
  async load(e2) {
    return this.addResolvingPromise(this._load(e2)), this.addHandles([l(() => this.urls, (e3) => this.source?.updateFiles(e3.items)), l(() => this.customParameters, (e3) => this.source?.setCustomParameters(e3))]), this;
  }
  get capabilities() {
    return this.source?.capabilities;
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  writeFields(e2, r2, t2, i4) {
    const o4 = e2.filter((e3) => !(e3.name === V && "oid" === e3.type)).map((e3) => e3.toJSON(i4));
    e(t2, o4, r2);
  }
  get isTable() {
    return null == this.encoding;
  }
  set renderer(e2) {
    y(e2, this.fieldsIndex), this._set("renderer", e2);
  }
  readUrls(e2) {
    return new O("files" === e2.type ? e2.urls : []);
  }
  writeUrls(e2, r2, t2, i4) {
    const s7 = [];
    if (e2?.length) {
      i4 = { blockedRelativeUrls: i4?.blockedRelativeUrls };
      for (let r3 of e2) r3 = m2(r3, i4), r3 && s7.push(r3);
    }
    s7.length ? r2.source = { type: "files", urls: s7 } : i4.messages?.push(new s("parquet-layer:missing-urls", "Missing or empty 'urls'", { layer: this }));
  }
  createPopupTemplate(e2) {
    return d(this, e2);
  }
  createQuery() {
    const e2 = new b();
    return e2.returnGeometry = true, e2.outFields = ["*"], e2;
  }
  async createSource(e2) {
    const r2 = new c3({ layer: this });
    return await r2.load(e2), r2;
  }
  getFieldDomain(e2, r2) {
    return null;
  }
  getField(e2) {
    return this.fieldsIndex.get(e2);
  }
  async queryFeatures(e2, r2) {
    await this.load();
    const t2 = await this.source.queryFeatures(this._normalizeQuery(e2), r2), i4 = this.graphicOrigin;
    if (t2?.features) for (const o4 of t2.features) o4.layer = o4.sourceLayer = this, o4.origin = i4;
    return t2;
  }
  async queryObjectIds(e2, r2) {
    return await this.load(), this.source.queryObjectIds(this._normalizeQuery(e2), r2);
  }
  async queryFeatureCount(e2, r2) {
    return await this.load(), this.source.queryFeatureCount(this._normalizeQuery(e2), r2);
  }
  async queryExtent(e2, r2) {
    return await this.load(), this.source.queryExtent(this._normalizeQuery(e2), r2);
  }
  _normalizeQuery(e2) {
    return b.from(e2) ?? this.createQuery();
  }
  async _load(e2) {
    const r2 = await this.createSource(e2);
    this._set("source", r2), this.read(r2.sourceJSON, { origin: "service" }), this.revert(["fields", "timeInfo"], "service"), y(this.renderer, this.fieldsIndex), F(this.timeInfo, this.fieldsIndex), null == this.spatialReference && (this.spatialReference = f.WGS84);
  }
};
__decorate([m({ readOnly: true, json: { read: false, write: false } })], H.prototype, "capabilities", null), __decorate([m({ type: String })], H.prototype, "copyright", void 0), __decorate([m({ readOnly: true })], H.prototype, "defaultPopupTemplate", null), __decorate([m()], H.prototype, "displayOptimization", void 0), __decorate([m({ type: [m3], json: { name: "layerDefinition.fields", write: { ignoreOrigin: true, isRequired: true }, origins: { service: { name: "fields" } } } })], H.prototype, "fields", void 0), __decorate([r("fields")], H.prototype, "writeFields", null), __decorate([m(N.fieldsIndex)], H.prototype, "fieldsIndex", void 0), __decorate([m(W)], H.prototype, "encoding", void 0), __decorate([m({ type: z, json: { name: "extent" } })], H.prototype, "fullExtent", void 0), __decorate([m({ type: c2.apiValues, json: { name: "layerDefinition.geometryType", read: { reader: c2.read }, write: { writer: c2.write, ignoreOrigin: true, isRequired: true }, origins: { service: { read: { source: "geometryType", reader: c2.read } } } } })], H.prototype, "geometryType", void 0), __decorate([m({ readOnly: true, clonable: false })], H.prototype, "graphicOrigin", void 0), __decorate([m(p6)], H.prototype, "labelsVisible", void 0), __decorate([m({ type: [A], json: { name: "layerDefinition.drawingInfo.labelingInfo", read: { reader: l5 }, write: true } })], H.prototype, "labelingInfo", void 0), __decorate([m(d2)], H.prototype, "legendEnabled", void 0), __decorate([m()], H.prototype, "file", void 0), __decorate([m({ type: String, readOnly: true })], H.prototype, "objectIdField", void 0), __decorate([m({ type: ["ParquetLayer"] })], H.prototype, "operationalLayerType", void 0), __decorate([m(N.outFields)], H.prototype, "outFields", void 0), __decorate([m(l6)], H.prototype, "popupEnabled", void 0), __decorate([m({ type: q, json: { name: "popupInfo", write: true } })], H.prototype, "popupTemplate", void 0), __decorate([m({ types: m4, json: { name: "layerDefinition.drawingInfo.renderer", write: true, origins: { service: { read: { source: "drawingInfo.renderer" } } } } })], H.prototype, "renderer", null), __decorate([m({ type: c3, readOnly: true, cast: null, json: { read: false } })], H.prototype, "source", void 0), __decorate([m({ json: { name: "layerDefinition.spatialReference", write: { ignoreOrigin: true, isRequired: true }, origins: { service: { read: { source: "extent.spatialReference" } } } } })], H.prototype, "spatialReference", void 0), __decorate([m({ type: [a3] })], H.prototype, "templates", void 0), __decorate([m()], H.prototype, "title", void 0), __decorate([m({ json: { read: false }, readOnly: true })], H.prototype, "type", void 0), __decorate([m({ type: O.ofType(String), json: { name: "source", write: { isRequired: true, ignoreOrigin: true } } })], H.prototype, "urls", void 0), __decorate([o("urls")], H.prototype, "readUrls", null), __decorate([r("urls")], H.prototype, "writeUrls", null), H = __decorate([a("esri.layers.ParquetLayer")], H);
var A2 = H;
export {
  A2 as default
};
//# sourceMappingURL=ParquetLayer-ZEM7KORZ.js.map
