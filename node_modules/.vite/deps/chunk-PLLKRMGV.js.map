{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js", "../../@arcgis/core/chunks/Compositing.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/glsl.js\";function t(t){t.code.add(o`const float MAX_RGBA_FLOAT =\n255.0 / 256.0 +\n255.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\nvec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\nconst float toU8AsFloat = 1.0 / 255.0;\nreturn fixedPointU8 * toU8AsFloat;\n}`),t.code.add(o`const vec4 RGBA_TO_FLOAT_FACTORS = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgbaTofloat(vec4 rgba) {\nreturn dot(rgba, RGBA_TO_FLOAT_FACTORS);\n}`),t.code.add(o`const vec4 uninterpolatedRGBAToFloatFactors = vec4(\n1.0 / 256.0,\n1.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0 / 256.0\n);\nfloat uninterpolatedRGBAToFloat(vec4 rgba) {\nreturn (dot(round(rgba * 255.0), uninterpolatedRGBAToFloatFactors) - 0.5) * 2.0;\n}`),t.code.add(o`const vec3 uninterpolatedRGBToFloatFactors = vec3(\n1.0 / 256.0,\n1.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0\n);\nfloat uninterpolatedRGBToFloat(vec3 rgb) {\nreturn (dot(round(rgb * 255.0), uninterpolatedRGBToFloatFactors) - 0.5) * 2.0;\n}`)}export{t as RgbaFloatEncoding};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{RgbaFloatEncoding as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float2BindUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{FloatPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{If as t,glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{NoParameters as l}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as d}from\"../views/webgl/ShaderBuilder.js\";class m extends l{constructor(){super(...arguments),this.opacity=1}}function g(l){const m=new d,{blitEmissiveMode:g,blitMode:c,hasOpacityFactor:f}=l;m.include(e),m.fragment.uniforms.add(new n(\"tex\",e=>e.texture)),f&&m.fragment.uniforms.add(new s(\"opacity\",e=>e.opacity));const u=3===c;u&&(m.fragment.uniforms.add(new a(\"nearFar\",e=>e.camera.nearFar)),m.fragment.include(r),m.fragment.include(o));const p=1===g;return p&&(m.outputs.add(\"fragColor\",\"vec4\",0),m.outputs.add(\"fragEmission\",\"vec4\",1)),m.fragment.main.add(i`\n    ${u?i`\n          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);\n          fragColor = float2rgba(normalizedLinearDepth);`:i`\n          fragColor = texture(tex, uv) ${f?\"* opacity\":\"\"};`}\n    ${t(p,\"fragEmission = vec4(0.0, 0.0, 0.0, fragColor.a);\")}`),m}const c=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:m,build:g},Symbol.toStringTag,{value:\"Module\"}));export{m as C,c as a,g as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAImD,SAASA,GAAEA,IAAE;AAAC,EAAAA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAW1E,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQb,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQb,GAAEA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOb;AAAC;;;AClCuzB,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,UAAQ;AAAA,EAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,QAAMC,KAAE,IAAI,KAAE,EAAC,kBAAiBC,IAAE,UAASC,IAAE,kBAAiB,EAAC,IAAE;AAAE,EAAAF,GAAE,QAAQ,CAAC,GAAEA,GAAE,SAAS,SAAS,IAAI,IAAIG,GAAE,OAAM,CAAAA,OAAGA,GAAE,OAAO,CAAC,GAAE,KAAGH,GAAE,SAAS,SAAS,IAAI,IAAI,EAAE,WAAU,CAAAG,OAAGA,GAAE,OAAO,CAAC;AAAE,QAAM,IAAE,MAAID;AAAE,QAAIF,GAAE,SAAS,SAAS,IAAI,IAAI,EAAE,WAAU,CAAAG,OAAGA,GAAE,OAAO,OAAO,CAAC,GAAEH,GAAE,SAAS,QAAQ,CAAC,GAAEA,GAAE,SAAS,QAAQI,EAAC;AAAG,QAAM,IAAE,MAAIH;AAAE,SAAO,MAAID,GAAE,QAAQ,IAAI,aAAY,QAAO,CAAC,GAAEA,GAAE,QAAQ,IAAI,gBAAe,QAAO,CAAC,IAAGA,GAAE,SAAS,KAAK,IAAI;AAAA,MACzzC,IAAE;AAAA;AAAA,4DAEkD;AAAA,yCACjB,IAAE,cAAY,EAAE,GAAG;AAAA,MACtD,EAAE,GAAE,kDAAkD,CAAC,EAAE,GAAEA;AAAC;AAAC,IAAME,KAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,2BAA0B,GAAE,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["t", "m", "g", "c", "e", "t"]
}
