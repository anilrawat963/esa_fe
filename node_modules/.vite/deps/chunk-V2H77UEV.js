import {
  e
} from "./chunk-4DGC7CBY.js";
import {
  a as a2,
  d,
  u3 as u,
  w
} from "./chunk-GNMPGHLQ.js";
import {
  a,
  i3 as i,
  s,
  s2
} from "./chunk-QY7XKUIV.js";
import {
  N,
  has
} from "./chunk-AL6YUTZM.js";

// node_modules/@arcgis/core/core/support/jsonUtils.js
function t(t5) {
  return t5 && "object" == typeof t5 && "toJSON" in t5 && "function" == typeof t5.toJSON;
}

// node_modules/@arcgis/core/portal/support/urlUtils.js
var t2 = /^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i;
var e2 = { devext: { customBaseUrl: "mapsdevext.arcgis.com", portalHostname: "devext.arcgis.com" }, qaext: { customBaseUrl: "mapsqa.arcgis.com", portalHostname: "qaext.arcgis.com" }, www: { customBaseUrl: "maps.arcgis.com", portalHostname: "www.arcgis.com" } };
function s3(s5) {
  const a8 = s5?.match(t2);
  if (!a8) return null;
  const [, r4, c4, o2] = a8;
  if (!r4) return null;
  let l3 = null, m5 = null, n3 = null;
  const { devext: u3, qaext: i4, www: p5 } = e2;
  if (c4) if (l3 = r4, o2) switch (o2.toLowerCase()) {
    case "devext":
      ({ customBaseUrl: m5, portalHostname: n3 } = u3);
      break;
    case "qa":
      ({ customBaseUrl: m5, portalHostname: n3 } = i4);
      break;
    default:
      return null;
  }
  else ({ customBaseUrl: m5, portalHostname: n3 } = p5);
  else switch (r4.toLowerCase()) {
    case "devext":
      ({ customBaseUrl: m5, portalHostname: n3 } = u3);
      break;
    case "qaext":
      ({ customBaseUrl: m5, portalHostname: n3 } = i4);
      break;
    case "www":
      ({ customBaseUrl: m5, portalHostname: n3 } = p5);
      break;
    default:
      return null;
  }
  return { customBaseUrl: m5, isPortal: false, portalHostname: n3, urlKey: l3 };
}
function a3(t5) {
  return /\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t5);
}
function r(t5) {
  const e5 = /^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i, s5 = /^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i, a8 = /^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;
  return e5.test(t5) ? t5 = t5.replace(e5, "https://www.arcgis.com") : s5.test(t5) ? t5 = t5.replace(s5, "https://devext.arcgis.com") : a8.test(t5) && (t5 = t5.replace(a8, "https://qaext.arcgis.com")), t5;
}

// node_modules/@arcgis/core/support/base64Utils.js
function t3(t5) {
  const n3 = atob(t5), r4 = new Uint8Array(n3.length);
  for (let e5 = 0; e5 < n3.length; e5++) r4[e5] = n3.charCodeAt(e5);
  return r4.buffer;
}
function n(t5) {
  const n3 = new Uint8Array(t5);
  let r4 = "";
  for (let e5 = 0; e5 < n3.length; e5++) r4 += String.fromCharCode(n3[e5]);
  return btoa(r4);
}

// node_modules/@arcgis/core/core/urlUtils.js
var l = () => i.getLogger("esri.core.urlUtils");
var c = s.request;
var f = "esri/config: esriConfig.request.proxyUrl is not set.";
var a4 = /^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i;
var h = /^\s*http:/i;
var p = /^\s*https:/i;
var m = /^\s*file:/i;
var d2 = /:\d+$/;
var y = /^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
var g = new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$");
var $ = new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");
var x = class {
  constructor(t5 = "") {
    this.uri = t5, this.scheme = null, this.authority = null, this.path = null, this.query = null, this.fragment = null, this.user = null, this.password = null, this.host = null, this.port = null;
    let n3 = this.uri.match(g);
    this.scheme = n3[2] || (n3[1] ? "" : null), this.authority = n3[4] || (n3[3] ? "" : null), this.path = n3[5], this.query = n3[7] || (n3[6] ? "" : null), this.fragment = n3[9] || (n3[8] ? "" : null), null != this.authority && (n3 = this.authority.match($), this.user = n3[3] || null, this.password = n3[4] || null, this.host = n3[6] || n3[7], this.port = n3[9] || null);
  }
  toString() {
    return this.uri;
  }
};
var w2 = {};
var U = new x(s.applicationUrl);
var O = U;
var R = b();
var q = R;
var C = () => O;
var j = () => q;
function b() {
  const t5 = O.path, n3 = t5.slice(0, t5.lastIndexOf("/") + 1);
  return `${`${O.scheme}://${O.host}${null != O.port ? `:${O.port}` : ""}`}${n3}`;
}
function I(t5) {
  if (!t5) return null;
  const n3 = { path: null, query: null }, e5 = new x(t5), r4 = t5.indexOf("?");
  return null === e5.query ? n3.path = t5 : (n3.path = t5.slice(0, r4), n3.query = W(e5.query)), e5.fragment && (n3.hash = e5.fragment, null === e5.query && (n3.path = n3.path.slice(0, n3.path.length - (e5.fragment.length + 1)))), n3;
}
function W(t5) {
  const n3 = t5.split("&"), e5 = {};
  for (const r4 of n3) {
    if (!r4) continue;
    const t6 = r4.indexOf("=");
    let n4, o2;
    t6 < 0 ? (n4 = decodeURIComponent(r4), o2 = "") : (n4 = decodeURIComponent(r4.slice(0, t6)), o2 = decodeURIComponent(r4.slice(t6 + 1)));
    let s5 = e5[n4];
    "string" == typeof s5 && (s5 = e5[n4] = [s5]), Array.isArray(s5) ? s5.push(o2) : e5[n4] = o2;
  }
  return e5;
}
function A(t5, n3) {
  return t5 ? n3 && "function" == typeof n3 ? Object.keys(t5).map((e5) => encodeURIComponent(e5) + "=" + encodeURIComponent(n3(e5, t5[e5]))).join("&") : Object.keys(t5).map((e5) => {
    const r4 = t5[e5];
    if (null == r4) return "";
    const s5 = encodeURIComponent(e5) + "=", i4 = n3?.[e5];
    return i4 ? s5 + encodeURIComponent(i4(r4)) : Array.isArray(r4) ? r4.map((t6) => t(t6) ? s5 + encodeURIComponent(JSON.stringify(t6)) : s5 + encodeURIComponent(t6)).join("&") : t(r4) ? s5 + encodeURIComponent(JSON.stringify(r4)) : s5 + encodeURIComponent(r4);
  }).filter((t6) => t6).join("&") : "";
}
function v(t5 = false) {
  let n3, r4 = c.proxyUrl;
  if ("string" == typeof t5) {
    n3 = mt(t5);
    const e5 = H(t5);
    e5 && (r4 = e5.proxyUrl);
  } else n3 = !!t5;
  if (!r4) throw l().warn(f), new s2("urlUtils:proxy-not-set", f);
  n3 && wt() && (r4 = $t(r4));
  return I(r4);
}
function P(t5, n3 = false) {
  const e5 = H(t5);
  let r4, o2;
  if (e5) {
    const t6 = E(e5.proxyUrl);
    r4 = t6.path, o2 = t6.query ? W(t6.query) : null;
  } else if (n3) {
    const n4 = v(t5);
    r4 = n4.path, o2 = n4.query;
  }
  if (r4) {
    const n4 = I(t5);
    t5 = r4 + "?" + n4.path;
    const e6 = A({ ...o2, ...n4.query });
    e6 && (t5 = `${t5}?${e6}`);
  }
  return t5;
}
var k = { path: "", query: "" };
function E(t5) {
  const n3 = t5.indexOf("?");
  return -1 !== n3 ? (k.path = t5.slice(0, n3), k.query = t5.slice(n3 + 1)) : (k.path = t5, k.query = null), k;
}
function S(t5) {
  return t5 = (t5 = Ut(t5 = Ct(t5 = E(t5).path), true)).toLowerCase();
}
function B(t5) {
  const n3 = { proxyUrl: t5.proxyUrl, urlPrefix: S(t5.urlPrefix) }, e5 = c.proxyRules, r4 = n3.urlPrefix;
  let o2 = e5.length;
  for (let s5 = 0; s5 < e5.length; s5++) {
    const t6 = e5[s5].urlPrefix;
    if (r4.startsWith(t6)) {
      if (r4.length === t6.length) return -1;
      o2 = s5;
      break;
    }
    t6.startsWith(r4) && (o2 = s5 + 1);
  }
  return e5.splice(o2, 0, n3), o2;
}
function H(t5) {
  const n3 = c.proxyRules, e5 = S(t5);
  for (let r4 = 0; r4 < n3.length; r4++) if (e5.startsWith(n3[r4].urlPrefix)) return n3[r4];
}
function T(t5, n3) {
  if (!t5 || !n3) return false;
  t5 = J(t5), n3 = J(n3);
  const e5 = s3(t5), r4 = s3(n3);
  return null != e5 && null != r4 ? e5.portalHostname === r4.portalHostname : null == e5 && null == r4 && F(t5, n3, true);
}
function D(t5, n3) {
  return t5 = J(t5), n3 = J(n3), Ut(t5) === Ut(n3);
}
function J(t5) {
  const n3 = (t5 = K(t5)).indexOf("/sharing");
  return n3 > 0 ? t5.slice(0, n3) : t5.replace(/\/+$/, "");
}
function N2(t5, n3 = c.interceptors) {
  const e5 = (n4) => n4 instanceof RegExp ? n4.test(t5) : "string" == typeof n4 ? t5.startsWith(n4) : null == n4;
  if (n3) {
    for (const r4 of n3) if (Array.isArray(r4.urls)) {
      if (r4.urls.some(e5)) return r4;
    } else if (e5(r4.urls)) return r4;
  }
  return null;
}
function F(t5, n3, e5 = false) {
  if (!t5 || !n3) return false;
  const r4 = Pt(t5), o2 = Pt(n3);
  return !(!e5 && r4.scheme !== o2.scheme) && (null != r4.host && null != o2.host && (r4.host.toLowerCase() === o2.host.toLowerCase() && r4.port === o2.port));
}
function M(t5) {
  if ("string" == typeof t5) {
    if (!Y(t5)) return true;
    t5 = Pt(t5);
  }
  if (F(t5, O)) return true;
  const n3 = c.trustedServers || [];
  for (let e5 = 0; e5 < n3.length; e5++) {
    const r4 = Q(n3[e5]);
    for (let n4 = 0; n4 < r4.length; n4++) if (F(t5, r4[n4])) return true;
  }
  return false;
}
function Q(t5) {
  return w2[t5] || (pt(t5) || ht(t5) ? w2[t5] = [new x(_(t5))] : w2[t5] = [new x(`http://${t5}`), new x(`https://${t5}`)]), w2[t5];
}
function _(t5, n3 = q, e5) {
  return ht(t5) ? e5?.preserveProtocolRelative ? t5 : "http" === O.scheme && O.authority === X(t5).slice(2) ? `http:${t5}` : `https:${t5}` : pt(t5) ? t5 : V(t5.startsWith("/") ? Ot(n3) : n3, t5);
}
function G(t5, n3 = q, e5) {
  if (null == t5 || !Y(t5)) return t5;
  const r4 = K(t5), o2 = r4.toLowerCase(), s5 = K(n3).toLowerCase().replace(/\/+$/, ""), i4 = e5 ? K(e5).toLowerCase().replace(/\/+$/, "") : null;
  if (i4 && !s5.startsWith(i4)) return t5;
  const u3 = (t6, n4, e6) => -1 === (e6 = t6.indexOf(n4, e6)) ? t6.length : e6;
  let l3 = u3(o2, "/", o2.indexOf("//") + 2), c4 = -1;
  for (; o2.slice(0, l3 + 1) === s5.slice(0, l3) + "/" && (c4 = l3 + 1, l3 !== o2.length); ) l3 = u3(o2, "/", l3 + 1);
  if (-1 === c4) return t5;
  if (i4 && c4 < i4.length) return t5;
  t5 = r4.slice(c4);
  const f5 = s5.slice(c4 - 1).replaceAll(/[^/]+/g, "").length;
  if (f5 > 0) for (let a8 = 0; a8 < f5; a8++) t5 = `../${t5}`;
  else t5 = `./${t5}`;
  return t5;
}
function K(t5) {
  return t5 = It(t5 = Lt(t5 = bt(t5 = _(t5 = t5.trim()))));
}
function V(...t5) {
  const e5 = t5.filter(N);
  if (!e5?.length) return;
  const r4 = [];
  if (Y(e5[0])) {
    const t6 = e5[0], n3 = t6.indexOf("//");
    -1 !== n3 && (r4.push(t6.slice(0, n3 + 1)), yt(e5[0]) && (r4[0] += "/"), e5[0] = t6.slice(n3 + 2));
  } else e5[0].startsWith("/") && r4.push("");
  const o2 = e5.reduce((t6, n3) => n3 ? t6.concat(n3.split("/")) : t6, []);
  for (let n3 = 0; n3 < o2.length; n3++) {
    const t6 = o2[n3];
    ".." === t6 && r4.length > 0 && ".." !== r4[r4.length - 1] ? r4.pop() : (!t6 && n3 === o2.length - 1 || t6 && ("." !== t6 || 0 === r4.length)) && r4.push(t6);
  }
  return r4.join("/");
}
function X(t5, n3 = false) {
  if (null == t5 || Z(t5) || tt(t5)) return null;
  let e5 = t5.indexOf("://");
  if (-1 === e5 && ht(t5)) e5 = 2;
  else {
    if (-1 === e5) return null;
    e5 += 3;
  }
  const r4 = t5.indexOf("/", e5);
  return -1 !== r4 && (t5 = t5.slice(0, r4)), n3 && (t5 = Ut(t5, true)), t5;
}
function Y(t5) {
  return ht(t5) || pt(t5);
}
function Z(t5) {
  return null != t5 && t5.startsWith("blob:");
}
function tt(t5) {
  return null != t5 && t5.startsWith("data:");
}
function nt(t5) {
  const n3 = ot(t5);
  return n3?.isBase64 ? t3(n3.data) : null;
}
function et(t5) {
  return n(t5).replaceAll("+", "-").replaceAll("/", "_").replace(/=+$/, "");
}
var rt = /^data:(.*?)(;base64)?,(.*)$/;
function ot(t5) {
  const n3 = t5.match(rt);
  if (!n3) return null;
  const [, e5, r4, o2] = n3;
  return { mediaType: e5, isBase64: !!r4, data: o2 };
}
function st(t5) {
  return t5.isBase64 ? `data:${t5.mediaType};base64,${t5.data}` : `data:${t5.mediaType},${t5.data}`;
}
async function it(t5) {
  return (await fetch(t5)).blob();
}
function ut(t5) {
  const n3 = nt(t5);
  if (!n3) return null;
  const e5 = ot(t5);
  return new Blob([n3], { type: e5.mediaType });
}
function ht(t5) {
  return null != t5 && t5.startsWith("/") && "/" === t5[1];
}
function pt(t5) {
  return null != t5 && a4.test(t5);
}
function mt(t5) {
  return null != t5 && p.test(t5) || "https" === O.scheme && ht(t5);
}
function dt(t5) {
  return null != t5 && h.test(t5) || "http" === O.scheme && ht(t5);
}
function yt(t5) {
  return null != t5 && m.test(t5);
}
function $t(t5) {
  return ht(t5) ? `https:${t5}` : t5.replace(h, "https:");
}
function xt() {
  return "http" === O.scheme;
}
function wt() {
  return "https" === O.scheme;
}
function Ut(t5, n3 = false) {
  return ht(t5) ? t5.slice(2) : (t5 = t5.replace(a4, ""), n3 && t5.length > 1 && t5.startsWith("/") && "/" === t5[1] && (t5 = t5.slice(2)), t5);
}
function Ot(t5) {
  const n3 = t5.indexOf("//"), e5 = t5.indexOf("/", n3 + 2);
  return -1 === e5 ? t5 : t5.slice(0, e5);
}
function Rt(t5) {
  let n3 = 0;
  if (Y(t5)) {
    const e6 = t5.indexOf("//");
    -1 !== e6 && (n3 = e6 + 2);
  }
  const e5 = t5.lastIndexOf("/");
  return e5 < n3 ? t5 : t5.slice(0, e5 + 1);
}
function qt(t5, n3) {
  if (!t5) return "";
  const e5 = I(t5).path.replace(/\/+$/, ""), r4 = e5.slice(e5.lastIndexOf("/") + 1);
  if (!n3?.length) return r4;
  const o2 = new RegExp(`\\.(${n3.join("|")})$`, "i");
  return r4.replace(o2, "");
}
function Ct(t5) {
  return t5.endsWith("/") ? t5 : `${t5}/`;
}
function jt(t5) {
  return t5.replace(/\/+$/, "");
}
function bt(t5) {
  if (/^https?:\/\//i.test(t5)) {
    const n3 = E(t5);
    t5 = (t5 = n3.path.replaceAll(/\/{2,}/g, "/")).replace("/", "//"), n3.query && (t5 += `?${n3.query}`);
  }
  return t5;
}
function Lt(t5) {
  return t5.replace(/^(https?:\/\/)(arcgis\.com)/i, "$1www.$2");
}
function It(t5) {
  const n3 = c.httpsDomains;
  if (!dt(t5)) return t5;
  const e5 = t5.indexOf("/", 7);
  let r4;
  if (r4 = -1 === e5 ? t5 : t5.slice(0, e5), r4 = r4.toLowerCase().slice(7), d2.test(r4)) {
    if (!r4.endsWith(":80")) return t5;
    r4 = r4.slice(0, -3), t5 = t5.replace(":80", "");
  }
  return xt() && r4 === O.authority && !y.test(t5) || (wt() && r4 === O.authority || n3 && n3.some((t6) => r4 === t6 || r4.endsWith(`.${t6}`)) || wt() && !H(t5)) && (t5 = $t(t5)), t5;
}
function Wt(t5, n3, e5) {
  if (!(n3 && e5 && t5 && Y(t5))) return t5;
  const r4 = t5.indexOf("//"), o2 = t5.indexOf("/", r4 + 2), s5 = t5.indexOf(":", r4 + 2), i4 = Math.min(o2 < 0 ? t5.length : o2, s5 < 0 ? t5.length : s5);
  if (t5.slice(r4 + 2, i4).toLowerCase() !== n3.toLowerCase()) return t5;
  return `${t5.slice(0, r4 + 2)}${e5}${t5.slice(i4)}`;
}
function At(t5, n3) {
  const e5 = new URL(t5);
  return e5.host = n3, e5.port && !d2.test(n3) && (e5.port = ""), e5.toString();
}
function vt(t5) {
  return new URL(t5).host;
}
function Pt(t5) {
  return "string" == typeof t5 ? new x(_(t5)) : (t5.scheme || (t5.scheme = O.scheme), t5);
}
function kt(t5) {
  return Nt.test(t5);
}
function Et(t5, n3) {
  const e5 = I(t5), r4 = Object.keys(e5.query || {});
  return r4.length > 0 && n3 && n3.warn("removeQueryParameters()", `Url query parameters are not supported, the following parameters have been removed: ${r4.join(", ")}.`), e5.path;
}
function St(t5, n3, e5) {
  const r4 = I(t5), o2 = r4.query || {};
  return o2[n3] = String(e5), `${r4.path}?${A(o2)}`;
}
function Bt(t5, n3) {
  if (!n3) return t5;
  const e5 = I(t5), r4 = e5.query || {};
  for (const [s5, i4] of Object.entries(n3)) null != i4 && (r4[s5] = i4);
  const o2 = A(r4);
  return o2 ? `${e5.path}?${o2}` : e5.path;
}
function Tt(t5) {
  if (null == t5) return null;
  const n3 = t5.match(Jt);
  return n3 ? n3[2] : null;
}
function zt(t5) {
  if (null == t5) return null;
  const n3 = t5.match(Jt);
  return n3 ? { path: n3[1], extension: n3[2] } : { path: t5, extension: null };
}
async function Dt(t5) {
  if ("string" == typeof t5) {
    return ot(t5) ?? { data: t5 };
  }
  return new Promise((n3, e5) => {
    const r4 = new FileReader();
    r4.readAsDataURL(t5), r4.onload = () => n3(ot(r4.result)), r4.onerror = (t6) => e5(t6);
  });
}
var Jt = /([^.]*)\.([^/]*)$/;
var Nt = /(^data:image\/svg|\.svg$)/i;

// node_modules/@arcgis/core/support/revision.js
var a5 = "20251114";
var c2 = "ec088c999de2dac6fb9478a47da1bad775545540";

// node_modules/@arcgis/core/kernel.js
Symbol.dispose ??= Symbol("Symbol.dispose"), Symbol.asyncDispose ??= Symbol("Symbol.asyncDispose");
var e3 = "4.34";
var s4;
var r2 = e3;
function i2(o2) {
  s4 = o2;
}
function t4(e5) {
  const r4 = s4?.findCredential(e5);
  return r4?.token ? St(e5, "token", r4.token) : e5;
}
r2 = "4.34.8", has("host-webworker") || globalThis.$arcgis || Object.defineProperty(globalThis, "$arcgis", { configurable: false, enumerable: true, writable: false, value: {} }), has("host-webworker");

// node_modules/@arcgis/core/chunks/persistableUrlUtils.js
function p2(e5, s5) {
  const o2 = s5?.url?.path;
  if (e5 && o2 && (e5 = _(e5, o2, { preserveProtocolRelative: true }), s5.portalItem && s5.readResourcePaths)) {
    const t5 = G(e5, s5.portalItem.itemUrl);
    null != t5 && t5.startsWith(U2) && s5.readResourcePaths.push(s5.portalItem.resourceFromPath(t5).path);
  }
  return (e5 = I2(e5, s5?.portal)) && d3.test(e5) ? R2(e5) : e5;
}
function m2(e5, n3, a8 = 0) {
  if (null == (e5 = e5 && d3.test(e5) ? w3(e5) : e5)) return e5;
  !Y(e5) && n3?.blockedRelativeUrls && n3.blockedRelativeUrls.push(e5);
  let c4 = _(e5);
  if (n3) {
    const t5 = n3.verifyItemRelativeUrls?.rootPath || n3.url?.path;
    if (t5) {
      const s5 = I2(t5, n3.portal), o2 = I2(c4, n3.portal);
      c4 = G(o2, s5, s5);
      null != c4 && c4 !== o2 && c4 !== e5 && n3.verifyItemRelativeUrls && n3.verifyItemRelativeUrls.writtenUrls.push(c4);
    }
  }
  return c4 = x2(c4, n3?.portal), Y(c4) && (c4 = K(c4)), n3?.resources && n3?.portalItem && !Y(c4) && !tt(c4) && 0 === a8 && n3.resources.toKeep.push({ resource: n3.portalItem.resourceFromPath(c4), compress: false }), c4;
}
function f2(e5, t5, r4) {
  return p2(e5, r4);
}
function h2(e5, t5, r4, s5) {
  const o2 = m2(e5, s5);
  void 0 !== o2 && (t5[r4] = o2);
}
var d3 = /\/items\/([^/]+)\/resources\/(.*)/;
var U2 = "./resources/";
function v2(e5) {
  const t5 = e5?.match(d3) ?? null;
  return t5?.[1] ?? null;
}
function g2(e5) {
  const t5 = e5?.match(d3) ?? null;
  if (null == t5) return null;
  const r4 = t5[2], s5 = r4.lastIndexOf("/");
  if (-1 === s5) {
    const { path: e6, extension: t6 } = zt(r4);
    return { prefix: null, filename: e6, extension: t6 };
  }
  const { path: o2, extension: l3 } = zt(r4.slice(s5 + 1));
  return { prefix: r4.slice(0, s5), filename: o2, extension: l3 };
}
function x2(e5, t5) {
  return t5 && !t5.isPortal && t5.urlKey && t5.customBaseUrl ? Wt(e5, `${t5.urlKey}.${t5.customBaseUrl}`, t5.portalHostname) : e5;
}
function I2(e5, t5) {
  if (!t5 || t5.isPortal || !t5.urlKey || !t5.customBaseUrl) return e5;
  const r4 = `${t5.urlKey}.${t5.customBaseUrl}`, s5 = C();
  return F(s5, `${s5.scheme}://${r4}`) ? Wt(e5, t5.portalHostname, r4) : Wt(e5, r4, t5.portalHostname);
}
function R2(t5) {
  if (!t5) return t5 || null;
  let r4 = t5;
  return r4 && s4 && !s4.findCredential(r4) && (r4 = r(r4), r4 = r4.replace(/^https?:\/\/www\.arcgis\.com/, "https://cdn.arcgis.com"), r4 = r4.replace(/^https?:\/\/devext\.arcgis\.com/, "https://cdndev.arcgis.com"), r4 = r4.replace(/^https?:\/\/qaext\.arcgis\.com/, "https://cdnqa.arcgis.com")), r4;
}
function w3(t5) {
  if (!t5) return t5 || null;
  let r4 = t5;
  return r4 = r4.replace(/^https?:\/\/cdn\.arcgis\.com/, "https://www.arcgis.com"), r4 = r4.replace(/^https?:\/\/cdndev\.arcgis\.com/, "https://devext.arcgis.com"), r4 = r4.replace(/^https?:\/\/cdnqa\.arcgis\.com/, "https://qaext.arcgis.com"), r4 && s4 && !s4.findCredential(r4) && (r4 = r(r4)), r4;
}
var y2 = Object.freeze(Object.defineProperty({ __proto__: null, ensureMainOnlineDomain: x2, fromCDNUrl: w3, fromJSON: p2, itemIdFromResourceUrl: v2, prefixAndFilenameFromResourceUrl: g2, read: f2, toCDNUrl: R2, toJSON: m2, write: h2 }, Symbol.toStringTag, { value: "Module" }));

// node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js
var o = { mapserver: "MapServer", imageserver: "ImageServer", featureserver: "FeatureServer", knowledgegraphserver: "KnowledgeGraphServer", sceneserver: "SceneServer", streamserver: "StreamServer", vectortileserver: "VectorTileServer", "3dtilesserver": "3DTilesServer", videoserver: "VideoServer" };
var a6 = Object.values(o);
var c3 = new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a6.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`, "i");
var v3 = new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${a6.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`, "i");
var f3 = /(.*?)\/(?:layers\/)?(\d+)\/?$/i;
function d4(e5) {
  return c3.test(e5);
}
function p3(r4) {
  if (null == r4) return null;
  const t5 = I(r4), s5 = t5?.path.match(c3) || t5?.path.match(v3);
  if (!s5) return null;
  const [, n3, l3, i4, u3] = s5, a8 = l3.indexOf("/");
  return { title: m3(-1 !== a8 ? l3.slice(a8 + 1) : l3), serverType: o[i4.toLowerCase()], sublayer: null != u3 && "" !== u3 ? parseInt(u3, 10) : null, url: { path: n3 } };
}
function h3(r4) {
  const t5 = I(r4).path.match(f3);
  return t5 ? { serviceUrl: t5[1], sublayerId: Number(t5[2]) } : null;
}
function m3(e5) {
  return (e5 = e5.replaceAll(/\s*[/_]+\s*/g, " "))[0].toUpperCase() + e5.slice(1);
}
function w4(e5, r4) {
  const t5 = [];
  if (e5) {
    const r5 = p3(e5);
    null != r5 && r5.title && t5.push(r5.title);
  }
  if (r4) {
    const e6 = m3(r4);
    t5.push(e6);
  }
  if (2 === t5.length) {
    if (t5[0].toLowerCase().includes(t5[1].toLowerCase())) return t5[0];
    if (t5[1].toLowerCase().includes(t5[0].toLowerCase())) return t5[1];
  }
  return t5.join(" - ");
}
function g3(e5) {
  let t5 = X(e5, true);
  return !!t5 && (t5 = t5.toLowerCase(), t5.endsWith(".arcgis.com") && (t5.startsWith("services") || t5.startsWith("tiles") || t5.startsWith("features") || /^[a-z\d-]+\.svcs[a-z\d-]*\./.test(t5)));
}
function y3(e5, r4) {
  return e5 ? jt(Et(e5, r4)) : e5;
}
function S2(r4) {
  let { url: t5 } = r4;
  if (!t5) return { url: t5 };
  t5 = Et(t5, r4.logger);
  const l3 = I(t5), i4 = p3(l3.path);
  let u3;
  if (null != i4) null != i4.sublayer && null == r4.layer.layerId && (u3 = i4.sublayer), t5 = i4.url.path;
  else if (r4.nonStandardUrlAllowed) {
    const e5 = h3(l3.path);
    null != e5 && (t5 = e5.serviceUrl, u3 = e5.sublayerId);
  }
  return { url: jt(t5), layerId: u3 };
}
function C2(e5, r4, s5, n3, l3) {
  h2(r4, n3, "url", l3), n3.url && null != e5.layerId && (n3.url = V(n3.url, s5, e5.layerId.toString()));
}
function b2(e5) {
  if (!e5) return false;
  const r4 = e5.toLowerCase(), t5 = r4.includes("/services/"), s5 = r4.includes("/mapserver/wmsserver"), n3 = r4.includes("/imageserver/wmsserver"), l3 = r4.includes("/wmsserver");
  return t5 && (s5 || n3 || l3);
}

// node_modules/@arcgis/core/support/apiKeyUtils.js
var e4 = /* @__PURE__ */ new Set(["elevation3d.arcgis.com", "js.arcgis.com", "jsdev.arcgis.com", "jsqa.arcgis.com", "static.arcgis.com"]);
function r3(t5) {
  if (!a7(t5)) return null;
  const e5 = (s5) => s5 instanceof RegExp ? s5.test(t5) : "string" == typeof s5 && t5.startsWith(s5), r4 = s.apiKeys;
  if (Array.isArray(r4.scopes)) {
    for (const s5 of r4.scopes) if (Array.isArray(s5.urls)) {
      if (s5.urls.some(e5)) return s5.token;
    } else if (e5(s5.urls)) return s5.token;
  }
  return r4.basemapStyles && /^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t5) ? r4.basemapStyles : s.apiKey && /^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t5) ? s.apiKey : null;
}
function i3() {
  return null != s.apiKey || null != s.apiKeys.basemapStyles;
}
function n2(s5, t5) {
  return t5 ? a7(s5) : null != r3(s5);
}
function a7(s5) {
  const r4 = X(s5, true);
  return !!r4 && (!e4.has(r4) && !s5.endsWith("/sharing/rest/generateToken"));
}

// node_modules/@arcgis/core/support/requestUtils.js
function u2(r4, t5, o2 = false, n3) {
  return new Promise((s5, i4) => {
    if (a2(n3)) return void i4(f4());
    let c4 = () => {
      l3(), i4(new Error(`Unable to load ${t5}`));
    }, a8 = async () => {
      const e5 = r4;
      try {
        await e5.decode();
      } catch {
      }
      l3(), s5(e5);
    }, u3 = () => {
      if (!r4) return;
      const e5 = r4;
      l3(), e5.src = "", i4(f4());
    };
    const l3 = () => {
      r4 && (r4.removeEventListener("error", c4), r4.removeEventListener("load", a8), c4 = null, a8 = null, r4 = null, n3?.removeEventListener("abort", u3), u3 = null, o2 && URL.revokeObjectURL(t5));
    };
    n3?.addEventListener("abort", u3), r4.addEventListener("error", c4), r4.addEventListener("load", a8);
  });
}
function f4() {
  try {
    return new DOMException("Aborted", "AbortError");
  } catch {
    const r4 = new Error();
    return r4.name = "AbortError", r4;
  }
}
var l2 = "Timeout exceeded";
function m4() {
  return new Error(l2);
}
function p4(r4) {
  return "object" == typeof r4 && !!r4 && "message" in r4 && r4.message === l2;
}
function d5(e5) {
  s.request.crossOriginNoCorsDomains || (s.request.crossOriginNoCorsDomains = {});
  const o2 = s.request.crossOriginNoCorsDomains;
  for (let r4 of e5) r4 = r4.toLowerCase(), /^https?:\/\//.test(r4) ? o2[X(r4) ?? ""] = 0 : (o2[X("http://" + r4) ?? ""] = 0, o2[X("https://" + r4) ?? ""] = 0);
}
function w5(e5) {
  const n3 = s.request.crossOriginNoCorsDomains;
  if (n3) {
    let r4 = X(e5);
    if (r4) return r4 = r4.toLowerCase(), !F(r4, C()) && n3[r4] < Date.now() - 36e5;
  }
  return false;
}
async function L(e5) {
  const o2 = I(e5);
  e5 = o2.path, "json" === o2.query?.f && (e5 += "?f=json");
  try {
    await fetch(e5, { mode: "no-cors", credentials: "include" });
  } catch {
  }
  const n3 = s.request.crossOriginNoCorsDomains, s5 = X(e5);
  n3 && s5 && (n3[s5.toLowerCase()] = Date.now());
}
var v4 = /* @__PURE__ */ new Map();
function h4(r4, e5) {
  const t5 = e5?.preferredHost;
  if (!t5 || F(r4, `https://${t5}`, true)) return;
  const n3 = p3(r4);
  if (!n3 || "FeatureServer" !== n3.serverType || a3(r4)) return;
  const s5 = n3.url.path.toLowerCase();
  v4.has(s5) || v4.set(s5, t5);
}
function E2(r4) {
  const e5 = p3(r4)?.url.path.toLowerCase();
  if (!e5) return r4;
  const t5 = v4.get(e5);
  return t5 ? At(r4, t5) : r4;
}

// node_modules/@arcgis/core/request.js
async function H2(e5, r4) {
  e5 instanceof URL && (e5 = e5.toString()), r4?.query instanceof URLSearchParams && (r4.query = W(r4.query.toString().replaceAll("+", " ")));
  const t5 = tt(e5), s5 = Z(e5);
  s5 || t5 || (e5 = K(e5));
  const o2 = { url: e5, requestOptions: { ...r4 } }, a8 = (e6) => ({ data: e6, getAllHeaders: B2, getHeader: B2, httpStatus: 200, requestOptions: o2.requestOptions, url: o2.url }), i4 = N2(e5, _2.internalInterceptors);
  if (i4) {
    const e6 = await Y2(i4, o2);
    if (null != e6) return a8(e6);
  }
  let l3 = N2(e5);
  if (l3) {
    const e6 = await Y2(l3, o2);
    if (null != e6) return a8(e6);
    l3.after || l3.error || (l3 = null);
  }
  if (e5 = o2.url, "image" === (r4 = o2.requestOptions).responseType && (has("host-webworker") || has("host-node"))) throw W2("request:invalid-parameters", new Error("responseType 'image' is not supported in Web Workers or Node environment"), o2);
  if ("head" === r4.method) {
    if (r4.body) throw W2("request:invalid-parameters", new Error("body parameter cannot be set when method is 'head'"), o2);
    if (t5 || s5) throw W2("request:invalid-parameters", new Error("data and blob URLs are not supported for method 'head'"), o2);
  }
  if (await G2(), M2) return M2.execute(e5, r4);
  const h5 = new AbortController(), f5 = w(r4, () => h5.abort()), y4 = { controller: h5, credential: void 0, credentialToken: void 0, fetchOptions: void 0, hasToken: false, interceptor: l3, params: o2, redoRequest: false, useIdentity: _2.useIdentity, useProxy: false, useSSL: false, withCredentials: false }, w6 = r4.useRequestQueue ? te(y4) : se(y4), g4 = await w6.finally(() => f5?.remove());
  return l3?.after?.(g4), g4;
}
var M2;
var R3 = false;
var _2 = s.request;
var D2 = "FormData" in globalThis;
var F2 = /* @__PURE__ */ new Set([499, 498, 403, 401]);
var I3 = /* @__PURE__ */ new Set(["COM_0056", "COM_0057", "SB_0008"]);
var N3 = [/\/arcgis\/tokens/i, /\/sharing(\/rest)?\/generatetoken/i, /\/rest\/info/i];
var B2 = () => null;
var $2 = Symbol();
function z(e5) {
  const r4 = X(e5);
  r4 && !H2._corsServers.includes(r4) && H2._corsServers.push(r4);
}
function Q2(e5) {
  const r4 = X(e5);
  return !r4 || r4.endsWith(".arcgis.com") || H2._corsServers.includes(r4) || M(r4);
}
function W2(e5, r4, o2, n3) {
  let l3;
  const u3 = { url: o2.url, requestOptions: o2.requestOptions, getAllHeaders: B2, getHeader: B2, ssl: false };
  if (r4 instanceof s2) return r4.details ? (r4.details = a(r4.details), r4.details.url = o2.url, r4.details.requestOptions = o2.requestOptions) : r4.details = u3, r4;
  if (r4) {
    const e6 = n3 && (() => Array.from(n3.headers)), t5 = n3 && ((e7) => n3.headers.get(e7)), s5 = n3?.status, o3 = r4.message;
    o3 && (l3 = o3), e6 && t5 && (u3.getAllHeaders = e6, u3.getHeader = t5), u3.httpStatus = (null != r4.httpCode ? r4.httpCode : r4.code) || s5 || 0, u3.subCode = r4.subcode, u3.messageCode = r4.messageCode, "string" == typeof r4.details ? (u3.messages = [r4.details], l3 ??= r4.details) : (u3.messages = r4.details, l3 ??= u3.messages?.[0]), u3.raw = $2 in r4 ? r4[$2] : r4;
  }
  return l3 ??= "Error", d(r4) ? u() : new s2(e5, l3, u3);
}
async function G2() {
  has("host-webworker") && (!M2 && globalThis.invokeStaticMessage ? M2 = await import("./request-VOGYOR3N.js") : R3 = true);
}
async function J2() {
  s4 || await import("./IdentityManager-KLQ5MWI3.js");
}
async function K2(e5) {
  const t5 = e5.params.url, s5 = e5.params.requestOptions, o2 = e5.controller.signal, n3 = s5.body;
  let a8 = null, i4 = null;
  if (D2 && "HTMLFormElement" in globalThis && (n3 instanceof FormData ? a8 = n3 : n3 instanceof HTMLFormElement && (a8 = new FormData(n3))), "string" == typeof n3 && (i4 = n3), e5.fetchOptions = { cache: s5.cacheBust ? "no-cache" : "default", credentials: "same-origin", headers: s5.headers || {}, keepalive: s5.keepAlive ?? false, method: "head" === s5.method ? "HEAD" : "GET", mode: "cors", priority: _2.priority, redirect: "follow", signal: o2 }, (a8 || i4) && (e5.fetchOptions.body = a8 || i4), (R3 || "anonymous" === s5.authMode) && (e5.useIdentity = false), e5.hasToken = !!(/token=/i.test(t5) || s5.query?.token || a8?.get("token")), !e5.hasToken) {
    const r4 = r3(t5);
    r4 && (s5.query ??= {}, s5.query.token = r4, e5.hasToken = true);
  }
  if (e5.useIdentity && !e5.hasToken && !e5.credential && !e5.credentialToken && !X2(t5) && !a2(o2)) {
    let n4;
    "immediate" === s5.authMode ? (await J2(), n4 = await s4.getCredential(t5, { signal: o2 })) : "no-prompt" === s5.authMode ? (await J2(), n4 = await s4.getCredential(t5, { prompt: false, signal: o2 }).catch(() => {
    })) : s4 && (n4 = s4.findCredential(t5)), n4 && (e5.credential = n4, e5.credentialToken = n4.token, e5.useSSL = !!n4.ssl);
  }
}
function X2(e5) {
  return N3.some((r4) => r4.test(e5));
}
async function V2(e5) {
  let t5 = e5.params.url, s5 = E2(t5);
  const o2 = e5.params.requestOptions, n3 = e5.fetchOptions ?? {}, i4 = Z(t5) || tt(t5), l3 = o2.responseType || "json", u3 = i4 ? 0 : null != o2.timeout ? o2.timeout : _2.timeout;
  let p5 = false;
  if (!i4) {
    e5.useSSL && (t5 = $t(t5));
    let a8 = { ...o2.query };
    e5.credentialToken && (a8.token = e5.credentialToken);
    let i5 = A(a8);
    has("esri-url-encodes-apostrophe") && (i5 = i5.replaceAll("'", "%27"));
    const l4 = s5.length + 1 + i5.length;
    let u4;
    p5 = "delete" === o2.method || "post" === o2.method || "put" === o2.method || !!o2.body || l4 > _2.maxUrlLength;
    const c4 = o2.useProxy || !!H(t5);
    if (c4) {
      const e6 = v(t5);
      u4 = e6.path, !p5 && u4.length + 1 + l4 > _2.maxUrlLength && (p5 = true), e6.query && (a8 = { ...e6.query, ...a8 });
    }
    if ("HEAD" === n3.method && (p5 || c4)) {
      if (p5) {
        if (l4 > _2.maxUrlLength) throw W2("request:invalid-parameters", new Error("URL exceeds maximum length"), e5.params);
        throw W2("request:invalid-parameters", new Error("cannot use POST request when method is 'head'"), e5.params);
      }
      if (c4) throw W2("request:invalid-parameters", new Error("cannot use proxy when method is 'head'"), e5.params);
    }
    if (p5 ? (n3.method = "delete" === o2.method ? "DELETE" : "put" === o2.method ? "PUT" : "POST", o2.body ? t5 = Bt(t5, a8) : (n3.body = A(a8), n3.headers || (n3.headers = {}), n3.headers["Content-Type"] = "application/x-www-form-urlencoded")) : t5 = Bt(t5, a8), c4 && (e5.useProxy = true, t5 = `${u4}?${t5}`), a8.token && D2 && n3.body instanceof FormData && !a3(t5) && n3.body.set("token", a8.token), o2.hasOwnProperty("withCredentials")) e5.withCredentials = o2.withCredentials;
    else if (!F(t5, C())) {
      if (M(t5)) e5.withCredentials = true;
      else if (s4) {
        const s6 = s4.findServerInfo(t5);
        s6?.webTierAuth && (e5.withCredentials = true);
      }
    }
    e5.withCredentials && (n3.credentials = "include", w5(t5) && await L(p5 ? Bt(t5, a8) : t5)), s5 = E2(t5);
  }
  let m5, O2, C3 = 0, x3 = false;
  u3 > 0 && (C3 = setTimeout(() => {
    x3 = true, e5.controller.abort();
  }, u3));
  try {
    if ("native-request-init" === o2.responseType) O2 = n3, O2.url = s5, o2.signal ? O2.signal = o2.signal : delete O2.signal;
    else if ("image" !== o2.responseType || "default" !== n3.cache || n3.keepalive || "GET" !== n3.method || p5 || Z2(o2.headers) || !i4 && !e5.useProxy && _2.proxyUrl && !Q2(t5)) {
      if (H2._beforeFetch && await H2._beforeFetch(t5, n3), m5 = await fetch(s5, n3), H2._afterFetch && await H2._afterFetch(m5), e5.useProxy || z(t5), "native" === o2.responseType) O2 = m5;
      else if ("HEAD" !== n3.method) if (m5.ok) {
        switch (l3) {
          case "array-buffer":
            O2 = await m5.arrayBuffer();
            break;
          case "blob":
          case "image":
            O2 = await m5.blob();
            break;
          default:
            O2 = await m5.text();
        }
        if (C3 && (clearTimeout(C3), C3 = 0), "json" === l3 || "xml" === l3 || "document" === l3) if (O2) switch (l3) {
          case "json":
            O2 = JSON.parse(O2);
            break;
          case "xml":
            O2 = ee(O2, "application/xml");
            break;
          case "document":
            O2 = ee(O2, "text/html");
        }
        else O2 = null;
        if (O2) {
          if ("array-buffer" === l3 || "blob" === l3) {
            const e6 = m5.headers.get("Content-Type");
            if (e6 && /application\/json|text\/plain/i.test(e6) && O2["blob" === l3 ? "size" : "byteLength"] <= 750) try {
              const e7 = await new Response(O2).json();
              e7.error && (O2 = e7);
            } catch {
            }
          }
          "image" === l3 && O2 instanceof Blob && (O2 = await ne(URL.createObjectURL(O2), e5, true));
        }
      } else {
        O2 = await m5.text();
        try {
          O2 = JSON.parse(O2);
        } catch {
        }
      }
    } else O2 = await ne(s5, e5);
  } catch (L2) {
    if ("AbortError" === L2.name) {
      if (x3) throw m4();
      throw u("Request canceled");
    }
    if (!(!m5 && L2 instanceof TypeError && _2.proxyUrl) || o2.body || "delete" === o2.method || "head" === o2.method || "post" === o2.method || "put" === o2.method || e5.useProxy || Q2(t5)) throw L2;
    e5.redoRequest = true, B({ proxyUrl: _2.proxyUrl, urlPrefix: X(t5) ?? "" });
  } finally {
    C3 && clearTimeout(C3);
  }
  return [m5, O2];
}
async function Y2(e5, r4) {
  if (null != e5.responseData) return e5.responseData;
  if (e5.headers && (r4.requestOptions.headers = { ...r4.requestOptions.headers, ...e5.headers }), e5.query && (r4.requestOptions.query = { ...r4.requestOptions.query, ...e5.query }), e5.before) {
    let o2, n3;
    try {
      n3 = await e5.before(r4);
    } catch (s5) {
      o2 = W2("request:interceptor", s5, r4);
    }
    if ((n3 instanceof Error || n3 instanceof s2) && (o2 = W2("request:interceptor", n3, r4)), o2) throw e5.error && e5.error(o2), o2;
    return n3;
  }
}
function Z2(e5) {
  if (e5) {
    for (const r4 of Object.getOwnPropertyNames(e5)) if (e5[r4]) return true;
  }
  return false;
}
function ee(e5, r4) {
  let t5;
  try {
    t5 = new DOMParser().parseFromString(e5, r4);
  } catch {
  }
  if (!t5 || t5.getElementsByTagName("parsererror").length) throw new SyntaxError("XML Parse error");
  return t5;
}
H2._corsServers = ["https://server.arcgisonline.com", "https://services.arcgisonline.com"], H2._beforeFetch = void 0, H2._afterFetch = void 0;
var re = /* @__PURE__ */ new Map();
async function te(e5) {
  const r4 = ae(e5.params.url);
  if (!r4) return se(e5);
  const { QueueProcessor: t5 } = await import("./QueueProcessor-DBMXKUJV.js"), s5 = e(re, r4.origin, () => {
    const e6 = r4.isHosted ? has("request-queue-concurrency-hosted") : has("request-queue-concurrency-non-hosted");
    return new t5({ concurrency: e6, process: (e7) => {
      if (a2(e7.params.requestOptions)) throw W2("", u("Request canceled"), e7.params);
      return se(e7);
    } });
  });
  return s5.push(e5);
}
async function se(e5) {
  let t5, s5;
  await K2(e5);
  try {
    do {
      [t5, s5] = await V2(e5);
    } while (!await oe(e5, t5, s5));
  } catch (a8) {
    const r4 = W2("request:server", a8, e5.params, t5);
    throw r4.details.ssl = e5.useSSL, e5.interceptor?.error && e5.interceptor.error(r4), r4;
  }
  const o2 = e5.params.url;
  if (s5) if (/\/sharing\/rest\/(accounts|portals)\/self/i.test(o2)) {
    if (!e5.hasToken && !e5.credentialToken && s5.user?.username && !M(o2)) {
      const e6 = X(o2, true);
      e6 && _2.trustedServers.push(e6);
    }
    Array.isArray(s5.authorizedCrossOriginNoCorsDomains) && d5(s5.authorizedCrossOriginNoCorsDomains);
  } else {
    "json" === (e5.params.requestOptions.responseType || "json") && h4(o2, s5);
  }
  const n3 = e5.credential;
  if (n3 && s4) {
    const e6 = s4.findServerInfo(n3.server);
    let t6 = e6?.owningSystemUrl;
    if (t6) {
      t6 = t6.replace(/\/?$/, "/sharing");
      const e7 = s4.findCredential(t6, n3.userId);
      e7 && -1 === s4._getIdenticalSvcIdx(t6, e7) && e7.resources.unshift(t6);
    }
  }
  return { data: s5, getAllHeaders: t5 ? () => Array.from(t5.headers) : B2, getHeader: t5 ? (e6) => t5.headers.get(e6) : B2, httpStatus: t5?.status ?? 200, requestOptions: e5.params.requestOptions, ssl: e5.useSSL, url: e5.params.url };
}
async function oe(e5, t5, s5) {
  if (e5.redoRequest) return e5.redoRequest = false, false;
  const o2 = e5.params.requestOptions;
  if (!t5 || "native" === o2.responseType || "native-request-init" === o2.responseType) return true;
  let n3, a8;
  if (s5 && (s5.error && "object" == typeof s5.error ? n3 = s5.error : "error" === s5.status && Array.isArray(s5.messages) && (n3 = { ...s5 }, n3[$2] = s5, n3.details = s5.messages)), !n3 && !t5.ok) throw n3 = new Error(`Unable to load ${t5.url} status: ${t5.status}`), n3[$2] = s5, n3;
  let i4, l3 = null;
  n3 && (a8 = Number(n3.code), l3 = n3.hasOwnProperty("subcode") ? Number(n3.subcode) : null, i4 = n3.messageCode, i4 = i4?.toUpperCase());
  const u3 = o2.authMode;
  if (403 === a8 && (4 === l3 || n3.message?.toLowerCase().includes("ssl") && !n3.message.toLowerCase().includes("permission"))) {
    if (!e5.useSSL) return e5.useSSL = true, false;
  } else if (!e5.hasToken && e5.useIdentity && ("no-prompt" !== u3 || 498 === a8) && void 0 !== a8 && F2.has(a8) && !X2(e5.params.url) && (403 !== a8 || (!i4 || !I3.has(i4)) && (null == l3 || 2 === l3 && e5.credentialToken))) {
    await J2();
    try {
      const t6 = await s4.getCredential(e5.params.url, { error: W2("request:server", n3, e5.params), credential: e5.credential, prompt: "no-prompt" !== u3, signal: e5.controller.signal, token: e5.credentialToken });
      return e5.credential = t6, e5.credentialToken = t6.token, e5.useSSL = e5.useSSL || t6.ssl, false;
    } catch (c4) {
      if ("no-prompt" === u3) return e5.credential = void 0, e5.credentialToken = void 0, false;
      n3 = c4;
    }
  }
  if (n3) throw n3;
  return true;
}
function ne(e5, r4, t5 = false) {
  const s5 = r4.controller.signal, o2 = new Image();
  return r4.withCredentials ? o2.crossOrigin = "use-credentials" : o2.crossOrigin = "anonymous", o2.alt = "", o2.fetchPriority = _2.priority, o2.src = e5, u2(o2, e5, t5, s5);
}
function ae(e5) {
  let r4, t5;
  return "string" == typeof e5 ? (r4 = X(e5, true), t5 = g3(e5)) : (r4 = e5.origin, t5 = g3(e5.toString())), null == r4 ? null : { origin: r4, isHosted: t5 };
}

export {
  t,
  s3 as s,
  a3 as a,
  r,
  t3 as t2,
  x,
  j,
  I,
  W,
  A,
  P,
  H,
  T,
  D,
  N2 as N,
  F,
  _,
  G,
  K,
  V,
  Y,
  Z,
  tt,
  nt,
  et,
  ot,
  st,
  it,
  ut,
  ht,
  mt,
  $t,
  Rt,
  qt,
  Ct,
  jt,
  At,
  vt,
  kt,
  Bt,
  Tt,
  Dt,
  a5 as a2,
  c2 as c,
  e3 as e,
  s4 as s2,
  r2,
  i2 as i,
  t4 as t3,
  p2 as p,
  m2 as m,
  f2 as f,
  h2 as h,
  v2 as v,
  g2 as g,
  x2,
  R2 as R,
  y2 as y,
  d4 as d,
  p3 as p2,
  h3 as h2,
  m3 as m2,
  w4 as w,
  g3 as g2,
  y3 as y2,
  S2 as S,
  C2 as C,
  b2 as b,
  r3,
  i3 as i2,
  n2 as n,
  a7 as a3,
  u2 as u,
  p4 as p3,
  H2
};
//# sourceMappingURL=chunk-V2H77UEV.js.map
