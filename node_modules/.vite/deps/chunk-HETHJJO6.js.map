{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix3DrawUniform.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepthToWriteShadowMap.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{If as e,glsl as a}from\"../shaderModules/glsl.js\";function r(e){e.varyings.add(\"linearDepth\",\"float\",{invariant:!0})}function t(t,i){i&&r(t),t.vertex.code.add(a`\n    void forwardLinearDepth(float _linearDepth) { ${e(i,\"linearDepth = _linearDepth;\")} }\n  `)}export{t as ForwardLinearDepth,r as addLinearDepth};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{FloatBindUniform as o}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as d}from\"../../shaderModules/glsl.js\";function e({code:e,uniforms:i},l){i.add(new o(\"dpDummy\",()=>1)),e.add(d`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 hiD = hiA + hiB;\nvec3 loD = loA + loB;\nreturn  dpDummy * hiD + loD;\n}`)}export{e as DoublePrecision};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"../../../../webgl/Uniform.js\";class t extends r{constructor(r,t,o){super(r,\"mat3\",2,(s,e,m)=>s.setUniformMatrix3fv(r,t(e,m),o))}}export{t as Matrix3DrawUniform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{DoublePrecision as a}from\"../util/DoublePrecision.glsl.js\";import{Float3DrawUniform as t}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as i}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as m}from\"../../shaderModules/glsl.js\";import{Matrix3DrawUniform as s}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as d}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as l}from\"../../shaderModules/Matrix4PassUniform.js\";import{NoParameters as n}from\"../../../../../webgl/NoParameters.js\";function f(r,o){const{attributes:e,vertex:n,varyings:f,fragment:v}=r;n.include(a,o),e.add(\"position\",\"vec3\"),f.add(\"vPositionWorldCameraRelative\",\"vec3\"),f.add(\"vPosition_view\",\"vec3\",{invariant:!0}),n.uniforms.add(new i(\"transformWorldFromViewTH\",r=>r.transformWorldFromViewTH),new i(\"transformWorldFromViewTL\",r=>r.transformWorldFromViewTL),new d(\"transformViewFromCameraRelativeRS\",r=>r.transformViewFromCameraRelativeRS),new l(\"transformProjFromView\",r=>r.transformProjFromView),new s(\"transformWorldFromModelRS\",r=>r.transformWorldFromModelRS),new t(\"transformWorldFromModelTH\",r=>r.transformWorldFromModelTH),new t(\"transformWorldFromModelTL\",r=>r.transformWorldFromModelTL)),n.code.add(m`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = transformWorldFromModelRS * position;\nvec3 transform_CameraRelativeFromModel = dpAdd(\ntransformWorldFromModelTL,\ntransformWorldFromModelTH,\n-transformWorldFromViewTL,\n-transformWorldFromViewTH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}`),n.code.add(m`\n    void forwardPosition(float fOffset) {\n      vPositionWorldCameraRelative = positionWorldCameraRelative();\n      if (fOffset != 0.0) {\n        vPositionWorldCameraRelative += fOffset * ${o.spherical?m`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:m`vec3(0.0, 0.0, 1.0)`};\n      }\n\n      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;\n      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);\n    }\n  `),v.uniforms.add(new i(\"transformWorldFromViewTL\",r=>r.transformWorldFromViewTL)),n.code.add(m`vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}`),v.code.add(m`vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}`)}class v extends n{constructor(){super(...arguments),this.transformWorldFromViewTH=e(),this.transformWorldFromViewTL=e(),this.transformViewFromCameraRelativeRS=r(),this.transformProjFromView=o()}}class F extends n{constructor(){super(...arguments),this.transformWorldFromModelRS=r(),this.transformWorldFromModelTH=e(),this.transformWorldFromModelTL=e()}}export{f as VertexPosition,F as VertexPositionDrawParameters,v as VertexPositionPassParameters};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as r}from\"./ForwardLinearDepth.glsl.js\";import{isShadowLikeOutput as e}from\"./ShaderOutput.js\";import{VertexPosition as a}from\"./attributes/VertexPosition.glsl.js\";import{Float2BindUniform as o}from\"../shaderModules/Float2BindUniform.js\";import{glsl as t,If as n}from\"../shaderModules/glsl.js\";function i(r){r.vertex.uniforms.add(new o(\"nearFar\",r=>r.camera.nearFar))}function d(r){r.vertex.code.add(t`float calculateLinearDepth(vec2 nearFar,float z) {\nreturn (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n}`)}function s(o,s){const{vertex:l}=o,u=e(s.output);u&&(o.include(a,s),r(o,!0),i(o),d(o)),l.code.add(t`\n    void forwardLinearDepthToWriteShadowMap() {\n      ${n(u,\"forwardLinearDepth(calculateLinearDepth(nearFar, vPosition_view.z));\")}\n    }\n  `)}export{s as ForwardLinearDepthToWriteShadowMap,d as addCalculateLinearDepth,i as addNearFar};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{addCalculateLinearDepth as e}from\"./ForwardLinearDepthToWriteShadowMap.glsl.js\";import{glsl as r}from\"../shaderModules/glsl.js\";function o(o){e(o),o.vertex.code.add(r`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\nvec4 eye = view * vec4(pos, 1.0);\ndepth = calculateLinearDepth(nearFar,eye.z);\nreturn proj * eye;\n}`),o.vertex.code.add(r`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\nreturn proj * (view * vec4(pos, 1.0));\n}`)}export{o as Transform};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAIwD,SAASA,GAAEC,IAAE;AAAC,EAAAA,GAAE,SAAS,IAAI,eAAc,SAAQ,EAAC,WAAU,KAAE,CAAC;AAAC;AAAC,SAASC,GAAEA,IAAEC,IAAE;AAAC,EAAAA,MAAGH,GAAEE,EAAC,GAAEA,GAAE,OAAO,KAAK,IAAI;AAAA,oDACjHE,GAAED,IAAE,6BAA6B,CAAC;AAAA,GACnF;AAAC;;;ACF0H,SAASE,GAAE,EAAC,MAAKA,IAAE,UAASC,GAAC,GAAE,GAAE;AAAC,EAAAA,GAAE,IAAI,IAAI,EAAE,WAAU,MAAI,CAAC,CAAC,GAAED,GAAE,IAAI;AAAA;AAAA;AAAA;AAAA,EAIlM;AAAC;;;ACJoD,IAAME,KAAN,cAAgB,EAAC;AAAA,EAAC,YAAYC,IAAED,IAAEE,IAAE;AAAC,UAAMD,IAAE,QAAO,GAAE,CAAC,GAAEE,IAAE,MAAI,EAAE,oBAAoBF,IAAED,GAAEG,IAAE,CAAC,GAAED,EAAC,CAAC;AAAA,EAAC;AAAC;;;ACuBrJ,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,2BAAyB,EAAE,GAAE,KAAK,2BAAyB,EAAE,GAAE,KAAK,oCAAkC,EAAE,GAAE,KAAK,wBAAsBE,GAAE;AAAA,EAAC;AAAC;AAAC,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,4BAA0B,EAAE,GAAE,KAAK,4BAA0B,EAAE,GAAE,KAAK,4BAA0B,EAAE;AAAA,EAAC;AAAC;;;ACvBpC,SAASC,GAAEC,IAAE;AAAC,EAAAA,GAAE,OAAO,SAAS,IAAI,IAAIC,GAAE,WAAU,CAAAD,OAAGA,GAAE,OAAO,OAAO,CAAC;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,EAAAA,GAAE,OAAO,KAAK,IAAI;AAAA;AAAA,EAExa;AAAC;;;ACFoI,SAAS,EAAEE,IAAE;AAAC,IAAEA,EAAC,GAAEA,GAAE,OAAO,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA,EAI1K,GAAEA,GAAE,OAAO,KAAK,IAAI;AAAA;AAAA,EAEpB;AAAC;",
  "names": ["r", "e", "t", "i", "n", "e", "i", "t", "r", "o", "e", "e", "i", "r", "e", "o"]
}
