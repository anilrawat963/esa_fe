{
  "version": 3,
  "sources": ["../../@arcgis/core/graphic/ImageryTileGraphicOrigin.js", "../../@arcgis/core/layers/support/rasterDatasets/covJSONParser.js", "../../@arcgis/core/layers/support/rasterDatasets/InMemoryRaster.js", "../../@arcgis/core/layers/support/rasterDatasets/CovJSONRaster.js", "../../@arcgis/core/layers/support/rasterDatasets/pamParser.js", "../../@arcgis/core/layers/support/rasterDatasets/ImageAuxRaster.js", "../../@arcgis/core/layers/support/rasterDatasets/ImageServerRaster.js", "../../@arcgis/core/layers/support/rasterDatasets/MRFRaster.js", "../../@arcgis/core/layers/support/rasterDatasets/DBFParser.js", "../../@arcgis/core/layers/support/rasterDatasets/TIFFRaster.js", "../../@arcgis/core/layers/support/rasterDatasets/RasterFactory.js", "../../@arcgis/core/layers/ImageryTileLayer.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getSliceableContainerSymbol as r}from\"./getSliceableContainer.js\";import i from\"./GraphicOrigin.js\";import{isImageryTileGraphicOriginSymbol as e}from\"./isImageryTileGraphicOrigin.js\";var t;class s extends i{get[(t=e,r)](){return this.layer}constructor(r){super(),this[t]=!0,this.type=\"imagery-tile\",this.layer=r}get id(){return this.layer.id}}export{s as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import t from\"../../../geometry/Extent.js\";import n from\"../../../geometry/SpatialReference.js\";import{getLocaleLanguage as l}from\"../../../intl/locale.js\";import s from\"../PixelBlock.js\";import{getIntegerPixelType as a}from\"../rasterFormats/pixelRangeUtils.js\";function i(e){return[\"x\",\"e\",\"east\",\"long\",\"longitude\"].includes(e.toLowerCase())}function r(e){return[\"y\",\"n\",\"west\",\"lat\",\"latitude\"].includes(e.toLowerCase())}function o(e){const{axes:l}=e.domain,s=Object.keys(l),a=[],o=[];let u=-1,m=-1,c=[];for(let t=0;t<s.length;t++){const e=s[t];i(e)?u=t:r(e)&&(m=t);const n=l[e],d=[];if(\"values\"in n){n.values.forEach(e=>d.push(\"string\"==typeof e?new Date(e).getTime():e));const e=d[1]-d[0];a.push([d[0]-.5*e,d[d.length-1]+.5*e]),o.push(e)}else{const{start:e,stop:t,num:l}=n,s=(t-e)/(l-1);a.push([e-.5*s,t+.5*s]),o.push(s);for(let n=0;n<l;n++)d.push(e+s*n)}c.push({name:e,values:d,extent:[d[0],d[d.length-1]]})}u>-1&&-1===m?m=0===u?1:0:m>-1&&-1===u?u=0===m?1:0:-1===m&&-1===u&&(u=0,m=1),c=c.filter((e,t)=>!(t===u||t===m));const{referencing:d}=e.domain,f=d.find(e=>e.coordinates.includes(s[u])).system.id,p=f?.slice(f.lastIndexOf(\"/\")+1),h=null==p||\"CRS84\"===p?4326:Number(p),g=new n({wkid:h}),[b,y]=a[u],[x,j]=a[m],v=new t({xmin:b,xmax:y,ymin:x,ymax:j,spatialReference:g});return{width:Math.round(v.width/o[u]),height:Math.round(v.height/o[m]),extent:v,dimensions:c}}function u(e){const t=l();return t?e[t]??Object.values(e)[0]:Object.values(e)[0]}function m(){return Math.round(255*Math.random())}function c(t){const n={},{parameters:l}=t;if(!l)return n;for(const[s,a]of Object.entries(l)){const{type:t,description:l,unit:i,categoryEncoding:r,observedProperty:o}=a;if(\"Parameter\"===t&&(n[s]={},l&&(n[s].description=u(l)),i&&(n[s].unit=i.label?u(i.label):null,n[s].symbol=i.symbol?.value),r)){const t=Object.entries(r).map((e,t)=>({OID:t,Value:Number(e[1]),ClassName:e[0].slice(e[0].lastIndexOf(\"/\")+1),Count:1}));let l=!1;o?.categories?.length&&(o.categories.forEach(n=>{if(!n.id)return;const s=n.id.slice(n.id.lastIndexOf(\"/\")+1),a=t.find(e=>e.ClassName===s);if(!a)return;const i=n.label?u(n.label):null;if(a.Label=i,n.preferredColor){const t=e.fromHex(n.preferredColor);t&&(l=!0,a.Red=t.r,a.Green=t.g,a.Blue=t.b)}}),l&&t.forEach(e=>{null==e.Red&&(e.Red=m(),e.Green=m(),e.Blue=m())}));const a={objectIdFieldName:\"\",fields:[{name:\"OID\",type:\"esriFieldTypeOID\",alias:\"OID\",domain:null},{name:\"Value\",type:\"esriFieldTypeInteger\",alias:\"Value\",domain:null},{name:\"Count\",type:\"esriFieldTypeDouble\",alias:\"Count\",domain:null},{name:\"ClassName\",type:\"esriFieldTypeString\",alias:\"ClassName\",domain:null,length:50},{name:\"Label\",type:\"esriFieldTypeString\",alias:\"Label\",domain:null,length:50}],features:t.map(e=>({attributes:e}))};l&&a.fields.push({name:\"Red\",type:\"esriFieldTypeInteger\",alias:\"Red\",domain:null},{name:\"Green\",type:\"esriFieldTypeInteger\",alias:\"Green\",domain:null},{name:\"Blue\",type:\"esriFieldTypeInteger\",alias:\"Blue\",domain:null}),n[s].attributeTable=a}}return n}function d(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let l=0;l<e.length;l++){const s=e[l];null!=s&&(s<t&&(t=s),s>n&&(n=s))}return a(t,n)}function f(e,t,n){const l=e.map((e,n)=>({name:e,count:t[n]})).sort((e,t)=>e.name>t.name?-1:1),s=(a=1,e=>a*=e.count);var a;const i=[...l.slice(1),{name:\"\",count:1}].reverse().map(s).reverse();let r=0;for(let o=e.length-1;o>=0;o--){r+=i[l.findIndex(({name:t})=>t===e[o])]*(n%t[o]),n=Math.floor(n/t[o])}return r}function p(e){const{width:t,height:n,extent:l,dimensions:a}=o(e),{ranges:i}=e,r=Object.keys(i).sort((e,t)=>e<t?-1:1),u=[];for(let s=0;s<r.length;s++){const e=r[s];a?.length&&u.push({name:e,dimensions:a})}const m=c(e);u.forEach(e=>m[e.name]&&Object.assign(e,m[e.name]));const p=u.length?{variables:u}:void 0,h=[];for(let o=0;o<r.length;o++){const e=r[o],{values:l,dataType:u,axisNames:m,shape:c}=i[e],p=c.length>2?o*c.slice(0,-2).reduce((e,t)=>e*t):0,g=m.slice(0,-2),b=c.slice(0,-2),y=\"float\"===u?\"f32\":d(l),x=t*n,j=l.length/x;for(let i=0;i<j;i++){const e=s.createEmptyBand(y,x),r=new Uint8Array(x).fill(255);let u=!1;const m=i*x;for(let t=0;t<x;t++){const n=l[m+t];null==n?(r[t]=0,u=!0):e[t]=n}if(0===o||a?.length){const l=new s({width:t,height:n,mask:u?r:null,pixels:[e],pixelType:y});if(l.updateStatistics(),a?.length){h[f(g,b,i)+p]=l}else h.push(l)}else{const t=h[i];t.pixels.push(e),u?t.mask&&(t.mask=s.combineBandMasks([t.mask,r])):t.mask=u?r:null}}}const g=Object.values(m).find(e=>e.attributeTable)?.attributeTable;return{extent:l,pixelBlocks:h,multidimensionalInfo:p,attributeTable:g,bandNames:p?void 0:r}}export{i as isXAxis,r as isYAxis,p as parseGridCoverage};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../../../core/Error.js\";import{eachAlways as s}from\"../../../core/promiseUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../geometry/Extent.js\";import a from\"../../../geometry/SpatialReference.js\";import l from\"../DimensionalDefinition.js\";import n from\"../RasterInfo.js\";import m from\"./BaseRaster.js\";import{getSliceIndex as p}from\"./multidimensionalUtils.js\";import{clipTile as c,split as u}from\"../rasterFunctions/pixelUtils.js\";import{estimateStatisticsHistograms as h,computeStatisticsHistograms as d}from\"../rasterFunctions/stretchUtils.js\";let f=class extends m{constructor(){super(...arguments),this.datasetFormat=\"MEMORY\",this.source=null}get url(){return\"\"}fetchRawTile(t,e,s,i={}){if(!this._pixelBlockTiles){const{rasterInfo:r}=this,[o,a]=r.storageInfo.tileInfo.size,{sliceId:l}=i,{pixelBlocks:n}=this.source,m={pixelBlock:null==l?n[0]:n[l],useBilinear:\"thematic\"!==r.dataType,tileSize:{width:o,height:a},level:t,row:e,col:s},p=this.rasterJobHandler?this.rasterJobHandler.clipTile(m,i):c(m);return Promise.resolve(p)}const r=this._pixelBlockTiles.get(`${t}/${e}/${s}`);return Promise.resolve(r)}async _open(t){const e=this.source,{pixelBlocks:s,attributeTable:i,statistics:r,histograms:l,name:m,nativeExtent:p,transform:c,colormap:u}=e,h=s[0],{width:d,height:f,pixelType:g}=h,x=e.extent??new o({xmin:-.5,ymin:.5,xmax:d-.5,ymax:f-.5,spatialReference:new a({wkid:3857})}),y=e.isPseudoSpatialReference??!e.extent,b={x:x.width/d,y:x.height/f},I={...e.keyProperties};e.dataType&&(I.DataType=e.dataType),e.bandInfos&&(I.BandProperties=e.bandInfos.map(t=>t.toJSON())),i&&(I.DataType=\"Thematic\");const v=new n({width:d,height:f,pixelType:g,extent:x,nativeExtent:p,attributeTable:i,colormap:u,transform:c,pixelSize:b,spatialReference:x.spatialReference,bandCount:h.pixels.length,keyProperties:I,multidimensionalInfo:e.multidimensionalInfo,statistics:r,isPseudoSpatialReference:y,histograms:l});this.ioConfig.skipMapInfo&&this.updateImageSpaceRasterInfo(v),this.createRemoteDatasetStorageInfo(v,512,512),this._set(\"rasterInfo\",v),this.updateTileInfo(),v.multidimensionalInfo?await this._buildMDimStats(e.pixelBlocks,v.multidimensionalInfo):await this._buildInMemoryRaster(h,{width:512,height:512},t),v.multidimensionalInfo||(this.source=null),this.datasetName=m}async _buildInMemoryRaster(t,i,r){const{rasterInfo:o}=this,a=o.storageInfo.maximumPyramidLevel??0,l=\"thematic\"!==o.dataType,n=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:t,tileSize:i,maximumPyramidLevel:a,useBilinear:l},r):Promise.resolve(u(t,i,a,l)),m=null!=o.statistics,p=null!=o.histograms,c=this.ioConfig.skipStatistics||m?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:t},r):Promise.resolve(h(t)),d=await s([n,c]);if(!d[0].value&&d[1].value)throw new e(\"inmemory-raster:open\",\"failed to build in memory raster\");this._pixelBlockTiles=d[0].value,m||(o.statistics=d[1].value?.statistics),p||(o.histograms=d[1].value?.histograms)}async _buildMDimStats(t,e,s){for(let i=0;i<e.variables.length;i++){const r=e.variables[i];if(r.statistics)continue;const o=r.dimensions.map(t=>new l({variableName:r.name,dimensionName:t.name,values:[t.values?.[0]??t.extent?.[0]],isSlice:!0})),a=p(o,e),n=null==a?null:t[a];if(null==n)continue;const m=this.rasterJobHandler?await this.rasterJobHandler.computeStatisticsHistograms({pixelBlock:n},s):d(n);r.statistics=m.statistics,r.histograms||(r.histograms=m.histograms)}}};t([i({type:String,json:{write:!0}})],f.prototype,\"datasetFormat\",void 0),t([i()],f.prototype,\"source\",void 0),t([i()],f.prototype,\"url\",null),f=t([r(\"esri.layers.support.rasterDatasets.InMemoryRaster\")],f);const g=f;export{g as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"./BaseRaster.js\";import{isXAxis as o,isYAxis as i,parseGridCoverage as n}from\"./covJSONParser.js\";import c from\"./InMemoryRaster.js\";import{computeStatisticsHistograms as l}from\"../rasterFunctions/stretchUtils.js\";import p from\"../../../rest/support/FeatureSet.js\";let m=class extends a{constructor(){super(...arguments),this.datasetFormat=\"CovJSON\"}fetchRawTile(e,t,r,s={}){return this._inMemoryRaster.fetchRawTile(e,t,r,s)}async _open(e){const{extent:t,pixelBlocks:r,multidimensionalInfo:s,attributeTable:a,bandNames:o}=await this._fetchData(e),{statistics:i,histograms:n}=l(r[0]),m=o?.map(e=>({BandName:e})),h={DataType:a?\"Thematic\":s?\"Scientific\":\"Generic\",BandProperties:m},d=new c({source:{extent:t,pixelBlocks:r,attributeTable:a?p.fromJSON(a):null,multidimensionalInfo:s,statistics:i,histograms:n,keyProperties:h,isPseudoSpatialReference:!1}});await d.open(),this._inMemoryRaster=d;const u=this.source?\"\":this.url.slice(this.url.lastIndexOf(\"/\")+1);this._set(\"datasetName\",u.slice(0,u.indexOf(\".\"))),this._set(\"rasterInfo\",d.rasterInfo)}async _fetchData(e){const r=this.source??(await this.request(this.url,{signal:e?.signal})).data,s=\"imagery-tile-layer:open-coverage-json\";if(\"coverage\"!==r.type?.toLowerCase()||\"grid\"!==r.domain?.domainType?.toLowerCase())throw new t(s,\"Only coverage with Grid domain type is supported\");if(!r.ranges)throw new t(s,\"Missing ranges in the grid coverage data\");if(!r.domain.referencing?.length)throw new t(s,\"Missing domain referencing in the grid coverage data\");const a=Object.values(r.ranges);for(let n=0;n<a.length;n++){const{axisNames:e,shape:r,type:c,values:l}=a[n];if(!(\"ndarray\"===c.toLowerCase()&&l?.length&&e?.length&&r?.length))throw new t(s,\"Only ranges with valid NdArray, axisNames, shape, and inline values are supported\");if(!(o(e[e.length-1])&&i(e[e.length-2])))throw new t(s,\"Only row-major ordered pixel values are supported. X axis must be the last axis.\")}return n(r)}};e([r({type:String,json:{write:!0}})],m.prototype,\"datasetFormat\",void 0),e([r({constructOnly:!0})],m.prototype,\"source\",void 0),m=e([s(\"esri.layers.support.rasterDatasets.CovJSONRaster\")],m);const h=m;export{h as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/arrayUtils.js\";import t from\"../../../geometry/SpatialReference.js\";import{isWKT2 as n}from\"../../../geometry/support/spatialReferenceUtils.js\";import{isSameTagIgnoreNS as r,getElementValue as s,getElements as a,getElement as i,getElementNumericValue as l,getElementNumericValues as o}from\"./xmlUtilities.js\";import f from\"../rasterTransforms/PolynomialTransform.js\";function u(e,t){if(!e||!t)return null;const n=[];for(let r=0;r<e.length;r++)n.push(e[r]),n.push(t[r]);return n}function c(e){const t=i(e,\"GeodataXform\"),n=d(l(t,\"SpatialReference/WKID\")||s(t,\"SpatialReference/WKT\"));if(\"typens:PolynomialXform\"!==t.getAttribute(\"xsi:type\"))return{spatialReference:n,transform:null};const r=l(t,\"PolynomialOrder\")??1,a=o(t,\"CoeffX/Double\"),c=o(t,\"CoeffY/Double\"),m=o(t,\"InverseCoeffX/Double\"),p=o(t,\"InverseCoeffY/Double\"),S=u(a,c),C=u(m,p);return{spatialReference:n,transform:S&&C&&S.length&&C.length?new f({spatialReference:n,polynomialOrder:r,forwardCoefficients:S,inverseCoefficients:C}):null}}function m(e){const t=l(e,\"NoDataValue\"),n=i(e,\"Histograms/HistItem\"),r=l(n,\"HistMin\"),o=l(n,\"HistMax\"),f=l(n,\"BucketCount\"),u=s(n,\"HistCounts\")?.split(\"|\").map(e=>Number(e));let c,m,d,p;a(e,\"Metadata/MDI\").forEach(e=>{const t=Number(e.textContent??e.nodeValue);switch(e.getAttribute(\"key\").toUpperCase()){case\"STATISTICS_MINIMUM\":c=t;break;case\"STATISTICS_MAXIMUM\":m=t;break;case\"STATISTICS_MEAN\":d=t;break;case\"STATISTICS_STDDEV\":p=t}});const S=l(e,\"Metadata/SourceBandIndex\");return{noDataValue:t,histogram:u?.length&&null!=r&&null!=o?{min:r,max:o,size:f||u.length,counts:u}:null,sourceBandIndex:S,statistics:null!=c&&null!=m?{min:c,max:m,avg:d,stddev:p}:null}}function d(e){if(!e)return null;let r=Number(e);if(!isNaN(r)&&0!==r)return new t({wkid:r});if(e=String(e).trim(),n(e))return new t({wkt2:e});const s=e.toUpperCase();if(s.startsWith(\"COMPD_CS\")){if(!s.includes(\"VERTCS\")||!s.includes(\"GEOGCS\")&&!s.startsWith(\"PROJCS\"))return null;const n=s.indexOf(\"VERTCS\"),a=s.indexOf(\"PROJCS\"),i=a>-1?a:s.indexOf(\"GEOGCS\");if(-1===i)return null;const l=e.slice(i,e.lastIndexOf(\"]\",n)+1).trim(),o=e.slice(n,e.lastIndexOf(\"]\")).trim();r=p(l);const f=new t(r?{wkid:r}:{wkt:l}),u=p(o);return u&&(f.vcsWkid=u),f}return s.startsWith(\"GEOGCS\")||s.startsWith(\"PROJCS\")?(r=p(e),new t(0!==r?{wkid:r}:{wkt:e})):null}function p(e){const t=e.replaceAll(\"]\",\"[\").replaceAll('\"',\"\").split(\"[\").map(e=>e.trim()).filter(e=>\"\"!==e),n=t[t.length-1].split(\",\"),r=n[0]?.toLowerCase();if((\"epsg\"===r||\"esri\"===r)&&e.endsWith('\"]]')){const e=Number(n[1]);if(!isNaN(e)&&0!==e)return e}return 0}function S(t){if(\"pamdataset\"!==t?.documentElement.tagName?.toLowerCase())return{};const n={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};t.documentElement.childNodes.forEach(e=>{if(1===e.nodeType)if(r(e,\"SRS\")){if(!n.spatialReference){const t=s(e);n.spatialReference=d(t)}}else if(r(e,\"Metadata\"))if(\"xml:ESRI\"===e.getAttribute(\"domain\")){const{spatialReference:t,transform:r}=c(e);n.transform=r,n.spatialReference||(n.spatialReference=t)}else{a(e,\"MDI\").forEach(e=>n.metadata[e.getAttribute(\"key\")]=s(e))}else if(r(e,\"PAMRasterBand\")){const t=m(e);null!=t.sourceBandIndex&&null==n.rasterBands[t.sourceBandIndex]?n.rasterBands[t.sourceBandIndex]=t:n.rasterBands.push(t)}});const i=n.rasterBands;if(i.length){const t=!!i[0].statistics;n.statistics=t?i.map(e=>e.statistics).filter(e):null;const r=!!i[0].histogram;n.histograms=r?i.map(e=>e.histogram).filter(e):null}return n}export{S as parsePAMInfo,d as parseSpatialReference};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import s from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{eachAlways as e,createAbortError as r}from\"../../../core/promiseUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../geometry/Extent.js\";import n from\"../../../geometry/SpatialReference.js\";import l from\"./BaseRaster.js\";import m from\"./InMemoryRaster.js\";import{parsePAMInfo as p}from\"./pamParser.js\";import{getFormat as c}from\"../rasterFormats/RasterCodec.js\";import{estimateStatisticsFromHistograms as f}from\"../rasterFunctions/stretchUtils.js\";import u from\"../rasterTransforms/PolynomialTransform.js\";let h=class extends l{fetchRawTile(t,s,e,r={}){return this._inMemoryRaster.fetchRawTile(t,s,e,r)}async _open(t){const s=await this._fetchData(t);let{spatialReference:e,statistics:r,histograms:o,transform:a}=await this._fetchAuxiliaryData(t);const l=!e;l&&(e=new n({wkid:3857})),o?.length&&null==r&&(r=f(o));const{width:p,height:c}=s;let u=new i({xmin:-.5,ymin:.5-c,xmax:p-.5,ymax:.5,spatialReference:e});const h=a?a.forwardTransform(u):u;let d=!0;if(a){const t=a.forwardCoefficients;d=t&&0===t[1]&&0===t[2],d&&(a=null,u=h)}const w=new m({source:{extent:h,nativeExtent:u,transform:a,pixelBlocks:[s],statistics:r,histograms:o,keyProperties:{DateType:\"Processed\"},isPseudoSpatialReference:l},ioConfig:{sampling:\"closest\",skipStatistics:!0}});this.ioConfig.skipMapInfo&&(w.ioConfig.skipMapInfo=!0),await w.open(),w.source=null,this._set(\"rasterInfo\",w.rasterInfo),this._inMemoryRaster=w}async _fetchData(t){const{data:e}=await this.request(this.url,{responseType:\"array-buffer\",signal:t?.signal}),r=c(e).toUpperCase();if(\"JPG\"!==r&&\"PNG\"!==r&&\"GIF\"!==r&&\"BMP\"!==r)throw new s(\"image-aux-raster:open\",\"the data is not a supported format\");this._set(\"datasetFormat\",r);const o=r.toLowerCase(),a=\"gif\"===o||\"bmp\"===o||!has(\"ios\"),i=await this.decodePixelBlock(e,{format:o,useCanvas:a,hasNoZlibMask:!0});if(null==i)throw new s(\"image-aux-raster:open\",\"the data cannot be decoded\");return i}async _fetchAuxiliaryData(t){const s=t?.signal,{skipExtensions:o=[],skipMapInfo:a}=this.ioConfig,i=a||o.includes(\"aux.xml\")?null:this.request(this.url+\".aux.xml\",{responseType:\"xml\",signal:s}),n=this.datasetFormat,l=\"JPG\"===n?\"jgw\":\"PNG\"===n?\"pgw\":\"BMP\"===n?\"bpw\":null,m=l&&o.includes(l)?null:this.request(this.url.slice(0,this.url.lastIndexOf(\".\"))+\".\"+l,{responseType:\"text\",signal:s}),c=await e([i,m]);if(s?.aborted)throw r();const f=p(c[0].value?.data);if(!f.transform){const t=c[1].value?c[1].value.data.split(\"\\n\").slice(0,6).map(t=>Number(t)):null;f.transform=6===t?.length?new u({forwardCoefficients:[t[4],t[5],t[0],-t[1],t[2],-t[3]]}):null}return f}};t([o({type:String,json:{write:!0}})],h.prototype,\"datasetFormat\",void 0),h=t([a(\"esri.layers.support.rasterDatasets.ImageAuxRaster\")],h);const d=h;export{d as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Error.js\";import{assertIsSome as i}from\"../../../core/maybe.js\";import{urlToObject as s}from\"../../../core/urlUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import l from\"../../../geometry/Extent.js\";import n from\"../../../geometry/Point.js\";import o from\"../../../geometry/SpatialReference.js\";import c from\"../RasterInfo.js\";import m from\"../RasterStorageInfo.js\";import u from\"../TileInfo.js\";import{TilemapCache as h}from\"../TilemapCache.js\";import f from\"./BaseRaster.js\";import{setValidBoundary as p}from\"../rasterFunctions/pixelUtils.js\";import d from\"../rasterTransforms/GCSShiftTransform.js\";import{patchServiceInfo as y,fetchServiceRasterInfo as x}from\"../../../rest/imageService/fetchRasterInfo.js\";let g=class extends f{constructor(){super(...arguments),this._levelOffset=0,this._tilemapCache=null,this._slices=null,this.datasetFormat=\"RasterTileServer\",this.tileType=null}async fetchRawTile(e,t,i,s={}){const{storageInfo:r,extent:a}=this.rasterInfo,{transposeInfo:l}=r,n=null!=l&&!!s.transposedVariableName;if(this._slices&&!n&&null==s.sliceId)return null;const o=n?0:r.maximumPyramidLevel-e+this._levelOffset,c=`${this.url}/tile/${o}/${t}/${i}`,m=this._slices?n?{variable:s.transposedVariableName}:{sliceId:s.sliceId||0}:null;let u,h;if(r.isBsqTile){const e=(s.bandIds?.length?s.bandIds:[0,1,2]).map(e=>this.request(c,{query:{...m,bandId:e},responseType:\"array-buffer\",signal:s.signal})),t=await Promise.all(e),i=t.map(e=>e.data.byteLength).reduce((e,t)=>e+t),r=new Uint8Array(i);h=[];let a=0;for(const{data:s}of t)h.push(a),r.set(new Uint8Array(s),a),a+=s.byteLength;u=r.buffer}else{u=(await this.request(c,{query:m,responseType:\"array-buffer\",signal:s.signal})).data}if(!u)return null;const f=n?l.tileSize:r.tileInfo.size,d=await this.decodePixelBlock(u,{width:f[0],height:f[1],planes:h?.length,offsets:h,pixelType:null,isPoint:\"Elevation\"===this.tileType,returnInterleaved:n,noDataValue:this.rasterInfo.noDataValue});if(null==d)return null;const y=r.blockBoundary[e];if(\"jpg\"!==r.compression||i>y.minCol&&i<y.maxCol&&t>y.minRow&&t<y.maxRow)return d;const{origin:x,blockWidth:g,blockHeight:v}=r,{x:S,y:I}=this.getPyramidPixelSize(e),w=Math.round((a.xmin-x.x)/S)%g,b=Math.round((a.xmax-x.x)/S)%g||g,T=Math.round((x.y-a.ymax)/I)%v,M=Math.round((x.y-a.ymin)/I)%v||v,j=i===y.minCol?w:0,_=t===y.minRow?T:0,O=i===y.maxCol?b:g,R=t===y.maxRow?M:v;return p(d,{x:j,y:_},{width:O-j,height:R-_}),d}getSliceIndex(e){if(!this._slices||null==e||0===e.length)return null;const t=e;for(let i=0;i<this._slices.length;i++){const e=this._slices[i].multidimensionalDefinition;if(e.length===t.length&&!e.some(e=>{const i=t.find(t=>e.variableName===t.variableName&&t.dimensionName===e.dimensionName);if(!i)return!0;return(Array.isArray(e.values[0])?`${e.values[0][0]}-${e.values[0][1]}`:e.values[0])!==(Array.isArray(i.values[0])?`${i.values[0][0]}-${i.values[0][1]}`:i.values[0])}))return i}return null}async fetchVariableStatisticsHistograms(e,t){const i=this.request(this.url+\"/statistics\",{query:{variable:e,f:\"json\"},signal:t}).then(e=>e.data?.statistics),s=this.request(this.url+\"/histograms\",{query:{variable:e,f:\"json\"},signal:t}).then(e=>e.data?.histograms),r=await Promise.all([i,s]);return r[0]&&r[0].forEach(e=>{e.avg=e.mean,e.stddev=e.standardDeviation}),r[1]?.[0]?.counts?.length||(r[1]=null),{statistics:r[0]||null,histograms:r[1]||null}}async computeBestPyramidLevelForLocation(e,t={}){if(!this._tilemapCache)return 0;let i=this.identifyPixelLocation(e,0,t.datumTransformation);if(null===i)return null;let s=0;const{maximumPyramidLevel:r}=this.rasterInfo.storageInfo;let a=r-s+this._levelOffset;const l=i.srcLocation;for(;a>=0;){try{if(\"available\"===await this._tilemapCache.fetchAvailability(a,i.row,i.col,t))break}catch{}if(a--,s++,i=this.identifyPixelLocation(l,s,t.datumTransformation),null===i)return null}return-1===a||null==i?null:s}async _open(e){const r=e?.signal,a=this.sourceJSON?{data:this.sourceJSON}:await this.request(this.url,{query:{f:\"json\"},signal:r});a.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));const l=a.data;if(this.sourceJSON=l,!l)throw new t(\"imageserverraster:open\",\"cannot initialize tiled image service, missing service info\");if(!l.tileInfo)throw new t(\"imageserverraster:open\",\"use ImageryLayer to open non-tiled image services\");this._fixScaleInServiceInfo();const n=[\"jpg\",\"jpeg\",\"png\",\"png8\",\"png24\",\"png32\",\"mixed\"];this.tileType=l.cacheType,null==this.tileType&&(n.includes(l.tileInfo.format.toLowerCase())?this.tileType=\"Map\":\"lerc\"===l.tileInfo.format.toLowerCase()?this.tileType=\"Elevation\":this.tileType=\"Raster\"),this.datasetName=l.name?.slice(l.name.indexOf(\"/\")+1)??\"\";const o=await this._fetchRasterInfo({signal:r});if(null==o)throw new t(\"image-server-raster:open\",\"cannot initialize image service\");y(o,l);const c=\"Map\"===this.tileType?v(l.tileInfo,l):u.fromJSON(l.tileInfo);i(c);const[f,p]=this._computeMinMaxLOD(o,c),{extent:d,pixelSize:x}=o,g=.5/o.width*x.x,I=Math.max(x.x,x.y),{lods:w}=c;(\"Map\"!==this.tileType&&0!==l.maxScale||Math.abs(x.x-x.y)>g||!w.some(e=>Math.abs(e.resolution-I)<g))&&(x.x=x.y=f.resolution,o.width=Math.ceil((d.xmax-d.xmin)/x.x-.1),o.height=Math.ceil((d.ymax-d.ymin)/x.y-.1));const b=f.level-p.level,[T,M]=c.size,j=[],_=[];w.forEach((e,t)=>{e.level>=p.level&&e.level<=f.level&&j.push({x:e.resolution,y:e.resolution}),t<w.length-1&&_.push(Math.round(10*e.resolution/w[t+1].resolution)/10)}),j.sort((e,t)=>e.x-t.x);const O=this.computeBlockBoundary(d,T,M,c.origin,j,b),R=j.length>1?j.slice(1):null;let L;l.transposeInfo&&(L={tileSize:[l.transposeInfo.rows,l.transposeInfo.cols],packetSize:o.keyProperties?._yxs.PacketSize??0});const z=_.length<=1||_.length>=3&&_.slice(0,-1).every(e=>e===_[0])?_[0]??2:Math.round(10/(p.resolution/f.resolution)**(-1/b))/10;if(o.storageInfo=new m({blockWidth:c.size[0],blockHeight:c.size[1],pyramidBlockWidth:c.size[0],pyramidBlockHeight:c.size[1],pyramidResolutions:R,pyramidScalingFactor:z,compression:c.format,origin:c.origin,firstPyramidLevel:1,maximumPyramidLevel:b,tileInfo:c,isBsqTile:!!l.bsq,transposeInfo:L,blockBoundary:O}),S(o),this._set(\"rasterInfo\",o),l.capabilities.toLowerCase().includes(\"tilemap\")){const e={tileInfo:o.storageInfo.tileInfo,parsedUrl:s(this.url),url:this.url,tileServers:[]};this._tilemapCache=new h({layer:e})}}async _fetchRasterInfo(e){const t=this.sourceJSON;if(\"Map\"===this.tileType){const e=t.fullExtent||t.extent,i=Math.ceil((e.xmax-e.xmin)/t.pixelSizeX-.1),s=Math.ceil((e.ymax-e.ymin)/t.pixelSizeY-.1),r=o.fromJSON(t.spatialReference||e.spatialReference),a=new n({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:r});return new c({width:i,height:s,bandCount:3,extent:l.fromJSON(e),spatialReference:r,pixelSize:a,pixelType:\"u8\",statistics:null,keyProperties:{DataType:\"processed\"}})}const{signal:i}=e,s=x(this.url,this.sourceJSON,{signal:i,query:this.ioConfig.customFetchParameters}),r=t.hasMultidimensions?this.request(`${this.url}/slices`,{query:{f:\"json\"},signal:i}).then(e=>e.data?.slices).catch(()=>null):null,a=await Promise.all([s,r]);return this._slices=a[1],a[0]}_fixScaleInServiceInfo(){const{sourceJSON:e}=this;e.minScale&&e.minScale<0&&(e.minScale=0),e.maxScale&&e.maxScale<0&&(e.maxScale=0)}_computeMinMaxLOD(e,t){const{pixelSize:i}=e,s=.5/e.width*i.x,{lods:r}=t,a=t.lodAt(Math.max.apply(null,r.map(e=>e.level))),l=t.lodAt(Math.min.apply(null,r.map(e=>e.level))),{tileType:n}=this;if(\"Map\"===n)return this._levelOffset=r[0].level,[a,l];if(\"Raster\"===n){return[r.find(e=>e.resolution===i.x)??a,l]}const{minScale:o,maxScale:c}=this.sourceJSON;let m=a;c>0&&(m=r.find(e=>Math.abs(e.scale-c)<s),m||(m=r.filter(e=>e.scale>c).sort((e,t)=>e.scale>t.scale?1:-1)[0]??a));let u=l;return o>0&&(u=r.find(e=>Math.abs(e.scale-o)<s)??l,this._levelOffset=u.level-l.level),[m,u]}};function v(e,t){if(!e)return null;const{minScale:i,maxScale:s,minLOD:r,maxLOD:a}=t;if(null!=r&&null!=a)return u.fromJSON({...e,lods:e.lods.filter(({level:e})=>null!=e&&e>=r&&e<=a)});if(0!==i&&0!==s){const t=e=>Math.round(1e4*e)/1e4,r=i?t(i):1/0,a=s?t(s):-1/0;return u.fromJSON({...e,lods:e.lods.filter(e=>{const i=t(e.scale);return i<=r&&i>=a})})}return u.fromJSON(e)}function S(e){const{extent:t,spatialReference:i}=e;t.xmin>-1&&t.xmax>181&&i?.wkid&&i.isGeographic&&(e.nativeExtent=e.extent,e.transform=new d,e.extent=e.transform.forwardTransform(t))}e([r({type:String,json:{write:!0}})],g.prototype,\"datasetFormat\",void 0),e([r()],g.prototype,\"tileType\",void 0),g=e([a(\"esri.layers.support.rasterDatasets.ImageServerRaster\")],g);const I=g;export{I as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Point.js\";import a from\"../../../geometry/SpatialReference.js\";import n from\"../PixelBlock.js\";import l from\"../RasterInfo.js\";import f from\"../RasterStorageInfo.js\";import c from\"./BaseRaster.js\";import{parseSpatialReference as m,parsePAMInfo as p}from\"./pamParser.js\";import{getElement as h,getElementValue as u}from\"./xmlUtilities.js\";import{isPlatformLittleEndian as g}from\"../rasterFormats/utils.js\";import{estimateStatisticsFromHistograms as d}from\"../rasterFunctions/stretchUtils.js\";const y=new Map;y.set(\"Int8\",\"s8\"),y.set(\"UInt8\",\"u8\"),y.set(\"Int16\",\"s16\"),y.set(\"UInt16\",\"u16\"),y.set(\"Int32\",\"s32\"),y.set(\"UInt32\",\"u32\"),y.set(\"Float32\",\"f32\"),y.set(\"Float64\",\"f32\"),y.set(\"Double64\",\"f32\");const x=new Map;x.set(\"none\",{blobExtension:\".til\",isOneSegment:!0,decoderFormat:\"bip\"}),x.set(\"lerc\",{blobExtension:\".lrc\",isOneSegment:!1,decoderFormat:\"lerc\"}),x.set(\"deflate\",{blobExtension:\".pzp\",isOneSegment:!0,decoderFormat:\"deflate\"}),x.set(\"jpeg\",{blobExtension:\".pjg\",isOneSegment:!0,decoderFormat:\"jpg\"}),x.set(\"qb3\",{blobExtension:\".pq3\",isOneSegment:!0,decoderFormat:\"qb3\"});let b=class extends c{constructor(){super(...arguments),this._files=null,this._storageIndex=null,this.datasetFormat=\"MRF\"}async fetchRawTile(t,e,r,s={}){const{blockWidth:o,blockHeight:i,blockBoundary:a}=this.rasterInfo.storageInfo,l=a[t];if(!l||l.maxRow<e||l.maxCol<r||l.minRow>e||l.minCol>r)return null;const{bandCount:f,pixelType:c}=this.rasterInfo,{ranges:m,actualTileWidth:p,actualTileHeight:h}=this._getTileLocation(t,e,r);if(!m||0===m.length)return null;if(0===m[0].from&&0===m[0].to){const t=new Uint8Array(o*i);return new n({width:o,height:i,pixels:void 0,mask:t,validPixelCount:0})}const{bandIds:u}=this.ioConfig,g=this._getBandSegmentCount(),d=[];let y=0;for(y=0;y<g;y++)u&&!u.includes(y)||d.push(this.request(this._files.data,{range:{from:m[y].from,to:m[y].to},responseType:\"array-buffer\",signal:s.signal}));const b=await Promise.all(d),w=b.map(t=>t.data.byteLength).reduce((t,e)=>t+e),I=new Uint8Array(w),F=[];let R=0;for(y=0;y<g;y++)F.push(R),I.set(new Uint8Array(b[y].data),R),R+=b[y].data.byteLength;const A=x.get(this.rasterInfo.storageInfo.compression).decoderFormat,S=await this.decodePixelBlock(I.buffer,{width:o,height:i,format:A,planes:u?.length||f,offsets:F,pixelType:c}).catch(()=>null);if(null==S)return null;let{noDataValue:_}=this.rasterInfo;if(null!=_&&\"lerc\"!==A&&!S.mask&&(_=_[0],null!=_)){const t=S.width*S.height,e=new Uint8Array(t);if(Math.abs(_)>1e24)for(y=0;y<t;y++)Math.abs((S.pixels[0][y]-_)/_)>1e-6&&(e[y]=1);else for(y=0;y<t;y++)S.pixels[0][y]!==_&&(e[y]=1);S.mask=e}let M=0,k=0;if(p!==o||h!==i){let t=S.mask;if(t)for(y=0;y<i;y++)if(k=y*o,y<h)for(M=p;M<o;M++)t[k+M]=0;else for(M=0;M<o;M++)t[k+M]=0;else for(t=new Uint8Array(o*i),S.mask=t,y=0;y<h;y++)for(k=y*o,M=0;M<p;M++)t[k+M]=1}return S}async _open(t){this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1);const e=t?t.signal:null,r=await this.request(this.url,{responseType:\"xml\",signal:e}),{rasterInfo:s,files:o}=this._parseHeader(r.data),{skipMapInfo:i,skipExtensions:a=[]}=this.ioConfig;if(!a.includes(\"aux.xml\")&&!i){const e=await this._fetchAuxiliaryData(t);null!=e&&(s.statistics=e.statistics??s.statistics,s.histograms=e.histograms,e.histograms&&null==s.statistics&&(s.statistics=d(e.histograms)))}i&&this.updateImageSpaceRasterInfo(s),this._set(\"rasterInfo\",s),this._files=o;const n=await this.request(o.index,{responseType:\"array-buffer\",signal:e});this._storageIndex=w(n.data);const{blockWidth:l,blockHeight:f}=this.rasterInfo.storageInfo,c=this.rasterInfo.storageInfo.pyramidScalingFactor,{width:m,height:p}=this.rasterInfo,h=[],u=this._getBandSegmentCount();let g=0,y=-1;for(;g<this._storageIndex.length;){y++;const t=Math.ceil(m/l/c**y)-1,e=Math.ceil(p/f/c**y)-1;g+=(t+1)*(e+1)*u*4,h.push({maxRow:e,maxCol:t,minCol:0,minRow:0})}this.rasterInfo.storageInfo.blockBoundary=h,y>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=y),this.updateTileInfo()}_getBandSegmentCount(){return x.get(this.rasterInfo.storageInfo.compression).isOneSegment?1:this.rasterInfo.bandCount}_getTileLocation(t,e,r){const{blockWidth:s,blockHeight:o,pyramidScalingFactor:i}=this.rasterInfo.storageInfo,{width:a,height:n}=this.rasterInfo,l=this._getBandSegmentCount();let f,c,m,p=0,h=0;for(m=0;m<t;m++)h=i**m,f=Math.ceil(a/s/h),c=Math.ceil(n/o/h),p+=f*c;h=i**t,f=Math.ceil(a/s/h),c=Math.ceil(n/o/h),p+=e*f+r,p*=4*l;const u=this._storageIndex.subarray(p,p+4*l);let g=0,d=0;const y=[];for(let x=0;x<l;x++)g=u[4*x]*2**32+u[4*x+1],d=g+u[4*x+2]*2**32+u[4*x+3]-1,y.push({from:g,to:d});return{ranges:y,actualTileWidth:r<f-1?s:Math.ceil(a/h)-s*(f-1),actualTileHeight:e<c-1?o:Math.ceil(n/h)-o*(c-1)}}_parseHeader(t){const r=h(t,\"MRF_META/Raster\");if(!r)throw new e(\"mrf:open\",\"not a valid MRF format\");const s=h(r,\"Size\"),n=parseInt(s.getAttribute(\"x\"),10),c=parseInt(s.getAttribute(\"y\"),10),p=parseInt(s.getAttribute(\"c\"),10),g=(u(r,\"Compression\")||\"none\").toLowerCase();if(!x.has(g))throw new e(\"mrf:open\",\"currently does not support compression \"+g);const d=u(r,\"DataType\")||\"UInt8\",b=y.get(d);if(null==b)throw new e(\"mrf:open\",\"currently does not support pixel type \"+d);const w=h(r,\"PageSize\"),I=parseInt(w.getAttribute(\"x\"),10),F=parseInt(w.getAttribute(\"y\"),10),R=h(r,\"DataValues\");let A,S;R&&(S=R.getAttribute(\"NoData\"),null!=S&&(A=S.trim().split(\" \").map(t=>parseFloat(t))));if(h(t,\"MRF_META/CachedSource\"))throw new e(\"mrf:open\",\"currently does not support MRF referencing other data files\");const _=h(t,\"MRF_META/GeoTags\"),M=h(_,\"BoundingBox\");let k,j=!1;if(null!=M){const t=parseFloat(M.getAttribute(\"minx\")),e=parseFloat(M.getAttribute(\"miny\")),r=parseFloat(M.getAttribute(\"maxx\")),s=parseFloat(M.getAttribute(\"maxy\")),i=u(_,\"Projection\")||\"\";let n=a.WGS84;if(\"LOCAL_CS[]\"!==i)if(i.toLowerCase().startsWith(\"epsg:\")){const t=Number(i.slice(5));isNaN(t)||0===t||(n=new a({wkid:t}))}else n=m(i)??a.WGS84;else j=!0,n=new a({wkid:3857});k=new o(t,e,r,s),k.spatialReference=n}else j=!0,k=new o({xmin:-.5,ymin:.5-c,xmax:n-.5,ymax:.5,spatialReference:new a({wkid:3857})});const C=h(t,\"MRF_META/Rsets\"),T=parseInt(C?.getAttribute(\"scale\")||\"2\",10),L=k.spatialReference,U=new f({origin:new i({x:k.xmin,y:k.ymax,spatialReference:L}),blockWidth:I,blockHeight:F,pyramidBlockWidth:I,pyramidBlockHeight:F,compression:g,pyramidScalingFactor:T}),B=new i({x:k.width/n,y:k.height/c,spatialReference:L}),E=new l({width:n,height:c,extent:k,isPseudoSpatialReference:j,spatialReference:L,bandCount:p,pixelType:b,pixelSize:B,noDataValue:A,storageInfo:U}),P=u(t,\"datafile\"),W=u(t,\"IndexFile\");return{rasterInfo:E,files:{mrf:this.url,index:W||this.url.replace(\".mrf\",\".idx\"),data:P||this.url.replace(\".mrf\",x.get(g).blobExtension)}}}async _fetchAuxiliaryData(t){try{const{data:e}=await this.request(this.url+\".aux.xml\",{responseType:\"xml\",signal:t?.signal});return p(e)}catch{return null}}};function w(t){if(t.byteLength%16>0)throw new Error(\"invalid array buffer must be multiples of 16\");let e,r,s,o,i,a;if(g){for(r=new Uint8Array(t),o=new ArrayBuffer(t.byteLength),s=new Uint8Array(o),i=0;i<t.byteLength/4;i++)for(a=0;a<4;a++)s[4*i+a]=r[4*i+3-a];e=new Uint32Array(o)}else e=new Uint32Array(t);return e}t([r()],b.prototype,\"_files\",void 0),t([r()],b.prototype,\"_storageIndex\",void 0),t([r({type:String,json:{write:!0}})],b.prototype,\"datasetFormat\",void 0),b=t([s(\"esri.layers.support.rasterDatasets.MRFRaster\")],b);const I=b;export{I as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{bytesToUTF8 as e}from\"./byteStreamUtils.js\";function t(e){const t=e.fields,r=e.records,n=t.some(e=>\"oid\"===e.name.toLowerCase())?\"OBJECTID\":\"OID\",i=[{name:n,type:\"esriFieldTypeOID\",alias:\"OID\"}].concat(t.map(e=>({name:e.name,type:\"esriFieldType\"+e.typeName,alias:e.name}))),a=i.map(e=>e.name),s=[];let o=0,l=0;return r.forEach(e=>{const t={};for(t[n]=o++,l=1;l<a.length;l++)t[a[l]]=e[l-1];s.push({attributes:t})}),{displayFieldName:\"\",fields:i,features:s}}class r{static get supportedVersions(){return[5]}static parse(r){const n=new DataView(r),i=3&n.getUint8(0);if(3!==i)return{header:{version:i},recordSet:null};const a=n.getUint32(4,!0),s=n.getUint16(8,!0),o=n.getUint16(10,!0),l={version:i,recordCount:a,headerByteCount:s,recordByteCount:o};let p=32;const d=[],g=[];let h;if(3===i){for(;13!==n.getUint8(p);)h=String.fromCharCode(n.getUint8(p+11)).trim(),d.push({name:e(new Uint8Array(r,p,11)),type:h,typeName:[\"String\",\"Date\",\"Double\",\"Boolean\",\"String\",\"Integer\"][[\"C\",\"D\",\"F\",\"L\",\"M\",\"N\"].indexOf(h)],length:n.getUint8(p+16)}),p+=32;if(p+=1,d.length>0)for(;g.length<a&&r.byteLength-p>o;){const t=[];32===n.getUint8(p)?(p+=1,d.forEach(n=>{if(\"C\"===n.type)t.push(e(new Uint8Array(r,p,n.length)).trim());else if(\"N\"===n.type)t.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(r,p,n.length)).trim(),10));else if(\"F\"===n.type)t.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(r,p,n.length)).trim()));else if(\"D\"===n.type){const e=String.fromCharCode.apply(null,new Uint8Array(r,p,n.length)).trim();t.push(new Date(parseInt(e.slice(0,4),10),parseInt(e.slice(4,6),10)-1,parseInt(e.slice(6,8),10)))}p+=n.length}),g.push(t)):p+=o}}return{header:l,fields:d,records:g,recordSet:t({fields:d,records:g})}}}export{r as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Error.js\";import\"../../../core/has.js\";import i from\"../../../core/Logger.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../geometry/Extent.js\";import n from\"../../../geometry/Point.js\";import o from\"../../../geometry/SpatialReference.js\";import f from\"../RasterInfo.js\";import l from\"../RasterStorageInfo.js\";import u from\"./BaseRaster.js\";import c from\"./DBFParser.js\";import{parsePAMInfo as h,parseSpatialReference as p}from\"./pamParser.js\";import{parseSignature as d,getPyramidIFDs as m,getMaskIFDs as y,parseIFD as g,parseFieldValues as x,isBSQConfig as w,getImageInfo as I}from\"../rasterFormats/TiffDecoder.js\";import{tiffTags as T,geoKeys as R}from\"../rasterFormats/tiffTag.js\";import{estimateStatisticsFromHistograms as _}from\"../rasterFunctions/stretchUtils.js\";import O from\"../rasterTransforms/PolynomialTransform.js\";import F from\"../../../rest/support/FeatureSet.js\";const S=(e,t)=>e.get(t)?.values,b=(e,t)=>e.get(t)?.values?.[0];let E=class extends u{constructor(){super(...arguments),this._files=null,this._headerInfo=null,this._bufferSize=1048576,this._chunkSize=10485760,this.datasetFormat=\"TIFF\"}async fetchRawTile(e,t,i,r={}){if(!this._headerInfo?.isSupported||this.isBlockOutside(e,t,i))return null;const s=await this._fetchRawTiffTile(e,t,i,!1,r);if(null!=s&&this._headerInfo.hasMaskBand){const a=await this._fetchRawTiffTile(e,t,i,!0,r);null!=a&&a.pixels[0]instanceof Uint8Array&&(s.mask=a.pixels[0])}return s}async _open(e){const r=e?e.signal:null,{data:s}=await this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:\"array-buffer\",signal:r});if(!s)throw new t(\"tiffraster:open\",\"failed to open url \"+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1,this.url.lastIndexOf(\".\"));const{littleEndian:a,firstIFDPos:n,isBigTiff:o}=d(s),f=[],l={fileChunk:s,posIFD:n,fileOffset:0};await this._readIFDs(f,l,a,o?8:4,r);const{imageInfo:u,rasterInfo:c}=k(f),h=m(f),p=y(f);if(this._headerInfo={littleEndian:a,isBigTiff:o,ifds:f,pyramidIFDs:h,maskIFDs:p,...u},this._set(\"rasterInfo\",c),!u.isSupported)throw new t(\"tiffraster:open\",\"this tiff is not supported: \"+u.message);if(!u.tileWidth)throw new t(\"tiffraster:open\",\"none-tiled tiff is not optimized for access, convert to COG and retry.\");c.isPseudoSpatialReference&&i.getLogger(this).warn(\"The spatial reference for this tiff is unsupported. Only EPSG spatial reference codes and Esri WKTs are supported.\");const g=f[0].get(\"PREDICTOR\")?.values?.[0],x=f[0].get(\"SAMPLEFORMAT\")?.values?.[0];if(3===x&&2===g)throw new t(\"tiffraster:open\",\"unsupported horizontal difference encoding. Predictor=3 is supported for floating point data\");const{skipMapInfo:w,skipExtensions:I=[]}=this.ioConfig;if(!I.includes(\"aux.xml\")&&!w){const t=await this._fetchAuxiliaryMetaData(e);null!=t&&D(t,c)}I.includes(\"vat.dbf\")||1!==c.bandCount||\"u8\"!==c.pixelType||w||(c.attributeTable=await this._fetchAuxiliaryTable(e),null!=c.attributeTable&&(c.keyProperties.DataType=\"thematic\")),w&&this.updateImageSpaceRasterInfo(c),this.updateTileInfo()}async _validateOrFetchHeaderBuffer(e,t){let{fileChunk:i,fileOffset:r,posIFD:s}=e;if(s+8>=i.byteLength||s<0){r=s+r;i=(await this.request(this.url,{range:{from:r,to:r+this._bufferSize},responseType:\"array-buffer\",signal:t})).data,s=0}return{fileChunk:i,fileOffset:r,posIFD:s}}async _readIFDs(e,i,r,s=4,a){if(!i.posIFD)return null;i=await this._validateOrFetchHeaderBuffer(i,a);const n=await this._readIFD(i,r,T,s,a);if(!n?.ifd)throw new t(\"tiffraster:open\",\"cannot parse tiff header. failed to open url \"+this.url);if(e.push(n.ifd),!n.nextIFD)return null;i.posIFD=n.nextIFD-i.fileOffset,await this._readIFDs(e,i,r,s,a)}async _readIFD(e,t,i=T,r=4,s){let{fileChunk:a,posIFD:n,fileOffset:o}=e;if(!e.fileChunk)return null;const f=g(a,t,n,o,i,r);if(f.success){const e=[];if(f.ifd?.forEach(t=>{t.values||e.push(t)}),e.length>0&&await this._fillOffsets(e,t,f.nextIFD,s),f.ifd?.has(\"GEOKEYDIRECTORY\")){const e=f.ifd.get(\"GEOKEYDIRECTORY\"),i=e?.values;if(i&&i.length>4){const r=i[0]+\".\"+i[1]+\".\"+i[2];n=e.valueOffset+6-o;const f=await this._validateOrFetchHeaderBuffer({fileChunk:a,posIFD:n,fileOffset:o},s),l=await this._readIFD(f,t,R,2,s);e.data=l?.ifd,e.data&&e.data.set(\"GEOTIFFVersion\",{id:0,type:2,valueCount:1,valueOffset:null,values:[r]})}}return f}if(f.requiredBufferSize){return a=(await this.request(this.url,{range:{from:o,to:o+n+f.requiredBufferSize+8},responseType:\"array-buffer\",signal:s})).data,a.byteLength<n+f.requiredBufferSize?null:(e.fileChunk=a,e.fileOffset=o,this._readIFD(e,t,i,r,s))}return null}async _fillOffsets(e,t,i,r){const s=e.filter(e=>null!=e.offlineOffsetSize);if(0===s.length)return;const a=s.map(e=>e.offlineOffsetSize),n=Math.min.apply(null,a.map(e=>e[0])),o=Math.max.apply(null,a.map(e=>e[0]+e[1]));let f=1===a.length||o-n<=this._bufferSize;if(!f&&a.length>1){a.sort((e,t)=>e[0]-t[0]);f=a.reduce((e,t)=>e===t[0]?t[0]+t[1]:0,a[0][0])===o}if(f){const e=await this._fetchOffsets(n,Math.max(o,n+this._bufferSize),r);return void s.forEach(i=>x(e,t,i,n))}const l=s.map(async e=>{const i=e.offlineOffsetSize,s=await this._fetchOffsets(i[0],i[1]+i[0],r);x(s,t,e,i[0])});await Promise.all(l)}async _fetchOffsets(e,t,i){const r=[],s=this._chunkSize,a=Math.ceil((t-e)/s);let n=e;for(let l=0;l<a;l++)r.push(this.request(this.url,{range:{from:n,to:l===a-1?t:n+s-1},responseType:\"array-buffer\",signal:i})),n+=s;const o=await Promise.all(r);if(1===a)return o[0].data;const f=new Uint8Array(t-e+1);for(let l=0;l<a;l++)f.set(new Uint8Array(o[l].data),l*s);return f.buffer}async _fetchRawTiffTile(e,t,i,r,s={}){const a=this._getTileLocation(e,t,i,r);if(!a)return null;const{ranges:n,actualTileWidth:o,actualTileHeight:f,ifd:l}=a,u=n.map(e=>this.request(this.url,{range:e,responseType:\"array-buffer\",signal:s.signal})),c=await Promise.all(u),h=c.map(e=>e.data.byteLength).reduce((e,t)=>e+t),p=1===c.length?c[0].data:new ArrayBuffer(h),d=[0],m=[0];if(c.length>1){const e=new Uint8Array(p);for(let t=0,i=0;t<c.length;t++){const r=c[t].data;e.set(new Uint8Array(r),i),d[t]=i,i+=r.byteLength,m[t]=r.byteLength}}const{blockWidth:y,blockHeight:g}=this.getBlockWidthHeight(e),x=await this.decodePixelBlock(p,{format:\"tiff\",customOptions:{headerInfo:this._headerInfo,ifd:l,offsets:d,sizes:m},width:y,height:g,planes:null,pixelType:null});if(null==x)return null;let w,I,T;if(o!==y||f!==g){let e=x.mask;if(e)for(w=0;w<g;w++)if(T=w*y,w<f)for(I=o;I<y;I++)e[T+I]=0;else for(I=0;I<y;I++)e[T+I]=0;else for(e=new Uint8Array(y*g),x.mask=e,w=0;w<f;w++)for(T=w*y,I=0;I<o;I++)e[T+I]=1}return x}_getTileLocation(e,t,i,r=!1){const{firstPyramidLevel:s,blockBoundary:a}=this.rasterInfo.storageInfo,n=0===e?0:e-(s-1),{_headerInfo:o}=this;if(!o)return null;const f=r?o.maskIFDs[n]:0===n?o?.ifds[0]:o?.pyramidIFDs[n-1];if(!f)return null;const l=w(f,o),u=S(f,\"TILEOFFSETS\");if(void 0===u)return null;const c=S(f,\"TILEBYTECOUNTS\"),{minRow:h,minCol:p,maxRow:d,maxCol:m}=a[n];if(t>d||i>m||t<h||i<p)return null;const y=b(f,\"IMAGEWIDTH\"),g=b(f,\"IMAGELENGTH\"),x=b(f,\"TILEWIDTH\"),I=b(f,\"TILELENGTH\"),T=[];if(l){const{bandCount:e}=this.rasterInfo;for(let r=0;r<e;r++){const e=r*(d+1)*(m+1)+t*(m+1)+i;T[r]={from:u[e],to:u[e]+c[e]-1}}}else{const e=t*(m+1)+i;T.push({from:u[e],to:u[e]+c[e]-1})}for(let w=0;w<T.length;w++)if(null==T[w].from||!T[w].to||T[w].to<0)return null;return{ranges:T,ifd:f,actualTileWidth:i===m&&y%x||x,actualTileHeight:t===d&&g%I||I}}async _fetchAuxiliaryMetaData(e){try{const{data:t}=await this.request(this.url+\".aux.xml\",{responseType:\"xml\",signal:e?.signal});return h(t)}catch{return null}}async _fetchAuxiliaryTable(e){try{const{data:t}=await this.request(this.url+\".vat.dbf\",{responseType:\"array-buffer\",signal:e?.signal}),i=c.parse(t);return i?.recordSet?F.fromJSON(i.recordSet):null}catch{return null}}};function k(e){const t=I(e),{width:i,height:r,tileWidth:s,tileHeight:u,planes:c,pixelType:h,compression:d,firstPyramidLevel:m,maximumPyramidLevel:y,pyramidBlockWidth:g,pyramidBlockHeight:x,pyramidResolutions:w,tileBoundary:T,affine:R,metadata:_}=t,F=t.extent.spatialReference?.wkt||t.extent.spatialReference?.wkid;let E=p(F),k=!!t.isPseudoGeographic;null==E&&(k=!0,E=new o({wkid:3857}));const D=new a({...t.extent,spatialReference:E}),v=new n(D?{x:D.xmin,y:D.ymax,spatialReference:E}:{x:0,y:0}),P=new l({blockWidth:s,blockHeight:u,pyramidBlockWidth:g,pyramidBlockHeight:x,compression:d,origin:v,firstPyramidLevel:m,maximumPyramidLevel:y,pyramidResolutions:w,blockBoundary:T}),B=new n({x:(D.xmax-D.xmin)/i,y:(D.ymax-D.ymin)/r,spatialReference:E}),C=_?{BandProperties:_.bandProperties,DataType:_.dataType}:{};let L=null;const z=b(e[0],\"PHOTOMETRICINTERPRETATION\"),j=S(e[0],\"COLORMAP\");if(z<=3&&j?.length>3&&j.length%3==0){L=[];const e=j.length/3;for(let t=0;t<e;t++)L.push([t,j[t]>>>8,j[t+e]>>>8,j[t+2*e]>>>8])}const A=new f({width:i,height:r,bandCount:c,pixelType:h,pixelSize:B,storageInfo:P,spatialReference:E,isPseudoSpatialReference:k,keyProperties:C,extent:D,colormap:L,statistics:_?_.statistics:null});if(R?.length&&(A.nativeExtent=new a({xmin:-.5,ymin:.5-r,xmax:i-.5,ymax:.5,spatialReference:E}),A.transform=new O({polynomialOrder:1,forwardCoefficients:[R[2]+R[0]/2,R[5]-R[3]/2,R[0],R[3],-R[1],-R[4]]}),A.extent=A.transform.forwardTransform(A.nativeExtent),A.pixelSize=new n({x:(D.xmax-D.xmin)/i,y:(D.ymax-D.ymin)/r,spatialReference:E}),P.origin.x=-.5,P.origin.y=.5),w){const{x:e,y:t}=A.pixelSize;w.forEach(i=>{i.x*=e,i.y*=t})}return{imageInfo:t,rasterInfo:A}}function D(e,t){if(t.statistics=e.statistics??t.statistics,t.histograms=e.histograms,e.histograms&&null==t.statistics&&(t.statistics=_(e.histograms)),e.transform&&null==t.transform){t.transform=e.transform,t.nativeExtent=t.extent;const i=t.transform.forwardTransform(t.nativeExtent);t.pixelSize=new n({x:(i.xmax-i.xmin)/t.width,y:(i.ymax-i.ymin)/t.height,spatialReference:t.spatialReference}),t.extent=i}t.isPseudoSpatialReference&&e.spatialReference&&(t.spatialReference=e.spatialReference,t.extent.spatialReference=t.nativeExtent.spatialReference=t.storageInfo.origin.spatialReference=t.spatialReference)}e([r()],E.prototype,\"_files\",void 0),e([r()],E.prototype,\"_headerInfo\",void 0),e([r()],E.prototype,\"_bufferSize\",void 0),e([r()],E.prototype,\"_chunkSize\",void 0),e([r({type:String,json:{write:!0}})],E.prototype,\"datasetFormat\",void 0),E=e([s(\"esri.layers.support.rasterDatasets.TIFFRaster\")],E);const v=E;export{v as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import r from\"./CovJSONRaster.js\";import e from\"./ImageAuxRaster.js\";import s from\"./ImageServerRaster.js\";import o from\"./InMemoryRaster.js\";import a from\"./MRFRaster.js\";import c from\"./TIFFRaster.js\";const n=new Map;n.set(\"MRF\",{desc:\"Meta Raster Format\",constructor:a}),n.set(\"TIFF\",{desc:\"GeoTIFF\",constructor:c}),n.set(\"RasterTileServer\",{desc:\"Raster Tile Server\",constructor:s}),n.set(\"JPG\",{desc:\"JPG Raster Format\",constructor:e}),n.set(\"PNG\",{desc:\"PNG Raster Format\",constructor:e}),n.set(\"GIF\",{desc:\"GIF Raster Format\",constructor:e}),n.set(\"BMP\",{desc:\"BMP Raster Format\",constructor:e}),n.set(\"CovJSON\",{desc:\"COVJSON Raster Format\",constructor:r}),n.set(\"MEMORY\",{desc:\"In Memory Raster Format\",constructor:o});class u{static get supportedFormats(){const t=new Set;return n.forEach((r,e)=>t.add(e)),t}static async open(r){const{url:e,ioConfig:s,source:o,sourceJSON:a}=r;let c=r.datasetFormat??s?.datasetFormat;null==c&&(e.includes(\".\")?c=e.slice(e.lastIndexOf(\".\")+1).toUpperCase():\"coverage\"===o?.type?.toLowerCase()?c=\"CovJSON\":o?.extent&&o.pixelblocks&&(c=\"MEMORY\")),\"OVR\"===c||\"TIF\"===c?c=\"TIFF\":\"JPG\"===c||\"JPEG\"===c||\"JFIF\"===c?c=\"JPG\":\"COVJSON\"===c&&(c=\"CovJSON\"),e.toLowerCase().includes(\"/imageserver\")&&!e.toLowerCase().includes(\"/wcsserver\")&&(c=\"RasterTileServer\");const u={url:e,source:o,sourceJSON:a,datasetFormat:c,ioConfig:s??{bandIds:null,sampling:null}};if(Object.keys(u).forEach(t=>{null==u[t]&&delete u[t]}),c){if(!this.supportedFormats.has(c))throw new t(\"rasterfactory:open\",\"not a supported format \"+c);if(\"CRF\"===c)throw new t(\"rasterfactory:open\",`cannot open raster: ${e}`);const s=new(0,n.get(c).constructor)(u);return await s.open({signal:r.signal}),s}const i=Array.from(n.keys()).filter(t=>\"CovJSON\"!==t&&\"Memory\"!==t);let l=0;const m=()=>{if(c=i[l++],!c)return null;if(\"CRF\"===c)return null;const t=new(0,n.get(c).constructor)(u);return t.open({signal:r.signal}).then(()=>t).catch(()=>m())};return m()}static register(t,r,e){n.has(t.toUpperCase())||n.set(t.toUpperCase(),{desc:r,constructor:e})}}export{u as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../PopupTemplate.js\";import{ClonableMixin as r}from\"../core/Clonable.js\";import s from\"../core/Error.js\";import i from\"../core/Logger.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{debounce as a,throwIfAbortError as n}from\"../core/promiseUtils.js\";import{watch as p}from\"../core/reactiveUtils.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{ensureClass as c}from\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import u from\"../graphic/ImageryTileGraphicOrigin.js\";import h from\"./Layer.js\";import{ArcGISService as d}from\"./mixins/ArcGISService.js\";import{BlendLayer as y}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as f}from\"./mixins/CustomParametersMixin.js\";import{ImageryTileMixin as g}from\"./mixins/ImageryTileMixin.js\";import{OperationalLayer as v}from\"./mixins/OperationalLayer.js\";import{PortalLayer as w}from\"./mixins/PortalLayer.js\";import{RasterJobHandlerMixin as R}from\"./mixins/RasterJobHandlerMixin.js\";import{RasterPresetRendererMixin as S}from\"./mixins/RasterPresetRendererMixin.js\";import{RefreshableLayer as j}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as F}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as _}from\"./mixins/TemporalLayer.js\";import{legendEnabled as I,screenSizePerspectiveEnabled as O}from\"./support/commonProperties.js\";import b from\"./support/Field.js\";import{getServicePixelValueField as P,getRawServicePixelValueField as x,getRasterAttributeTableFields as T,getMagnitudeField as N,getDirectionField as L,getMultidimensionalFields as J,commonRasterFieldNames as C,setDefaultRasterFieldFormats as M}from\"./support/rasterFieldUtils.js\";import E from\"./support/RasterFunction.js\";import{isFunctionRaster as U,getPrimaryRasters as $}from\"./support/rasterDatasets/datasetUtils.js\";import D from\"./support/rasterDatasets/FunctionRaster.js\";import W from\"./support/rasterDatasets/RasterFactory.js\";import{getPrimaryRasterUrls as z,create as B}from\"./support/rasterFunctions/rasterFunctionHelper.js\";import{logInvalidElevationInfoWarning as A,elevationModeUnsupportedMessage as G,featureExpressionUnsupportedMessage as k}from\"../support/elevationInfoUtils.js\";import{createPopupTemplate as V}from\"../support/popupUtils.js\";import H from\"../symbols/support/ElevationInfo.js\";let Y=class extends(y(F(v(w(S(f(g(R(_(d(j(o(r(h)))))))))))))){constructor(...e){super(...e),this._primaryRasters=[],this.graphicOrigin=new u(this),this.legendEnabled=!0,this.isReference=null,this.listMode=\"show\",this.sourceJSON=null,this.version=null,this.type=\"imagery-tile\",this.operationalLayerType=\"ArcGISTiledImageServiceLayer\",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.fields=null,this.source=void 0,this._debouncedSaveOperations=a(async(e,t,r)=>{const{save:s,saveAs:i}=await import(\"./save/imageryUtils.js\");switch(e){case 0:return s(this,t);case 1:return i(this,r,t)}})}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Image Service\"]},e).catch(n).then(()=>this._openRaster(t))),Promise.resolve(this)}set elevationInfo(e){\"relative-to-scene\"!==e?.mode&&this._set(\"elevationInfo\",e),this._validateElevationInfo(e)}get defaultPopupTemplate(){return this.createPopupTemplate()}get rasterFields(){const e=[P(\"Pixel Value\"),x(\"Raw Pixel Value\")],t=this.raster?.rasterInfo??this.serviceRasterInfo,r=t?.attributeTable;if(r){const t=T(r);e.push(...t)}const s=t?.dataType,i=t?.multidimensionalInfo;if((\"vector-magdir\"===s||\"vector-uv\"===s)&&null!=i){const t=i.variables[0].unit?.trim(),r=N(t),s=L();e.push(r,s)}if(i){const t=J(i);e.push(...t)}return e}get renderer(){return super.renderer}set renderer(e){super.renderer=e}createPopupTemplate(e){const{rasterFields:t}=this,r=e?.visibleFieldNames??new Set(t.map(({name:e})=>e).filter(e=>e!==C.rawServicePixelValue)),s=V({fields:t,title:this.title},{...e,visibleFieldNames:r}),{rasterInfo:i}=this.raster;return s?.fieldInfos&&i&&M(s.fieldInfos,i),s}async generateRasterInfo(e,t){if(e=c(E,e),await this.load(),!e||\"none\"===e.functionName?.toLowerCase())return this.serviceRasterInfo;try{const{rasterInfo:r}=await this._openFunctionRaster(e,t);return r}catch(r){if(r instanceof s)throw r;throw new s(\"imagery-tile-layer\",\"the given raster function is not supported\")}}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,t){return this._debouncedSaveOperations(1,t,e)}supportsWrite(){const e=this._primaryRasters[0]??this.raster;return!!(this.loaded?\"RasterTileServer\"===e.datasetFormat&&(\"Raster\"===e.tileType||\"Map\"===e.tileType):this.url&&/\\/ImageServer(\\/|\\/?$)/i.test(this.url))}write(e,t){if(this.supportsWrite())return super.write(e,t);if(t?.messages){const e=`${t.origin}/${t.layerContainerType||\"operational-layers\"}`;t.messages.push(new s(\"layer:unsupported\",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this}))}return null}async _openRaster(e){let t=!1;if(this.raster)await this._openFromRaster(this.raster,e),t=U(this.raster),!t&&this.rasterFunction&&(this._primaryRasters=[this.raster],await this._initializeWithFunctionRaster(this.rasterFunction));else{const{url:t,rasterFunction:r,source:i}=this;if(!t&&!i)throw new s(\"imagery-tile-layer:open\",\"missing url or source parameter\");i?await this._openFromSource(i,e):r?await this._openFromUrlWithRasterFunction(t,r,e):await this._openFromUrl(t,e)}const r=this.raster.rasterInfo;if(!r)throw new s(\"imagery-tile-layer:load\",\"cannot load resources on \"+this.url);if(this._set(\"serviceRasterInfo\",t?r:this._primaryRasters[0].rasterInfo),this._set(\"spatialReference\",r.spatialReference),this.sourceJSON=this.sourceJSON||this.raster.sourceJSON,null!=this.sourceJSON){const e=\"Map\"===this.raster.tileType&&null!=this.sourceJSON.minLOD&&null!=this.sourceJSON.maxLOD?this.sourceJSON:{...this.sourceJSON,minScale:0,maxScale:0};this.read(e,{origin:\"service\"})}else this.read({tileInfo:this.serviceRasterInfo?.storageInfo.tileInfo.toJSON()},{origin:\"service\"});this.title||(this.title=this.raster.datasetName),\"Map\"===this.raster.tileType&&(this.popupEnabled=!1),this._configDefaultSettings(),this.addHandles(p(()=>this.customParameters,e=>{this.raster&&(this.raster.ioConfig.customFetchParameters=e)}))}async _openFromRaster(e,t){e.rasterInfo||await e.open({signal:t}),this._primaryRasters=$(e),this.url||(this.url=this._primaryRasters[0].url)}async _openFromUrlWithRasterFunction(e,t,r){const i=[e];t&&z(t.toJSON(),i);const o=await Promise.all(i.map(e=>W.open({url:e,sourceJSON:this.sourceJSON,ioConfig:{sampling:\"closest\",...this.ioConfig,customFetchParameters:this.customParameters},signal:r}))),a=o.findIndex(e=>null==e);if(a>-1)throw new s(\"imagery-tile-layer:open\",`cannot open raster: ${i[a]}`);return this._primaryRasters=o,this._initializeWithFunctionRaster(t)}async _openFromUrl(e,t){const r=await W.open({url:e,sourceJSON:this.sourceJSON,ioConfig:{sampling:\"closest\",...this.ioConfig,customFetchParameters:this.customParameters},signal:t});if(null==r)throw new s(\"imagery-tile-layer:open\",`cannot open raster: ${e}`);this._primaryRasters=[r],this.raster=r}async _openFromSource(e,t){const r=\"the tiled imagery data source is not supported\",i=\"coverage\"===e.type?.toLowerCase()?\"CovJSON\":e.extent&&e.pixelBlock?\"MEMORY\":null;if(!i)throw new s(\"imagery-tile-layer:open\",r);\"MEMORY\"===i&&(e={...e,pixelBlock:void 0,pixelBlocks:[e.pixelBlock]});const o=await W.open({url:\"\",source:e,datasetFormat:i,ioConfig:{sampling:\"closest\",...this.ioConfig,customFetchParameters:this.customParameters},signal:t});if(null==o)throw new s(\"imagery-tile-layer:open\",r);this._primaryRasters=[o],this.rasterFunction?await this._initializeWithFunctionRaster(this.rasterFunction):this.raster=o}async _openFunctionRaster(e,t){const r={raster:this._primaryRasters[0]};this._primaryRasters.length>1&&this._primaryRasters.forEach(e=>r[e.url]=e);const s=B(e.functionDefinition?.toJSON()??e.toJSON(),r),i=new D({rasterFunction:s});return await i.open(t),i}async _initializeWithFunctionRaster(e,t){try{this.raster=await this._openFunctionRaster(e,t)}catch(r){r instanceof s&&i.getLogger(this).error(\"imagery-tile-layer:open\",r.message),i.getLogger(this).warn(\"imagery-tile-layer:open\",\"the raster function cannot be applied and is removed\"),this._set(\"rasterFunction\",null),this.raster=this._primaryRasters[0]}}_validateElevationInfo(e){A(i.getLogger(this),G(\"ImageryTile layers\",\"relative-to-scene\",e)),A(i.getLogger(this),k(\"ImageryTile layers\",e))}};e([l({clonable:!1})],Y.prototype,\"_primaryRasters\",void 0),e([l({type:H,value:null,json:{name:\"layerDefinition.elevationInfo\",write:!0,origins:{\"portal-item\":{read:!1,write:!1},\"web-map\":{read:!1,write:!1}}}})],Y.prototype,\"elevationInfo\",null),e([l({readOnly:!0,clonable:!1})],Y.prototype,\"graphicOrigin\",void 0),e([l(I)],Y.prototype,\"legendEnabled\",void 0),e([l({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Y.prototype,\"isReference\",void 0),e([l({type:[\"show\",\"hide\"]})],Y.prototype,\"listMode\",void 0),e([l({json:{read:!0,write:!0}})],Y.prototype,\"blendMode\",void 0),e([l({type:E,json:{name:\"renderingRule\",write:!0}})],Y.prototype,\"rasterFunction\",void 0),e([l()],Y.prototype,\"sourceJSON\",void 0),e([l({readOnly:!0,json:{origins:{service:{read:{source:\"currentVersion\"}}}}})],Y.prototype,\"version\",void 0),e([l({readOnly:!0,json:{read:!1}})],Y.prototype,\"type\",void 0),e([l({type:[\"ArcGISTiledImageServiceLayer\"]})],Y.prototype,\"operationalLayerType\",void 0),e([l({type:Boolean,value:!0,json:{read:{source:\"disablePopup\",reader:(e,t)=>!t.disablePopup},write:{target:\"disablePopup\",overridePolicy(){return{enabled:!this.loaded||\"Raster\"===this.raster.tileType}},writer(e,t,r){t[r]=!e}}}})],Y.prototype,\"popupEnabled\",void 0),e([l({type:t,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\",overridePolicy(){return{enabled:!this.loaded||\"Raster\"===this.raster.tileType}}}}})],Y.prototype,\"popupTemplate\",void 0),e([l({readOnly:!0})],Y.prototype,\"defaultPopupTemplate\",null),e([l(O)],Y.prototype,\"screenSizePerspectiveEnabled\",void 0),e([l({readOnly:!0,type:[b]})],Y.prototype,\"fields\",void 0),e([l({readOnly:!0,type:[b]})],Y.prototype,\"rasterFields\",null),e([l({constructOnly:!0})],Y.prototype,\"source\",void 0),Y=e([m(\"esri.layers.ImageryTileLayer\")],Y);const q=Y;export{q as default};\n"],
  "mappings": "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",
  "names": ["t", "s", "i", "r", "i", "e", "r", "o", "l", "s", "a", "u", "m", "c", "t", "n", "d", "f", "p", "h", "g", "b", "y", "x", "j", "v", "f", "t", "e", "s", "i", "r", "o", "a", "l", "n", "m", "p", "c", "u", "h", "d", "g", "x", "y", "b", "I", "v", "C", "k", "m", "e", "t", "r", "s", "a", "o", "i", "n", "k", "h", "d", "g", "u", "c", "l", "p", "u", "e", "t", "n", "r", "c", "d", "o", "a", "m", "p", "S", "C", "f", "s", "i", "l", "h", "t", "s", "e", "r", "o", "a", "l", "f", "v", "p", "c", "u", "d", "w", "g", "L", "i", "n", "m", "g", "e", "t", "i", "s", "r", "a", "l", "n", "o", "c", "m", "u", "h", "f", "d", "y", "x", "v", "S", "I", "w", "b", "T", "j", "_", "R", "z", "p", "L", "y", "b", "t", "e", "r", "s", "o", "i", "a", "l", "f", "c", "m", "p", "h", "u", "g", "d", "w", "I", "R", "S", "_", "k", "v", "n", "x", "j", "C", "T", "L", "E", "W", "t", "e", "r", "n", "i", "a", "s", "o", "l", "p", "d", "g", "h", "S", "e", "t", "b", "E", "i", "r", "s", "a", "n", "o", "f", "l", "u", "c", "k", "h", "p", "g", "x", "w", "I", "N", "d", "m", "y", "T", "R", "_", "D", "v", "C", "L", "z", "j", "n", "I", "v", "d", "g", "u", "t", "r", "e", "s", "o", "a", "c", "i", "l", "m", "Y", "b", "j", "o", "s", "X", "i", "l", "f", "e", "t", "r", "c", "v", "d", "p", "N", "u", "a", "m", "$", "q"]
}
