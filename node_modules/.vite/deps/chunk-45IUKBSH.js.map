{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/webgl/animatedFormats/utils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Milliseconds as t}from\"../../../../../core/time.js\";import{getRandomValue as e}from\"../grouping.js\";function r(e){return t(e.frameDurations.reduce((t,e)=>t+e,0))}function i(t){const{width:e,height:r}=t,i=t.frameDurations.reverse(),a=e=>{const r=t.frameDurations.length-1-e;return t.getFrame(r)};return{frameCount:t.frameCount,duration:t.duration,frameDurations:i,getFrame:a,width:e,height:r}}function a(e,r){const{width:i,height:a,getFrame:n}=e,s=r/e.duration,o=e.frameDurations.map(e=>t(e*s));return{frameCount:e.frameCount,duration:e.duration,frameDurations:o,getFrame:n,width:i,height:a}}function n(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.shift();return s.unshift(t(o+r)),{frameCount:e.frameCount,duration:e.duration+r,frameDurations:s,getFrame:n,width:i,height:a}}function s(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.pop();return s.push(t(o+r)),{frameCount:e.frameCount,duration:e.duration+r,frameDurations:s,getFrame:n,width:i,height:a}}class o{constructor(e,r,i,a){this._animation=e,this._repeatType=i,this._onFrameData=a,this._direction=1,this._currentFrame=0,this._lastUpdated=t(0),this.timeInFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let n=0;for(;r>n;)n+=this.timeToFrame,this.nextFrame();const s=this._animation.getFrame(this._currentFrame);this._onFrameData(s)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case\"None\":this._currentFrame-=this._direction;break;case\"Loop\":this._currentFrame=0;break;case\"Oscillate\":this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case\"None\":this._currentFrame-=this._direction;break;case\"Loop\":this._currentFrame=this._animation.frameDurations.length-1;break;case\"Oscillate\":this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame],this.timeInFrame=0;const t=this._animation.getFrame(this._currentFrame);this._onFrameData(t)}update(e){const r=t(e-this._lastUpdated);this._lastUpdated=e,this._advance(r)}_advance(t){this.timeInFrame+=t,this.timeInFrame>this.timeToFrame&&this.nextFrame()}}function m(e,r){e.animationsEnabled&&r?.update(t(e.time))}function h(m,h,u,c){let d,{repeatType:f}=h;if(null==f&&(f=\"Loop\"),!0===h.reverseAnimation&&(m=i(m)),null!=h.duration&&(m=a(m,t(1e3*h.duration))),null!=h.repeatDelay){const e=1e3*h.repeatDelay;\"Loop\"===f?m=s(m,t(e)):\"Oscillate\"===f&&(m=n(s(m,t(e/2)),t(e/2)))}if(null!=h.startTimeOffset)d=t(1e3*h.startTimeOffset);else if(null!=h.randomizeStartTime){const i=82749913,a=null!=h.randomizeStartSeed?h.randomizeStartSeed:i,n=e(u,a);d=t(n*r(m))}else d=t(0);return new o(m,d,f,c)}export{o as Player,a as adjustDuration,s as appendDelay,h as createPlayer,r as getDuration,n as prependDelay,i as reverse,m as updateIfNeeded};\n"],
  "mappings": "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",
  "names": ["e", "r", "i", "a", "n", "s", "o", "m", "h"]
}
