import {
  n
} from "./chunk-XTZAIV4X.js";
import {
  N2 as N,
  fe
} from "./chunk-NMQNUPE4.js";

// node_modules/@arcgis/core/core/memoize.js
function t(t2) {
  let r2, e, i2 = [], u2 = false;
  function f(...f2) {
    return u2 && r2 === this && n2(f2, i2) || (e = t2.apply(this, f2), r2 = this, i2 = f2, u2 = true), e;
  }
  return f;
}
function n2(t2, n3) {
  if (t2.length !== n3.length) return false;
  for (let r2 = 0; r2 < t2.length; ++r2) if (t2[r2] !== n3[r2]) return false;
  return true;
}

// node_modules/@arcgis/core/support/elevationInfoUtils.js
function r(e) {
  return e ? U : k;
}
function u(e, n3) {
  return n3?.mode ? n3.mode : r(e).mode;
}
function i(e, n3) {
  return null != n3 ? n3 : r(e);
}
function s(e, n3) {
  return u(null == e || (e.hasZ ?? false), n3);
}
function l(e, n3) {
  return i(null == e || (e.hasZ ?? false), n3);
}
function a(e) {
  const n3 = m(e);
  return s(e.geometry, n3);
}
function c(e) {
  const n3 = m(e), t2 = s(e.geometry, n3), o = null != n3 && "on-the-ground" !== t2 ? z(n3) : 0, r2 = n3?.featureExpressionInfo;
  return { mode: t2, offset: o, featureExpressionInfo: r2 };
}
function d(e) {
  return g(e) || v(e);
}
function v(e) {
  return "0" === e?.featureExpressionInfo?.expression;
}
function g(e) {
  if (!e) return false;
  if ("on-the-ground" === e.mode) return false;
  const n3 = e?.featureExpressionInfo ? e.featureExpressionInfo.expression : null;
  return !(!n3 || "0" === n3);
}
function m(e) {
  return e.layer && "elevationInfo" in e.layer ? e.layer.elevationInfo : null;
}
var p = t((e, o, r2) => {
  if (!e) return 0;
  if ("decimal-degrees" === o) return 0;
  const u2 = "unknown" !== o && o ? o : "meters", i2 = fe(r2);
  return i2 ? N(e, u2, i2) : 0;
});
function h(e, n3) {
  return p(e?.offset, e?.unit, n3);
}
function x(e, n3, t2) {
  if (!t2?.mode) return;
  const o = e.hasZ ? e.z : 0, r2 = h(t2, e.spatialReference);
  switch (t2.mode) {
    case "absolute-height":
      return o - r2;
    case "on-the-ground":
      return 0;
    case "relative-to-ground":
      return o - ((n3.elevationProvider.getElevation(e.x, e.y, o, e.spatialReference, "ground") ?? 0) + r2);
    case "relative-to-scene":
      return o - ((n3.elevationProvider.getElevation(e.x, e.y, o, e.spatialReference, "scene") ?? 0) + r2);
  }
}
function E(e, n3, t2, o = null) {
  return I(e, n3.x, n3.y, n3.hasZ ? n3.z : 0, n3.spatialReference, t2, o);
}
function b(e, n3, t2, o, r2 = null) {
  return I(e, n3[0], n3[1], n3.length > 2 ? n3[2] : 0, t2, o, r2);
}
function I(e, n3, t2, o, r2, u2, i2 = null) {
  if (null == u2) return;
  const s2 = null != i2 ? i2.mode : "absolute-height";
  if ("on-the-ground" === s2) return 0;
  const { absoluteZ: l2 } = y(n3, t2, o, r2, e, u2);
  return Z(l2, n3, t2, o, r2, e, i2, s2);
}
function y(e, n3, t2, o, r2, u2) {
  const i2 = h(u2, o);
  switch (u2.mode) {
    case "absolute-height":
      return { absoluteZ: t2 + i2, elevation: 0 };
    case "on-the-ground": {
      const t3 = r2.elevationProvider.getElevation(e, n3, 0, o, "ground") ?? 0;
      return { absoluteZ: t3, elevation: t3 };
    }
    case "relative-to-ground": {
      const u3 = r2.elevationProvider.getElevation(e, n3, t2, o, "ground") ?? 0;
      return { absoluteZ: t2 + u3 + i2, elevation: u3 };
    }
    case "relative-to-scene": {
      const u3 = r2.elevationProvider.getElevation(e, n3, t2, o, "scene") ?? 0;
      return { absoluteZ: t2 + u3 + i2, elevation: u3 };
    }
  }
}
function Z(e, n3, t2, o, r2, u2, i2, s2) {
  const l2 = h(i2, r2);
  switch (s2) {
    case "absolute-height":
      return e - l2;
    case "relative-to-ground":
      return e - ((u2.elevationProvider.getElevation(n3, t2, o, r2, "ground") ?? 0) + l2);
    case "relative-to-scene":
      return e - ((u2.elevationProvider.getElevation(n3, t2, o, r2, "scene") ?? 0) + l2);
  }
}
function P(e, n3) {
  if (null == n3) return false;
  const { mode: t2 } = n3;
  return null != t2 && ("scene" === e && "relative-to-scene" === t2 || "ground" === e && "absolute-height" !== t2);
}
function w(e, n3, t2) {
  return t2 && t2.mode !== n3 ? `${e} only support ${n3} elevation mode` : null;
}
function $(e, n3, t2) {
  return t2?.mode === n3 ? `${e} do not support ${n3} elevation mode` : null;
}
function R(e, n3) {
  return null != n3?.featureExpressionInfo && "0" !== n3.featureExpressionInfo.expression ? `${e} do not support featureExpressionInfo` : null;
}
function j(e, n3) {
  n3 && e.warn(".elevationInfo=", n3);
}
function z(e) {
  return (e?.offset ?? 0) * n(e?.unit);
}
var U = { mode: "absolute-height", offset: 0 };
var k = { mode: "on-the-ground", offset: null };

export {
  t,
  u,
  i,
  s,
  l,
  a,
  c,
  d,
  v,
  h,
  x,
  E,
  b,
  I,
  y,
  P,
  w,
  $,
  R,
  j,
  z,
  U,
  k
};
//# sourceMappingURL=chunk-GD72EK2J.js.map
