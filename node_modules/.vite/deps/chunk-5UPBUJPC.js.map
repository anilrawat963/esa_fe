{
  "version": 3,
  "sources": ["../../@arcgis/core/core/Promise.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as s}from\"tslib\";import e from\"./Accessor.js\";import{abortHandle as i}from\"./handleUtils.js\";import{createResolver as r,createAbortError as t,isAbortError as o}from\"./promiseUtils.js\";import{subclass as l}from\"./accessorSupport/decorators/subclass.js\";class h{constructor(){this._resolver=r(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(s){this._resolvingPromises.push(s),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(t())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const s=r(),e=[...this._resolvingPromises,s.promise],i=this._allPromise=Promise.all(e);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==i||o(s)||this._resolver.reject(s)}),s.resolve()}}const m=e=>{const r=e;let t=class extends r{constructor(...s){super(...s),this._promiseProps=new h,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(s,e){return this._promiseProps.promise.then(()=>this).then(s,e)}catch(s){return this.when(null,s)}addResolvingPromise(s){s&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise(\"_promiseProps\"in s?s.when():s)}addResolvingTask(s){s&&!this._promiseProps.isFulfilled()&&(this.addHandles(i(s)),this._promiseProps.addResolvingPromise(s.promise))}};return t=s([l(\"esri.core.Promise\")],t),t},n=m(e);export{n as EsriPromise,m as EsriPromiseMixin};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAI8Q,IAAM,IAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,YAAU,EAAE,GAAE,KAAK,UAAQ,GAAE,KAAK,qBAAmB,CAAC,GAAE,KAAK,UAAU,QAAQ,KAAK,MAAI;AAAC,WAAK,UAAQ,GAAE,KAAK,SAAS;AAAA,IAAC,GAAE,MAAI;AAAC,WAAK,UAAQ,GAAE,KAAK,SAAS;AAAA,IAAC,CAAC,GAAE,KAAK,UAAQ,KAAK,UAAU;AAAA,EAAO;AAAA,EAAC,UAAS;AAAC,SAAK,SAAS;AAAA,EAAC;AAAA,EAAC,oBAAoB,GAAE;AAAC,SAAK,mBAAmB,KAAK,CAAC,GAAE,KAAK,YAAY;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,WAAO,MAAI,KAAK;AAAA,EAAO;AAAA,EAAC,aAAY;AAAC,WAAO,MAAI,KAAK;AAAA,EAAO;AAAA,EAAC,cAAa;AAAC,WAAO,MAAI,KAAK;AAAA,EAAO;AAAA,EAAC,QAAO;AAAC,SAAK,UAAU,OAAO,EAAE,CAAC;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,SAAK,cAAY,MAAK,KAAK,qBAAmB;AAAA,EAAI;AAAA,EAAC,cAAa;AAAC,QAAG,KAAK,YAAY,EAAE;AAAO,UAAM,IAAE,EAAE,GAAE,IAAE,CAAC,GAAG,KAAK,oBAAmB,EAAE,OAAO,GAAEA,KAAE,KAAK,cAAY,QAAQ,IAAI,CAAC;AAAE,IAAAA,GAAE,KAAK,MAAI;AAAC,WAAK,YAAY,KAAG,KAAK,gBAAcA,MAAG,KAAK,UAAU,QAAQ;AAAA,IAAC,GAAE,CAAAC,OAAG;AAAC,WAAK,YAAY,KAAG,KAAK,gBAAcD,MAAG,EAAEC,EAAC,KAAG,KAAK,UAAU,OAAOA,EAAC;AAAA,IAAC,CAAC,GAAE,EAAE,QAAQ;AAAA,EAAC;AAAC;AAAC,IAAM,IAAE,OAAG;AAAC,QAAM,IAAE;AAAE,MAAI,IAAE,cAAc,EAAC;AAAA,IAAC,eAAe,GAAE;AAAC,YAAM,GAAG,CAAC,GAAE,KAAK,gBAAc,IAAI,KAAE,KAAK,oBAAoB,QAAQ,QAAQ,CAAC;AAAA,IAAC;AAAA,IAAC,UAAS;AAAC,WAAK,cAAc,QAAQ;AAAA,IAAC;AAAA,IAAC,aAAY;AAAC,aAAO,KAAK,cAAc,WAAW;AAAA,IAAC;AAAA,IAAC,aAAY;AAAC,aAAO,KAAK,cAAc,WAAW;AAAA,IAAC;AAAA,IAAC,cAAa;AAAC,aAAO,KAAK,cAAc,YAAY;AAAA,IAAC;AAAA,IAAC,KAAK,GAAEC,IAAE;AAAC,aAAO,KAAK,cAAc,QAAQ,KAAK,MAAI,IAAI,EAAE,KAAK,GAAEA,EAAC;AAAA,IAAC;AAAA,IAAC,MAAM,GAAE;AAAC,aAAO,KAAK,KAAK,MAAK,CAAC;AAAA,IAAC;AAAA,IAAC,oBAAoB,GAAE;AAAC,WAAG,CAAC,KAAK,cAAc,YAAY,KAAG,KAAK,cAAc,oBAAoB,mBAAkB,IAAE,EAAE,KAAK,IAAE,CAAC;AAAA,IAAC;AAAA,IAAC,iBAAiB,GAAE;AAAC,WAAG,CAAC,KAAK,cAAc,YAAY,MAAI,KAAK,WAAW,EAAE,CAAC,CAAC,GAAE,KAAK,cAAc,oBAAoB,EAAE,OAAO;AAAA,IAAE;AAAA,EAAC;AAAE,SAAO,IAAE,WAAE,CAAC,EAAE,mBAAmB,CAAC,GAAE,CAAC,GAAE;AAAC;AAA7uB,IAA+uB,IAAE,EAAE,CAAC;",
  "names": ["i", "s", "e"]
}
